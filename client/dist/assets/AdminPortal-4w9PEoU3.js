import{c as qe,r as a,j as e,X as le,b as Pt,D as Ue,d as rs,R as Hs,B as Xe,S as Ve,u as Vs,e as gs,f as Gs,M as Ys,h as Js,i as je}from"./index-CldpBSC-.js";import{b as oe,E as Mt,W as ve,T as ue,p as Tt,l as Re,n as Le,s as gt,Z as et,A as $e,U as re,k as ze,D as Ze,a1 as Qe,a as A,c as Se,a2 as Fe,a3 as Ks,C as Ee,m as Te,R as at,G as Et,x as yt,X as ft,Y as jt,y as nt,H as Ct,F as De,q as Ut,w as us,z as hs,P as bs,I as ys,J as fs,g as is,h as Xs,d as Ie,M as Wt,r as Zs,t as it,e as tt,j as pt,u as er,v as tr,S as Ht,_ as Nt,i as as,$ as sr,a0 as rr}from"./Portal-Cg5WPEZp.js";import{P as Ae,I as js,S as ir,B as $t,C as vs,F as St,L as ar,A as Ss,T as nr,W as ns,a as lr}from"./LiveMonitoring-DlaM9E3u.js";import{g as wt,L as Dt,f as _e,C as ks,a as Vt,P as or,i as dr,K as ls,T as os,c as cr,M as mr,d as pr,V as bt,e as xr,H as gr,h as ur,G as hr,E as br}from"./SkillSubmissions-C54gLQGH.js";const yr=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Cs=qe("archive",yr);const fr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ws=qe("circle-question-mark",fr);const jr=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m15 11-6 6",key:"1toa9n"}],["path",{d:"m9 11 6 6",key:"wlibny"}]],vr=qe("clipboard-x",jr);const Sr=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],kr=qe("hard-drive",Sr);const Cr=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 9h.01",key:"x1ddxp"}]],wr=qe("scan-face",Cr);const zr=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ds=qe("server",zr);const Ar=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Tr=qe("tag",Ar);const Nr=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],cs=qe("toggle-right",Nr);const Ir=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Rr=qe("trending-down",Ir);const Lr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],_r=qe("user-plus",Lr);function Br({initialTestCases:t=[],onUpdate:j,onClose:W,title:T="Coding Problem",inputLabel:v="Sample Input",outputLabel:y="Sample Output"}){const[g,I]=a.useState([]),[b,x]=a.useState({input:"",expectedOutput:"",isHidden:!1,points:10,description:""}),[d,m]=a.useState(!1),[o,M]=a.useState(null),[q,h]=a.useState({});a.useEffect(()=>{const i=t.map((S,P)=>({...S,_id:S._id||S.id||`temp-${Date.now()}-${P}`}));I(i)},[t]);const k=i=>{I(i),j(i)},w=()=>{if(!b.input&&!b.expectedOutput)return;const i={...b,_id:`temp-${Date.now()}`},S=[...g,i];k(S),x({input:"",expectedOutput:"",isHidden:!1,points:10,description:""}),m(!1)},B=i=>{const S=g.map(P=>P._id===i?{...P,...q}:P);k(S),M(null)},Q=i=>{if(window.confirm("Delete this test case?")){const S=g.filter(P=>P._id!==i);k(S)}},te=i=>{M(i._id),h({input:i.input||"",expectedOutput:i.expectedOutput||"",isHidden:i.isHidden||!1,points:i.points||10,description:i.description||""})};return e.jsx("div",{className:"modal-overlay",onClick:W,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:e.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),style:{width:"900px",maxWidth:"95vw",maxHeight:"85vh",background:"#1e293b",borderRadius:"16px",border:"1px solid rgba(139,92,246,0.2)",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 25px 50px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{className:"modal-header",style:{padding:"1.5rem",background:"rgba(15, 23, 42, 0.95)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #10b981, #059669)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(oe,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.2rem",color:"white"},children:"Test Cases Manager"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.85rem",color:"rgba(255,255,255,0.5)"},children:T})]})]}),e.jsx("button",{onClick:W,style:{background:"transparent",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:e.jsx(le,{size:24})})]}),e.jsxs("div",{className:"modal-body",style:{flex:1,overflowY:"auto",padding:"1.5rem",color:"white"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"1rem",borderRadius:"10px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#3b82f6"},children:g.length}),e.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:"Total Test Cases"})]}),e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",padding:"1rem",borderRadius:"10px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#10b981"},children:g.filter(i=>!i.isHidden).length}),e.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:"Visible"})]}),e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",padding:"1rem",borderRadius:"10px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#ef4444"},children:g.filter(i=>i.isHidden).length}),e.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:"Hidden"})]})]}),!d&&e.jsxs("button",{onClick:()=>m(!0),style:{width:"100%",padding:"1rem",background:"rgba(59, 130, 246, 0.1)",border:"2px dashed rgba(59, 130, 246, 0.3)",borderRadius:"10px",color:"#3b82f6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.9rem",fontWeight:600,marginBottom:"1.5rem"},children:[e.jsx(Ae,{size:18})," Add Test Case"]}),d&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"white"},children:[e.jsx(Ae,{size:16})," New Test Case"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:v}),e.jsx("textarea",{rows:"3",placeholder:"Enter test input...",value:b.input,onChange:i=>x({...b,input:i.target.value}),style:{width:"100%",padding:"0.5rem",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white",fontFamily:"monospace",fontSize:"0.85rem"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:y}),e.jsx("textarea",{rows:"3",placeholder:"Enter expected output...",value:b.expectedOutput,onChange:i=>x({...b,expectedOutput:i.target.value}),style:{width:"100%",padding:"0.5rem",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white",fontFamily:"monospace",fontSize:"0.85rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:"Description (optional)"}),e.jsx("input",{type:"text",placeholder:"e.g., Edge case with empty array",value:b.description,onChange:i=>x({...b,description:i.target.value}),style:{width:"100%",padding:"0.5rem",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:"Points"}),e.jsx("input",{type:"number",min:"1",max:"100",value:b.points,onChange:i=>x({...b,points:parseInt(i.target.value)||10}),style:{width:"100%",padding:"0.5rem",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:"Visibility"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[e.jsx("input",{type:"checkbox",id:"isHidden",checked:b.isHidden,onChange:i=>x({...b,isHidden:i.target.checked}),style:{width:"18px",height:"18px",accentColor:"#ef4444"}}),e.jsxs("label",{htmlFor:"isHidden",style:{cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"white"},children:[b.isHidden?e.jsx(Mt,{size:16,color:"#ef4444"}):e.jsx(ve,{size:16,color:"#10b981"}),b.isHidden?"Hidden":"Visible"]})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>m(!1),style:{padding:"0.5rem 1rem",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",color:"rgba(255,255,255,0.6)",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:w,style:{padding:"0.5rem 1rem",background:"#8b5cf6",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ae,{size:16})," Add Test Case"]})]})]}),g.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"rgba(255,255,255,0.4)"},children:[e.jsx(ue,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("h3",{children:"No Test Cases"}),e.jsx("p",{children:"Add test cases to enable automated grading"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:g.map((i,S)=>e.jsx("div",{style:{background:"rgba(0,0,0,0.2)",border:`1px solid ${i.isHidden?"rgba(239, 68, 68, 0.3)":"rgba(255,255,255,0.1)"}`,borderRadius:"10px",padding:"1rem",position:"relative"},children:o===i._id?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:v}),e.jsx("textarea",{rows:"3",value:q.input,onChange:P=>h({...q,input:P.target.value}),style:{width:"100%",padding:"0.5rem",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white",fontFamily:"monospace",fontSize:"0.85rem"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)"},children:y}),e.jsx("textarea",{rows:"3",value:q.expectedOutput,onChange:P=>h({...q,expectedOutput:P.target.value}),style:{width:"100%",padding:"0.5rem",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"white",fontFamily:"monospace",fontSize:"0.85rem"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>M(null),style:{padding:"0.4rem 0.75rem",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",color:"rgba(255,255,255,0.6)",cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:()=>B(i._id),style:{padding:"0.4rem 0.75rem",background:"#10b981",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Tt,{size:14})," Save"]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{width:"24px",height:"24px",background:"rgba(139,92,246,0.2)",color:"#a78bfa",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:700},children:S+1}),e.jsx("span",{style:{fontWeight:600,color:"white"},children:i.description||`Test Case ${S+1}`}),e.jsxs("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,background:i.isHidden?"rgba(239, 68, 68, 0.15)":"rgba(16, 185, 129, 0.15)",color:i.isHidden?"#ef4444":"#10b981",display:"flex",alignItems:"center",gap:"4px"},children:[i.isHidden?e.jsx(Mt,{size:10}):e.jsx(ve,{size:10}),i.isHidden?"Hidden":"Visible"]}),e.jsxs("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,background:"rgba(251, 191, 36, 0.15)",color:"#fbbf24"},children:[i.points," pts"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>te(i),style:{padding:"0.4rem",background:"rgba(59, 130, 246, 0.1)",border:"none",borderRadius:"6px",color:"#3b82f6",cursor:"pointer"},children:e.jsx(Re,{size:14})}),e.jsx("button",{onClick:()=>Q(i._id),style:{padding:"0.4rem",background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"6px",color:"#ef4444",cursor:"pointer"},children:e.jsx(Le,{size:14})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",marginBottom:"0.25rem"},children:[v,":"]}),e.jsx("code",{style:{display:"block",padding:"0.5rem",background:"#0f172a",borderRadius:"6px",fontSize:"0.8rem",whiteSpace:"pre-wrap",maxHeight:"80px",overflow:"auto",color:"rgba(255,255,255,0.9)"},children:i.input||"(empty)"})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",marginBottom:"0.25rem"},children:[y,":"]}),e.jsx("code",{style:{display:"block",padding:"0.5rem",background:"#0f172a",borderRadius:"6px",fontSize:"0.8rem",color:"#4ade80",whiteSpace:"pre-wrap",maxHeight:"80px",overflow:"auto"},children:i.expectedOutput})]})]})]})},i._id))})]})]})})}function Wr({user:t}){const[j,W]=a.useState([]),[T,v]=a.useState([]),[y,g]=a.useState({totalStudentsActive:[],totalMentorsActive:[],activeSubmissions:[],totalAlerts:0,criticalAlerts:0}),[I,b]=a.useState(!1);a.useEffect(()=>(gt.joinMonitoring(t.id,"admin"),b(!0),gt.onMonitoringConnected(m=>{console.log("âœ… Admin joined global monitoring:",m)}),gt.onLiveUpdate(m=>{W(o=>[m,...o.slice(0,99)]),g(o=>{const M=o.totalStudentsActive.includes(m.studentId)?o.totalStudentsActive:[...o.totalStudentsActive,m.studentId],q=m.mentorId&&!o.totalMentorsActive.includes(m.mentorId)?[...o.totalMentorsActive,m.mentorId]:o.totalMentorsActive;let h=o.activeSubmissions;return m.type==="submission_started"&&!o.activeSubmissions.includes(m.studentId)?h=[...o.activeSubmissions,m.studentId]:m.type==="submission_completed"&&(h=o.activeSubmissions.filter(k=>k!==m.studentId)),{...o,totalStudentsActive:M,totalMentorsActive:q,activeSubmissions:h}})}),gt.onLiveAlert(m=>{v(o=>[m,...o.slice(0,49)]),g(o=>({...o,totalAlerts:o.totalAlerts+1,criticalAlerts:o.criticalAlerts+(m.severity==="critical"?1:0)}))}),()=>{gt.disconnect(),b(!1)}),[t.id]);const x=m=>{switch(m){case"submission_started":return e.jsx($e,{className:"w-4 h-4 text-blue-500"});case"submission_completed":return"âœ…";case"progress_update":return"â±ï¸";case"test_failed":return"âŒ";default:return"ðŸ“Š"}},d=m=>new Date(m).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return e.jsxs("div",{className:"live-monitoring-container",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"ðŸ›¡ï¸ Global Live Monitoring Dashboard"}),e.jsxs("div",{className:"status-bar",children:[e.jsxs("div",{className:`status-item ${I?"active":"inactive"}`,children:[e.jsx("div",{className:"status-dot"}),e.jsx("span",{children:I?"Global Monitoring Active":"Not Monitoring"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx(et,{size:16,className:"text-blue-500"}),e.jsx("span",{className:"font-semibold text-blue-600",children:y.activeSubmissions.length}),e.jsx("span",{className:"ml-1",children:"Students Working"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx(Pt,{size:16,className:"text-cyan-500"}),e.jsx("span",{className:"font-semibold text-cyan-600",children:y.totalStudentsActive.length}),e.jsx("span",{className:"ml-1",children:"Total Visited"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx(Pt,{size:16,className:"text-purple-500"}),e.jsx("span",{className:"font-semibold text-purple-600",children:y.totalMentorsActive.length}),e.jsx("span",{className:"ml-1",children:"Active Mentors"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx(ue,{size:16,className:"text-red-500"}),e.jsx("span",{className:"font-semibold text-red-600",children:y.totalAlerts}),e.jsx("span",{className:"ml-1",children:"Total Alerts"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx(ue,{size:16,className:"text-orange-600"}),e.jsx("span",{className:"font-semibold text-orange-600",children:y.criticalAlerts}),e.jsx("span",{className:"ml-1",children:"Critical"})]})]}),e.jsxs("div",{className:"flex gap-6 mt-6",children:[e.jsxs("div",{className:"flex-1 max-w-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ue,{size:20,className:"text-red-500"}),"Critical Alerts (",y.criticalAlerts,")"]}),e.jsx("div",{className:"alerts-list admin-alerts",children:T.filter(m=>m.severity==="critical").length===0?e.jsx("div",{className:"empty-state",children:"No critical alerts"}):T.filter(m=>m.severity==="critical").map((m,o)=>e.jsxs("div",{className:"alert-item severity-critical",children:[e.jsx("div",{className:"alert-header",children:e.jsxs("span",{className:"font-semibold text-red-900",children:["ðŸš¨ ",m.studentName||`Student ${m.studentId}`," - ",(m.violationType||"unknown").replace(/_/g," ")]})}),e.jsx("div",{className:"alert-time",children:d(m.timestamp)})]},o))})]}),e.jsxs("div",{className:"flex-1 max-w-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ue,{size:20,className:"text-orange-500"}),"All Alerts (",T.length,")"]}),e.jsx("div",{className:"alerts-list admin-alerts",children:T.length===0?e.jsx("div",{className:"empty-state",children:"No alerts"}):T.map((m,o)=>e.jsxs("div",{className:`alert-item severity-${m.severity}`,children:[e.jsxs("div",{className:"alert-header",children:[e.jsxs("span",{className:"font-semibold",children:[m.studentName||`Student ${m.studentId}`," - ",(m.violationType||"unknown").replace(/_/g," ")]}),e.jsx("span",{className:`severity-badge severity-${m.severity}`,children:m.severity})]}),e.jsx("div",{className:"alert-time",children:d(m.timestamp)})]},o))})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx($e,{size:20,className:"text-blue-500"}),"Global Activity Feed (",j.length,")"]}),e.jsx("div",{className:"updates-list admin-updates",children:j.length===0?e.jsx("div",{className:"empty-state",children:"Waiting for activity..."}):j.map((m,o)=>e.jsxs("div",{className:`update-item type-${m.type}`,children:[e.jsx("div",{className:"update-icon",children:x(m.type)}),e.jsx("div",{className:"update-content",children:e.jsxs("div",{className:"update-title",children:[m.type==="submission_started"&&e.jsxs("span",{children:[e.jsx("strong",{children:m.studentName||`Student ${m.studentId}`})," started",e.jsxs("strong",{children:[" ",m.problemTitle]}),m.isProctored&&e.jsx("span",{className:"badge-proctored",children:"Proctored"})]}),m.type==="submission_completed"&&e.jsxs("span",{children:[e.jsx("strong",{children:m.studentName||`Student ${m.studentId}`})," completed",e.jsxs("strong",{children:[" ",m.problemTitle]}),e.jsx("span",{className:`badge-status status-${m.status}`,children:m.status})]}),m.type==="progress_update"&&e.jsxs("span",{children:[e.jsx("strong",{children:m.studentName||`Student ${m.studentId}`})," -",e.jsxs("strong",{children:[" ",m.problemId]}),e.jsxs("span",{className:"badge-progress",children:[m.progress,"%"]})]}),m.type==="test_failed"&&e.jsxs("span",{children:[e.jsx("strong",{children:m.studentName||`Student ${m.studentId}`})," - Test failed:",e.jsxs("strong",{children:[" ",m.testname]})]})]})}),e.jsx("div",{className:"update-time",children:d(m.timestamp)})]},o))})]}),e.jsx("style",{children:`
                .admin-alerts {
                    max-height: 400px;
                }
                
                .admin-updates {
                    max-height: 500px;
                }

                .severity-badge.severity-critical {
                    background: #dc2626;
                    color: white;
                    font-size: 0.75rem;
                    padding: 0.25rem 0.75rem;
                    border-radius: 9999px;
                }

                .severity-badge.severity-warning {
                    background: #f59e0b;
                    color: white;
                    font-size: 0.75rem;
                    padding: 0.25rem 0.75rem;
                    border-radius: 9999px;
                }
            `})]})}const me="http://localhost:3000/api",ms=["#3b82f6","#8b5cf6","#06b6d4","#10b981","#f59e0b","#ef4444","#ec4899","#14b8a6"],ae={background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",transition:"all 0.3s ease"},He={padding:"0.6rem 1.2rem",borderRadius:"10px",border:"none",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",color:"white",fontWeight:600,cursor:"pointer",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease"},Ge={...He,background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.3)"},Gt={...He,background:"linear-gradient(135deg, #ef4444, #dc2626)"},mt={width:"100%",padding:"0.7rem 1rem",borderRadius:"10px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"var(--text)",fontSize:"0.85rem",outline:"none"},zt={...mt,cursor:"pointer"},qt=t=>({padding:"0.7rem 1.5rem",borderRadius:"10px",border:t?"none":"1px solid var(--border-color)",background:t?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"transparent",color:t?"white":"var(--text-muted)",fontWeight:600,cursor:"pointer",fontSize:"0.85rem",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"}),Me=t=>({padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.7rem",fontWeight:600,background:`${t}20`,color:t,display:"inline-flex",alignItems:"center",gap:"0.3rem"}),lt={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},Ot={position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},Ft={background:"var(--bg-card)",borderRadius:"20px",padding:"2rem",maxWidth:"700px",width:"95%",maxHeight:"85vh",overflowY:"auto",border:"1px solid var(--border-color)",boxShadow:"0 25px 50px rgba(0,0,0,0.3)"};function At({status:t}){const W={healthy:"#10b981",warning:"#f59e0b",degraded:"#f59e0b",error:"#ef4444",down:"#ef4444",completed:"#10b981",running:"#3b82f6",failed:"#ef4444",pending:"#f59e0b",passed:"#10b981"}[t]||"#6b7280",T={healthy:e.jsx(oe,{size:12}),completed:e.jsx(oe,{size:12}),passed:e.jsx(oe,{size:12}),warning:e.jsx(ue,{size:12}),degraded:e.jsx(ue,{size:12}),error:e.jsx(Ee,{size:12}),down:e.jsx(Ee,{size:12}),failed:e.jsx(Ee,{size:12}),running:e.jsx($e,{size:12}),pending:e.jsx(Se,{size:12})};return e.jsxs("span",{style:Me(W),children:[T[t],t]})}function Pr(){const[t,j]=a.useState("health"),W=[{id:"health",label:"System Health",icon:e.jsx($e,{size:16})},{id:"bulk",label:"Bulk Operations",icon:e.jsx(re,{size:16})},{id:"audit",label:"Audit Logs",icon:e.jsx(ze,{size:16})},{id:"templates",label:"Templates",icon:e.jsx(Dt,{size:16})},{id:"backups",label:"Backups",icon:e.jsx(Ue,{size:16})},{id:"export",label:"Data Export",icon:e.jsx(Ze,{size:16})},{id:"analytics",label:"Analytics",icon:e.jsx(Qe,{size:16})}];return e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 50%, rgba(6, 182, 212, 0.05) 100%)",borderRadius:"20px",padding:"2rem 2.5rem",marginBottom:"1.5rem",border:"1px solid rgba(59, 130, 246, 0.2)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(139, 92, 246, 0.15) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsxs("div",{style:{position:"relative",zIndex:1,display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"14px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(59, 130, 246, 0.3)"},children:e.jsx(wt,{size:26,color:"white"})}),e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:"1.6rem",fontWeight:800,background:"linear-gradient(135deg, #fff, #94a3b8)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Admin Operations Center"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.85rem"},children:"System health, bulk operations, audit logs, backups & analytics"})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"14px",border:"1px solid var(--border-color)"},children:W.map(T=>e.jsxs("button",{onClick:()=>j(T.id),style:qt(t===T.id),children:[T.icon," ",T.label]},T.id))}),t==="health"&&e.jsx(Mr,{}),t==="bulk"&&e.jsx(Er,{}),t==="audit"&&e.jsx($r,{}),t==="templates"&&e.jsx(Dr,{}),t==="backups"&&e.jsx(qr,{}),t==="export"&&e.jsx(Or,{}),t==="analytics"&&e.jsx(Fr,{})]})}function Mr(){const[t,j]=a.useState(null),[W,T]=a.useState(!0),[v,y]=a.useState(!1),g=a.useCallback(async()=>{try{const b=await A.get(`${me}/admin/system-health`);j(b.data)}catch(b){console.error("Health check failed:",b)}finally{T(!1)}},[]);if(a.useEffect(()=>{if(g(),v){const b=setInterval(g,1e4);return()=>clearInterval(b)}},[g,v]),W)return e.jsx("div",{className:"loading-spinner"});if(!t)return e.jsx("div",{style:{color:"var(--text-muted)",textAlign:"center",padding:"3rem"},children:"Failed to load system health"});const I=t.status==="healthy"?"#10b981":t.status==="warning"?"#f59e0b":"#ef4444";return e.jsxs("div",{children:[e.jsxs("div",{style:lt,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem"},children:"System Health Monitor"}),e.jsx(At,{status:t.status})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.4rem",color:"var(--text-muted)",fontSize:"0.8rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:v,onChange:b=>y(b.target.checked)}),"Auto-refresh (10s)"]}),e.jsxs("button",{onClick:g,style:Ge,children:[e.jsx(_e,{size:14})," Refresh"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{...ae,borderLeft:`4px solid ${I}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",background:`${I}20`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx($e,{size:20,color:I})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"System Status"}),e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:700,color:I,textTransform:"capitalize"},children:t.status})]})]}),e.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.7rem",color:"var(--text-muted)"},children:["API Latency: ",t.apiLatency,"ms"]})]}),e.jsxs("div",{style:{...ae,borderLeft:"4px solid #3b82f6"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",background:"rgba(59, 130, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ue,{size:20,color:"#3b82f6"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Database"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(At,{status:t.database.status}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[t.database.latency,"ms"]})]})]})]}),e.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.7rem",color:"var(--text-muted)"},children:[t.database.tableCount," tables Â· ",t.database.totalSizeMB," MB"]})]}),e.jsxs("div",{style:{...ae,borderLeft:"4px solid #8b5cf6"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",background:"rgba(139, 92, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rs,{size:20,color:"#8b5cf6"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Memory Usage"}),e.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:700,color:"var(--text)"},children:[t.memory.heapUsed," MB"]})]})]}),e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsx("div",{style:{height:"6px",background:"rgba(139, 92, 246, 0.15)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${t.memory.heapPercent}%`,background:t.memory.heapPercent>80?"#ef4444":"#8b5cf6",borderRadius:"3px",transition:"width 0.5s"}})}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[t.memory.heapPercent,"% of ",t.memory.heapTotal," MB heap"]})]})]}),e.jsxs("div",{style:{...ae,borderLeft:"4px solid #06b6d4"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",background:"rgba(6, 182, 212, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Se,{size:20,color:"#06b6d4"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Uptime"}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:700,color:"var(--text)"},children:t.uptime.formatted})]})]}),e.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.7rem",color:"var(--text-muted)"},children:["WebSockets: ",t.websockets.total," connected Â· Node ",t.nodeVersion]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{style:ae,children:[e.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ue,{size:16,color:"#3b82f6"})," Database Tables"]}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.5rem",color:"var(--text-muted)"},children:"Table"}),e.jsx("th",{style:{textAlign:"right",padding:"0.5rem",color:"var(--text-muted)"},children:"Rows"}),e.jsx("th",{style:{textAlign:"right",padding:"0.5rem",color:"var(--text-muted)"},children:"Size"})]})}),e.jsx("tbody",{children:(t.database.tables||[]).map((b,x)=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("td",{style:{padding:"0.5rem",color:"var(--text)",fontFamily:"monospace",fontSize:"0.75rem"},children:b.tableName}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",color:"var(--text)"},children:(b.rowCount||0).toLocaleString()}),e.jsxs("td",{style:{padding:"0.5rem",textAlign:"right",color:"var(--text-muted)"},children:[b.sizeMB," MB"]})]},x))})]})})]}),e.jsxs("div",{style:ae,children:[e.jsxs("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ds,{size:16,color:"#8b5cf6"})," System Details"]}),e.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:[{label:"Node.js Version",value:t.nodeVersion,icon:e.jsx(Fe,{size:14})},{label:"Platform",value:t.platform,icon:e.jsx(ds,{size:14})},{label:"RSS Memory",value:`${t.memory.rss} MB`,icon:e.jsx(rs,{size:14})},{label:"External Memory",value:`${t.memory.external} MB`,icon:e.jsx(kr,{size:14})},{label:"Upload Storage",value:`${t.storage.uploadsSizeMB} MB`,icon:e.jsx(Cs,{size:14})},{label:"Cache Items",value:t.cache.totalItems,icon:e.jsx(et,{size:14})},{label:"WS Mentors Online",value:t.websockets.mentors,icon:e.jsx(Ks,{size:14})},{label:"WS Students Online",value:t.websockets.students,icon:e.jsx(re,{size:14})},{label:"WS Admins Online",value:t.websockets.admins,icon:e.jsx(ze,{size:14})},{label:"Recent Errors (24h)",value:t.recentErrors,icon:e.jsx(ue,{size:14})}].map((b,x)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0.75rem",background:"rgba(255,255,255,0.02)",borderRadius:"8px"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)",fontSize:"0.8rem"},children:[b.icon," ",b.label]}),e.jsx("span",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:b.value})]},x))})]})]})]})}function Er(){const[t,j]=a.useState("reassign"),[W,T]=a.useState([]),[v,y]=a.useState([]),[g,I]=a.useState([]),[b,x]=a.useState([]),[d,m]=a.useState([]),[o,M]=a.useState(""),[q,h]=a.useState("mark_passed"),[k,w]=a.useState(!0),[B,Q]=a.useState(!1),[te,i]=a.useState(null),[S,P]=a.useState("");a.useEffect(()=>{Promise.all([A.get(`${me}/users`),A.get(`${me}/submissions`)]).then(([f,J])=>{const C=Array.isArray(f.data)?f.data:f.data.users||[];T(C.filter(L=>L.role==="student")),y(C.filter(L=>L.role==="mentor")),I(Array.isArray(J.data)?J.data:J.data.submissions||[]),w(!1)}).catch(()=>w(!1))},[]);const G=async()=>{if(!(b.length===0||!o)){Q(!0);try{const f=await A.post(`${me}/admin/bulk/reassign-students`,{studentIds:b,newMentorId:o,adminId:"admin-001",adminName:"Admin"});i({type:"success",message:f.data.message}),x([])}catch(f){i({type:"error",message:f.response?.data?.error||f.message})}Q(!1)}},V=async()=>{if(d.length!==0){Q(!0);try{const f=await A.post(`${me}/admin/bulk/regrade-submissions`,{submissionIds:d,action:q,adminId:"admin-001",adminName:"Admin"});i({type:"success",message:f.data.message}),m([])}catch(f){i({type:"error",message:f.response?.data?.error||f.message})}Q(!1)}},Z=async()=>{if(d.length!==0&&window.confirm(`Delete ${d.length} submissions? This cannot be undone.`)){Q(!0);try{const f=await A.post(`${me}/admin/bulk/delete-submissions`,{submissionIds:d,adminId:"admin-001",adminName:"Admin"});i({type:"success",message:f.data.message}),m([]),I(J=>J.filter(C=>!d.includes(C.id)))}catch(f){i({type:"error",message:f.response?.data?.error||f.message})}Q(!1)}};if(k)return e.jsx("div",{className:"loading-spinner"});const ne=W.filter(f=>f.name?.toLowerCase().includes(S.toLowerCase())||f.email?.toLowerCase().includes(S.toLowerCase()));return e.jsxs("div",{children:[e.jsx("div",{style:lt,children:e.jsxs("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(re,{size:20,color:"#3b82f6"})," Bulk Operations"]})}),te&&e.jsxs("div",{style:{padding:"1rem 1.5rem",borderRadius:"12px",marginBottom:"1rem",background:te.type==="success"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",border:`1px solid ${te.type==="success"?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,color:te.type==="success"?"#10b981":"#ef4444",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[te.type==="success"?e.jsx(oe,{size:16}):e.jsx(Ee,{size:16}),te.message]}),e.jsx("button",{onClick:()=>i(null),style:{background:"none",border:"none",color:"inherit",cursor:"pointer"},children:e.jsx(le,{size:16})})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[e.jsxs("button",{onClick:()=>j("reassign"),style:qt(t==="reassign"),children:[e.jsx(re,{size:14})," Reassign Students"]}),e.jsxs("button",{onClick:()=>j("regrade"),style:qt(t==="regrade"),children:[e.jsx(_e,{size:14})," Regrade Submissions"]})]}),t==="reassign"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 350px",gap:"1.5rem"},children:[e.jsxs("div",{style:ae,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(Te,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{placeholder:"Search students...",value:S,onChange:f=>P(f.target.value),style:{...mt,paddingLeft:"2.2rem"}})]}),e.jsx("button",{onClick:()=>x(b.length===ne.length?[]:ne.map(f=>f.id)),style:Ge,children:b.length===ne.length?"Deselect All":"Select All"})]}),e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ne.map(f=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.65rem 0.75rem",borderRadius:"8px",cursor:"pointer",background:b.includes(f.id)?"rgba(59, 130, 246, 0.08)":"transparent",border:`1px solid ${b.includes(f.id)?"rgba(59, 130, 246, 0.3)":"transparent"}`,marginBottom:"0.25rem",transition:"all 0.15s ease"},children:[e.jsx("input",{type:"checkbox",checked:b.includes(f.id),onChange:J=>{x(C=>J.target.checked?[...C,f.id]:C.filter(L=>L!==f.id))},style:{accentColor:"#3b82f6"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:f.name}),e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem"},children:[f.email," Â· ",f.batch||"No batch"]})]}),e.jsx("span",{style:Me("#6b7280"),children:f.mentor_id||"Unassigned"})]},f.id))})]}),e.jsx("div",{children:e.jsxs("div",{style:ae,children:[e.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Reassignment"}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#3b82f6",marginBottom:"0.5rem"},children:b.length}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem",marginBottom:"1.5rem"},children:"students selected"}),e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:"Assign to Mentor"}),e.jsxs("select",{value:o,onChange:f=>M(f.target.value),style:{...zt,marginBottom:"1.5rem"},children:[e.jsx("option",{value:"",children:"Select mentor..."}),v.map(f=>e.jsxs("option",{value:f.id,children:[f.name," (",f.email,")"]},f.id))]}),e.jsxs("button",{onClick:G,disabled:b.length===0||!o||B,style:{...He,width:"100%",justifyContent:"center",opacity:b.length===0||!o?.5:1},children:[B?e.jsx(_e,{size:16,className:"spin"}):e.jsx(re,{size:16}),"Reassign ",b.length," Students"]})]})})]}),t==="regrade"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 350px",gap:"1.5rem"},children:[e.jsxs("div",{style:ae,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:[g.length," submissions"]}),e.jsx("button",{onClick:()=>m(d.length===g.length?[]:g.map(f=>f.id)),style:Ge,children:d.length===g.length?"Deselect All":"Select All"})]}),e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:g.slice(0,100).map(f=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.65rem 0.75rem",borderRadius:"8px",cursor:"pointer",background:d.includes(f.id)?"rgba(59, 130, 246, 0.08)":"transparent",border:`1px solid ${d.includes(f.id)?"rgba(59, 130, 246, 0.3)":"transparent"}`,marginBottom:"0.25rem"},children:[e.jsx("input",{type:"checkbox",checked:d.includes(f.id),onChange:J=>{m(C=>J.target.checked?[...C,f.id]:C.filter(L=>L!==f.id))},style:{accentColor:"#3b82f6"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.82rem"},children:f.studentName||f.student_name||"Unknown"}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem"},children:f.problemTitle||f.problem_title||f.problem_id})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:"0.85rem",color:(f.score||0)>=60?"#10b981":"#ef4444"},children:[f.score||0,"%"]}),e.jsx(At,{status:f.status||"pending"})]})]},f.id))})]}),e.jsx("div",{children:e.jsxs("div",{style:ae,children:[e.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Bulk Actions"}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#8b5cf6",marginBottom:"0.5rem"},children:d.length}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem",marginBottom:"1.5rem"},children:"submissions selected"}),e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:"Action"}),e.jsxs("select",{value:q,onChange:f=>h(f.target.value),style:{...zt,marginBottom:"1rem"},children:[e.jsx("option",{value:"mark_passed",children:"Mark as Passed (score â‰¥ 60)"}),e.jsx("option",{value:"mark_failed",children:"Mark as Failed (score = 0)"}),e.jsx("option",{value:"reset_scores",children:"Reset Scores (score = 0, pending)"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[e.jsxs("button",{onClick:V,disabled:d.length===0||B,style:{...He,width:"100%",justifyContent:"center",opacity:d.length===0?.5:1},children:[B?e.jsx(_e,{size:16,className:"spin"}):e.jsx(_e,{size:16}),"Apply to ",d.length," Submissions"]}),e.jsxs("button",{onClick:Z,disabled:d.length===0||B,style:{...Gt,width:"100%",justifyContent:"center",opacity:d.length===0?.5:1},children:[e.jsx(Le,{size:16})," Delete ",d.length," Submissions"]})]})]})})]})]})}function $r(){const[t,j]=a.useState([]),[W,T]=a.useState(null),[v,y]=a.useState(!0),[g,I]=a.useState(1),[b,x]=a.useState(0),[d,m]=a.useState(0),[o,M]=a.useState({action:"",resourceType:""}),[q,h]=a.useState(null);a.useEffect(()=>{(async()=>{y(!0);try{const B=new URLSearchParams({page:g,limit:30});o.action&&B.append("action",o.action),o.resourceType&&B.append("resourceType",o.resourceType);const[Q,te]=await Promise.all([A.get(`${me}/admin/audit-logs?${B}`),A.get(`${me}/admin/audit-logs/stats`)]);j(Q.data.logs),x(Q.data.pagination.total),m(Q.data.pagination.totalPages),T(te.data)}catch(B){console.error("Audit logs error:",B)}y(!1)})()},[g,o]);const k={bulk_reassign_students:"#3b82f6",bulk_regrade:"#8b5cf6",bulk_delete_submissions:"#ef4444",create_backup:"#10b981",create_template:"#06b6d4",delete_template:"#ef4444",apply_template:"#f59e0b",data_export:"#ec4899"};return e.jsxs("div",{children:[e.jsxs("div",{style:lt,children:[e.jsxs("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ze,{size:20,color:"#8b5cf6"})," Audit Trail"]}),e.jsxs("span",{style:Me("#8b5cf6"),children:[b," total logs"]})]}),W&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:ae,children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"#8b5cf6"},children:W.totalLogs}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Total Logs"})]}),e.jsxs("div",{style:ae,children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"#3b82f6"},children:W.actionBreakdown?.length||0}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Unique Actions"})]}),e.jsxs("div",{style:ae,children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"#10b981"},children:W.userActivity?.length||0}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Active Users"})]}),e.jsxs("div",{style:ae,children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"#06b6d4"},children:W.recentActivity?.reduce((w,B)=>w+B.count,0)||0}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Last 7 Days"})]})]}),W?.recentActivity?.length>0&&e.jsxs("div",{style:{...ae,marginBottom:"1.5rem"},children:[e.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Activity Trend (7 Days)"}),e.jsx(at,{width:"100%",height:200,children:e.jsxs(Et,{data:W.recentActivity,children:[e.jsx(yt,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.06)"}),e.jsx(ft,{dataKey:"date",tick:{fill:"#94a3b8",fontSize:11}}),e.jsx(jt,{tick:{fill:"#94a3b8",fontSize:11}}),e.jsx(nt,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px"}}),e.jsx(Ct,{dataKey:"count",fill:"#8b5cf6",radius:[4,4,0,0]})]})})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsx("input",{placeholder:"Filter by action...",value:o.action,onChange:w=>{M(B=>({...B,action:w.target.value})),I(1)},style:{...mt,maxWidth:"250px"}}),e.jsxs("select",{value:o.resourceType,onChange:w=>{M(B=>({...B,resourceType:w.target.value})),I(1)},style:{...zt,maxWidth:"200px"},children:[e.jsx("option",{value:"",children:"All Resources"}),e.jsx("option",{value:"allocation",children:"Allocation"}),e.jsx("option",{value:"submission",children:"Submission"}),e.jsx("option",{value:"template",children:"Template"}),e.jsx("option",{value:"backup",children:"Backup"})]})]}),v?e.jsx("div",{className:"loading-spinner"}):e.jsx("div",{style:ae,children:t.length===0?e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:"No audit logs found. Actions will be logged as you use admin features."}):e.jsxs(e.Fragment,{children:[t.map(w=>e.jsxs("div",{onClick:()=>h(w),style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",borderRadius:"10px",cursor:"pointer",borderBottom:"1px solid rgba(255,255,255,0.04)",transition:"background 0.15s"},onMouseOver:B=>B.currentTarget.style.background="rgba(255,255,255,0.03)",onMouseOut:B=>B.currentTarget.style.background="transparent",children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:k[w.action]||"#6b7280",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.82rem"},children:w.action?.replace(/_/g," ")}),e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem"},children:[w.user_name||"System"," Â· ",w.resource_type||""]})]}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem",textAlign:"right"},children:new Date(w.timestamp).toLocaleString()}),e.jsx(ve,{size:14,color:"var(--text-muted)"})]},w.id)),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("button",{disabled:g<=1,onClick:()=>I(w=>w-1),style:{...Ge,opacity:g<=1?.4:1},children:[e.jsx(ks,{size:14})," Prev"]}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:["Page ",g," of ",d]}),e.jsxs("button",{disabled:g>=d,onClick:()=>I(w=>w+1),style:{...Ge,opacity:g>=d?.4:1},children:["Next ",e.jsx(Vt,{size:14})]})]})]})}),q&&e.jsx("div",{style:Ot,onClick:()=>h(null),children:e.jsxs("div",{style:Ft,onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h3",{style:{margin:0,color:"var(--text)"},children:"Audit Log Detail"}),e.jsx("button",{onClick:()=>h(null),style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:e.jsx(le,{size:20})})]}),e.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:[{label:"Action",value:q.action?.replace(/_/g," ")},{label:"User",value:`${q.user_name} (${q.user_role})`},{label:"Resource",value:`${q.resource_type||"-"} / ${q.resource_id||"-"}`},{label:"IP Address",value:q.ip_address||"-"},{label:"Timestamp",value:new Date(q.timestamp).toLocaleString()}].map((w,B)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:w.label}),e.jsx("span",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:w.value})]},B))}),q.details&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.85rem",marginBottom:"0.5rem",fontWeight:600},children:"Details (JSON)"}),e.jsx("pre",{style:{background:"rgba(0,0,0,0.2)",padding:"1rem",borderRadius:"10px",fontSize:"0.75rem",color:"#06b6d4",overflowX:"auto",maxHeight:"250px"},children:JSON.stringify(q.details,null,2)})]})]})})]})}function Dr(){const[t,j]=a.useState([]),[W,T]=a.useState([]),[v,y]=a.useState(!0),[g,I]=a.useState(!1),[b,x]=a.useState(null),[d,m]=a.useState({name:"",description:"",difficulty:"Mixed",tags:"",problemIds:[]});a.useEffect(()=>{Promise.all([A.get(`${me}/admin/templates`),A.get(`${me}/problems`)]).then(([k,w])=>{j(k.data);const B=Array.isArray(w.data)?w.data:w.data.problems||[];T(B),y(!1)}).catch(()=>y(!1))},[]);const o=async()=>{try{const k=await A.post(`${me}/admin/templates`,{...d,tags:d.tags.split(",").map(w=>w.trim()).filter(Boolean),createdBy:"admin-001",adminName:"Admin"});j(w=>[{...d,id:k.data.id,problemCount:d.problemIds.length,created_at:new Date},...w]),I(!1),m({name:"",description:"",difficulty:"Mixed",tags:"",problemIds:[]})}catch(k){alert(k.response?.data?.error||k.message)}},M=async k=>{if(window.confirm("Delete this template?"))try{await A.delete(`${me}/admin/templates/${k}?adminId=admin-001&adminName=Admin`),j(w=>w.filter(B=>B.id!==k))}catch(w){alert(w.response?.data?.error||w.message)}},q=async k=>{try{const w=await A.post(`${me}/admin/templates/${k}/apply`,{adminId:"admin-001",adminName:"Admin"});alert(w.data.message)}catch(w){alert(w.response?.data?.error||w.message)}},h=async k=>{try{const w=await A.get(`${me}/admin/templates/${k}`);x(w.data)}catch{alert("Failed to load template details")}};return v?e.jsx("div",{className:"loading-spinner"}):e.jsxs("div",{children:[e.jsxs("div",{style:lt,children:[e.jsxs("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Dt,{size:20,color:"#06b6d4"})," Problem Set Templates"]}),e.jsxs("button",{onClick:()=>I(!0),style:He,children:[e.jsx(Ae,{size:16})," New Template"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem"},children:[t.map(k=>e.jsxs("div",{style:{...ae,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"100px",height:"100px",background:"radial-gradient(circle at top right, rgba(6, 182, 212, 0.1), transparent 70%)"}}),e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,color:"var(--text)",fontSize:"1rem"},children:k.name}),e.jsx("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)",fontSize:"0.8rem"},children:k.description||"No description"})]}),e.jsx("span",{style:Me("#06b6d4"),children:k.difficulty})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:[e.jsxs("span",{style:Me("#3b82f6"),children:[e.jsx(De,{size:10})," ",k.problemCount||0," problems"]}),(Array.isArray(k.tags)?k.tags:[]).map((w,B)=>e.jsx("span",{style:Me("#8b5cf6"),children:w},B))]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>h(k.id),style:{...Ge,flex:1,justifyContent:"center",padding:"0.5rem"},children:[e.jsx(ve,{size:14})," View"]}),e.jsxs("button",{onClick:()=>q(k.id),style:{...He,flex:1,justifyContent:"center",padding:"0.5rem"},children:[e.jsx(or,{size:14})," Apply"]}),e.jsx("button",{onClick:()=>M(k.id),style:{...Gt,padding:"0.5rem"},children:e.jsx(Le,{size:14})})]})]})]},k.id)),t.length===0&&e.jsxs("div",{style:{...ae,gridColumn:"1 / -1",textAlign:"center",padding:"3rem"},children:[e.jsx(Dt,{size:48,color:"var(--text-muted)",style:{marginBottom:"1rem",opacity:.3}}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"No templates yet. Create your first problem set template!"})]})]}),g&&e.jsx("div",{style:Ot,onClick:()=>I(!1),children:e.jsxs("div",{style:Ft,onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h3",{style:{margin:0,color:"var(--text)"},children:"Create Problem Set Template"}),e.jsx("button",{onClick:()=>I(!1),style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:e.jsx(le,{size:20})})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:"Template Name"}),e.jsx("input",{value:d.name,onChange:k=>m(w=>({...w,name:k.target.value})),placeholder:"e.g., Beginner Python Set",style:mt})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:"Description"}),e.jsx("textarea",{value:d.description,onChange:k=>m(w=>({...w,description:k.target.value})),placeholder:"Describe this template...",style:{...mt,minHeight:"70px",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:"Difficulty"}),e.jsxs("select",{value:d.difficulty,onChange:k=>m(w=>({...w,difficulty:k.target.value})),style:zt,children:[e.jsx("option",{value:"Mixed",children:"Mixed"}),e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:"Tags (comma-separated)"}),e.jsx("input",{value:d.tags,onChange:k=>m(w=>({...w,tags:k.target.value})),placeholder:"python, loops, basics",style:mt})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.4rem",color:"var(--text-muted)",fontSize:"0.8rem",fontWeight:600},children:["Select Problems (",d.problemIds.length," selected)"]}),e.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",border:"1px solid var(--border-color)",borderRadius:"10px",padding:"0.5rem"},children:W.map(k=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem 0.5rem",borderRadius:"6px",cursor:"pointer",background:d.problemIds.includes(k.id)?"rgba(6, 182, 212, 0.08)":"transparent"},children:[e.jsx("input",{type:"checkbox",checked:d.problemIds.includes(k.id),onChange:w=>{m(B=>({...B,problemIds:w.target.checked?[...B.problemIds,k.id]:B.problemIds.filter(Q=>Q!==k.id)}))},style:{accentColor:"#06b6d4"}}),e.jsx("span",{style:{color:"var(--text)",fontSize:"0.82rem"},children:k.title}),e.jsx("span",{style:{marginLeft:"auto",...Me("#6b7280")},children:k.difficulty})]},k.id))})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>I(!1),style:Ge,children:"Cancel"}),e.jsxs("button",{onClick:o,disabled:!d.name,style:{...He,opacity:d.name?1:.5},children:[e.jsx(Tt,{size:16})," Create Template"]})]})]})}),b&&e.jsx("div",{style:Ot,onClick:()=>x(null),children:e.jsxs("div",{style:Ft,onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,color:"var(--text)"},children:b.name}),e.jsx("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)",fontSize:"0.85rem"},children:b.description})]}),e.jsx("button",{onClick:()=>x(null),style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:e.jsx(le,{size:20})})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("span",{style:Me("#06b6d4"),children:b.difficulty}),(b.tags||[]).map((k,w)=>e.jsx("span",{style:Me("#8b5cf6"),children:k},w))]}),e.jsxs("h4",{style:{color:"var(--text)",marginBottom:"0.75rem"},children:["Problems (",b.problems?.length||0,")"]}),(b.problems||[]).map((k,w)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"10px",marginBottom:"0.5rem",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.04)"},children:[e.jsx("span",{style:{width:"28px",height:"28px",borderRadius:"8px",background:"rgba(6, 182, 212, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.75rem",color:"#06b6d4"},children:w+1}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:k.title}),e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem"},children:[k.language," Â· ",k.difficulty]})]})]},k.id))]})})]})}function qr(){const[t,j]=a.useState([]),[W,T]=a.useState(!0),[v,y]=a.useState(!1);a.useEffect(()=>{A.get(`${me}/admin/backups`).then(x=>{j(x.data),T(!1)}).catch(()=>T(!1))},[]);const g=async()=>{y(!0);try{const x=await A.post(`${me}/admin/backups`,{adminId:"admin-001",adminName:"Admin"});j(d=>[{id:x.data.backupId,status:"completed",backup_type:"full",fileSizeFormatted:x.data.fileSize,tables_backed_up:x.data.tables,created_at:new Date},...d])}catch(x){alert("Backup failed: "+(x.response?.data?.error||x.message))}y(!1)},I=async x=>{if(window.confirm("Delete this backup?"))try{await A.delete(`${me}/admin/backups/${x}`),j(d=>d.filter(m=>m.id!==x))}catch(d){alert("Error: "+d.message)}},b=x=>{window.open(`${me}/admin/backups/${x}/download`,"_blank")};return W?e.jsx("div",{className:"loading-spinner"}):e.jsxs("div",{children:[e.jsxs("div",{style:lt,children:[e.jsxs("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ue,{size:20,color:"#10b981"})," Database Backups"]}),e.jsxs("button",{onClick:g,disabled:v,style:He,children:[v?e.jsx(_e,{size:16,className:"spin"}):e.jsx(Cs,{size:16}),v?"Creating Backup...":"Create Backup Now"]})]}),e.jsx("div",{style:{...ae,marginBottom:"1.5rem",background:"rgba(16, 185, 129, 0.05)",borderLeft:"4px solid #10b981"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(js,{size:18,color:"#10b981"}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:"Full Database Backup"}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Creates a complete JSON export of all database tables. Download to keep a secure copy."})]})]})}),e.jsx("div",{style:ae,children:t.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[e.jsx(Ue,{size:48,color:"var(--text-muted)",style:{marginBottom:"1rem",opacity:.3}}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"No backups yet. Create your first backup!"})]}):t.map(x=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",borderRadius:"12px",borderBottom:"1px solid rgba(255,255,255,0.04)",transition:"background 0.15s"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",background:x.status==="completed"?"rgba(16, 185, 129, 0.1)":"rgba(245, 158, 11, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:x.status==="completed"?e.jsx(oe,{size:20,color:"#10b981"}):e.jsx(Se,{size:20,color:"#f59e0b"})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:x.backup_type==="full"?"Full Backup":"Partial Backup"}),e.jsx(At,{status:x.status})]}),e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem",marginTop:"0.2rem"},children:[new Date(x.created_at).toLocaleString()," Â· ",x.fileSizeFormatted||"N/A",x.tables_backed_up&&` Â· ${Array.isArray(x.tables_backed_up)?x.tables_backed_up.length:0} tables`]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>b(x.id),style:Ge,title:"Download",children:e.jsx(Ze,{size:14})}),e.jsx("button",{onClick:()=>I(x.id),style:{...Gt,padding:"0.5rem 0.75rem"},title:"Delete",children:e.jsx(Le,{size:14})})]})]},x.id))})]})}function Or(){const[t,j]=a.useState(null),W=[{id:"students",label:"Students",description:"All student profiles with batch and mentor info",icon:e.jsx(re,{size:24}),color:"#3b82f6"},{id:"submissions",label:"Code Submissions",description:"All coding submissions with scores and statuses",icon:e.jsx(De,{size:24}),color:"#8b5cf6"},{id:"problems",label:"Problems",description:"All coding problems with difficulty and language",icon:e.jsx(Fe,{size:24}),color:"#06b6d4"},{id:"allocations",label:"Allocations",description:"Mentor-student allocation mappings",icon:e.jsx(re,{size:24}),color:"#10b981"},{id:"aptitude-submissions",label:"Aptitude Submissions",description:"All aptitude test submissions and scores",icon:e.jsx(Qe,{size:24}),color:"#f59e0b"},{id:"audit-logs",label:"Audit Logs",description:"System audit trail (last 5000 entries)",icon:e.jsx(ze,{size:24}),color:"#ef4444"}],T=async(v,y)=>{j(v);try{const g=`${me}/admin/export/${v}?format=${y}&adminId=admin-001&adminName=Admin`;if(y==="json"){const I=await A.get(g),b=new Blob([JSON.stringify(I.data,null,2)],{type:"application/json"}),x=URL.createObjectURL(b),d=document.createElement("a");d.href=x,d.download=`${v}_export.json`,d.click(),URL.revokeObjectURL(x)}else{const I=await A.get(g,{responseType:"blob"}),b=URL.createObjectURL(I.data),x=document.createElement("a");x.href=b,x.download=`${v}_export.csv`,x.click(),URL.revokeObjectURL(b)}}catch(g){alert("Export failed: "+(g.response?.data?.error||g.message))}j(null)};return e.jsxs("div",{children:[e.jsx("div",{style:lt,children:e.jsxs("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ze,{size:20,color:"#f59e0b"})," Data Export Tools"]})}),e.jsx("div",{style:{...ae,marginBottom:"1.5rem",background:"rgba(245, 158, 11, 0.05)",borderLeft:"4px solid #f59e0b"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(js,{size:18,color:"#f59e0b"}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Export data in CSV (spreadsheet-compatible) or JSON format. CSV files can be opened in Excel, Google Sheets, etc."})]})}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem"},children:W.map(v=>e.jsxs("div",{style:{...ae,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",bottom:"-20px",right:"-20px",width:"100px",height:"100px",background:`radial-gradient(circle, ${v.color}15, transparent 70%)`}}),e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:`${v.color}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:Hs.cloneElement(v.icon,{color:v.color})}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"var(--text)",fontWeight:700,fontSize:"0.95rem"},children:v.label}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:v.description})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>T(v.id,"csv"),disabled:t===v.id,style:{...Ge,flex:1,justifyContent:"center",padding:"0.5rem"},children:[t===v.id?e.jsx(_e,{size:14,className:"spin"}):e.jsx(Ze,{size:14})," CSV"]}),e.jsxs("button",{onClick:()=>T(v.id,"json"),disabled:t===v.id,style:{...He,flex:1,justifyContent:"center",padding:"0.5rem"},children:[t===v.id?e.jsx(_e,{size:14,className:"spin"}):e.jsx(Ze,{size:14})," JSON"]})]})]})]},v.id))})]})}function Fr(){const[t,j]=a.useState(null),[W,T]=a.useState(!0);if(a.useEffect(()=>{A.get(`${me}/admin/analytics/comprehensive`).then(y=>{j(y.data),T(!1)}).catch(()=>T(!1))},[]),W)return e.jsx("div",{className:"loading-spinner"});if(!t)return e.jsx("div",{style:{color:"var(--text-muted)",textAlign:"center",padding:"3rem"},children:"Failed to load analytics"});const v=t.weeklyGrowth>=0?e.jsx(Ut,{size:14,color:"#10b981"}):e.jsx(Rr,{size:14,color:"#ef4444"});return e.jsxs("div",{children:[e.jsxs("div",{style:lt,children:[e.jsxs("h2",{style:{margin:0,color:"var(--text)",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Qe,{size:20,color:"#ec4899"})," Comprehensive Analytics"]}),e.jsxs("span",{style:Me(t.weeklyGrowth>=0?"#10b981":"#ef4444"),children:[v," ",t.weeklyGrowth>=0?"+":"",t.weeklyGrowth,"% weekly"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[{label:"Students",value:t.userStats?.student||0,color:"#3b82f6"},{label:"Mentors",value:t.userStats?.mentor||0,color:"#8b5cf6"},{label:"Admins",value:t.userStats?.admin||0,color:"#06b6d4"},{label:"This Week",value:t.thisWeekSubmissions,color:"#10b981"},{label:"Last Week",value:t.lastWeekSubmissions,color:"#f59e0b"}].map((y,g)=>e.jsxs("div",{style:{...ae,borderTop:`3px solid ${y.color}`},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:y.color},children:y.value}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:y.label})]},g))}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:ae,children:[e.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Submissions (30 Days)"}),t.dailySubmissions?.length>0?e.jsx(at,{width:"100%",height:250,children:e.jsxs(us,{data:t.dailySubmissions,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorSubs",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),e.jsx(yt,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.06)"}),e.jsx(ft,{dataKey:"date",tick:{fill:"#94a3b8",fontSize:10}}),e.jsx(jt,{tick:{fill:"#94a3b8",fontSize:10}}),e.jsx(nt,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px",fontSize:"0.8rem"}}),e.jsx(hs,{type:"monotone",dataKey:"count",stroke:"#3b82f6",fill:"url(#colorSubs)",strokeWidth:2})]})}):e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center"},children:"No data"})]}),e.jsxs("div",{style:ae,children:[e.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Language Distribution"}),t.languageDistribution?.length>0?e.jsx(at,{width:"100%",height:250,children:e.jsxs(bs,{children:[e.jsx(ys,{data:t.languageDistribution,cx:"50%",cy:"50%",innerRadius:50,outerRadius:90,dataKey:"count",nameKey:"name",label:({name:y,percent:g})=>`${y} ${(g*100).toFixed(0)}%`,children:t.languageDistribution.map((y,g)=>e.jsx(fs,{fill:ms[g%ms.length]},g))}),e.jsx(nt,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px"}})]})}):e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center"},children:"No data"})]}),e.jsxs("div",{style:ae,children:[e.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Activity by Hour (7 Days)"}),t.hourlyActivity?.length>0?e.jsx(at,{width:"100%",height:250,children:e.jsxs(Et,{data:t.hourlyActivity,children:[e.jsx(yt,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.06)"}),e.jsx(ft,{dataKey:"hour",tick:{fill:"#94a3b8",fontSize:10}}),e.jsx(jt,{tick:{fill:"#94a3b8",fontSize:10}}),e.jsx(nt,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px"}}),e.jsx(Ct,{dataKey:"count",fill:"#8b5cf6",radius:[4,4,0,0]})]})}):e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center"},children:"No data"})]}),e.jsxs("div",{style:ae,children:[e.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Difficulty Analysis"}),t.difficultyStats?.length>0?e.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:t.difficultyStats.map((y,g)=>e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(255,255,255,0.02)",borderRadius:"10px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.85rem"},children:y.difficulty}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:[y.submissions," submissions"]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.75rem"},children:[e.jsxs("span",{style:{color:"#3b82f6"},children:["Avg: ",y.avgScore,"%"]}),e.jsxs("span",{style:{color:"#10b981"},children:["Pass: ",y.passRate,"%"]})]}),e.jsx("div",{style:{height:"4px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"2px",marginTop:"0.5rem"},children:e.jsx("div",{style:{height:"100%",width:`${y.passRate}%`,background:y.passRate>60?"#10b981":y.passRate>30?"#f59e0b":"#ef4444",borderRadius:"2px"}})})]},g))}):e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center"},children:"No data"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:ae,children:[e.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Top Performing Students"}),(t.topStudents||[]).map((y,g)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.65rem",borderRadius:"8px",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:[e.jsxs("span",{style:{width:"28px",height:"28px",borderRadius:"8px",background:g<3?"linear-gradient(135deg, #f59e0b, #ef4444)":"rgba(107, 114, 128, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.75rem",color:g<3?"white":"var(--text-muted)"},children:["#",g+1]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.82rem"},children:y.name}),e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem"},children:[y.batch||"No batch"," Â· ",y.totalSubmissions," submissions"]})]}),e.jsxs("div",{style:{fontWeight:700,fontSize:"0.9rem",color:y.avgScore>=70?"#10b981":"#f59e0b"},children:[y.avgScore,"%"]})]},g)),(!t.topStudents||t.topStudents.length===0)&&e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center"},children:"No data"})]}),e.jsxs("div",{style:ae,children:[e.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Mentor Effectiveness"}),(t.mentorStats||[]).map((y,g)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.65rem",borderRadius:"8px",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.7rem",color:"white"},children:y.name?.[0]||"?"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"var(--text)",fontWeight:600,fontSize:"0.82rem"},children:y.name}),e.jsxs("div",{style:{color:"var(--text-muted)",fontSize:"0.7rem"},children:[y.studentCount," students Â· ",y.totalStudentSubmissions," submissions"]})]}),e.jsxs("div",{style:{fontWeight:700,fontSize:"0.9rem",color:y.avgStudentScore>=60?"#10b981":"#f59e0b"},children:[y.avgStudentScore,"%"]})]},g)),(!t.mentorStats||t.mentorStats.length===0)&&e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center"},children:"No data"})]})]}),t.batchPerformance?.length>0&&e.jsxs("div",{style:ae,children:[e.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"0.95rem",color:"var(--text)"},children:"Batch Performance"}),e.jsx(at,{width:"100%",height:250,children:e.jsxs(Et,{data:t.batchPerformance,children:[e.jsx(yt,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.06)"}),e.jsx(ft,{dataKey:"batch",tick:{fill:"#94a3b8",fontSize:11}}),e.jsx(jt,{tick:{fill:"#94a3b8",fontSize:11}}),e.jsx(nt,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px"}}),e.jsx(dr,{}),e.jsx(Ct,{dataKey:"avgScore",name:"Avg Score",fill:"#3b82f6",radius:[4,4,0,0]}),e.jsx(Ct,{dataKey:"submissions",name:"Submissions",fill:"#8b5cf6",radius:[4,4,0,0]})]})})]})]})}const rt="http://localhost:3000/api",ut={background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",transition:"all 0.3s ease"},Oe={width:"100%",padding:"0.7rem 1rem",borderRadius:"10px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"var(--text)",fontSize:"0.85rem",outline:"none",boxSizing:"border-box"},kt={...Oe,cursor:"pointer"},vt={padding:"0.6rem 1.2rem",borderRadius:"10px",border:"none",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",color:"white",fontWeight:600,cursor:"pointer",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem"},Qr={...vt,background:"linear-gradient(135deg, #ef4444, #dc2626)"},ot={...vt,background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.3)"},ps={active:"#10b981",inactive:"#f59e0b",suspended:"#ef4444"},xs={admin:"#8b5cf6",mentor:"#3b82f6",student:"#10b981"};function Ur(){const[t,j]=a.useState([]),[W,T]=a.useState(!0),[v,y]=a.useState([]),[g,I]=a.useState({role:"",status:"",search:"",batch:""}),[b,x]=a.useState({page:1,limit:15,total:0,pages:0}),[d,m]=a.useState(!1),[o,M]=a.useState(null),[q,h]=a.useState(null),[k,w]=a.useState(""),[B,Q]=a.useState(!1),[te,i]=a.useState(null),[S,P]=a.useState({name:"",email:"",password:"",role:"student",mentorId:"",batch:"",phone:""}),[G,V]=a.useState(null),Z=a.useCallback(async(u=1)=>{T(!0);try{const R=new URLSearchParams({page:u,limit:b.limit});g.role&&R.set("role",g.role),g.status&&R.set("status",g.status),g.search&&R.set("search",g.search),g.batch&&R.set("batch",g.batch);const ee=await A.get(`${rt}/admin/users?${R}`);j(ee.data.data),x(pe=>({...pe,page:u,total:ee.data.pagination.total,pages:ee.data.pagination.pages}))}catch(R){console.error(R)}T(!1)},[g,b.limit]),ne=async()=>{try{const u=await A.get(`${rt}/users?role=mentor`);y(Array.isArray(u.data)?u.data:u.data.data||[])}catch(u){console.error(u)}};a.useEffect(()=>{Z(),ne()},[]),a.useEffect(()=>{const u=setTimeout(()=>Z(1),300);return()=>clearTimeout(u)},[g]);const f=(u,R="success")=>{V({text:u,type:R}),setTimeout(()=>V(null),3e3)},J=async()=>{if(!S.name||!S.email||!S.password)return f("Name, email, and password are required","error");try{await A.post(`${rt}/admin/users`,S),f(`User ${S.name} created successfully`),m(!1),P({name:"",email:"",password:"",role:"student",mentorId:"",batch:"",phone:""}),Z(b.page)}catch(u){f(u.response?.data?.error||"Failed to create user","error")}},C=async()=>{try{await A.put(`${rt}/admin/users/${o.id}`,S),f(`User ${o.id} updated successfully`),M(null),m(!1),Z(b.page)}catch(u){f(u.response?.data?.error||"Failed to update user","error")}},L=async u=>{try{await A.delete(`${rt}/admin/users/${u}`),f(`User ${u} deleted`),i(null),Z(b.page)}catch(R){f(R.response?.data?.error||"Failed to delete user","error")}},K=async u=>{if(!k)return f("Password cannot be empty","error");try{await A.post(`${rt}/admin/users/${u}/reset-password`,{newPassword:k}),f("Password reset successfully"),h(null),w("")}catch{f("Failed to reset password","error")}},ke=async(u,R)=>{const ee=R==="active"?"suspended":"active";try{await A.patch(`${rt}/admin/users/${u}/status`,{status:ee}),f(`User status changed to ${ee}`),Z(b.page)}catch{f("Failed to change status","error")}},p=u=>{M(u),P({name:u.name,email:u.email,password:"",role:u.role,mentorId:u.mentor_id||u.mentorId||"",batch:u.batch||"",phone:u.phone||""}),m(!0)},Y=()=>{M(null),P({name:"",email:"",password:"",role:"student",mentorId:"",batch:"",phone:""}),m(!0)};return e.jsxs("div",{className:"animate-fadeIn",children:[G&&e.jsxs("div",{style:{position:"fixed",top:"1rem",right:"1rem",zIndex:9999,padding:"1rem 1.5rem",borderRadius:"12px",background:G.type==="error"?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #10b981, #059669)",color:"white",fontWeight:600,boxShadow:"0 8px 32px rgba(0,0,0,0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[G.type==="error"?e.jsx(Ee,{size:18}):e.jsx(oe,{size:18})," ",G.text]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700,color:"var(--text)"},children:"User Management"}),e.jsxs("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.85rem"},children:[b.total," total users"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[e.jsxs("button",{onClick:()=>Z(b.page),style:ot,children:[e.jsx(_e,{size:16})," Refresh"]}),e.jsxs("button",{onClick:Y,style:vt,children:[e.jsx(_r,{size:16})," Add User"]})]})]}),e.jsxs("div",{style:{...ut,marginBottom:"1.5rem",display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"2",minWidth:"200px",position:"relative"},children:[e.jsx(Te,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{placeholder:"Search name, email, or ID...",value:g.search,onChange:u=>I(R=>({...R,search:u.target.value})),style:{...Oe,paddingLeft:"36px"}})]}),e.jsxs("select",{value:g.role,onChange:u=>I(R=>({...R,role:u.target.value})),style:{...kt,flex:"1",minWidth:"130px"},children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"mentor",children:"Mentor"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsxs("select",{value:g.status,onChange:u=>I(R=>({...R,status:u.target.value})),style:{...kt,flex:"1",minWidth:"130px"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]}),e.jsx("input",{placeholder:"Filter batch...",value:g.batch,onChange:u=>I(R=>({...R,batch:u.target.value})),style:{...Oe,flex:"1",minWidth:"120px"}})]}),e.jsxs("div",{style:{...ut,padding:0,overflow:"hidden"},children:[W?e.jsx("div",{style:{padding:"3rem",textAlign:"center"},children:e.jsx("div",{className:"loading-spinner"})}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{borderBottom:"1px solid var(--border-color)",background:"rgba(59,130,246,0.05)"},children:["ID","Name","Email","Role","Mentor","Batch","Status","Actions"].map(u=>e.jsx("th",{style:{padding:"0.8rem 1rem",textAlign:"left",fontSize:"0.75rem",fontWeight:700,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:u},u))})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,style:{padding:"3rem",textAlign:"center",color:"var(--text-muted)"},children:"No users found"})}):t.map(u=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)",transition:"background 0.2s"},onMouseEnter:R=>R.currentTarget.style.background="rgba(59,130,246,0.03)",onMouseLeave:R=>R.currentTarget.style.background="transparent",children:[e.jsx("td",{style:{padding:"0.75rem 1rem",fontSize:"0.8rem",fontFamily:"monospace",color:"var(--text-muted)"},children:u.id}),e.jsx("td",{style:{padding:"0.75rem 1rem",fontWeight:600,color:"var(--text)"},children:u.name}),e.jsx("td",{style:{padding:"0.75rem 1rem",color:"var(--text-muted)",fontSize:"0.85rem"},children:u.email}),e.jsx("td",{style:{padding:"0.75rem 1rem"},children:e.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"20px",fontSize:"0.7rem",fontWeight:600,background:`${xs[u.role]}20`,color:xs[u.role]},children:u.role})}),e.jsx("td",{style:{padding:"0.75rem 1rem",color:"var(--text-muted)",fontSize:"0.85rem"},children:u.mentor_id||u.mentorId||"â€”"}),e.jsx("td",{style:{padding:"0.75rem 1rem",color:"var(--text-muted)",fontSize:"0.85rem"},children:u.batch||"â€”"}),e.jsx("td",{style:{padding:"0.75rem 1rem"},children:e.jsx("span",{onClick:()=>ke(u.id,u.status||"active"),style:{padding:"0.2rem 0.6rem",borderRadius:"20px",fontSize:"0.7rem",fontWeight:600,background:`${ps[u.status||"active"]}20`,color:ps[u.status||"active"],cursor:"pointer"},children:u.status||"active"})}),e.jsx("td",{style:{padding:"0.75rem 1rem"},children:e.jsxs("div",{style:{display:"flex",gap:"0.4rem"},children:[e.jsx("button",{onClick:()=>p(u),title:"Edit",style:{padding:"0.4rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"transparent",color:"#3b82f6",cursor:"pointer"},children:e.jsx(ir,{size:14})}),e.jsx("button",{onClick:()=>h(u.id),title:"Reset Password",style:{padding:"0.4rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"transparent",color:"#f59e0b",cursor:"pointer"},children:e.jsx(ls,{size:14})}),e.jsx("button",{onClick:()=>i(u.id),title:"Delete",style:{padding:"0.4rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"transparent",color:"#ef4444",cursor:"pointer"},children:e.jsx(Le,{size:14})})]})})]},u.id))})]})}),b.pages>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderTop:"1px solid var(--border-color)"},children:[e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:["Page ",b.page," of ",b.pages," (",b.total," users)"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{disabled:b.page<=1,onClick:()=>Z(b.page-1),style:{...ot,opacity:b.page<=1?.5:1},children:e.jsx(ks,{size:16})}),e.jsx("button",{disabled:b.page>=b.pages,onClick:()=>Z(b.page+1),style:{...ot,opacity:b.page>=b.pages?.5:1},children:e.jsx(Vt,{size:16})})]})]})]}),d&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",zIndex:9998,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>m(!1),children:e.jsxs("div",{style:{...ut,width:"500px",maxHeight:"85vh",overflowY:"auto",position:"relative"},onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:700},children:o?"Edit User":"Create New User"}),e.jsx("button",{onClick:()=>m(!1),style:{background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:e.jsx(le,{size:20})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Name *"}),e.jsx("input",{value:S.name,onChange:u=>P(R=>({...R,name:u.target.value})),placeholder:"Full Name",style:Oe})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Email *"}),e.jsx("input",{type:"email",value:S.email,onChange:u=>P(R=>({...R,email:u.target.value})),placeholder:"email@example.com",style:Oe})]}),!o&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Password *"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:B?"text":"password",value:S.password,onChange:u=>P(R=>({...R,password:u.target.value})),placeholder:"Password",style:{...Oe,paddingRight:"40px"}}),e.jsx("button",{onClick:()=>Q(!B),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:B?e.jsx(Mt,{size:16}):e.jsx(ve,{size:16})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Role *"}),e.jsxs("select",{value:S.role,onChange:u=>P(R=>({...R,role:u.target.value})),style:kt,children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"mentor",children:"Mentor"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Batch"}),e.jsx("input",{value:S.batch,onChange:u=>P(R=>({...R,batch:u.target.value})),placeholder:"e.g. 2025-A",style:Oe})]})]}),S.role==="student"&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Assign Mentor"}),e.jsxs("select",{value:S.mentorId,onChange:u=>P(R=>({...R,mentorId:u.target.value})),style:kt,children:[e.jsx("option",{value:"",children:"No Mentor"}),v.map(u=>e.jsxs("option",{value:u.id,children:[u.name," (",u.id,")"]},u.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.3rem",fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)"},children:"Phone"}),e.jsx("input",{value:S.phone,onChange:u=>P(R=>({...R,phone:u.target.value})),placeholder:"+91 9876543210",style:Oe})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>m(!1),style:ot,children:"Cancel"}),e.jsxs("button",{onClick:o?C:J,style:vt,children:[e.jsx(Tt,{size:16})," ",o?"Update":"Create"]})]})]})}),q&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",zIndex:9998,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>h(null),children:e.jsxs("div",{style:{...ut,width:"400px"},onClick:u=>u.stopPropagation(),children:[e.jsx("h3",{style:{margin:"0 0 1rem",fontWeight:700},children:"Reset Password"}),e.jsxs("p",{style:{color:"var(--text-muted)",marginBottom:"1rem",fontSize:"0.85rem"},children:["User: ",e.jsx("strong",{children:q})]}),e.jsx("input",{type:"password",value:k,onChange:u=>w(u.target.value),placeholder:"Enter new password",style:Oe}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.25rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>h(null),style:ot,children:"Cancel"}),e.jsxs("button",{onClick:()=>K(q),style:vt,children:[e.jsx(ls,{size:16})," Reset"]})]})]})}),te&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",zIndex:9998,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>i(null),children:e.jsxs("div",{style:{...ut,width:"400px",textAlign:"center"},onClick:u=>u.stopPropagation(),children:[e.jsx(ue,{size:48,color:"#ef4444",style:{marginBottom:"1rem"}}),e.jsx("h3",{style:{margin:"0 0 0.5rem",fontWeight:700},children:"Delete User?"}),e.jsxs("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem",fontSize:"0.85rem"},children:["This will permanently delete ",e.jsx("strong",{children:te})," and all their data. This cannot be undone."]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>i(null),style:ot,children:"Cancel"}),e.jsxs("button",{onClick:()=>L(te),style:Qr,children:[e.jsx(Le,{size:16})," Delete"]})]})]})})]})}const Ke="http://localhost:3000",Qt={Languages:["Python","JavaScript","Java","C++","C#","Go","Rust","TypeScript"],Frontend:["React","Angular","Vue.js","HTML","CSS"],Backend:["Node.js","Express.js","Django","Flask","Spring Boot"],Databases:["SQL","MySQL","PostgreSQL","MongoDB","Redis"],"CS Fundamentals":["Data Structures","Algorithms","System Design","OOP","Design Patterns"],"DevOps & Cloud":["Docker","Kubernetes","AWS","Azure","GCP","Git","Linux"],"API & Web":["REST API","GraphQL","Networking","Security","Testing"],"AI / ML":["Machine Learning","Deep Learning","NLP","Computer Vision"]},Hr=Object.values(Qt).flat(),dt=({icon:t,title:j,subtitle:W,color:T,children:v})=>e.jsxs("div",{style:{background:"#1e293b",borderRadius:"14px",border:"1px solid #334155",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:[e.jsxs("div",{style:{padding:"14px 18px",display:"flex",alignItems:"center",gap:"10px",borderBottom:"1px solid #334155",background:`linear-gradient(135deg, ${T}18, ${T}08)`},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",background:`${T}25`,color:T},children:t}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"14px",color:"#f1f5f9"},children:j}),W&&e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8"},children:W})]})]}),e.jsx("div",{style:{padding:"16px 18px"},children:v})]}),Ne=({label:t,value:j,onChange:W,min:T,max:v,icon:y,color:g,suffix:I})=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:600,color:"#94a3b8",display:"flex",alignItems:"center",gap:"4px"},children:[y," ",t]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",borderRadius:"10px",border:"1px solid #475569",overflow:"hidden",background:"#0f172a"},children:[e.jsx("button",{onClick:()=>W(Math.max(T,j-1)),style:{width:"36px",height:"40px",border:"none",background:"#1e293b",cursor:"pointer",fontSize:"18px",color:"#94a3b8",fontWeight:600,borderRight:"1px solid #475569"},children:"âˆ’"}),e.jsx("input",{type:"number",value:j,min:T,max:v,onChange:b=>W(Math.min(v,Math.max(T,parseInt(b.target.value)||T))),style:{flex:1,textAlign:"center",border:"none",outline:"none",fontSize:"16px",fontWeight:700,color:g||"#f1f5f9",padding:"8px 4px",width:"100%",boxSizing:"border-box",background:"transparent"}}),e.jsx("button",{onClick:()=>W(Math.min(v,j+1)),style:{width:"36px",height:"40px",border:"none",background:"#1e293b",cursor:"pointer",fontSize:"18px",color:"#94a3b8",fontWeight:600,borderLeft:"1px solid #475569"},children:"+"})]}),I&&e.jsx("span",{style:{fontSize:"10px",color:"#64748b",textAlign:"center"},children:I})]});function Vr(){const[t,j]=a.useState([]),[W,T]=a.useState(!0),[v,y]=a.useState(!1),[g,I]=a.useState(null),[b,x]=a.useState([]),[d,m]=a.useState(!1),[o,M]=a.useState({title:"",description:"",skills:[],difficulty_level:"mixed",mcq_count:10,coding_count:3,sql_count:3,interview_count:5,attempt_limit:1,mcq_duration_minutes:30,coding_duration_minutes:45,sql_duration_minutes:45,interview_duration_minutes:30,mcq_passing_score:60,coding_passing_score:50,sql_passing_score:50,interview_passing_score:6,proctoring_enabled:!0,proctoring_config:{camera:!0,mic:!0,fullscreen:!0,paste_disabled:!0,face_detection:!0,camera_block_detect:!0,phone_detect:!0}}),[q,h]=a.useState(""),[k,w]=a.useState(null),[B,Q]=a.useState(""),[te,i]=a.useState([]),[S,P]=a.useState(!1),[G,V]=a.useState([]),[Z,ne]=a.useState(null),[f,J]=a.useState(""),[C,L]=a.useState("");a.useEffect(()=>{K()},[]);const K=async()=>{try{T(!0);const{data:r}=await A.get(`${Ke}/api/skill-tests/all`);j(r)}catch(r){Q(r.response?.data?.error||r.message)}finally{T(!1)}},ke=async()=>{if(!o.title.trim())return Q("Title is required");if(o.skills.length===0)return Q("Select at least one skill");Q(""),m(!0);try{await A.post(`${Ke}/api/skill-tests/create`,o),y(!1),M({title:"",description:"",skills:[],difficulty_level:"mixed",mcq_count:10,coding_count:3,sql_count:3,interview_count:5,attempt_limit:1,mcq_duration_minutes:30,coding_duration_minutes:45,sql_duration_minutes:45,interview_duration_minutes:30,mcq_passing_score:60,coding_passing_score:50,sql_passing_score:50,interview_passing_score:6,proctoring_enabled:!0,proctoring_config:{camera:!0,mic:!0,fullscreen:!0,paste_disabled:!0,face_detection:!0,camera_block_detect:!0,phone_detect:!0}}),K()}catch(r){Q(r.response?.data?.error||r.message)}finally{m(!1)}},p=async r=>{try{await A.put(`${Ke}/api/skill-tests/${r}/toggle`),K()}catch(N){Q(N.message)}},Y=async r=>{if(window.confirm("Delete this test and all its attempts?"))try{await A.delete(`${Ke}/api/skill-tests/${r}`),K()}catch(N){Q(N.message)}},u=async()=>{try{const{data:r}=await A.get(`${Ke}/api/users?role=student`);i(Array.isArray(r)?r:[])}catch(r){console.error("Error fetching students:",r),i([])}},R=async r=>{await u(),ne(r);try{const{data:N}=await A.get(`${Ke}/api/tests/${r}/allocated-students`);V(N.studentIds||[])}catch(N){console.error("Error loading allocations:",N),V([])}P(!0)},ee=r=>{V(N=>N.includes(r)?N.filter(n=>n!==r):[...N,r])},pe=async()=>{try{await A.post(`${Ke}/api/tests/${Z}/allocate-students`,{studentIds:G}),P(!1),V([]),ne(null),K()}catch(r){Q("Error saving allocations: "+(r.response?.data?.error||r.message))}},xe=r=>{M(N=>({...N,skills:N.skills.includes(r)?N.skills.filter(n=>n!==r):[...N.skills,r]}))},ye=r=>{const N=Qt[r]||[],n=N.every(E=>o.skills.includes(E));M(E=>({...E,skills:n?E.skills.filter(_=>!N.includes(_)):[...new Set([...E.skills,...N])]}))},Ce=q?Hr.filter(r=>r.toLowerCase().includes(q.toLowerCase())):[],l={passed:"#22c55e",failed:"#ef4444",in_progress:"#f59e0b",pending:"#6b7280"},U=t.filter(r=>(r.title||"").toLowerCase().includes(C.toLowerCase())||(r.description||"").toLowerCase().includes(C.toLowerCase())||(r.skills||[]).some(N=>N.toLowerCase().includes(C.toLowerCase()))),ie=async r=>{if(g===r){I(null);return}try{const{data:N}=await A.get(`${Ke}/api/skill-tests/${r}/attempts`);x(Array.isArray(N)?N:[]),I(r)}catch(N){Q(N.response?.data?.error||N.message),x([]),I(r)}};return e.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #8b5cf6, #6d28d9)"},children:e.jsx(Xe,{size:22,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:800,color:"#f1f5f9"},children:"Skill Test Management"}),e.jsx("p",{style:{margin:0,fontSize:"13px",color:"#9ca3af"},children:"Create & manage AI-powered assessments"})]})]}),e.jsxs("button",{onClick:()=>{y(!v),Q("")},style:{display:"flex",alignItems:"center",gap:"8px",padding:"11px 22px",background:v?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:700,fontSize:"14px",boxShadow:"0 2px 8px rgba(139,92,246,0.3)",transition:"all 0.2s"},children:[v?e.jsx(le,{size:18}):e.jsx(Ae,{size:18}),v?"Cancel":"Create Test"]})]}),B&&e.jsxs("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"10px",padding:"12px 16px",marginBottom:"16px",color:"#fca5a5",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px"},children:[e.jsxs("span",{children:[e.jsx(Ee,{size:14,style:{verticalAlign:"middle",marginRight:"6px"}}),B]}),e.jsx("button",{onClick:()=>Q(""),style:{background:"none",border:"none",cursor:"pointer",color:"#fca5a5",padding:"4px"},children:e.jsx(le,{size:16})})]}),v&&e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139,92,246,0.08), rgba(109,40,217,0.05))",borderRadius:"16px",padding:"24px",marginBottom:"28px",border:"1px solid rgba(139,92,246,0.2)",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px"},children:[e.jsx(Ve,{size:20,color:"#8b5cf6"}),e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:800,color:"#c4b5fd"},children:"Create New Assessment"})]}),e.jsx(dt,{icon:e.jsx(De,{size:16}),title:"Basic Information",subtitle:"Name your assessment",color:"#3b82f6",children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"14px"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{fontWeight:600,fontSize:"12px",display:"block",marginBottom:"6px",color:"#cbd5e1"},children:["Test Title ",e.jsx("span",{style:{color:"#f87171"},children:"*"})]}),e.jsx("input",{value:o.title,onChange:r=>M({...o,title:r.target.value}),placeholder:"e.g., Full Stack Developer Assessment",style:{width:"100%",padding:"11px 14px",borderRadius:"10px",border:"2px solid "+(o.title?"#8b5cf6":"#475569"),fontSize:"14px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s",background:"#0f172a",color:"#f1f5f9"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:600,fontSize:"12px",display:"block",marginBottom:"6px",color:"#cbd5e1"},children:"Description"}),e.jsx("input",{value:o.description,onChange:r=>M({...o,description:r.target.value}),placeholder:"Brief description of this test",style:{width:"100%",padding:"11px 14px",borderRadius:"10px",border:"2px solid #475569",fontSize:"14px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s",background:"#0f172a",color:"#f1f5f9"}})]})]})}),e.jsx("div",{style:{height:"14px"}}),e.jsxs(dt,{icon:e.jsx(Tr,{size:16}),title:"Skills Selection",subtitle:`${o.skills.length} skill${o.skills.length!==1?"s":""} selected`,color:"#8b5cf6",children:[o.skills.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"14px",padding:"10px",background:"rgba(139,92,246,0.1)",borderRadius:"10px",border:"1px dashed rgba(139,92,246,0.4)"},children:o.skills.map(r=>e.jsxs("span",{onClick:()=>xe(r),style:{padding:"5px 12px",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",borderRadius:"20px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontWeight:600,boxShadow:"0 1px 3px rgba(139,92,246,0.3)",transition:"transform 0.15s"},children:[r," ",e.jsx(le,{size:12})]},r))}),e.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[e.jsx(Te,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{value:q,onChange:r=>h(r.target.value),placeholder:"Search skills...",style:{width:"100%",padding:"10px 12px 10px 36px",borderRadius:"10px",border:"2px solid #475569",fontSize:"13px",boxSizing:"border-box",outline:"none",transition:"border-color 0.2s",background:"#0f172a",color:"#f1f5f9"}})]}),q&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"12px",padding:"10px",background:"rgba(245,158,11,0.08)",borderRadius:"8px"},children:Ce.length===0?e.jsxs("span",{style:{fontSize:"12px",color:"#9ca3af"},children:['No skills found for "',q,'"']}):Ce.map(r=>e.jsxs("span",{onClick:()=>xe(r),style:{padding:"5px 12px",borderRadius:"20px",fontSize:"12px",cursor:"pointer",fontWeight:500,transition:"all 0.15s",background:o.skills.includes(r)?"#8b5cf6":"#0f172a",color:o.skills.includes(r)?"white":"#cbd5e1",border:"1px solid "+(o.skills.includes(r)?"#7c3aed":"#475569"),boxShadow:o.skills.includes(r)?"0 1px 3px rgba(139,92,246,0.3)":"none"},children:[o.skills.includes(r)?"âœ“ ":"",r]},r))}),!q&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:Object.entries(Qt).map(([r,N])=>{const n=N.filter(_=>o.skills.includes(_)).length,E=k===r;return e.jsxs("div",{style:{border:"1px solid "+(n>0?"rgba(139,92,246,0.4)":"#475569"),borderRadius:"10px",overflow:"hidden",background:n>0?"rgba(139,92,246,0.08)":"#0f172a",transition:"all 0.2s"},children:[e.jsxs("div",{onClick:()=>w(E?null:r),style:{padding:"10px 14px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontWeight:600,fontSize:"13px",color:"#e2e8f0"},children:r}),n>0&&e.jsxs("span",{style:{padding:"1px 8px",borderRadius:"10px",fontSize:"11px",background:"#8b5cf6",color:"white",fontWeight:700},children:[n,"/",N.length]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("button",{onClick:_=>{_.stopPropagation(),ye(r)},style:{padding:"3px 8px",borderRadius:"6px",border:"1px solid #475569",background:n===N.length?"#8b5cf6":"#1e293b",color:n===N.length?"white":"#94a3b8",fontSize:"10px",fontWeight:600,cursor:"pointer"},children:n===N.length?"Deselect All":"Select All"}),E?e.jsx(is,{size:16,color:"#9ca3af"}):e.jsx(Xs,{size:16,color:"#9ca3af"})]})]}),E&&e.jsx("div",{style:{padding:"8px 14px 12px",borderTop:"1px solid #334155",display:"flex",flexWrap:"wrap",gap:"6px"},children:N.map(_=>e.jsxs("span",{onClick:()=>xe(_),style:{padding:"5px 12px",borderRadius:"20px",fontSize:"12px",cursor:"pointer",fontWeight:500,transition:"all 0.15s",background:o.skills.includes(_)?"#8b5cf6":"#1e293b",color:o.skills.includes(_)?"white":"#cbd5e1",border:"1px solid "+(o.skills.includes(_)?"#7c3aed":"#475569"),boxShadow:o.skills.includes(_)?"0 1px 3px rgba(139,92,246,0.3)":"none"},children:[o.skills.includes(_)?"âœ“ ":"",_]},_))})]},r)})})]}),e.jsx("div",{style:{height:"14px"}}),e.jsx(dt,{icon:e.jsx(Ie,{size:16}),title:"Difficulty Level",subtitle:"Set overall difficulty",color:"#f59e0b",children:e.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[{value:"easy",label:"Easy",desc:"Beginner friendly",color:"#22c55e"},{value:"medium",label:"Medium",desc:"Intermediate level",color:"#f59e0b"},{value:"hard",label:"Hard",desc:"Advanced concepts",color:"#ef4444"},{value:"mixed",label:"Mixed",desc:"30% easy, 50% medium, 20% hard",color:"#8b5cf6"}].map(r=>e.jsxs("button",{onClick:()=>M({...o,difficulty_level:r.value}),style:{flex:"1 1 140px",padding:"14px 16px",borderRadius:"12px",cursor:"pointer",background:o.difficulty_level===r.value?`${r.color}18`:"#0f172a",border:`2px solid ${o.difficulty_level===r.value?r.color:"#475569"}`,textAlign:"center",transition:"all 0.2s"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"14px",color:o.difficulty_level===r.value?r.color:"#e2e8f0",marginBottom:"4px"},children:r.label}),e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8"},children:r.desc})]},r.value))})}),e.jsx("div",{style:{height:"14px"}}),e.jsxs(dt,{icon:e.jsx(ze,{size:16}),title:"Proctoring Mode",subtitle:o.proctoring_enabled?"Enabled â€” configure options":"Disabled",color:"#ef4444",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:o.proctoring_enabled?"16px":"0",padding:"10px 14px",background:"#0f172a",borderRadius:"10px",border:"1px solid #334155"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"14px",color:"#f1f5f9"},children:"Enable Proctoring"}),e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8"},children:"Monitor students during test"})]}),e.jsx("button",{onClick:()=>M({...o,proctoring_enabled:!o.proctoring_enabled}),style:{background:"none",border:"none",cursor:"pointer",padding:0},children:o.proctoring_enabled?e.jsx(cs,{size:36,color:"#22c55e"}):e.jsx(os,{size:36,color:"#475569"})})]}),o.proctoring_enabled&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"10px"},children:[{key:"camera",label:"Camera",desc:"Webcam monitoring",icon:e.jsx(cr,{size:16}),color:"#3b82f6"},{key:"mic",label:"Microphone",desc:"Audio monitoring",icon:e.jsx(mr,{size:16}),color:"#8b5cf6"},{key:"fullscreen",label:"Fullscreen",desc:"Force fullscreen mode",icon:e.jsx(pr,{size:16}),color:"#06b6d4"},{key:"paste_disabled",label:"Paste Disabled",desc:"Block copy-paste",icon:e.jsx(vr,{size:16}),color:"#f59e0b"},{key:"face_detection",label:"Face Movement",desc:"Detect face away/moving",icon:e.jsx(wr,{size:16}),color:"#10b981"},{key:"camera_block_detect",label:"Camera Block",desc:"Detect covered camera",icon:e.jsx(bt,{size:16}),color:"#ef4444"},{key:"phone_detect",label:"Phone Detection",desc:"Detect mobile phone",icon:e.jsx(xr,{size:16}),color:"#ec4899"}].map(r=>{const N=o.proctoring_config[r.key];return e.jsxs("button",{onClick:()=>M({...o,proctoring_config:{...o.proctoring_config,[r.key]:!N}}),style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 14px",borderRadius:"10px",cursor:"pointer",textAlign:"left",background:N?`${r.color}12`:"#0f172a",border:`1.5px solid ${N?r.color:"#475569"}`,transition:"all 0.2s"},children:[e.jsx("div",{style:{width:"34px",height:"34px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,background:N?`${r.color}25`:"#1e293b",color:N?r.color:"#64748b"},children:r.icon}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"13px",color:N?"#f1f5f9":"#94a3b8"},children:r.label}),e.jsx("div",{style:{fontSize:"10px",color:"#64748b"},children:r.desc})]}),e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:N?r.color:"#475569",flexShrink:0}})]},r.key)})})]}),e.jsx("div",{style:{height:"14px"}}),e.jsx(dt,{icon:e.jsx(gr,{size:16}),title:"Question Configuration",subtitle:"Set number of questions per section",color:"#10b981",children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:[e.jsx(Ne,{label:"MCQ Questions",value:o.mcq_count,onChange:r=>M({...o,mcq_count:r}),min:5,max:50,icon:e.jsx(Xe,{size:12}),color:"#8b5cf6",suffix:"5â€“50 questions"}),e.jsx(Ne,{label:"Coding Problems",value:o.coding_count,onChange:r=>M({...o,coding_count:r}),min:1,max:10,icon:e.jsx(Re,{size:12}),color:"#3b82f6",suffix:"1â€“10 problems"}),e.jsx(Ne,{label:"SQL Problems",value:o.sql_count,onChange:r=>M({...o,sql_count:r}),min:1,max:10,icon:e.jsx(Ue,{size:12}),color:"#10b981",suffix:"1â€“10 problems"}),e.jsx(Ne,{label:"Interview Qs",value:o.interview_count,onChange:r=>M({...o,interview_count:r}),min:3,max:15,icon:e.jsx(Wt,{size:12}),color:"#f59e0b",suffix:"3â€“15 questions"})]})}),e.jsx("div",{style:{height:"14px"}}),e.jsxs(dt,{icon:e.jsx(Ie,{size:16}),title:"Passing Criteria & Settings",subtitle:"Configure passing scores and limits",color:"#ef4444",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"14px"},children:[e.jsx(Ne,{label:"MCQ Pass %",value:o.mcq_passing_score,onChange:r=>M({...o,mcq_passing_score:r}),min:30,max:100,icon:e.jsx(Qe,{size:12}),color:"#8b5cf6",suffix:"min 30%"}),e.jsx(Ne,{label:"Coding Pass %",value:o.coding_passing_score,onChange:r=>M({...o,coding_passing_score:r}),min:30,max:100,icon:e.jsx(Qe,{size:12}),color:"#3b82f6",suffix:"min 30%"}),e.jsx(Ne,{label:"SQL Pass %",value:o.sql_passing_score,onChange:r=>M({...o,sql_passing_score:r}),min:30,max:100,icon:e.jsx(Qe,{size:12}),color:"#10b981",suffix:"min 30%"}),e.jsx(Ne,{label:"Interview Pass (/10)",value:o.interview_passing_score,onChange:r=>M({...o,interview_passing_score:r}),min:3,max:10,icon:e.jsx(Qe,{size:12}),color:"#f59e0b",suffix:"out of 10"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"14px"},children:[e.jsx(Ne,{label:"MCQ Time (m)",value:o.mcq_duration_minutes,onChange:r=>M({...o,mcq_duration_minutes:r}),min:5,max:120,icon:e.jsx(Se,{size:12}),color:"#8b5cf6",suffix:"minutes"}),e.jsx(Ne,{label:"Coding Time (m)",value:o.coding_duration_minutes,onChange:r=>M({...o,coding_duration_minutes:r}),min:5,max:120,icon:e.jsx(Se,{size:12}),color:"#3b82f6",suffix:"minutes"}),e.jsx(Ne,{label:"SQL Time (m)",value:o.sql_duration_minutes,onChange:r=>M({...o,sql_duration_minutes:r}),min:5,max:120,icon:e.jsx(Se,{size:12}),color:"#10b981",suffix:"minutes"}),e.jsx(Ne,{label:"Interview Time (m)",value:o.interview_duration_minutes,onChange:r=>M({...o,interview_duration_minutes:r}),min:5,max:120,icon:e.jsx(Se,{size:12}),color:"#f59e0b",suffix:"minutes"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:e.jsx(Ne,{label:"Max Attempts",value:o.attempt_limit,onChange:r=>M({...o,attempt_limit:r}),min:1,max:5,icon:e.jsx(ze,{size:12}),color:"#6366f1",suffix:"per student"})})]}),e.jsx("div",{style:{height:"18px"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"14px 18px",background:"#1e293b",borderRadius:"12px",border:"1px solid #334155",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:[e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"#94a3b8",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("span",{children:[e.jsx(Xe,{size:13,style:{verticalAlign:"middle"}})," ",o.mcq_count," MCQ"]}),e.jsxs("span",{children:[e.jsx(Re,{size:13,style:{verticalAlign:"middle"}})," ",o.coding_count," Coding"]}),e.jsxs("span",{children:[e.jsx(Ue,{size:13,style:{verticalAlign:"middle"}})," ",o.sql_count," SQL"]}),e.jsxs("span",{children:[e.jsx(Wt,{size:13,style:{verticalAlign:"middle"}})," ",o.interview_count," Interview"]}),e.jsxs("span",{children:[e.jsx(Se,{size:13,style:{verticalAlign:"middle"}})," ",o.mcq_duration_minutes,"m+",o.coding_duration_minutes,"m+",o.sql_duration_minutes,"m+",o.interview_duration_minutes,"m"]}),e.jsxs("span",{style:{color:{easy:"#22c55e",medium:"#f59e0b",hard:"#ef4444",mixed:"#8b5cf6"}[o.difficulty_level]},children:[e.jsx(Ie,{size:13,style:{verticalAlign:"middle"}})," ",o.difficulty_level]}),e.jsxs("span",{style:{color:o.proctoring_enabled?"#22c55e":"#ef4444"},children:[e.jsx(ze,{size:13,style:{verticalAlign:"middle"}})," ",o.proctoring_enabled?"Proctored":"No Proctor"]})]}),e.jsx("button",{onClick:ke,disabled:d,style:{padding:"12px 32px",background:d?"#a78bfa":"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",border:"none",borderRadius:"10px",cursor:d?"not-allowed":"pointer",fontWeight:800,fontSize:"15px",boxShadow:"0 2px 10px rgba(139,92,246,0.35)",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:d?e.jsxs(e.Fragment,{children:[e.jsx(et,{size:16})," Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{size:16})," Create Assessment"]})})]})]}),!v&&e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"16px"},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Te,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{value:C,onChange:r=>L(r.target.value),placeholder:"Search assessments...",style:{padding:"10px 14px 10px 36px",borderRadius:"10px",border:"1px solid #475569",background:"#0f172a",color:"#f1f5f9",fontSize:"13px",width:"280px",outline:"none"}})]})}),W?e.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#9ca3af"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #e5e7eb",borderTopColor:"#8b5cf6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 12px"}}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),e.jsx("p",{style:{fontSize:"14px",fontWeight:500},children:"Loading assessments..."})]}):U.length===0?e.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"5rem",background:"var(--bg-card)",borderRadius:"20px",border:"1px dashed var(--border-color)"},children:[e.jsx(Xe,{size:48,style:{color:"var(--text-muted)",marginBottom:"1rem",opacity:.3}}),e.jsx("h3",{style:{color:"var(--text-main)"},children:"No tests found"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:C?"Try a different search term":"Create your first skill test to get started"})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"14px"},children:[e.jsxs("div",{style:{fontSize:"13px",color:"#94a3b8",fontWeight:600,padding:"0 4px"},children:[U.length," assessment",U.length!==1?"s":""]}),U.map(r=>e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"14px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",borderLeft:`4px solid ${r.is_active?"#8b5cf6":"#475569"}`,transition:"box-shadow 0.2s"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"17px",fontWeight:800,color:"#f1f5f9"},children:r.title}),e.jsx("span",{style:{padding:"3px 10px",borderRadius:"20px",fontSize:"11px",fontWeight:700,background:r.is_active?"#dcfce7":"#fee2e2",color:r.is_active?"#16a34a":"#dc2626"},children:r.is_active?"Active":"Inactive"})]}),r.description&&e.jsx("p",{style:{margin:"0 0 12px",color:"#94a3b8",fontSize:"13px",lineHeight:"1.5"},children:r.description}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"5px",marginBottom:"12px"},children:(r.skills||[]).map(N=>e.jsx("span",{style:{padding:"3px 10px",background:"rgba(139,92,246,0.15)",color:"#a78bfa",borderRadius:"20px",fontSize:"11px",fontWeight:600,border:"1px solid rgba(139,92,246,0.25)"},children:N},N))}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",fontSize:"11px",padding:"8px 12px",background:"#0f172a",borderRadius:"8px"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",color:"#8b5cf6",fontWeight:600},children:[e.jsx(Xe,{size:12})," ",r.mcq_count," MCQ"]}),e.jsx("span",{style:{color:"#475569"},children:"|"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",color:"#3b82f6",fontWeight:600},children:[e.jsx(Re,{size:12})," ",r.coding_count," Coding"]}),r.config?.interview?.enabled&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.4rem 0.8rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"20px",fontSize:"0.75rem",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsx($t,{size:14})," AI Interview"]}),e.jsx("span",{style:{color:"#475569"},children:"|"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",color:"#10b981",fontWeight:600},children:[e.jsx(Ue,{size:12})," ",r.sql_count," SQL"]}),e.jsx("span",{style:{color:"#475569"},children:"|"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",color:"#f59e0b",fontWeight:600},children:[e.jsx(Wt,{size:12})," ",r.interview_count," Interview"]}),e.jsx("span",{style:{color:"#475569"},children:"|"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",color:"#94a3b8"},children:[e.jsx(Se,{size:12})," ",r.mcq_duration_minutes,"m"]}),e.jsx("span",{style:{color:"#475569"},children:"|"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",color:"#94a3b8"},children:[e.jsx(ze,{size:12})," ",r.attempt_limit," attempt",r.attempt_limit>1?"s":""]})]}),r.attempt_stats&&e.jsxs("div",{style:{display:"flex",gap:"16px",marginTop:"10px",fontSize:"12px"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#94a3b8"},children:[e.jsx(re,{size:14})," ",r.attempt_stats.total||0," attempts"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#22c55e"},children:[e.jsx(oe,{size:14})," ",r.attempt_stats.completed||0," passed"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#ef4444"},children:[e.jsx(Ee,{size:14})," ",r.attempt_stats.failed||0," failed"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",marginLeft:"16px"},children:[e.jsx("button",{onClick:()=>ie(r.id),title:"View Attempts",style:{padding:"8px",background:"rgba(16,185,129,0.1)",border:"1px solid rgba(16,185,129,0.3)",borderRadius:"10px",cursor:"pointer",transition:"all 0.15s"},children:e.jsx(ve,{size:16,color:"#34d399"})}),e.jsxs("button",{onClick:()=>R(r.id),title:"Assign Students",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1rem",background:"rgba(167, 139, 250, 0.1)",color:"#a78bfa",border:"1px solid rgba(167, 139, 250, 0.2)",borderRadius:"10px",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:N=>N.currentTarget.style.background="rgba(167, 139, 250, 0.2)",onMouseLeave:N=>N.currentTarget.style.background="rgba(167, 139, 250, 0.1)",children:[e.jsx(re,{size:16})," Assign"]}),e.jsx("button",{onClick:()=>p(r.id),title:r.is_active?"Deactivate":"Activate",style:{padding:"8px",background:r.is_active?"rgba(245,158,11,0.1)":"rgba(16,185,129,0.1)",border:"1px solid "+(r.is_active?"rgba(245,158,11,0.3)":"rgba(16,185,129,0.3)"),borderRadius:"10px",cursor:"pointer",transition:"all 0.15s"},children:r.is_active?e.jsx(cs,{size:16,color:"#fbbf24"}):e.jsx(os,{size:16,color:"#34d399"})}),e.jsx("button",{onClick:()=>Y(r.id),title:"Delete",style:{padding:"8px",background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"10px",cursor:"pointer",transition:"all 0.15s"},children:e.jsx(Le,{size:16,color:"#f87171"})})]})]}),g===r.id&&e.jsxs("div",{style:{marginTop:"16px",borderTop:"1px solid #334155",paddingTop:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsxs("h4",{style:{margin:0,fontSize:"14px",fontWeight:700,color:"#e2e8f0",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(re,{size:15})," Student Attempts"]}),e.jsxs("button",{onClick:()=>I(null),style:{background:"#334155",border:"none",cursor:"pointer",color:"#94a3b8",borderRadius:"6px",padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",fontWeight:600},children:["Close ",e.jsx(is,{size:14})]})]}),b.length===0?e.jsx("p",{style:{color:"#9ca3af",fontSize:"13px"},children:"No attempts yet"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#0f172a"},children:[e.jsx("th",{style:{padding:"8px",textAlign:"left",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"Student"}),e.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"Attempt"}),e.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"Stage"}),e.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"MCQ"}),e.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"Coding"}),e.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"SQL"}),e.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"Interview"}),e.jsx("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #334155",color:"#94a3b8"},children:"Status"})]})}),e.jsx("tbody",{children:b.map(N=>e.jsxs("tr",{style:{borderBottom:"1px solid #1e293b"},children:[e.jsx("td",{style:{padding:"8px",color:"#e2e8f0"},children:N.student_name||N.student_id}),e.jsxs("td",{style:{padding:"8px",textAlign:"center",color:"#cbd5e1"},children:["#",N.attempt_number]}),e.jsx("td",{style:{padding:"8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",background:"rgba(99,102,241,0.15)",color:"#a5b4fc"},children:N.current_stage})}),e.jsx("td",{style:{padding:"8px",textAlign:"center",color:l[N.mcq_status]},children:N.mcq_status!=="pending"?`${Math.round(N.mcq_score)}%`:"-"}),e.jsx("td",{style:{padding:"8px",textAlign:"center",color:l[N.coding_status]},children:N.coding_status!=="pending"?`${Math.round(N.coding_score)}%`:"-"}),e.jsx("td",{style:{padding:"8px",textAlign:"center",color:l[N.sql_status]},children:N.sql_status!=="pending"?`${Math.round(N.sql_score)}%`:"-"}),e.jsx("td",{style:{padding:"8px",textAlign:"center",color:l[N.interview_status]},children:N.interview_status!=="pending"?`${(N.interview_score||0).toFixed(1)}/10`:"-"}),e.jsx("td",{style:{padding:"8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:600,background:N.overall_status==="completed"?"rgba(16,185,129,0.15)":N.overall_status==="failed"?"rgba(239,68,68,0.15)":"rgba(245,158,11,0.15)",color:N.overall_status==="completed"?"#6ee7b7":N.overall_status==="failed"?"#fca5a5":"#fcd34d"},children:N.overall_status})})]},N.id))})]})})]})]},r.id))]}),S&&e.jsx("div",{className:"modal-overlay",onClick:()=>P(!1),children:e.jsxs("div",{className:"modal-content",onClick:r=>r.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",borderRadius:"24px",overflow:"hidden",padding:0,border:"1px solid var(--border-color)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)"},children:[e.jsxs("div",{className:"modal-header",style:{padding:"1.5rem 2rem",borderBottom:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-card)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:"linear-gradient(135deg, #a78bfa, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 16px rgba(167, 139, 250, 0.2)"},children:e.jsx(re,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.5rem",color:"var(--text-main)",fontWeight:800},children:"Assign Students"}),e.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-muted)"},children:"Manage student participation for this skill test"})]})]}),e.jsx("button",{onClick:()=>P(!1),className:"modal-close",style:{background:"var(--bg-secondary)"},children:e.jsx(le,{size:20})})]}),e.jsxs("div",{style:{padding:"1.25rem 2rem",background:"var(--bg-secondary)",borderBottom:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1.5rem"},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(Te,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)",pointerEvents:"none"}}),e.jsx("input",{type:"text",placeholder:"Search by student name, username or batch...",value:f,onChange:r=>J(r.target.value),style:{width:"100%",padding:"0.85rem 1rem 0.85rem 2.75rem",borderRadius:"12px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"var(--text-main)",fontSize:"0.95rem",outline:"none",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"}})]}),e.jsx("button",{onClick:()=>{const r=te.filter(n=>(n.name||n.username||"").toLowerCase().includes(f.toLowerCase())||(n.batch||"").toLowerCase().includes(f.toLowerCase()));if(r.every(n=>G.includes(n.id)))V(n=>n.filter(E=>!r.find(_=>_.id===E)));else{const n=r.map(E=>E.id).filter(E=>!G.includes(E));V(E=>[...E,...n])}},style:{padding:"0.85rem 1.5rem",background:"var(--bg-card)",color:"var(--text-main)",border:"1px solid var(--border-color)",borderRadius:"12px",fontWeight:600,fontSize:"0.9rem",cursor:"pointer",whiteSpace:"nowrap",transition:"all 0.2s"},children:te.filter(r=>(r.name||r.username||"").toLowerCase().includes(f.toLowerCase())||(r.batch||"").toLowerCase().includes(f.toLowerCase())).every(r=>G.includes(r.id))?"Deselect All":"Select All"})]}),e.jsx("div",{className:"modal-body",style:{padding:"2rem",overflowY:"auto",maxHeight:"50vh",background:"var(--bg-card)"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:te.filter(r=>(r.name||r.username||"").toLowerCase().includes(f.toLowerCase())||(r.batch||"").toLowerCase().includes(f.toLowerCase())).length===0?e.jsxs("div",{style:{gridColumn:"1/-1",textAlign:"center",padding:"4rem",color:"var(--text-muted)"},children:[e.jsx(re,{size:48,style:{opacity:.2,marginBottom:"1rem"}}),e.jsx("p",{children:"No students found matching your search."})]}):te.filter(r=>(r.name||r.username||"").toLowerCase().includes(f.toLowerCase())||(r.batch||"").toLowerCase().includes(f.toLowerCase())).map(r=>e.jsxs("div",{onClick:()=>ee(r.id),style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",borderRadius:"16px",background:G.includes(r.id)?"rgba(167, 139, 250, 0.1)":"var(--bg-secondary)",border:`2px solid ${G.includes(r.id)?"#a78bfa":"transparent"}`,cursor:"pointer",transition:"all 0.2s ease",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:G.includes(r.id)?"#a78bfa":"var(--bg-card)",color:G.includes(r.id)?"white":"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.1rem",fontWeight:800,boxShadow:"0 4px 6px rgba(0,0,0,0.05)"},children:(r.name||r.username||"S").charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"0.95rem",color:"var(--text-main)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.name||r.username}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.2rem"},children:[e.jsx("span",{style:{padding:"2px 6px",background:"var(--bg-card)",borderRadius:"4px",border:"1px solid var(--border-color)"},children:r.batch||"General"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:r.email?.split("@")[0]})]})]}),G.includes(r.id)&&e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"#a78bfa",display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:"0 2px 4px rgba(167, 139, 250, 0.4)"},children:e.jsx(vs,{size:14,strokeWidth:3})})]},r.id))})}),e.jsxs("div",{className:"modal-footer",style:{padding:"1.5rem 2rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-card)"},children:[e.jsxs("div",{style:{color:"var(--text-main)"},children:[e.jsx("span",{style:{fontWeight:800,color:"var(--primary)",fontSize:"1.25rem"},children:G.length}),e.jsx("span",{style:{marginLeft:"0.5rem",color:"var(--text-muted)"},children:"students selected"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:()=>P(!1),className:"btn-reset",style:{padding:"0.75rem 1.5rem",borderRadius:"12px",fontWeight:600},children:"Cancel"}),e.jsx("button",{onClick:pe,style:{padding:"0.75rem 2.5rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"12px",fontWeight:700,fontSize:"1rem",cursor:"pointer",boxShadow:"0 8px 20px var(--primary-alpha)",transition:"all 0.2s ease"},onMouseEnter:r=>r.currentTarget.style.transform="translateY(-2px)",onMouseLeave:r=>r.currentTarget.style.transform="translateY(0)",children:"Confirm Assignments"})]})]})]})})]})}const O="http://localhost:3000/api",ct=["#3b82f6","#8b5cf6","#06b6d4","#10b981","#f59e0b"],We="admin-001";function ci(){const{user:t}=Vs(),{t:j}=gs(),W=Gs(),[T,v]=a.useState(""),[y,g]=a.useState(""),[I,b]=a.useState(0);a.useEffect(()=>{const d=t?.id||t?.userId||We,m=async()=>{try{const M=await A.get(`${O}/messages/unread/${d}`);b(M.data.unreadCount||0)}catch{}};m();const o=setInterval(m,15e3);return()=>clearInterval(o)},[t]),a.useEffect(()=>{switch(W.pathname.split("/").pop()){case"allocations":v(j("allocations")),g(j("mentor_student_assignments"));break;case"student-leaderboard":v(j("student_leaderboard")),g(j("top_performers"));break;case"mentor-leaderboard":v(j("mentor_leaderboard")),g(j("mentor_activity"));break;case"all-submissions":v(j("all_submissions")),g(j("platform_wide_submissions"));break;case"global-tasks":v(j("global_tasks")),g(j("tasks_visible_all"));break;case"global-problems":v(j("global_problems")),g(j("coding_challenges_all"));break;case"aptitude-tests":v(j("aptitude_tests")),g(j("manage_aptitude_tests"));break;case"global-tests":v(j("global_complete_tests")),g(j("global_tests_subtitle"));break;case"live-monitoring":v(j("global_live_monitoring")),g(j("monitor_all_subtitle"));break;case"operations":v(j("admin_operations")),g(j("admin_ops_subtitle"));break;case"user-management":v("User Management"),g("Create, edit, and manage platform users");break;case"messaging":v("Messaging"),g("Chat with students and mentors");break;case"analytics":v(j("analytics")),g(j("advanced_analytics_subtitle"));break;case"skill-tests":v("Skill Tests"),g("Create and manage AI skill assessments");break;case"skill-submissions":v("Skill Test Submissions"),g("View all student skill test results");break;default:v(j("dashboard")),g(j("system_administration"))}},[W,j]);const x=[{path:"/admin",label:j("dashboard"),icon:e.jsx(Zs,{size:20})},{label:"Content Management",icon:e.jsx(St,{size:20}),defaultExpanded:!1,children:[{path:"/admin/global-tasks",label:j("global_tasks"),icon:e.jsx(Fe,{size:20})},{path:"/admin/global-problems",label:j("global_problems"),icon:e.jsx(St,{size:20})},{path:"/admin/aptitude-tests",label:j("aptitude_tests"),icon:e.jsx(Ie,{size:20})},{path:"/admin/global-tests",label:j("global_complete_tests"),icon:e.jsx(it,{size:20})},{path:"/admin/skill-tests",label:"Skill Tests",icon:e.jsx(Xe,{size:20})}]},{label:"Allocations",icon:e.jsx(re,{size:20}),defaultExpanded:!1,children:[{path:"/admin/allocations",label:j("allocations"),icon:e.jsx(re,{size:20})}]},{label:"Rankings",icon:e.jsx(tt,{size:20}),defaultExpanded:!1,children:[{path:"/admin/student-leaderboard",label:j("student_ranks"),icon:e.jsx(tt,{size:20})},{path:"/admin/mentor-leaderboard",label:j("mentor_ranks"),icon:e.jsx(pt,{size:20})}]},{label:"Monitoring",icon:e.jsx($e,{size:20}),defaultExpanded:!1,children:[{path:"/admin/all-submissions",label:j("all_submissions"),icon:e.jsx(ar,{size:20})},{path:"/admin/skill-submissions",label:"Skill Submissions",icon:e.jsx(Xe,{size:20})},{path:"/admin/live-monitoring",label:j("live_monitoring"),icon:e.jsx($e,{size:20})},{path:"/admin/analytics",label:j("analytics"),icon:e.jsx(Ut,{size:20})}]},{label:"System",icon:e.jsx(wt,{size:20}),defaultExpanded:!1,children:[{path:"/admin/operations",label:j("admin_operations"),icon:e.jsx(wt,{size:20})},{path:"/admin/user-management",label:"User Management",icon:e.jsx(ze,{size:20})},{path:"/admin/messaging",label:"Messaging",icon:e.jsx(Ys,{size:20}),badge:I}]}];return e.jsx(er,{navItems:x,title:T,subtitle:y,children:e.jsxs(Js,{children:[e.jsx(je,{path:"/",element:e.jsx(Gr,{})}),e.jsx(je,{path:"/global-tasks",element:e.jsx(ti,{})}),e.jsx(je,{path:"/global-problems",element:e.jsx(si,{})}),e.jsx(je,{path:"/aptitude-tests",element:e.jsx(ii,{})}),e.jsx(je,{path:"/global-tests",element:e.jsx(ri,{})}),e.jsx(je,{path:"/skill-tests",element:e.jsx(Vr,{})}),e.jsx(je,{path:"/skill-submissions",element:e.jsx(ur,{user:t,isAdmin:!0})}),e.jsx(je,{path:"/allocations",element:e.jsx(Yr,{})}),e.jsx(je,{path:"/student-leaderboard",element:e.jsx(Jr,{})}),e.jsx(je,{path:"/mentor-leaderboard",element:e.jsx(Kr,{})}),e.jsx(je,{path:"/all-submissions",element:e.jsx(Xr,{})}),e.jsx(je,{path:"/live-monitoring",element:e.jsx(Wr,{user:t})}),e.jsx(je,{path:"/analytics",element:e.jsx(ai,{})}),e.jsx(je,{path:"/operations",element:e.jsx(Pr,{})}),e.jsx(je,{path:"/user-management",element:e.jsx(Ur,{})}),e.jsx(je,{path:"/messaging",element:e.jsx(tr,{currentUser:{...t,role:"admin"}})})]})})}function Gr(){const[t,j]=a.useState(null),[W,T]=a.useState(!0),[v,y]=a.useState("7d");if(a.useEffect(()=>{A.get(`${O}/analytics/admin`).then(x=>{j(x.data),T(!1)}).catch(x=>T(!1))},[]),W)return e.jsx("div",{className:"loading-spinner"});if(!t)return e.jsx("div",{children:"Error loading stats"});const g=t.totalStudents>0?Math.round(t.totalSubmissions/t.totalStudents*10)/10:0,I=t.mentorCount||Math.ceil(t.totalStudents/15),b=t.recentSubmissions?.length||0;return e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 50%, rgba(6, 182, 212, 0.05) 100%)",borderRadius:"20px",padding:"2rem 2.5rem",marginBottom:"2rem",border:"1px solid rgba(59, 130, 246, 0.2)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsx("div",{style:{position:"relative",zIndex:1},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(59, 130, 246, 0.3)"},children:e.jsx(ze,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:"1.75rem",fontWeight:800,background:"linear-gradient(135deg, #fff, #94a3b8)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Admin Control Center"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.9rem"},children:"Monitor performance, manage content, and track platform health"})]})]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden",transition:"all 0.3s ease"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(59, 130, 246, 0.15), transparent 70%)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #1e40af, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:e.jsx(re,{size:22,color:"white"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:t.totalStudents}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Total Students"})]})]}),e.jsxs("div",{style:{marginTop:"1rem",padding:"0.35rem 0.75rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"20px",display:"inline-flex",alignItems:"center",gap:"0.35rem",fontSize:"0.75rem",fontWeight:600,color:"#10b981"},children:[e.jsx(Ut,{size:12})," +12% this month"]})]}),e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(139, 92, 246, 0.15), transparent 70%)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #6d28d9, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:e.jsx(pt,{size:22,color:"white"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:I}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Active Mentors"})]})]}),e.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:["~",Math.round(t.totalStudents/I)," students/mentor"]})]}),e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(6, 182, 212, 0.15), transparent 70%)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #0891b2, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(6, 182, 212, 0.3)"},children:e.jsx(Ht,{size:22,color:"white"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:t.totalSubmissions}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Submissions"})]})]}),e.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[g," avg per student"]})]}),e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(16, 185, 129, 0.15), transparent 70%)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #047857, #10b981)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:e.jsx(oe,{size:22,color:"white"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:[t.successRate,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Success Rate"})]})]}),e.jsx("div",{style:{marginTop:"1rem",height:"6px",background:"rgba(16, 185, 129, 0.15)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${t.successRate}%`,background:"linear-gradient(90deg, #10b981, #06b6d4)",borderRadius:"3px",transition:"width 1s ease"}})})]}),e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(245, 158, 11, 0.15), transparent 70%)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #d97706, #f59e0b)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:e.jsx(St,{size:22,color:"white"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:t.totalContent}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Total Content"})]})]}),e.jsx("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:"Tasks, Problems & Tests"})]}),e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(236, 72, 153, 0.15), transparent 70%)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #be185d, #ec4899)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(236, 72, 153, 0.3)"},children:e.jsx(et,{size:22,color:"white"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:b}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Active Today"})]})]}),e.jsxs("div",{style:{marginTop:"1rem",padding:"0.35rem 0.75rem",background:"rgba(236, 72, 153, 0.1)",borderRadius:"20px",display:"inline-flex",alignItems:"center",gap:"0.35rem",fontSize:"0.75rem",fontWeight:600,color:"#ec4899"},children:[e.jsx($e,{size:12})," Live"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"1.5rem",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Submission Trends"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)"},children:"Platform activity over time"})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["7d","30d","90d"].map(x=>e.jsx("button",{onClick:()=>y(x),style:{padding:"0.4rem 0.8rem",fontSize:"0.75rem",fontWeight:600,border:"none",borderRadius:"8px",cursor:"pointer",background:v===x?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"var(--bg-tertiary)",color:v===x?"white":"var(--text-muted)",transition:"all 0.2s ease"},children:x},x))})]}),e.jsx("div",{style:{width:"100%",height:"280px"},children:e.jsx(at,{children:e.jsxs(us,{data:t.submissionTrends,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorCountAdmin",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),e.jsx(yt,{strokeDasharray:"3 3",stroke:"var(--border-color)",vertical:!1}),e.jsx(ft,{dataKey:"date",stroke:"var(--text-muted)",fontSize:11,axisLine:!1,tickLine:!1}),e.jsx(jt,{stroke:"var(--text-muted)",fontSize:11,axisLine:!1,tickLine:!1}),e.jsx(nt,{contentStyle:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.3)"},labelStyle:{color:"var(--text)",fontWeight:600},itemStyle:{color:"#3b82f6"}}),e.jsx(hs,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:3,fillOpacity:1,fill:"url(#colorCountAdmin)"})]})})})]}),e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"1.5rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Language Distribution"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)"},children:"Code submissions by language"})]}),e.jsx("div",{style:{width:"100%",height:"200px"},children:e.jsx(at,{children:e.jsxs(bs,{children:[e.jsx(ys,{data:t.languageStats,cx:"50%",cy:"50%",innerRadius:55,outerRadius:80,paddingAngle:4,dataKey:"value",children:t.languageStats.map((x,d)=>e.jsx(fs,{fill:ct[d%ct.length]},`cell-${d}`))}),e.jsx(nt,{contentStyle:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px"}})]})})}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginTop:"1rem"},children:t.languageStats.map((x,d)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"3px",background:ct[d%ct.length]}}),e.jsx("span",{style:{color:"var(--text-muted)"},children:x.name}),e.jsx("span",{style:{marginLeft:"auto",fontWeight:600},children:x.value})]},x.name))})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"1.5rem",maxHeight:"420px",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"linear-gradient(135deg, #6366f1, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx($e,{size:18,color:"white"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Recent Activity"}),e.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:"Live platform submissions"})]})]}),e.jsxs("button",{style:{padding:"0.5rem 1rem",fontSize:"0.75rem",fontWeight:600,background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-muted)",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.4rem"},children:[e.jsx(_e,{size:12})," Refresh"]})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.recentSubmissions.map((x,d)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"var(--bg-tertiary)",borderRadius:"12px",border:"1px solid var(--border-color)",transition:"all 0.2s ease"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:x.status==="accepted"?"#10b981":"#ef4444",boxShadow:`0 0 12px ${x.status==="accepted"?"rgba(16, 185, 129, 0.5)":"rgba(239, 68, 68, 0.5)"}`}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:x.studentName}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.25rem"},children:[e.jsx(Se,{size:11}),new Date(x.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),e.jsx("span",{style:{opacity:.5},children:"â€¢"}),e.jsx("span",{children:"submitted a solution"})]})]}),e.jsxs("div",{style:{padding:"0.4rem 0.8rem",borderRadius:"8px",fontSize:"0.85rem",fontWeight:700,background:x.status==="accepted"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:x.status==="accepted"?"#10b981":"#ef4444"},children:[x.score,"%"]})]},x.id))})]}),e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.25rem"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"linear-gradient(135deg, #f59e0b, #fbbf24)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(tt,{size:18,color:"white"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Top Performers"}),e.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:"Leading students"})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.studentPerformance.slice(0,5).map((x,d)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:d===0?"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))":"var(--bg-tertiary)",borderRadius:"12px",border:`1px solid ${d===0?"rgba(251, 191, 36, 0.3)":"var(--border-color)"}`},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:d===0?"linear-gradient(135deg, #fbbf24, #f59e0b)":d===1?"linear-gradient(135deg, #94a3b8, #64748b)":d===2?"linear-gradient(135deg, #d97706, #b45309)":"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:700,color:d<3?"white":"var(--text-muted)"},children:d<3?e.jsx(tt,{size:14}):`#${d+1}`}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:x.name}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[x.count," submissions"]})]}),e.jsxs("div",{style:{fontSize:"1rem",fontWeight:700,color:x.score>=80?"#10b981":x.score>=60?"#f59e0b":"#ef4444"},children:[x.score,"%"]})]},x.name))})]})]})]})}function Yr(){const[t,j]=a.useState([]),[W,T]=a.useState(!0),[v,y]=a.useState(null);return a.useEffect(()=>{A.get(`${O}/allocations`).then(g=>{j(g.data),T(!1)}).catch(g=>T(!1))},[]),W?e.jsx("div",{className:"loading-spinner"}):e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:800,margin:0},children:"Mentor Allocations"}),e.jsx("p",{style:{color:"var(--text-muted)",margin:"0.25rem 0 0 0"},children:"Manage and view student-mentor assignments"})]}),e.jsx("div",{style:{display:"grid",gap:"1rem"},children:t.map(g=>e.jsxs("div",{className:"card",style:{padding:0,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"1.5rem 2rem",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",background:v===g.mentorId?"rgba(59, 130, 246, 0.05)":"transparent"},onClick:()=>y(v===g.mentorId?null:g.mentorId),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem"},children:[e.jsx("div",{className:"avatar-circle",style:{background:"linear-gradient(135deg, #3b82f6, #06b6d4)"},children:g.mentorName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:g.mentorName}),e.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-muted)"},children:g.mentorEmail})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600},children:g.students.length}),e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginLeft:"0.5rem"},children:"Students"})]}),e.jsx("div",{style:{transform:v===g.mentorId?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"},children:e.jsx(Ht,{size:18,style:{transform:"rotate(90deg)",color:"var(--text-muted)"}})})]})]}),v===g.mentorId&&e.jsx("div",{style:{padding:"0 2rem 1.5rem",borderTop:"1px solid var(--border-color)"},children:e.jsx("div",{className:"table-container",style:{marginTop:"1.5rem",background:"var(--bg-tertiary)",borderRadius:"0.75rem"},children:e.jsxs("table",{style:{margin:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Student Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Batch"}),e.jsx("th",{children:"ID"})]})}),e.jsx("tbody",{children:g.students.map(I=>e.jsxs("tr",{children:[e.jsx("td",{children:I.name}),e.jsx("td",{children:I.email}),e.jsx("td",{children:I.batch}),e.jsx("td",{style:{fontSize:"0.75rem",fontFamily:"monospace",color:"var(--text-muted)"},children:I.id})]},I.id))})]})})})]},g.mentorId))})]})}function Jr(){const[t,j]=a.useState([]),[W,T]=a.useState(!0),[v,y]=a.useState(null),[g,I]=a.useState("");if(a.useEffect(()=>{A.get(`${O}/leaderboard`).then(d=>{j(d.data),T(!1)}).catch(d=>T(!1))},[]),W)return e.jsx("div",{className:"loading-spinner"});const b=d=>d===1?e.jsx(tt,{size:24,style:{color:"#fbbf24"}}):d===2?e.jsx(pt,{size:24,style:{color:"#94a3b8"}}):d===3?e.jsx(pt,{size:24,style:{color:"#b45309"}}):e.jsxs("span",{style:{fontWeight:600,color:"var(--text-muted)"},children:["#",d]}),x=d=>d.violations?(d.violations.tabSwitches||0)+(d.violations.copyPaste||0)+(d.violations.cameraBlocked||0)+(d.violations.phoneDetection||0)+(d.violations.integrityViolations||0)+(d.violations.plagiarism||0):0;return e.jsxs("div",{className:"card animate-fadeIn",style:{padding:"0",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"2rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(tt,{size:32,className:"text-primary"}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0},children:"Global Performance Ranking"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Real-time ranking of students across all mentors"})]})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Te,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search students...",value:g,onChange:d=>I(d.target.value),style:{padding:"0.75rem 1rem 0.75rem 2.75rem",borderRadius:"12px",border:"1px solid var(--border-color)",background:"var(--bg-secondary)",color:"var(--text-primary)",outline:"none",width:"300px",fontSize:"0.9rem"}})]})]}),e.jsx("div",{className:"table-container",style:{maxHeight:"600px",overflowY:"auto"},children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Rank"}),e.jsx("th",{children:"Student Name"}),e.jsx("th",{children:"Submissions"}),e.jsx("th",{children:"Avg. Score"}),e.jsx("th",{children:"Violations"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:t.filter(d=>d.name.toLowerCase().includes(g.toLowerCase())).map((d,m)=>{const M=x(d)>0||d.violations?.plagiarism>0;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:b(m+1)})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{className:"avatar-circle",children:d.name.charAt(0)}),e.jsx("span",{children:d.name})]})}),e.jsx("td",{children:d.totalSubmissions}),e.jsx("td",{children:e.jsxs("span",{style:{fontWeight:700,color:"var(--primary)"},children:[d.avgScore,"%"]})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[d.violations?.tabSwitches>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",display:"flex",alignItems:"center",gap:"4px"},title:"Tab Switches",children:[e.jsx(ve,{size:10})," ",d.violations.tabSwitches]}),d.violations?.cameraBlocked>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"4px"},title:"Camera Blocked",children:["ðŸ“· ",d.violations.cameraBlocked]}),d.violations?.phoneDetection>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"4px"},title:"Phone Detected",children:["ðŸ“± ",d.violations.phoneDetection]}),d.violations?.copyPaste>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",display:"flex",alignItems:"center",gap:"4px"},title:"Copy/Paste Attempts",children:["ðŸ“‹ ",d.violations.copyPaste]}),d.violations?.plagiarism>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"4px"},title:"Plagiarism",children:[e.jsx(ue,{size:10})," ",d.violations.plagiarism]}),!M&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#10b981"},children:e.jsx(oe,{size:14})})]})}),e.jsx("td",{children:e.jsx("div",{style:{width:"100px",height:"8px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"10px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${d.avgScore}%`,height:"100%",background:M?"var(--warning)":"var(--primary)"}})})}),e.jsx("td",{children:e.jsxs("button",{onClick:()=>y({id:d.studentId,name:d.name}),style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.5rem 0.85rem",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.75rem",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.3)"},title:"Generate comprehensive report",children:[e.jsx(De,{size:14}),"Report"]})})]},d.studentId)})})]})})]}),v&&e.jsx(lr,{studentId:v.id,studentName:v.name,onClose:()=>y(null),requestedBy:"Administrator",requestedByRole:"admin"})]})}function Kr(){const[t,j]=a.useState([]),[W,T]=a.useState(!0);return a.useEffect(()=>{A.get(`${O}/mentor-leaderboard`).then(v=>{j(v.data),T(!1)}).catch(v=>T(!1))},[]),W?e.jsx("div",{className:"loading-spinner"}):e.jsx("div",{className:"card animate-fadeIn",style:{padding:"0",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"2rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[e.jsx(pt,{size:32,style:{color:"#8b5cf6"}}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0},children:"Global Mentor Leaderboard"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Ranking mentors by student success and platform engagement"})]})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Mentor"}),e.jsx("th",{children:"Students"}),e.jsx("th",{children:"Content Created"}),e.jsx("th",{children:"Total Submissions"}),e.jsx("th",{children:"Avg. Student Score"})]})}),e.jsx("tbody",{children:t.map(v=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{className:"avatar-circle",style:{background:"linear-gradient(135deg, #8b5cf6, #3b82f6)"},children:v.name.charAt(0)}),e.jsx("span",{children:v.name})]})}),e.jsx("td",{children:v.studentCount}),e.jsxs("td",{children:[v.totalContent," items"]}),e.jsx("td",{children:v.totalSubmissions}),e.jsx("td",{children:e.jsxs("span",{style:{fontWeight:700,color:"#8b5cf6"},children:[v.avgStudentScore,"%"]})})]},v.mentorId))})]})})]})})}function Xr(){const[t,j]=a.useState([]),[W,T]=a.useState([]),[v,y]=a.useState([]),[g,I]=a.useState([]),[b,x]=a.useState(!0),[d,m]=a.useState(""),[o,M]=a.useState("all"),[q,h]=a.useState(null),[k,w]=a.useState(null),[B,Q]=a.useState(null),[te,i]=a.useState(null),[S,P]=a.useState(!1),G=()=>{x(!0),Promise.all([A.get(`${O}/submissions`),A.get(`${O}/aptitude-submissions`),A.get(`${O}/global-test-submissions`)]).then(([C,L,K])=>{const ke=Array.isArray(C.data)?C.data:C.data?.data||[],p=ke.filter(ee=>ee.isMLTask).map(ee=>({...ee,subType:"ml-task"})),Y=ke.filter(ee=>!ee.isMLTask).map(ee=>({...ee,subType:"code"})),u=(L.data||[]).map(ee=>({...ee,subType:"aptitude",itemTitle:ee.testTitle,language:"Aptitude"})),R=(K.data||[]).map(ee=>({...ee,subType:"global",itemTitle:ee.testTitle,language:"Mixed",score:ee.overallPercentage}));j(Y),T(p),y(u),I(R),x(!1)}).catch(C=>{console.error("Fetch error:",C),x(!1)})};a.useEffect(()=>{G()},[]);const V=()=>{const C=f();if(C.length===0){alert("No submissions to download");return}const L=["Student Name","Student Email","Type","Problem/Test Title","Language","Score","Status","Tab Switches","Camera Blocked","Phone Detected","Plagiarism Detected","Submitted At"],K=C.map(R=>[R.studentName||"",R.studentEmail||"",R.subType==="aptitude"?"Aptitude":R.subType==="global"?"Global":"Code",R.itemTitle||R.testTitle||"",R.subType==="aptitude"?"N/A":R.subType==="global"?"Mixed":R.language||"N/A",R.score||0,R.status||"",R.integrity?.tabSwitches||R.tabSwitches||0,R.cameraBlockedCount||0,R.phoneDetectionCount||0,R.plagiarism?.detected?"Yes":"No",R.submittedAt?new Date(R.submittedAt).toLocaleString():""]),ke=[L.join(","),...K.map(R=>R.map(ee=>{const pe=String(ee);return pe.includes(",")||pe.includes('"')||pe.includes(`
`)?`"${pe.replace(/"/g,'""')}"`:pe}).join(","))].join(`
`),p=new Blob([ke],{type:"text/csv;charset=utf-8;"}),Y=document.createElement("a"),u=URL.createObjectURL(p);Y.setAttribute("href",u),Y.setAttribute("download",`submissions_${o}_${new Date().toISOString().split("T")[0]}.csv`),Y.style.visibility="hidden",document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)},Z=async()=>{if(!(!window.confirm(`âš ï¸ WARNING: This will permanently delete ALL submissions from ALL students!

This includes:
â€¢ All code submissions
â€¢ All aptitude test submissions
â€¢ All problem completions
â€¢ All task completions

This action CANNOT be undone. Are you sure?`)||!window.confirm(`ðŸš¨ FINAL CONFIRMATION ðŸš¨

You are about to delete ALL submissions permanently.

Type OK to proceed.`))){P(!0);try{const K=await A.delete(`${O}/submissions`);alert(`âœ… Reset Complete!

â€¢ Code submissions deleted: ${K.data.deletedCodeSubmissions}
â€¢ Aptitude submissions deleted: ${K.data.deletedAptitudeSubmissions}
â€¢ Global test submissions deleted: ${K.data.deletedGlobalSubmissions||0}`),G()}catch(K){alert("âŒ Failed to reset submissions: "+(K.response?.data?.error||K.message))}finally{P(!1)}}},ne=[...t,...W,...v,...g].sort((C,L)=>new Date(L.submittedAt)-new Date(C.submittedAt)),f=()=>(o==="all"?ne:o==="code"?t:o==="ml-task"?W:o==="aptitude"?v:g).filter(L=>(L.studentName||"").toLowerCase().includes(d.toLowerCase())||(L.itemTitle||L.testTitle||"").toLowerCase().includes(d.toLowerCase())||L.status.toLowerCase().includes(d.toLowerCase())),J=f();return b?e.jsx("div",{className:"loading-spinner"}):e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"2rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:800,margin:0},children:"Submission Archives"}),e.jsx("p",{style:{color:"var(--text-muted)",margin:"0.25rem 0 0 0"},children:"Global audit trail of all submissions"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",borderRadius:"8px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[e.jsxs("button",{onClick:()=>M("all"),style:{padding:"0.5rem 1rem",background:o==="all"?"var(--primary)":"transparent",border:"none",color:o==="all"?"white":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem"},children:["All (",ne.length,")"]}),e.jsxs("button",{onClick:()=>M("code"),style:{padding:"0.5rem 1rem",background:o==="code"?"var(--primary)":"transparent",border:"none",color:o==="code"?"white":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem"},children:["ðŸ’» Code (",t.length,")"]}),e.jsxs("button",{onClick:()=>M("ml-task"),style:{padding:"0.5rem 1rem",background:o==="ml-task"?"#06b6d4":"transparent",border:"none",color:o==="ml-task"?"white":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem"},children:["ðŸ§  ML Tasks (",W.length,")"]}),e.jsxs("button",{onClick:()=>M("aptitude"),style:{padding:"0.5rem 1rem",background:o==="aptitude"?"#8b5cf6":"transparent",border:"none",color:o==="aptitude"?"white":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem"},children:["ðŸ“ Aptitude (",v.length,")"]}),e.jsxs("button",{onClick:()=>M("global"),style:{padding:"0.5rem 1rem",background:o==="global"?"#3b82f6":"transparent",border:"none",color:o==="global"?"white":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem"},children:["ðŸŒ Global (",g.length,")"]})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Te,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search student, problem or status...",style:{padding:"0.6rem 1rem 0.6rem 2.5rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"white",width:"300px"},value:d,onChange:C=>m(C.target.value)})]}),e.jsxs("button",{onClick:V,disabled:J.length===0,style:{padding:"0.6rem 1rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",color:"#10b981",cursor:J.length===0?"not-allowed":"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem",opacity:J.length===0?.5:1,transition:"all 0.2s ease"},onMouseEnter:C=>{J.length>0&&(C.target.style.background="rgba(16, 185, 129, 0.2)")},onMouseLeave:C=>{C.target.style.background="rgba(16, 185, 129, 0.1)"},children:[e.jsx(Ze,{size:16}),"Download CSV"]}),e.jsxs("button",{onClick:Z,disabled:S||ne.length===0,style:{padding:"0.6rem 1rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",color:"#ef4444",cursor:S||ne.length===0?"not-allowed":"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem",opacity:S||ne.length===0?.5:1,transition:"all 0.2s ease"},onMouseEnter:C=>{!S&&ne.length>0&&(C.target.style.background="rgba(239, 68, 68, 0.2)")},onMouseLeave:C=>{C.target.style.background="rgba(239, 68, 68, 0.1)"},children:[e.jsx(Le,{size:16}),S?"Resetting...":"Reset All"]})]})]}),e.jsx("div",{className:"table-container card glass",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Student"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Problem / Test"}),e.jsx("th",{children:"Language"}),e.jsx("th",{children:"Score"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Submitted At"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:J.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"3rem"},children:"No submissions found"})}):J.map(C=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{style:{fontWeight:600},children:C.studentName})}),e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:C.subType==="aptitude"?"rgba(139, 92, 246, 0.1)":"rgba(59, 130, 246, 0.1)",color:C.subType==="ml-task"?"#06b6d4":C.subType==="aptitude"?"#8b5cf6":"var(--primary)"},children:C.subType==="ml-task"?"ðŸ§  ML Task":C.subType==="aptitude"?"ðŸ“ Aptitude":C.subType==="global"?"ðŸŒ Global":"ðŸ’» Code"})}),e.jsx("td",{children:e.jsx("div",{style:{color:"var(--primary)",fontWeight:500},children:C.itemTitle||C.testTitle})}),e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:C.subType==="aptitude"?"N/A":C.subType==="global"?"Mixed":C.language?.toUpperCase()||"N/A"})}),e.jsxs("td",{style:{fontWeight:700,fontSize:"1.1rem"},children:[C.score,"%"]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",alignItems:"center"},children:[e.jsx("span",{className:`status-badge ${C.status}`,children:C.status}),C.plagiarism?.detected&&e.jsxs("span",{className:"status-badge plagiarized",style:{display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(ue,{size:11})," Plag"]}),(C.integrity?.integrityViolation||C.tabSwitches>0)&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(ue,{size:10})," ",C.integrity?.tabSwitches||C.tabSwitches||0," Tab"]}),C.cameraBlockedCount>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:["ðŸ“· ",C.cameraBlockedCount," Cam"]}),C.phoneDetectionCount>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:["ðŸ“± ",C.phoneDetectionCount," Phone"]})]})}),e.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(C.submittedAt).toLocaleString()}),e.jsx("td",{children:C.subType==="aptitude"?e.jsxs("button",{onClick:()=>Q(C),style:{background:"rgba(139, 92, 246, 0.1)",border:"none",color:"#8b5cf6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ve,{size:14})," Results"]}):C.subType==="global"?e.jsxs("button",{onClick:()=>i(C.id),style:{background:"rgba(59, 130, 246, 0.1)",border:"none",color:"#3b82f6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ve,{size:14})," Full Report"]}):C.subType==="ml-task"?e.jsxs("button",{onClick:()=>w(C),style:{background:"rgba(6, 182, 212, 0.1)",border:"none",color:"#06b6d4",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ve,{size:14})," ML Report"]}):e.jsxs("button",{onClick:()=>h(C),style:{background:"rgba(59, 130, 246, 0.1)",border:"none",color:"#3b82f6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ve,{size:14})," Report"]})})]},C.id))})]})}),B&&e.jsx(sr,{submission:B,onClose:()=>Q(null)}),te&&e.jsx(rr,{submissionId:te,onClose:()=>i(null),isStudentView:!1}),k&&e.jsx(Zr,{submission:k,onClose:()=>w(null)}),q&&e.jsx(ei,{submission:q,onClose:()=>h(null)})]})}function Zr({submission:t,onClose:j}){const W=(t.submissionType||"").includes("github"),T=y=>{if(!y||y==="N/A")return null;const g=y.match(/(\d+)/);return g?parseInt(g[1]):null},v=[{label:"Correctness",value:T(t.analysis?.correctness),color:"#3b82f6"},{label:"Code Quality",value:T(t.analysis?.efficiency),color:"#8b5cf6"},{label:"Documentation",value:T(t.analysis?.codeStyle),color:"#06b6d4"},{label:"Model Performance",value:T(t.analysis?.bestPractices),color:"#10b981"}].filter(y=>y.value!==null);return e.jsx("div",{className:"modal-overlay",onClick:j,children:e.jsxs("div",{className:"modal-content",onClick:y=>y.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #06b6d4, #0891b2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Xe,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"#06b6d4",textTransform:"uppercase",fontWeight:600},children:"ML Task Report"}),e.jsx("h2",{style:{margin:0,fontSize:"1.1rem"},children:t.itemTitle||"ML Task"})]})]}),e.jsx("button",{onClick:j,className:"modal-close",children:e.jsx(Ee,{size:20})})]}),e.jsxs("div",{className:"modal-body",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"var(--bg-tertiary)",borderRadius:"0.5rem",border:"1px solid var(--border-color)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Student Name"}),e.jsx("div",{style:{fontWeight:600,fontSize:"1rem"},children:t.studentName})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Submitted On"}),e.jsx("div",{style:{fontWeight:500},children:new Date(t.submittedAt).toLocaleString()})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",marginBottom:"2rem",padding:"1.5rem",borderRadius:"1rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",border:`1px solid ${t.status==="accepted"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[e.jsx("div",{style:{width:"90px",height:"90px",borderRadius:"50%",background:`conic-gradient(${t.score>=80?"#10b981":t.score>=60?"#f59e0b":"#ef4444"} ${(t.score||0)*3.6}deg, rgba(255,255,255,0.05) 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsxs("div",{style:{width:"76px",height:"76px",borderRadius:"50%",background:"var(--bg-card)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"1.6rem",fontWeight:800,color:"var(--text-main)"},children:t.score}),e.jsx("span",{style:{fontSize:"0.65rem",color:"var(--text-muted)"},children:"SCORE"})]})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem 1rem",borderRadius:"2rem",marginBottom:"0.5rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",color:t.status==="accepted"?"#10b981":"#ef4444",fontWeight:700,fontSize:"0.9rem"},children:[t.status==="accepted"?e.jsx(oe,{size:16}):e.jsx(Ee,{size:16}),(t.status||"pending").toUpperCase()]}),e.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"0.5rem"},children:e.jsx("span",{style:{fontSize:"0.8rem",color:"#06b6d4",fontWeight:600},children:W?"ðŸ”— GitHub Submission":"ðŸ“ File Upload"})})]})]}),v.length>0&&e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-main)"},children:[e.jsx(Pt,{size:18,color:"#06b6d4"})," Performance Metrics"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:v.map(y=>e.jsxs("div",{style:{background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:y.label}),e.jsxs("span",{style:{fontWeight:700,color:y.value>=80?"#10b981":y.value>=60?"#f59e0b":"#ef4444"},children:[y.value,"%"]})]}),e.jsx("div",{style:{height:"6px",background:"rgba(255,255,255,0.05)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${y.value}%`,height:"100%",background:y.color,borderRadius:"3px",transition:"width 1s ease-out"}})})]},y.label))})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ve,{size:18,color:"#06b6d4"})," AI Feedback"]}),e.jsx("div",{style:{background:"var(--bg-dark)",padding:"1.25rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)",whiteSpace:"pre-wrap",color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.7",maxHeight:"300px",overflowY:"auto"},children:t.feedback||"No feedback provided."})]}),t.aiExplanation&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ve,{size:18,color:"#8b5cf6"})," Summary"]}),e.jsx("div",{style:{background:"rgba(139, 92, 246, 0.05)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid rgba(139, 92, 246, 0.2)",color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.6"},children:t.aiExplanation})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[W?e.jsx(hr,{size:18,color:"var(--text-main)"}):e.jsx(De,{size:18,color:"var(--text-main)"}),W?"GitHub Repository":"Submitted Code"]}),W?e.jsx("div",{style:{background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)"},children:e.jsxs("a",{href:t.code,target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6",display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[e.jsx(br,{size:16})," ",t.code]})}):e.jsx("pre",{style:{background:"var(--bg-dark)",padding:"1.25rem",borderRadius:"0.75rem",overflow:"auto",maxHeight:"300px",fontSize:"0.8rem",fontFamily:"monospace",color:"var(--text-main)",border:"1px solid var(--border-color)",lineHeight:"1.6"},children:t.code})]})]})]})})}function ei({submission:t,onClose:j}){return e.jsx("div",{className:"modal-overlay",onClick:j,children:e.jsxs("div",{className:"modal-content",onClick:W=>W.stopPropagation(),style:{maxWidth:"900px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:t.status==="accepted"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f59e0b)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(De,{size:20,color:"white"})}),e.jsx("h2",{children:"Detailed Submission Report"})]}),e.jsx("button",{onClick:j,className:"modal-close",children:e.jsx(le,{size:20})})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"rgba(59, 130, 246, 0.05)",borderRadius:"1rem",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Student Name"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600,fontSize:"1.1rem"},children:t.studentName})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submitted At"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:new Date(t.submittedAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Language"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.language})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submission Type"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.submissionType==="file"?"File Upload":"Code Editor"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:`1px solid ${t.status==="accepted"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"3rem",fontWeight:800,color:t.status==="accepted"?"#10b981":"#ef4444"},children:t.score}),e.jsx("div",{style:{color:"var(--text-muted)"},children:"AI Evaluation Score"})]}),e.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"1rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:t.status==="accepted"?"#10b981":"#ef4444",fontWeight:700,fontSize:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.status==="accepted"?e.jsx(oe,{size:24}):e.jsx(le,{size:24}),t.status?.toUpperCase()]})]}),t.plagiarism?.detected&&e.jsxs("div",{className:"plagiarism-banner",style:{marginBottom:"1.5rem"},children:[e.jsx(ue,{size:24,color:"#ef4444"}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#ef4444"},children:"Plagiarism Detected"}),e.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["This code matches a submission from ",t.plagiarism.copiedFromName]})]})]}),(t.tabSwitches>0||t.copyPasteAttempts>0||t.cameraBlockedCount>0||t.phoneDetectionCount>0)&&e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#f59e0b"},children:[e.jsx(ue,{size:18})," Proctoring Violations"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[t.tabSwitches>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(ve,{size:18,color:"#f59e0b"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.tabSwitches," Tab Switches"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.tabSwitches*5,25)," pts"]})]})]}),t.copyPasteAttempts>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“‹"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.copyPasteAttempts," Copy/Paste"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.copyPasteAttempts*3,15)," pts"]})]})]}),t.cameraBlockedCount>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“·"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.cameraBlockedCount," Camera Blocked"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.cameraBlockedCount*10,30)," pts"]})]})]}),t.phoneDetectionCount>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“±"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.phoneDetectionCount," Phone Detected"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.phoneDetectionCount*15,45)," pts"]})]})]})]}),t.proctoringVideo&&e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1rem"},children:"ðŸŽ¥"}),e.jsxs("span",{style:{fontSize:"0.85rem",color:"#3b82f6"},children:["Proctoring video recorded: ",t.proctoringVideo]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(oe,{size:18,color:"#3b82f6"})," AI Feedback"]}),e.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--bg-tertiary)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid var(--border-color)"},children:t.feedback||"No feedback provided."})]}),t.aiExplanation&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx($e,{size:18,color:"#8b5cf6"})," AI Explanation (Why this score?)"]}),e.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"rgba(139, 92, 246, 0.05)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid rgba(139, 92, 246, 0.1)"},children:t.aiExplanation})]}),t.analysis&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Qe,{size:18,color:"var(--primary)"})," Detailed Analysis"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[t.analysis.correctness!==void 0&&e.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(59, 130, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(oe,{size:22,color:"#3b82f6"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Correctness"}),e.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#3b82f6"},children:t.analysis.correctness})]})]}),t.analysis.efficiency!==void 0&&e.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(16, 185, 129, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(et,{size:22,color:"#10b981"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Efficiency"}),e.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#10b981"},children:t.analysis.efficiency})]})]}),t.analysis.codeStyle!==void 0&&e.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Re,{size:22,color:"#8b5cf6"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Code Style"}),e.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#8b5cf6"},children:t.analysis.codeStyle})]})]}),t.analysis.bestPractices!==void 0&&e.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(245, 158, 11, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(pt,{size:22,color:"#f59e0b"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Best Practices"}),e.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#f59e0b"},children:t.analysis.bestPractices})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Submitted Code"}),e.jsx("pre",{style:{background:"#020617",padding:"1.5rem",borderRadius:"0.5rem",overflow:"auto",maxHeight:"300px",fontSize:"0.85rem",fontFamily:"monospace",color:"#e2e8f0",border:"1px solid #334155"},children:t.code})]})]})]})})}function ti(){const[t,j]=a.useState([]),[W,T]=a.useState(!0),[v,y]=a.useState(!1),[g,I]=a.useState(!1),[b,x]=a.useState(!1),d=a.useRef(null),[m,o]=a.useState({title:"",type:"machine_learning",difficulty:"medium",description:"",requirements:"",deadline:"",maxAttempts:0}),[M,q]=a.useState(!1),[h,k]=a.useState([]),[w,B]=a.useState([]),[Q,te]=a.useState(null),[i,S]=a.useState(""),[P,G]=a.useState(""),V=p=>{o({title:p.title||"",type:p.type||"machine_learning",difficulty:p.difficulty||"medium",description:p.description||"",requirements:p.requirements||"",deadline:m.deadline,maxAttempts:m.maxAttempts}),I(!1),y(!0)},Z=()=>{A.get(`${O}/tasks?mentorId=${We}`).then(p=>{j(Array.isArray(p.data)?p.data:p.data?.data||[]),T(!1)}).catch(p=>T(!1))};a.useEffect(()=>{Z()},[]);const ne=async()=>{try{const p=await A.get(`${O}/users?role=student`);k(Array.isArray(p.data)?p.data:[])}catch(p){console.error("Error fetching students:",p)}},f=async p=>{te(p),S(""),B([]),await ne();try{const Y=await A.get(`${O}/tests/${p}/allocated-students`);B(Y.data.studentIds||[])}catch(Y){console.error(Y),B([])}q(!0)},J=p=>{B(Y=>Y.includes(p)?Y.filter(u=>u!==p):[...Y,p])},C=async()=>{try{await A.post(`${O}/tests/${Q}/allocate-students`,{studentIds:w}),alert("Students assigned successfully!"),q(!1)}catch(p){alert("Error assigning students: "+(p.response?.data?.error||p.message))}},L=async p=>{p.preventDefault();try{await A.post(`${O}/tasks`,{...m,mentorId:We}),y(!1),o({title:"",type:"machine_learning",difficulty:"medium",description:"",requirements:"",deadline:"",maxAttempts:0}),Z()}catch{alert("Error creating global task")}},K=async p=>{if(window.confirm("Are you sure you want to delete this task?"))try{await A.delete(`${O}/tasks/${p}`),Z()}catch{alert("Error deleting task")}},ke=async p=>{const Y=p.target.files[0];if(Y){p.target.value="",x(!0);try{const R=(await Y.text()).split(`
`).map(ye=>ye.trim()).filter(Boolean);if(R.length<2){alert("CSV must have a header row and at least one data row"),x(!1);return}const ee=R[0].split(",").map(ye=>ye.trim().toLowerCase()),pe=R.slice(1);let xe=0;for(const ye of pe){const Ce=ye.match(/(".*?"|[^,]*)/g)?.map(ie=>ie.replace(/^"|"$/g,"").trim())||[],l={};ee.forEach((ie,r)=>{l[ie]=Ce[r]||""});const U={title:l.title||l.name||"",type:l.type||"machine_learning",difficulty:l.difficulty||"medium",description:l.description||"",requirements:l.requirements||"",deadline:l.deadline||"",mentorId:We};U.title&&(await A.post(`${O}/tasks`,U),xe++)}alert(`Successfully created ${xe} tasks from CSV!`),Z()}catch(u){alert("Error parsing CSV: "+u.message)}x(!1)}};return W?e.jsx("div",{className:"loading-spinner"}):e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"admin-hero-card glass",style:{background:"var(--bg-card)",borderRadius:"1.5rem",padding:"2rem",marginBottom:"2rem",border:"1px solid var(--border-color)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-50px",right:"-50px",width:"200px",height:"200px",background:"radial-gradient(circle, var(--primary-alpha) 0%, transparent 70%)",borderRadius:"50%"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",zIndex:1},children:[e.jsx("div",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"1rem",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px var(--primary-alpha)"},children:e.jsx(Fe,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.75rem",fontWeight:800,color:"var(--text-main)"},children:"Global Tasks Management"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.95rem"},children:"Create ML/AI tasks visible to all mentors and their students"})]})]})}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Te,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search tasks...",value:P,onChange:p=>G(p.target.value),style:{padding:"0.75rem 1rem 0.75rem 2.5rem",borderRadius:"0.75rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.9rem",width:"220px",outline:"none"}})]}),e.jsx("input",{type:"file",ref:d,accept:".csv",style:{display:"none"},onChange:ke}),e.jsxs("button",{onClick:()=>d.current?.click(),className:"btn-create-new premium-btn",disabled:b,style:{padding:"0.85rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",borderRadius:"0.75rem",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.4rem",opacity:b?.6:1},children:[e.jsx(Nt,{size:18})," ",b?"Uploading...":"CSV Upload"]}),e.jsxs("button",{onClick:()=>I(!0),className:"btn-create-new premium-btn",style:{padding:"0.85rem 1.25rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",borderRadius:"0.75rem",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.4rem"},children:[e.jsx(Ve,{size:18})," AI Generate"]}),e.jsxs("button",{onClick:()=>y(!0),className:"btn-create-new premium-btn",style:{padding:"0.85rem 1.5rem",background:"var(--primary)",borderRadius:"0.75rem",fontSize:"0.9rem",fontWeight:600},children:[e.jsx(Ae,{size:18})," Create Manual"]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"var(--primary-alpha)",color:"var(--primary)"},children:e.jsx(Ie,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Total Tasks"}),e.jsx("span",{className:"stat-value",children:t.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"var(--success-alpha)",color:"var(--success)"},children:e.jsx(et,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Live Tasks"}),e.jsx("span",{className:"stat-value",children:t.filter(p=>p.status==="live").length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"var(--secondary-alpha)",color:"var(--secondary)"},children:e.jsx(re,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Total Completions"}),e.jsx("span",{className:"stat-value",children:t.reduce((p,Y)=>p+(Y.completedBy?.length||0),0)})]})]})]}),e.jsx("div",{className:"cards-grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(380px, 1fr))"},children:t.filter(p=>(p.title||"").toLowerCase().includes(P.toLowerCase())||(p.description||"").toLowerCase().includes(P.toLowerCase())).length===0?e.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"4rem",opacity:.5},children:[e.jsx(Fe,{size:64,style:{marginBottom:"1rem",opacity:.3}}),e.jsx("h3",{children:P?"No matching tasks":"No Global Tasks Yet"}),e.jsx("p",{children:P?"Try a different search term.":"Create your first global task to make it visible to all students!"})]}):t.filter(p=>(p.title||"").toLowerCase().includes(P.toLowerCase())||(p.description||"").toLowerCase().includes(P.toLowerCase())).map(p=>e.jsxs("div",{className:"item-card glass",style:{minHeight:"280px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{className:"item-card-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{padding:"10px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2))",borderRadius:"10px"},children:e.jsx(Fe,{size:20,color:"#3b82f6"})}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.65rem",color:"#8b5cf6",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.1em"},children:"GLOBAL TASK"}),e.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:p.title})]})]}),e.jsx("span",{className:`status-badge ${p.status}`,children:p.status})]}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.6",marginBottom:"1rem"},children:p.description}),p.requirements&&e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.05)",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[e.jsx("strong",{style:{color:"#60a5fa"},children:"Requirements:"}),e.jsx("br",{}),p.requirements.split(`
`).slice(0,2).join(`
`),"..."]}),e.jsxs("div",{className:"item-card-footer",style:{paddingTop:"1rem",marginTop:"auto"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("span",{className:`difficulty-badge ${p.difficulty?.toLowerCase()}`,children:p.difficulty}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[p.completedBy?.length||0," completed"]}),p.maxAttempts>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.2)"},children:["Max Attempts: ",p.maxAttempts]})]}),e.jsxs("button",{onClick:()=>f(p.id),className:"btn-create-new",style:{padding:"0.5rem 1rem",fontSize:"0.8rem",background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.4rem",fontWeight:600,transition:"all 0.2s"},onMouseEnter:Y=>Y.currentTarget.style.background="rgba(139, 92, 246, 0.2)",onMouseLeave:Y=>Y.currentTarget.style.background="rgba(139, 92, 246, 0.1)",children:[e.jsx(re,{size:16})," Assign"]}),e.jsx("button",{onClick:()=>K(p.id),style:{background:"rgba(239, 68, 68, 0.1)",border:"none",color:"#ef4444",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.8rem"},children:"Delete"})]})]},p.id))}),M&&e.jsx("div",{className:"modal-overlay",onClick:()=>{q(!1),S("")},children:e.jsxs("div",{className:"modal-content",onClick:p=>p.stopPropagation(),style:{maxWidth:"700px",maxHeight:"85vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid var(--border-color)"},children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(re,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.25rem"},children:"Assign Students"}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-muted)"},children:"Select students for this task"})]})]}),e.jsx("button",{onClick:()=>{q(!1),S("")},className:"modal-close",children:e.jsx(le,{size:20})})]}),e.jsxs("div",{style:{padding:"1rem 1.5rem",background:"var(--bg-secondary)",borderBottom:"1px solid var(--border-color)",display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(Te,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search by name or batch...",value:i,onChange:p=>S(p.target.value),style:{width:"100%",padding:"0.7rem 1rem 0.7rem 2.5rem",borderRadius:"10px",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.9rem"}})]}),e.jsx("button",{onClick:()=>{const p=h.filter(u=>(u.name||u.username||"").toLowerCase().includes(i.toLowerCase())||(u.batch||"").toLowerCase().includes(i.toLowerCase())),Y=p.every(u=>w.includes(u.id));B(Y?u=>u.filter(R=>!p.map(ee=>ee.id).includes(R)):u=>[...new Set([...u,...p.map(R=>R.id)])])},style:{padding:"0.7rem 1.2rem",borderRadius:"10px",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",whiteSpace:"nowrap"},children:h.filter(p=>(p.name||p.username||"").toLowerCase().includes(i.toLowerCase())||(p.batch||"").toLowerCase().includes(i.toLowerCase())).every(p=>w.includes(p.id))?"Deselect All":"Select All"})]}),e.jsx("div",{className:"modal-body",style:{overflowY:"auto",padding:"1.5rem",background:"var(--bg-primary)"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:h.filter(p=>(p.name||p.username||"").toLowerCase().includes(i.toLowerCase())||(p.batch||"").toLowerCase().includes(i.toLowerCase())).length===0?e.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",opacity:.5},children:[e.jsx(re,{size:48,style:{marginBottom:"1rem",opacity:.2}}),e.jsx("p",{children:"No students found matching your search."})]}):h.filter(p=>(p.name||p.username||"").toLowerCase().includes(i.toLowerCase())||(p.batch||"").toLowerCase().includes(i.toLowerCase())).map(p=>e.jsxs("div",{onClick:()=>J(p.id),style:{padding:"1rem",borderRadius:"1rem",background:w.includes(p.id)?"var(--primary-alpha)":"var(--bg-card)",border:`1.5px solid ${w.includes(p.id)?"var(--primary)":"var(--border-color)"}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.2s",boxShadow:w.includes(p.id)?"0 4px 12px var(--primary-alpha)":"none"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:w.includes(p.id)?"var(--primary)":"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.9rem",fontWeight:700,color:"white"},children:(p.name||p.username||"S").charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"var(--text-main)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.name||p.username}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"4px"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:"4px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:p.batch||"No Batch"})})]}),w.includes(p.id)&&e.jsx(oe,{size:18,color:"var(--primary)"})]},p.id))})}),e.jsxs("div",{className:"modal-footer",style:{padding:"1.2rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-secondary)"},children:[e.jsxs("div",{style:{fontSize:"0.95rem",color:"var(--text-main)",fontWeight:500},children:[e.jsx("span",{style:{color:"var(--primary)",fontWeight:800,fontSize:"1.1rem"},children:w.length})," students selected"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{className:"btn-reset",onClick:()=>{q(!1),S("")},children:"Cancel"}),e.jsx("button",{className:"btn-create-new",onClick:C,style:{background:"var(--primary)",padding:"0.7rem 2rem",borderRadius:"10px",boxShadow:"0 4px 15px var(--primary-alpha)"},children:"Confirm Assignment"})]})]})]})}),v&&e.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:e.jsxs("div",{className:"modal-content",onClick:p=>p.stopPropagation(),style:{maxWidth:"700px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Fe,{size:20,color:"white"})}),e.jsx("h2",{children:"Create Global Task"})]}),e.jsx("button",{onClick:()=>y(!1),className:"modal-close",children:e.jsx(le,{size:20})})]}),e.jsx("div",{className:"modal-body premium-form",children:e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Task Title"}),e.jsx("input",{type:"text",placeholder:"e.g., Sentiment Analysis Challenge",value:m.title,onChange:p=>o({...m,title:p.target.value}),required:!0})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Task Type"}),e.jsxs("select",{value:m.type,onChange:p=>o({...m,type:p.target.value}),children:[e.jsx("option",{value:"machine_learning",children:"Machine Learning"}),e.jsx("option",{value:"deep_learning",children:"Deep Learning"}),e.jsx("option",{value:"data_science",children:"Data Science"}),e.jsx("option",{value:"nlp",children:"NLP"}),e.jsx("option",{value:"computer_vision",children:"Computer Vision"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Difficulty"}),e.jsxs("select",{value:m.difficulty,onChange:p=>o({...m,difficulty:p.target.value}),children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{rows:"4",placeholder:"Describe the task in detail...",value:m.description,onChange:p=>o({...m,description:p.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Requirements (one per line)"}),e.jsx("textarea",{rows:"4",placeholder:`1. Data Preprocessing
2. Model Training
3. Evaluation Metrics`,value:m.requirements,onChange:p=>o({...m,requirements:p.target.value})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Deadline (Optional)"}),e.jsx("input",{type:"date",value:m.deadline,onChange:p=>o({...m,deadline:p.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Max Attempts (0 = Unlimited)"}),e.jsx("input",{type:"number",min:"0",placeholder:"0",value:m.maxAttempts,onChange:p=>o({...m,maxAttempts:parseInt(p.target.value)||0})})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn-reset",onClick:()=>y(!1),children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-create-new",style:{background:"linear-gradient(135deg, #3b82f6, #8b5cf6)"},children:[e.jsx(Fe,{size:18})," Create Global Task"]})]})]})})]})}),e.jsx(Ss,{context:"task",isOpen:g,onClose:()=>I(!1),onGenerate:V})]})}function si(){const[t,j]=a.useState([]),[W,T]=a.useState(!0),[v,y]=a.useState(!1),[g,I]=a.useState(!1),[b,x]=a.useState(!1),d=a.useRef(null),[m,o]=a.useState("coding"),[M,q]=a.useState(null),[h,k]=a.useState({title:"",type:"Coding",language:"Python",difficulty:"Medium",description:"",sampleInput:"",expectedOutput:"",deadline:"",status:"live",maxAttempts:0,sqlSchema:"",expectedQueryResult:"",enableProctoring:!1,enableVideoAudio:!1,disableCopyPaste:!1,trackTabSwitches:!1,maxTabSwitches:3,enableFaceDetection:!1,detectMultipleFaces:!1,trackFaceLookaway:!1}),[w,B]=a.useState(!1),[Q,te]=a.useState([]),[i,S]=a.useState([]),[P,G]=a.useState(null),[V,Z]=a.useState(""),[ne,f]=a.useState(""),J=h.type==="SQL"||h.language==="SQL",C=l=>{const U=l.type==="SQL"||l.language==="SQL";k({title:l.title||"",type:l.type||"Coding",language:l.language||"Python",difficulty:l.difficulty||"Medium",description:l.description||"",sampleInput:U?"":l.sampleInput||"",expectedOutput:U?"":l.expectedOutput||"",sqlSchema:U&&(l.sqlSchema||l.schema)||"",expectedQueryResult:U&&(l.expectedQueryResult||l.expectedResult)||"",deadline:h.deadline,status:l.status||"live",maxAttempts:h.maxAttempts,enableProctoring:h.enableProctoring,enableVideoAudio:h.enableVideoAudio,disableCopyPaste:h.disableCopyPaste,trackTabSwitches:h.trackTabSwitches,maxTabSwitches:h.maxTabSwitches,enableFaceDetection:h.enableFaceDetection,detectMultipleFaces:h.detectMultipleFaces,trackFaceLookaway:h.trackFaceLookaway}),I(!1),y(!0)},L=()=>{A.get(`${O}/problems?mentorId=${We}`).then(l=>{j(Array.isArray(l.data)?l.data:l.data?.data||[]),T(!1)}).catch(l=>T(!1))};a.useEffect(()=>{L()},[]);const K=async()=>{try{const l=await A.get(`${O}/users?role=student`);te(Array.isArray(l.data)?l.data:[])}catch(l){console.error("Error fetching students:",l)}},ke=async l=>{G(l),Z(""),S([]),await K();try{const U=await A.get(`${O}/tests/${l}/allocated-students`);S(U.data.studentIds||[])}catch(U){console.error(U),S([])}B(!0)},p=l=>{S(U=>U.includes(l)?U.filter(ie=>ie!==l):[...U,l])},Y=async()=>{try{await A.post(`${O}/problems/${P}/allocate-students`,{studentIds:i}),alert("Students assigned successfully!"),B(!1)}catch(l){alert("Error assigning students: "+(l.response?.data?.error||l.message))}},u=async l=>{l.preventDefault();try{await A.post(`${O}/problems`,{...h,mentorId:We}),y(!1),k({title:"",type:"Coding",language:"Python",difficulty:"Medium",description:"",sampleInput:"",expectedOutput:"",deadline:"",status:"live",maxAttempts:0,sqlSchema:"",expectedQueryResult:"",enableProctoring:!1,enableVideoAudio:!1,disableCopyPaste:!1,trackTabSwitches:!1,maxTabSwitches:3,enableFaceDetection:!1,detectMultipleFaces:!1,trackFaceLookaway:!1}),L()}catch{alert("Error creating global problem")}},R=async l=>{if(window.confirm("Are you sure you want to delete this problem?"))try{await A.delete(`${O}/problems/${l}`),L()}catch{alert("Error deleting problem")}},ee=async(l,U)=>{try{await A.put(`${O}/problems/${l}`,{maxAttempts:U}),L()}catch(ie){console.error("Update max attempts error:",ie.response?.data||ie.message),alert("Error updating max attempts: "+(ie.response?.data?.error||ie.message))}},pe=async l=>{const U=l.target.files[0];if(U){l.target.value="",x(!0);try{const r=(await U.text()).split(`
`).filter(H=>H.trim()).map(H=>H.trim());if(r.length<2){alert("CSV must have a header row and at least one data row"),x(!1);return}const N=H=>{const de=[];let F="",ge=!1;for(let fe=0;fe<H.length;fe++){const Pe=H[fe];Pe==='"'?ge=!ge:Pe===","&&!ge?(de.push(F.trim()),F=""):F+=Pe}return de.push(F.trim()),de},n=N(r[0]).map(H=>H.toLowerCase()),E=r.slice(1);let _=0;for(const H of E){if(!H.trim())continue;const de=N(H),F={};n.forEach((Yt,It)=>{F[Yt]=de[It]||""});const ge=(F.type||"").toUpperCase()==="SQL"||(F.language||"").toUpperCase()==="SQL",fe=()=>F.sample_input||F.sampleinput||F.testinput||F.test_input||F["sample input"]||F["test input"]||"",Pe=()=>F.expected_output||F.expectedoutput||F.expectedresult||F.expected_result||F["expected output"]||F["expected result"]||"",ce=()=>F.sql_schema||F.sqlschema||F.schema||F["sql schema"]||"",Ye=()=>F.expected_query_result||F.expectedqueryresult||F.expected_result||F.expectedresult||F["expected query result"]||"",Je={title:F.title||F.name||"",type:ge?"SQL":F.type||"Coding",language:ge?"SQL":F.language||"Python",difficulty:(F.difficulty||"Medium").charAt(0).toUpperCase()+(F.difficulty||"Medium").slice(1).toLowerCase(),description:F.description||"",sampleInput:fe(),expectedOutput:Pe(),sqlSchema:ge?ce():"",expectedQueryResult:ge?Ye():"",maxAttempts:parseInt(F.max_attempts||F.maxattempts||F.attempts)||0,status:F.status||"live",mentorId:We};!Je.title||!Je.description||(await A.post(`${O}/problems`,Je),_++)}alert(`Successfully created ${_} problems from CSV!`),L()}catch(ie){alert("Error parsing CSV: "+ie.message)}x(!1)}};if(W)return e.jsx("div",{className:"loading-spinner"});const xe=t.filter(l=>l.language!=="SQL"&&l.type!=="SQL"),ye=t.filter(l=>l.language==="SQL"||l.type==="SQL"),Ce=(m==="coding"?xe:ye).filter(l=>(l.title||"").toLowerCase().includes(ne.toLowerCase())||(l.description||"").toLowerCase().includes(ne.toLowerCase())||(l.language||"").toLowerCase().includes(ne.toLowerCase()));return e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"admin-hero-card glass",style:{background:"var(--bg-card)",borderRadius:"1.5rem",padding:"2rem",marginBottom:"2rem",border:"1px solid var(--border-color)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-50px",right:"-50px",width:"200px",height:"200px",background:"radial-gradient(circle, var(--primary-alpha) 0%, transparent 70%)",borderRadius:"50%"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",zIndex:1},children:[e.jsx("div",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"1rem",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px var(--primary-alpha)"},children:e.jsx(Re,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.75rem",fontWeight:800,color:"var(--text-main)"},children:"Global Problems Management"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.95rem"},children:"Create coding challenges visible to all students platform-wide"})]})]})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Te,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search problems...",value:ne,onChange:l=>f(l.target.value),style:{padding:"0.75rem 1rem 0.75rem 2.5rem",borderRadius:"1rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.9rem",width:"250px"}})]}),e.jsx("input",{type:"file",accept:".csv",ref:d,style:{display:"none"},onChange:pe}),e.jsxs("button",{onClick:()=>d.current?.click(),disabled:b,className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Nt,{size:18})," ",b?"Uploading...":"CSV Upload"]}),e.jsxs("button",{onClick:()=>I(!0),className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ve,{size:20})," AI Generate"]}),e.jsxs("button",{onClick:()=>y(!0),className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"var(--primary)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,transition:"all 0.3s ease"},children:[e.jsx(Ae,{size:20})," Create Manually"]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"var(--primary-alpha)",color:"var(--primary)"},children:e.jsx(St,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Total Problems"}),e.jsx("span",{className:"stat-value",children:t.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"var(--success-alpha)",color:"var(--success)"},children:e.jsx(oe,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Active Problems"}),e.jsx("span",{className:"stat-value",children:t.filter(l=>l.status==="live").length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"var(--warning-alpha)",color:"var(--warning)"},children:e.jsx(tt,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Total Solutions"}),e.jsx("span",{className:"stat-value",children:t.reduce((l,U)=>l+(U.completedBy?.length||0),0)})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"12px",width:"fit-content"},children:[e.jsxs("button",{onClick:()=>o("coding"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:m==="coding"?"var(--primary)":"transparent",color:m==="coding"?"white":"var(--text-muted)"},children:[e.jsx(Re,{size:18}),"Coding Problems",e.jsx("span",{style:{background:m==="coding"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:xe.length})]}),e.jsxs("button",{onClick:()=>o("sql"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:m==="sql"?"linear-gradient(135deg, #06b6d4, #0891b2)":"transparent",color:m==="sql"?"white":"var(--text-muted)"},children:[e.jsx(De,{size:18}),"SQL Problems",e.jsx("span",{style:{background:m==="sql"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:ye.length})]})]}),e.jsx("div",{className:"problem-list-grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))"},children:Ce.length===0?e.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"4rem",opacity:.5},children:[e.jsx(Re,{size:64,style:{marginBottom:"1rem",opacity:.3}}),e.jsxs("h3",{children:["No ",m==="sql"?"SQL":"Coding"," Problems Yet"]}),e.jsxs("p",{children:["Create your first ",m==="sql"?"SQL":"coding"," problem!"]})]}):Ce.map(l=>e.jsxs("div",{className:"problem-card card glass",style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:"0.65rem",padding:"3px 8px",borderRadius:"4px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(6, 182, 212, 0.2))",color:"#10b981",fontWeight:700},children:"GLOBAL"}),e.jsx("span",{className:"problem-badge",children:l.type?.toUpperCase()}),e.jsx("span",{className:`status-badge ${l.status||"live"}`,style:{fontSize:"0.65rem"},children:l.status||"Active"}),l.proctoring?.enabled&&e.jsxs("span",{style:{fontSize:"0.6rem",padding:"3px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",fontWeight:700,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ze,{size:10})," PROCTORED"]})]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",background:"rgba(59, 130, 246, 0.1)",padding:"2px 8px",borderRadius:"4px"},children:l.language})]}),e.jsx("h3",{style:{margin:"0.75rem 0",fontSize:"1.2rem"},children:l.title}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",marginBottom:"1rem"},children:l.description}),l.deadline&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.75rem",color:"#f87171",marginBottom:"1rem",background:"rgba(248, 113, 113, 0.05)",padding:"4px 8px",borderRadius:"4px",width:"fit-content"},children:[e.jsx(Se,{size:12})," Deadline: ",new Date(l.deadline).toLocaleDateString()]}),(l.maxAttempts||l.max_attempts)>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.75rem",color:"#8b5cf6",marginBottom:"1rem",background:"rgba(139, 92, 246, 0.05)",padding:"4px 8px",borderRadius:"4px",width:"fit-content"},children:["ðŸ”„ Max Attempts: ",l.maxAttempts||l.max_attempts,e.jsx("button",{onClick:()=>{const U=prompt("Set max attempts (0 = unlimited):",l.maxAttempts||l.max_attempts||0);U!==null&&ee(l.id,parseInt(U)||0)},style:{background:"none",border:"none",color:"#8b5cf6",cursor:"pointer",padding:"0 2px",fontSize:"0.7rem"},title:"Edit max attempts",children:"âœï¸"})]}),!(l.maxAttempts||l.max_attempts)&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"1rem",background:"rgba(100, 116, 139, 0.05)",padding:"4px 8px",borderRadius:"4px",width:"fit-content"},children:["ðŸ”„ Attempts: Unlimited",e.jsx("button",{onClick:()=>{const U=prompt("Set max attempts (0 = unlimited):","0");U!==null&&parseInt(U)>0&&ee(l.id,parseInt(U))},style:{background:"none",border:"none",color:"#8b5cf6",cursor:"pointer",padding:"0 2px",fontSize:"0.7rem"},title:"Set attempt limit",children:"âœï¸"})]}),e.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"1rem",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:l.difficulty==="Easy"?"#10b981":l.difficulty==="Medium"?"#f59e0b":"#ef4444",fontWeight:700},children:l.difficulty}),e.jsxs("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:["â€¢ ",l.completedBy?.length||0," solved"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>q(l),disabled:l.language==="SQL"||l.type==="SQL",style:{background:l.language==="SQL"||l.type==="SQL"?"rgba(100, 116, 139, 0.1)":"rgba(16, 185, 129, 0.1)",border:"none",color:l.language==="SQL"||l.type==="SQL"?"#64748b":"#10b981",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",cursor:l.language==="SQL"||l.type==="SQL"?"not-allowed":"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px",opacity:l.language==="SQL"||l.type==="SQL"?.5:1},title:l.language==="SQL"||l.type==="SQL"?"Test cases not available for SQL problems":"Manage Test Cases",children:[e.jsx(it,{size:14})," Tests"]}),e.jsxs("button",{onClick:()=>ke(l.id),className:"btn-create-new",style:{padding:"0.5rem 1rem",fontSize:"0.8rem",background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.4rem",fontWeight:600,transition:"all 0.2s"},onMouseEnter:U=>U.currentTarget.style.background="rgba(139, 92, 246, 0.2)",onMouseLeave:U=>U.currentTarget.style.background="rgba(139, 92, 246, 0.1)",children:[e.jsx(re,{size:16})," Assign"]}),e.jsx("button",{onClick:()=>R(l.id),style:{background:"rgba(239, 68, 68, 0.1)",border:"none",color:"#ef4444",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.8rem"},children:"Delete"})]})]})]},l.id))}),w&&e.jsx("div",{className:"modal-overlay",onClick:()=>{B(!1),Z("")},children:e.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),style:{maxWidth:"700px",maxHeight:"85vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid var(--border-color)"},children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(re,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.25rem"},children:"Assign Students"}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-muted)"},children:"Select students for this problem"})]})]}),e.jsx("button",{onClick:()=>{B(!1),Z("")},className:"modal-close",children:e.jsx(le,{size:20})})]}),e.jsxs("div",{style:{padding:"1rem 1.5rem",background:"var(--bg-secondary)",borderBottom:"1px solid var(--border-color)",display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(Te,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search by name or batch...",value:V,onChange:l=>Z(l.target.value),style:{width:"100%",padding:"0.7rem 1rem 0.7rem 2.5rem",borderRadius:"10px",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.9rem"}})]}),e.jsx("button",{onClick:()=>{const l=Q.filter(ie=>(ie.name||ie.username||"").toLowerCase().includes(V.toLowerCase())||(ie.batch||"").toLowerCase().includes(V.toLowerCase())),U=l.every(ie=>i.includes(ie.id));S(U?ie=>ie.filter(r=>!l.map(N=>N.id).includes(r)):ie=>[...new Set([...ie,...l.map(r=>r.id)])])},style:{padding:"0.7rem 1.2rem",borderRadius:"10px",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",whiteSpace:"nowrap"},children:Q.filter(l=>(l.name||l.username||"").toLowerCase().includes(V.toLowerCase())||(l.batch||"").toLowerCase().includes(V.toLowerCase())).every(l=>i.includes(l.id))?"Deselect All":"Select All"})]}),e.jsx("div",{className:"modal-body",style:{overflowY:"auto",padding:"1.5rem",background:"var(--bg-primary)"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:Q.filter(l=>(l.name||l.username||"").toLowerCase().includes(V.toLowerCase())||(l.batch||"").toLowerCase().includes(V.toLowerCase())).length===0?e.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",opacity:.5},children:[e.jsx(re,{size:48,style:{marginBottom:"1rem",opacity:.2}}),e.jsx("p",{children:"No students found matching your search."})]}):Q.filter(l=>(l.name||l.username||"").toLowerCase().includes(V.toLowerCase())||(l.batch||"").toLowerCase().includes(V.toLowerCase())).map(l=>e.jsxs("div",{onClick:()=>p(l.id),style:{padding:"1rem",borderRadius:"1rem",background:i.includes(l.id)?"var(--primary-alpha)":"var(--bg-card)",border:`1.5px solid ${i.includes(l.id)?"var(--primary)":"var(--border-color)"}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.2s",boxShadow:i.includes(l.id)?"0 4px 12px var(--primary-alpha)":"none"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:i.includes(l.id)?"var(--primary)":"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.9rem",fontWeight:700,color:"white"},children:(l.name||l.username||"S").charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"var(--text-main)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l.name||l.username}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"4px"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:"4px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:l.batch||"No Batch"})})]}),i.includes(l.id)&&e.jsx(oe,{size:18,color:"var(--primary)"})]},l.id))})}),e.jsxs("div",{className:"modal-footer",style:{padding:"1.2rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-secondary)"},children:[e.jsxs("div",{style:{fontSize:"0.95rem",color:"var(--text-main)",fontWeight:500},children:[e.jsx("span",{style:{color:"var(--primary)",fontWeight:800,fontSize:"1.1rem"},children:i.length})," students selected"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{className:"btn-reset",onClick:()=>{B(!1),Z("")},children:"Cancel"}),e.jsx("button",{className:"btn-create-new",onClick:Y,style:{background:"var(--primary)",padding:"0.7rem 2rem",borderRadius:"10px",boxShadow:"0 4px 15px var(--primary-alpha)"},children:"Confirm Assignment"})]})]})]})}),v&&e.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:e.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),style:{maxWidth:"750px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #10b981, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Re,{size:20,color:"white"})}),e.jsx("h2",{children:"Create Global Coding Problem"})]}),e.jsx("button",{onClick:()=>y(!1),className:"modal-close",children:e.jsx(le,{size:20})})]}),e.jsx("div",{className:"modal-body premium-form",children:e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Problem Title"}),e.jsx("input",{type:"text",placeholder:"e.g., Two Sum Problem",value:h.title,onChange:l=>k({...h,title:l.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Problem Type"}),e.jsxs("select",{value:h.type,onChange:l=>{const U=l.target.value;k({...h,type:U,language:U==="SQL"?"SQL":h.language==="SQL"?"Python":h.language})},children:[e.jsx("option",{value:"Coding",children:"Coding"}),e.jsx("option",{value:"SQL",children:"SQL"}),e.jsx("option",{value:"Algorithm",children:"Algorithm"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Language"}),e.jsxs("select",{value:h.language,onChange:l=>{const U=l.target.value;k({...h,language:U,type:U==="SQL"?"SQL":h.type==="SQL"?"Coding":h.type})},children:[e.jsx("option",{value:"Python",children:"Python"}),e.jsx("option",{value:"JavaScript",children:"JavaScript"}),e.jsx("option",{value:"Java",children:"Java"}),e.jsx("option",{value:"C++",children:"C++"}),e.jsx("option",{value:"SQL",children:"SQL"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Difficulty"}),e.jsxs("select",{value:h.difficulty,onChange:l=>k({...h,difficulty:l.target.value}),children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:h.status,onChange:l=>k({...h,status:l.target.value}),children:[e.jsx("option",{value:"live",children:"Live"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Problem Description"}),e.jsx("textarea",{rows:"5",placeholder:"Describe the problem in detail...",value:h.description,onChange:l=>k({...h,description:l.target.value}),required:!0})]}),J?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Re,{size:14,color:"#06b6d4"})," Database Schema (CREATE TABLE statements)"]}),e.jsx("textarea",{rows:"6",placeholder:`CREATE TABLE employees (
  id INT PRIMARY KEY,
  name VARCHAR(100),
  department VARCHAR(50),
  salary DECIMAL(10,2)
);

INSERT INTO employees VALUES (1, 'John', 'IT', 50000);`,value:h.sqlSchema,onChange:l=>k({...h,sqlSchema:l.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}}),e.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Include CREATE TABLE and INSERT statements to set up the test database"})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(oe,{size:14,color:"#10b981"})," Expected Query Result"]}),e.jsx("textarea",{rows:"4",placeholder:`id | name | salary
1  | John | 50000
2  | Jane | 60000`,value:h.expectedQueryResult,onChange:l=>k({...h,expectedQueryResult:l.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}}),e.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"The expected output when the correct SQL query is executed"})]})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Sample Input"}),e.jsx("input",{type:"text",placeholder:"e.g., [2, 7, 11, 15], target = 9",value:h.sampleInput,onChange:l=>k({...h,sampleInput:l.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Expected Output"}),e.jsx("input",{type:"text",placeholder:"e.g., [0, 1]",value:h.expectedOutput,onChange:l=>k({...h,expectedOutput:l.target.value})})]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Deadline (Optional)"}),e.jsx("input",{type:"date",value:h.deadline,onChange:l=>k({...h,deadline:l.target.value})})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Max Attempts (0 = Unlimited)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:h.maxAttempts,onChange:l=>k({...h,maxAttempts:parseInt(l.target.value)||0}),placeholder:"0 = unlimited attempts"}),e.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem",marginTop:"0.25rem",display:"block"},children:"Set how many times a student can submit. 0 means unlimited."})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.25rem",background:"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:"1px solid rgba(239, 68, 68, 0.15)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsx(ve,{size:20,color:"#ef4444"}),e.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:600,color:"#ef4444"},children:"Proctoring Settings"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",padding:"0.75rem",background:h.enableProctoring?"rgba(239, 68, 68, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[e.jsx("input",{type:"checkbox",checked:h.enableProctoring,onChange:l=>k({...h,enableProctoring:l.target.checked}),style:{width:"18px",height:"18px",accentColor:"#ef4444"}}),e.jsx("span",{style:{fontSize:"0.9rem"},children:"Enable Proctoring"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:h.enableProctoring?"pointer":"not-allowed",opacity:h.enableProctoring?1:.5,padding:"0.75rem",background:h.enableVideoAudio?"rgba(139, 92, 246, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[e.jsx("input",{type:"checkbox",checked:h.enableVideoAudio,onChange:l=>k({...h,enableVideoAudio:l.target.checked}),disabled:!h.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#8b5cf6"}}),e.jsx("span",{style:{fontSize:"0.9rem"},children:"ðŸ“¹ Video/Audio Monitoring"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:h.enableProctoring?"pointer":"not-allowed",opacity:h.enableProctoring?1:.5,padding:"0.75rem",background:h.disableCopyPaste?"rgba(245, 158, 11, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[e.jsx("input",{type:"checkbox",checked:h.disableCopyPaste,onChange:l=>k({...h,disableCopyPaste:l.target.checked}),disabled:!h.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#f59e0b"}}),e.jsx("span",{style:{fontSize:"0.9rem"},children:"ðŸ“‹ Disable Copy/Paste"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:h.enableProctoring?"pointer":"not-allowed",opacity:h.enableProctoring?1:.5,padding:"0.75rem",background:h.trackTabSwitches?"rgba(16, 185, 129, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[e.jsx("input",{type:"checkbox",checked:h.trackTabSwitches,onChange:l=>k({...h,trackTabSwitches:l.target.checked}),disabled:!h.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#10b981"}}),e.jsx("span",{style:{fontSize:"0.9rem"},children:"ðŸ”’ Track Tab Switches"})]}),e.jsx("hr",{style:{margin:"0.5rem 0",borderColor:"var(--border-color)",opacity:.3}}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:h.enableProctoring?"pointer":"not-allowed",opacity:h.enableProctoring?1:.5,padding:"0.75rem",background:h.enableFaceDetection?"rgba(236, 72, 153, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[e.jsx("input",{type:"checkbox",checked:h.enableFaceDetection,onChange:l=>k({...h,enableFaceDetection:l.target.checked}),disabled:!h.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#ec4899"}}),e.jsx("span",{style:{fontSize:"0.9rem"},children:"ðŸ‘ï¸ Enable Face Detection"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:h.enableProctoring?"pointer":"not-allowed",opacity:h.enableProctoring?1:.5,padding:"0.75rem",background:h.detectMultipleFaces?"rgba(239, 68, 68, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[e.jsx("input",{type:"checkbox",checked:h.detectMultipleFaces,onChange:l=>k({...h,detectMultipleFaces:l.target.checked}),disabled:!h.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#ef4444"}}),e.jsx("span",{style:{fontSize:"0.9rem"},children:"ðŸ‘¥ Detect Multiple Faces (Cheating)"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:h.enableProctoring?"pointer":"not-allowed",opacity:h.enableProctoring?1:.5,padding:"0.75rem",background:h.trackFaceLookaway?"rgba(59, 130, 246, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[e.jsx("input",{type:"checkbox",checked:h.trackFaceLookaway,onChange:l=>k({...h,trackFaceLookaway:l.target.checked}),disabled:!h.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#3b82f6"}}),e.jsx("span",{style:{fontSize:"0.9rem"},children:"ðŸ‘€ Track Face Lookaway"})]})]}),h.enableProctoring&&h.trackTabSwitches&&e.jsxs("div",{style:{marginTop:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("label",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:"Max Tab Switches:"}),e.jsx("input",{type:"number",min:"1",max:"10",value:h.maxTabSwitches,onChange:l=>k({...h,maxTabSwitches:parseInt(l.target.value)||3}),style:{width:"80px",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid var(--border-color)",background:"var(--bg-dark)",color:"var(--text-main)"}})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn-reset",onClick:()=>y(!1),children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-create-new",style:{background:"linear-gradient(135deg, #10b981, #06b6d4)"},children:[e.jsx(Ae,{size:18})," Create Global Problem"]})]})]})})]})}),e.jsx(Ss,{context:"problem",isOpen:g,onClose:()=>I(!1),onGenerate:C}),M&&e.jsx(nr,{problemId:M.id,problemTitle:M.title,onClose:()=>q(null)})]})}const ht=[{id:"aptitude",label:"Aptitude",icon:"ðŸ“Š"},{id:"verbal",label:"Verbal",icon:"ðŸ“"},{id:"logical",label:"Logical",icon:"ðŸ§©"},{id:"coding",label:"Coding",icon:"ðŸ’»"},{id:"sql",label:"SQL",icon:"ðŸ—„ï¸"}];function ri(){const[t,j]=a.useState([]),[W,T]=a.useState(!0),[v,y]=a.useState(!1),[g,I]=a.useState(1),[b,x]=a.useState(null),[d,m]=a.useState("aptitude"),[o,M]=a.useState(null),[q,h]=a.useState(!1),[k,w]=a.useState([]),[B,Q]=a.useState([]),[te,i]=a.useState(null),[S,P]=a.useState(""),[G,V]=a.useState(""),[Z,ne]=a.useState(null),[f,J]=a.useState({title:"",type:"comprehensive",difficulty:"Medium",duration:180,passingScore:60,description:"",startTime:"",deadline:"",maxAttempts:1,maxTabSwitches:3,status:"live",sectionConfig:{sections:[{id:"aptitude",enabled:!0,order:1,questionsCount:20,timeMinutes:30},{id:"verbal",enabled:!0,order:2,questionsCount:25,timeMinutes:25},{id:"logical",enabled:!0,order:3,questionsCount:20,timeMinutes:20},{id:"coding",enabled:!0,order:4,questionsCount:2,timeMinutes:50},{id:"sql",enabled:!0,order:5,questionsCount:1,timeMinutes:25}],totalDurationMinutes:180,sectionTimeMode:"fixed"}}),[C,L]=a.useState({aptitude:[],verbal:[],logical:[],coding:[],sql:[]}),[K,ke]=a.useState({question:"",options:["","","",""],correctAnswer:0,category:"general",explanation:""}),[p,Y]=a.useState({question:"",starterCode:"",language:"Python",testCases:[{input:"",expected_output:""}]}),[u,R]=a.useState({question:"",schema:"",expectedOutput:""}),[ee,pe]=a.useState([]),[xe,ye]=a.useState({topic:"",difficulty:"Medium",count:5}),[Ce,l]=a.useState([]),[U,ie]=a.useState(!1),[r,N]=a.useState({enabled:!0,trackTabSwitches:!0,maxTabSwitches:3,enableVideoAudio:!0,disableCopyPaste:!0,detectCameraBlocking:!0,detectPhoneUsage:!0,enforceFullscreen:!0,autoSubmitOnViolation:!1}),[n,E]=a.useState({topic:"",difficulty:"Medium",language:"Python"}),[_,H]=a.useState({topic:"",difficulty:"Medium"}),[de,F]=a.useState([]),[ge,fe]=a.useState([]),[Pe,ce]=a.useState(!1),[Ye,Je]=a.useState(!1),[Yt,It]=a.useState(!0),[Jt,Rt]=a.useState(!1),Kt=a.useRef(null),zs=async s=>{const c=s.target.files[0];if(c){Rt(!0);try{const $=(await c.text()).split(`
`).map(he=>he.trim()).filter(Boolean);if($.length<2){alert("CSV must have header + at least one row");return}const X=$[0].split(",").map(he=>he.trim().toLowerCase().replace(/['"]/g,"")),D=[];for(let he=1;he<$.length;he++){const st=$[he].match(/(".*?"|[^,]+)/g)?.map(Bt=>Bt.trim().replace(/^"|"$/g,""))||[],be={};X.forEach((Bt,Us)=>be[Bt]=st[Us]||"");const ss=(be.section||"aptitude").toLowerCase();["aptitude","verbal","logical"].includes(ss)&&D.push({section:ss,question:be.question||"",options:[be.option1||be.option_1||"",be.option2||be.option_2||"",be.option3||be.option_3||"",be.option4||be.option_4||""],correctAnswer:parseInt(be.correctanswer||be.correct_answer||be.answer||"0"),category:be.category||"general",explanation:be.explanation||""})}if(D.length===0){alert("No valid MCQ rows found. CSV needs: section,question,option1,option2,option3,option4,correctAnswer"),Rt(!1);return}const se={title:c.name.replace(".csv","")+" - CSV Import",type:"comprehensive",difficulty:"Medium",duration:180,passingScore:60,status:"draft",createdBy:We,sectionConfig:{sections:[{id:"aptitude",enabled:!0,order:1,questionsCount:D.filter(he=>he.section==="aptitude").length,timeMinutes:30},{id:"verbal",enabled:!0,order:2,questionsCount:D.filter(he=>he.section==="verbal").length,timeMinutes:25},{id:"logical",enabled:!0,order:3,questionsCount:D.filter(he=>he.section==="logical").length,timeMinutes:20},{id:"coding",enabled:!1,order:4,questionsCount:0,timeMinutes:0},{id:"sql",enabled:!1,order:5,questionsCount:0,timeMinutes:0}],totalDurationMinutes:75,sectionTimeMode:"fixed"}},we=(await A.post(`${O}/global-tests`,se)).data.id;for(const he of["aptitude","verbal","logical"]){const st=D.filter(be=>be.section===he);st.length!==0&&await A.post(`${O}/global-tests/${we}/questions`,{section:he,questions:st})}alert(`Created test with ${D.length} questions from CSV!`),xt()}catch(z){alert("CSV upload failed: "+(z.response?.data?.error||z.message))}finally{Rt(!1),s.target.value=""}}},xt=async()=>{try{const s=await A.get(`${O}/global-tests`);j(Array.isArray(s.data)?s.data:[])}catch(s){s.response?.status===503?j([]):console.error(s)}finally{T(!1)}},As=async()=>{try{const s=await A.get(`${O}/global-test-submissions`);pe(Array.isArray(s.data)?s.data:[])}catch{pe([])}},Xt=async()=>{try{const s=await A.get(`${O}/users?role=student`);w(s.data||[])}catch(s){console.error("Error fetching students:",s)}},Ts=async s=>{i(s),P(""),Q([]),await Xt();try{const c=await A.get(`${O}/tests/${s}/allocated-students`);Q(c.data.studentIds||[])}catch{Q([])}h(!0)},Ns=async()=>{if(te)try{await A.post(`${O}/tests/${te}/allocate-students`,{studentIds:B}),alert(`âœ… Test allocated to ${B.length} student(s)`),h(!1),Q([]),i(null)}catch(s){alert("âŒ Error allocating test: "+s.response?.data?.error||s.message)}},Is=s=>{Q(c=>c.includes(s)?c.filter(z=>z!==s):[...c,s])};a.useEffect(()=>{xt(),As(),Xt()},[]);const Lt=(s,c,z)=>{J($=>({...$,sectionConfig:{...$.sectionConfig,sections:$.sectionConfig.sections.map(X=>X.id===s?{...X,[c]:z}:X)}}))},Rs=(s,c)=>{Lt(s,"enabled",c)},Zt=(s,c)=>{L(z=>({...z,[s]:(z[s]||[]).filter(($,X)=>X!==c)}))},Ls=(s,c)=>s==="coding"?c.map(z=>({questionType:"coding",question:z.question,starterCode:z.starterCode||"",testCases:z.testCases||{language:"Python",cases:[]},points:z.points??10})):s==="sql"?c.map(z=>({questionType:"sql",question:z.question,starterCode:z.starterCode||"",testCases:z.testCases||{expectedOutput:""},points:z.points??10})):c.map(z=>({questionType:"mcq",question:z.question,options:z.options||[z.option_1,z.option_2,z.option_3,z.option_4].filter(Boolean),correctAnswer:z.correctAnswer??z.options?.[z.correctAnswer],category:z.category||"general",explanation:z.explanation||""})),_s=async()=>{if(!n.topic.trim()){alert("Please enter a topic for the coding problem");return}ce(!0);try{const s=await A.post(`${O}/ai/generate-coding-problem`,{topic:n.topic,difficulty:n.difficulty,language:n.language});s.data.problem&&F([s.data.problem])}catch(s){console.error("AI Generation error:",s),F([{question:`Write a ${n.language} program to solve: ${n.topic}`,starterCode:n.language==="Python"?`# Write your solution here
def solution():
    pass

# Test your code
solution()`:"// Write your solution here",testCases:[{input:"",expected_output:""}],language:n.language,difficulty:n.difficulty}])}finally{ce(!1)}},Bs=()=>{if(de.length===0)return;const s=de.map(c=>({questionType:"coding",question:c.question,starterCode:c.starterCode||"",solutionCode:c.solutionCode||"",language:c.language||n.language,testCases:{language:c.language||n.language,cases:Array.isArray(c.testCases)?c.testCases:c.testCases?.cases||[]},hints:c.hints||[],explanation:c.explanation||"",points:10}));L(c=>({...c,coding:[...c.coding||[],...s]})),F([]),E({topic:"",difficulty:"Medium",language:"Python"})},Ws=async()=>{if(!_.topic.trim()){alert("Please enter a topic for the SQL problem");return}Je(!0);try{const s=await A.post(`${O}/ai/generate-sql-problem`,{topic:_.topic,difficulty:_.difficulty});s.data.problem&&fe([s.data.problem])}catch(s){console.error("AI Generation error:",s),fe([{question:`Write a SQL query to: ${_.topic}`,schema:`-- Sample schema
CREATE TABLE employees (
    id INTEGER PRIMARY KEY,
    name TEXT,
    department TEXT,
    salary INTEGER
);

INSERT INTO employees VALUES (1, 'John', 'Engineering', 50000);`,expectedOutput:`id|name|department|salary
1|John|Engineering|50000`,difficulty:_.difficulty}])}finally{Je(!1)}},Ps=()=>{if(ge.length===0)return;const s=ge.map(c=>({questionType:"sql",question:c.question,starterCode:`${c.schema||""}

-- Your query here:`,testCases:{expectedOutput:c.expectedOutput||""},solutionQuery:c.solutionQuery||"",hints:c.hints||[],explanation:c.explanation||"",points:10}));L(c=>({...c,sql:[...c.sql||[],...s]})),fe([]),H({topic:"",difficulty:"Medium"})},Ms=async()=>{if(!f.title.trim()){alert("Enter test title");return}if(Object.values(C).reduce((c,z)=>c+z.length,0)===0){alert("Add questions in sections");return}try{let c=null;if(f.startTime){const D=new Date(f.startTime);isNaN(D.getTime())||(c=D.toISOString())}let z=null;if(f.deadline){const D=new Date(f.deadline);isNaN(D.getTime())||(z=D.toISOString())}const $={...f,startTime:c,deadline:z,createdBy:b?void 0:We,proctoring:r.enabled?{enabled:!0,trackTabSwitches:r.trackTabSwitches,maxTabSwitches:r.maxTabSwitches,enableVideoAudio:r.enableVideoAudio,disableCopyPaste:r.disableCopyPaste,detectCameraBlocking:r.detectCameraBlocking,detectPhoneUsage:r.detectPhoneUsage,enforceFullscreen:r.enforceFullscreen,autoSubmitOnViolation:r.autoSubmitOnViolation}:{enabled:!1},maxTabSwitches:r.enabled&&r.trackTabSwitches?r.maxTabSwitches:0};let X=b;b?(await A.put(`${O}/global-tests/${b}`,{...$,createdBy:void 0}),await A.delete(`${O}/global-tests/${b}/questions`)):X=(await A.post(`${O}/global-tests`,$)).data.id;for(const D of ht){const se=C[D.id]||[];if(se.length===0)continue;const Be=Ls(D.id,se);await A.post(`${O}/global-tests/${X}/questions`,{section:D.id,questions:Be})}y(!1),I(1),x(null),L({aptitude:[],verbal:[],logical:[],coding:[],sql:[]}),J({title:"",type:"comprehensive",difficulty:"Medium",duration:180,passingScore:60,description:"",startTime:"",deadline:"",maxAttempts:1,maxTabSwitches:3,status:"live",sectionConfig:f.sectionConfig}),xt()}catch(c){alert(c.response?.data?.error||"Failed to save test")}},Es=async s=>{if(window.confirm("Delete this global test? This cannot be undone."))try{await A.delete(`${O}/global-tests/${s}`),xt()}catch(c){alert(c.response?.data?.error||"Delete failed")}},es=async(s,c)=>{try{await A.put(`${O}/global-tests/${s}`,{status:c}),xt()}catch(z){alert(z.response?.data?.error||"Status update failed")}},$s=async s=>{try{const[c,z]=await Promise.all([A.get(`${O}/global-tests/${s.id}`),A.get(`${O}/global-tests/${s.id}/questions`)]),$=c.data,X=Array.isArray(z.data)?z.data:[],D={aptitude:[],verbal:[],logical:[],coding:[],sql:[]};X.forEach(se=>{const Be=se.options||[];let we=se.correctAnswer;if(se.questionType!=="coding"&&se.questionType!=="sql")if(typeof we=="number"&&we>=0&&we<4)we=we;else if(typeof we=="string"&&Be.length){const st=Be.indexOf(we);we=st>=0?st:/^[0-3]$/.test(we)?parseInt(we,10):0}else we=0;const he={id:se.id,question:se.question,options:Be.length?Be:["","","",""],correctAnswer:we,category:se.category,explanation:se.explanation,questionType:se.questionType||"mcq",starterCode:se.starterCode,solutionCode:se.solutionCode,testCases:se.testCases,points:se.points};D[se.section]&&D[se.section].push(he)}),It(($.maxTabSwitches??0)>0),J({title:$.title,type:$.type||"comprehensive",difficulty:$.difficulty||"Medium",duration:$.duration??180,passingScore:$.passingScore??60,description:$.description||"",startTime:$.startTime?$.startTime.slice(0,16):"",deadline:$.deadline?$.deadline.slice(0,16):"",maxAttempts:$.maxAttempts??1,maxTabSwitches:$.maxTabSwitches??3,status:$.status||"draft",sectionConfig:$.sectionConfig||f.sectionConfig}),L(D),x($.id),I(1),y(!0)}catch(c){alert(c.response?.data?.error||"Failed to load test")}},Ds=async()=>{ie(!0);try{const s=await A.post(`${O}/ai/generate-aptitude`,xe);s.data.questions&&l(s.data.questions)}catch{alert("Error generating questions")}finally{ie(!1)}},qs=()=>{Ce.length!==0&&(L(s=>({...s,[d]:[...s[d]||[],...Ce.map(c=>({question:c.question,options:c.options||["","","",""],correctAnswer:c.correctAnswer??0,category:c.category||"general",explanation:c.explanation||""}))]})),l([]))},_t=(s,c,z,$)=>{L(X=>{const D=[...X[s]||[]];return D[c]?(z==="options"?D[c]={...D[c],options:$}:z==="correctAnswer"?D[c]={...D[c],correctAnswer:$}:D[c]={...D[c],[z]:$},{...X,[s]:D}):X})},Os=()=>{L(s=>({...s,[d]:[...s[d]||[],{question:"",options:["","","",""],correctAnswer:0,category:"general",explanation:""}]}))},Fs=()=>{if(!p.question.trim()){alert("Enter problem description");return}const s=p.testCases.filter(c=>c.input!==void 0||c.expected_output);if(s.length===0||!s.some(c=>(c.expected_output||"").trim())){alert("Add at least one test case with expected output");return}L(c=>({...c,coding:[...c.coding||[],{questionType:"coding",question:p.question,starterCode:p.starterCode,testCases:{language:p.language,cases:p.testCases.map(z=>({input:z.input||"",expected_output:z.expected_output||""}))},points:10}]})),Y({question:"",starterCode:"",language:"Python",testCases:[{input:"",expected_output:""}]})},Qs=()=>{if(!u.question.trim()){alert("Enter question text");return}if(!u.schema.trim()){alert("Enter database schema");return}if(!u.expectedOutput.trim()){alert("Enter expected query result");return}L(s=>({...s,sql:[...s.sql||[],{questionType:"sql",question:u.question,starterCode:u.schema,testCases:{expectedOutput:u.expectedOutput},points:10}]})),R({question:"",schema:"",expectedOutput:""})};if(W)return e.jsx("div",{className:"loading-spinner"});const ts=t.filter(s=>(s.title||"").toLowerCase().includes(G.toLowerCase())||(s.description||"").toLowerCase().includes(G.toLowerCase())||(s.type||"").toLowerCase().includes(G.toLowerCase()));return e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"admin-hero-card glass",style:{background:"var(--bg-card)",borderRadius:"1.5rem",padding:"2rem",marginBottom:"2rem",border:"1px solid var(--border-color)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-50px",right:"-50px",width:"200px",height:"200px",background:"radial-gradient(circle, var(--primary-alpha) 0%, transparent 70%)",borderRadius:"50%"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",zIndex:1},children:[e.jsx("div",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"1rem",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px var(--primary-alpha)"},children:e.jsx(it,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.75rem",fontWeight:800,color:"var(--text-main)"},children:"Global Complete Tests"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.95rem"},children:"Aptitude, Verbal, Logical, Coding, SQL â€“ create and manage"})]})]})}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsx("input",{type:"file",accept:".csv",ref:Kt,style:{display:"none"},onChange:zs}),e.jsxs("button",{onClick:()=>Kt.current?.click(),disabled:Jt,className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Nt,{size:18})," ",Jt?"Uploading...":"CSV Upload"]}),e.jsxs("button",{type:"button",onClick:()=>{y(!0),I(1),x(null),L({aptitude:[],verbal:[],logical:[],coding:[],sql:[]}),l([]),ye({topic:"",difficulty:"Medium",count:5})},className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"var(--primary)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ae,{size:20})," Create Global Test"]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"var(--primary-alpha)",color:"var(--primary)"},children:e.jsx(it,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Total Tests"}),e.jsx("span",{className:"stat-value",children:t.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"var(--success-alpha)",color:"var(--success)"},children:e.jsx(oe,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Live"}),e.jsx("span",{className:"stat-value",children:t.filter(s=>s.status==="live").length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"var(--warning-alpha)",color:"var(--warning)"},children:e.jsx(Ie,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Submissions"}),e.jsx("span",{className:"stat-value",children:ee.length})]})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"1.5rem"},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Te,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search tests...",value:G,onChange:s=>V(s.target.value),style:{padding:"0.75rem 1rem 0.75rem 2.5rem",borderRadius:"1rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.9rem",width:"300px"}})]})}),ts.length===0&&!W?e.jsxs("div",{style:{textAlign:"center",padding:"4rem",opacity:.7},children:[e.jsx(it,{size:64,style:{marginBottom:"1rem",opacity:.3}}),e.jsx("h3",{children:"No global tests yet"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"Create one to add Aptitude, Verbal, Logical, Coding, and SQL sections."}),e.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:["If you see 503, run: ",e.jsx("code",{children:"node migrate_global_tests.js"})]})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:ts.map(s=>{const c=Z===s.id,$=(s.sectionConfig?.sections||[]).filter(D=>D.enabled),X=$.map(D=>D.id.charAt(0).toUpperCase()+D.id.slice(1)).join(", ");return e.jsxs("div",{style:{background:"var(--bg-secondary)",border:`1px solid ${c?"rgba(99, 102, 241, 0.4)":"var(--border-color)"}`,borderRadius:"16px",overflow:"hidden",transition:"all 0.3s ease",boxShadow:c?"0 8px 32px rgba(99, 102, 241, 0.15)":"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{onClick:()=>ne(c?null:s.id),style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1.25rem 1.5rem",cursor:"pointer",transition:"background 0.2s",background:c?"rgba(99, 102, 241, 0.05)":"transparent"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:s.status==="live"?"#10b981":"#ef4444",boxShadow:`0 0 8px ${s.status==="live"?"rgba(16, 185, 129, 0.5)":"rgba(239, 68, 68, 0.3)"}`,flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.25rem"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700,color:"var(--text-main)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.title}),e.jsx("span",{style:{fontSize:"0.65rem",padding:"2px 8px",borderRadius:"4px",textTransform:"uppercase",fontWeight:700,background:s.status==="live"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",color:s.status==="live"?"#10b981":"#ef4444",border:s.status==="live"?"1px solid rgba(16, 185, 129, 0.2)":"1px solid rgba(239, 68, 68, 0.2)",flexShrink:0},children:s.status==="live"?"LIVE":"ENDED"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.3rem"},children:[e.jsx(Se,{size:12})," ",s.duration," min"]}),e.jsx("span",{children:"Â·"}),e.jsxs("span",{children:[s.totalQuestions??0," questions"]}),e.jsx("span",{children:"Â·"}),e.jsxs("span",{children:["Pass ",s.passingScore,"%"]}),X&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Â·"}),e.jsx("span",{style:{color:"var(--text-muted)",opacity:.7},children:X})]})]})]}),e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"var(--bg-card)",display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.3s",transform:c?"rotate(180deg)":"rotate(0)",flexShrink:0},children:e.jsx(Vt,{size:16,style:{color:"var(--text-muted)",transform:"rotate(90deg)"}})})]}),c&&e.jsxs("div",{style:{borderTop:"1px solid var(--border-color)",padding:"1.25rem 1.5rem",animation:"fadeIn 0.2s ease"},children:[s.description&&e.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-muted)",lineHeight:1.6,margin:"0 0 1rem"},children:s.description}),$.length>0&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Math.min($.length,5)}, 1fr)`,gap:"0.75rem",marginBottom:"1.25rem"},children:$.map(D=>{const se={aptitude:{bg:"rgba(59, 130, 246, 0.1)",color:"#60a5fa",border:"rgba(59, 130, 246, 0.2)"},verbal:{bg:"rgba(139, 92, 246, 0.1)",color:"#a78bfa",border:"rgba(139, 92, 246, 0.2)"},logical:{bg:"rgba(6, 182, 212, 0.1)",color:"#22d3ee",border:"rgba(6, 182, 212, 0.2)"},coding:{bg:"rgba(16, 185, 129, 0.1)",color:"#34d399",border:"rgba(16, 185, 129, 0.2)"},sql:{bg:"rgba(245, 158, 11, 0.1)",color:"#fbbf24",border:"rgba(245, 158, 11, 0.2)"}},Be=se[D.id]||se.aptitude;return e.jsxs("div",{style:{padding:"0.75rem",background:Be.bg,border:`1px solid ${Be.border}`,borderRadius:"10px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:600,color:Be.color,textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"0.3rem"},children:D.id}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:800,color:"var(--text-main)"},children:D.questionsCount||0}),e.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)"},children:[D.timeMinutes||0," min"]})]},D.id)})}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",marginBottom:"1.25rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[e.jsxs("span",{style:{padding:"0.3rem 0.75rem",background:"var(--bg-card)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:["Type: ",e.jsx("strong",{style:{color:"var(--text-main)"},children:s.type||"Comprehensive"})]}),e.jsxs("span",{style:{padding:"0.3rem 0.75rem",background:"var(--bg-card)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:["Difficulty: ",e.jsx("strong",{style:{color:{Easy:"#10b981",Medium:"#f59e0b",Hard:"#ef4444"}[s.difficulty]||"var(--text-main)"},children:s.difficulty||"Medium"})]}),e.jsxs("span",{style:{padding:"0.3rem 0.75rem",background:"var(--bg-card)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:["Max Attempts: ",e.jsx("strong",{style:{color:"var(--text-main)"},children:s.maxAttempts||1})]}),s.startTime&&e.jsxs("span",{style:{padding:"0.3rem 0.75rem",background:"var(--bg-card)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:["Start: ",e.jsx("strong",{style:{color:"var(--text-main)"},children:new Date(s.startTime).toLocaleString()})]}),s.deadline&&e.jsxs("span",{style:{padding:"0.3rem 0.75rem",background:"var(--bg-card)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:["Deadline: ",e.jsx("strong",{style:{color:"var(--text-main)"},children:new Date(s.deadline).toLocaleString()})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.6rem",flexWrap:"wrap",paddingTop:"1rem",borderTop:"1px solid var(--border-color)"},children:[e.jsxs("button",{type:"button",onClick:D=>{D.stopPropagation(),$s(s)},style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.6rem 1.2rem",borderRadius:"10px",cursor:"pointer",fontSize:"0.8rem",fontWeight:600,transition:"all 0.2s",background:"rgba(59, 130, 246, 0.1)",color:"#93c5fd",border:"1px solid rgba(59, 130, 246, 0.25)"},children:[e.jsx(ve,{size:14})," View / Edit"]}),e.jsxs("button",{type:"button",onClick:D=>{D.stopPropagation(),Ts(s.id)},style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.6rem 1.2rem",borderRadius:"10px",cursor:"pointer",fontSize:"0.8rem",fontWeight:600,transition:"all 0.2s",background:"rgba(168, 85, 247, 0.1)",color:"#d8b4fe",border:"1px solid rgba(168, 85, 247, 0.25)"},children:[e.jsx(re,{size:14})," Assign Students"]}),s.status==="live"?e.jsxs("button",{type:"button",onClick:D=>{D.stopPropagation(),es(s.id,"draft")},style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.6rem 1.2rem",borderRadius:"10px",cursor:"pointer",fontSize:"0.8rem",fontWeight:600,transition:"all 0.2s",background:"rgba(245, 158, 11, 0.1)",color:"#fbbf24",border:"1px solid rgba(245, 158, 11, 0.25)"},children:[e.jsx(Ee,{size:14})," End Test"]}):e.jsxs("button",{type:"button",onClick:D=>{D.stopPropagation(),es(s.id,"live")},style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.6rem 1.2rem",borderRadius:"10px",cursor:"pointer",fontSize:"0.8rem",fontWeight:600,transition:"all 0.2s",background:"rgba(16, 185, 129, 0.1)",color:"#6ee7b7",border:"1px solid rgba(16, 185, 129, 0.25)"},children:[e.jsx(oe,{size:14})," Activate"]}),e.jsxs("button",{type:"button",onClick:D=>{D.stopPropagation(),Es(s.id)},style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.6rem 1.2rem",borderRadius:"10px",cursor:"pointer",fontSize:"0.8rem",fontWeight:600,transition:"all 0.2s",background:"rgba(239, 68, 68, 0.1)",color:"#fca5a5",border:"1px solid rgba(239, 68, 68, 0.25)",marginLeft:"auto"},children:[e.jsx(Le,{size:14})," Delete"]})]})]})]},s.id)})}),q&&e.jsx("div",{className:"modal-overlay",onClick:()=>{h(!1),P("")},children:e.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),style:{maxWidth:"700px",maxHeight:"85vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid var(--border-color)"},children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(re,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.25rem"},children:"Assign Students"}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-muted)"},children:"Select students for this global test"})]})]}),e.jsx("button",{onClick:()=>{h(!1),P("")},className:"modal-close",children:e.jsx(le,{size:20})})]}),e.jsxs("div",{style:{padding:"1rem 1.5rem",background:"var(--bg-secondary)",borderBottom:"1px solid var(--border-color)",display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(Te,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search by name or batch...",value:S,onChange:s=>P(s.target.value),style:{width:"100%",padding:"0.7rem 1rem 0.7rem 2.5rem",borderRadius:"10px",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.9rem"}})]}),e.jsx("button",{onClick:()=>{const s=k.filter(z=>(z.name||z.username||"").toLowerCase().includes(S.toLowerCase())||(z.batch||"").toLowerCase().includes(S.toLowerCase())),c=s.every(z=>B.includes(z.id));Q(c?z=>z.filter($=>!s.map(X=>X.id).includes($)):z=>[...new Set([...z,...s.map($=>$.id)])])},style:{padding:"0.7rem 1.2rem",borderRadius:"10px",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",whiteSpace:"nowrap"},children:k.filter(s=>(s.name||s.username||"").toLowerCase().includes(S.toLowerCase())||(s.batch||"").toLowerCase().includes(S.toLowerCase())).every(s=>B.includes(s.id))?"Deselect All":"Select All"})]}),e.jsx("div",{className:"modal-body",style:{overflowY:"auto",padding:"1.5rem",background:"var(--bg-primary)"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:k.filter(s=>(s.name||s.username||"").toLowerCase().includes(S.toLowerCase())||(s.batch||"").toLowerCase().includes(S.toLowerCase())).length===0?e.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",opacity:.5},children:[e.jsx(re,{size:48,style:{marginBottom:"1rem",opacity:.2}}),e.jsx("p",{children:"No students found matching your search."})]}):k.filter(s=>(s.name||s.username||"").toLowerCase().includes(S.toLowerCase())||(s.batch||"").toLowerCase().includes(S.toLowerCase())).map(s=>e.jsxs("div",{onClick:()=>Is(s.id),style:{padding:"1rem",borderRadius:"1rem",background:B.includes(s.id)?"var(--primary-alpha)":"var(--bg-card)",border:`1.5px solid ${B.includes(s.id)?"var(--primary)":"var(--border-color)"}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.2s",boxShadow:B.includes(s.id)?"0 4px 12px var(--primary-alpha)":"none"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:B.includes(s.id)?"var(--primary)":"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.9rem",fontWeight:700,color:"white"},children:(s.name||s.username||"S").charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"var(--text-main)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.name||s.username}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"4px"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:"4px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:s.batch||"No Batch"})})]}),B.includes(s.id)&&e.jsx(oe,{size:18,color:"var(--primary)"})]},s.id))})}),e.jsxs("div",{className:"modal-footer",style:{padding:"1.2rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-secondary)"},children:[e.jsxs("div",{style:{fontSize:"0.95rem",color:"var(--text-main)",fontWeight:500},children:[e.jsx("span",{style:{color:"var(--primary)",fontWeight:800,fontSize:"1.1rem"},children:B.length})," students selected"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{className:"btn-reset",onClick:()=>{h(!1),P("")},children:"Cancel"}),e.jsx("button",{className:"btn-create-new",onClick:Ns,style:{background:"var(--primary)",padding:"0.7rem 2rem",borderRadius:"10px",boxShadow:"0 4px 15px var(--primary-alpha)"},children:"Confirm Assignment"})]})]})]})}),v&&e.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1500,backdropFilter:"blur(5px)",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsxs("div",{className:"modal-content",style:{width:"100%",maxWidth:g===1?"min(800px, calc(100vw - 2rem))":"min(900px, calc(100vw - 2rem))",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column",borderRadius:"16px",background:"#1e293b",backgroundImage:"linear-gradient(145deg, rgba(30,41,59,1), rgba(15,23,42,1))",border:"1px solid rgba(139,92,246,0.2)",boxShadow:"0 25px 50px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.5rem",borderBottom:"1px solid rgba(139,92,246,0.15)",background:"rgba(15, 23, 42, 0.95)",backdropFilter:"blur(10px)",flexShrink:0,zIndex:10},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{padding:"0.5rem",background:"linear-gradient(135deg, rgba(139,92,246,0.2), rgba(6,182,212,0.2))",borderRadius:"10px"},children:e.jsx(Fe,{size:22,color:"#a78bfa"})}),e.jsxs("div",{children:[e.jsxs("h2",{style:{margin:0,fontSize:"1.25rem"},children:[b?"Edit":"Create"," Global Test"]}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:g===1?"Step 1: Basic Settings & Sections":"Step 2: Add Questions to Sections"})]})]}),e.jsx("button",{type:"button",onClick:()=>{y(!1),I(1),x(null)},style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"10px",padding:"0.5rem",cursor:"pointer",color:"white",transition:"all 0.2s"},children:e.jsx(le,{size:20})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem"},children:[g===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Test Title"}),e.jsx("input",{type:"text",placeholder:"e.g. Global Complete Assessment - Feb 2026",value:f.title,onChange:s=>J({...f,title:s.target.value}),style:{width:"100%"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Duration (min) â€” default 180 for Coding+SQL"}),e.jsx("input",{type:"number",min:"30",max:"300",value:f.duration,onChange:s=>J({...f,duration:parseInt(s.target.value)||180})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Passing Score (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:f.passingScore,onChange:s=>J({...f,passingScore:parseInt(s.target.value)||60})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:f.status,onChange:s=>J({...f,status:s.target.value}),children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"live",children:"Live"})]})]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Max Attempts"}),e.jsx("input",{type:"number",min:"1",max:"10",value:f.maxAttempts,onChange:s=>J({...f,maxAttempts:parseInt(s.target.value)||1})})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.25rem",background:"linear-gradient(135deg, rgba(239,68,68,0.05), rgba(251,191,36,0.05))",borderRadius:"16px",border:"1px solid rgba(239,68,68,0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{padding:"0.5rem",background:"rgba(239,68,68,0.1)",borderRadius:"8px"},children:e.jsx(ze,{size:20,color:"#ef4444"})}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0,fontSize:"1rem",color:"#ef4444"},children:"Proctoring Settings"}),e.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:"Configure security measures for exam integrity"})]}),e.jsxs("label",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:r.enabled,onChange:s=>N({...r,enabled:s.target.checked})}),e.jsx("span",{style:{fontSize:"0.85rem",fontWeight:600},children:"Enable Proctoring"})]})]}),r.enabled&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"0.75rem"},children:[e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",fontSize:"0.85rem"},children:[e.jsx("input",{type:"checkbox",checked:r.trackTabSwitches,onChange:s=>N({...r,trackTabSwitches:s.target.checked})}),e.jsx(ve,{size:16,color:"#f59e0b"}),"Track Tab Switches"]}),r.trackTabSwitches&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"1.5rem"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:"Max:"}),e.jsx("input",{type:"number",min:"1",max:"10",value:r.maxTabSwitches,onChange:s=>N({...r,maxTabSwitches:parseInt(s.target.value)||3}),style:{width:50,padding:"0.25rem 0.5rem",fontSize:"0.85rem"}})]})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[e.jsx("input",{type:"checkbox",checked:r.enableVideoAudio,onChange:s=>N({...r,enableVideoAudio:s.target.checked})}),e.jsx("span",{style:{fontSize:"1rem"},children:"ðŸ“¹"}),"Video/Audio Recording"]}),e.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Record student during test"})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[e.jsx("input",{type:"checkbox",checked:r.detectCameraBlocking,onChange:s=>N({...r,detectCameraBlocking:s.target.checked})}),e.jsx("span",{style:{fontSize:"1rem"},children:"ðŸš«"}),"Detect Camera Blocking"]}),e.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Flag covered/blocked camera"})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[e.jsx("input",{type:"checkbox",checked:r.detectPhoneUsage,onChange:s=>N({...r,detectPhoneUsage:s.target.checked})}),e.jsx("span",{style:{fontSize:"1rem"},children:"ðŸ“±"}),"AI Phone Detection"]}),e.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Detect mobile phones in view"})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[e.jsx("input",{type:"checkbox",checked:r.disableCopyPaste,onChange:s=>N({...r,disableCopyPaste:s.target.checked})}),e.jsx("span",{style:{fontSize:"1rem"},children:"ðŸ“‹"}),"Disable Copy/Paste"]}),e.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Block clipboard actions"})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[e.jsx("input",{type:"checkbox",checked:r.enforceFullscreen,onChange:s=>N({...r,enforceFullscreen:s.target.checked})}),e.jsx("span",{style:{fontSize:"1rem"},children:"ðŸ–¥ï¸"}),"Enforce Fullscreen"]}),e.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Required during test"})]}),e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239,68,68,0.1)",borderRadius:"10px",border:"1px solid rgba(239,68,68,0.2)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[e.jsx("input",{type:"checkbox",checked:r.autoSubmitOnViolation,onChange:s=>N({...r,autoSubmitOnViolation:s.target.checked})}),e.jsx(ue,{size:16,color:"#ef4444"}),"Auto-Submit on Max Violations"]}),e.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(239,68,68,0.7)"},children:"Submit test when violations exceed limit"})]})]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Description (optional)"}),e.jsx("textarea",{placeholder:"Instructions for students",value:f.description,onChange:s=>J({...f,description:s.target.value}),rows:2,style:{width:"100%",resize:"vertical"}})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Sections â€” Coding min 2, SQL min 1 (max set by you)"}),(f.sectionConfig?.sections||[]).map(s=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem",flexWrap:"wrap"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:120},children:[e.jsx("input",{type:"checkbox",checked:!!s.enabled,onChange:c=>Rs(s.id,c.target.checked)}),ht.find(c=>c.id===s.id)?.icon," ",ht.find(c=>c.id===s.id)?.label,s.id==="coding"&&e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"(min 2)"}),s.id==="sql"&&e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"(min 1)"})]}),e.jsx("input",{type:"number",min:s.id==="coding"?2:s.id==="sql"?1:0,placeholder:"Count",value:s.questionsCount??"",onChange:c=>Lt(s.id,"questionsCount",parseInt(c.target.value)||0),style:{width:70}}),e.jsx("input",{type:"number",min:"0",placeholder:"Min",value:s.timeMinutes??"",onChange:c=>Lt(s.id,"timeMinutes",parseInt(c.target.value)||0),style:{width:70}})]},s.id))]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn-reset",onClick:()=>y(!1),children:"Cancel"}),e.jsx("button",{type:"button",className:"btn-create-new",onClick:()=>I(2),children:"Next: Add Questions"})]})]}),g===2&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap",padding:"0.5rem",background:"rgba(0,0,0,0.2)",borderRadius:"14px",border:"1px solid rgba(255,255,255,0.05)"},children:ht.map(s=>{const c=d===s.id,z=(C[s.id]||[]).length,$={aptitude:{bg:"rgba(139,92,246,0.15)",border:"rgba(139,92,246,0.4)",color:"#a78bfa"},verbal:{bg:"rgba(59,130,246,0.15)",border:"rgba(59,130,246,0.4)",color:"#60a5fa"},logical:{bg:"rgba(245,158,11,0.15)",border:"rgba(245,158,11,0.4)",color:"#fbbf24"},coding:{bg:"rgba(16,185,129,0.15)",border:"rgba(16,185,129,0.4)",color:"#34d399"},sql:{bg:"rgba(6,182,212,0.15)",border:"rgba(6,182,212,0.4)",color:"#22d3ee"}},X=$[s.id]||$.aptitude;return e.jsxs("button",{type:"button",onClick:()=>m(s.id),style:{padding:"0.75rem 1.25rem",borderRadius:"10px",border:c?`2px solid ${X.border}`:"2px solid transparent",background:c?X.bg:"transparent",color:c?X.color:"rgba(255,255,255,0.6)",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",fontWeight:c?600:400,transition:"all 0.2s ease",flex:"1 1 auto",justifyContent:"center",minWidth:"120px"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:s.icon}),e.jsx("span",{children:s.label}),e.jsx("span",{style:{background:z>0?c?X.color:"rgba(255,255,255,0.2)":"rgba(255,255,255,0.1)",color:z>0?c?"#0f172a":"rgba(255,255,255,0.8)":"rgba(255,255,255,0.4)",padding:"0.15rem 0.5rem",borderRadius:"6px",fontSize:"0.75rem",fontWeight:700,minWidth:"24px",textAlign:"center"},children:z})]},s.id)})}),d==="coding"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card glass",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(16,185,129,0.1), rgba(6,182,212,0.05))",border:"1px solid rgba(16,185,129,0.3)",borderRadius:"16px"},children:[e.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1.1rem",color:"#10b981"},children:[e.jsx($t,{size:20})," AI Coding Problem Generator"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"TOPIC / CONCEPT"}),e.jsx("input",{type:"text",placeholder:"e.g., Two Sum, Binary Search, Linked Lists",value:n.topic,onChange:s=>E({...n,topic:s.target.value}),style:{width:"100%"}})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"DIFFICULTY"}),e.jsxs("select",{value:n.difficulty,onChange:s=>E({...n,difficulty:s.target.value}),children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"LANGUAGE"}),e.jsxs("select",{value:n.language,onChange:s=>E({...n,language:s.target.value}),children:[e.jsx("option",{value:"Python",children:"Python"}),e.jsx("option",{value:"JavaScript",children:"JavaScript"}),e.jsx("option",{value:"Java",children:"Java"}),e.jsx("option",{value:"C++",children:"C++"})]})]}),e.jsx("button",{type:"button",className:"btn-create-new",onClick:_s,disabled:Pe,style:{background:"linear-gradient(135deg, #10b981, #06b6d4)"},children:Pe?e.jsxs(e.Fragment,{children:[e.jsx(_e,{size:16,className:"spin"})," Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ns,{size:16})," Generate"]})})]}),de.length>0&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(16,185,129,0.1)",borderRadius:"12px",border:"1px solid rgba(16,185,129,0.2)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[e.jsxs("span",{style:{fontWeight:600,color:"#10b981"},children:["âœ“ Generated ",de.length," Problem(s)"]}),e.jsxs("button",{type:"button",className:"btn-create-new",onClick:Bs,style:{background:"linear-gradient(135deg, #10b981, #059669)"},children:[e.jsx(Ae,{size:16})," Add to Section"]})]}),de.map((s,c)=>e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"8px",marginTop:"0.5rem"},children:[e.jsxs("p",{style:{margin:"0 0 0.5rem",fontWeight:500,color:"white"},children:[s.question?.substring(0,150),"..."]}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:[s.testCases?.length||0," test cases"]})]},c))]})]}),e.jsxs("div",{style:{padding:"1.5rem",background:"var(--bg-secondary)",borderRadius:"16px",border:"1px solid var(--border-color)"},children:[e.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1rem",color:"var(--text)"},children:[e.jsx(Re,{size:18})," Manual Entry"]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Problem description"}),e.jsx("textarea",{value:p.question,onChange:s=>Y({...p,question:s.target.value}),placeholder:"Describe the coding problem...",rows:3,style:{width:"100%",resize:"vertical"}})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Starter code (optional)"}),e.jsx("textarea",{value:p.starterCode,onChange:s=>Y({...p,starterCode:s.target.value}),placeholder:"def solution():\\n    pass",rows:4,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical"}})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Language"}),e.jsxs("select",{value:p.language,onChange:s=>Y({...p,language:s.target.value}),children:[e.jsx("option",{value:"Python",children:"Python"}),e.jsx("option",{value:"JavaScript",children:"JavaScript"}),e.jsx("option",{value:"Java",children:"Java"}),e.jsx("option",{value:"C++",children:"C++"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Test cases (input â†’ expected output)"}),p.testCases.map((s,c)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"0.5rem",marginBottom:"0.5rem",alignItems:"center"},children:[e.jsx("input",{type:"text",placeholder:"Sample Input",value:s.input||"",onChange:z=>{const $=[...p.testCases];$[c]={...$[c],input:z.target.value},Y({...p,testCases:$})}}),e.jsx("input",{type:"text",placeholder:"Sample Output",value:s.expected_output||"",onChange:z=>{const $=[...p.testCases];$[c]={...$[c],expected_output:z.target.value},Y({...p,testCases:$})}}),e.jsx("button",{type:"button",onClick:()=>Y({...p,testCases:p.testCases.filter((z,$)=>$!==c)}),className:"btn-reset",style:{color:"var(--danger)"},children:e.jsx(le,{size:18})})]},c)),e.jsx("button",{type:"button",className:"btn-reset",style:{fontSize:"0.85rem",marginTop:"0.25rem"},onClick:()=>Y({...p,testCases:[...p.testCases,{input:"",expected_output:""}]}),children:"+ Add test case"})]}),e.jsx("button",{type:"button",className:"btn-create-new",onClick:Fs,children:"Add this coding problem"})]}),e.jsxs("div",{style:{marginTop:"2rem"},children:[C.coding?.length>0&&e.jsxs("h4",{style:{color:"white",marginBottom:"1rem",fontSize:"1rem"},children:["Added Coding Problems (",C.coding.length,")"]}),C.coding?.map((s,c)=>e.jsx("div",{className:"card glass",style:{marginBottom:"1rem",padding:"1rem",background:"rgba(59, 130, 246, 0.05)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsxs("h5",{style:{margin:"0 0 0.5rem",color:"#60a5fa",fontSize:"1rem"},children:[s.question?.substring(0,100),"..."]}),e.jsxs("span",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:[s.testCases?.language||(s.testCases?.cases||Array.isArray(s.testCases)?"Coding":"Python")," â€¢ ",(Array.isArray(s.testCases)?s.testCases:s.testCases?.cases||[]).length," test cases"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{type:"button",onClick:()=>M({index:c,section:"coding"}),style:{padding:"0.5rem 0.75rem",background:"#3b82f6",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[e.jsx(it,{size:16})," Manage Test Cases"]}),e.jsx("button",{type:"button",onClick:()=>{L(z=>({...z,coding:z.coding.filter(($,X)=>X!==c)}))},style:{padding:"0.5rem",background:"rgba(239, 68, 68, 0.2)",border:"none",borderRadius:"8px",color:"#ef4444",cursor:"pointer"},children:e.jsx(Le,{size:16})})]})]})},c))]}),o&&C[o.section]?.[o.index]&&e.jsx(Br,{title:C[o.section][o.index].question?.substring(0,50),inputLabel:o.section==="sql"?"Database Schema (SQL)":"Sample Input",outputLabel:o.section==="sql"?"Expected Result (Table/Text)":"Sample Output",initialTestCases:(()=>{const s=C[o.section][o.index];if(Array.isArray(s.testCases))return s.testCases.map(c=>({...c,expectedOutput:c.expected_output||c.expectedOutput,isHidden:c.isHidden||!1,points:c.points||10,description:c.description||""}));if(o.section==="sql"){const c=s.schema||s.starterCode||"",z=s.expectedOutput||s.testCases?.expectedOutput||"";if(c||z)return[{input:c,expectedOutput:z,isHidden:!1,points:s.points||10,description:"Default Case"}]}return s.testCases?.cases?s.testCases.cases.map(c=>({...c,expectedOutput:c.expected_output||c.expectedOutput,isHidden:c.isHidden||!1,points:c.points||10,description:c.description||""})):[]})(),onClose:()=>M(null),onUpdate:s=>{const c=s.map(z=>({input:z.input,expected_output:z.expectedOutput,isHidden:z.isHidden,points:z.points,description:z.description}));L(z=>{const $=o.section,X=[...z[$]||[]];if(X[o.index]){const D=X[o.index];if($==="sql"){const se=s[0]||{input:"",expectedOutput:""};X[o.index]={...D,schema:se.input,starterCode:se.input,expectedOutput:se.expectedOutput,testCases:c}}else{const se=D.testCases?.language||"Python";D.testCases?.language||!Array.isArray(D.testCases)?X[o.index]={...D,testCases:{language:se,cases:c}}:X[o.index]={...D,testCases:c}}}return{...z,[$]:X}})}})]}),d==="sql"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card glass",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(6,182,212,0.1), rgba(139,92,246,0.05))",border:"1px solid rgba(6,182,212,0.3)",borderRadius:"16px"},children:[e.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1.1rem",color:"#06b6d4"},children:[e.jsx($t,{size:20})," AI SQL Problem Generator"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"TOPIC / CONCEPT"}),e.jsx("input",{type:"text",placeholder:"e.g., JOINs, Aggregate Functions, Subqueries",value:_.topic,onChange:s=>H({..._,topic:s.target.value}),style:{width:"100%"}})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"DIFFICULTY"}),e.jsxs("select",{value:_.difficulty,onChange:s=>H({..._,difficulty:s.target.value}),children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsx("button",{type:"button",className:"btn-create-new",onClick:Ws,disabled:Ye,style:{background:"linear-gradient(135deg, #06b6d4, #8b5cf6)"},children:Ye?e.jsxs(e.Fragment,{children:[e.jsx(_e,{size:16,className:"spin"})," Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ns,{size:16})," Generate"]})})]}),ge.length>0&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(6,182,212,0.1)",borderRadius:"12px",border:"1px solid rgba(6,182,212,0.2)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[e.jsxs("span",{style:{fontWeight:600,color:"#06b6d4"},children:["âœ“ Generated ",ge.length," Problem(s)"]}),e.jsxs("button",{type:"button",className:"btn-create-new",onClick:Ps,style:{background:"linear-gradient(135deg, #06b6d4, #0891b2)"},children:[e.jsx(Ae,{size:16})," Add to Section"]})]}),ge.map((s,c)=>e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"8px",marginTop:"0.5rem"},children:[e.jsxs("p",{style:{margin:"0 0 0.5rem",fontWeight:500,color:"white"},children:[s.question?.substring(0,150),"..."]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:"Schema included"})]},c))]})]}),e.jsxs("div",{style:{padding:"1.5rem",background:"var(--bg-secondary)",borderRadius:"16px",border:"1px solid var(--border-color)"},children:[e.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1rem",color:"var(--text)"},children:[e.jsx(Ue,{size:18})," Manual Entry"]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Question / instruction"}),e.jsx("textarea",{value:u.question,onChange:s=>R({...u,question:s.target.value}),placeholder:"e.g. Write a query to return the top 5 employees by salary",rows:2,style:{width:"100%",resize:"vertical"}})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Database schema (CREATE TABLE + INSERT)"}),e.jsx("textarea",{value:u.schema,onChange:s=>R({...u,schema:s.target.value}),placeholder:`CREATE TABLE employees (id INT, name TEXT, salary INT);
INSERT INTO employees VALUES (1,'A',100);`,rows:6,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical"}})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",children:"Expected query result (exact output to match)"}),e.jsx("textarea",{value:u.expectedOutput,onChange:s=>R({...u,expectedOutput:s.target.value}),placeholder:"Paste the expected result as shown by SQLite",rows:4,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical"}})]}),e.jsx("button",{type:"button",className:"btn-create-new",onClick:Qs,children:"Add this SQL question"})]}),e.jsxs("div",{style:{marginTop:"2rem"},children:[C.sql?.length>0&&e.jsxs("h4",{style:{color:"white",marginBottom:"1rem",fontSize:"1rem"},children:["Added SQL Problems (",C.sql.length,")"]}),C.sql?.map((s,c)=>e.jsx("div",{className:"card glass",style:{marginBottom:"1rem",padding:"1rem",background:"rgba(6, 182, 212, 0.05)",border:"1px solid rgba(6, 182, 212, 0.2)",borderRadius:"12px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsxs("h5",{style:{margin:"0 0 0.5rem",color:"#60a5fa",fontSize:"1rem"},children:[s.question?.substring(0,100),"..."]}),e.jsxs("span",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:["SQL Problem â€¢ ",Array.isArray(s.testCases)?s.testCases:s.schema?1:0," test case(s)"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{type:"button",onClick:()=>M({index:c,section:"sql"}),style:{padding:"0.5rem 0.75rem",background:"#06b6d4",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[e.jsx(it,{size:16})," Manage Data"]}),e.jsx("button",{type:"button",onClick:()=>{L(z=>({...z,sql:z.sql.filter(($,X)=>X!==c)}))},style:{padding:"0.5rem",background:"rgba(239, 68, 68, 0.2)",border:"none",borderRadius:"8px",color:"#ef4444",cursor:"pointer"},children:e.jsx(Le,{size:16})})]})]})},c))]})]}),d!=="coding"&&d!=="sql"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card glass",style:{marginBottom:"1.5rem",padding:"1.25rem",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[e.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1rem"},children:[e.jsx(Ve,{size:18,style:{color:"var(--primary)"}})," AI Question Generator"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto auto auto",gap:"0.75rem",alignItems:"end",flexWrap:"wrap"},children:[e.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[e.jsx("label",{className:"form-label",children:"TOPIC"}),e.jsx("input",{type:"text",placeholder:"e.g., Number Series, Logical Reasoning",value:xe.topic,onChange:s=>ye({...xe,topic:s.target.value}),style:{width:"100%"}})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[e.jsx("label",{className:"form-label",children:"DIFFICULTY"}),e.jsxs("select",{value:xe.difficulty,onChange:s=>ye({...xe,difficulty:s.target.value}),children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[e.jsx("label",{className:"form-label",children:"COUNT"}),e.jsx("input",{type:"number",min:"1",max:"20",value:xe.count,onChange:s=>ye({...xe,count:parseInt(s.target.value)||1}),style:{width:70}})]}),e.jsxs("button",{type:"button",className:"btn-create-new",onClick:Ds,disabled:U,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ve,{size:16})," ",U?"Generatingâ€¦":"Generate"]})]}),Ce.length>0&&e.jsxs("div",{style:{marginTop:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:[Ce.length," question(s) generated."]}),e.jsx("button",{type:"button",className:"btn-create-new",onClick:qs,style:{fontSize:"0.9rem"},children:"Add All to Test"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:0,fontSize:"1rem"},children:[e.jsx(ws,{size:18,style:{color:"var(--text-muted)"}})," Questions"]}),e.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:[(C[d]||[]).length," questions"]})]}),e.jsxs("div",{style:{maxHeight:"50vh",overflowY:"auto",marginBottom:"1rem"},children:[(C[d]||[]).map((s,c)=>e.jsxs("div",{className:"card glass",style:{marginBottom:"1rem",padding:"1.25rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsxs("span",{style:{background:"var(--primary)",color:"white",padding:"0.25rem 0.6rem",borderRadius:"8px",fontWeight:600,fontSize:"0.85rem"},children:["Q",c+1]}),e.jsx("button",{type:"button",onClick:()=>Zt(d,c),className:"btn-reset",style:{color:"var(--danger)",padding:"0.25rem"},title:"Delete question",children:e.jsx(Le,{size:18})})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",children:"QUESTION TEXT"}),e.jsx("textarea",{value:s.question||"",onChange:z=>_t(d,c,"question",z.target.value),placeholder:"Enter question text...",rows:2,style:{width:"100%",resize:"vertical"}})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"0.75rem"},children:[e.jsx("label",{className:"form-label",children:"ANSWER OPTIONS"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[0,1,2,3].map(z=>{const $=s.options||["","","",""],X=(s.correctAnswer??0)===z;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>_t(d,c,"correctAnswer",z),style:{minWidth:36,height:36,borderRadius:"8px",border:"2px solid "+(X?"var(--success)":"var(--border-color)"),background:X?"var(--success-alpha)":"var(--bg-secondary)",color:X?"var(--success)":"var(--text-muted)",fontWeight:700,cursor:"pointer",flexShrink:0},children:String.fromCharCode(65+z)}),e.jsx("input",{type:"text",value:$[z]||"",onChange:D=>{const se=[...$];se[z]=D.target.value,_t(d,c,"options",se)},placeholder:`Option ${String.fromCharCode(65+z)}`,style:{flex:1}})]},z)})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:"var(--success-alpha)",borderRadius:"8px",border:"1px solid var(--success)"},children:[e.jsx(vs,{size:18,style:{color:"var(--success)",flexShrink:0}}),e.jsx("span",{style:{fontSize:"0.9rem",color:"var(--success)",fontWeight:500},children:"Correct Answer:"}),e.jsxs("span",{style:{background:"var(--success)",color:"white",padding:"0.2rem 0.5rem",borderRadius:"6px",fontSize:"0.85rem"},children:["Option ",String.fromCharCode(65+(s.correctAnswer??0))]}),e.jsx("span",{style:{marginLeft:"auto",fontSize:"0.8rem",color:"var(--text-muted)"},children:"Click any option badge to change"})]})]},c)),e.jsxs("button",{type:"button",onClick:Os,style:{width:"100%",padding:"1.25rem",border:"2px dashed var(--border-color)",borderRadius:"12px",background:"transparent",color:"var(--text-muted)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"1rem"},children:[e.jsx(Ae,{size:20})," Add New Question"]})]})]}),(d==="coding"||d==="sql")&&e.jsxs("div",{style:{marginTop:"1rem",marginBottom:"1rem"},children:[e.jsxs("strong",{children:["Added in ",ht.find(s=>s.id===d)?.label,":"]}),e.jsx("ul",{style:{margin:"0.5rem 0",paddingLeft:"1.5rem",maxHeight:200,overflow:"auto"},children:(C[d]||[]).map((s,c)=>e.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:400},children:s.question}),e.jsx("button",{type:"button",onClick:()=>Zt(d,c),className:"btn-reset",style:{color:"var(--danger)"},children:e.jsx(le,{size:16})})]},c))})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"space-between"},children:[e.jsx("button",{type:"button",className:"btn-reset",onClick:()=>I(1),children:"Back"}),e.jsxs("button",{type:"button",className:"btn-create-new",onClick:Ms,children:[b?"Update":"Create"," Test"]})]})]})]})," "]})})]})}function ii(){const[t,j]=a.useState([]),[W,T]=a.useState(!0),[v,y]=a.useState(!1),[g,I]=a.useState(!1),[b,x]=a.useState(null),[d,m]=a.useState(!1),[o,M]=a.useState([]),[q,h]=a.useState({topic:"",difficulty:"Medium",count:5}),[k,w]=a.useState([]),[B,Q]=a.useState(!1),te=a.useRef(null),[i,S]=a.useState(!1),[P,G]=a.useState([]),[V,Z]=a.useState([]),[ne,f]=a.useState(null),[J,C]=a.useState(""),[L,K]=a.useState({title:"",difficulty:"Medium",duration:30,passingScore:60,maxTabSwitches:3,maxAttempts:1,startTime:"",deadline:"",description:"",status:"live",questions:[]}),[ke,p]=a.useState({question:"",options:["","","",""],correctAnswer:0,category:"general",explanation:""});a.useEffect(()=>{u(),R(),Y()},[]);const Y=async()=>{try{const n=await A.get(`${O}/users?role=student`);G(n.data||[])}catch(n){console.error("Error fetching students:",n)}},u=async()=>{try{const n=await A.get(`${O}/aptitude`);j(n.data),T(!1)}catch(n){console.error("Error fetching tests:",n),T(!1)}},R=async()=>{try{const n=await A.get(`${O}/aptitude-submissions`);w(n.data)}catch(n){console.error("Error fetching submissions:",n)}},ee=async n=>{f(n);try{const E=await A.get(`${O}/aptitude/${n}/allocated-students`);Z(E.data.studentIds||[])}catch{Z([])}S(!0)},pe=async()=>{if(ne)try{await A.post(`${O}/aptitude/${ne}/allocate-students`,{studentIds:V}),alert(`âœ… Test allocated to ${V.length} student(s)`),S(!1),Z([]),f(null)}catch(n){alert("âŒ Error allocating test: "+n.response?.data?.error||n.message)}},xe=n=>{Z(E=>E.includes(n)?E.filter(_=>_!==n):[...E,n])},ye=async()=>{m(!0);try{const n=await A.post(`${O}/ai/generate-aptitude`,q);n.data.questions&&M(n.data.questions)}catch{alert("Error generating questions")}finally{m(!1)}},Ce=()=>{K(n=>({...n,questions:[...n.questions,...o]})),M([])},l=async n=>{if(n&&n.preventDefault(),L.questions.length===0){alert("Please add at least one question");return}if(L.questions.filter(_=>!_.question.trim()||_.options.some(H=>!H.trim())).length>0){alert("Please fill in all questions and options");return}try{const _={...L,createdBy:We};if(_.startTime){const H=new Date(_.startTime);isNaN(H.getTime())||(_.startTime=H.toISOString())}if(_.deadline){const H=new Date(_.deadline);isNaN(H.getTime())||(_.deadline=H.toISOString())}await A.post(`${O}/aptitude`,_),y(!1),K({title:"",difficulty:"Medium",duration:30,passingScore:60,maxTabSwitches:3,maxAttempts:1,startTime:"",deadline:"",description:"",status:"live",questions:[]}),u()}catch(_){console.error(_),alert(_.response?.data?.error||"Error creating test")}},U=async n=>{const E=n.target.files[0];if(E){Q(!0);try{const H=(await E.text()).split(`
`).map(fe=>fe.trim()).filter(Boolean);if(H.length<2){alert("CSV must have header + at least one row");return}const de=H[0].split(",").map(fe=>fe.trim().toLowerCase().replace(/['"]/g,"")),F=[];for(let fe=1;fe<H.length;fe++){const Pe=H[fe].match(/(".*?"|[^,]+)/g)?.map(Ye=>Ye.trim().replace(/^"|"$/g,""))||[],ce={};de.forEach((Ye,Je)=>ce[Ye]=Pe[Je]||""),ce.question&&F.push({question:ce.question,options:[ce.option1||ce.option_1||"",ce.option2||ce.option_2||"",ce.option3||ce.option_3||"",ce.option4||ce.option_4||""],correctAnswer:parseInt(ce.correctanswer||ce.correct_answer||ce.answer||"0"),category:ce.category||"general",explanation:ce.explanation||""})}if(F.length===0){alert("No valid rows. CSV needs: question,option1,option2,option3,option4,correctAnswer"),Q(!1);return}const ge={title:E.name.replace(".csv","")+" - CSV Import",difficulty:"Medium",duration:Math.max(30,F.length*2),passingScore:60,maxTabSwitches:3,maxAttempts:1,status:"draft",createdBy:We,questions:F};await A.post(`${O}/aptitude`,ge),alert(`Created aptitude test with ${F.length} questions from CSV!`),u()}catch(_){alert("CSV upload failed: "+(_.response?.data?.error||_.message))}finally{Q(!1),n.target.value=""}}},ie=async n=>{const E=n.status==="live"?"ended":"live",_=E==="live"?"make this test visible to students":"hide this test from students";if(window.confirm(`Are you sure you want to ${_}?`))try{await A.patch(`${O}/aptitude/${n.id}/status`,{status:E}),u()}catch{alert("Error updating test status")}},r=async n=>{if(window.confirm("Delete this aptitude test?"))try{await A.delete(`${O}/aptitude/${n}`),u()}catch(E){console.error(E),alert("Error deleting test")}},N=n=>{K(E=>({...E,questions:E.questions.filter((_,H)=>H!==n)}))};return W?e.jsx("div",{className:"loading-spinner"}):e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ie,{size:28,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Aptitude Tests"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Create and manage aptitude tests for students"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsx("input",{type:"file",accept:".csv",ref:te,style:{display:"none"},onChange:U}),e.jsxs("button",{onClick:()=>te.current?.click(),disabled:B,className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Nt,{size:18})," ",B?"Uploading...":"CSV Upload"]}),e.jsxs("button",{onClick:()=>y(!0),className:"btn-create-new premium-btn",style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",borderRadius:"1rem",fontSize:"0.95rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ae,{size:20})," Create New Test"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:e.jsx(Ie,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Total Tests"}),e.jsx("span",{className:"stat-value",children:t.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:e.jsx(oe,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Live Tests"}),e.jsx("span",{className:"stat-value",children:t.filter(n=>n.status==="live").length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:e.jsx(Ht,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Submissions"}),e.jsx("span",{className:"stat-value",children:k.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b"},children:e.jsx(tt,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Pass Rate"}),e.jsxs("span",{className:"stat-value",children:[k.length>0?Math.round(k.filter(n=>n.status==="passed").length/k.length*100):0,"%"]})]})]})]}),e.jsxs("div",{className:"card glass",children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"24px"},children:[e.jsx(Ie,{size:20,style:{color:"#8b5cf6"}})," All Aptitude Tests"]}),e.jsx("div",{className:"table-container",style:{border:"none"},children:e.jsxs("table",{className:"modern-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Test Title"}),e.jsx("th",{children:"Difficulty"}),e.jsx("th",{children:"Questions"}),e.jsx("th",{children:"Duration"}),e.jsx("th",{children:"Pass %"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:t.map(n=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ie,{size:16,color:"white"})}),e.jsx("span",{style:{fontWeight:500},children:n.title})]})}),e.jsx("td",{children:e.jsx("span",{className:`difficulty-badge ${n.difficulty?.toLowerCase()}`,children:n.difficulty})}),e.jsx("td",{children:n.questionCount||n.totalQuestions}),e.jsxs("td",{children:[n.duration," min"]}),e.jsxs("td",{children:[n.passingScore,"%"]}),e.jsx("td",{children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",background:n.status==="live"?"rgba(16, 185, 129, 0.15)":n.status==="ended"?"rgba(239, 68, 68, 0.15)":"rgba(107, 114, 128, 0.15)",color:n.status==="live"?"#10b981":n.status==="ended"?"#ef4444":"#6b7280",fontSize:"0.8rem",fontWeight:500},children:n.status})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>{x(n),I(!0)},style:{padding:"0.4rem 0.8rem",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"6px",color:"#3b82f6",cursor:"pointer",fontSize:"0.8rem"},children:"View"}),e.jsx("button",{onClick:()=>ee(n.id),style:{padding:"0.4rem 0.8rem",background:"rgba(168, 85, 247, 0.1)",border:"1px solid rgba(168, 85, 247, 0.3)",borderRadius:"6px",color:"#a855f7",cursor:"pointer",fontSize:"0.8rem",whiteSpace:"nowrap"},title:"Assign this test to specific students",children:"ðŸ‘¥ Assign"}),e.jsx("button",{onClick:()=>ie(n),style:{padding:"0.4rem 0.8rem",background:n.status==="live"?"rgba(245, 158, 11, 0.1)":"rgba(16, 185, 129, 0.1)",border:n.status==="live"?"1px solid rgba(245, 158, 11, 0.3)":"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"6px",color:n.status==="live"?"#f59e0b":"#10b981",cursor:"pointer",fontSize:"0.8rem"},title:n.status==="live"?"End test (hide from students)":"Make test live (show to students)",children:n.status==="live"?"End":"Activate"}),e.jsx("button",{onClick:()=>r(n.id),style:{padding:"0.4rem 0.8rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",color:"#ef4444",cursor:"pointer",fontSize:"0.8rem"},children:"Delete"})]})})]},n.id))})]})})]}),v&&e.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:e.jsxs("div",{className:"modal-content",onClick:n=>n.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ie,{size:20,color:"white"})}),e.jsx("h2",{children:"Create Aptitude Test"})]}),e.jsx("button",{onClick:()=>y(!1),className:"modal-close",children:e.jsx(le,{size:20})})]}),e.jsxs("form",{onSubmit:l,className:"modal-body",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(De,{size:14,style:{marginRight:"0.5rem"}})," Test Title"]}),e.jsx("input",{type:"text",placeholder:"Enter test title...",value:L.title,onChange:n=>K({...L,title:n.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(Se,{size:14,style:{marginRight:"0.5rem"}})," Duration (mins)"]}),e.jsx("input",{type:"number",min:"5",max:"180",value:L.duration,onChange:n=>K({...L,duration:parseInt(n.target.value)})})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(_e,{size:14,style:{marginRight:"0.5rem"}})," Attempts"]}),e.jsxs("select",{value:L.maxAttempts,onChange:n=>K({...L,maxAttempts:parseInt(n.target.value)}),children:[e.jsx("option",{value:1,children:"1 Attempt"}),e.jsx("option",{value:2,children:"2 Attempts"}),e.jsx("option",{value:3,children:"3 Attempts"}),e.jsx("option",{value:5,children:"5 Attempts"}),e.jsx("option",{value:-1,children:"Unlimited"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(ue,{size:14,style:{marginRight:"0.5rem"}})," Max Tab Switches (Violations)"]}),e.jsx("input",{type:"number",min:"0",max:"20",value:L.maxTabSwitches,onChange:n=>K({...L,maxTabSwitches:parseInt(n.target.value)})}),e.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Test auto-submits if exceeded"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(as,{size:14,style:{marginRight:"0.5rem"}})," Start Time"]}),e.jsx("input",{type:"datetime-local",value:L.startTime,onChange:n=>K({...L,startTime:n.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(as,{size:14,style:{marginRight:"0.5rem"}})," End Time (Deadline)"]}),e.jsx("input",{type:"datetime-local",value:L.deadline,onChange:n=>K({...L,deadline:n.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Difficulty"}),e.jsxs("select",{value:L.difficulty,onChange:n=>K({...L,difficulty:n.target.value}),children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Passing Score (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:L.passingScore,onChange:n=>K({...L,passingScore:parseInt(n.target.value)})})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(wt,{size:14,style:{marginRight:"0.5rem"}})," Test Status"]}),e.jsxs("select",{value:L.status,onChange:n=>K({...L,status:n.target.value}),children:[e.jsx("option",{value:"live",children:"Live - Visible to students"}),e.jsx("option",{value:"ended",children:"Ended - Hidden from students"})]})]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{className:"form-label",children:[e.jsx(De,{size:14,style:{marginRight:"0.5rem"}})," Description (Optional)"]}),e.jsx("textarea",{placeholder:"Brief description of the test...",value:L.description,onChange:n=>K({...L,description:n.target.value}),rows:3,style:{width:"100%",resize:"vertical"}})]}),e.jsxs("div",{style:{background:"var(--secondary-alpha)",border:"1px solid var(--secondary)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",color:"var(--text-primary)"},children:[e.jsx(Ve,{size:18,color:"var(--secondary)"})," AI Question Generator"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr auto",gap:"1rem",alignItems:"end"},children:[e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:"TOPIC"}),e.jsx("input",{type:"text",placeholder:"e.g., Number Series, Logical Reasoning...",value:q.topic,onChange:n=>h({...q,topic:n.target.value})})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:"DIFFICULTY"}),e.jsxs("select",{value:q.difficulty,onChange:n=>h({...q,difficulty:n.target.value}),children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsxs("div",{className:"form-group",style:{margin:0},children:[e.jsx("label",{className:"form-label",children:"COUNT"}),e.jsx("input",{type:"number",min:"1",max:"20",value:q.count,onChange:n=>h({...q,count:parseInt(n.target.value)})})]}),e.jsxs("button",{type:"button",onClick:ye,disabled:d,style:{padding:"0.75rem 1.5rem",background:"var(--primary)",border:"none",borderRadius:"8px",color:"white",fontWeight:600,cursor:d?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ve,{size:16}),d?"Generating...":"Generate"]})]}),o.length>0&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--secondary)",fontWeight:600},children:["âœ¨ Generated ",o.length," questions"]}),e.jsx("button",{type:"button",onClick:Ce,style:{padding:"0.5rem 1rem",background:"var(--success-alpha)",border:"1px solid var(--success)",borderRadius:"6px",color:"var(--success)",fontSize:"0.85rem",fontWeight:600,cursor:"pointer"},children:"Add All to Test"})]}),e.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",background:"var(--bg-tertiary)",borderRadius:"8px",padding:"0.75rem"},children:o.map((n,E)=>e.jsxs("div",{style:{padding:"0.5rem",borderBottom:E<o.length-1?"1px solid var(--border-color)":"none",fontSize:"0.85rem",color:"var(--text-primary)"},children:["Q",E+1,": ",n.question.substring(0,80),"..."]},E))})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.25rem",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border-color)"},children:[e.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:0,color:"var(--text-primary)",fontSize:"1rem",fontWeight:600},children:[e.jsx(ws,{size:18,style:{color:"var(--primary)"}})," Questions"]}),e.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--primary)",background:"var(--primary-alpha)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontWeight:500},children:[L.questions.length," question",L.questions.length!==1?"s":""]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[L.questions.map((n,E)=>e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:"16px",padding:"1.5rem",border:"1px solid var(--border-color)",boxShadow:"var(--card-shadow)",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:e.jsxs("span",{style:{background:"linear-gradient(135deg, var(--primary), var(--secondary))",color:"white",padding:"0.4rem 0.8rem",borderRadius:"8px",fontSize:"0.75rem",fontWeight:700,letterSpacing:"0.5px",textTransform:"uppercase"},children:["Q",E+1]})}),e.jsx("button",{type:"button",onClick:()=>N(E),style:{background:"var(--danger-alpha)",border:"1px solid var(--danger)",borderRadius:"8px",padding:"0.5rem",cursor:"pointer",color:"var(--danger)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseOver:_=>{_.currentTarget.style.background="var(--danger)",_.currentTarget.style.color="white"},onMouseOut:_=>{_.currentTarget.style.background="var(--danger-alpha)",_.currentTarget.style.color="var(--danger)"},children:e.jsx(Le,{size:16})})]}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"0.5rem",display:"block"},children:"Question Text"}),e.jsx("input",{type:"text",value:n.question,onChange:_=>{const H=[...L.questions];H[E]={...H[E],question:_.target.value},K({...L,questions:H})},placeholder:"Enter your question here...",style:{width:"100%",padding:"0.875rem 1rem",fontSize:"0.95rem",borderRadius:"10px",border:"2px solid var(--border-color)",background:"var(--bg-primary)",color:"var(--text-primary)",transition:"border-color 0.2s"}})]}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"0.75rem",display:"block"},children:"Answer Options"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.875rem"},children:["A","B","C","D"].map((_,H)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",background:n.correctAnswer===H?"var(--success-alpha)":"var(--bg-primary)",padding:"0.5rem",borderRadius:"10px",border:n.correctAnswer===H?"2px solid var(--success)":"2px solid var(--border-color)",transition:"all 0.2s"},children:[e.jsx("span",{onClick:()=>{const de=[...L.questions];de[E]={...de[E],correctAnswer:H},K({...L,questions:de})},style:{width:"32px",height:"32px",borderRadius:"8px",background:n.correctAnswer===H?"var(--success)":"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.85rem",color:n.correctAnswer===H?"white":"var(--text-muted)",flexShrink:0,cursor:"pointer",transition:"all 0.2s",border:n.correctAnswer===H?"none":"1px solid var(--border-color)"},title:"Click to set as correct answer",children:_}),e.jsx("input",{type:"text",value:n.options[H]||"",onChange:de=>{const F=[...L.questions],ge=[...F[E].options];ge[H]=de.target.value,F[E]={...F[E],options:ge},K({...L,questions:F})},placeholder:`Option ${_}`,style:{flex:1,padding:"0.625rem 0.875rem",borderRadius:"8px",border:"none",background:"transparent",color:"var(--text-primary)",fontSize:"0.9rem"}})]},H))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1rem",background:"var(--success-alpha)",borderRadius:"10px",border:"1px solid var(--success)"},children:[e.jsx(oe,{size:18,color:"var(--success)"}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Correct Answer:"}),e.jsxs("span",{style:{background:"var(--success)",color:"white",padding:"0.375rem 0.875rem",borderRadius:"6px",fontWeight:600,fontSize:"0.85rem"},children:["Option ",["A","B","C","D"][n.correctAnswer]]}),e.jsx("span",{style:{marginLeft:"auto",fontSize:"0.75rem",color:"var(--text-muted)"},children:"Click any option badge to change"})]})]},E)),e.jsxs("button",{type:"button",onClick:()=>{K(n=>({...n,questions:[...n.questions,{question:"",options:["","","",""],correctAnswer:0,category:"general",explanation:""}]}))},style:{padding:"1.25rem",background:"var(--bg-card)",border:"2px dashed var(--border-color)",borderRadius:"16px",color:"var(--text-muted)",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",transition:"all 0.2s",fontSize:"0.95rem"},onMouseOver:n=>{n.currentTarget.style.borderColor="var(--primary)",n.currentTarget.style.color="var(--primary)",n.currentTarget.style.background="var(--primary-alpha)"},onMouseOut:n=>{n.currentTarget.style.borderColor="var(--border-color)",n.currentTarget.style.color="var(--text-muted)",n.currentTarget.style.background="var(--bg-card)"},children:[e.jsx(Ae,{size:20})," Add New Question"]})]})]}),e.jsxs("div",{className:"form-actions",style:{borderTop:"1px solid var(--border-color)",paddingTop:"1.5rem",marginTop:"0.5rem"},children:[e.jsxs("button",{type:"button",className:"btn-reset",onClick:()=>y(!1),children:[e.jsx(le,{size:16})," Cancel"]}),e.jsxs("button",{type:"submit",className:"btn-create-new",disabled:L.questions.length===0,children:[e.jsx(Tt,{size:16})," Create Test"]})]})]})]})}),g&&b&&e.jsx("div",{className:"modal-overlay",onClick:()=>I(!1),children:e.jsxs("div",{className:"modal-content",onClick:n=>n.stopPropagation(),style:{maxWidth:"700px",maxHeight:"80vh",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ie,{size:20,color:"white"})}),e.jsx("h2",{children:b.title})]}),e.jsx("button",{onClick:()=>I(!1),className:"modal-close",children:e.jsx(le,{size:20})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem"},children:[b.questionCount||b.totalQuestions," Questions â€¢ ",b.duration," minutes â€¢ Pass: ",b.passingScore,"%"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:b.questions?.map((n,E)=>e.jsxs("div",{style:{background:"var(--bg-tertiary)",borderRadius:"12px",padding:"1.25rem",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsxs("span",{style:{background:"linear-gradient(135deg, #8b5cf6, #6366f1)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"6px",fontSize:"0.8rem",fontWeight:600},children:["Q",E+1]}),e.jsx("span",{style:{fontWeight:500},children:n.question})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",marginLeft:"2.5rem"},children:n.options?.map((_,H)=>e.jsxs("div",{style:{padding:"0.5rem 0.75rem",background:_===n.correctAnswer?"rgba(16, 185, 129, 0.2)":"rgba(71, 85, 105, 0.3)",borderRadius:"8px",fontSize:"0.85rem",border:_===n.correctAnswer?"1px solid #10b981":"1px solid transparent"},children:[["A","B","C","D"][H],". ",_]},H))})]},E))})]})]})}),i&&e.jsx("div",{className:"modal-overlay",onClick:()=>{S(!1),C("")},children:e.jsxs("div",{className:"modal-content",onClick:n=>n.stopPropagation(),style:{maxWidth:"700px",maxHeight:"85vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid var(--border-color)"},children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #a855f7, #9333ea)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(re,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.25rem"},children:"Assign Students"}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-muted)"},children:"Select students for this aptitude test"})]})]}),e.jsx("button",{onClick:()=>{S(!1),C("")},className:"modal-close",children:e.jsx(le,{size:20})})]}),e.jsxs("div",{style:{padding:"1rem 1.5rem",background:"var(--bg-secondary)",borderBottom:"1px solid var(--border-color)",display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(Te,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search by name or batch...",value:J,onChange:n=>C(n.target.value),style:{width:"100%",padding:"0.7rem 1rem 0.7rem 2.5rem",borderRadius:"10px",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.9rem"}})]}),e.jsx("button",{onClick:()=>{const n=P.filter(_=>(_.name||_.username||"").toLowerCase().includes(J.toLowerCase())||(_.batch||"").toLowerCase().includes(J.toLowerCase())),E=n.every(_=>V.includes(_.id));Z(E?_=>_.filter(H=>!n.map(de=>de.id).includes(H)):_=>[...new Set([..._,...n.map(H=>H.id)])])},style:{padding:"0.7rem 1.2rem",borderRadius:"10px",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",whiteSpace:"nowrap"},children:P.filter(n=>(n.name||n.username||"").toLowerCase().includes(J.toLowerCase())||(n.batch||"").toLowerCase().includes(J.toLowerCase())).every(n=>V.includes(n.id))?"Deselect All":"Select All"})]}),e.jsx("div",{className:"modal-body",style:{overflowY:"auto",padding:"1.5rem",background:"var(--bg-primary)"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:P.filter(n=>(n.name||n.username||"").toLowerCase().includes(J.toLowerCase())||(n.batch||"").toLowerCase().includes(J.toLowerCase())).length===0?e.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",opacity:.5},children:[e.jsx(re,{size:48,style:{marginBottom:"1rem",opacity:.2}}),e.jsx("p",{children:"No students found matching your search."})]}):P.filter(n=>(n.name||n.username||"").toLowerCase().includes(J.toLowerCase())||(n.batch||"").toLowerCase().includes(J.toLowerCase())).map(n=>e.jsxs("div",{onClick:()=>xe(n.id),style:{padding:"1rem",borderRadius:"1rem",background:V.includes(n.id)?"var(--primary-alpha)":"var(--bg-card)",border:`1.5px solid ${V.includes(n.id)?"var(--primary)":"var(--border-color)"}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.2s",boxShadow:V.includes(n.id)?"0 4px 12px var(--primary-alpha)":"none"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:V.includes(n.id)?"var(--primary)":"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.9rem",fontWeight:700,color:"white"},children:(n.name||n.username||"S").charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"var(--text-main)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.name||n.username}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"4px"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:"4px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:n.batch||"No Batch"})})]}),V.includes(n.id)&&e.jsx(oe,{size:18,color:"var(--primary)"})]},n.id))})}),e.jsxs("div",{className:"modal-footer",style:{padding:"1.2rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-secondary)"},children:[e.jsxs("div",{style:{fontSize:"0.95rem",color:"var(--text-main)",fontWeight:500},children:[e.jsx("span",{style:{color:"var(--primary)",fontWeight:800,fontSize:"1.1rem"},children:V.length})," students selected"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{className:"btn-reset",onClick:()=>{S(!1),C("")},children:"Cancel"}),e.jsx("button",{className:"btn-create-new",onClick:pe,style:{background:"var(--primary)",padding:"0.7rem 2rem",borderRadius:"10px",boxShadow:"0 4px 15px var(--primary-alpha)"},children:"Confirm Assignment"})]})]})]})})]})}function ai(){const{t}=gs(),[j,W]=a.useState("overview"),[T,v]=a.useState(null),[y,g]=a.useState(null),[I,b]=a.useState(null),[x,d]=a.useState(null),[m,o]=a.useState(null),[M,q]=a.useState(!0),[h,k]=a.useState(!1),[w,B]=a.useState("");a.useEffect(()=>{q(!0),Promise.all([A.get(`${O}/analytics/plagiarism`),A.get(`${O}/analytics/time-to-solve`),A.get(`${O}/analytics/topics`),A.get(`${O}/proctoring/analytics`).catch(()=>({data:null})),A.get(`${O}/proctoring/analytics/by-student`).catch(()=>({data:null}))]).then(([i,S,P,G,V])=>{v(i.data),g(S.data),b(P.data),d(G.data),o(V.data),q(!1)}).catch(i=>{console.error(i),q(!1)})},[]);const Q=async i=>{k(!0);try{if(i==="csv"){const S=await A.get(`${O}/analytics/export/csv`,{responseType:"blob"}),P=window.URL.createObjectURL(new Blob([S.data])),G=document.createElement("a");G.href=P,G.download=`platform_analytics_${new Date().toISOString().split("T")[0]}.csv`,G.click()}else{const S=await A.get(`${O}/analytics/export/json`),P=new Blob([JSON.stringify(S.data,null,2)],{type:"application/json"}),G=window.URL.createObjectURL(P),V=document.createElement("a");V.href=G,V.download=`platform_analytics_${new Date().toISOString().split("T")[0]}.json`,V.click()}}catch(S){console.error(S)}k(!1)};if(M)return e.jsx("div",{className:"loading-spinner"});const te=[{id:"overview",label:t("topic_analysis"),icon:e.jsx(Qe,{size:16})},{id:"plagiarism",label:t("plagiarism_detection"),icon:e.jsx(ze,{size:16})},{id:"time-to-solve",label:t("time_to_solve"),icon:e.jsx(Se,{size:16})},{id:"proctoring",label:"ðŸŽ¥ Proctoring",icon:e.jsx(bt,{size:16})},{id:"student-stats",label:"ðŸ‘¥ Student Stats",icon:e.jsx(re,{size:16})},{id:"export",label:t("export_report"),icon:e.jsx(Ze,{size:16})}];return e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:te.map(i=>e.jsxs("button",{onClick:()=>W(i.id),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1.2rem",borderRadius:"10px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.85rem",background:j===i.id?"var(--primary)":"var(--card-bg)",color:j===i.id?"#fff":"var(--text-secondary)",boxShadow:j===i.id?"0 4px 15px rgba(59,130,246,0.3)":"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.2s"},children:[i.icon," ",i.label]},i.id))}),j==="overview"&&I&&e.jsxs("div",{children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:I.byType.map((i,S)=>e.jsxs("div",{style:{padding:"1.5rem",borderRadius:"16px",background:"var(--card-bg)",boxShadow:"0 2px 12px rgba(0,0,0,0.06)",border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1.1rem",marginBottom:"1rem",textTransform:"capitalize"},children:i.type}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.75rem",textAlign:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800},children:i.submissions}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:t("submissions")})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:i.avgScore>=70?"#10b981":"#f59e0b"},children:[i.avgScore,"%"]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:t("avg_score")})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"#3b82f6"},children:i.uniqueStudents}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:t("students")})]})]}),e.jsx("div",{style:{marginTop:"1rem",height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${i.passRate}%`,borderRadius:"4px",background:"linear-gradient(90deg, #10b981, #34d399)",transition:"width 0.5s"}})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px",fontSize:"0.7rem",color:"var(--text-muted)"},children:[e.jsxs("span",{children:[i.passRate,"% ",t("pass_rate")]}),e.jsxs("span",{children:[i.failRate,"% ",t("fail_rate")]})]})]},S))}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(Ie,{size:18,color:"#f59e0b"})," ",t("by_difficulty")]}),I.byDifficulty.map((i,S)=>{const P={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",borderRadius:"10px",background:"var(--bg-secondary)",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontWeight:700,width:"70px",textTransform:"capitalize",color:P[i.difficulty]||"#3b82f6"},children:i.difficulty}),e.jsx("div",{style:{flex:1},children:e.jsx("div",{style:{height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${i.passRate}%`,borderRadius:"4px",background:P[i.difficulty]||"#3b82f6"}})})}),e.jsxs("span",{style:{fontWeight:700,fontSize:"0.85rem",width:"45px",textAlign:"right"},children:[i.avgScore,"%"]}),e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",width:"40px"},children:i.submissions})]},S)})]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(Re,{size:18,color:"#8b5cf6"})," ",t("by_language")]}),I.byLanguage.map((i,S)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",borderRadius:"10px",background:"var(--bg-secondary)",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontWeight:700,width:"90px"},children:i.language}),e.jsx("div",{style:{flex:1},children:e.jsx("div",{style:{height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${i.passRate}%`,borderRadius:"4px",background:ct[S%ct.length]}})})}),e.jsxs("span",{style:{fontWeight:700,fontSize:"0.85rem",width:"45px",textAlign:"right"},children:[i.avgScore,"%"]}),e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",width:"40px"},children:i.submissions})]},S))]})]}),I.topProblems.length>0&&e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(et,{size:18,color:"#ef4444"})," ",t("most_attempted_problems")]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:"#"}),e.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:t("problem")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("type")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("difficulty")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("attempts")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("avg_score")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("pass_rate")})]})}),e.jsx("tbody",{children:I.topProblems.map((i,S)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsx("td",{style:{padding:"0.6rem",fontWeight:700,color:"#3b82f6"},children:S+1}),e.jsx("td",{style:{padding:"0.6rem",fontWeight:600},children:i.title}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center",textTransform:"capitalize"},children:i.type}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.15rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,background:i.difficulty==="easy"?"rgba(16,185,129,0.12)":i.difficulty==="medium"?"rgba(251,191,36,0.12)":"rgba(239,68,68,0.12)",color:i.difficulty==="easy"?"#10b981":i.difficulty==="medium"?"#f59e0b":"#ef4444"},children:i.difficulty})}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:600},children:i.attempts}),e.jsxs("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:700,color:i.avgScore>=70?"#10b981":"#f59e0b"},children:[i.avgScore,"%"]}),e.jsxs("td",{style:{padding:"0.6rem",textAlign:"center"},children:[i.passRate,"%"]})]},S))})]})})]})]}),j==="plagiarism"&&T&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #3b82f6"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:t("total_submissions")}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:800},children:T.stats.totalSubmissions})]}),e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #ef4444"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:t("plagiarism_flags")}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#ef4444"},children:T.stats.plagiarismCount})]}),e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #f59e0b"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:t("plagiarism_rate")}),e.jsxs("div",{style:{fontSize:"2rem",fontWeight:800,color:"#f59e0b"},children:[T.stats.plagiarismRate,"%"]})]}),e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #8b5cf6"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:t("repeat_offenders")}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#8b5cf6"},children:T.repeatOffenders.length})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",style:{color:"#ef4444"},children:[e.jsx(ue,{size:18})," ",t("repeat_offenders")]}),T.repeatOffenders.length>0?T.repeatOffenders.map((i,S)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",borderRadius:"8px",background:"rgba(239,68,68,0.05)",marginBottom:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:i.name}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:i.copiedFrom.slice(0,3).join(", ")})]}),e.jsxs("span",{style:{background:"#ef4444",color:"#fff",padding:"0.2rem 0.6rem",borderRadius:"20px",fontWeight:700,fontSize:"0.8rem"},children:[i.count,"x"]})]},S)):e.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:t("no_offenders")})]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(St,{size:18,color:"#f59e0b"})," ",t("most_copied_problems")]}),T.byProblem.length>0?T.byProblem.map((i,S)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",borderRadius:"8px",background:"var(--bg-secondary)",marginBottom:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:i.title}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"capitalize"},children:i.difficulty})]}),e.jsxs("span",{style:{fontWeight:700,color:"#f59e0b"},children:[i.flaggedCount," flags"]})]},S)):e.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:t("no_data")})]})]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(ze,{size:18,color:"#ef4444"})," ",t("all_flagged_submissions")]}),T.flaggedSubmissions.length>0?e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:t("student")}),e.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:t("problem")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("language")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("score")}),e.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:t("copied_from")}),e.jsx("th",{style:{textAlign:"right",padding:"0.6rem"},children:t("date")})]})}),e.jsx("tbody",{children:T.flaggedSubmissions.slice(0,30).map((i,S)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsx("td",{style:{padding:"0.6rem",fontWeight:600},children:i.studentName}),e.jsx("td",{style:{padding:"0.6rem"},children:i.problemTitle}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:i.language}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:i.score}),e.jsx("td",{style:{padding:"0.6rem",color:"#ef4444"},children:i.copiedFromName||i.copiedFrom}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"right",fontSize:"0.75rem",color:"var(--text-muted)"},children:new Date(i.submittedAt).toLocaleDateString()})]},S))})]})}):e.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:t("no_plagiarism_detected")})]})]}),j==="time-to-solve"&&y&&e.jsxs("div",{children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:y.difficultySummary.map((i,S)=>{const G={easy:{bg:"rgba(16,185,129,0.08)",border:"#10b981"},medium:{bg:"rgba(251,191,36,0.08)",border:"#f59e0b"},hard:{bg:"rgba(239,68,68,0.08)",border:"#ef4444"}}[i.difficulty]||{bg:"rgba(59,130,246,0.08)",border:"#3b82f6"};return e.jsxs("div",{style:{padding:"1.5rem",borderRadius:"16px",background:G.bg,border:`2px solid ${G.border}`},children:[e.jsx("div",{style:{fontWeight:800,fontSize:"1.2rem",textTransform:"capitalize",color:G.border,marginBottom:"1rem"},children:i.difficulty}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:t("problems")}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800},children:i.problems})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:t("avg_time")}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800},children:[i.avgTimeMinutes,"m"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:t("avg_attempts")}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800},children:i.avgAttempts})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:t("solve_rate")}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:G.border},children:[i.avgSolveRate,"%"]})]})]})]},S)})}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(Se,{size:18,color:"#3b82f6"})," ",t("all_problems_metrics")]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:t("problem")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("type")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("difficulty")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("students")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("total_attempts")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("avg_attempts")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("avg_time")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:t("solve_rate")})]})}),e.jsx("tbody",{children:y.problems.map((i,S)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsx("td",{style:{padding:"0.6rem",fontWeight:600},children:i.title}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center",textTransform:"capitalize"},children:i.type}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.15rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,background:i.difficulty==="easy"?"rgba(16,185,129,0.12)":i.difficulty==="medium"?"rgba(251,191,36,0.12)":"rgba(239,68,68,0.12)",color:i.difficulty==="easy"?"#10b981":i.difficulty==="medium"?"#f59e0b":"#ef4444"},children:i.difficulty})}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:i.studentCount}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:i.totalAttempts}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:600},children:i.avgAttempts}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:i.avgTimeMinutes?`${i.avgTimeMinutes}m`:"-"}),e.jsxs("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:700,color:i.solveRate>=70?"#10b981":i.solveRate>=40?"#f59e0b":"#ef4444"},children:[i.solveRate,"%"]})]},S))})]})})]})]}),j==="proctoring"&&x&&x.analytics?e.jsxs("div",{children:[e.jsxs("div",{style:{padding:"1rem",borderRadius:"12px",background:"rgba(59,130,246,0.08)",border:"1px solid rgba(59,130,246,0.3)",marginBottom:"1.5rem"},children:[e.jsx("strong",{style:{color:"#3b82f6"},children:"ðŸ“Š PROCTORING TAB EXPLANATION:"}),e.jsxs("ul",{style:{margin:"0.5rem 0 0 0",paddingLeft:"1.5rem",fontSize:"0.85rem",color:"var(--text-secondary)",lineHeight:"1.6"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Total Sessions"})," = How many exams were taken with proctoring enabled (last 30 days)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Completed"})," = How many exams finished without critical issues"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Flagged"})," = How many exams had violations (tab switches, camera blocked, phone detected, copy attempts)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Avg Score"})," = Average violation intensity (0 = clean, 100 = severe violations)"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #3b82f6"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:"ðŸ“¹ Total Sessions"}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#3b82f6"},children:x.analytics.totalSessions||0}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:"Total exams with proctoring"})]}),e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #10b981"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:"ðŸŸ¢ Completed"}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#10b981"},children:x.analytics.completedSessions||0}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:"Exams completed cleanly"})]}),e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #f59e0b"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:"âš ï¸ Flagged"}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#f59e0b"},children:x.analytics.flaggedSessions||0}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:"Exams with violations"})]}),e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #ef4444"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:"ðŸš¨ Avg Score"}),e.jsxs("div",{style:{fontSize:"2rem",fontWeight:800,color:"#ef4444"},children:[Math.round(x.analytics.averageViolationScore||0),"/100"]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:"0=clean, 100=severe"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(ue,{size:18})," Violations by Type"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"1rem",padding:"0.75rem",borderRadius:"8px",background:"rgba(255,159,64,0.08)"},children:[e.jsx("strong",{children:"What each violation means:"}),e.jsxs("ul",{style:{margin:"0.5rem 0 0 0",paddingLeft:"1.2rem",lineHeight:"1.5"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"TABSWITCHES"})," - Student left exam tab (tried to look at other tabs) = ðŸš¨ Cheating Sign"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"CAMERABLOCKED"})," - Student's camera was covered/blocked = ðŸš¨ Cannot verify identity"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"PHONEDETECTION"})," - Phone detected near desk = ðŸš¨ Could use for cheating"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"COPYPASTE"})," - Tried to copy code = ðŸš¨ Using external code"]})]})]}),x.analytics.violationsByType&&Object.entries(x.analytics.violationsByType).length>0?Object.entries(x.analytics.violationsByType).sort((i,S)=>S[1]-i[1]).map(([i,S],P)=>{const G=["#ef4444","#f59e0b","#3b82f6","#8b5cf6","#06b6d4","#10b981"],V=G[P%G.length];return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",borderRadius:"10px",background:"var(--bg-secondary)",marginBottom:"0.5rem"},children:[e.jsx("div",{style:{flex:1},children:e.jsx("div",{style:{fontWeight:700,fontSize:"0.9rem",textTransform:"uppercase"},children:i})}),e.jsx("div",{style:{height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden",flex:1},children:e.jsx("div",{style:{height:"100%",width:`${Math.min(S/Math.max(...Object.values(x.analytics.violationsByType))*100,100)}%`,borderRadius:"4px",background:V}})}),e.jsx("span",{style:{fontWeight:700,fontSize:"0.85rem",width:"40px",textAlign:"right",color:V},children:S})]},i)}):e.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:"No violations data"})]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(et,{size:18})," Severity Distribution"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"1rem",padding:"0.75rem",borderRadius:"8px",background:"rgba(34,197,94,0.08)"},children:[e.jsx("strong",{children:"Status meanings:"}),e.jsxs("ul",{style:{margin:"0.5rem 0 0 0",paddingLeft:"1.2rem",lineHeight:"1.5"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"âœ… APPROVED"})," - Student exam is clean, no violations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"âš ï¸ REQUIRES_REVIEW"})," - Some violations, admin review needed"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"âŒ REJECTED_FLAGGED"})," - Serious violations, exam flagged for rejection"]})]})]}),x.analytics.severityDistribution?["APPROVED","REQUIRES_REVIEW","REJECTED_FLAGGED"].map((i,S)=>{const P=x.analytics.severityDistribution[i]||0,V=["#10b981","#f59e0b","#ef4444"][S],Z=["âœ…","âš ï¸","âŒ"];return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",borderRadius:"10px",background:"var(--bg-secondary)",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:Z[S]}),e.jsx("div",{style:{flex:1},children:e.jsx("div",{style:{fontWeight:700,fontSize:"0.9rem"},children:i.replace(/_/g," ")})}),e.jsx("div",{style:{height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden",flex:1},children:e.jsx("div",{style:{height:"100%",width:`${P/(x.analytics.totalSessions||1)*100}%`,borderRadius:"4px",background:V}})}),e.jsx("span",{style:{fontWeight:700,fontSize:"0.85rem",width:"40px",textAlign:"right",color:V},children:P})]},i)}):e.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"1rem"},children:"No severity data"})]})]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(bt,{size:18})," Proctoring Summary"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",background:"var(--bg-secondary)"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:"Total Violations"}),e.jsx("div",{style:{fontSize:"1.8rem",fontWeight:800,color:"#ef4444"},children:x.analytics.totalViolations||0})]}),e.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",background:"var(--bg-secondary)"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:"Active Sessions"}),e.jsx("div",{style:{fontSize:"1.8rem",fontWeight:800,color:"#3b82f6"},children:x.analytics.activeSessions||0})]}),e.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",background:"var(--bg-secondary)"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:"Avg Score"}),e.jsx("div",{style:{fontSize:"1.8rem",fontWeight:800,color:"#f59e0b"},children:Math.round(x.analytics.averageViolationScore||0)})]}),e.jsxs("div",{style:{padding:"1rem",borderRadius:"10px",background:"var(--bg-secondary)"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:"Flagged Rate"}),e.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:800,color:"#8b5cf6"},children:[x.analytics.totalSessions?Math.round(x.analytics.flaggedSessions/x.analytics.totalSessions*100):0,"%"]})]})]})]}),e.jsxs("div",{style:{padding:"1rem",borderRadius:"12px",background:"rgba(59,130,246,0.1)",border:"1px solid rgba(59,130,246,0.3)",color:"var(--text-secondary)",fontSize:"0.85rem",marginTop:"1rem"},children:[e.jsx("strong",{style:{color:"#3b82f6"},children:"ðŸ’¡ HOW TO USE THIS TAB:"}),e.jsxs("ul",{style:{margin:"0.5rem 0 0 0",paddingLeft:"1.5rem",lineHeight:"1.6"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Total Sessions:"})," Check if students are taking proctored exams"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Flagged Rate:"})," See what % of exams have violations (higher = more cheating)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Top Violation Type:"})," If CAMERABLOCKED is high, fix camera setup. If TABSWITCHES is high, remind students to stay in exam."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Severity Distribution:"})," See how many exams need review vs. rejection"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Action:"}),' Use "Student Stats" tab to review individual student violations and approve/reject their exams.']})]})]})]}):j==="proctoring"&&!x?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:[e.jsx(bt,{size:40,style:{margin:"0 auto 1rem",opacity:.5}}),e.jsx("p",{children:"Proctoring data loading..."})]}):j==="proctoring"?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:[e.jsx(bt,{size:40,style:{margin:"0 auto 1rem",opacity:.5}}),e.jsx("p",{children:"No proctoring data available yet. Run exams with proctoring enabled to see analytics."})]}):null,j==="student-stats"&&m&&m.students?e.jsxs("div",{children:[e.jsxs("div",{style:{padding:"1rem",borderRadius:"12px",background:"rgba(59,130,246,0.08)",border:"1px solid rgba(59,130,246,0.3)",marginBottom:"1.5rem"},children:[e.jsx("strong",{style:{color:"#3b82f6"},children:"ðŸ‘¥ STUDENT STATS TAB EXPLANATION:"}),e.jsxs("ul",{style:{margin:"0.5rem 0 0 0",paddingLeft:"1.5rem",fontSize:"0.85rem",color:"var(--text-secondary)",lineHeight:"1.6"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Total Students"})," = How many students took proctored exams"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Clean Students"})," = Students with ZERO violations (no cheating signs)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Flagged Students"})," = Students with violations detected (needs review)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Repeat Violators"})," = Students with 2+ flagged exams (serious cases)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Status Badges:"})," âœ… CLEAN = no violations | âš¡ CAUTION = 1 violation | âš ï¸ FLAGGED = multiple violations | ðŸš¨ REPEAT = 2+ violations"]})]})]}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsx("input",{type:"text",placeholder:"ðŸ” Search student name or ID...",value:w,onChange:i=>B(i.target.value),style:{width:"100%",maxWidth:"400px",padding:"0.75rem 1rem",borderRadius:"10px",border:"2px solid var(--border-color)",background:"var(--card-bg)",color:"var(--text-primary)",fontSize:"0.9rem"}})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #3b82f6"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:"ðŸ‘¥ Total Students"}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#3b82f6"},children:m.totalStudents||0}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:"Took proctored exams"})]}),e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #10b981"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:"âœ… Clean Students"}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#10b981"},children:m.students.filter(i=>i.flagged_exams===0).length}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:"Zero violations"})]}),e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #f59e0b"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:"âš ï¸ Flagged Students"}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#f59e0b"},children:m.students.filter(i=>i.flagged_exams>0).length}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:"Has violations"})]}),e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",borderLeft:"4px solid #ef4444"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:600},children:"ðŸš¨ Repeat Violators"}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:800,color:"#ef4444"},children:m.students.filter(i=>i.flagged_exams>=2).length}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:"2+ flagged exams"})]})]}),m.topViolators&&m.topViolators.length>0&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(ue,{size:18})," ðŸš¨ Top 10 Violators"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"1rem",padding:"0.75rem",borderRadius:"8px",background:"rgba(239,68,68,0.08)"},children:[e.jsx("strong",{children:'How to read violation numbers (e.g., "2011"):'}),' First digit = tab switches | Second digit = copy/paste attempts | Third digit = camera blocked | Fourth digit = phone detected. Example: "2011" = 2 tabs + 0 copy + 1 camera + 1 phone']}),m.topViolators.map((i,S)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",borderRadius:"8px",background:"var(--bg-secondary)",marginBottom:"0.5rem"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontWeight:600,fontSize:"0.95rem"},children:[S+1,". ",i.student_name]}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:[i.total_exams," exams | Avg Score: ",i.avg_score,"/100"]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("span",{style:{fontWeight:700,color:"#ef4444"},children:[i.flagged_exams," flagged"]}),e.jsx("span",{style:{padding:"0.3rem 0.8rem",borderRadius:"20px",fontSize:"0.7rem",fontWeight:700,background:i.status.includes("CLEAN")?"rgba(16,185,129,0.2)":i.status.includes("REPEAT")?"rgba(245,158,11,0.2)":"rgba(239,68,68,0.2)",color:i.status.includes("CLEAN")?"#10b981":i.status.includes("REPEAT")?"#f59e0b":"#ef4444"},children:i.status})]})]},S))]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(re,{size:18})," All Students (",w?m.students.filter(i=>i.student_name.toLowerCase().includes(w.toLowerCase())||i.student_id.toLowerCase().includes(w.toLowerCase())).length:m.students.length,")"]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:"Student Name"}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:"Exams"}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:"Flagged"}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:"Pass Rate"}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:"Avg Score"}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:"Violations"}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:"Status"})]})}),e.jsx("tbody",{children:m.students.filter(i=>!w||i.student_name.toLowerCase().includes(w.toLowerCase())||i.student_id.toLowerCase().includes(w.toLowerCase())).map((i,S)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsxs("td",{style:{padding:"0.6rem",fontWeight:600},children:[e.jsx("div",{children:i.student_name}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:i.student_id})]}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:600},children:i.total_exams}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:600,color:i.flagged_exams>0?"#ef4444":"#10b981"},children:i.flagged_exams}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:e.jsxs("span",{style:{padding:"0.15rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,background:i.pass_rate>=80?"rgba(16,185,129,0.12)":i.pass_rate>=50?"rgba(251,191,36,0.12)":"rgba(239,68,68,0.12)",color:i.pass_rate>=80?"#10b981":i.pass_rate>=50?"#f59e0b":"#ef4444"},children:[i.pass_rate,"%"]})}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:700,color:i.avg_score>=60?"#ef4444":i.avg_score>=30?"#f59e0b":"#10b981"},children:i.avg_score}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:600},children:i.total_violations}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.3rem 0.8rem",borderRadius:"6px",fontSize:"0.7rem",fontWeight:700,background:i.status.includes("CLEAN")?"rgba(16,185,129,0.15)":i.status.includes("REPEAT")?"rgba(245,158,11,0.15)":i.status.includes("DEFINITE")?"rgba(239,68,68,0.15)":"rgba(59,130,246,0.15)",color:i.status.includes("CLEAN")?"#10b981":i.status.includes("REPEAT")?"#f59e0b":i.status.includes("DEFINITE")?"#ef4444":"#3b82f6"},children:i.status})})]},S))})]})})]}),e.jsxs("div",{style:{padding:"1rem",borderRadius:"12px",background:"rgba(59,130,246,0.1)",border:"1px solid rgba(59,130,246,0.3)",color:"var(--text-secondary)",fontSize:"0.85rem",marginTop:"1rem"},children:[e.jsx("strong",{style:{color:"#3b82f6"},children:"ðŸ’¡ Understanding Student Data:"}),e.jsxs("ul",{style:{margin:"0.5rem 0 0 0",paddingLeft:"1.5rem",lineHeight:"1.6"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Violations Code:"})," 4-digit number (e.g., 2011) = Tabs | Copy | Camera | Phone counts"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Status Meanings:"})," âœ… CLEAN (0 violations) | âš¡ CAUTION (1 violation) | âš ï¸ FLAGGED (multiple violations) | ðŸš¨ REPEAT VIOLATOR (2+ flagged exams)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Avg Score:"})," 0-30 = low violations | 30-60 = medium | 60+ = serious violations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Action:"})," Review âš ï¸ and ðŸš¨ students. Approve clean exams, reject serious violations."]})]})]})]}):j==="student-stats"&&!m?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:[e.jsx(re,{size:40,style:{margin:"0 auto 1rem",opacity:.5}}),e.jsx("p",{children:"Student statistics loading..."})]}):j==="student-stats"?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:[e.jsx(re,{size:40,style:{margin:"0 auto 1rem",opacity:.5}}),e.jsx("p",{children:"No student proctoring data available yet. Students need to complete exams with proctoring enabled."})]}):null,j==="export"&&e.jsx("div",{children:e.jsxs("div",{className:"dashboard-panel",style:{textAlign:"center",padding:"3rem 2rem"},children:[e.jsx(Ze,{size:56,color:"var(--primary)",style:{marginBottom:"1rem"}}),e.jsx("h3",{style:{margin:"0 0 0.5rem",fontSize:"1.5rem"},children:t("export_platform_analytics")}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:t("export_platform_description")}),e.jsxs("div",{style:{display:"flex",gap:"1.5rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>Q("csv"),disabled:h,style:{padding:"1rem 2.5rem",borderRadius:"14px",border:"none",cursor:"pointer",background:"linear-gradient(135deg, #059669, #10b981)",color:"#fff",fontWeight:700,fontSize:"1rem",opacity:h?.6:1,display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"0 4px 15px rgba(16,185,129,0.3)"},children:[e.jsx(De,{size:20})," ",t("download_csv")]}),e.jsxs("button",{onClick:()=>Q("json"),disabled:h,style:{padding:"1rem 2.5rem",borderRadius:"14px",border:"none",cursor:"pointer",background:"linear-gradient(135deg, #1e40af, #3b82f6)",color:"#fff",fontWeight:700,fontSize:"1rem",opacity:h?.6:1,display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"0 4px 15px rgba(59,130,246,0.3)"},children:[e.jsx(Re,{size:20})," ",t("download_json")]})]})]})})]})}export{ci as default};
