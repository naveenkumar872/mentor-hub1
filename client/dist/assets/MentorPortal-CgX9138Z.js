import{c as Xe,r as o,j as e,X as oe,u as Ke,e as Ee,f as Ze,B as Fe,M as et,h as tt,i as Y,S as Qe}from"./index-CldpBSC-.js";import{s as ge,T as ee,A as se,c as je,b as J,a as w,g as st,h as rt,p as at,n as Ae,S as it,r as lt,_ as ve,d as we,t as Te,e as de,q as Ue,u as nt,v as ot,U as X,F as ue,l as re,a1 as Le,R as $e,w as dt,X as ct,Y as mt,y as _e,z as pt,P as xt,I as gt,J as ht,B as Ce,m as ke,W as ne,$ as ut,a0 as bt,k as We,D as Be,Z as ft,j as yt}from"./Portal-Cg5WPEZp.js";import{I as jt,S as vt,F as Se,L as St,P as Ne,A as qe,T as kt,a as wt}from"./LiveMonitoring-DlaM9E3u.js";import{M as Ve,C as Ct}from"./message-circle-DNgoUMZV.js";const Nt=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Pe=Xe("medal",Nt);function zt({user:s}){const[r,$]=o.useState([]),[L,f]=o.useState([]),[_,m]=o.useState(!1),[C,N]=o.useState(new Set),[k,n]=o.useState(0);o.useEffect(()=>(ge.joinMonitoring(s.id,"mentor"),m(!0),ge.onMonitoringConnected(d=>{console.log("âœ… Joined live monitoring:",d)}),ge.onLiveUpdate(d=>{$(S=>[d,...S.slice(0,49)]),N(S=>{const i=new Set(S);return d.type==="submission_started"?(i.add(d.studentId),console.log(`ðŸ“Š Student ${d.studentName} started - Total working: ${i.size}`)):d.type==="submission_completed"&&(i.delete(d.studentId),console.log(`âœ… Student ${d.studentName} completed - Total working: ${i.size}`)),i})}),ge.onLiveAlert(d=>{f(S=>[d,...S.slice(0,29)]),n(S=>S+1)}),()=>{ge.disconnect(),m(!1)}),[s.id]);const x=d=>{f(S=>S.filter((i,j)=>j!==d))},y=d=>{switch(d){case"submission_started":return e.jsx(se,{className:"w-4 h-4 text-blue-500"});case"submission_completed":return e.jsx(J,{className:"w-4 h-4 text-green-500"});case"progress_update":return e.jsx(je,{className:"w-4 h-4 text-yellow-500"});case"test_failed":return e.jsx(ee,{className:"w-4 h-4 text-orange-500"});default:return e.jsx(se,{className:"w-4 h-4 text-gray-500"})}},A=d=>new Date(d).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return e.jsxs("div",{className:"live-monitoring-container",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"ðŸ“Š Live Student Monitoring"}),e.jsxs("div",{className:"status-bar",children:[e.jsxs("div",{className:`status-item ${_?"active":"inactive"}`,children:[e.jsx("div",{className:"status-dot"}),e.jsx("span",{children:_?"Live Monitoring Active":"Not Monitoring"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:C.size}),e.jsx("span",{className:"ml-2",children:"Students Working"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"font-semibold text-red-600",children:k}),e.jsx("span",{className:"ml-2",children:"Alerts"})]})]}),e.jsxs("div",{className:"flex gap-6 mt-6",children:[e.jsxs("div",{className:"flex-1 max-w-md",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ee,{size:20,className:"text-red-500"}),"Proctoring Alerts"]}),e.jsx("div",{className:"alerts-list",children:L.length===0?e.jsx("div",{className:"empty-state",children:"No alerts"}):L.map((d,S)=>e.jsxs("div",{className:`alert-item severity-${d.severity}`,children:[e.jsxs("div",{className:"alert-header",children:[e.jsx("span",{className:"font-semibold",children:d.studentName||`Student ${d.studentId}`}),e.jsx("button",{className:"dismiss-btn",onClick:()=>x(S),title:"Dismiss",children:e.jsx(oe,{size:16})})]}),e.jsxs("div",{className:"alert-body",children:[e.jsx("div",{className:"violation-type",children:d.violationType.replace(/_/g," ").toUpperCase()}),e.jsx("div",{className:"severity-badge",children:d.severity.toUpperCase()})]}),e.jsx("div",{className:"alert-time",children:A(d.timestamp)}),d.requiresAction&&e.jsx("div",{className:"requires-action",children:"âš ï¸ Requires immediate action"})]},S))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(se,{size:20,className:"text-blue-500"}),"Live Activity Feed"]}),e.jsx("div",{className:"updates-list",children:r.length===0?e.jsx("div",{className:"empty-state",children:"Waiting for activity..."}):r.map((d,S)=>e.jsxs("div",{className:`update-item type-${d.type}`,children:[e.jsx("div",{className:"update-icon",children:y(d.type)}),e.jsx("div",{className:"update-content",children:e.jsxs("div",{className:"update-title",children:[d.type==="submission_started"&&e.jsxs("span",{children:[e.jsx("strong",{children:d.studentName||`Student ${d.studentId}`})," started ",d.problemTitle,d.isProctored&&e.jsx("span",{className:"badge-proctored",children:"Proctored"})]}),d.type==="submission_completed"&&e.jsxs("span",{children:[e.jsx("strong",{children:d.studentName||`Student ${d.studentId}`})," completed ",d.problemTitle,e.jsx("span",{className:`badge-status status-${d.status}`,children:d.status.toUpperCase()}),d.score!==void 0&&e.jsxs("span",{className:"badge-score",children:["Score: ",d.score,"%"]})]}),d.type==="progress_update"&&e.jsxs("span",{children:[e.jsx("strong",{children:d.studentName||`Student ${d.studentId}`})," - ",d.problemId,e.jsxs("span",{className:"badge-progress",children:[d.progress,"% complete"]})]}),d.type==="test_failed"&&e.jsxs("span",{children:[e.jsx("strong",{children:d.studentName||`Student ${d.studentId}`})," - Test failed: ",d.testname]})]})}),e.jsx("div",{className:"update-time",children:A(d.timestamp)})]},S))})]})]})]})}const ye="http://localhost:3000/api",At={background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",transition:"all 0.3s ease"},Me={width:"100%",padding:"0.7rem 1rem",borderRadius:"10px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"var(--text)",fontSize:"0.85rem",outline:"none",boxSizing:"border-box"},ze={padding:"0.5rem 1rem",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",color:"white",fontWeight:600,cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"0.4rem"},De={...ze,background:"rgba(59,130,246,0.1)",color:"#3b82f6",border:"1px solid rgba(59,130,246,0.3)"},he={suggestion:{color:"#3b82f6",icon:jt,label:"Suggestion"},issue:{color:"#ef4444",icon:Ct,label:"Issue"},praise:{color:"#10b981",icon:J,label:"Praise"},question:{color:"#f59e0b",icon:Ve,label:"Question"}};function Tt({submissionId:s,code:r,mentorId:$,studentId:L,readOnly:f=!1}){const[_,m]=o.useState([]),[C,N]=o.useState(null),[k,n]=o.useState({comment:"",feedbackType:"suggestion"}),[x,y]=o.useState(null),[A,d]=o.useState(new Set),[S,i]=o.useState(""),[j,l]=o.useState(!1),g=o.useCallback(async()=>{if(s){l(!0);try{const u=await w.get(`${ye}/feedback/submission/${s}`);m(u.data.data||[]);const W=new Set;(u.data.data||[]).forEach(B=>W.add(B.line_number)),d(W)}catch(u){console.error(u)}l(!1)}},[s]);o.useEffect(()=>{g()},[g]);const E=async u=>{if(k.comment.trim())try{await w.post(`${ye}/feedback`,{submissionId:s,mentorId:$,studentId:L,lineNumber:u,comment:k.comment,feedbackType:k.feedbackType}),N(null),n({comment:"",feedbackType:"suggestion"}),g()}catch(W){console.error(W)}},c=async u=>{try{await w.put(`${ye}/feedback/${u}`,{comment:k.comment,feedbackType:k.feedbackType}),y(null),n({comment:"",feedbackType:"suggestion"}),g()}catch(W){console.error(W)}},z=async u=>{try{await w.delete(`${ye}/feedback/${u}`),g()}catch(W){console.error(W)}},p=u=>{y(u.id),n({comment:u.comment,feedbackType:u.feedback_type})},R=(r||"").split(`
`),M={};_.filter(u=>!S||u.feedback_type===S).forEach(u=>{M[u.line_number]||(M[u.line_number]=[]),M[u.line_number].push(u)});const ae=u=>{d(W=>{const B=new Set(W);return B.has(u)?B.delete(u):B.add(u),B})},F=_.length,q=_.reduce((u,W)=>(u[W.feedback_type]=(u[W.feedback_type]||0)+1,u),{});return j&&_.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("div",{className:"loading-spinner"})}):e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:Object.entries(he).map(([u,W])=>{const B=W.icon,V=q[u]||0;return e.jsxs("button",{onClick:()=>i(S===u?"":u),style:{padding:"0.3rem 0.7rem",borderRadius:"20px",border:`1px solid ${S===u?W.color:"var(--border-color)"}`,background:S===u?`${W.color}15`:"transparent",color:S===u?W.color:"var(--text-muted)",cursor:"pointer",fontSize:"0.7rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.3rem"},children:[e.jsx(B,{size:12})," ",W.label," (",V,")"]},u)})}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginLeft:"auto"},children:[F," total comments"]})]}),e.jsx("div",{style:{...At,padding:0,overflow:"hidden",fontFamily:"'Fira Code', 'Cascadia Code', 'Consolas', monospace",fontSize:"0.8rem"},children:R.map((u,W)=>{const B=W+1,V=M[B]||[],Q=V.length>0,a=A.has(B);return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.03)",background:Q?"rgba(59,130,246,0.04)":"transparent",position:"relative"},onMouseEnter:h=>{Q||(h.currentTarget.style.background="rgba(255,255,255,0.02)")},onMouseLeave:h=>{Q||(h.currentTarget.style.background="transparent")},children:[e.jsx("div",{style:{width:"50px",padding:"0.2rem 0.5rem",textAlign:"right",color:"var(--text-muted)",userSelect:"none",borderRight:`2px solid ${Q?"#3b82f6":"transparent"}`,fontSize:"0.7rem",lineHeight:"1.6",flexShrink:0},children:B}),e.jsx("pre",{style:{margin:0,padding:"0.2rem 0.75rem",flex:1,lineHeight:"1.6",overflow:"hidden",whiteSpace:"pre",color:"var(--text)"},children:u||" "}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.3rem",paddingRight:"0.5rem",flexShrink:0},children:[Q&&e.jsxs("button",{onClick:()=>ae(B),style:{background:"transparent",border:"none",color:"#3b82f6",cursor:"pointer",padding:"0.15rem",display:"flex",alignItems:"center",gap:"0.2rem",fontSize:"0.65rem"},children:[e.jsx(Ve,{size:12})," ",V.length,a?e.jsx(st,{size:10}):e.jsx(rt,{size:10})]}),!f&&e.jsx("button",{onClick:()=>{N(C===B?null:B),n({comment:"",feedbackType:"suggestion"})},style:{background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer",padding:"0.15rem",opacity:.5},onMouseEnter:h=>h.currentTarget.style.opacity=1,onMouseLeave:h=>h.currentTarget.style.opacity=.5,children:e.jsx("span",{style:{fontSize:"1rem",lineHeight:1},children:"+"})})]})]}),Q&&a&&V.map(h=>{const I=he[h.feedback_type]||he.suggestion,U=I.icon,ie=x===h.id;return e.jsx("div",{style:{marginLeft:"52px",padding:"0.6rem 1rem",borderLeft:`3px solid ${I.color}`,background:`${I.color}08`,borderBottom:"1px solid var(--border-color)"},children:ie?e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:Object.entries(he).map(([H,D])=>e.jsx("button",{onClick:()=>n(K=>({...K,feedbackType:H})),style:{padding:"0.2rem 0.5rem",borderRadius:"12px",border:`1px solid ${k.feedbackType===H?D.color:"var(--border-color)"}`,background:k.feedbackType===H?`${D.color}20`:"transparent",color:k.feedbackType===H?D.color:"var(--text-muted)",cursor:"pointer",fontSize:"0.65rem",fontWeight:600},children:D.label},H))}),e.jsx("textarea",{value:k.comment,onChange:H=>n(D=>({...D,comment:H.target.value})),style:{...Me,fontSize:"0.8rem",minHeight:"60px",resize:"vertical"}}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{y(null),n({comment:"",feedbackType:"suggestion"})},style:{...De,padding:"0.3rem 0.8rem",fontSize:"0.7rem"},children:"Cancel"}),e.jsxs("button",{onClick:()=>c(h.id),style:{...ze,padding:"0.3rem 0.8rem",fontSize:"0.7rem"},children:[e.jsx(at,{size:12})," Save"]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",marginBottom:"0.3rem"},children:[e.jsx(U,{size:12,color:I.color}),e.jsx("span",{style:{fontSize:"0.65rem",fontWeight:600,color:I.color,textTransform:"uppercase",letterSpacing:"0.05em"},children:I.label}),e.jsxs("span",{style:{fontSize:"0.65rem",color:"var(--text-muted)",marginLeft:"auto"},children:[h.mentor_name||h.mentor_id," â€¢ ",new Date(h.created_at).toLocaleDateString()]})]}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text)",lineHeight:1.5,fontFamily:"inherit",whiteSpace:"pre-wrap"},children:h.comment}),!f&&e.jsxs("div",{style:{display:"flex",gap:"0.4rem",marginTop:"0.4rem"},children:[e.jsxs("button",{onClick:()=>p(h),style:{background:"transparent",border:"none",color:"#3b82f6",cursor:"pointer",fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"0.2rem"},children:[e.jsx(vt,{size:10})," Edit"]}),e.jsxs("button",{onClick:()=>z(h.id),style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"0.2rem"},children:[e.jsx(Ae,{size:10})," Delete"]})]})]})},h.id)}),C===B&&e.jsxs("div",{style:{marginLeft:"52px",padding:"0.75rem 1rem",background:"rgba(59,130,246,0.06)",borderLeft:"3px solid #3b82f6",borderBottom:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:Object.entries(he).map(([h,I])=>e.jsx("button",{onClick:()=>n(U=>({...U,feedbackType:h})),style:{padding:"0.2rem 0.5rem",borderRadius:"12px",border:`1px solid ${k.feedbackType===h?I.color:"var(--border-color)"}`,background:k.feedbackType===h?`${I.color}20`:"transparent",color:k.feedbackType===h?I.color:"var(--text-muted)",cursor:"pointer",fontSize:"0.65rem",fontWeight:600},children:I.label},h))}),e.jsx("textarea",{value:k.comment,onChange:h=>n(I=>({...I,comment:h.target.value})),placeholder:`Add feedback for line ${B}...`,style:{...Me,fontSize:"0.8rem",minHeight:"60px",resize:"vertical"},autoFocus:!0}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>N(null),style:{...De,padding:"0.3rem 0.8rem",fontSize:"0.7rem"},children:"Cancel"}),e.jsxs("button",{onClick:()=>E(B),style:{...ze,padding:"0.3rem 0.8rem",fontSize:"0.7rem"},children:[e.jsx(it,{size:12})," Add"]})]})]})]},B)})})]})}const T="http://localhost:3000/api",le=["#3b82f6","#8b5cf6","#06b6d4","#10b981","#f59e0b"];function qt(){const{user:s}=Ke(),{t:r}=Ee(),$=Ze(),[L,f]=o.useState(""),[_,m]=o.useState(""),[C,N]=o.useState(0);o.useEffect(()=>{const n=s?.id||s?.userId;if(!n)return;const x=async()=>{try{const A=await w.get(`${T}/messages/unread/${n}`);N(A.data.unreadCount||0)}catch{}};x();const y=setInterval(x,15e3);return()=>clearInterval(y)},[s]),o.useEffect(()=>{switch($.pathname.split("/").pop()){case"upload-tasks":f(r("upload_ml_tasks")),m(r("create_ml_tasks_subtitle"));break;case"upload-problems":f(r("upload_problems")),m(r("create_problems_subtitle"));break;case"aptitude-tests":f(r("aptitude_tests")),m("Manage and assign aptitude tests to students");break;case"global-tests":f(r("global_complete_tests")),m("Manage and assign comprehensive tests to students");break;case"skill-tests":f("Skill Tests"),m("Manage and assign skill assessments to students");break;case"leaderboard":f(r("leaderboard")),m(r("student_rankings"));break;case"all-submissions":f(r("all_submissions")),m(r("review_student_work"));break;case"live-monitoring":f(r("live_student_monitoring")),m(r("realtime_activity_subtitle"));break;case"analytics":f(r("analytics")),m(r("analytics_dashboard_subtitle"));break;case"messaging":f("Direct Messaging"),m("Chat with your students");break;default:f(r("dashboard")),m(r("welcome_back_name",{name:s?.name||""}))}},[$,s,r]);const k=[{path:"/mentor",label:r("dashboard"),icon:e.jsx(lt,{size:20})},{label:"Content Management",icon:e.jsx(Se,{size:20}),defaultExpanded:!1,children:[{path:"/mentor/upload-tasks",label:r("upload_ml_tasks"),icon:e.jsx(ve,{size:20})},{path:"/mentor/upload-problems",label:r("upload_problems"),icon:e.jsx(Se,{size:20})},{path:"/mentor/aptitude-tests",label:r("aptitude_tests"),icon:e.jsx(we,{size:20})},{path:"/mentor/global-tests",label:r("global_complete_tests"),icon:e.jsx(Te,{size:20})},{path:"/mentor/skill-tests",label:"Skill Tests",icon:e.jsx(Fe,{size:20})}]},{label:"Monitoring",icon:e.jsx(se,{size:20}),defaultExpanded:!1,children:[{path:"/mentor/leaderboard",label:r("leaderboard"),icon:e.jsx(de,{size:20})},{path:"/mentor/all-submissions",label:r("all_submissions"),icon:e.jsx(St,{size:20})},{path:"/mentor/analytics",label:r("analytics"),icon:e.jsx(Ue,{size:20})},{path:"/mentor/live-monitoring",label:r("live_monitoring"),icon:e.jsx(se,{size:20})}]},{path:"/mentor/messaging",label:"Messaging",icon:e.jsx(et,{size:20}),badge:C}];return e.jsx(nt,{navItems:k,title:L,subtitle:_,children:e.jsxs(tt,{children:[e.jsx(Y,{path:"/",element:e.jsx(Lt,{user:s})}),e.jsx(Y,{path:"/upload-tasks",element:e.jsx(It,{user:s})}),e.jsx(Y,{path:"/upload-problems",element:e.jsx(Rt,{user:s})}),e.jsx(Y,{path:"/aptitude-tests",element:e.jsx(Pt,{user:s})}),e.jsx(Y,{path:"/global-tests",element:e.jsx(Mt,{user:s})}),e.jsx(Y,{path:"/skill-tests",element:e.jsx(Dt,{user:s})}),e.jsx(Y,{path:"/leaderboard",element:e.jsx($t,{user:s})}),e.jsx(Y,{path:"/all-submissions",element:e.jsx(_t,{user:s})}),e.jsx(Y,{path:"/analytics",element:e.jsx(Bt,{user:s})}),e.jsx(Y,{path:"/live-monitoring",element:e.jsx(zt,{user:s})}),e.jsx(Y,{path:"/messaging",element:e.jsx(ot,{currentUser:s})})]})})}function Lt({user:s}){const[r,$]=o.useState(null),[L,f]=o.useState(!0);o.useEffect(()=>{w.get(`${T}/analytics/mentor/${s.id}`).then(m=>{$(m.data),f(!1)}).catch(m=>f(!1))},[s.id]);const _=m=>{if(!m)return"Never";const C=new Date(m),k=new Date-C,n=Math.floor(k/6e4),x=Math.floor(n/60),y=Math.floor(x/24);return n<1?"Just now":n<60?`${n}m ago`:x<24?`${x}h ago`:y<7?`${y}d ago`:C.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return L?e.jsx("div",{className:"loading-spinner"}):r?e.jsxs("div",{className:"dashboard-container animate-fadeIn",children:[e.jsxs("div",{className:"dashboard-stats-grid",style:{gridTemplateColumns:"repeat(6, 1fr)"},children:[e.jsx("div",{className:"dashboard-stat-card stat-card-blue",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #1e40af, #3b82f6)"},children:e.jsx(X,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:r.totalStudents}),e.jsx("div",{className:"stat-label-text",children:"Students"})]})]})}),e.jsx("div",{className:"dashboard-stat-card stat-card-purple",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #6d28d9, #8b5cf6)"},children:e.jsx(ue,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:r.taskSubmissions||0}),e.jsx("div",{className:"stat-label-text",children:"Task Subs"})]})]})}),e.jsx("div",{className:"dashboard-stat-card stat-card-emerald",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #059669, #10b981)"},children:e.jsx(re,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:r.codeSubmissions||0}),e.jsx("div",{className:"stat-label-text",children:"Code Subs"})]})]})}),e.jsx("div",{className:"dashboard-stat-card stat-card-pink",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #be185d, #ec4899)"},children:e.jsx(Fe,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:r.aptitudeSubmissions||0}),e.jsx("div",{className:"stat-label-text",children:"Aptitude"})]})]})}),e.jsx("div",{className:"dashboard-stat-card stat-card-green",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #047857, #10b981)"},children:e.jsx(J,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsxs("div",{className:"stat-number",children:[r.avgScore,"%"]}),e.jsx("div",{className:"stat-label-text",children:"Avg Score"})]})]})}),e.jsx("div",{className:"dashboard-stat-card stat-card-orange",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #c2410c, #f97316)"},children:e.jsx(Ue,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:r.totalTasks+r.totalProblems}),e.jsx("div",{className:"stat-label-text",children:"Content"})]})]})})]}),e.jsxs("div",{className:"mentor-charts-grid",children:[e.jsxs("div",{className:"dashboard-panel mentor-chart-large",children:[e.jsx("div",{className:"chart-header",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"panel-title",style:{marginBottom:"0.25rem"},children:[e.jsx(Le,{size:18,color:"#8b5cf6"})," Group Submission Trends"]}),e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",margin:0},children:"Last 7 days mentee activity"})]})}),e.jsx("div",{style:{width:"100%",height:"280px",marginTop:"1rem"},children:e.jsx($e,{children:e.jsxs(dt,{data:r.submissionTrends,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorCountMentor",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})}),e.jsx(ct,{dataKey:"date",stroke:"var(--text-muted)",fontSize:12,axisLine:!1,tickLine:!1}),e.jsx(mt,{stroke:"var(--text-muted)",fontSize:12,axisLine:!1,tickLine:!1}),e.jsx(_e,{contentStyle:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},itemStyle:{color:"#8b5cf6"},labelStyle:{color:"var(--text)"}}),e.jsx(pt,{type:"monotone",dataKey:"count",stroke:"#8b5cf6",strokeWidth:3,fillOpacity:1,fill:"url(#colorCountMentor)"})]})})})]}),e.jsxs("div",{className:"dashboard-panel mentor-chart-small",children:[e.jsx("div",{className:"chart-header",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"panel-title",style:{marginBottom:"0.25rem"},children:[e.jsx(re,{size:18,color:"#3b82f6"})," Language Usage"]}),e.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",margin:0},children:"Mentee preference"})]})}),e.jsxs("div",{style:{width:"100%",height:"280px",marginTop:"1rem"},children:[e.jsx($e,{children:e.jsxs(xt,{children:[e.jsx(gt,{data:r.languageStats,cx:"50%",cy:"50%",innerRadius:65,outerRadius:90,paddingAngle:4,dataKey:"value",stroke:"none",children:r.languageStats.map((m,C)=>e.jsx(ht,{fill:le[C%le.length]},`cell-${C}`))}),e.jsx(_e,{contentStyle:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px"},itemStyle:{color:"var(--text)"}})]})}),e.jsx("div",{className:"language-legend",children:r.languageStats.slice(0,4).map((m,C)=>e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot",style:{background:le[C]}}),e.jsx("span",{className:"legend-text",children:m.name})]},m.name))})]})]})]}),e.jsxs("div",{className:"mentor-bottom-grid",children:[e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsxs("h3",{className:"panel-title",style:{margin:0},children:[e.jsx(X,{size:18,color:"#3b82f6"})," My Students"]}),e.jsx("span",{className:"student-count-badge",children:r.allocatedStudents?.length||0})]}),e.jsx("div",{className:"students-list",children:r.allocatedStudents&&r.allocatedStudents.length>0?r.allocatedStudents.map((m,C)=>e.jsxs("div",{className:"student-item",children:[e.jsx("div",{className:"student-avatar",style:{background:`linear-gradient(135deg, ${le[C%le.length]}, ${le[(C+1)%le.length]})`},children:m.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"student-info",children:[e.jsx("div",{className:"student-name",children:m.name}),e.jsxs("div",{className:"student-meta",children:[e.jsxs("span",{children:[e.jsx(Ce,{size:12})," ",m.tasksCompleted," tasks"]}),e.jsxs("span",{children:[e.jsx(re,{size:12})," ",m.problemsCompleted," problems"]})]})]}),e.jsxs("div",{className:"student-score-badge",style:{background:m.avgScore>=70?"rgba(16, 185, 129, 0.15)":m.avgScore>=40?"rgba(251, 191, 36, 0.15)":"rgba(239, 68, 68, 0.15)",color:m.avgScore>=70?"#10b981":m.avgScore>=40?"#fbbf24":"#ef4444"},children:[m.avgScore,"%"]})]},m.id)):e.jsxs("div",{className:"empty-state-small",children:[e.jsx(X,{size:32,color:"var(--text-muted)"}),"No students allocated"]})})]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{className:"panel-title",style:{margin:0},children:[e.jsx(se,{size:18,color:"#8b5cf6"})," Recent Activity"]})}),e.jsx("div",{className:"submissions-list",children:r.recentActivity&&r.recentActivity.length>0?r.recentActivity.map((m,C)=>e.jsxs("div",{className:"submission-item",children:[e.jsx("div",{className:`activity-status-dot ${m.status}`}),e.jsxs("div",{className:"submission-info",children:[e.jsx("div",{className:"submission-title",children:m.studentName}),e.jsxs("div",{className:"submission-meta",children:[e.jsx(je,{size:12})," ",_(m.time)]})]}),e.jsxs("span",{className:`submission-status ${m.status}`,children:[m.score,"%"]})]},m.id)):e.jsxs("div",{className:"empty-state-small",children:[e.jsx(se,{size:32,color:"var(--text-muted)"}),"No recent activity"]})})]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{className:"panel-title",style:{margin:0},children:[e.jsx(de,{size:18,color:"#fbbf24"})," Top Performers"]})}),e.jsx("div",{className:"leaderboard-list",children:r.menteePerformance&&r.menteePerformance.length>0?r.menteePerformance.map((m,C)=>e.jsxs("div",{className:"leaderboard-item",children:[e.jsx("div",{className:`rank-badge rank-${C+1}`,children:C+1}),e.jsxs("div",{className:"leaderboard-info",children:[e.jsx("div",{className:"leaderboard-name",children:m.name}),e.jsxs("div",{className:"leaderboard-stats",children:[m.count," submissions"]})]}),e.jsxs("div",{className:`leaderboard-score rank-${C+1}-score`,children:[m.score,"%"]})]},C)):e.jsxs("div",{className:"empty-state-small",children:[e.jsx(de,{size:32,color:"var(--text-muted)"}),"No performers yet"]})})]})]})]}):e.jsx("div",{children:"Error loading stats"})}function It({user:s}){const[r,$]=o.useState([]),[L,f]=o.useState([]),[_,m]=o.useState(!0),[C,N]=o.useState(!1),[k,n]=o.useState(!1),x=o.useRef(null),[y,A]=o.useState({title:"",type:"machine_learning",difficulty:"medium",description:"",requirements:"",deadline:""}),[d,S]=o.useState(!1),[i,j]=o.useState([]),[l,g]=o.useState([]),[E,c]=o.useState(null),[z,p]=o.useState(""),R=a=>{A({title:a.title||"",type:a.type||"machine_learning",difficulty:a.difficulty||"medium",description:a.description||"",requirements:a.requirements||"",deadline:y.deadline}),N(!1)},M=async()=>{try{const[a,h]=await Promise.all([w.get(`${T}/tasks?mentorId=${s.id}`),w.get(`${T}/mentors/${s.id}/students`)]);$(Array.isArray(a.data)?a.data:a.data?.data||[]),f(h.data),m(!1)}catch{m(!1)}};o.useEffect(()=>{M()},[s.id]);const ae=async()=>{try{const a=await w.get(`${T}/mentors/${s.id}/students`);j(Array.isArray(a.data)?a.data:[])}catch(a){console.error(a)}},F=async a=>{c(a),await ae();try{const h=await w.get(`${T}/tests/${a}/allocated-students`);g(h.data.studentIds||[])}catch(h){console.error(h),g([])}S(!0)},q=a=>{g(h=>h.includes(a)?h.filter(I=>I!==a):[...h,a])},u=async()=>{try{await w.post(`${T}/tests/${E}/allocate-students`,{studentIds:l}),alert("Students assigned successfully!"),S(!1)}catch(a){alert("Error assigning students: "+(a.response?.data?.error||a.message))}},W=async a=>{const h=a.target.files[0];if(h){n(!0);try{const U=(await h.text()).split(`
`).map(D=>D.trim()).filter(Boolean);if(U.length<2){alert("CSV must have header + at least one row");return}const ie=U[0].split(",").map(D=>D.trim().toLowerCase().replace(/['"]/g,""));let H=0;for(let D=1;D<U.length;D++){const K=U[D].match(/(".*?"|[^,]+)/g)?.map(ce=>ce.trim().replace(/^"|"$/g,""))||[],G={};ie.forEach((ce,be)=>G[ce]=K[be]||""),G.title&&(await w.post(`${T}/tasks`,{title:G.title,type:G.type||"machine_learning",difficulty:G.difficulty||"medium",description:G.description||"",requirements:G.requirements||"",deadline:G.deadline||"",mentorId:s.id}),H++)}alert(`Created ${H} tasks from CSV!`),M()}catch(I){alert("CSV upload failed: "+(I.response?.data?.error||I.message))}finally{n(!1),a.target.value=""}}},B=async a=>{a.preventDefault();try{await w.post(`${T}/tasks`,{...y,mentorId:s.id}),A({title:"",type:"machine_learning",difficulty:"medium",description:"",requirements:"",deadline:""}),M()}catch{alert("Error creating task")}},V=async a=>{if(window.confirm("Are you sure you want to delete this task?"))try{await w.delete(`${T}/tasks/${a}`),M()}catch{alert("Error deleting task")}},Q=a=>{const h=a.completedBy?.length||0;return h===0||h>=L.length&&L.length>0};return _?e.jsx("div",{className:"loading-spinner"}):e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"card glass",style:{marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",margin:0},children:[e.jsx(ve,{size:20,className:"text-primary"})," Create New ML Task"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("input",{type:"file",accept:".csv",ref:x,style:{display:"none"},onChange:W}),e.jsxs("button",{type:"button",onClick:()=>x.current?.click(),disabled:k,style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ve,{size:16})," ",k?"Uploading...":"CSV Upload"]}),e.jsxs("button",{type:"button",onClick:()=>N(!0),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Qe,{size:16})," AI Generate"]})]})]}),e.jsxs("form",{onSubmit:B,children:[e.jsx("div",{className:"form-grid",children:e.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[e.jsx("label",{children:"Task Title"}),e.jsx("input",{type:"text",placeholder:"e.g., Sentiment Analysis Project",value:y.title,onChange:a=>A({...y,title:a.target.value}),required:!0})]})}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Task Type"}),e.jsxs("select",{value:y.type,onChange:a=>A({...y,type:a.target.value}),children:[e.jsx("option",{value:"machine_learning",children:"Machine Learning"}),e.jsx("option",{value:"deep_learning",children:"Deep Learning"}),e.jsx("option",{value:"data_science",children:"Data Science"}),e.jsx("option",{value:"nlp",children:"NLP"}),e.jsx("option",{value:"computer_vision",children:"Computer Vision"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Difficulty"}),e.jsxs("select",{value:y.difficulty,onChange:a=>A({...y,difficulty:a.target.value}),children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Deadline (Optional)"}),e.jsx("input",{type:"date",value:y.deadline,onChange:a=>A({...y,deadline:a.target.value})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Task Description"}),e.jsx("textarea",{rows:"4",placeholder:"Describe the task in detail...",value:y.description,onChange:a=>A({...y,description:a.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Requirements (one per line)"}),e.jsx("textarea",{rows:"3",placeholder:`1. Data preprocessing
2. Model training
3. Evaluation`,value:y.requirements,onChange:a=>A({...y,requirements:a.target.value})})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn-reset",onClick:()=>A({title:"",type:"machine_learning",difficulty:"medium",description:"",requirements:"",deadline:""}),children:"Reset"}),e.jsxs("button",{type:"submit",className:"btn-create-new",children:[e.jsx(Ne,{size:16})," Create Task"]})]})]})]}),e.jsxs("div",{className:"card glass",children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"24px"},children:[e.jsx(de,{size:20,style:{color:"#f59e0b"}})," Task Leaderboard"]}),e.jsx("div",{className:"table-container",style:{border:"none"},children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Task Title"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Difficulty"}),e.jsx("th",{children:"Created"}),e.jsx("th",{children:"Completion"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:r.map(a=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:600},children:a.title}),e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:a.type?.replace("_"," ").toUpperCase()||"ML"})}),e.jsx("td",{children:e.jsx("span",{className:`difficulty-badge ${a.difficulty?.toLowerCase()}`,children:a.difficulty})}),e.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(a.createdAt).toLocaleDateString()}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"80px",height:"6px",background:"var(--border-color)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${L.length>0?(a.completedBy?.length||0)/L.length*100:0}%`,height:"100%",background:"linear-gradient(90deg, #10b981, #06b6d4)"}})}),e.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[a.completedBy?.length||0,"/",L.length]})]})}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${a.status}`,children:a.status})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>F(a.id),className:"btn-create-new",style:{padding:"0.4rem 0.8rem",fontSize:"0.75rem",background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6",border:"1px solid rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",gap:"0.3rem"},children:[e.jsx(X,{size:14})," Assign"]}),e.jsx("button",{onClick:()=>V(a.id),disabled:!Q(a),style:{background:Q(a)?"rgba(239, 68, 68, 0.1)":"rgba(148, 163, 184, 0.1)",border:"none",color:Q(a)?"#ef4444":"#64748b",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:Q(a)?"pointer":"not-allowed",fontSize:"0.8rem"},title:Q(a)?"Delete task":"Cannot delete while students are in progress",children:e.jsx(Ae,{size:14})})]})})]},a.id))})]})})]}),e.jsx(qe,{context:"task",isOpen:C,onClose:()=>N(!1),onGenerate:R}),d&&e.jsx("div",{className:"modal-overlay",onClick:()=>{S(!1),p("")},children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),style:{maxWidth:"750px",maxHeight:"85vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid var(--border-color)"},children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(X,{size:20,color:"white"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1.25rem"},children:"Assign Students to Task"}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-muted)"},children:"Select students for this task"})]})]}),e.jsx("button",{onClick:()=>{S(!1),p("")},className:"modal-close",children:e.jsx(oe,{size:20})})]}),e.jsxs("div",{style:{padding:"1rem 1.5rem",background:"var(--bg-secondary)",borderBottom:"1px solid var(--border-color)",display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(ke,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search by name or batch...",value:z,onChange:a=>p(a.target.value),style:{width:"100%",padding:"0.7rem 1rem 0.7rem 2.5rem",borderRadius:"10px",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.9rem"}})]}),e.jsx("button",{onClick:()=>{const a=i.filter(I=>(I.name||I.username||"").toLowerCase().includes(z.toLowerCase())||(I.batch||"").toLowerCase().includes(z.toLowerCase())),h=a.every(I=>l.includes(I.id));g(h?I=>I.filter(U=>!a.map(ie=>ie.id).includes(U)):I=>[...new Set([...I,...a.map(U=>U.id)])])},style:{padding:"0.7rem 1.2rem",borderRadius:"10px",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",whiteSpace:"nowrap"},children:i.filter(a=>(a.name||a.username||"").toLowerCase().includes(z.toLowerCase())||(a.batch||"").toLowerCase().includes(z.toLowerCase())).every(a=>l.includes(a.id))?"Deselect All":"Select All"})]}),e.jsx("div",{className:"modal-body",style:{overflowY:"auto",padding:"1.5rem",background:"var(--bg-primary)"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:i.filter(a=>(a.name||a.username||"").toLowerCase().includes(z.toLowerCase())||(a.batch||"").toLowerCase().includes(z.toLowerCase())).length===0?e.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",opacity:.5},children:[e.jsx(X,{size:48,style:{marginBottom:"1rem",opacity:.2}}),e.jsx("p",{children:"No students found matching your search."})]}):i.filter(a=>(a.name||a.username||"").toLowerCase().includes(z.toLowerCase())||(a.batch||"").toLowerCase().includes(z.toLowerCase())).map(a=>e.jsxs("div",{onClick:()=>q(a.id),style:{padding:"1rem",borderRadius:"1rem",background:l.includes(a.id)?"var(--primary-alpha)":"var(--bg-card)",border:`1.5px solid ${l.includes(a.id)?"var(--primary)":"var(--border-color)"}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.2s",boxShadow:l.includes(a.id)?"0 4px 12px var(--primary-alpha)":"none",textAlign:"left"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:l.includes(a.id)?"var(--primary)":"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:700,color:"white"},children:(a.name||a.username||"S").charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.95rem",color:"var(--text-main)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.name||a.username}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"4px",marginTop:"4px"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:"4px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:a.batch||"No Batch"})})]}),l.includes(a.id)&&e.jsx(J,{size:18,color:"var(--primary)"})]},a.id))})}),e.jsxs("div",{className:"modal-footer",style:{padding:"1.2rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-secondary)"},children:[e.jsxs("div",{style:{fontSize:"0.95rem",color:"var(--text-main)",fontWeight:500},children:[e.jsx("span",{style:{color:"var(--primary)",fontWeight:800,fontSize:"1.1rem"},children:l.length})," students selected"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{className:"btn-reset",onClick:()=>{S(!1),p("")},children:"Cancel"}),e.jsx("button",{className:"btn-create-new",onClick:u,style:{background:"var(--primary)",padding:"0.7rem 2rem",borderRadius:"10px",boxShadow:"0 4px 15px var(--primary-alpha)"},children:"Confirm Assignment"})]})]})]})})]})}function Rt({user:s}){const[r,$]=o.useState([]),[L,f]=o.useState([]),[_,m]=o.useState(!0),[C,N]=o.useState(!1),[k,n]=o.useState(!1),[x,y]=o.useState("coding"),[A,d]=o.useState(!1),S=o.useRef(null),[i,j]=o.useState(null),[l,g]=o.useState({title:"",type:"Coding",language:"Python",difficulty:"Medium",description:"",testInput:"",expectedOutput:"",deadline:"",status:"live",maxAttempts:0,sqlSchema:"",expectedQueryResult:"",enableProctoring:!1,enableVideoAudio:!1,disableCopyPaste:!1,trackTabSwitches:!1,maxTabSwitches:3,enableFaceDetection:!1,detectMultipleFaces:!1,trackFaceLookaway:!1}),[E,c]=o.useState(!1),[z,p]=o.useState([]),[R,M]=o.useState([]),[ae,F]=o.useState(null),[q,u]=o.useState(""),W=l.type==="SQL"||l.language==="SQL",B=t=>{const v=t.type==="SQL"||t.language==="SQL";g({title:t.title||"",type:t.type||"Coding",language:t.language||"Python",difficulty:t.difficulty||"Medium",description:t.description||"",testInput:v?"":t.sampleInput||"",expectedOutput:v?"":t.expectedOutput||"",sqlSchema:v&&(t.sqlSchema||t.schema)||"",expectedQueryResult:v&&(t.expectedQueryResult||t.expectedResult)||"",deadline:l.deadline,status:t.status||"live",maxAttempts:l.maxAttempts,enableProctoring:l.enableProctoring,enableVideoAudio:l.enableVideoAudio,disableCopyPaste:l.disableCopyPaste,trackTabSwitches:l.trackTabSwitches,maxTabSwitches:l.maxTabSwitches,enableFaceDetection:l.enableFaceDetection,detectMultipleFaces:l.detectMultipleFaces,trackFaceLookaway:l.trackFaceLookaway}),n(!1),N(!0)},V=async()=>{try{const[t,v]=await Promise.all([w.get(`${T}/problems?mentorId=${s.id}`),w.get(`${T}/mentors/${s.id}/students`)]);$(Array.isArray(t.data)?t.data:t.data?.data||[]),f(v.data),m(!1)}catch{m(!1)}};o.useEffect(()=>{V()},[s.id]);const Q=async()=>{try{const t=await w.get(`${T}/mentors/${s.id}/students`);p(Array.isArray(t.data)?t.data:[])}catch(t){console.error(t)}},a=async t=>{F(t),await Q();try{const v=await w.get(`${T}/tests/${t}/allocated-students`);M(v.data.studentIds||[])}catch(v){console.error(v),M([])}c(!0)},h=t=>{M(v=>v.includes(t)?v.filter(P=>P!==t):[...v,t])},I=async()=>{try{await w.post(`${T}/problems/${ae}/allocate-students`,{studentIds:R}),alert("Students assigned successfully!"),c(!1)}catch(t){alert("Error assigning students: "+(t.response?.data?.error||t.message))}},U=async t=>{const v=t.target.files[0];if(v){d(!0);try{const Z=(await v.text()).split(`
`).filter(O=>O.trim()).map(O=>O.trim());if(Z.length<2){alert("CSV must have header + at least one row");return}const fe=O=>{const me=[];let b="",te=!1;for(let pe=0;pe<O.length;pe++){const xe=O[pe];xe==='"'?te=!te:xe===","&&!te?(me.push(b.trim()),b=""):b+=xe}return me.push(b.trim()),me},Oe=fe(Z[0]).map(O=>O.toLowerCase());let Re=0;for(let O=1;O<Z.length;O++){if(!Z[O].trim())continue;const me=fe(Z[O]),b={};if(Oe.forEach((Ye,Je)=>b[Ye]=me[Je]||""),!b.title||!b.description)continue;const te=(b.type||"").toUpperCase()==="SQL"||(b.language||"").toUpperCase()==="SQL",pe=()=>b.testinput||b.test_input||b.testinput||b.sample_input||b.sampleinput||b["sample input"]||b["test input"]||"",xe=()=>b.expectedoutput||b.expected_output||b.expectedresult||b.expected_result||b["expected output"]||b["expected result"]||"",He=()=>b.sqlschema||b.sql_schema||b.schema||b["sql schema"]||"",Ge=()=>b.expectedqueryresult||b.expected_query_result||b.expectedresult||b.expected_result||b["expected query result"]||"";await w.post(`${T}/problems`,{title:b.title,type:te?"SQL":b.type||"Coding",language:te?"SQL":b.language||"Python",difficulty:(b.difficulty||"Medium").charAt(0).toUpperCase()+(b.difficulty||"Medium").slice(1).toLowerCase(),description:b.description||"",testInput:pe(),expectedOutput:xe(),sqlSchema:te?He():"",expectedQueryResult:te?Ge():"",maxAttempts:parseInt(b.max_attempts||b.maxattempts||b.attempts)||0,deadline:b.deadline||"",status:b.status||"live",mentorId:s.id}),Re++}alert(`Created ${Re} problems from CSV!`),V()}catch(P){alert("CSV upload failed: "+(P.response?.data?.error||P.message))}finally{d(!1),t.target.value=""}}},ie=async t=>{t.preventDefault();try{await w.post(`${T}/problems`,{...l,mentorId:s.id}),N(!1),g({title:"",type:"Coding",language:"Python",difficulty:"Medium",description:"",testInput:"",expectedOutput:"",deadline:"",status:"live",maxAttempts:0,enableProctoring:!1,enableVideoAudio:!1,disableCopyPaste:!1,trackTabSwitches:!1,maxTabSwitches:3,enableFaceDetection:!1,detectMultipleFaces:!1,trackFaceLookaway:!1}),V()}catch{alert("Error creating problem")}},H=async t=>{if(window.confirm("Are you sure you want to delete this problem?"))try{await w.delete(`${T}/problems/${t}`),V()}catch{alert("Error deleting problem")}},D=async(t,v)=>{try{await w.put(`${T}/problems/${t}`,{maxAttempts:v}),V()}catch(P){console.error("Update max attempts error:",P.response?.data||P.message),alert("Error updating max attempts: "+(P.response?.data?.error||P.message))}},K=t=>{const v=t.completedBy?.length||0;return v===0||v>=L.length&&L.length>0};if(_)return e.jsx("div",{className:"loading-spinner"});const G=r.filter(t=>t.language!=="SQL"&&t.type!=="SQL"),ce=r.filter(t=>t.language==="SQL"||t.type==="SQL"),be=x==="coding"?G:ce;return e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:800,margin:0},children:"Coding Problems"}),e.jsx("p",{style:{color:"var(--text-muted)",margin:"0.25rem 0 0 0"},children:"Manage your problem library (C, C++, Python, Java, SQL)"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsx("input",{type:"file",accept:".csv",ref:S,style:{display:"none"},onChange:U}),e.jsxs("button",{onClick:()=>S.current?.click(),disabled:A,style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ve,{size:18})," ",A?"Uploading...":"CSV Upload"]}),e.jsxs("button",{onClick:()=>n(!0),style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Qe,{size:18})," AI Generate"]}),e.jsxs("button",{onClick:()=>N(!0),className:"btn-create-new",style:{padding:"0.75rem 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ne,{size:20})," Create Manually"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"12px",width:"fit-content"},children:[e.jsxs("button",{onClick:()=>y("coding"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:x==="coding"?"var(--primary)":"transparent",color:x==="coding"?"white":"var(--text-muted)"},children:[e.jsx(re,{size:18}),"Coding Problems",e.jsx("span",{style:{background:x==="coding"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:G.length})]}),e.jsxs("button",{onClick:()=>y("sql"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:x==="sql"?"linear-gradient(135deg, #06b6d4, #0891b2)":"transparent",color:x==="sql"?"white":"var(--text-muted)"},children:[e.jsx(ue,{size:18}),"SQL Problems",e.jsx("span",{style:{background:x==="sql"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:ce.length})]})]}),e.jsxs("div",{className:"card glass",children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"24px"},children:[e.jsx(de,{size:20,style:{color:"#f59e0b"}})," Problem Leaderboard"]}),e.jsx("div",{className:"table-container",style:{border:"none"},children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Problem Title"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Language"}),e.jsx("th",{children:"Difficulty"}),e.jsx("th",{children:"Attempts"}),e.jsx("th",{children:"Created"}),e.jsx("th",{children:"Completion"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:be.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"7",style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:["No ",x==="sql"?"SQL":"coding"," problems found. Create one to get started!"]})}):be.map(t=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:600},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.title,t.proctoring?.enabled&&e.jsxs("span",{style:{fontSize:"0.6rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",fontWeight:700,display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(ne,{size:10})," Proctored"]})]})}),e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:t.type?.toUpperCase()})}),e.jsx("td",{children:e.jsx("span",{style:{fontWeight:500},children:t.language})}),e.jsx("td",{children:e.jsx("span",{className:`difficulty-badge ${t.difficulty?.toLowerCase()}`,children:t.difficulty})}),e.jsxs("td",{style:{fontSize:"0.85rem",color:(t.maxAttempts||t.max_attempts)>0?"#8b5cf6":"var(--text-muted)",cursor:"pointer"},onClick:()=>{const v=prompt("Set max attempts (0 = unlimited):",t.maxAttempts||t.max_attempts||0);v!==null&&D(t.id,parseInt(v)||0)},title:"Click to edit max attempts",children:[(t.maxAttempts||t.max_attempts)>0?`${t.maxAttempts||t.max_attempts}`:"âˆž"," âœï¸"]}),e.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(t.createdAt).toLocaleDateString()}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"80px",height:"6px",background:"var(--border-color)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${L.length>0?(t.completedBy?.length||0)/L.length*100:0}%`,height:"100%",background:"linear-gradient(90deg, #3b82f6, #8b5cf6)"}})}),e.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[t.completedBy?.length||0,"/",L.length]})]})}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${t.status}`,children:t.status})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>j(t),disabled:t.language==="SQL"||t.type==="SQL",style:{background:t.language==="SQL"||t.type==="SQL"?"rgba(100, 116, 139, 0.1)":"rgba(16, 185, 129, 0.1)",border:"none",color:t.language==="SQL"||t.type==="SQL"?"#64748b":"#10b981",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:t.language==="SQL"||t.type==="SQL"?"not-allowed":"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px",opacity:t.language==="SQL"||t.type==="SQL"?.5:1},title:t.language==="SQL"||t.type==="SQL"?"Test cases not available for SQL problems":"Manage Test Cases",children:[e.jsx(Te,{size:14})," Tests"]}),e.jsxs("button",{onClick:()=>a(t.id),className:"btn-create-new",style:{padding:"0.4rem 0.8rem",fontSize:"0.75rem",background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6",border:"1px solid rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",gap:"0.3rem"},children:[e.jsx(X,{size:14})," Assign"]}),e.jsx("button",{onClick:()=>H(t.id),disabled:!K(t),style:{background:K(t)?"rgba(239, 68, 68, 0.1)":"rgba(148, 163, 184, 0.1)",border:"none",color:K(t)?"#ef4444":"#64748b",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:K(t)?"pointer":"not-allowed",fontSize:"0.8rem"},title:K(t)?"Delete problem":"Cannot delete while students are in progress",children:e.jsx(Ae,{size:14})})]})})]},t.id))})]})})]}),E&&e.jsx("div",{className:"modal-overlay",onClick:()=>{c(!1),u("")},children:e.jsxs("div",{className:"modal-content",onClick:t=>t.stopPropagation(),style:{width:"90%",maxWidth:"950px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("div",{className:"modal-header",style:{padding:"2rem 1.5rem",borderBottom:"2px solid var(--border-color)",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(139, 92, 246, 0.05))",flexShrink:0},children:[e.jsxs("div",{className:"modal-title-with-icon",style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"12px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,boxShadow:"0 8px 16px rgba(59, 130, 246, 0.3)"},children:e.jsx(X,{size:24,color:"white"})}),e.jsxs("div",{style:{textAlign:"left",flex:1},children:[e.jsx("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:700,color:"var(--text-main)"},children:"Assign Students"}),e.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem",color:"var(--text-muted)"},children:"Select students to complete this problem"})]})]}),e.jsx("button",{onClick:()=>{c(!1),u("")},className:"modal-close",style:{position:"absolute",right:"1.5rem",top:"1.5rem"},children:e.jsx(oe,{size:22})})]}),e.jsxs("div",{style:{padding:"1.2rem 1.5rem",background:"var(--bg-secondary)",borderBottom:"1px solid var(--border-color)",display:"flex",gap:"0.8rem",alignItems:"center",flexShrink:0},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(ke,{size:19,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--primary)",fontWeight:500}}),e.jsx("input",{type:"text",placeholder:"Search students by name, email or batch...",value:q,onChange:t=>u(t.target.value),style:{width:"100%",padding:"0.8rem 1rem 0.8rem 2.8rem",borderRadius:"10px",background:"var(--bg-card)",border:"1.5px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.95rem",transition:"all 0.2s",outline:"none"},onFocus:t=>t.target.style.borderColor="var(--primary)",onBlur:t=>t.target.style.borderColor="var(--border-color)"})]}),e.jsx("button",{onClick:()=>{const t=z.filter(P=>(P.name||P.username||"").toLowerCase().includes(q.toLowerCase())||(P.batch||"").toLowerCase().includes(q.toLowerCase())),v=t.every(P=>R.includes(P.id));M(v?P=>P.filter(Z=>!t.map(fe=>fe.id).includes(Z)):P=>[...new Set([...P,...t.map(Z=>Z.id)])])},style:{padding:"0.8rem 1.4rem",borderRadius:"10px",background:"var(--bg-card)",border:"1.5px solid var(--primary)",color:"var(--primary)",fontSize:"0.9rem",fontWeight:700,cursor:"pointer",whiteSpace:"nowrap",transition:"all 0.2s"},onMouseEnter:t=>{t.target.style.background="var(--primary)",t.target.style.color="white"},onMouseLeave:t=>{t.target.style.background="var(--bg-card)",t.target.style.color="var(--primary)"},children:z.filter(t=>(t.name||t.username||"").toLowerCase().includes(q.toLowerCase())||(t.batch||"").toLowerCase().includes(q.toLowerCase())).every(t=>R.includes(t.id))?"âœ“ Deselect All":"+ Select All"})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem",background:"var(--bg-primary)",minHeight:0},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.2rem"},children:z.filter(t=>(t.name||t.username||"").toLowerCase().includes(q.toLowerCase())||(t.batch||"").toLowerCase().includes(q.toLowerCase())).length===0?e.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"4rem 2rem",opacity:.6},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ðŸ”"}),e.jsx("p",{style:{fontSize:"1rem",color:"var(--text-muted)",margin:0},children:"No students found"}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",margin:"0.5rem 0 0 0"},children:"Try adjusting your search criteria"})]}):z.filter(t=>(t.name||t.username||"").toLowerCase().includes(q.toLowerCase())||(t.batch||"").toLowerCase().includes(q.toLowerCase())).map(t=>e.jsxs("div",{onClick:()=>h(t.id),style:{padding:"1.2rem",borderRadius:"12px",background:R.includes(t.id)?"linear-gradient(135deg, var(--primary-alpha), rgba(139, 92, 246, 0.08))":"var(--bg-card)",border:`2px solid ${R.includes(t.id)?"var(--primary)":"var(--border-color)"}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.25s ease",boxShadow:R.includes(t.id)?"0 8px 20px rgba(59, 130, 246, 0.15)":"0 2px 8px rgba(0, 0, 0, 0.05)",textAlign:"left",position:"relative",overflow:"hidden"},onMouseEnter:v=>{R.includes(t.id)||(v.currentTarget.style.borderColor="var(--primary)",v.currentTarget.style.background="var(--bg-secondary)")},onMouseLeave:v=>{R.includes(t.id)||(v.currentTarget.style.borderColor="var(--border-color)",v.currentTarget.style.background="var(--bg-card)")},children:[R.includes(t.id)&&e.jsx("div",{style:{position:"absolute",left:0,top:0,width:"4px",height:"100%",background:"linear-gradient(180deg, var(--primary), #6366f1)"}}),e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"10px",background:R.includes(t.id)?"linear-gradient(135deg, var(--primary), #6366f1)":"linear-gradient(135deg, #8b5cf6, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",fontWeight:700,color:"white",flexShrink:0,boxShadow:"0 4px 12px rgba(59, 130, 246, 0.2)"},children:(t.name||t.username||"S").charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1rem",color:"var(--text-main)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginBottom:"0.3rem"},children:t.name||t.username}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.4rem"},children:[e.jsx("span",{style:{opacity:.7},children:"ðŸ“§"}),e.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.email||"N/A"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsxs("span",{style:{padding:"3px 8px",borderRadius:"6px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",fontSize:"0.75rem",fontWeight:600,color:"var(--text-muted)"},children:["ðŸ¢ ",t.batch||"No Batch"]}),t.status&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:"6px",background:t.status==="active"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:t.status==="active"?"#10b981":"#ef4444",fontSize:"0.75rem",fontWeight:600},children:t.status==="active"?"ðŸŸ¢ Active":"ðŸ”´ Inactive"})]})]}),R.includes(t.id)&&e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",w:"24px"},children:e.jsx(J,{size:22,color:"var(--primary)",strokeWidth:2.5})})]},t.id))})}),e.jsxs("div",{className:"modal-footer",style:{padding:"1.5rem",borderTop:"2px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-secondary)",flexWrap:"wrap",gap:"1rem",flexShrink:0},children:[e.jsxs("div",{style:{fontSize:"1rem",color:"var(--text-main)",fontWeight:600},children:[e.jsx("span",{style:{color:"var(--primary)",fontWeight:900,fontSize:"1.3rem"},children:R.length}),e.jsxs("span",{style:{marginLeft:"0.5rem",color:"var(--text-muted)"},children:["student",R.length!==1?"s":""," selected"]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn-reset",onClick:()=>{c(!1),u("")},style:{padding:"0.8rem 2rem",fontSize:"0.95rem",fontWeight:600},children:"Cancel"}),e.jsx("button",{className:"btn-create-new",onClick:I,style:{background:"linear-gradient(135deg, var(--primary), #6366f1)",padding:"0.8rem 2.5rem",borderRadius:"10px",fontSize:"0.95rem",fontWeight:700,border:"none",color:"white",boxShadow:"0 6px 20px rgba(59, 130, 246, 0.35)",cursor:"pointer",transition:"all 0.3s"},onMouseEnter:t=>{t.target.style.boxShadow="0 10px 30px rgba(59, 130, 246, 0.5)",t.target.style.transform="translateY(-2px)"},onMouseLeave:t=>{t.target.style.boxShadow="0 6px 20px rgba(59, 130, 246, 0.35)",t.target.style.transform="translateY(0)"},children:"âœ“ Confirm Assignment"})]})]})]})}),C&&e.jsx("div",{className:"modal-overlay",onClick:()=>N(!1),children:e.jsxs("div",{className:"modal-content",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Se,{size:20,color:"white"})}),e.jsx("h2",{children:"Create New Problem"})]}),e.jsx("button",{onClick:()=>N(!1),className:"modal-close",children:e.jsx(oe,{size:20})})]}),e.jsx("div",{className:"modal-body premium-form",children:e.jsxs("form",{onSubmit:ie,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Problem Title"}),e.jsx("input",{type:"text",placeholder:"Enter problem title",value:l.title,onChange:t=>g({...l,title:t.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Problem Type"}),e.jsxs("select",{value:l.type,onChange:t=>{const v=t.target.value;g({...l,type:v,language:v==="SQL"?"SQL":l.language==="SQL"?"Python":l.language})},children:[e.jsx("option",{value:"Coding",children:"Coding"}),e.jsx("option",{value:"SQL",children:"SQL"}),e.jsx("option",{value:"Algorithm",children:"Algorithm"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Language"}),e.jsxs("select",{value:l.language,onChange:t=>{const v=t.target.value;g({...l,language:v,type:v==="SQL"?"SQL":l.type==="SQL"?"Coding":l.type})},children:[e.jsx("option",{value:"Python",children:"Python"}),e.jsx("option",{value:"JavaScript",children:"JavaScript"}),e.jsx("option",{value:"Java",children:"Java"}),e.jsx("option",{value:"C",children:"C"}),e.jsx("option",{value:"C++",children:"C++"}),e.jsx("option",{value:"SQL",children:"SQL"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Difficulty"}),e.jsxs("select",{value:l.difficulty,onChange:t=>g({...l,difficulty:t.target.value}),children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{value:l.status,onChange:t=>g({...l,status:t.target.value}),children:[e.jsx("option",{value:"live",children:"Live"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Problem Description"}),e.jsx("textarea",{rows:"5",placeholder:"Describe the problem...",value:l.description,onChange:t=>g({...l,description:t.target.value}),required:!0})]}),W?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(re,{size:14,color:"#06b6d4"})," Database Schema (CREATE TABLE statements)"]}),e.jsx("textarea",{rows:"6",placeholder:`CREATE TABLE employees (
  id INT PRIMARY KEY,
  name VARCHAR(100),
  department VARCHAR(50),
  salary DECIMAL(10,2)
);

INSERT INTO employees VALUES (1, 'John', 'IT', 50000);`,value:l.sqlSchema,onChange:t=>g({...l,sqlSchema:t.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}}),e.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Include CREATE TABLE and INSERT statements to set up the test database"})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(J,{size:14,color:"#10b981"})," Expected Query Result"]}),e.jsx("textarea",{rows:"4",placeholder:`id | name | salary
1  | John | 50000
2  | Jane | 60000`,value:l.expectedQueryResult,onChange:t=>g({...l,expectedQueryResult:t.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}}),e.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"The expected output when the correct SQL query is executed"})]})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Sample Input"}),e.jsx("input",{type:"text",placeholder:"e.g., [1, 2, 3]",value:l.testInput,onChange:t=>g({...l,testInput:t.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Expected Output"}),e.jsx("input",{type:"text",placeholder:"e.g., 6",value:l.expectedOutput,onChange:t=>g({...l,expectedOutput:t.target.value})})]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Deadline (Optional)"}),e.jsx("input",{type:"date",value:l.deadline,onChange:t=>g({...l,deadline:t.target.value})})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Max Attempts (0 = Unlimited)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:l.maxAttempts,onChange:t=>g({...l,maxAttempts:parseInt(t.target.value)||0}),placeholder:"0 = unlimited attempts"}),e.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem",marginTop:"0.25rem",display:"block"},children:"Set how many times a student can submit. 0 means unlimited."})]}),e.jsxs("div",{style:{padding:"1.25rem",background:"rgba(139, 92, 246, 0.05)",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.2)",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx(ne,{size:18,color:"#8b5cf6"}),e.jsx("span",{style:{fontWeight:600,color:"#8b5cf6"},children:"Proctoring Settings"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsx("input",{type:"checkbox",id:"enableProctoring",checked:l.enableProctoring,onChange:t=>g({...l,enableProctoring:t.target.checked}),style:{width:"18px",height:"18px",accentColor:"#8b5cf6"}}),e.jsx("label",{htmlFor:"enableProctoring",style:{cursor:"pointer",fontSize:"0.9rem"},children:"Enable Proctoring Mode"})]}),l.enableProctoring&&e.jsxs("div",{style:{marginLeft:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("input",{type:"checkbox",id:"enableVideoAudio",checked:l.enableVideoAudio,onChange:t=>g({...l,enableVideoAudio:t.target.checked}),style:{width:"16px",height:"16px",accentColor:"#8b5cf6"}}),e.jsx("label",{htmlFor:"enableVideoAudio",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:"ðŸ“¹ Enable Video & Audio Monitoring"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("input",{type:"checkbox",id:"disableCopyPaste",checked:l.disableCopyPaste,onChange:t=>g({...l,disableCopyPaste:t.target.checked}),style:{width:"16px",height:"16px",accentColor:"#8b5cf6"}}),e.jsx("label",{htmlFor:"disableCopyPaste",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:"ðŸš« Disable Copy/Paste"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("input",{type:"checkbox",id:"trackTabSwitches",checked:l.trackTabSwitches,onChange:t=>g({...l,trackTabSwitches:t.target.checked}),style:{width:"16px",height:"16px",accentColor:"#8b5cf6"}}),e.jsx("label",{htmlFor:"trackTabSwitches",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:"ðŸ‘ï¸ Track Tab Switches"})]}),l.trackTabSwitches&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginLeft:"1.5rem"},children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:"Max Tab Switches:"}),e.jsx("input",{type:"number",min:"1",max:"10",value:l.maxTabSwitches,onChange:t=>g({...l,maxTabSwitches:parseInt(t.target.value)||3}),style:{width:"60px",padding:"0.25rem 0.5rem",borderRadius:"6px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"white",textAlign:"center"}})]}),e.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid rgba(139, 92, 246, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsx("input",{type:"checkbox",id:"enableFaceDetection",checked:l.enableFaceDetection,onChange:t=>g({...l,enableFaceDetection:t.target.checked}),style:{width:"16px",height:"16px",accentColor:"#ec4899"}}),e.jsx("label",{htmlFor:"enableFaceDetection",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:"ðŸ‘ï¸ Enable Face Detection"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsx("input",{type:"checkbox",id:"detectMultipleFaces",checked:l.detectMultipleFaces,onChange:t=>g({...l,detectMultipleFaces:t.target.checked}),style:{width:"16px",height:"16px",accentColor:"#ef4444"}}),e.jsx("label",{htmlFor:"detectMultipleFaces",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:"ðŸ‘¥ Detect Multiple Faces (Cheating)"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("input",{type:"checkbox",id:"trackFaceLookaway",checked:l.trackFaceLookaway,onChange:t=>g({...l,trackFaceLookaway:t.target.checked}),style:{width:"16px",height:"16px",accentColor:"#3b82f6"}}),e.jsx("label",{htmlFor:"trackFaceLookaway",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:"ðŸ‘€ Track Face Lookaway"})]})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn-reset",onClick:()=>N(!1),children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-create-new",children:[e.jsx(Ne,{size:16})," Create Problem"]})]})]})})]})}),e.jsx(qe,{context:"problem",isOpen:k,onClose:()=>n(!1),onGenerate:B}),i&&e.jsx(kt,{problemId:i.id,problemTitle:i.title,onClose:()=>j(null)})]})}function $t({user:s}){const[r,$]=o.useState([]),[L,f]=o.useState(!0),[_,m]=o.useState(null);if(o.useEffect(()=>{w.get(`${T}/leaderboard?mentorId=${s.id}`).then(n=>{$(n.data),f(!1)}).catch(n=>f(!1))},[s.id]),L)return e.jsx("div",{className:"loading-spinner"});const C=n=>n===1?{color:"#fbbf24",transform:"scale(1.2)"}:n===2?{color:"#94a3b8",transform:"scale(1.1)"}:n===3?{color:"#b45309",transform:"scale(1.1)"}:{color:"var(--text-muted)"},N=n=>n===1?e.jsx(de,{size:24,fill:"#fbbf24",color:"#d97706"}):n===2?e.jsx(Pe,{size:24,fill:"#e2e8f0",color:"#64748b"}):n===3?e.jsx(Pe,{size:24,fill:"#fbbf24",color:"#b45309"}):e.jsxs("span",{style:{fontWeight:600,fontSize:"1.1rem",width:"24px",textAlign:"center",display:"inline-block"},children:["#",n]}),k=n=>n.violations?(n.violations.tabSwitches||0)+(n.violations.copyPaste||0)+(n.violations.cameraBlocked||0)+(n.violations.phoneDetection||0)+(n.violations.integrityViolations||0)+(n.violations.plagiarism||0):0;return e.jsxs("div",{className:"card animate-slideUp glass",style:{padding:"0 0 1rem 0",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"2rem 2rem 1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(de,{size:28,className:"text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.5rem"},children:"Student Leaderboard"}),e.jsx("p",{style:{margin:"4px 0 0",color:"var(--text-muted)",fontSize:"0.9rem"},children:"Rankings based on scores"})]})]}),e.jsx("div",{className:"table-container",style:{border:"none",borderRadius:0},children:e.jsxs("table",{style:{borderCollapse:"separate",borderSpacing:"0 8px",padding:"0 1rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{paddingLeft:"2rem"},children:"Rank"}),e.jsx("th",{children:"Student"}),e.jsx("th",{children:"Total Score"}),e.jsx("th",{children:"Submissions"}),e.jsx("th",{children:"Violations"}),e.jsx("th",{style:{textAlign:"center"},children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:r.map((n,x)=>{const A=k(n)>0||n.violations?.plagiarism>0;return e.jsxs("tr",{className:"leaderboard-row",style:{backgroundColor:x<3?"var(--bg-dark)":"transparent",transition:"transform 0.2s"},children:[e.jsx("td",{style:{paddingLeft:"2rem"},children:e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem",...C(x+1)},children:N(x+1)})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{className:"avatar-circle",children:n.name.charAt(0).toUpperCase()}),e.jsx("div",{children:e.jsx("div",{style:{fontWeight:600,fontSize:"1rem"},children:n.name})})]})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:700,fontSize:"1.1rem",color:"var(--primary)"},children:[n.avgScore," ",e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)",fontWeight:400},children:"pts"})]})}),e.jsx("td",{children:e.jsxs("div",{className:"status-badge live",style:{width:"fit-content"},children:[n.acceptedSubmissions||n.totalSubmissions," Submitted"]})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[n.violations?.tabSwitches>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",display:"flex",alignItems:"center",gap:"3px"},title:"Tab Switches",children:[e.jsx(ne,{size:10})," ",n.violations.tabSwitches]}),n.violations?.cameraBlocked>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"3px"},title:"Camera Blocked",children:["ðŸ“· ",n.violations.cameraBlocked]}),n.violations?.phoneDetection>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"3px"},title:"Phone Detected",children:["ðŸ“± ",n.violations.phoneDetection]}),n.violations?.copyPaste>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",display:"flex",alignItems:"center",gap:"3px"},title:"Copy/Paste",children:["ðŸ“‹ ",n.violations.copyPaste]}),n.violations?.plagiarism>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"3px"},title:"Plagiarism",children:[e.jsx(ee,{size:10})," ",n.violations.plagiarism]}),!A&&e.jsx("span",{style:{color:"#10b981"},children:e.jsx(J,{size:14})})]})}),e.jsx("td",{style:{textAlign:"center"},children:e.jsx("div",{style:{width:"100px",height:"6px",backgroundColor:"var(--border-color)",borderRadius:"10px",margin:"0 auto",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(n.avgScore,100)}%`,height:"100%",backgroundColor:A?"#f59e0b":x===0?"#fbbf24":"var(--primary)"}})})}),e.jsx("td",{children:e.jsxs("button",{onClick:()=>m({id:n.studentId,name:n.name}),style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.5rem 0.85rem",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.75rem",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.3)"},title:"Generate comprehensive report",children:[e.jsx(ue,{size:14}),"Report"]})})]},n.studentId)})})]})}),_&&e.jsx(wt,{studentId:_.id,studentName:_.name,onClose:()=>m(null),requestedBy:s?.name||"Mentor",requestedByRole:"mentor"})]})}function _t({user:s}){const[r,$]=o.useState([]),[L,f]=o.useState([]),[_,m]=o.useState([]),[C,N]=o.useState(!0),[k,n]=o.useState(null),[x,y]=o.useState("all"),[A,d]=o.useState(null),[S,i]=o.useState(null),[j,l]=o.useState(""),g=()=>{Promise.all([w.get(`${T}/submissions?mentorId=${s.id}`),w.get(`${T}/aptitude-submissions?mentorId=${s.id}`),w.get(`${T}/global-test-submissions?mentorId=${s.id}`)]).then(([p,R,M])=>{const ae=Array.isArray(p.data)?p.data:p.data?.data||[];$(ae.map(F=>({...F,subType:"code"}))),f((R.data||[]).map(F=>({...F,subType:"aptitude",itemTitle:F.testTitle}))),m((M.data||[]).map(F=>({...F,subType:"global",itemTitle:F.testTitle,score:F.overallPercentage}))),N(!1)}).catch(p=>N(!1))};o.useEffect(()=>{g()},[s.id]);const E=[...r,...L,..._].sort((p,R)=>new Date(R.submittedAt)-new Date(p.submittedAt)),z=(x==="all"?E:x==="code"?r:x==="aptitude"?L:_).filter(R=>(R.studentName||"").toLowerCase().includes(j.toLowerCase())||(R.itemTitle||R.testTitle||"").toLowerCase().includes(j.toLowerCase())||R.status.toLowerCase().includes(j.toLowerCase()));return C?e.jsx("div",{className:"loading-spinner"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>y("all"),style:{padding:"0.6rem 1.2rem",background:x==="all"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:x==="all"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:x==="all"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["All (",E.length,")"]}),e.jsxs("button",{onClick:()=>y("code"),style:{padding:"0.6rem 1.2rem",background:x==="code"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:x==="code"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:x==="code"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["ðŸ’» Code (",r.length,")"]}),e.jsxs("button",{onClick:()=>y("aptitude"),style:{padding:"0.6rem 1.2rem",background:x==="aptitude"?"#8b5cf6":"rgba(139, 92, 246, 0.1)",border:x==="aptitude"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:x==="aptitude"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["ðŸ“ Aptitude (",L.length,")"]}),e.jsxs("button",{onClick:()=>y("global"),style:{padding:"0.6rem 1.2rem",background:x==="global"?"#3b82f6":"rgba(59, 130, 246, 0.1)",border:x==="global"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:x==="global"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["ðŸŒ Global (",_.length,")"]})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(ke,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search student, problem or status...",style:{padding:"0.6rem 1rem 0.6rem 2.5rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"white",width:"280px"},value:j,onChange:p=>l(p.target.value)})]})]}),e.jsx("div",{className:"table-container card glass",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Student"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Problem / Test"}),e.jsx("th",{children:"Language"}),e.jsx("th",{children:"Score"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Submitted At"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:z.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"3rem"},children:"No submissions found"})}):z.map(p=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{style:{fontWeight:600},children:p.studentName})}),e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:p.subType==="aptitude"?"rgba(139, 92, 246, 0.1)":"rgba(59, 130, 246, 0.1)",color:p.subType==="aptitude"?"#8b5cf6":"#3b82f6"},children:p.subType==="aptitude"?"ðŸ“ Aptitude":p.subType==="global"?"ðŸŒ Global":"ðŸ’» Code"})}),e.jsx("td",{children:e.jsx("div",{style:{color:"var(--primary)",fontWeight:500},children:p.itemTitle||p.testTitle})}),e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:p.subType==="aptitude"?"N/A":p.subType==="global"?"Mixed":p.language?.toUpperCase()||"N/A"})}),e.jsxs("td",{style:{fontWeight:700,fontSize:"1.1rem"},children:[p.score,"%"]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",alignItems:"center"},children:[e.jsx("span",{className:`status-badge ${p.status}`,children:p.status}),p.plagiarism?.detected&&e.jsxs("span",{className:"status-badge plagiarized",style:{display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(ee,{size:11})," Plag"]}),(p.integrity?.integrityViolation||p.tabSwitches>0)&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(ee,{size:10})," ",p.integrity?.tabSwitches||p.tabSwitches||0," Tab"]}),p.cameraBlockedCount>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:["ðŸ“· ",p.cameraBlockedCount," Cam"]}),p.phoneDetectionCount>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:["ðŸ“± ",p.phoneDetectionCount," Phone"]})]})}),e.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(p.submittedAt).toLocaleString()}),e.jsx("td",{children:p.subType==="aptitude"?e.jsxs("button",{onClick:()=>d(p),style:{background:"rgba(139, 92, 246, 0.1)",border:"none",color:"#8b5cf6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ne,{size:14})," Results"]}):p.subType==="global"?e.jsxs("button",{onClick:()=>i(p.id),style:{background:"rgba(59, 130, 246, 0.1)",border:"none",color:"#3b82f6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ne,{size:14})," Full Report"]}):e.jsxs("button",{onClick:()=>n(p),style:{background:"rgba(59, 130, 246, 0.1)",border:"none",color:"#3b82f6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ne,{size:14})," Report"]})})]},p.id))})]})}),k&&e.jsx(Wt,{submission:k,onClose:()=>n(null)}),A&&e.jsx(ut,{submission:A,onClose:()=>d(null)}),S&&e.jsx(bt,{submissionId:S,onClose:()=>i(null),isStudentView:!1})]})}function Wt({submission:s,onClose:r}){return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content",onClick:$=>$.stopPropagation(),style:{maxWidth:"900px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:s.status==="accepted"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f59e0b)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ue,{size:20,color:"white"})}),e.jsx("h2",{children:"Detailed Submission Report"})]}),e.jsx("button",{onClick:r,className:"modal-close",children:e.jsx(oe,{size:20})})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"rgba(59, 130, 246, 0.05)",borderRadius:"1rem",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Student Name"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600,fontSize:"1.1rem"},children:s.studentName})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submitted At"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:new Date(s.submittedAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Language"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:s.language})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submission Type"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:s.submissionType==="file"?"File Upload":"Code Editor"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:s.status==="accepted"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:`1px solid ${s.status==="accepted"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"3rem",fontWeight:800,color:s.status==="accepted"?"#10b981":"#ef4444"},children:s.score}),e.jsx("div",{style:{color:"var(--text-muted)"},children:"AI Evaluation Score"})]}),e.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"1rem",background:s.status==="accepted"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:s.status==="accepted"?"#10b981":"#ef4444",fontWeight:700,fontSize:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.status==="accepted"?e.jsx(J,{size:24}):e.jsx(oe,{size:24}),s.status?.toUpperCase()]})]}),s.plagiarism?.detected&&e.jsxs("div",{className:"plagiarism-banner",style:{marginBottom:"1.5rem"},children:[e.jsx(ee,{size:24,color:"#ef4444"}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#ef4444"},children:"Plagiarism Detected"}),e.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["This code matches a submission from ",s.plagiarism.copiedFromName]})]})]}),(s.tabSwitches>0||s.copyPasteAttempts>0||s.cameraBlockedCount>0||s.phoneDetectionCount>0)&&e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#f59e0b"},children:[e.jsx(ee,{size:18})," Proctoring Violations"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.tabSwitches>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(ne,{size:18,color:"#f59e0b"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[s.tabSwitches," Tab Switches"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(s.tabSwitches*5,25)," pts"]})]})]}),s.copyPasteAttempts>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“‹"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[s.copyPasteAttempts," Copy/Paste"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(s.copyPasteAttempts*3,15)," pts"]})]})]}),s.cameraBlockedCount>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“·"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[s.cameraBlockedCount," Camera Blocked"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(s.cameraBlockedCount*10,30)," pts"]})]})]}),s.phoneDetectionCount>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“±"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[s.phoneDetectionCount," Phone Detected"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(s.phoneDetectionCount*15,45)," pts"]})]})]})]}),s.proctoringVideo&&e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1rem"},children:"ðŸŽ¥"}),e.jsxs("span",{style:{fontSize:"0.85rem",color:"#3b82f6"},children:["Proctoring video recorded: ",s.proctoringVideo]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(J,{size:18,color:"#3b82f6"})," AI Feedback"]}),e.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--bg-tertiary)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid var(--border-color)"},children:s.feedback||"No feedback provided."})]}),s.aiExplanation&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(se,{size:18,color:"#8b5cf6"})," AI Explanation (Why this score?)"]}),e.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"rgba(139, 92, 246, 0.05)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid rgba(139, 92, 246, 0.1)"},children:s.aiExplanation})]}),s.analysis&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Le,{size:18,color:"var(--primary)"}),"Detailed Analysis"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[s.analysis.correctness!==void 0&&e.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(59, 130, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(J,{size:22,color:"#3b82f6"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Correctness"}),e.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#3b82f6"},children:s.analysis.correctness})]})]}),s.analysis.efficiency!==void 0&&e.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(16, 185, 129, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ft,{size:22,color:"#10b981"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Efficiency"}),e.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#10b981"},children:s.analysis.efficiency})]})]}),s.analysis.codeStyle!==void 0&&e.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(re,{size:22,color:"#8b5cf6"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Code Style"}),e.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#8b5cf6"},children:s.analysis.codeStyle})]})]}),s.analysis.bestPractices!==void 0&&e.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(245, 158, 11, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(yt,{size:22,color:"#f59e0b"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Best Practices"}),e.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#f59e0b"},children:s.analysis.bestPractices})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Submitted Code"}),e.jsx("pre",{style:{background:"#020617",padding:"1.5rem",borderRadius:"0.5rem",overflow:"auto",maxHeight:"300px",fontSize:"0.85rem",fontFamily:"monospace",color:"#e2e8f0",border:"1px solid #334155"},children:s.code})]}),e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"ðŸ’¬ Code Feedback"}),e.jsx(Tt,{submissionId:s.id,code:s.code,mentorId:s.mentorId,studentId:s.studentId})]})]})]})})}function Bt({user:s}){const{t:r}=Ee(),[$,L]=o.useState("plagiarism"),[f,_]=o.useState(null),[m,C]=o.useState(null),[N,k]=o.useState(null),[n,x]=o.useState(!0),[y,A]=o.useState(!1);o.useEffect(()=>{x(!0),Promise.all([w.get(`${T}/analytics/plagiarism?mentorId=${s.id}`),w.get(`${T}/analytics/time-to-solve?mentorId=${s.id}`),w.get(`${T}/analytics/topics?mentorId=${s.id}`)]).then(([i,j,l])=>{_(i.data),C(j.data),k(l.data),x(!1)}).catch(i=>{console.error(i),x(!1)})},[s.id]);const d=async i=>{A(!0);try{if(i==="csv"){const j=await w.get(`${T}/analytics/export/csv?mentorId=${s.id}`,{responseType:"blob"}),l=window.URL.createObjectURL(new Blob([j.data])),g=document.createElement("a");g.href=l,g.download=`analytics_${new Date().toISOString().split("T")[0]}.csv`,g.click()}else{const j=await w.get(`${T}/analytics/export/json?mentorId=${s.id}`),l=new Blob([JSON.stringify(j.data,null,2)],{type:"application/json"}),g=window.URL.createObjectURL(l),E=document.createElement("a");E.href=g,E.download=`analytics_${new Date().toISOString().split("T")[0]}.json`,E.click()}}catch(j){console.error(j)}A(!1)};if(n)return e.jsx("div",{className:"loading-spinner"});const S=[{id:"plagiarism",label:r("plagiarism_detection"),icon:e.jsx(We,{size:16})},{id:"time-to-solve",label:r("time_to_solve"),icon:e.jsx(je,{size:16})},{id:"topics",label:r("topic_analysis"),icon:e.jsx(Ce,{size:16})},{id:"export",label:r("export_report"),icon:e.jsx(Be,{size:16})}];return e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:S.map(i=>e.jsxs("button",{onClick:()=>L(i.id),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1.2rem",borderRadius:"10px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.85rem",background:$===i.id?"var(--primary)":"var(--card-bg)",color:$===i.id?"#fff":"var(--text-secondary)",boxShadow:$===i.id?"0 4px 15px rgba(59,130,246,0.3)":"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.2s"},children:[i.icon," ",i.label]},i.id))}),$==="plagiarism"&&f&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{className:"dashboard-stat-card stat-card-blue",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #1e40af, #3b82f6)"},children:e.jsx(Te,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:f.stats.totalSubmissions}),e.jsx("div",{className:"stat-label-text",children:r("total_submissions")})]})]})}),e.jsx("div",{className:"dashboard-stat-card",style:{borderLeft:"4px solid #ef4444"},children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #b91c1c, #ef4444)"},children:e.jsx(ee,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",style:{color:"#ef4444"},children:f.stats.plagiarismCount}),e.jsx("div",{className:"stat-label-text",children:r("flagged")})]})]})}),e.jsx("div",{className:"dashboard-stat-card",style:{borderLeft:"4px solid #f59e0b"},children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #b45309, #f59e0b)"},children:e.jsx(we,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsxs("div",{className:"stat-number",style:{color:"#f59e0b"},children:[f.stats.plagiarismRate,"%"]}),e.jsx("div",{className:"stat-label-text",children:r("plagiarism_rate")})]})]})})]}),f.repeatOffenders.length>0&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",style:{color:"#ef4444"},children:[e.jsx(ee,{size:18})," ",r("repeat_offenders")]}),e.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:f.repeatOffenders.map((i,j)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",borderRadius:"10px",background:"rgba(239,68,68,0.05)",border:"1px solid rgba(239,68,68,0.15)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:i.name}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[r("copied_from"),": ",i.copiedFrom.join(", ")||"Unknown"]})]}),e.jsxs("span",{style:{background:"#ef4444",color:"#fff",padding:"0.25rem 0.75rem",borderRadius:"20px",fontWeight:700,fontSize:"0.8rem"},children:[i.count,"x"]})]},j))})]}),f.byProblem.length>0&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(Se,{size:18,color:"#f59e0b"})," ",r("most_copied_problems")]}),e.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:f.byProblem.map((i,j)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",borderRadius:"8px",background:"var(--bg-secondary)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:i.title}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textTransform:"capitalize"},children:i.difficulty})]}),e.jsxs("span",{style:{fontWeight:700,color:"#ef4444"},children:[i.flaggedCount," ",r("flags")]})]},j))})]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(We,{size:18,color:"#ef4444"})," ",r("flagged_submissions")]}),f.flaggedSubmissions.length>0?e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:r("student")}),e.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:r("problem")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:r("score")}),e.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:r("copied_from")}),e.jsx("th",{style:{textAlign:"right",padding:"0.6rem"},children:r("date")})]})}),e.jsx("tbody",{children:f.flaggedSubmissions.slice(0,20).map((i,j)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsx("td",{style:{padding:"0.6rem",fontWeight:600},children:i.studentName}),e.jsx("td",{style:{padding:"0.6rem"},children:i.problemTitle}),e.jsxs("td",{style:{padding:"0.6rem",textAlign:"center"},children:[i.score,"/100"]}),e.jsx("td",{style:{padding:"0.6rem",color:"#ef4444"},children:i.copiedFromName||i.copiedFrom}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"right",fontSize:"0.75rem",color:"var(--text-muted)"},children:new Date(i.submittedAt).toLocaleDateString()})]},j))})]})}):e.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem"},children:r("no_plagiarism_detected")})]})]}),$==="time-to-solve"&&m&&e.jsxs("div",{children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:m.difficultySummary.map((i,j)=>{const g={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"}[i.difficulty]||"#3b82f6";return e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"14px",background:"var(--card-bg)",borderLeft:`4px solid ${g}`,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1rem",textTransform:"capitalize",color:g,marginBottom:"0.75rem"},children:i.difficulty}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:r("avg_time")}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:800},children:[i.avgTimeMinutes,"m"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:r("avg_attempts")}),e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:800},children:i.avgAttempts})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:r("solve_rate")}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:800,color:g},children:[i.avgSolveRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)",textTransform:"uppercase"},children:r("problems")}),e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:800},children:i.problems})]})]})]},j)})}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(je,{size:18,color:"#3b82f6"})," ",r("problem_difficulty_metrics")]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.6rem"},children:r("problem")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:r("difficulty")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:r("students")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:r("avg_attempts")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:r("avg_time")}),e.jsx("th",{style:{textAlign:"center",padding:"0.6rem"},children:r("solve_rate")})]})}),e.jsx("tbody",{children:m.problems.slice(0,30).map((i,j)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsx("td",{style:{padding:"0.6rem",fontWeight:600},children:i.title}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.15rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,background:i.difficulty==="easy"?"rgba(16,185,129,0.12)":i.difficulty==="medium"?"rgba(251,191,36,0.12)":"rgba(239,68,68,0.12)",color:i.difficulty==="easy"?"#10b981":i.difficulty==="medium"?"#f59e0b":"#ef4444"},children:i.difficulty})}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:i.studentCount}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:600},children:i.avgAttempts}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:i.avgTimeMinutes?`${i.avgTimeMinutes}m`:"-"}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:e.jsxs("span",{style:{fontWeight:700,color:i.solveRate>=70?"#10b981":i.solveRate>=40?"#f59e0b":"#ef4444"},children:[i.solveRate,"%"]})})]},j))})]})})]})]}),$==="topics"&&N&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(Ce,{size:18,color:"#3b82f6"})," ",r("by_problem_type")]}),N.byType.map((i,j)=>e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{style:{fontWeight:600,textTransform:"capitalize"},children:i.type}),e.jsxs("span",{style:{fontWeight:700,color:i.avgScore>=70?"#10b981":"#f59e0b"},children:[i.avgScore,"% avg"]})]}),e.jsx("div",{style:{height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${i.passRate}%`,borderRadius:"4px",background:"linear-gradient(90deg, #3b82f6, #60a5fa)",transition:"width 0.5s"}})}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"2px"},children:[i.submissions," submissions â€¢ ",i.passRate,"% pass â€¢ ",i.uniqueStudents," students"]})]},j))]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(we,{size:18,color:"#f59e0b"})," ",r("by_difficulty")]}),N.byDifficulty.map((i,j)=>{const l={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"};return e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{style:{fontWeight:600,textTransform:"capitalize",color:l[i.difficulty]},children:i.difficulty}),e.jsxs("span",{style:{fontWeight:700},children:[i.avgScore,"%"]})]}),e.jsx("div",{style:{height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${i.passRate}%`,borderRadius:"4px",background:l[i.difficulty],transition:"width 0.5s"}})}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"2px"},children:[i.submissions," submissions â€¢ ",i.passRate,"% pass"]})]},j)})]})]}),e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(re,{size:18,color:"#8b5cf6"})," ",r("performance_by_language")]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:N.byLanguage.map((i,j)=>e.jsxs("div",{style:{padding:"1rem",borderRadius:"12px",background:"var(--bg-secondary)",textAlign:"center",border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1.1rem"},children:i.language}),e.jsxs("div",{style:{fontSize:"2rem",fontWeight:800,color:i.avgScore>=70?"#10b981":i.avgScore>=40?"#f59e0b":"#ef4444"},children:[i.avgScore,"%"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[i.submissions," subs â€¢ ",i.passRate,"% pass"]})]},j))})]}),N.heatmap.length>0&&e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(Le,{size:18,color:"#06b6d4"})," ",r("type_difficulty_heatmap")]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[e.jsx("th",{style:{padding:"0.6rem",textAlign:"left"},children:r("type")}),e.jsx("th",{style:{padding:"0.6rem",textAlign:"center"},children:r("difficulty")}),e.jsx("th",{style:{padding:"0.6rem",textAlign:"center"},children:r("submissions")}),e.jsx("th",{style:{padding:"0.6rem",textAlign:"center"},children:r("avg_score")}),e.jsx("th",{style:{padding:"0.6rem",textAlign:"center"},children:r("pass_rate")})]})}),e.jsx("tbody",{children:N.heatmap.map((i,j)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsx("td",{style:{padding:"0.6rem",fontWeight:600,textTransform:"capitalize"},children:i.type}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center",textTransform:"capitalize"},children:i.difficulty}),e.jsx("td",{style:{padding:"0.6rem",textAlign:"center"},children:i.submissions}),e.jsxs("td",{style:{padding:"0.6rem",textAlign:"center",fontWeight:700,color:i.avgScore>=70?"#10b981":i.avgScore>=40?"#f59e0b":"#ef4444"},children:[i.avgScore,"%"]}),e.jsxs("td",{style:{padding:"0.6rem",textAlign:"center"},children:[i.passRate,"%"]})]},j))})]})})]})]}),$==="export"&&e.jsx("div",{children:e.jsxs("div",{className:"dashboard-panel",style:{textAlign:"center",padding:"3rem 2rem"},children:[e.jsx(Be,{size:48,color:"var(--primary)",style:{marginBottom:"1rem"}}),e.jsx("h3",{style:{margin:"0 0 0.5rem",fontSize:"1.3rem"},children:r("export_analytics")}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"2rem",maxWidth:"500px",margin:"0 auto 2rem"},children:r("export_description")}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>d("csv"),disabled:y,style:{padding:"0.75rem 2rem",borderRadius:"12px",border:"none",cursor:"pointer",background:"linear-gradient(135deg, #059669, #10b981)",color:"#fff",fontWeight:700,fontSize:"0.9rem",opacity:y?.6:1,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ue,{size:18})," ",r("download_csv")]}),e.jsxs("button",{onClick:()=>d("json"),disabled:y,style:{padding:"0.75rem 2rem",borderRadius:"12px",border:"none",cursor:"pointer",background:"linear-gradient(135deg, #1e40af, #3b82f6)",color:"#fff",fontWeight:700,fontSize:"0.9rem",opacity:y?.6:1,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(re,{size:18})," ",r("download_json")]})]})]})})]})}function Ie({testType:s,user:r}){const[$,L]=o.useState([]),[f,_]=o.useState(!0),[m,C]=o.useState([]),[N,k]=o.useState(!1),[n,x]=o.useState([]),[y,A]=o.useState(null),[d,S]=o.useState("");o.useEffect(()=>{(async()=>{try{const z=s==="aptitude"?"/aptitude":s==="global"?"/global-tests":s==="skill"?"/skill-tests":"/aptitude",p=await w.get(`${T}${z}?status=live`);L(Array.isArray(p.data)?p.data:[])}catch(z){console.error(z),L([])}finally{_(!1)}})()},[s]);const i=async()=>{try{const c=await w.get(`${T}/mentors/${r.id}/students`);C(Array.isArray(c.data)?c.data:[])}catch(c){console.error("Error fetching students:",c)}},j=async c=>{await i(),A(c);try{const z=await w.get(`${T}/tests/${c}/allocated-students`);x(z.data.studentIds||[])}catch(z){console.error("Error loading allocations:",z),x([])}k(!0)},l=c=>{x(z=>z.includes(c)?z.filter(p=>p!==c):[...z,c])},g=async()=>{try{await w.post(`${T}/tests/${y}/allocate-students`,{studentIds:n}),alert("Students allocated successfully!"),k(!1),x([]),A(null)}catch(c){alert("Error saving allocations: "+(c.response?.data?.error||c.message))}};if(f)return e.jsx("div",{className:"loading-spinner"});const E=s==="aptitude"?"Aptitude Tests":s==="global"?"Global Tests":s==="skill"?"Skill Tests":"Tests";return e.jsxs("div",{children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:$.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)",gridColumn:"1 / -1"},children:["No ",E," found"]}):$.map(c=>e.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"12px",padding:"1.5rem",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"0.65rem",padding:"3px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.15)",color:"#60a5fa",fontWeight:700},children:E.toUpperCase()}),e.jsx("span",{style:{fontSize:"0.65rem",padding:"3px 8px",borderRadius:"4px",background:c.status==="live"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",color:c.status==="live"?"#10b981":"#ef4444",fontWeight:700},children:c.status==="live"?"LIVE":"ENDED"})]}),e.jsx("h3",{style:{margin:"0.5rem 0",fontSize:"1.1rem"},children:c.title}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginBottom:"1rem",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:c.description||"No description"}),e.jsx("div",{style:{marginTop:"auto",paddingTop:"1rem",borderTop:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("button",{onClick:()=>j(c.id),style:{width:"100%",padding:"0.75rem",background:"rgba(168, 85, 247, 0.1)",border:"1px solid rgba(168, 85, 247, 0.3)",color:"#d8b4fe",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem"},children:"ðŸ‘¥ Assign Students"})})]},c.id))}),N&&e.jsx("div",{className:"modal-overlay",onClick:()=>{k(!1),S("")},children:e.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),style:{maxWidth:"750px",maxHeight:"85vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid var(--border-color)"},children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(X,{size:20,color:"white"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("h2",{style:{margin:0,fontSize:"1.25rem"},children:"Assign Students"}),e.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-muted)"},children:"Select students for this test"})]})]}),e.jsx("button",{onClick:()=>{k(!1),S("")},className:"modal-close",children:e.jsx(oe,{size:20})})]}),e.jsxs("div",{style:{padding:"1rem 1.5rem",background:"var(--bg-secondary)",borderBottom:"1px solid var(--border-color)",display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx(ke,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search by name or batch...",value:d,onChange:c=>S(c.target.value),style:{width:"100%",padding:"0.7rem 1rem 0.7rem 2.5rem",borderRadius:"10px",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.9rem"}})]}),e.jsx("button",{onClick:()=>{const c=m.filter(p=>(p.name||p.username||"").toLowerCase().includes(d.toLowerCase())||(p.batch||"").toLowerCase().includes(d.toLowerCase())),z=c.every(p=>n.includes(p.id));x(z?p=>p.filter(R=>!c.map(M=>M.id).includes(R)):p=>[...new Set([...p,...c.map(R=>R.id)])])},style:{padding:"0.7rem 1.2rem",borderRadius:"10px",background:"var(--bg-card)",border:"1px solid var(--border-color)",color:"var(--text-main)",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",whiteSpace:"nowrap"},children:m.filter(c=>(c.name||c.username||"").toLowerCase().includes(d.toLowerCase())||(c.batch||"").toLowerCase().includes(d.toLowerCase())).every(c=>n.includes(c.id))?"Deselect All":"Select All"})]}),e.jsx("div",{className:"modal-body",style:{overflowY:"auto",padding:"1.5rem",background:"var(--bg-primary)"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:m.filter(c=>(c.name||c.username||"").toLowerCase().includes(d.toLowerCase())||(c.batch||"").toLowerCase().includes(d.toLowerCase())).length===0?e.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem",opacity:.5},children:[e.jsx(X,{size:48,style:{marginBottom:"1rem",opacity:.2}}),e.jsx("p",{children:"No students found matching your search."})]}):m.filter(c=>(c.name||c.username||"").toLowerCase().includes(d.toLowerCase())||(c.batch||"").toLowerCase().includes(d.toLowerCase())).map(c=>e.jsxs("div",{onClick:()=>l(c.id),style:{padding:"1rem",borderRadius:"1rem",background:n.includes(c.id)?"var(--primary-alpha)":"var(--bg-card)",border:`1.5px solid ${n.includes(c.id)?"var(--primary)":"var(--border-color)"}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.2s",boxShadow:n.includes(c.id)?"0 4px 12px var(--primary-alpha)":"none",textAlign:"left"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:n.includes(c.id)?"var(--primary)":"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:700,color:"white"},children:(c.name||c.username||"S").charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.95rem",color:"var(--text-main)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:c.name||c.username}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"4px",marginTop:"4px"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:"4px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:c.batch||"No Batch"})})]}),n.includes(c.id)&&e.jsx(J,{size:18,color:"var(--primary)"})]},c.id))})}),e.jsxs("div",{className:"modal-footer",style:{padding:"1.2rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-secondary)"},children:[e.jsxs("div",{style:{fontSize:"0.95rem",color:"var(--text-main)",fontWeight:500},children:[e.jsx("span",{style:{color:"var(--primary)",fontWeight:800,fontSize:"1.1rem"},children:n.length})," students selected"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{className:"btn-reset",onClick:()=>{k(!1),S("")},children:"Cancel"}),e.jsx("button",{className:"btn-create-new",onClick:g,style:{background:"var(--primary)",padding:"0.7rem 2rem",borderRadius:"10px",boxShadow:"0 4px 15px var(--primary-alpha)"},children:"Confirm Assignment"})]})]})]})})]})}function Pt({user:s}){return e.jsx(Ie,{testType:"aptitude",user:s})}function Mt({user:s}){return e.jsx(Ie,{testType:"global",user:s})}function Dt({user:s}){return e.jsx(Ie,{testType:"skill",user:s})}export{qt as default};
