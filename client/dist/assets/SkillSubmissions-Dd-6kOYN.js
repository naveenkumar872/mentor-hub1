import{r as a,j as e}from"./vendor-react-DZU2lOjX.js";import{c as _,x as D,B as C,a as A,D as T,_ as B,aQ as H,z as G,g as K,j as V,U as X,af as Y,e as F,d as Q,s as q,F as U,W as N,J as M,a4 as J,f as Z,an as ee,o as se,p as ie}from"./vendor-misc-D7KlG0WG.js";import{R as P,e as te,f as re,g as le,h as oe,i as ne,T as O,L as ae,B as de,C as ce,X as pe,Y as xe,b as ge,d as fe}from"./vendor-charts-DyrUJrah.js";const be="http://localhost:3000";function he({attemptId:b,onBack:g,initialData:n=null,isEmbedded:j=!1}){const[m,z]=a.useState(n),[L,w]=a.useState(!n),[y,u]=a.useState("");a.useEffect(()=>{!n&&b&&h()},[b,n]);const h=async()=>{try{w(!0);const{data:s}=await _.get(`${be}/api/skill-tests/report/${b}`);z(s)}catch(s){u(s.response?.data?.error||s.message)}finally{w(!1)}};if(L)return e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",color:"#94a3b8",gap:"10px"},children:[e.jsx(D,{className:"animate-spin"})," Generating comprehensive report..."]});if(y)return e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#ef4444"},children:y});const l=m?.attempt||m,p=m?.violations||m?.proctoring_logs||[];if(!l||!l.id)return e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Report data unavailable"});const x=l.overall_status==="completed",t=l.report&&typeof l.report=="object"?l.report:{},v=t.performance_metrics?[{subject:"Accuracy",A:t.performance_metrics.accuracy||0,fullMark:100},{subject:"Speed",A:t.performance_metrics.speed||0,fullMark:100},{subject:"Completeness",A:t.performance_metrics.completeness||0,fullMark:100},{subject:"Code Quality",A:t.performance_metrics.code_quality||0,fullMark:100},{subject:"Best Practices",A:t.performance_metrics.best_practices||(t.performance_metrics.code_quality?t.performance_metrics.code_quality-5:0),fullMark:100}]:[];let d=[];t.concept_mastery?d=Object.entries(t.concept_mastery).map(([s,r])=>({name:s,score:r})).sort((s,r)=>r.score-s.score).slice(0,8):t.skill_ratings&&(d=Object.entries(t.skill_ratings).map(([s,r])=>({name:s,score:r*10})));const R=[{key:"mcq",label:"MCQ Test",icon:e.jsx(C,{size:18}),score:Number(l.mcq_score||0),status:l.mcq_status,color:"#8b5cf6"},{key:"coding",label:"Coding Test",icon:e.jsx(A,{size:18}),score:Number(l.coding_score||0),status:l.coding_status,color:"#3b82f6"},{key:"sql",label:"SQL Test",icon:e.jsx(T,{size:18}),score:Number(l.sql_score||0),status:l.sql_status,color:"#10b981"},{key:"interview",label:"AI Interview",icon:e.jsx(B,{size:18}),score:Number(l.interview_score||0),status:l.interview_status,isOutOf10:!0,color:"#f59e0b"}];return e.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto",fontFamily:"Inter, sans-serif"},children:[!j&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[e.jsxs("button",{onClick:g,style:{padding:"8px 16px",background:"#334155",border:"1px solid #475569",borderRadius:"8px",cursor:"pointer",fontSize:"13px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[e.jsx(H,{size:16})," Back"]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:800,color:"#f1f5f9"},children:"Detailed Skill Report"}),e.jsxs("p",{style:{margin:0,fontSize:"13px",color:"#94a3b8"},children:["Generated on ",new Date(l.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"24px",marginBottom:"32px"},children:[e.jsxs("div",{style:{background:x?"linear-gradient(135deg, rgba(34,197,94,0.15), rgba(6,95,70,0.2))":"linear-gradient(135deg, rgba(239,68,68,0.15), rgba(153,27,27,0.2))",border:"1px solid "+(x?"rgba(34,197,94,0.3)":"rgba(239,68,68,0.3)"),borderRadius:"16px",padding:"32px",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"center",background:"#0f172a",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",border:`2px solid ${x?"#22c55e":"#ef4444"}`},children:x?e.jsx(G,{size:40,color:"#22c55e"}):e.jsx(D,{size:40,color:"#ef4444"})}),e.jsx("h2",{style:{margin:"0 0 4px",fontSize:"24px",fontWeight:800,color:"#f1f5f9"},children:x?"Excellent Work!":"Needs Improvement"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:700,background:x?"#22c55e":"#ef4444",color:"white",marginTop:"8px"},children:l.overall_status==="completed"?"PASSED":l.mcq_status==="failed"?"MCQ FAILED":l.coding_status==="failed"?"CODING FAILED":l.sql_status==="failed"?"SQL FAILED":l.interview_status==="failed"?"INTERVIEW FAILED":"NOT PASSED"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px"},children:R.map(s=>{s.status==="completed"||s.status,!s.status||s.status;const r=s.isOutOf10?(s.score||0)*10:s.score||0;return e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"4px",background:"#334155"},children:e.jsx("div",{style:{width:`${r}%`,height:"100%",background:s.color,transition:"width 1s ease-out"}})}),e.jsx("div",{style:{marginBottom:"12px",color:s.color,background:`${s.color}15`,padding:"8px",borderRadius:"10px"},children:s.icon}),e.jsx("div",{style:{fontSize:"13px",color:"#cbd5e1",fontWeight:600},children:s.label}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:800,color:"#f1f5f9",marginTop:"4px"},children:[s.isOutOf10?(s.score||0).toFixed(1):Math.round(s.score||0),e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:500},children:s.isOutOf10?"/10":"%"})]})]},s.key)})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"32px"},children:[e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px"},children:[e.jsxs("h3",{style:{margin:"0 0 16px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(C,{color:"#8b5cf6",size:20})," AI Assessment Summary"]}),e.jsx("div",{style:{fontSize:"14px",lineHeight:"1.7",color:"#cbd5e1"},children:t.summary||t.overall_assessment||"No summary available."}),t.behavioral_analysis&&e.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"rgba(59,130,246,0.1)",borderRadius:"12px",border:"1px solid rgba(59,130,246,0.2)"},children:[e.jsx("h4",{style:{margin:"0 0 8px",fontSize:"14px",fontWeight:700,color:"#60a5fa"},children:"Behavioral Analysis"}),e.jsx("p",{style:{margin:0,fontSize:"13px",color:"#cbd5e1"},children:t.behavioral_analysis})]})]}),e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("h3",{style:{margin:"0 0 8px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",alignSelf:"flex-start"},children:"Performance Metrics"}),v.length>0?e.jsx(P,{width:"100%",height:250,children:e.jsxs(te,{cx:"50%",cy:"50%",outerRadius:"75%",data:v,children:[e.jsx(re,{stroke:"#475569"}),e.jsx(le,{dataKey:"subject",tick:{fill:"#94a3b8",fontSize:11}}),e.jsx(oe,{angle:30,domain:[0,100],tick:!1,axisLine:!1}),e.jsx(ne,{name:"Performance",dataKey:"A",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.4}),e.jsx(O,{contentStyle:{backgroundColor:"#0f172a",borderColor:"#334155",color:"#f1f5f9"}}),e.jsx(ae,{})]})}):e.jsx("div",{style:{color:"#64748b",fontStyle:"italic",marginTop:"40px"},children:"Not enough data for metrics"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"32px"},children:[e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px"},children:[e.jsx("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9"},children:"Concept Mastery"}),d.length>0?e.jsx(P,{width:"100%",height:300,children:e.jsxs(de,{data:d,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#334155",horizontal:!1}),e.jsx(pe,{type:"number",domain:[0,100],stroke:"#64748b",ticCount:5}),e.jsx(xe,{dataKey:"name",type:"category",width:100,stroke:"#94a3b8",fontSize:11}),e.jsx(O,{cursor:{fill:"#334155",opacity:.4},contentStyle:{backgroundColor:"#0f172a",borderColor:"#334155",color:"#f1f5f9"}}),e.jsx(ge,{dataKey:"score",fill:"#10b981",radius:[0,4,4,0],children:d.map((s,r)=>e.jsx(fe,{fill:s.score>=80?"#10b981":s.score>=60?"#f59e0b":"#ef4444"},`cell-${r}`))})]})}):e.jsx("div",{style:{color:"#64748b"},children:"No concept data available"})]}),e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",overflowY:"auto",maxHeight:"400px"},children:[e.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(K,{color:"#ef4444",size:20})," Skill Gap Analysis"]}),t.skill_gap_analysis?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.skill_gap_analysis.map((s,r)=>e.jsxs("div",{style:{padding:"16px",background:"#0f172a",borderRadius:"12px",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{fontWeight:700,color:"#f1f5f9"},children:s.skill}),e.jsxs("div",{style:{fontSize:"11px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{color:"#94a3b8"},children:s.current_level}),e.jsx(V,{size:12,color:"#64748b"}),e.jsx("span",{style:{color:"#22c55e",fontWeight:700},children:s.target_level})]})]}),e.jsx("p",{style:{margin:0,fontSize:"13px",color:"#cbd5e1",lineHeight:"1.5"},children:s.gap_description})]},r))}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t.weaknesses&&t.weaknesses.map((s,r)=>e.jsxs("div",{style:{padding:"12px",background:"rgba(239,68,68,0.1)",borderRadius:"8px",color:"#fca5a5",fontSize:"13px"},children:["â€¢ ",s]},r)),!t.weaknesses&&e.jsx("div",{style:{color:"#94a3b8"},children:"No specific gap analysis available."})]})]})]}),t.section_feedback&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"20px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(X,{color:"#8b5cf6",size:24})," Section-wise Detailed Feedback"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[{key:"mcq",label:"MCQ Analysis",icon:e.jsx(C,{size:18}),color:"#8b5cf6"},{key:"coding",label:"Coding Analysis",icon:e.jsx(A,{size:18}),color:"#3b82f6"},{key:"sql",label:"SQL Analysis",icon:e.jsx(T,{size:18}),color:"#10b981"},{key:"interview",label:"Interview Analysis",icon:e.jsx(B,{size:18}),color:"#f59e0b"}].map(s=>t.section_feedback[s.key]&&e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"20px"},children:[e.jsxs("h4",{style:{margin:"0 0 12px",fontSize:"15px",fontWeight:700,color:s.color,display:"flex",alignItems:"center",gap:"8px"},children:[s.icon," ",s.label]}),e.jsx("p",{style:{margin:0,fontSize:"13px",lineHeight:"1.7",color:"#cbd5e1"},children:t.section_feedback[s.key]})]},s.key))})]}),t.skill_wise_scores&&Object.keys(t.skill_wise_scores).length>0&&e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",marginBottom:"32px"},children:[e.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Y,{color:"#f59e0b",size:20})," Skill-wise Assessment"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"12px"},children:Object.entries(t.skill_wise_scores).sort((s,r)=>r[1]-s[1]).map(([s,r],f)=>e.jsxs("div",{style:{padding:"14px 16px",background:"#0f172a",borderRadius:"12px",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:700,color:"#f1f5f9",textTransform:"capitalize"},children:s}),e.jsxs("span",{style:{fontSize:"13px",fontWeight:800,color:r>=80?"#22c55e":r>=60?"#f59e0b":"#ef4444"},children:[r,"%"]})]}),e.jsx("div",{style:{width:"100%",height:"6px",background:"#334155",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${r}%`,height:"100%",borderRadius:"3px",background:r>=80?"linear-gradient(90deg, #22c55e, #10b981)":r>=60?"linear-gradient(90deg, #f59e0b, #eab308)":"linear-gradient(90deg, #ef4444, #dc2626)",transition:"width 1s ease-out"}})})]},f))})]}),t.mcq_question_analysis&&t.mcq_question_analysis.length>0&&e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",marginBottom:"32px"},children:[e.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(C,{color:"#8b5cf6",size:20})," MCQ Question-wise Analysis"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:t.mcq_question_analysis.map((s,r)=>e.jsxs("div",{style:{padding:"14px 16px",background:"#0f172a",borderRadius:"12px",border:`1px solid ${s.correct?"rgba(34,197,94,0.3)":"rgba(239,68,68,0.3)"}`,display:"flex",gap:"12px",alignItems:"flex-start"},children:[e.jsx("div",{style:{minWidth:"28px",height:"28px",borderRadius:"50%",background:s.correct?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"2px"},children:s.correct?e.jsx(F,{size:16,color:"#22c55e"}):e.jsx(Q,{size:16,color:"#ef4444"})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[e.jsxs("span",{style:{fontSize:"13px",fontWeight:700,color:"#f1f5f9"},children:["Q",r+1,": ",s.question_summary]}),s.skill&&e.jsx("span",{style:{fontSize:"10px",padding:"2px 8px",borderRadius:"10px",background:"rgba(139,92,246,0.15)",color:"#a78bfa"},children:s.skill})]}),e.jsx("p",{style:{margin:0,fontSize:"12px",color:"#94a3b8",lineHeight:"1.5"},children:s.feedback})]})]},r))})]}),t.coding_problem_analysis&&t.coding_problem_analysis.length>0&&e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",marginBottom:"32px"},children:[e.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(A,{color:"#3b82f6",size:20})," Coding Problem-wise Feedback"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.coding_problem_analysis.map((s,r)=>e.jsxs("div",{style:{padding:"16px",background:"#0f172a",borderRadius:"12px",border:`1px solid ${s.solved?"rgba(59,130,246,0.3)":"rgba(245,158,11,0.3)"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#f1f5f9"},children:s.problem_title||`Problem ${r+1}`}),e.jsx("span",{style:{fontSize:"10px",fontWeight:700,padding:"3px 10px",borderRadius:"10px",background:s.solved?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)",color:s.solved?"#22c55e":"#ef4444"},children:s.solved?"âœ“ Solved":"âœ— Not Solved"})]}),e.jsx("p",{style:{margin:"0 0 8px",fontSize:"13px",color:"#cbd5e1",lineHeight:"1.6"},children:s.feedback}),s.improvement_tip&&e.jsxs("div",{style:{padding:"8px 12px",borderRadius:"8px",background:"rgba(59,130,246,0.08)",border:"1px solid rgba(59,130,246,0.15)",fontSize:"12px",color:"#93c5fd"},children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," ",s.improvement_tip]})]},r))})]}),t.sql_problem_analysis&&t.sql_problem_analysis.length>0&&e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",marginBottom:"32px"},children:[e.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(T,{color:"#10b981",size:20})," SQL Problem-wise Feedback"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.sql_problem_analysis.map((s,r)=>e.jsxs("div",{style:{padding:"16px",background:"#0f172a",borderRadius:"12px",border:`1px solid ${s.solved?"rgba(16,185,129,0.3)":"rgba(245,158,11,0.3)"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#f1f5f9"},children:s.problem_title||`SQL Problem ${r+1}`}),e.jsx("span",{style:{fontSize:"10px",fontWeight:700,padding:"3px 10px",borderRadius:"10px",background:s.solved?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)",color:s.solved?"#22c55e":"#ef4444"},children:s.solved?"âœ“ Correct":"âœ— Incorrect"})]}),e.jsx("p",{style:{margin:"0 0 8px",fontSize:"13px",color:"#cbd5e1",lineHeight:"1.6"},children:s.feedback}),s.improvement_tip&&e.jsxs("div",{style:{padding:"8px 12px",borderRadius:"8px",background:"rgba(16,185,129,0.08)",border:"1px solid rgba(16,185,129,0.15)",fontSize:"12px",color:"#6ee7b7"},children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," ",s.improvement_tip]})]},r))})]}),t.interview_feedback&&t.interview_feedback.length>0&&e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"24px",marginBottom:"32px"},children:[e.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"18px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(B,{color:"#f59e0b",size:20})," Interview Question-wise Feedback"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.interview_feedback.map((s,r)=>{const f=(s.score||0)>=7?"#22c55e":(s.score||0)>=5?"#f59e0b":"#ef4444";return e.jsxs("div",{style:{padding:"16px",background:"#0f172a",borderRadius:"12px",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("span",{style:{fontSize:"14px",fontWeight:700,color:"#f1f5f9",flex:1},children:["Q",r+1,": ",s.question_summary]}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:800,color:f,minWidth:"50px",textAlign:"right"},children:[s.score||0,"/10"]})]}),e.jsx("div",{style:{width:"100%",height:"4px",background:"#334155",borderRadius:"2px",marginBottom:"10px"},children:e.jsx("div",{style:{width:`${(s.score||0)/10*100}%`,height:"100%",borderRadius:"2px",background:f,transition:"width 1s ease-out"}})}),e.jsx("p",{style:{margin:"0 0 8px",fontSize:"13px",color:"#cbd5e1",lineHeight:"1.6"},children:s.feedback}),s.improvement_tip&&e.jsxs("div",{style:{padding:"8px 12px",borderRadius:"8px",background:"rgba(245,158,11,0.08)",border:"1px solid rgba(245,158,11,0.15)",fontSize:"12px",color:"#fbbf24"},children:["ðŸ’¡ ",e.jsx("strong",{children:"Improve:"})," ",s.improvement_tip]})]},r)})})]}),t.roadmap&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("h3",{style:{margin:"0 0 20px",fontSize:"20px",fontWeight:700,color:"#f1f5f9",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(q,{color:"#3b82f6",size:24})," Personalized Improvement Roadmap"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:t.roadmap.map((s,r)=>e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"16px",padding:"20px",position:"relative"},children:[e.jsxs("div",{style:{position:"absolute",top:"-10px",left:"20px",background:"#3b82f6",color:"white",fontSize:"11px",fontWeight:700,padding:"4px 10px",borderRadius:"10px"},children:["Week ",s.week]}),e.jsx("h4",{style:{marginTop:"12px",marginBottom:"12px",fontSize:"16px",fontWeight:700,color:"#93c5fd"},children:s.focus_area}),e.jsx("ul",{style:{margin:0,paddingLeft:"16px",color:"#cbd5e1",fontSize:"13px"},children:s.action_items.map((f,I)=>e.jsx("li",{style:{marginBottom:"6px"},children:f},I))})]},r))})]}),p&&p.length>0&&e.jsxs("div",{style:{background:"#1e293b",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"16px",padding:"24px",marginBottom:"32px"},children:[e.jsxs("h3",{style:{margin:"0 0 16px",fontSize:"18px",fontWeight:700,display:"flex",alignItems:"center",gap:"8px",color:"#f87171"},children:[e.jsx(U,{size:20})," Proctoring Violations (",p.length,")"]}),e.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:p.map((s,r)=>e.jsxs("div",{style:{padding:"10px 14px",borderRadius:"8px",marginBottom:"6px",background:s.severity==="high"?"rgba(239,68,68,0.1)":"rgba(245,158,11,0.1)",fontSize:"13px",display:"flex",justifyContent:"space-between",color:"#cbd5e1"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:s.event_type})," during ",s.test_stage]}),e.jsx("span",{style:{opacity:.7},children:new Date(s.created_at).toLocaleTimeString()})]},r))})]})]})}const S="http://localhost:3000";function je({user:b,isAdmin:g=!1}){const[n,j]=a.useState([]),[m,z]=a.useState(!0),[L,w]=a.useState(""),[y,u]=a.useState(null),[h,l]=a.useState("all"),[p,x]=a.useState({}),[t,v]=a.useState(!1),[d,R]=a.useState(!1);a.useEffect(()=>{s()},[]);const s=async()=>{try{z(!0);const i=g?`${S}/api/skill-tests/admin/all-submissions`:`${S}/api/skill-tests/student/submissions?studentId=${encodeURIComponent(b?.id||b?.userId||b?.email||"")}`,{data:o}=await _.get(i);j(o)}catch(i){w(i.response?.data?.error||i.message)}finally{z(!1)}},r=async i=>{if(y===i){u(null);return}if(u(i),!p[i])try{v(!0);const{data:o}=await _.get(`${S}/api/skill-tests/report/${i}`);x(c=>({...c,[i]:o}))}catch(o){console.error("Failed to fetch report details",o)}finally{v(!1)}},f=async()=>{if(window.confirm(`âš ï¸ Are you sure you want to DELETE ALL skill test submissions?

This will permanently remove all student attempts, reports, and proctoring logs.

This action CANNOT be undone!`))try{R(!0);const{data:i}=await _.delete(`${S}/api/skill-tests/admin/reset-all-submissions`);alert(`âœ… ${i.message}`),j([]),x({}),u(null)}catch(i){alert("âŒ Reset failed: "+(i.response?.data?.error||i.message))}finally{R(!1)}},I=async(i,o)=>{if(i.stopPropagation(),!!window.confirm("Delete this submission? This action cannot be undone."))try{await _.delete(`${S}/api/skill-tests/admin/submission/${o}`),j(c=>c.filter(W=>W.id!==o)),y===o&&u(null),delete p[o]}catch(c){alert("âŒ Delete failed: "+(c.response?.data?.error||c.message))}},E=h==="all"?n:h==="passed"?n.filter(i=>i.overall_status==="completed"):h==="failed"?n.filter(i=>i.overall_status==="failed"):n.filter(i=>i.overall_status==="in_progress"),$={total:n.length,passed:n.filter(i=>i.overall_status==="completed").length,failed:n.filter(i=>i.overall_status==="failed").length,inProgress:n.filter(i=>i.overall_status==="in_progress").length};return m?e.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#94a3b8"},children:[e.jsx(N,{size:32,style:{animation:"spin 1s linear infinite"}}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),e.jsx("p",{style:{marginTop:"12px",fontSize:"14px"},children:"Loading submissions..."})]}):e.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #8b5cf6, #6d28d9)"},children:e.jsx(M,{size:22,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"22px",fontWeight:800,color:"#f1f5f9"},children:g?"All Skill Test Submissions":"My Skill Test Submissions"}),e.jsx("p",{style:{margin:0,fontSize:"13px",color:"#9ca3af"},children:g?"View all student assessment results":"View your assessment results & reports"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("div",{style:{padding:"8px 16px",borderRadius:"10px",background:"#1e293b",border:"1px solid #334155",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",fontWeight:600},children:"PASSED"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:800,color:"#22c55e"},children:$.passed})]}),e.jsxs("div",{style:{padding:"8px 16px",borderRadius:"10px",background:"#1e293b",border:"1px solid #334155",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",fontWeight:600},children:"FAILED"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:800,color:"#ef4444"},children:$.failed})]}),g&&n.length>0&&e.jsxs("button",{onClick:f,disabled:d,style:{padding:"10px 18px",borderRadius:"10px",border:"1px solid rgba(239,68,68,0.3)",background:"rgba(239,68,68,0.1)",color:"#f87171",cursor:d?"not-allowed":"pointer",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",opacity:d?.5:1},onMouseEnter:i=>{i.target.style.background="rgba(239,68,68,0.2)"},onMouseLeave:i=>{i.target.style.background="rgba(239,68,68,0.1)"},children:[e.jsx(J,{size:15,style:d?{animation:"spin 1s linear infinite"}:{}}),d?"Resetting...":"Reset All"]})]})]}),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",padding:"4px",background:"#1e293b",borderRadius:"12px",width:"fit-content",border:"1px solid #334155"},children:["all","passed","failed","in_progress"].map(i=>e.jsx("button",{onClick:()=>l(i),style:{padding:"8px 16px",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"13px",fontWeight:600,textTransform:"capitalize",background:h===i?"#334155":"transparent",color:h===i?"white":"#94a3b8",transition:"all 0.2s"},children:i.replace("_"," ")},i))}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:E.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#64748b",background:"#1e293b",borderRadius:"16px",border:"1px solid #334155"},children:[e.jsx(M,{size:48,style:{opacity:.2,marginBottom:"16px"}}),e.jsx("p",{children:"No submissions found for this filter."})]}):E.map(i=>{const o=y===i.id,c=i.overall_status==="completed"?"#22c55e":i.overall_status==="failed"?"#ef4444":"#f59e0b",W=i.overall_status==="completed"?"rgba(34,197,94,0.1)":i.overall_status==="failed"?"rgba(239,68,68,0.1)":"rgba(245,158,11,0.1)";return e.jsxs("div",{style:{background:"#1e293b",border:`1px solid ${o?"#64748b":"#334155"}`,borderRadius:"16px",padding:"20px",transition:"all 0.2s",boxShadow:o?"0 4px 20px rgba(0,0,0,0.2)":"none"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>r(i.id),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:W,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${c}`},children:i.overall_status==="completed"?e.jsx(F,{size:24,color:c}):i.overall_status==="failed"?e.jsx(Q,{size:24,color:c}):e.jsx(Z,{size:24,color:c})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:700,color:"#f1f5f9"},children:i.title}),e.jsxs("span",{style:{fontSize:"11px",padding:"2px 8px",borderRadius:"10px",background:"#334155",color:"#94a3b8"},children:["#",i.attempt_number]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"6px",fontSize:"13px",color:"#94a3b8"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(q,{size:13})," ",new Date(i.created_at).toLocaleDateString()]}),i.student_name&&g&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#e2e8f0",fontWeight:600},children:[e.jsx(D,{size:13})," ",i.student_name]})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginBottom:"2px"},children:"Total Score"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:800,color:"#f1f5f9"},children:[Math.round((Number(i.mcq_score||0)+Number(i.coding_score||0)+Number(i.sql_score||0)+Number(i.interview_score||0)*10)/4),"%"]})]}),g&&e.jsx("div",{onClick:k=>I(k,i.id),style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(239,68,68,0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"#f87171",cursor:"pointer",transition:"all 0.2s",border:"1px solid rgba(239,68,68,0.2)"},onMouseEnter:k=>{k.currentTarget.style.background="rgba(239,68,68,0.25)"},onMouseLeave:k=>{k.currentTarget.style.background="rgba(239,68,68,0.1)"},title:"Delete this submission",children:e.jsx(ee,{size:15})}),e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#334155",display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8"},children:o?e.jsx(se,{size:20}):e.jsx(ie,{size:20})})]})]}),o&&e.jsx("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid #334155"},children:t&&!p[i.id]?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(N,{size:24,style:{animation:"spin 1s linear infinite"}})," Loading detailed report..."]}):e.jsx(he,{attemptId:i.id,initialData:p[i.id],isEmbedded:!0})})]},i.id)})})]})}export{he as S,je as a};
