const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CGpBrb7s.js","assets/graph_model-Cct8N5j1.js","assets/index-CldpBSC-.js","assets/index-Dq6ZScGd.css","assets/version-BIMhNtyv.js","assets/Portal-Cg5WPEZp.js","assets/Portal-DzMRz3y_.css","assets/SkillSubmissions-C54gLQGH.js","assets/message-circle-DNgoUMZV.js","assets/coco-ssd.es2017.esm.min-Cu4i25oh.js","assets/blazeface.esm-8Y4_H_JF.js"])))=>i.map(i=>d[i]);
import{c as at,r as i,j as e,B as It,R as dr,C as Es,g as ki,a as zi,D as Tt,S as tr,_ as Dr,b as ur,A as Ls,T as mr,u as zr,d as Ci,L as Er,e as zn,f as Ri,h as Ii,i as tt}from"./index-CldpBSC-.js";import{a as oe,C as We,b as Le,T as Be,c as ft,d as it,S as Mt,e as er,E as Cn,f as Ti,g as Rn,h as Ns,i as In,A as Ai,s as Xe,j as _t,k as cr,l as vt,F as St,L as br,B as wr,M as Pr,m as $r,D as Fr,Z as yr,n as ls,o as _i,U as Or,p as Ei,q as qr,r as Ni,t as Hr,u as Li,v as Wi,R as es,w as Di,x as Xs,X as Js,Y as Zs,y as Ss,z as Bi,G as Mi,H as en,P as Pi,I as $i,J as Fi,K as Oi,N as qi,O as Hi,Q as Qi,V as Ui,W as Ot,_ as Br,$ as Yi,a0 as Vi}from"./Portal-Cg5WPEZp.js";import{C as ps,a as Qr,P as qt,K as Gi,H as tn,T as Ki,L as At,V as ds,M as Ws,b as lr,c as ws,d as ts,S as Xi,e as rn,R as Ji,f as Tn,G as kr,g as Zi,h as ea,E as ta}from"./SkillSubmissions-C54gLQGH.js";import{C as sn,M as ra}from"./message-circle-DNgoUMZV.js";const sa=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],na=at("arrow-down-right",sa);const ia=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],nn=at("arrow-left-right",ia);const aa=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],oa=at("arrow-up-right",aa);const la=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],An=at("chart-pie",la);const da=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ca=at("circle-check",da);const pa=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],an=at("flame",pa);const ua=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],ma=at("link",ua);const ga=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],_n=at("mic-off",ga);const xa=[["path",{d:"M5 12h14",key:"1ays0h"}]],fa=at("minus",xa);const ha=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ba=at("monitor",ha);const ya=[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]],En=at("radar",ya);const ja=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],va=at("star",ja);const Sa=[["path",{d:"M10.029 4.285A2 2 0 0 0 7 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"1ystz2"}],["path",{d:"M3 4v16",key:"1ph11n"}]],wa=at("step-forward",Sa);const ka=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Ds=at("table",ka);const za=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],on=at("terminal",za);const Ca=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Ra=at("type",Ca);const Ia=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],cs=at("video-off",Ia);const Ta=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ln=at("volume-2",Ta);const Aa=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],_a=at("volume-x",Aa),Ea="http://localhost:3000/api";function Na(r,n){const d=[...r];let u=d.length;const c=()=>(n=(n*9301+49297)%233280,n/233280);for(;u>0;){const g=Math.floor(c()*u);u--,[d[u],d[g]]=[d[g],d[u]]}return d}function La(r,n){const d=`${r}-${n}`;let u=0;for(let c=0;c<d.length;c++){const g=d.charCodeAt(c);u=(u<<5)-u+g,u=u&u}return Math.abs(u)}function Wa({test:r,user:n,onClose:d,onComplete:u}){const[c,g]=i.useState(0),[f,j]=i.useState({}),[p,o]=i.useState(r.duration*60),[y,T]=i.useState(0),[R,h]=i.useState(!1),[W,m]=i.useState(""),[k,L]=i.useState(!1),[D,S]=i.useState(!1),[b,I]=i.useState(null),[$,G]=i.useState(!1),ae=r.questions||[],ne=i.useMemo(()=>{const B=La(n.id,r.id);return Na(ae,B)},[ae,n.id,r.id]),v=i.useRef(null),N=i.useRef(f),A=i.useRef(y),te=i.useRef(p);i.useEffect(()=>{N.current=f},[f]),i.useEffect(()=>{A.current=y},[y]),i.useEffect(()=>{te.current=p},[p]),i.useEffect(()=>((async()=>{try{await document.documentElement.requestFullscreen()}catch(K){console.log("Fullscreen request failed:",K)}})(),()=>{document.fullscreenElement&&document.exitFullscreen().catch(()=>{})}),[]),i.useEffect(()=>{if(!(b||D))return v.current=setInterval(()=>{o(B=>B<=1?(clearInterval(v.current),pe(),0):B-1)},1e3),()=>clearInterval(v.current)},[b,D]);const se=r.maxTabSwitches||3;i.useEffect(()=>{const B=()=>{document.hidden&&!b&&!D&&T(K=>{const V=K+1;return V>=se?(m(`ðŸš« DISQUALIFIED! You have exceeded the maximum allowed tab switches (${V}/${se}). Test terminated.`),h(!0),S(!0),setTimeout(()=>{pe(!0)},3e3)):(m(`âš ï¸ Tab switch detected! (${V}/${se} violations) ${se-V} more will disqualify you!`),h(!0),setTimeout(()=>h(!1),4e3)),V})};return document.addEventListener("visibilitychange",B),()=>document.removeEventListener("visibilitychange",B)},[b,D]),i.useEffect(()=>{const B=V=>V.preventDefault(),K=V=>{(V.ctrlKey||V.altKey||V.metaKey)&&["c","v","u","p","s","a"].includes(V.key.toLowerCase())&&V.preventDefault(),(V.key==="F12"||V.key==="Escape")&&V.preventDefault()};return document.addEventListener("contextmenu",B),document.addEventListener("keydown",K),()=>{document.removeEventListener("contextmenu",B),document.removeEventListener("keydown",K)}},[]);const ie=B=>{const K=Math.floor(B/60),V=B%60;return`${K.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`},ge=(B,K)=>{j(V=>({...V,[B]:K}))},pe=async(B=!1)=>{L(!0);try{const K=N.current,V=A.current,Ae=te.current,Fe=await oe.post(`${Ea}/aptitude/${r.id}/submit`,{studentId:n.id,answers:B?{}:K,timeSpent:r.duration*60-Ae,tabSwitches:V});I(Fe.data.submission),G(!0)}catch(K){console.error("Submit failed:",K)}finally{L(!1)}},de=async()=>{if(Object.keys(f).length<ne.length){const B=ne.length-Object.keys(f).length;if(!window.confirm(`You have ${B} unanswered question(s). Submit anyway?`))return}await pe()},ce=Object.keys(f).length;return $&&b?e.jsx("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflowY:"auto"},children:e.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(139, 92, 246, 0.3)",maxWidth:"900px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(15, 23, 42, 0.5)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:b.status==="passed"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(It,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700,color:"white"},children:"Aptitude Test Report"}),e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.5)",fontSize:"0.9rem"},children:r.title})]})]}),e.jsx("button",{onClick:()=>{document.fullscreenElement&&document.exitFullscreen(),d(),u&&u(b)},style:{background:"rgba(71, 85, 105, 0.5)",border:"none",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},children:e.jsx(We,{size:20})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:b.status==="passed"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"16px",border:`1px solid ${b.status==="passed"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"4rem",fontWeight:800,color:b.status==="passed"?"#10b981":"#ef4444",lineHeight:1},children:[b.score,"%"]}),e.jsx("div",{style:{color:"rgba(255,255,255,0.5)",marginTop:"0.5rem"},children:"Overall Score"})]}),e.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"12px",background:b.status==="passed"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",border:`1px solid ${b.status==="passed"?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,display:"flex",alignItems:"center",gap:"0.75rem"},children:[b.status==="passed"?e.jsx(Le,{size:28,color:"#10b981"}):e.jsx(We,{size:28,color:"#ef4444"}),e.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:b.status==="passed"?"#10b981":"#ef4444"},children:b.status==="passed"?"PASSED":"FAILED"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(59, 130, 246, 0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#3b82f6"},children:b.totalQuestions}),e.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:"Total Questions"})]}),e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(16, 185, 129, 0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#10b981"},children:b.correctCount}),e.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:"Correct"})]}),e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(239, 68, 68, 0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#ef4444"},children:b.totalQuestions-b.correctCount}),e.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:"Incorrect"})]}),e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(245, 158, 11, 0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:(b.tabSwitches||y||0)>0?"#f59e0b":"#10b981"},children:b.tabSwitches||y||0}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[e.jsx(Be,{size:12}),"Violations"]})]}),e.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(139, 92, 246, 0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#8b5cf6"},children:b.timeSpent?`${Math.floor(b.timeSpent/60)}m`:`${Math.round((r.duration*60-p)/60)}m`}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[e.jsx(ft,{size:12}),"Time Spent"]})]})]}),(b.tabSwitches||y||0)>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem 1.5rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",border:"1px solid rgba(245, 158, 11, 0.3)",marginBottom:"2rem"},children:[e.jsx(Be,{size:24,color:"#f59e0b"}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#f59e0b"},children:"Tab Switch Violations Detected"}),e.jsxs("p",{style:{margin:"0.25rem 0 0",color:"rgba(255,255,255,0.6)",fontSize:"0.9rem"},children:["You switched tabs/windows ",b.tabSwitches||y||0," time(s) during the test."]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{style:{margin:"0 0 1rem",fontSize:"1.1rem",fontWeight:600,color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18,color:"#8b5cf6"}),"Detailed Question Breakdown"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:b.questionResults?.map((B,K)=>e.jsxs("div",{style:{padding:"1.25rem",background:B.isCorrect?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",border:`1px solid ${B.isCorrect?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,borderRadius:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsx("span",{style:{minWidth:"28px",height:"28px",borderRadius:"50%",background:B.isCorrect?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:700,flexShrink:0},children:B.isCorrect?"âœ“":"âœ—"}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#8b5cf6",textTransform:"uppercase",letterSpacing:"0.05em"},children:["Question ",K+1]}),B.category&&e.jsx("span",{style:{fontSize:"0.7rem",padding:"0.2rem 0.6rem",background:"rgba(139, 92, 246, 0.2)",borderRadius:"20px",color:"#a78bfa"},children:B.category})]}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:500,color:"white",lineHeight:1.5},children:B.question})]})]}),e.jsxs("div",{style:{marginLeft:"2.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem 1rem",background:B.isCorrect?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:`1px solid ${B.isCorrect?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"rgba(255,255,255,0.5)",minWidth:"100px"},children:"Your Answer:"}),e.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:B.isCorrect?"#10b981":"#ef4444"},children:B.userAnswer||"(Not answered)"})]}),!B.isCorrect&&e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"rgba(255,255,255,0.5)",minWidth:"100px"},children:"Correct Answer:"}),e.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:"#10b981"},children:B.correctAnswer})]}),B.explanation&&e.jsxs("div",{style:{padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.05)",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.15)"},children:[e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#a78bfa",display:"block",marginBottom:"0.25rem"},children:"ðŸ’¡ Explanation"}),e.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"rgba(255,255,255,0.7)",lineHeight:1.5},children:B.explanation})]})]})]},K))})]})]}),e.jsx("div",{style:{padding:"1.5rem 2rem",borderTop:"1px solid rgba(139, 92, 246, 0.2)",background:"rgba(15, 23, 42, 0.5)",display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{onClick:()=>{document.fullscreenElement&&document.exitFullscreen(),d(),u&&u(b)},style:{padding:"0.875rem 2rem",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",border:"none",borderRadius:"10px",color:"white",fontSize:"1rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:"Close & Return"})})]})}):e.jsxs("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 2rem",background:"rgba(15, 23, 42, 0.8)",borderBottom:"1px solid rgba(139, 92, 246, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(It,{size:28,color:"#8b5cf6"}),e.jsx("div",{children:e.jsxs("h1",{style:{margin:0,fontSize:"1.25rem",fontWeight:700,color:"white"},children:["Aptitude Test â€“ ",r.title]})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:p<60?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)",padding:"0.5rem 1rem",borderRadius:"8px",border:`1px solid ${p<60?"#ef4444":"#10b981"}`},children:[e.jsx(ft,{size:20,color:p<60?"#ef4444":"#10b981"}),e.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"monospace",color:p<60?"#ef4444":"#10b981"},children:ie(p)})]})]}),R&&e.jsxs("div",{style:{background:y>=3?"linear-gradient(135deg, #dc2626, #b91c1c)":"linear-gradient(135deg, #f59e0b, #d97706)",padding:"1rem 2rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",animation:"pulse 1s infinite"},children:[e.jsx(Be,{size:24,color:"white"}),e.jsx("span",{style:{color:"white",fontWeight:600},children:W})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{width:"200px",background:"rgba(30, 41, 59, 0.5)",borderRight:"1px solid rgba(139, 92, 246, 0.2)",padding:"1.5rem",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"0.9rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:16})," Question Palette"]}),e.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:[ce,"/",ne.length," Answered"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginBottom:"1.5rem"},children:ne.map((B,K)=>e.jsx("button",{onClick:()=>g(K),style:{width:"36px",height:"36px",borderRadius:"8px",border:c===K?"2px solid #3b82f6":"none",background:f[B.id]?"linear-gradient(135deg, #10b981, #06b6d4)":c===K?"rgba(59, 130, 246, 0.3)":"rgba(71, 85, 105, 0.5)",color:"white",fontWeight:600,fontSize:"0.85rem",cursor:"pointer",transition:"all 0.2s"},children:K+1},B.id))}),e.jsxs("div",{style:{marginTop:"auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"4px",background:"linear-gradient(135deg, #10b981, #06b6d4)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Answered"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"4px",background:"rgba(71, 85, 105, 0.5)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Unanswered"})]})]}),e.jsxs("button",{onClick:de,disabled:k,style:{marginTop:"1.5rem",width:"100%",padding:"1rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"12px",color:"white",fontSize:"0.95rem",fontWeight:600,cursor:k?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",opacity:k?.7:1},children:[e.jsx(Mt,{size:18}),k?"Submitting...":"Submit Test"]})]}),e.jsx("div",{style:{flex:1,padding:"2rem 4rem",overflowY:"auto"},children:ne[c]&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("span",{style:{color:"#8b5cf6",fontSize:"0.9rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:["Question ",c+1," of ",ne.length]}),e.jsx("h2",{style:{margin:"1rem 0",fontSize:"1.5rem",fontWeight:600,color:"white",lineHeight:1.5},children:ne[c].question}),ne[c].category&&e.jsx("span",{style:{display:"inline-block",padding:"0.25rem 0.75rem",background:"rgba(139, 92, 246, 0.2)",borderRadius:"20px",fontSize:"0.8rem",color:"#a78bfa"},children:ne[c].category})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:ne[c].options.map((B,K)=>{const V=["A","B","C","D"][K],Ae=f[ne[c].id]===B;return e.jsxs("button",{onClick:()=>ge(ne[c].id,B),style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1.25rem 1.5rem",background:Ae?"rgba(59, 130, 246, 0.15)":"rgba(30, 41, 59, 0.8)",border:Ae?"2px solid #3b82f6":"1px solid rgba(71, 85, 105, 0.5)",borderRadius:"12px",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:Ae?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"rgba(71, 85, 105, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:700,fontSize:"0.9rem"},children:V}),e.jsx("span",{style:{color:Ae?"#3b82f6":"rgba(255,255,255,0.9)",fontSize:"1.05rem",fontWeight:Ae?600:400},children:B})]},K)})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"3rem"},children:[e.jsxs("button",{onClick:()=>g(B=>Math.max(0,B-1)),disabled:c===0,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:"rgba(71, 85, 105, 0.5)",border:"none",borderRadius:"8px",color:c===0?"rgba(255,255,255,0.3)":"white",cursor:c===0?"not-allowed":"pointer",fontSize:"0.95rem",fontWeight:500},children:[e.jsx(ps,{size:20})," Previous"]}),e.jsxs("button",{onClick:()=>g(B=>Math.min(ne.length-1,B+1)),disabled:c===ne.length-1,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:c===ne.length-1?"rgba(71, 85, 105, 0.5)":"linear-gradient(135deg, #3b82f6, #8b5cf6)",border:"none",borderRadius:"8px",color:c===ne.length-1?"rgba(255,255,255,0.3)":"white",cursor:c===ne.length-1?"not-allowed":"pointer",fontSize:"0.95rem",fontWeight:500},children:["Next ",e.jsx(Qr,{size:20})]})]})]})})]})]})}function dn(r,n){(n==null||n>r.length)&&(n=r.length);for(var d=0,u=Array(n);d<n;d++)u[d]=r[d];return u}function Da(r){if(Array.isArray(r))return r}function Ba(r,n,d){return(n=Ha(n))in r?Object.defineProperty(r,n,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[n]=d,r}function Ma(r,n){var d=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(d!=null){var u,c,g,f,j=[],p=!0,o=!1;try{if(g=(d=d.call(r)).next,n!==0)for(;!(p=(u=g.call(d)).done)&&(j.push(u.value),j.length!==n);p=!0);}catch(y){o=!0,c=y}finally{try{if(!p&&d.return!=null&&(f=d.return(),Object(f)!==f))return}finally{if(o)throw c}}return j}}function Pa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cn(r,n){var d=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);n&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),d.push.apply(d,u)}return d}function pn(r){for(var n=1;n<arguments.length;n++){var d=arguments[n]!=null?arguments[n]:{};n%2?cn(Object(d),!0).forEach(function(u){Ba(r,u,d[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(d)):cn(Object(d)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(d,u))})}return r}function $a(r,n){if(r==null)return{};var d,u,c=Fa(r,n);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(r);for(u=0;u<g.length;u++)d=g[u],n.indexOf(d)===-1&&{}.propertyIsEnumerable.call(r,d)&&(c[d]=r[d])}return c}function Fa(r,n){if(r==null)return{};var d={};for(var u in r)if({}.hasOwnProperty.call(r,u)){if(n.indexOf(u)!==-1)continue;d[u]=r[u]}return d}function Oa(r,n){return Da(r)||Ma(r,n)||Qa(r,n)||Pa()}function qa(r,n){if(typeof r!="object"||!r)return r;var d=r[Symbol.toPrimitive];if(d!==void 0){var u=d.call(r,n);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function Ha(r){var n=qa(r,"string");return typeof n=="symbol"?n:n+""}function Qa(r,n){if(r){if(typeof r=="string")return dn(r,n);var d={}.toString.call(r).slice(8,-1);return d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set"?Array.from(r):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?dn(r,n):void 0}}function Ua(r,n,d){return n in r?Object.defineProperty(r,n,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[n]=d,r}function un(r,n){var d=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);n&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),d.push.apply(d,u)}return d}function mn(r){for(var n=1;n<arguments.length;n++){var d=arguments[n]!=null?arguments[n]:{};n%2?un(Object(d),!0).forEach(function(u){Ua(r,u,d[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(d)):un(Object(d)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(d,u))})}return r}function Ya(){for(var r=arguments.length,n=new Array(r),d=0;d<r;d++)n[d]=arguments[d];return function(u){return n.reduceRight(function(c,g){return g(c)},u)}}function Wr(r){return function n(){for(var d=this,u=arguments.length,c=new Array(u),g=0;g<u;g++)c[g]=arguments[g];return c.length>=r.length?r.apply(this,c):function(){for(var f=arguments.length,j=new Array(f),p=0;p<f;p++)j[p]=arguments[p];return n.apply(d,[].concat(c,j))}}}function us(r){return{}.toString.call(r).includes("Object")}function Va(r){return!Object.keys(r).length}function Ur(r){return typeof r=="function"}function Ga(r,n){return Object.prototype.hasOwnProperty.call(r,n)}function Ka(r,n){return us(n)||pr("changeType"),Object.keys(n).some(function(d){return!Ga(r,d)})&&pr("changeField"),n}function Xa(r){Ur(r)||pr("selectorType")}function Ja(r){Ur(r)||us(r)||pr("handlerType"),us(r)&&Object.values(r).some(function(n){return!Ur(n)})&&pr("handlersType")}function Za(r){r||pr("initialIsRequired"),us(r)||pr("initialType"),Va(r)&&pr("initialContent")}function eo(r,n){throw new Error(r[n]||r.default)}var to={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},pr=Wr(eo)(to),rs={changes:Ka,selector:Xa,handler:Ja,initial:Za};function ro(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};rs.initial(r),rs.handler(n);var d={current:r},u=Wr(io)(d,n),c=Wr(no)(d),g=Wr(rs.changes)(r),f=Wr(so)(d);function j(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(y){return y};return rs.selector(o),o(d.current)}function p(o){Ya(u,c,g,f)(o)}return[j,p]}function so(r,n){return Ur(n)?n(r.current):n}function no(r,n){return r.current=mn(mn({},r.current),n),n}function io(r,n,d){return Ur(n)?n(r.current):Object.keys(d).forEach(function(u){var c;return(c=n[u])===null||c===void 0?void 0:c.call(n,r.current[u])}),d}var ao={create:ro},oo={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function lo(r){return function n(){for(var d=this,u=arguments.length,c=new Array(u),g=0;g<u;g++)c[g]=arguments[g];return c.length>=r.length?r.apply(this,c):function(){for(var f=arguments.length,j=new Array(f),p=0;p<f;p++)j[p]=arguments[p];return n.apply(d,[].concat(c,j))}}}function co(r){return{}.toString.call(r).includes("Object")}function po(r){return r||gn("configIsRequired"),co(r)||gn("configType"),r.urls?(uo(),{paths:{vs:r.urls.monacoBase}}):r}function uo(){console.warn(Nn.deprecation)}function mo(r,n){throw new Error(r[n]||r.default)}var Nn={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},gn=lo(mo)(Nn),go={config:po},xo=function(){for(var n=arguments.length,d=new Array(n),u=0;u<n;u++)d[u]=arguments[u];return function(c){return d.reduceRight(function(g,f){return f(g)},c)}};function Ln(r,n){return Object.keys(n).forEach(function(d){n[d]instanceof Object&&r[d]&&Object.assign(n[d],Ln(r[d],n[d]))}),pn(pn({},r),n)}var fo={type:"cancelation",msg:"operation is manually canceled"};function ks(r){var n=!1,d=new Promise(function(u,c){r.then(function(g){return n?c(fo):u(g)}),r.catch(c)});return d.cancel=function(){return n=!0},d}var ho=["monaco"],bo=ao.create({config:oo,isInitialized:!1,resolve:null,reject:null,monaco:null}),Wn=Oa(bo,2),Yr=Wn[0],ms=Wn[1];function yo(r){var n=go.config(r),d=n.monaco,u=$a(n,ho);ms(function(c){return{config:Ln(c.config,u),monaco:d}})}function jo(){var r=Yr(function(n){var d=n.monaco,u=n.isInitialized,c=n.resolve;return{monaco:d,isInitialized:u,resolve:c}});if(!r.isInitialized){if(ms({isInitialized:!0}),r.monaco)return r.resolve(r.monaco),ks(zs);if(window.monaco&&window.monaco.editor)return Dn(window.monaco),r.resolve(window.monaco),ks(zs);xo(vo,wo)(ko)}return ks(zs)}function vo(r){return document.body.appendChild(r)}function So(r){var n=document.createElement("script");return r&&(n.src=r),n}function wo(r){var n=Yr(function(u){var c=u.config,g=u.reject;return{config:c,reject:g}}),d=So("".concat(n.config.paths.vs,"/loader.js"));return d.onload=function(){return r()},d.onerror=n.reject,d}function ko(){var r=Yr(function(d){var u=d.config,c=d.resolve,g=d.reject;return{config:u,resolve:c,reject:g}}),n=window.require;n.config(r.config),n(["vs/editor/editor.main"],function(d){var u=d.m||d;Dn(u),r.resolve(u)},function(d){r.reject(d)})}function Dn(r){Yr().monaco||ms({monaco:r})}function zo(){return Yr(function(r){var n=r.monaco;return n})}var zs=new Promise(function(r,n){return ms({resolve:r,reject:n})}),Bn={config:yo,init:jo,__getMonacoInstance:zo},Co={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Cs=Co,Ro={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Io=Ro;function To({children:r}){return dr.createElement("div",{style:Io.container},r)}var Ao=To,_o=Ao;function Eo({width:r,height:n,isEditorReady:d,loading:u,_ref:c,className:g,wrapperProps:f}){return dr.createElement("section",{style:{...Cs.wrapper,width:r,height:n},...f},!d&&dr.createElement(_o,null,u),dr.createElement("div",{ref:c,style:{...Cs.fullWidth,...!d&&Cs.hide},className:g}))}var No=Eo,Mn=i.memo(No);function Lo(r){i.useEffect(r,[])}var Pn=Lo;function Wo(r,n,d=!0){let u=i.useRef(!0);i.useEffect(u.current||!d?()=>{u.current=!1}:r,n)}var Rt=Wo;function Mr(){}function Sr(r,n,d,u){return Do(r,u)||Bo(r,n,d,u)}function Do(r,n){return r.editor.getModel($n(r,n))}function Bo(r,n,d,u){return r.editor.createModel(n,d,u?$n(r,u):void 0)}function $n(r,n){return r.Uri.parse(n)}function Mo({original:r,modified:n,language:d,originalLanguage:u,modifiedLanguage:c,originalModelPath:g,modifiedModelPath:f,keepCurrentOriginalModel:j=!1,keepCurrentModifiedModel:p=!1,theme:o="light",loading:y="Loading...",options:T={},height:R="100%",width:h="100%",className:W,wrapperProps:m={},beforeMount:k=Mr,onMount:L=Mr}){let[D,S]=i.useState(!1),[b,I]=i.useState(!0),$=i.useRef(null),G=i.useRef(null),ae=i.useRef(null),ne=i.useRef(L),v=i.useRef(k),N=i.useRef(!1);Pn(()=>{let ie=Bn.init();return ie.then(ge=>(G.current=ge)&&I(!1)).catch(ge=>ge?.type!=="cancelation"&&console.error("Monaco initialization: error:",ge)),()=>$.current?se():ie.cancel()}),Rt(()=>{if($.current&&G.current){let ie=$.current.getOriginalEditor(),ge=Sr(G.current,r||"",u||d||"text",g||"");ge!==ie.getModel()&&ie.setModel(ge)}},[g],D),Rt(()=>{if($.current&&G.current){let ie=$.current.getModifiedEditor(),ge=Sr(G.current,n||"",c||d||"text",f||"");ge!==ie.getModel()&&ie.setModel(ge)}},[f],D),Rt(()=>{let ie=$.current.getModifiedEditor();ie.getOption(G.current.editor.EditorOption.readOnly)?ie.setValue(n||""):n!==ie.getValue()&&(ie.executeEdits("",[{range:ie.getModel().getFullModelRange(),text:n||"",forceMoveMarkers:!0}]),ie.pushUndoStop())},[n],D),Rt(()=>{$.current?.getModel()?.original.setValue(r||"")},[r],D),Rt(()=>{let{original:ie,modified:ge}=$.current.getModel();G.current.editor.setModelLanguage(ie,u||d||"text"),G.current.editor.setModelLanguage(ge,c||d||"text")},[d,u,c],D),Rt(()=>{G.current?.editor.setTheme(o)},[o],D),Rt(()=>{$.current?.updateOptions(T)},[T],D);let A=i.useCallback(()=>{if(!G.current)return;v.current(G.current);let ie=Sr(G.current,r||"",u||d||"text",g||""),ge=Sr(G.current,n||"",c||d||"text",f||"");$.current?.setModel({original:ie,modified:ge})},[d,n,c,r,u,g,f]),te=i.useCallback(()=>{!N.current&&ae.current&&($.current=G.current.editor.createDiffEditor(ae.current,{automaticLayout:!0,...T}),A(),G.current?.editor.setTheme(o),S(!0),N.current=!0)},[T,o,A]);i.useEffect(()=>{D&&ne.current($.current,G.current)},[D]),i.useEffect(()=>{!b&&!D&&te()},[b,D,te]);function se(){let ie=$.current?.getModel();j||ie?.original?.dispose(),p||ie?.modified?.dispose(),$.current?.dispose()}return dr.createElement(Mn,{width:h,height:R,isEditorReady:D,loading:y,_ref:ae,className:W,wrapperProps:m})}var Po=Mo;i.memo(Po);function $o(r){let n=i.useRef();return i.useEffect(()=>{n.current=r},[r]),n.current}var Fo=$o,ss=new Map;function Oo({defaultValue:r,defaultLanguage:n,defaultPath:d,value:u,language:c,path:g,theme:f="light",line:j,loading:p="Loading...",options:o={},overrideServices:y={},saveViewState:T=!0,keepCurrentModel:R=!1,width:h="100%",height:W="100%",className:m,wrapperProps:k={},beforeMount:L=Mr,onMount:D=Mr,onChange:S,onValidate:b=Mr}){let[I,$]=i.useState(!1),[G,ae]=i.useState(!0),ne=i.useRef(null),v=i.useRef(null),N=i.useRef(null),A=i.useRef(D),te=i.useRef(L),se=i.useRef(),ie=i.useRef(u),ge=Fo(g),pe=i.useRef(!1),de=i.useRef(!1);Pn(()=>{let K=Bn.init();return K.then(V=>(ne.current=V)&&ae(!1)).catch(V=>V?.type!=="cancelation"&&console.error("Monaco initialization: error:",V)),()=>v.current?B():K.cancel()}),Rt(()=>{let K=Sr(ne.current,r||u||"",n||c||"",g||d||"");K!==v.current?.getModel()&&(T&&ss.set(ge,v.current?.saveViewState()),v.current?.setModel(K),T&&v.current?.restoreViewState(ss.get(g)))},[g],I),Rt(()=>{v.current?.updateOptions(o)},[o],I),Rt(()=>{!v.current||u===void 0||(v.current.getOption(ne.current.editor.EditorOption.readOnly)?v.current.setValue(u):u!==v.current.getValue()&&(de.current=!0,v.current.executeEdits("",[{range:v.current.getModel().getFullModelRange(),text:u,forceMoveMarkers:!0}]),v.current.pushUndoStop(),de.current=!1))},[u],I),Rt(()=>{let K=v.current?.getModel();K&&c&&ne.current?.editor.setModelLanguage(K,c)},[c],I),Rt(()=>{j!==void 0&&v.current?.revealLine(j)},[j],I),Rt(()=>{ne.current?.editor.setTheme(f)},[f],I);let ce=i.useCallback(()=>{if(!(!N.current||!ne.current)&&!pe.current){te.current(ne.current);let K=g||d,V=Sr(ne.current,u||r||"",n||c||"",K||"");v.current=ne.current?.editor.create(N.current,{model:V,automaticLayout:!0,...o},y),T&&v.current.restoreViewState(ss.get(K)),ne.current.editor.setTheme(f),j!==void 0&&v.current.revealLine(j),$(!0),pe.current=!0}},[r,n,d,u,c,g,o,y,T,f,j]);i.useEffect(()=>{I&&A.current(v.current,ne.current)},[I]),i.useEffect(()=>{!G&&!I&&ce()},[G,I,ce]),ie.current=u,i.useEffect(()=>{I&&S&&(se.current?.dispose(),se.current=v.current?.onDidChangeModelContent(K=>{de.current||S(v.current.getValue(),K)}))},[I,S]),i.useEffect(()=>{if(I){let K=ne.current.editor.onDidChangeMarkers(V=>{let Ae=v.current.getModel()?.uri;if(Ae&&V.find(Fe=>Fe.path===Ae.path)){let Fe=ne.current.editor.getModelMarkers({resource:Ae});b?.(Fe)}});return()=>{K?.dispose()}}return()=>{}},[I,b]);function B(){se.current?.dispose(),R?T&&ss.set(g,v.current.saveViewState()):v.current.getModel()?.dispose(),v.current.dispose()}return dr.createElement(Mn,{width:h,height:W,isEditorReady:I,loading:p,_ref:N,className:m,wrapperProps:k})}var qo=Oo,Ho=i.memo(qo),Vr=Ho;const Qo="http://localhost:3000/api";function Fn({problemId:r,code:n,language:d,onRunComplete:u,showRunButton:c=!0,isGlobalTest:g=!1}){const[f,j]=i.useState(!1),[p,o]=i.useState(null),[y,T]=i.useState("all"),R=async()=>{if(!(!n?.trim()||!r)){j(!0),o(null);try{const L=await oe.post(`${Qo}/run-with-tests`,{problemId:r,code:n,language:d,isGlobalTest:g});o(L.data),u&&u(L.data)}catch(L){o({success:!1,error:L.response?.data?.error||"Execution failed"})}finally{j(!1)}}},h=()=>{if(!p?.testResults)return[];switch(y){case"passed":return p.testResults.filter(L=>L.passed);case"failed":return p.testResults.filter(L=>!L.passed);default:return p.testResults}},W=p?.testResults?.filter(L=>L.passed).length||0,m=p?.testResults?.length||0;p?.testResults?.filter(L=>!L.isHidden);const k=p?.testResults?.filter(L=>L.isHidden)||[];return e.jsxs("div",{children:[c&&e.jsx("button",{onClick:R,disabled:f||!n?.trim(),style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center",padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:f||!n?.trim()?"not-allowed":"pointer",opacity:f||!n?.trim()?.6:1},children:f?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-small"}),"Running Tests..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qt,{size:16}),"Run with Test Cases"]})}),!p&&!f&&e.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"rgba(59, 130, 246, 0.05)",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[e.jsx(on,{size:40,style:{marginBottom:"0.75rem",color:"#3b82f6",opacity:.7}}),e.jsx("div",{style:{color:"var(--text-main)",fontWeight:500,marginBottom:"0.5rem"},children:"Ready to Test"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:'Click "Run with Test Cases" to execute your code against all test cases'})]}),p&&!p.success&&p.error&&e.jsxs("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.2)",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(Be,{size:18,color:"#ef4444"}),e.jsx("span",{style:{fontWeight:600,color:"#ef4444"},children:"Execution Error"})]}),e.jsx("pre",{style:{margin:0,fontSize:"0.8rem",color:"#f87171",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},children:p.error})]}),p&&p.testResults&&e.jsxs("div",{style:{background:"var(--bg-dark)",borderRadius:"12px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{padding:"1rem",background:W===m?"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.1))":"linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(234, 88, 12, 0.1))",borderBottom:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[W===m?e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #10b981, #059669)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"white"})}):e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #f97316, #ea580c)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Es,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:W===m?"#10b981":"#f97316"},children:W===m?"All Tests Passed!":`${W}/${m} Tests Passed`}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:["Score: ",p.score||0," / ",p.totalPoints||0," points"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#10b981",fontWeight:600},children:[e.jsx(Le,{size:16})," ",W]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Passed"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#ef4444",fontWeight:600},children:[e.jsx(We,{size:16})," ",m-W]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Failed"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#8b5cf6",fontWeight:600},children:[e.jsx(Cn,{size:16})," ",k.length]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Hidden"})]})]})]}),e.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border-color)"},children:["all","passed","failed"].map(L=>e.jsx("button",{onClick:()=>T(L),style:{flex:1,padding:"0.75rem",background:y===L?"var(--bg-card)":"transparent",border:"none",borderBottom:y===L?"2px solid var(--primary)":"2px solid transparent",color:y===L?"var(--primary)":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,textTransform:"capitalize"},children:L==="all"?`All (${m})`:L==="passed"?`Passed (${W})`:`Failed (${m-W})`},L))}),e.jsxs("div",{style:{maxHeight:"400px",overflowY:"auto"},children:[h().map((L,D)=>e.jsx(Uo,{result:L,index:D+1},L.testCaseId||D)),h().length===0&&e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No test cases in this category"})]})]}),p&&(!p.testResults||p.testResults.length===0)&&!p.error&&e.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"var(--bg-dark)",borderRadius:"12px",color:"var(--text-muted)"},children:[e.jsx(on,{size:40,style:{marginBottom:"0.5rem",opacity:.5}}),e.jsx("div",{children:"No test cases found for this problem"}),e.jsx("div",{style:{fontSize:"0.8rem",marginTop:"0.25rem"},children:"Ask your mentor to add test cases"})]})]})}function Uo({result:r,index:n}){const[d,u]=i.useState(!r.passed);return e.jsxs("div",{style:{borderBottom:"1px solid var(--border-color)",background:r.passed?"transparent":"rgba(239, 68, 68, 0.03)"},children:[e.jsxs("div",{onClick:()=>!r.isHidden&&u(!d),style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:r.isHidden?"default":"pointer",transition:"background 0.2s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.passed?e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Le,{size:14,color:"#10b981"})}):e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(We,{size:14,color:"#ef4444"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("span",{style:{fontWeight:500,fontSize:"0.9rem"},children:["Test Case ",n]}),r.isHidden&&e.jsxs("span",{style:{padding:"0.15rem 0.5rem",background:"rgba(139, 92, 246, 0.2)",color:"#a78bfa",borderRadius:"4px",fontSize:"0.65rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Cn,{size:10})," Hidden"]})]}),r.description&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.15rem"},children:r.description})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.executionTime&&e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(ft,{size:12})," ",r.executionTime,"ms"]}),e.jsxs("span",{style:{padding:"0.25rem 0.5rem",background:r.passed?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:r.passed?"#10b981":"#ef4444",borderRadius:"4px",fontSize:"0.75rem",fontWeight:600},children:[r.points||0," pts"]})]})]}),!r.isHidden&&d&&e.jsxs("div",{style:{padding:"0 1rem 1rem 3.5rem",display:"grid",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Input"}),e.jsx("pre",{style:{margin:0,padding:"0.5rem 0.75rem",background:"var(--bg-card)",borderRadius:"6px",fontSize:"0.8rem",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:String(r.input??"(no input)")})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Expected Output"}),e.jsx("pre",{style:{margin:0,padding:"0.5rem 0.75rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"6px",fontSize:"0.8rem",color:"#10b981",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",border:"1px solid rgba(16, 185, 129, 0.2)"},children:String(r.expectedOutput||r.expected_output||"(empty)")})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Your Output"}),e.jsx("pre",{style:{margin:0,padding:"0.5rem 0.75rem",background:r.passed?"rgba(30, 41, 59, 0.4)":"rgba(239, 68, 68, 0.05)",borderRadius:"6px",fontSize:"0.8rem",color:r.passed?"#e2e8f0":"#ef4444",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",border:`1px solid ${r.passed?"rgba(255, 255, 255, 0.05)":"rgba(239, 68, 68, 0.1)"}`},children:String(r.actualOutput||r.output||"(no output)")})]})]}),r.isHidden&&e.jsx("div",{style:{padding:"0 1rem 0.75rem 3.5rem",fontSize:"0.75rem",color:"var(--text-muted)",fontStyle:"italic"},children:r.passed?"âœ“ Your code passed this hidden test case":"âœ— Your code failed this hidden test case. Details are hidden."})]})}var Rs={exports:{}};const Yo={},Vo=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),xn=ki(Vo);var fn;function Go(){return fn||(fn=1,(function(r,n){var d=void 0,u=function(c){return d||(d=new Promise(function(g,f){var j=typeof c<"u"?c:{},p=j.onAbort;j.onAbort=function(t){f(new Error(t)),p&&p(t)},j.postRun=j.postRun||[],j.postRun.push(function(){g(j)}),r=void 0;var o;o||=typeof j<"u"?j:{};var y=typeof window=="object",T=typeof WorkerGlobalScope<"u",R=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";o.onRuntimeInitialized=function(){function t(w,Q){switch(typeof Q){case"boolean":Si(w,Q?1:0);break;case"number":yi(w,Q);break;case"string":ji(w,Q,-1,-1);break;case"object":if(Q===null)Ys(w);else if(Q.length!=null){var le=Xr(Q,Kr);vi(w,le,Q.length,-1),Jr(le)}else Zr(w,"Wrong API use : tried to return a value of an unknown type ("+Q+").",-1);break;default:Ys(w)}}function s(w,Q){for(var le=[],je=0;je<w;je+=1){var ke=ye(Q+4*je,"i32"),Me=gi(ke);if(Me===1||Me===2)ke=bi(ke);else if(Me===3)ke=fi(ke);else if(Me===4){Me=ke,ke=xi(Me),Me=hi(Me);for(var $t=new Uint8Array(ke),Bt=0;Bt<ke;Bt+=1)$t[Bt]=v[Me+Bt];ke=$t}else ke=null;le.push(ke)}return le}function a(w,Q){this.Qa=w,this.db=Q,this.Oa=1,this.lb=[]}function l(w,Q){if(this.db=Q,Q=Ue(w)+1,this.eb=ys(Q),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Ge(w,N,this.eb,Q),this.kb=this.eb,this.Za=this.pb=null}function x(w){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),w!=null){var Q=this.filename,le="/",je=Q;if(le&&(le=typeof le=="string"?le:Qt(le),je=Q?E(le+"/"+Q):le),Q=Kt(!0,!0),je=Te(je,Q),w){if(typeof w=="string"){le=Array(w.length);for(var ke=0,Me=w.length;ke<Me;++ke)le[ke]=w.charCodeAt(ke);w=le}_(je,Q|146),le=J(je,577),yt(le,w,0,w.length,0),Z(le),_(je,Q)}}this.handleError(be(this.filename,C)),this.db=ye(C,"i32"),Gs(this.db),this.fb={},this.Sa={}}var C=or(4),P=o.cwrap,be=P("sqlite3_open","number",["string","number"]),Re=P("sqlite3_close_v2","number",["number"]),Ce=P("sqlite3_exec","number",["number","string","number","number","number"]),et=P("sqlite3_changes","number",["number"]),jt=P("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Os=P("sqlite3_sql","string",["number"]),Xn=P("sqlite3_normalized_sql","string",["number"]),qs=P("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Jn=P("sqlite3_bind_text","number",["number","number","number","number","number"]),Hs=P("sqlite3_bind_blob","number",["number","number","number","number","number"]),Zn=P("sqlite3_bind_double","number",["number","number","number"]),ei=P("sqlite3_bind_int","number",["number","number","number"]),ti=P("sqlite3_bind_parameter_index","number",["number","string"]),ri=P("sqlite3_step","number",["number"]),si=P("sqlite3_errmsg","string",["number"]),ni=P("sqlite3_column_count","number",["number"]),ii=P("sqlite3_data_count","number",["number"]),ai=P("sqlite3_column_double","number",["number","number"]),Qs=P("sqlite3_column_text","string",["number","number"]),oi=P("sqlite3_column_blob","number",["number","number"]),li=P("sqlite3_column_bytes","number",["number","number"]),di=P("sqlite3_column_type","number",["number","number"]),ci=P("sqlite3_column_name","string",["number","number"]),pi=P("sqlite3_reset","number",["number"]),ui=P("sqlite3_clear_bindings","number",["number"]),mi=P("sqlite3_finalize","number",["number"]),Us=P("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),gi=P("sqlite3_value_type","number",["number"]),xi=P("sqlite3_value_bytes","number",["number"]),fi=P("sqlite3_value_text","string",["number"]),hi=P("sqlite3_value_blob","number",["number"]),bi=P("sqlite3_value_double","number",["number"]),yi=P("sqlite3_result_double","",["number","number"]),Ys=P("sqlite3_result_null","",["number"]),ji=P("sqlite3_result_text","",["number","string","number","number"]),vi=P("sqlite3_result_blob","",["number","number","number","number"]),Si=P("sqlite3_result_int","",["number","number"]),Zr=P("sqlite3_result_error","",["number","string","number"]),Vs=P("sqlite3_aggregate_context","number",["number","number"]),Gs=P("RegisterExtensionFunctions","number",["number"]),Ks=P("sqlite3_update_hook","number",["number","number","number"]);a.prototype.bind=function(w){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(w)?this.Cb(w):w!=null&&typeof w=="object"?this.Db(w):!0},a.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var w=ri(this.Qa);switch(w){case 100:return!0;case 101:return!1;default:throw this.db.handleError(w)}},a.prototype.wb=function(w){return w==null&&(w=this.Oa,this.Oa+=1),ai(this.Qa,w)},a.prototype.Gb=function(w){if(w==null&&(w=this.Oa,this.Oa+=1),w=Qs(this.Qa,w),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(w)},a.prototype.Hb=function(w){return w==null&&(w=this.Oa,this.Oa+=1),Qs(this.Qa,w)},a.prototype.getBlob=function(w){w==null&&(w=this.Oa,this.Oa+=1);var Q=li(this.Qa,w);w=oi(this.Qa,w);for(var le=new Uint8Array(Q),je=0;je<Q;je+=1)le[je]=v[w+je];return le},a.prototype.get=function(w,Q){Q=Q||{},w!=null&&this.bind(w)&&this.step(),w=[];for(var le=ii(this.Qa),je=0;je<le;je+=1)switch(di(this.Qa,je)){case 1:var ke=Q.useBigInt?this.Gb(je):this.wb(je);w.push(ke);break;case 2:w.push(this.wb(je));break;case 3:w.push(this.Hb(je));break;case 4:w.push(this.getBlob(je));break;default:w.push(null)}return w},a.prototype.getColumnNames=function(){for(var w=[],Q=ni(this.Qa),le=0;le<Q;le+=1)w.push(ci(this.Qa,le));return w},a.prototype.getAsObject=function(w,Q){w=this.get(w,Q),Q=this.getColumnNames();for(var le={},je=0;je<Q.length;je+=1)le[Q[je]]=w[je];return le},a.prototype.getSQL=function(){return Os(this.Qa)},a.prototype.getNormalizedSQL=function(){return Xn(this.Qa)},a.prototype.run=function(w){return w!=null&&this.bind(w),this.step(),this.reset()},a.prototype.sb=function(w,Q){Q==null&&(Q=this.Oa,this.Oa+=1),w=Et(w);var le=Xr(w,Kr);this.lb.push(le),this.db.handleError(Jn(this.Qa,Q,le,w.length-1,0))},a.prototype.Bb=function(w,Q){Q==null&&(Q=this.Oa,this.Oa+=1);var le=Xr(w,Kr);this.lb.push(le),this.db.handleError(Hs(this.Qa,Q,le,w.length,0))},a.prototype.rb=function(w,Q){Q==null&&(Q=this.Oa,this.Oa+=1),this.db.handleError((w===(w|0)?ei:Zn)(this.Qa,Q,w))},a.prototype.Eb=function(w){w==null&&(w=this.Oa,this.Oa+=1),Hs(this.Qa,w,0,0,0)},a.prototype.tb=function(w,Q){switch(Q==null&&(Q=this.Oa,this.Oa+=1),typeof w){case"string":this.sb(w,Q);return;case"number":this.rb(w,Q);return;case"bigint":this.sb(w.toString(),Q);return;case"boolean":this.rb(w+0,Q);return;case"object":if(w===null){this.Eb(Q);return}if(w.length!=null){this.Bb(w,Q);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+w+")."},a.prototype.Db=function(w){var Q=this;return Object.keys(w).forEach(function(le){var je=ti(Q.Qa,le);je!==0&&Q.tb(w[le],je)}),!0},a.prototype.Cb=function(w){for(var Q=0;Q<w.length;Q+=1)this.tb(w[Q],Q+1);return!0},a.prototype.reset=function(){return this.freemem(),ui(this.Qa)===0&&pi(this.Qa)===0},a.prototype.freemem=function(){for(var w;(w=this.lb.pop())!==void 0;)Jr(w)},a.prototype.free=function(){this.freemem();var w=mi(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,w},l.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var w=_r(),Q=or(4);F(C),F(Q);try{this.db.handleError(qs(this.db.db,this.kb,-1,C,Q)),this.kb=ye(Q,"i32");var le=ye(C,"i32");return le===0?(this.mb(),{done:!0}):(this.Za=new a(le,this.db),this.db.fb[le]=this.Za,{value:this.Za,done:!1})}catch(je){throw this.pb=q(this.kb),this.mb(),je}finally{Ar(w)}},l.prototype.mb=function(){Jr(this.eb),this.eb=null},l.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:q(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(l.prototype[Symbol.iterator]=function(){return this}),x.prototype.run=function(w,Q){if(!this.db)throw"Database closed";if(Q){w=this.prepare(w,Q);try{w.step()}finally{w.free()}}else this.handleError(Ce(this.db,w,0,0,C));return this},x.prototype.exec=function(w,Q,le){if(!this.db)throw"Database closed";var je=_r(),ke=null;try{var Me=hs(w),$t=or(4);for(w=[];ye(Me,"i8")!==0;){F(C),F($t),this.handleError(qs(this.db,Me,-1,C,$t));var Bt=ye(C,"i32");if(Me=ye($t,"i32"),Bt!==0){var Ct=null;for(ke=new a(Bt,this),Q!=null&&ke.bind(Q);ke.step();)Ct===null&&(Ct={columns:ke.getColumnNames(),values:[]},w.push(Ct)),Ct.values.push(ke.get(null,le));ke.free()}}return w}catch(Ft){throw ke&&ke.free(),Ft}finally{Ar(je)}},x.prototype.each=function(w,Q,le,je,ke){typeof Q=="function"&&(je=le,le=Q,Q=void 0),w=this.prepare(w,Q);try{for(;w.step();)le(w.getAsObject(null,ke))}finally{w.free()}if(typeof je=="function")return je()},x.prototype.prepare=function(w,Q){if(F(C),this.handleError(jt(this.db,w,-1,C,0)),w=ye(C,"i32"),w===0)throw"Nothing to prepare";var le=new a(w,this);return Q!=null&&le.bind(Q),this.fb[w]=le},x.prototype.iterateStatements=function(w){return new l(w,this)},x.prototype.export=function(){Object.values(this.fb).forEach(function(Q){Q.free()}),Object.values(this.Sa).forEach(ar),this.Sa={},this.handleError(Re(this.db));var w=Jt(this.filename);return this.handleError(be(this.filename,C)),this.db=ye(C,"i32"),Gs(this.db),w},x.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(w){w.free()}),Object.values(this.Sa).forEach(ar),this.Sa={},this.Ya&&(ar(this.Ya),this.Ya=void 0),this.handleError(Re(this.db)),lt("/"+this.filename),this.db=null)},x.prototype.handleError=function(w){if(w===0)return null;throw w=si(this.db),Error(w)},x.prototype.getRowsModified=function(){return et(this.db)},x.prototype.create_function=function(w,Q){Object.prototype.hasOwnProperty.call(this.Sa,w)&&(ar(this.Sa[w]),delete this.Sa[w]);var le=Tr(function(je,ke,Me){ke=s(ke,Me);try{var $t=Q.apply(null,ke)}catch(Bt){Zr(je,Bt,-1);return}t(je,$t)},"viii");return this.Sa[w]=le,this.handleError(Us(this.db,w,Q.length,1,0,le,0,0,0)),this},x.prototype.create_aggregate=function(w,Q){var le=Q.init||function(){return null},je=Q.finalize||function(Ct){return Ct},ke=Q.step;if(!ke)throw"An aggregate function must have a step function in "+w;var Me={};Object.hasOwnProperty.call(this.Sa,w)&&(ar(this.Sa[w]),delete this.Sa[w]),Q=w+"__finalize",Object.hasOwnProperty.call(this.Sa,Q)&&(ar(this.Sa[Q]),delete this.Sa[Q]);var $t=Tr(function(Ct,Ft,vs){var fr=Vs(Ct,1);Object.hasOwnProperty.call(Me,fr)||(Me[fr]=le()),Ft=s(Ft,vs),Ft=[Me[fr]].concat(Ft);try{Me[fr]=ke.apply(null,Ft)}catch(wi){delete Me[fr],Zr(Ct,wi,-1)}},"viii"),Bt=Tr(function(Ct){var Ft=Vs(Ct,1);try{var vs=je(Me[Ft])}catch(fr){delete Me[Ft],Zr(Ct,fr,-1);return}t(Ct,vs),delete Me[Ft]},"vi");return this.Sa[w]=$t,this.Sa[Q]=Bt,this.handleError(Us(this.db,w,ke.length-1,1,0,0,$t,Bt,0)),this},x.prototype.updateHook=function(w){this.Ya&&(Ks(this.db,0,0),ar(this.Ya),this.Ya=void 0),w&&(this.Ya=Tr(function(Q,le,je,ke,Me){switch(le){case 18:Q="insert";break;case 23:Q="update";break;case 9:Q="delete";break;default:throw"unknown operationCode in updateHook callback: "+le}if(je=je?z(N,je):"",ke=ke?z(N,ke):"",Me>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";w(Q,je,ke,Number(Me))},"viiiij"),Ks(this.db,this.Ya,0))},o.Database=x};var h={...o},W="./this.program",m=(t,s)=>{throw s},k="",L,D;if(R){var S=xn;k=__dirname+"/",D=t=>(t=de(t)?new URL(t):t,S.readFileSync(t)),L=async t=>(t=de(t)?new URL(t):t,S.readFileSync(t,void 0)),!o.thisProgram&&1<process.argv.length&&(W=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),r.exports=o,m=(t,s)=>{throw process.exitCode=t,s}}else(y||T)&&(T?k=self.location.href:typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),k=k.startsWith("blob:")?"":k.slice(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1),T&&(D=t=>{var s=new XMLHttpRequest;return s.open("GET",t,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),L=async t=>{if(de(t))return new Promise((a,l)=>{var x=new XMLHttpRequest;x.open("GET",t,!0),x.responseType="arraybuffer",x.onload=()=>{x.status==200||x.status==0&&x.response?a(x.response):l(x.status)},x.onerror=l,x.send(null)});var s=await fetch(t,{credentials:"same-origin"});if(s.ok)return s.arrayBuffer();throw Error(s.status+" : "+s.url)});var b=o.print||console.log.bind(console),I=o.printErr||console.error.bind(console);Object.assign(o,h),h=null,o.thisProgram&&(W=o.thisProgram);var $=o.wasmBinary,G,ae=!1,ne,v,N,A,te,se,ie,ge,pe,de=t=>t.startsWith("file://");function ce(){var t=G.buffer;o.HEAP8=v=new Int8Array(t),o.HEAP16=A=new Int16Array(t),o.HEAPU8=N=new Uint8Array(t),o.HEAPU16=new Uint16Array(t),o.HEAP32=te=new Int32Array(t),o.HEAPU32=se=new Uint32Array(t),o.HEAPF32=ie=new Float32Array(t),o.HEAPF64=pe=new Float64Array(t),o.HEAP64=ge=new BigInt64Array(t),o.HEAPU64=new BigUint64Array(t)}var B=0,K=null;function V(t){throw o.onAbort?.(t),t="Aborted("+t+")",I(t),ae=!0,new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}var Ae;async function Fe(t){if(!$)try{var s=await L(t);return new Uint8Array(s)}catch{}if(t==Ae&&$)t=new Uint8Array($);else if(D)t=D(t);else throw"both async and sync fetching of the wasm failed";return t}async function He(t,s){try{var a=await Fe(t);return await WebAssembly.instantiate(a,s)}catch(l){I(`failed to asynchronously prepare wasm: ${l}`),V(l)}}async function Ie(t){var s=Ae;if(!$&&typeof WebAssembly.instantiateStreaming=="function"&&!de(s)&&!R)try{var a=fetch(s,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(a,t)}catch(l){I(`wasm streaming compile failed: ${l}`),I("falling back to ArrayBuffer instantiation")}return He(s,t)}class Je{name="ExitStatus";constructor(s){this.message=`Program terminated with exit(${s})`,this.status=s}}var Ve=t=>{for(;0<t.length;)t.shift()(o)},st=[],ve=[],X=()=>{var t=o.preRun.shift();ve.unshift(t)};function ye(t,s="i8"){switch(s.endsWith("*")&&(s="*"),s){case"i1":return v[t];case"i8":return v[t];case"i16":return A[t>>1];case"i32":return te[t>>2];case"i64":return ge[t>>3];case"float":return ie[t>>2];case"double":return pe[t>>3];case"*":return se[t>>2];default:V(`invalid type for getValue: ${s}`)}}var ze=o.noExitRuntime||!0;function F(t){var s="i32";switch(s.endsWith("*")&&(s="*"),s){case"i1":v[t]=0;break;case"i8":v[t]=0;break;case"i16":A[t>>1]=0;break;case"i32":te[t>>2]=0;break;case"i64":ge[t>>3]=BigInt(0);break;case"float":ie[t>>2]=0;break;case"double":pe[t>>3]=0;break;case"*":se[t>>2]=0;break;default:V(`invalid type for setValue: ${s}`)}}var O=typeof TextDecoder<"u"?new TextDecoder:void 0,z=(t,s=0,a=NaN)=>{var l=s+a;for(a=s;t[a]&&!(a>=l);)++a;if(16<a-s&&t.buffer&&O)return O.decode(t.subarray(s,a));for(l="";s<a;){var x=t[s++];if(x&128){var C=t[s++]&63;if((x&224)==192)l+=String.fromCharCode((x&31)<<6|C);else{var P=t[s++]&63;x=(x&240)==224?(x&15)<<12|C<<6|P:(x&7)<<18|C<<12|P<<6|t[s++]&63,65536>x?l+=String.fromCharCode(x):(x-=65536,l+=String.fromCharCode(55296|x>>10,56320|x&1023))}}else l+=String.fromCharCode(x)}return l},q=(t,s)=>t?z(N,t,s):"",Se=(t,s)=>{for(var a=0,l=t.length-1;0<=l;l--){var x=t[l];x==="."?t.splice(l,1):x===".."?(t.splice(l,1),a++):a&&(t.splice(l,1),a--)}if(s)for(;a;a--)t.unshift("..");return t},E=t=>{var s=t.charAt(0)==="/",a=t.slice(-1)==="/";return(t=Se(t.split("/").filter(l=>!!l),!s).join("/"))||s||(t="."),t&&a&&(t+="/"),(s?"/":"")+t},ee=t=>{var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=s[0],s=s[1],!t&&!s?".":(s&&=s.slice(0,-1),t+s)},re=t=>t&&t.match(/([^\/]+|\/)\/*$/)[1],Pe=()=>{if(R){var t=xn;return s=>t.randomFillSync(s)}return s=>crypto.getRandomValues(s)},we=t=>{(we=Pe())(t)},Qe=(...t)=>{for(var s="",a=!1,l=t.length-1;-1<=l&&!a;l--){if(a=0<=l?t[l]:"/",typeof a!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!a)return"";s=a+"/"+s,a=a.charAt(0)==="/"}return s=Se(s.split("/").filter(x=>!!x),!a).join("/"),(a?"/":"")+s||"."},ht=[],Ue=t=>{for(var s=0,a=0;a<t.length;++a){var l=t.charCodeAt(a);127>=l?s++:2047>=l?s+=2:55296<=l&&57343>=l?(s+=4,++a):s+=3}return s},Ge=(t,s,a,l)=>{if(!(0<l))return 0;var x=a;l=a+l-1;for(var C=0;C<t.length;++C){var P=t.charCodeAt(C);if(55296<=P&&57343>=P){var be=t.charCodeAt(++C);P=65536+((P&1023)<<10)|be&1023}if(127>=P){if(a>=l)break;s[a++]=P}else{if(2047>=P){if(a+1>=l)break;s[a++]=192|P>>6}else{if(65535>=P){if(a+2>=l)break;s[a++]=224|P>>12}else{if(a+3>=l)break;s[a++]=240|P>>18,s[a++]=128|P>>12&63}s[a++]=128|P>>6&63}s[a++]=128|P&63}}return s[a]=0,a-x},Et=(t,s)=>{var a=Array(Ue(t)+1);return t=Ge(t,a,0,a.length),s&&(a.length=t),a},ut=[];function ot(t,s){ut[t]={input:[],output:[],cb:s},M(t,Vt)}var Vt={open(t){var s=ut[t.node.rdev];if(!s)throw new Y(43);t.tty=s,t.seekable=!1},close(t){t.tty.cb.fsync(t.tty)},fsync(t){t.tty.cb.fsync(t.tty)},read(t,s,a,l){if(!t.tty||!t.tty.cb.xb)throw new Y(60);for(var x=0,C=0;C<l;C++){try{var P=t.tty.cb.xb(t.tty)}catch{throw new Y(29)}if(P===void 0&&x===0)throw new Y(6);if(P==null)break;x++,s[a+C]=P}return x&&(t.node.atime=Date.now()),x},write(t,s,a,l){if(!t.tty||!t.tty.cb.qb)throw new Y(60);try{for(var x=0;x<l;x++)t.tty.cb.qb(t.tty,s[a+x])}catch{throw new Y(29)}return l&&(t.node.mtime=t.node.ctime=Date.now()),x}},$e={xb(){e:{if(!ht.length){var t=null;if(R){var s=Buffer.alloc(256),a=0,l=process.stdin.fd;try{a=S.readSync(l,s,0,256)}catch(x){if(x.toString().includes("EOF"))a=0;else throw x}0<a&&(t=s.slice(0,a).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(t=window.prompt("Input: "),t!==null&&(t+=`
`));if(!t){t=null;break e}ht=Et(t,!0)}t=ht.shift()}return t},qb(t,s){s===null||s===10?(b(z(t.output)),t.output=[]):s!=0&&t.output.push(s)},fsync(t){0<t.output?.length&&(b(z(t.output)),t.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Gt={qb(t,s){s===null||s===10?(I(z(t.output)),t.output=[]):s!=0&&t.output.push(s)},fsync(t){0<t.output?.length&&(I(z(t.output)),t.output=[])}},ue={Wa:null,Xa(){return ue.createNode(null,"/",16895,0)},createNode(t,s,a,l){if((a&61440)===24576||(a&61440)===4096)throw new Y(63);return ue.Wa||(ue.Wa={dir:{node:{Ta:ue.La.Ta,Ua:ue.La.Ua,lookup:ue.La.lookup,hb:ue.La.hb,rename:ue.La.rename,unlink:ue.La.unlink,rmdir:ue.La.rmdir,readdir:ue.La.readdir,symlink:ue.La.symlink},stream:{Va:ue.Ma.Va}},file:{node:{Ta:ue.La.Ta,Ua:ue.La.Ua},stream:{Va:ue.Ma.Va,read:ue.Ma.read,write:ue.Ma.write,ib:ue.Ma.ib,jb:ue.Ma.jb}},link:{node:{Ta:ue.La.Ta,Ua:ue.La.Ua,readlink:ue.La.readlink},stream:{}},ub:{node:{Ta:ue.La.Ta,Ua:ue.La.Ua},stream:Rr}}),a=Nt(t,s,a,l),Ze(a.mode)?(a.La=ue.Wa.dir.node,a.Ma=ue.Wa.dir.stream,a.Na={}):(a.mode&61440)===32768?(a.La=ue.Wa.file.node,a.Ma=ue.Wa.file.stream,a.Ra=0,a.Na=null):(a.mode&61440)===40960?(a.La=ue.Wa.link.node,a.Ma=ue.Wa.link.stream):(a.mode&61440)===8192&&(a.La=ue.Wa.ub.node,a.Ma=ue.Wa.ub.stream),a.atime=a.mtime=a.ctime=Date.now(),t&&(t.Na[s]=a,t.atime=t.mtime=t.ctime=a.atime),a},Sb(t){return t.Na?t.Na.subarray?t.Na.subarray(0,t.Ra):new Uint8Array(t.Na):new Uint8Array(0)},La:{Ta(t){var s={};return s.dev=(t.mode&61440)===8192?t.id:1,s.ino=t.id,s.mode=t.mode,s.nlink=1,s.uid=0,s.gid=0,s.rdev=t.rdev,Ze(t.mode)?s.size=4096:(t.mode&61440)===32768?s.size=t.Ra:(t.mode&61440)===40960?s.size=t.link.length:s.size=0,s.atime=new Date(t.atime),s.mtime=new Date(t.mtime),s.ctime=new Date(t.ctime),s.blksize=4096,s.blocks=Math.ceil(s.size/s.blksize),s},Ua(t,s){for(var a of["mode","atime","mtime","ctime"])s[a]!=null&&(t[a]=s[a]);s.size!==void 0&&(s=s.size,t.Ra!=s&&(s==0?(t.Na=null,t.Ra=0):(a=t.Na,t.Na=new Uint8Array(s),a&&t.Na.set(a.subarray(0,Math.min(s,t.Ra))),t.Ra=s)))},lookup(){throw ue.vb},hb(t,s,a,l){return ue.createNode(t,s,a,l)},rename(t,s,a){try{var l=dt(s,a)}catch{}if(l){if(Ze(t.mode))for(var x in l.Na)throw new Y(55);Xt(l)}delete t.parent.Na[t.name],s.Na[a]=t,t.name=a,s.ctime=s.mtime=t.parent.ctime=t.parent.mtime=Date.now()},unlink(t,s){delete t.Na[s],t.ctime=t.mtime=Date.now()},rmdir(t,s){var a=dt(t,s),l;for(l in a.Na)throw new Y(55);delete t.Na[s],t.ctime=t.mtime=Date.now()},readdir(t){return[".","..",...Object.keys(t.Na)]},symlink(t,s,a){return t=ue.createNode(t,s,41471,0),t.link=a,t},readlink(t){if((t.mode&61440)!==40960)throw new Y(28);return t.link}},Ma:{read(t,s,a,l,x){var C=t.node.Na;if(x>=t.node.Ra)return 0;if(t=Math.min(t.node.Ra-x,l),8<t&&C.subarray)s.set(C.subarray(x,x+t),a);else for(l=0;l<t;l++)s[a+l]=C[x+l];return t},write(t,s,a,l,x,C){if(s.buffer===v.buffer&&(C=!1),!l)return 0;if(t=t.node,t.mtime=t.ctime=Date.now(),s.subarray&&(!t.Na||t.Na.subarray)){if(C)return t.Na=s.subarray(a,a+l),t.Ra=l;if(t.Ra===0&&x===0)return t.Na=s.slice(a,a+l),t.Ra=l;if(x+l<=t.Ra)return t.Na.set(s.subarray(a,a+l),x),l}C=x+l;var P=t.Na?t.Na.length:0;if(P>=C||(C=Math.max(C,P*(1048576>P?2:1.125)>>>0),P!=0&&(C=Math.max(C,256)),P=t.Na,t.Na=new Uint8Array(C),0<t.Ra&&t.Na.set(P.subarray(0,t.Ra),0)),t.Na.subarray&&s.subarray)t.Na.set(s.subarray(a,a+l),x);else for(C=0;C<l;C++)t.Na[x+C]=s[a+C];return t.Ra=Math.max(t.Ra,x+l),l},Va(t,s,a){if(a===1?s+=t.position:a===2&&(t.node.mode&61440)===32768&&(s+=t.node.Ra),0>s)throw new Y(28);return s},ib(t,s,a,l,x){if((t.node.mode&61440)!==32768)throw new Y(43);if(t=t.node.Na,x&2||!t||t.buffer!==v.buffer){x=!0,l=65536*Math.ceil(s/65536);var C=$s(65536,l);if(C&&N.fill(0,C,C+l),l=C,!l)throw new Y(48);t&&((0<a||a+s<t.length)&&(t.subarray?t=t.subarray(a,a+s):t=Array.prototype.slice.call(t,a,a+s)),v.set(t,l))}else x=!1,l=t.byteOffset;return{Kb:l,Ab:x}},jb(t,s,a,l){return ue.Ma.write(t,s,0,l,a,!1),0}}},Kt=(t,s)=>{var a=0;return t&&(a|=365),s&&(a|=146),a},wt=null,Ht={},mt=[],rr=1,Ke=null,Pt=!1,kt=!0,qe={},Y=class{name="ErrnoError";constructor(t){this.Pa=t}},gr=class{gb={};node=null;get flags(){return this.gb.flags}set flags(t){this.gb.flags=t}get position(){return this.gb.position}set position(t){this.gb.position=t}},sr=class{La={};Ma={};ab=null;constructor(t,s,a,l){t||=this,this.parent=t,this.Xa=t.Xa,this.id=rr++,this.name=s,this.mode=a,this.rdev=l,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(t){t?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(t){t?this.mode|=146:this.mode&=-147}};function rt(t,s={}){if(!t)throw new Y(44);s.nb??(s.nb=!0),t.charAt(0)==="/"||(t="//"+t);var a=0;e:for(;40>a;a++){t=t.split("/").filter(be=>!!be);for(var l=wt,x="/",C=0;C<t.length;C++){var P=C===t.length-1;if(P&&s.parent)break;if(t[C]!==".")if(t[C]==="..")x=ee(x),l=l.parent;else{x=E(x+"/"+t[C]);try{l=dt(l,t[C])}catch(be){if(be?.Pa===44&&P&&s.Jb)return{path:x};throw be}if(!l.ab||P&&!s.nb||(l=l.ab.root),(l.mode&61440)===40960&&(!P||s.$a)){if(!l.La.readlink)throw new Y(52);l=l.La.readlink(l),l.charAt(0)==="/"||(l=ee(x)+"/"+l),t=l+"/"+t.slice(C+1).join("/");continue e}}}return{path:x,node:l}}throw new Y(32)}function Qt(t){for(var s;;){if(t===t.parent)return t=t.Xa.zb,s?t[t.length-1]!=="/"?`${t}/${s}`:t+s:t;s=s?`${t.name}/${s}`:t.name,t=t.parent}}function nr(t,s){for(var a=0,l=0;l<s.length;l++)a=(a<<5)-a+s.charCodeAt(l)|0;return(t+a>>>0)%Ke.length}function Xt(t){var s=nr(t.parent.id,t.name);if(Ke[s]===t)Ke[s]=t.bb;else for(s=Ke[s];s;){if(s.bb===t){s.bb=t.bb;break}s=s.bb}}function dt(t,s){var a=Ze(t.mode)?(a=bt(t,"x"))?a:t.La.lookup?0:2:54;if(a)throw new Y(a);for(a=Ke[nr(t.id,s)];a;a=a.bb){var l=a.name;if(a.parent.id===t.id&&l===s)return a}return t.La.lookup(t,s)}function Nt(t,s,a,l){return t=new sr(t,s,a,l),s=nr(t.parent.id,t.name),t.bb=Ke[s],Ke[s]=t}function Ze(t){return(t&61440)===16384}function jr(t){var s=["r","w","rw"][t&3];return t&512&&(s+="w"),s}function bt(t,s){if(kt)return 0;if(!s.includes("r")||t.mode&292){if(s.includes("w")&&!(t.mode&146)||s.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function U(t,s){if(!Ze(t.mode))return 54;try{return dt(t,s),20}catch{}return bt(t,"wx")}function zt(t,s,a){try{var l=dt(t,s)}catch(x){return x.Pa}if(t=bt(t,"wx"))return t;if(a){if(!Ze(l.mode))return 54;if(l===l.parent||Qt(l)==="/")return 10}else if(Ze(l.mode))return 31;return 0}function Lt(t){if(!t)throw new Y(63);return t}function nt(t){if(t=mt[t],!t)throw new Y(8);return t}function vr(t,s=-1){if(t=Object.assign(new gr,t),s==-1)e:{for(s=0;4096>=s;s++)if(!mt[s])break e;throw new Y(33)}return t.fd=s,mt[s]=t}function Cr(t,s=-1){return t=vr(t,s),t.Ma?.Rb?.(t),t}function ir(t,s,a){var l=t?.Ma.Ua;t=l?t:s,l??=s.La.Ua,Lt(l),l(t,a)}var Rr={open(t){t.Ma=Ht[t.node.rdev].Ma,t.Ma.open?.(t)},Va(){throw new Y(70)}};function M(t,s){Ht[t]={Ma:s}}function me(t,s){var a=s==="/";if(a&&wt)throw new Y(10);if(!a&&s){var l=rt(s,{nb:!1});if(s=l.path,l=l.node,l.ab)throw new Y(10);if(!Ze(l.mode))throw new Y(54)}s={type:t,Wb:{},zb:s,Ib:[]},t=t.Xa(s),t.Xa=s,s.root=t,a?wt=t:l&&(l.ab=s,l.Xa&&l.Xa.Ib.push(s))}function he(t,s,a){var l=rt(t,{parent:!0}).node;if(t=re(t),!t)throw new Y(28);if(t==="."||t==="..")throw new Y(20);var x=U(l,t);if(x)throw new Y(x);if(!l.La.hb)throw new Y(63);return l.La.hb(l,t,s,a)}function Te(t,s=438){return he(t,s&4095|32768,0)}function _e(t,s=511){return he(t,s&1023|16384,0)}function gt(t,s,a){typeof a>"u"&&(a=s,s=438),he(t,s|8192,a)}function Ye(t,s){if(!Qe(t))throw new Y(44);var a=rt(s,{parent:!0}).node;if(!a)throw new Y(44);s=re(s);var l=U(a,s);if(l)throw new Y(l);if(!a.La.symlink)throw new Y(63);a.La.symlink(a,s,t)}function ct(t){var s=rt(t,{parent:!0}).node;t=re(t);var a=dt(s,t),l=zt(s,t,!0);if(l)throw new Y(l);if(!s.La.rmdir)throw new Y(63);if(a.ab)throw new Y(10);s.La.rmdir(s,t),Xt(a)}function lt(t){var s=rt(t,{parent:!0}).node;if(!s)throw new Y(44);t=re(t);var a=dt(s,t),l=zt(s,t,!1);if(l)throw new Y(l);if(!s.La.unlink)throw new Y(63);if(a.ab)throw new Y(10);s.La.unlink(s,t),Xt(a)}function pt(t,s){return t=rt(t,{$a:!s}).node,Lt(t.La.Ta)(t)}function xt(t,s,a,l){ir(t,s,{mode:a&4095|s.mode&-4096,ctime:Date.now(),Fb:l})}function _(t,s){t=typeof t=="string"?rt(t,{$a:!0}).node:t,xt(null,t,s)}function H(t,s,a){if(Ze(s.mode))throw new Y(31);if((s.mode&61440)!==32768)throw new Y(28);var l=bt(s,"w");if(l)throw new Y(l);ir(t,s,{size:a,timestamp:Date.now()})}function J(t,s,a=438){if(t==="")throw new Y(44);if(typeof s=="string"){var l={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[s];if(typeof l>"u")throw Error(`Unknown file open mode: ${s}`);s=l}if(a=s&64?a&4095|32768:0,typeof t=="object")l=t;else{var x=t.endsWith("/");t=rt(t,{$a:!(s&131072),Jb:!0}),l=t.node,t=t.path}var C=!1;if(s&64)if(l){if(s&128)throw new Y(20)}else{if(x)throw new Y(31);l=he(t,a|511,0),C=!0}if(!l)throw new Y(44);if((l.mode&61440)===8192&&(s&=-513),s&65536&&!Ze(l.mode))throw new Y(54);if(!C&&(x=l?(l.mode&61440)===40960?32:Ze(l.mode)&&(jr(s)!=="r"||s&576)?31:bt(l,jr(s)):44))throw new Y(x);return s&512&&!C&&(x=l,x=typeof x=="string"?rt(x,{$a:!0}).node:x,H(null,x,0)),s&=-131713,x=vr({node:l,path:Qt(l),flags:s,seekable:!0,position:0,Ma:l.Ma,Lb:[],error:!1}),x.Ma.open&&x.Ma.open(x),C&&_(l,a&511),!o.logReadFiles||s&1||t in qe||(qe[t]=1),x}function Z(t){if(t.fd===null)throw new Y(8);t.ob&&(t.ob=null);try{t.Ma.close&&t.Ma.close(t)}catch(s){throw s}finally{mt[t.fd]=null}t.fd=null}function xe(t,s,a){if(t.fd===null)throw new Y(8);if(!t.seekable||!t.Ma.Va)throw new Y(70);if(a!=0&&a!=1&&a!=2)throw new Y(28);t.position=t.Ma.Va(t,s,a),t.Lb=[]}function Ee(t,s,a,l,x){if(0>l||0>x)throw new Y(28);if(t.fd===null)throw new Y(8);if((t.flags&2097155)===1)throw new Y(8);if(Ze(t.node.mode))throw new Y(31);if(!t.Ma.read)throw new Y(28);var C=typeof x<"u";if(!C)x=t.position;else if(!t.seekable)throw new Y(70);return s=t.Ma.read(t,s,a,l,x),C||(t.position+=s),s}function yt(t,s,a,l,x){if(0>l||0>x)throw new Y(28);if(t.fd===null)throw new Y(8);if((t.flags&2097155)===0)throw new Y(8);if(Ze(t.node.mode))throw new Y(31);if(!t.Ma.write)throw new Y(28);t.seekable&&t.flags&1024&&xe(t,0,2);var C=typeof x<"u";if(!C)x=t.position;else if(!t.seekable)throw new Y(70);return s=t.Ma.write(t,s,a,l,x,void 0),C||(t.position+=s),s}function Jt(t){var s,a=J(t,a||0);t=pt(t).size;var l=new Uint8Array(t);return Ee(a,l,0,t,0),s=l,Z(a),s}function Ut(t,s,a){t=E("/dev/"+t);var l=Kt(!!s,!!a);Ut.yb??(Ut.yb=64);var x=Ut.yb++<<8|0;M(x,{open(C){C.seekable=!1},close(){a?.buffer?.length&&a(10)},read(C,P,be,Re){for(var Ce=0,et=0;et<Re;et++){try{var jt=s()}catch{throw new Y(29)}if(jt===void 0&&Ce===0)throw new Y(6);if(jt==null)break;Ce++,P[be+et]=jt}return Ce&&(C.node.atime=Date.now()),Ce},write(C,P,be,Re){for(var Ce=0;Ce<Re;Ce++)try{a(P[be+Ce])}catch{throw new Y(29)}return Re&&(C.node.mtime=C.node.ctime=Date.now()),Ce}}),gt(t,l,x)}var Oe={};function Yt(t,s,a){if(s.charAt(0)==="/")return s;if(t=t===-100?"/":nt(t).path,s.length==0){if(!a)throw new Y(44);return t}return t+"/"+s}function Wt(t,s){te[t>>2]=s.dev,te[t+4>>2]=s.mode,se[t+8>>2]=s.nlink,te[t+12>>2]=s.uid,te[t+16>>2]=s.gid,te[t+20>>2]=s.rdev,ge[t+24>>3]=BigInt(s.size),te[t+32>>2]=4096,te[t+36>>2]=s.blocks;var a=s.atime.getTime(),l=s.mtime.getTime(),x=s.ctime.getTime();return ge[t+40>>3]=BigInt(Math.floor(a/1e3)),se[t+48>>2]=a%1e3*1e6,ge[t+56>>3]=BigInt(Math.floor(l/1e3)),se[t+64>>2]=l%1e3*1e6,ge[t+72>>3]=BigInt(Math.floor(x/1e3)),se[t+80>>2]=x%1e3*1e6,ge[t+88>>3]=BigInt(s.ino),0}var Dt=void 0,Gr=()=>{var t=te[+Dt>>2];return Dt+=4,t},gs=0,Un=[0,31,60,91,121,152,182,213,244,274,305,335],Yn=[0,31,59,90,120,151,181,212,243,273,304,334],Ir={},Ms=t=>{ne=t,ze||0<gs||(o.onExit?.(t),ae=!0),m(t,new Je(t))},Vn=t=>{if(!ae)try{if(t(),!(ze||0<gs))try{ne=t=ne,Ms(t)}catch(s){s instanceof Je||s=="unwind"||m(1,s)}}catch(s){s instanceof Je||s=="unwind"||m(1,s)}},xs={},Ps=()=>{if(!fs){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:W||"./this.program"},s;for(s in xs)xs[s]===void 0?delete t[s]:t[s]=xs[s];var a=[];for(s in t)a.push(`${s}=${t[s]}`);fs=a}return fs},fs,hs=t=>{var s=Ue(t)+1,a=or(s);return Ge(t,N,a,s),a},Gn=(t,s,a,l)=>{var x={string:Ce=>{var et=0;return Ce!=null&&Ce!==0&&(et=hs(Ce)),et},array:Ce=>{var et=or(Ce.length);return v.set(Ce,et),et}};t=o["_"+t];var C=[],P=0;if(l)for(var be=0;be<l.length;be++){var Re=x[a[be]];Re?(P===0&&(P=_r()),C[be]=Re(l[be])):C[be]=l[be]}return a=t(...C),a=(function(Ce){return P!==0&&Ar(P),s==="string"?Ce?z(N,Ce):"":s==="boolean"?!!Ce:Ce})(a)},Kr=0,Xr=(t,s)=>(s=s==1?or(t.length):ys(t.length),t.subarray||t.slice||(t=new Uint8Array(t)),N.set(t,s),s),xr,bs=[],Zt,ar=t=>{xr.delete(Zt.get(t)),Zt.set(t,null),bs.push(t)},Tr=(t,s)=>{if(!xr){xr=new WeakMap;var a=Zt.length;if(xr)for(var l=0;l<0+a;l++){var x=Zt.get(l);x&&xr.set(x,l)}}if(a=xr.get(t)||0)return a;if(bs.length)a=bs.pop();else{try{Zt.grow(1)}catch(Re){throw Re instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Re}a=Zt.length-1}try{Zt.set(a,t)}catch(Re){if(!(Re instanceof TypeError))throw Re;if(typeof WebAssembly.Function=="function"){var C=WebAssembly.Function;l={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},x={parameters:[],results:s[0]=="v"?[]:[l[s[0]]]};for(var P=1;P<s.length;++P)x.parameters.push(l[s[P]]);s=new C(x,t)}else{l=[1],x=s.slice(0,1),s=s.slice(1),P={i:127,p:127,j:126,f:125,d:124,e:111},l.push(96);var be=s.length;128>be?l.push(be):l.push(be%128|128,be>>7);for(C of s)l.push(P[C]);x=="v"?l.push(0):l.push(1,P[x]),s=[0,97,115,109,1,0,0,0,1],C=l.length,128>C?s.push(C):s.push(C%128|128,C>>7),s.push(...l),s.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),s=new WebAssembly.Module(new Uint8Array(s)),s=new WebAssembly.Instance(s,{e:{f:t}}).exports.f}Zt.set(a,s)}return xr.set(t,a),a};Ke=Array(4096),me(ue,"/"),_e("/tmp"),_e("/home"),_e("/home/web_user"),(function(){_e("/dev"),M(259,{read:()=>0,write:(l,x,C,P)=>P,Va:()=>0}),gt("/dev/null",259),ot(1280,$e),ot(1536,Gt),gt("/dev/tty",1280),gt("/dev/tty1",1536);var t=new Uint8Array(1024),s=0,a=()=>(s===0&&(we(t),s=t.byteLength),t[--s]);Ut("random",a),Ut("urandom",a),_e("/dev/shm"),_e("/dev/shm/tmp")})(),(function(){_e("/proc");var t=_e("/proc/self");_e("/proc/self/fd"),me({Xa(){var s=Nt(t,"fd",16895,73);return s.Ma={Va:ue.Ma.Va},s.La={lookup(a,l){a=+l;var x=nt(a);return a={parent:null,Xa:{zb:"fake"},La:{readlink:()=>x.path},id:a+1},a.parent=a},readdir(){return Array.from(mt.entries()).filter(([,a])=>a).map(([a])=>a.toString())}},s}},"/proc/self/fd")})(),ue.vb=new Y(44),ue.vb.stack="<generic error, no stack>";var Kn={a:(t,s,a,l)=>V(`Assertion failed: ${t?z(N,t):""}, at: `+[s?s?z(N,s):"":"unknown filename",a,l?l?z(N,l):"":"unknown function"]),i:function(t,s){try{return t=t?z(N,t):"",_(t,s),0}catch(a){if(typeof Oe>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},L:function(t,s,a){try{if(s=s?z(N,s):"",s=Yt(t,s),a&-8)return-28;var l=rt(s,{$a:!0}).node;return l?(t="",a&4&&(t+="r"),a&2&&(t+="w"),a&1&&(t+="x"),t&&bt(l,t)?-2:0):-44}catch(x){if(typeof Oe>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},j:function(t,s){try{var a=nt(t);return xt(a,a.node,s,!1),0}catch(l){if(typeof Oe>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},h:function(t){try{var s=nt(t);return ir(s,s.node,{timestamp:Date.now(),Fb:!1}),0}catch(a){if(typeof Oe>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},b:function(t,s,a){Dt=a;try{var l=nt(t);switch(s){case 0:var x=Gr();if(0>x)break;for(;mt[x];)x++;return Cr(l,x).fd;case 1:case 2:return 0;case 3:return l.flags;case 4:return x=Gr(),l.flags|=x,0;case 12:return x=Gr(),A[x+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(C){if(typeof Oe>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},g:function(t,s){try{var a=nt(t),l=a.node,x=a.Ma.Ta;t=x?a:l,x??=l.La.Ta,Lt(x);var C=x(t);return Wt(s,C)}catch(P){if(typeof Oe>"u"||P.name!=="ErrnoError")throw P;return-P.Pa}},H:function(t,s){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s);try{if(isNaN(s))return 61;var a=nt(t);if(0>s||(a.flags&2097155)===0)throw new Y(28);return H(a,a.node,s),0}catch(l){if(typeof Oe>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},G:function(t,s){try{if(s===0)return-28;var a=Ue("/")+1;return s<a?-68:(Ge("/",N,t,s),a)}catch(l){if(typeof Oe>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},K:function(t,s){try{return t=t?z(N,t):"",Wt(s,pt(t,!0))}catch(a){if(typeof Oe>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},C:function(t,s,a){try{return s=s?z(N,s):"",s=Yt(t,s),_e(s,a),0}catch(l){if(typeof Oe>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},J:function(t,s,a,l){try{s=s?z(N,s):"";var x=l&256;return s=Yt(t,s,l&4096),Wt(a,x?pt(s,!0):pt(s))}catch(C){if(typeof Oe>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},x:function(t,s,a,l){Dt=l;try{s=s?z(N,s):"",s=Yt(t,s);var x=l?Gr():0;return J(s,a,x).fd}catch(C){if(typeof Oe>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},v:function(t,s,a,l){try{if(s=s?z(N,s):"",s=Yt(t,s),0>=l)return-28;var x=rt(s).node;if(!x)throw new Y(44);if(!x.La.readlink)throw new Y(28);var C=x.La.readlink(x),P=Math.min(l,Ue(C)),be=v[a+P];return Ge(C,N,a,l+1),v[a+P]=be,P}catch(Re){if(typeof Oe>"u"||Re.name!=="ErrnoError")throw Re;return-Re.Pa}},u:function(t){try{return t=t?z(N,t):"",ct(t),0}catch(s){if(typeof Oe>"u"||s.name!=="ErrnoError")throw s;return-s.Pa}},f:function(t,s){try{return t=t?z(N,t):"",Wt(s,pt(t))}catch(a){if(typeof Oe>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},r:function(t,s,a){try{return s=s?z(N,s):"",s=Yt(t,s),a===0?lt(s):a===512?ct(s):V("Invalid flags passed to unlinkat"),0}catch(l){if(typeof Oe>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},q:function(t,s,a){try{s=s?z(N,s):"",s=Yt(t,s,!0);var l=Date.now(),x,C;if(a){var P=se[a>>2]+4294967296*te[a+4>>2],be=te[a+8>>2];be==1073741823?x=l:be==1073741822?x=null:x=1e3*P+be/1e6,a+=16,P=se[a>>2]+4294967296*te[a+4>>2],be=te[a+8>>2],be==1073741823?C=l:be==1073741822?C=null:C=1e3*P+be/1e6}else C=x=l;if((C??x)!==null){t=x;var Re=rt(s,{$a:!0}).node;Lt(Re.La.Ua)(Re,{atime:t,mtime:C})}return 0}catch(Ce){if(typeof Oe>"u"||Ce.name!=="ErrnoError")throw Ce;return-Ce.Pa}},m:()=>V(""),l:()=>{ze=!1,gs=0},A:function(t,s){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t),t=new Date(1e3*t),te[s>>2]=t.getSeconds(),te[s+4>>2]=t.getMinutes(),te[s+8>>2]=t.getHours(),te[s+12>>2]=t.getDate(),te[s+16>>2]=t.getMonth(),te[s+20>>2]=t.getFullYear()-1900,te[s+24>>2]=t.getDay();var a=t.getFullYear();te[s+28>>2]=(a%4!==0||a%100===0&&a%400!==0?Yn:Un)[t.getMonth()]+t.getDate()-1|0,te[s+36>>2]=-(60*t.getTimezoneOffset()),a=new Date(t.getFullYear(),6,1).getTimezoneOffset();var l=new Date(t.getFullYear(),0,1).getTimezoneOffset();te[s+32>>2]=(a!=l&&t.getTimezoneOffset()==Math.min(l,a))|0},y:function(t,s,a,l,x,C,P){x=-9007199254740992>x||9007199254740992<x?NaN:Number(x);try{if(isNaN(x))return 61;var be=nt(l);if((s&2)!==0&&(a&2)===0&&(be.flags&2097155)!==2)throw new Y(2);if((be.flags&2097155)===1)throw new Y(2);if(!be.Ma.ib)throw new Y(43);if(!t)throw new Y(28);var Re=be.Ma.ib(be,t,x,s,a),Ce=Re.Kb;return te[C>>2]=Re.Ab,se[P>>2]=Ce,0}catch(et){if(typeof Oe>"u"||et.name!=="ErrnoError")throw et;return-et.Pa}},z:function(t,s,a,l,x,C){C=-9007199254740992>C||9007199254740992<C?NaN:Number(C);try{var P=nt(x);if(a&2){if(a=C,(P.node.mode&61440)!==32768)throw new Y(43);if(!(l&2)){var be=N.slice(t,t+s);P.Ma.jb&&P.Ma.jb(P,be,a,s,l)}}}catch(Re){if(typeof Oe>"u"||Re.name!=="ErrnoError")throw Re;return-Re.Pa}},n:(t,s)=>{if(Ir[t]&&(clearTimeout(Ir[t].id),delete Ir[t]),!s)return 0;var a=setTimeout(()=>{delete Ir[t],Vn(()=>Fs(t,performance.now()))},s);return Ir[t]={id:a,Xb:s},0},B:(t,s,a,l)=>{var x=new Date().getFullYear(),C=new Date(x,0,1).getTimezoneOffset();x=new Date(x,6,1).getTimezoneOffset(),se[t>>2]=60*Math.max(C,x),te[s>>2]=+(C!=x),s=P=>{var be=Math.abs(P);return`UTC${0<=P?"-":"+"}${String(Math.floor(be/60)).padStart(2,"0")}${String(be%60).padStart(2,"0")}`},t=s(C),s=s(x),x<C?(Ge(t,N,a,17),Ge(s,N,l,17)):(Ge(t,N,l,17),Ge(s,N,a,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:t=>{var s=N.length;if(t>>>=0,2147483648<t)return!1;for(var a=1;4>=a;a*=2){var l=s*(1+.2/a);l=Math.min(l,t+100663296);e:{l=(Math.min(2147483648,65536*Math.ceil(Math.max(t,l)/65536))-G.buffer.byteLength+65535)/65536|0;try{G.grow(l),ce();var x=1;break e}catch{}x=void 0}if(x)return!0}return!1},E:(t,s)=>{var a=0;return Ps().forEach((l,x)=>{var C=s+a;for(x=se[t+4*x>>2]=C,C=0;C<l.length;++C)v[x++]=l.charCodeAt(C);v[x]=0,a+=l.length+1}),0},F:(t,s)=>{var a=Ps();se[t>>2]=a.length;var l=0;return a.forEach(x=>l+=x.length+1),se[s>>2]=l,0},e:function(t){try{var s=nt(t);return Z(s),0}catch(a){if(typeof Oe>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},p:function(t,s){try{var a=nt(t);return v[s]=a.tty?2:Ze(a.mode)?3:(a.mode&61440)===40960?7:4,A[s+2>>1]=0,ge[s+8>>3]=BigInt(0),ge[s+16>>3]=BigInt(0),0}catch(l){if(typeof Oe>"u"||l.name!=="ErrnoError")throw l;return l.Pa}},w:function(t,s,a,l){try{e:{var x=nt(t);t=s;for(var C,P=s=0;P<a;P++){var be=se[t>>2],Re=se[t+4>>2];t+=8;var Ce=Ee(x,v,be,Re,C);if(0>Ce){var et=-1;break e}if(s+=Ce,Ce<Re)break;typeof C<"u"&&(C+=Ce)}et=s}return se[l>>2]=et,0}catch(jt){if(typeof Oe>"u"||jt.name!=="ErrnoError")throw jt;return jt.Pa}},D:function(t,s,a,l){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s);try{if(isNaN(s))return 61;var x=nt(t);return xe(x,s,a),ge[l>>3]=BigInt(x.position),x.ob&&s===0&&a===0&&(x.ob=null),0}catch(C){if(typeof Oe>"u"||C.name!=="ErrnoError")throw C;return C.Pa}},I:function(t){try{var s=nt(t);return s.Ma?.fsync?s.Ma.fsync(s):0}catch(a){if(typeof Oe>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},t:function(t,s,a,l){try{e:{var x=nt(t);t=s;for(var C,P=s=0;P<a;P++){var be=se[t>>2],Re=se[t+4>>2];t+=8;var Ce=yt(x,v,be,Re,C);if(0>Ce){var et=-1;break e}if(s+=Ce,Ce<Re)break;typeof C<"u"&&(C+=Ce)}et=s}return se[l>>2]=et,0}catch(jt){if(typeof Oe>"u"||jt.name!=="ErrnoError")throw jt;return jt.Pa}},k:Ms},fe;(async function(){function t(a){return fe=a.exports,G=fe.M,ce(),Zt=fe.O,B--,o.monitorRunDependencies?.(B),B==0&&K&&(a=K,K=null,a()),fe}B++,o.monitorRunDependencies?.(B);var s={a:Kn};return o.instantiateWasm?new Promise(a=>{o.instantiateWasm(s,(l,x)=>{t(l),a(l.exports)})}):(Ae??=o.locateFile?o.locateFile("sql-wasm.wasm",k):k+"sql-wasm.wasm",t((await Ie(s)).instance))})(),o._sqlite3_free=t=>(o._sqlite3_free=fe.P)(t),o._sqlite3_value_text=t=>(o._sqlite3_value_text=fe.Q)(t),o._sqlite3_prepare_v2=(t,s,a,l,x)=>(o._sqlite3_prepare_v2=fe.R)(t,s,a,l,x),o._sqlite3_step=t=>(o._sqlite3_step=fe.S)(t),o._sqlite3_reset=t=>(o._sqlite3_reset=fe.T)(t),o._sqlite3_exec=(t,s,a,l,x)=>(o._sqlite3_exec=fe.U)(t,s,a,l,x),o._sqlite3_finalize=t=>(o._sqlite3_finalize=fe.V)(t),o._sqlite3_column_name=(t,s)=>(o._sqlite3_column_name=fe.W)(t,s),o._sqlite3_column_text=(t,s)=>(o._sqlite3_column_text=fe.X)(t,s),o._sqlite3_column_type=(t,s)=>(o._sqlite3_column_type=fe.Y)(t,s),o._sqlite3_errmsg=t=>(o._sqlite3_errmsg=fe.Z)(t),o._sqlite3_clear_bindings=t=>(o._sqlite3_clear_bindings=fe._)(t),o._sqlite3_value_blob=t=>(o._sqlite3_value_blob=fe.$)(t),o._sqlite3_value_bytes=t=>(o._sqlite3_value_bytes=fe.aa)(t),o._sqlite3_value_double=t=>(o._sqlite3_value_double=fe.ba)(t),o._sqlite3_value_int=t=>(o._sqlite3_value_int=fe.ca)(t),o._sqlite3_value_type=t=>(o._sqlite3_value_type=fe.da)(t),o._sqlite3_result_blob=(t,s,a,l)=>(o._sqlite3_result_blob=fe.ea)(t,s,a,l),o._sqlite3_result_double=(t,s)=>(o._sqlite3_result_double=fe.fa)(t,s),o._sqlite3_result_error=(t,s,a)=>(o._sqlite3_result_error=fe.ga)(t,s,a),o._sqlite3_result_int=(t,s)=>(o._sqlite3_result_int=fe.ha)(t,s),o._sqlite3_result_int64=(t,s)=>(o._sqlite3_result_int64=fe.ia)(t,s),o._sqlite3_result_null=t=>(o._sqlite3_result_null=fe.ja)(t),o._sqlite3_result_text=(t,s,a,l)=>(o._sqlite3_result_text=fe.ka)(t,s,a,l),o._sqlite3_aggregate_context=(t,s)=>(o._sqlite3_aggregate_context=fe.la)(t,s),o._sqlite3_column_count=t=>(o._sqlite3_column_count=fe.ma)(t),o._sqlite3_data_count=t=>(o._sqlite3_data_count=fe.na)(t),o._sqlite3_column_blob=(t,s)=>(o._sqlite3_column_blob=fe.oa)(t,s),o._sqlite3_column_bytes=(t,s)=>(o._sqlite3_column_bytes=fe.pa)(t,s),o._sqlite3_column_double=(t,s)=>(o._sqlite3_column_double=fe.qa)(t,s),o._sqlite3_bind_blob=(t,s,a,l,x)=>(o._sqlite3_bind_blob=fe.ra)(t,s,a,l,x),o._sqlite3_bind_double=(t,s,a)=>(o._sqlite3_bind_double=fe.sa)(t,s,a),o._sqlite3_bind_int=(t,s,a)=>(o._sqlite3_bind_int=fe.ta)(t,s,a),o._sqlite3_bind_text=(t,s,a,l,x)=>(o._sqlite3_bind_text=fe.ua)(t,s,a,l,x),o._sqlite3_bind_parameter_index=(t,s)=>(o._sqlite3_bind_parameter_index=fe.va)(t,s),o._sqlite3_sql=t=>(o._sqlite3_sql=fe.wa)(t),o._sqlite3_normalized_sql=t=>(o._sqlite3_normalized_sql=fe.xa)(t),o._sqlite3_changes=t=>(o._sqlite3_changes=fe.ya)(t),o._sqlite3_close_v2=t=>(o._sqlite3_close_v2=fe.za)(t),o._sqlite3_create_function_v2=(t,s,a,l,x,C,P,be,Re)=>(o._sqlite3_create_function_v2=fe.Aa)(t,s,a,l,x,C,P,be,Re),o._sqlite3_update_hook=(t,s,a)=>(o._sqlite3_update_hook=fe.Ba)(t,s,a),o._sqlite3_open=(t,s)=>(o._sqlite3_open=fe.Ca)(t,s);var ys=o._malloc=t=>(ys=o._malloc=fe.Da)(t),Jr=o._free=t=>(Jr=o._free=fe.Ea)(t);o._RegisterExtensionFunctions=t=>(o._RegisterExtensionFunctions=fe.Fa)(t);var $s=(t,s)=>($s=fe.Ga)(t,s),Fs=(t,s)=>(Fs=fe.Ha)(t,s),Ar=t=>(Ar=fe.Ia)(t),or=t=>(or=fe.Ja)(t),_r=()=>(_r=fe.Ka)();o.stackSave=()=>_r(),o.stackRestore=t=>Ar(t),o.stackAlloc=t=>or(t),o.cwrap=(t,s,a,l)=>{var x=!a||a.every(C=>C==="number"||C==="boolean");return s!=="string"&&x&&!l?o["_"+t]:(...C)=>Gn(t,s,a,C)},o.addFunction=Tr,o.removeFunction=ar,o.UTF8ToString=q,o.ALLOC_NORMAL=Kr,o.allocate=Xr,o.allocateUTF8OnStack=hs;function js(){function t(){if(o.calledRun=!0,!ae){if(!o.noFSInit&&!Pt){var s,a;Pt=!0,l??=o.stdin,s??=o.stdout,a??=o.stderr,l?Ut("stdin",l):Ye("/dev/tty","/dev/stdin"),s?Ut("stdout",null,s):Ye("/dev/tty","/dev/stdout"),a?Ut("stderr",null,a):Ye("/dev/tty1","/dev/stderr"),J("/dev/stdin",0),J("/dev/stdout",1),J("/dev/stderr",1)}if(fe.N(),kt=!1,o.onRuntimeInitialized?.(),o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;){var l=o.postRun.shift();st.unshift(l)}Ve(st)}}if(0<B)K=js;else{if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)X();Ve(ve),0<B?K=js:o.setStatus?(o.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>o.setStatus(""),1),t()},1)):t()}}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return js(),j}),d)};r.exports=u,r.exports.default=u})(Rs)),Rs.exports}var Ko=Go();const On=zi(Ko);function qn({query:r,schemaContext:n}){const[d,u]=i.useState(!1),[c,g]=i.useState(null),[f,j]=i.useState(null),[p,o]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const k=await On({locateFile:L=>`/${L}`});j(k),o(!1)}catch(k){console.error("Failed to initialize SQL.js:",k),o(!1)}})()},[]);const y=async()=>{if(!(!r?.trim()||!f)){u(!0),g(null);try{const m=new f.Database;n?.trim()&&m.run(n);const k=m.exec(r);if(k.length>0){const L=k[0];g({success:!0,output:"Success",parsedData:{columns:L.columns,rows:L.values}})}else g({success:!0,output:"Query executed successfully. No rows returned.",parsedData:{columns:[],rows:[]}});m.close()}catch(m){g({success:!1,error:m.message||"Execution failed"})}finally{u(!1)}}},T=m=>{navigator.clipboard.writeText(m)},R=()=>{if(!c?.parsedData)return{columns:[],rows:[]};const{columns:m,rows:k}=c.parsedData;return{columns:m||[],rows:k||[]}},{columns:h,rows:W}=R();return e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:e.jsx("button",{onClick:y,disabled:d||!r?.trim()||p,style:{fontSize:"0.85rem",padding:"0.6rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, #3b82f6, #2563eb)",color:"white",border:"none",borderRadius:"8px",cursor:d||!r?.trim()||p?"not-allowed":"pointer",opacity:d||!r?.trim()||p?.6:1,fontWeight:500},children:p?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-small"}),"Initializing..."]}):d?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-small"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ds,{size:16}),"Run & Visualize"]})})}),!p&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.75rem",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"0.4rem 0.75rem",borderRadius:"20px",fontWeight:600,border:"1px solid rgba(16, 185, 129, 0.2)"},children:[e.jsx(Tt,{size:12}),"WASM Sandbox Active"]})]}),c&&e.jsxs("div",{style:{background:"var(--bg-dark)",borderRadius:"12px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",borderBottom:"1px solid var(--border-color)",background:"var(--bg-card)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:c.success?e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:16,color:"#10b981"}),e.jsx("span",{style:{fontWeight:500,color:"#10b981"},children:"Results"})]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{size:16,color:"#ef4444"}),e.jsx("span",{style:{fontWeight:500,color:"#ef4444"},children:"Error"})]})}),c.success&&W.length>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[W.length," row(s) returned"]}),e.jsxs("button",{onClick:()=>T(c.output||""),style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.3rem 0.6rem",fontSize:"0.75rem",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"4px",color:"var(--text-muted)",cursor:"pointer"},children:[e.jsx(Ti,{size:12})," Copy"]})]})]}),e.jsx("div",{style:{padding:"1rem"},children:c.success?e.jsx(e.Fragment,{children:h.length>0&&W.length>0?e.jsx("div",{style:{overflowX:"auto",maxHeight:"350px"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"rgba(59, 130, 246, 0.1)",position:"sticky",top:0},children:h.map((m,k)=>e.jsx("th",{style:{padding:"0.75rem 1rem",textAlign:"left",borderBottom:"2px solid var(--border-color)",fontWeight:600,color:"#3b82f6",whiteSpace:"nowrap"},children:m},k))})}),e.jsx("tbody",{children:W.map((m,k)=>e.jsx("tr",{style:{background:k%2===0?"transparent":"rgba(255,255,255,0.02)"},children:m.map((L,D)=>e.jsx("td",{style:{padding:"0.6rem 1rem",borderBottom:"1px solid var(--border-color)",color:L===null||L===""?"var(--text-muted)":"var(--text-main)"},children:L===null?"NULL":L},D))},k))})]})}):e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"var(--text-muted)",fontStyle:"italic"},children:"Query executed successfully. No rows returned."})}):e.jsx("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.2)"},children:e.jsx("pre",{style:{margin:0,fontSize:"0.85rem",color:"#f87171",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},children:c.error||c.output||"Unknown error"})})})]})]})}function Xo(r){if(!r||!r.trim())return{tables:[]};const n=[],d=/CREATE\s+TABLE\s+(?:IF\s+NOT\s+EXISTS\s+)?[`"']?(\w+)[`"']?\s*\(([\s\S]*?)\)\s*;/gi;let u;for(;(u=d.exec(r))!==null;){const c=u[1],g=u[2],f=[],j=g.match(/PRIMARY\s+KEY\s*\(([^)]+)\)/i),p=j?j[1].split(",").map(h=>h.trim().replace(/[`"']/g,"").toLowerCase()):[],o=/FOREIGN\s+KEY\s*\(\s*[`"']?(\w+)[`"']?\s*\)\s*REFERENCES\s+[`"']?(\w+)[`"']?\s*\(\s*[`"']?(\w+)[`"']?\s*\)/gi,y={};let T;for(;(T=o.exec(g))!==null;)y[T[1].toLowerCase()]={table:T[2],column:T[3]};const R=g.split(`
`).map(h=>h.trim().replace(/,\s*$/,"")).filter(h=>h.length>0);for(const h of R){if(/^\s*(PRIMARY\s+KEY|FOREIGN\s+KEY|UNIQUE|CHECK|CONSTRAINT|INDEX|KEY\s)/i.test(h))continue;const W=h.match(/^[`"']?(\w+)[`"']?\s+(\w+(?:\s*\([^)]*\))?)\s*(.*)?$/i);if(!W)continue;const m=W[1],k=W[2],L=W[3]||"",D=p.includes(m.toLowerCase())||/PRIMARY\s+KEY/i.test(L),S=y.hasOwnProperty(m.toLowerCase());f.push({name:m,type:k,isPrimaryKey:D,isForeignKey:S,isNotNull:/NOT\s+NULL/i.test(L),isAutoIncrement:/AUTO_INCREMENT|AUTOINCREMENT/i.test(L),defaultValue:L.match(/DEFAULT\s+([^\s,]+)/i)?.[1]||null,references:S?y[m.toLowerCase()]:null})}f.length>0&&n.push({name:c,columns:f})}return{tables:n}}function Jo(r){const n=(r||"").toLowerCase();return n.includes("int")||n.includes("decimal")||n.includes("float")||n.includes("double")||n.includes("numeric")?e.jsx(tn,{size:12,color:"#f59e0b"}):n.includes("char")||n.includes("text")||n.includes("varchar")?e.jsx(Ra,{size:12,color:"#3b82f6"}):n.includes("date")||n.includes("time")||n.includes("timestamp")?e.jsx(In,{size:12,color:"#8b5cf6"}):n.includes("bool")?e.jsx(Ki,{size:12,color:"#10b981"}):e.jsx(tn,{size:12,color:"#64748b"})}function Hn({schema:r}){const[n,d]=i.useState(null),[u,c]=i.useState({});i.useEffect(()=>{if(r){const j=Xo(r);if(d(j),j.tables){const p={};j.tables.forEach(o=>p[o.name]=!0),c(p)}}},[r]);const g=j=>{c(p=>({...p,[j]:!p[j]}))};if(!n||!n.tables||n.tables.length===0)return e.jsxs("div",{className:"glass",style:{padding:"2rem",textAlign:"center",borderRadius:"16px"},children:[e.jsx(Tt,{size:32,style:{opacity:.3,marginBottom:"1rem"}}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem"},children:"No schema detected for this problem."})]});const f=[];return n.tables.forEach(j=>{j.columns.forEach(p=>{p.isForeignKey&&p.references&&f.push({from:j.name,fromCol:p.name,to:p.references.table,toCol:p.references.column})})}),e.jsxs("div",{className:"sql-visualizer animate-fadeIn",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{padding:"0.5rem",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",borderRadius:"10px",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:e.jsx(Tt,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Database Map"}),e.jsxs("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:["Interactive Entity Relationship View â€¢ ",n.tables.length," table(s) detected"]})]}),e.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.7rem",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"0.35rem 0.7rem",borderRadius:"20px",fontWeight:600,border:"1px solid rgba(16, 185, 129, 0.2)"},children:"âš¡ Local Parse"})]}),f.length>0&&e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.08)",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.15)"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"#a78bfa",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Relationships"}),f.map((j,p)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem",marginBottom:"0.25rem"},children:[e.jsx("span",{style:{fontWeight:600,color:"#3b82f6"},children:j.from}),e.jsxs("span",{style:{color:"var(--text-muted)"},children:[".",j.fromCol]}),e.jsx("span",{style:{color:"#f59e0b"},children:"â†’"}),e.jsx("span",{style:{fontWeight:600,color:"#10b981"},children:j.to}),e.jsxs("span",{style:{color:"var(--text-muted)"},children:[".",j.toCol]})]},p))]}),e.jsx("div",{className:"er-diagram-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.5rem"},children:n.tables.map(j=>e.jsxs("div",{className:"glass table-card",style:{borderRadius:"16px",overflow:"hidden",border:"1px solid var(--glass-border)",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",background:"var(--glass-bg)",transition:"all 0.3s ease"},children:[e.jsxs("div",{onClick:()=>g(j.name),style:{padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderBottom:u[j.name]?"1px solid var(--glass-border)":"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Ds,{size:18,color:"#3b82f6"}),e.jsx("span",{style:{fontWeight:700,fontSize:"1rem",letterSpacing:"-0.01em"},children:j.name}),e.jsxs("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",background:"rgba(255,255,255,0.05)",padding:"0.15rem 0.5rem",borderRadius:"10px"},children:[j.columns.length," cols"]})]}),u[j.name]?e.jsx(Rn,{size:16}):e.jsx(Ns,{size:16})]}),u[j.name]&&e.jsx("div",{className:"table-columns",style:{padding:"0.5rem 0"},children:j.columns.map((p,o)=>e.jsxs("div",{className:"column-row",style:{padding:"0.6rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"0.85rem",borderBottom:o===j.columns.length-1?"none":"1px solid rgba(255,255,255,0.03)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[p.isPrimaryKey?e.jsx(Gi,{size:14,color:"#f59e0b",title:"Primary Key"}):p.isForeignKey?e.jsx(ma,{size:14,color:"#10b981",title:`FK â†’ ${p.references?.table}`}):Jo(p.type),e.jsx("span",{style:{fontWeight:p.isPrimaryKey||p.isForeignKey?600:400},children:p.name}),p.isPrimaryKey&&e.jsx("span",{style:{fontSize:"0.6rem",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",padding:"0.1rem 0.4rem",borderRadius:"4px",fontWeight:700},children:"PK"}),p.isForeignKey&&e.jsx("span",{style:{fontSize:"0.6rem",background:"rgba(16, 185, 129, 0.15)",color:"#10b981",padding:"0.1rem 0.4rem",borderRadius:"4px",fontWeight:700},children:"FK"}),p.isNotNull&&e.jsx("span",{style:{fontSize:"0.6rem",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",padding:"0.1rem 0.4rem",borderRadius:"4px",fontWeight:700},children:"NN"})]}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.75rem",fontFamily:"monospace"},children:p.type?.toLowerCase()})]},o))})]},j.name))}),e.jsx("style",{children:`
                .table-card:hover {
                    transform: translateY(-5px);
                    border-color: var(--primary);
                    box-shadow: 0 15px 35px rgba(59, 130, 246, 0.15);
                }
                .column-row:hover {
                    background: rgba(255, 255, 255, 0.05);
                }
                .sql-visualizer {
                    padding: 1.5rem;
                    background: rgba(15, 23, 42, 0.2);
                    border-radius: 20px;
                    border: 1px solid var(--border-color);
                }
            `})]})}function Zo(r){if(!r||!r.trim())return[];const n=r.trim(),d=[],u=n.replace(/\s+/g," "),c=u.match(/FROM\s+(.+?)(?:\s+WHERE|\s+GROUP\s+BY|\s+HAVING|\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),g=u.match(/WHERE\s+(.+?)(?:\s+GROUP\s+BY|\s+HAVING|\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),f=u.match(/GROUP\s+BY\s+(.+?)(?:\s+HAVING|\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),j=u.match(/HAVING\s+(.+?)(?:\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),p=u.match(/ORDER\s+BY\s+(.+?)(?:\s+LIMIT|\s*;?\s*$)/i),o=u.match(/LIMIT\s+(\d+)/i),y=c?c[1].trim():null;if(!y)return d.push({stepName:"Execute",description:"Run the full query",query:n}),d;if(d.push({stepName:"1. FROM (Base Data)",description:`Load all rows from: ${y}`,query:`SELECT * FROM ${y};`}),g&&d.push({stepName:"2. WHERE (Filter)",description:`Apply filter: ${g[1].trim()}`,query:`SELECT * FROM ${y} WHERE ${g[1].trim()};`}),f){const W=f[1].trim();let m=`SELECT ${W}, COUNT(*) as count FROM ${y}`;g&&(m+=` WHERE ${g[1].trim()}`),m+=` GROUP BY ${W}`,j&&(m+=` HAVING ${j[1].trim()}`),m+=";",d.push({stepName:"3. GROUP BY (Aggregate)",description:`Group rows by: ${W}${j?` with HAVING: ${j[1].trim()}`:""}`,query:m})}let T=u.replace(/\s*ORDER\s+BY\s+.+?(?=\s+LIMIT|\s*;?\s*$)/i,"").replace(/\s*LIMIT\s+\d+/i,"").replace(/;?\s*$/,";");T!==n.replace(/;?\s*$/,";")&&d.push({stepName:`${f?"4":g?"3":"2"}. SELECT (Projection)`,description:"Apply column selection and expressions",query:T}),(p||o)&&d.push({stepName:`${d.length+1}. Final Result`,description:`${p?`Sort by: ${p[1].trim()}`:""}${o?` | Limit: ${o[1]}`:""}`,query:n.replace(/;?\s*$/,";")});const R=d[d.length-1]?.query?.replace(/;\s*$/,"").trim().toLowerCase(),h=n.replace(/;\s*$/,"").trim().toLowerCase();return R!==h&&d.push({stepName:`${d.length+1}. Final Result`,description:"Complete query output",query:n.replace(/;?\s*$/,";")}),d}function Qn({query:r,schema:n}){const[d,u]=i.useState([]),[c,g]=i.useState(0),[f,j]=i.useState(!1),[p,o]=i.useState({}),[y,T]=i.useState(null),[R,h]=i.useState(null),[W,m]=i.useState(!1);i.useEffect(()=>{(async()=>{try{const I=await On({locateFile:$=>`/${$}`});h(I),m(!0)}catch(I){console.error("Failed to init SQL.js:",I)}})()},[]);const k=(b,I)=>{try{const $=b.exec(I);return $.length>0?{columns:$[0].columns,rows:$[0].values}:{columns:[],rows:[]}}catch($){return{error:$.message}}},L=()=>{if(!(!r||!R)){j(!0),T(null),o({});try{const b=Zo(r);if(b.length===0){T("Could not break down the query. Make sure it is a valid SELECT statement."),j(!1);return}u(b),g(0);const I=new R.Database;n?.trim()&&I.run(n);const $={};for(let G=0;G<b.length;G++)$[G]=k(I,b[G].query);o($),I.close()}catch(b){T(b.message||"Failed to analyze query.")}finally{j(!1)}}},D=()=>{c<d.length-1&&g(c+1)},S=()=>{c>0&&g(c-1)};return e.jsxs("div",{className:"sql-debugger-panel animate-fadeIn",children:[e.jsxs("div",{className:"debugger-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.25rem",borderBottom:"1px solid var(--border-color)",background:"rgba(59, 130, 246, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(At,{size:20,color:"#3b82f6"}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:700},children:"Step-Wise Debugger"}),e.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:"Trace query logic layer by layer"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[W&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.7rem",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"0.35rem 0.7rem",borderRadius:"20px",fontWeight:600,border:"1px solid rgba(16, 185, 129, 0.2)"},children:[e.jsx(Tt,{size:12})," WASM"]}),e.jsxs("button",{onClick:L,disabled:f||!W,style:{padding:"0.6rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,cursor:f||!W?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",opacity:f||!W?.6:1},children:[e.jsx(qt,{size:16})," ",d.length>0?"Restart Trace":"Trace Query"]})]})]}),y&&e.jsxs("div",{style:{padding:"1rem 1.25rem",background:"rgba(239, 68, 68, 0.1)",borderBottom:"1px solid rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(sn,{size:16,color:"#ef4444"}),e.jsx("span",{style:{fontSize:"0.85rem",color:"#f87171"},children:y})]}),e.jsxs("div",{className:"debugger-content",style:{display:"grid",gridTemplateColumns:"300px 1fr",minHeight:"400px"},children:[e.jsxs("div",{className:"steps-sidebar",style:{borderRight:"1px solid var(--border-color)",background:"rgba(0,0,0,0.1)"},children:[d.map((b,I)=>e.jsxs("div",{onClick:()=>g(I),style:{padding:"1rem 1.25rem",borderBottom:"1px solid rgba(255,255,255,0.03)",cursor:"pointer",background:c===I?"rgba(59, 130, 246, 0.15)":"transparent",position:"relative",display:"flex",alignItems:"flex-start",gap:"0.75rem",transition:"background 0.2s"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:p[I]?.error?"#ef4444":I<=c?"#10b981":"var(--bg-dark)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:800,color:"white",marginTop:"2px",flexShrink:0},children:p[I]?.error?"!":I<c?e.jsx(ca,{size:14}):I+1}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.85rem"},children:b.stepName}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"2px"},children:b.description}),p[I]&&!p[I].error&&e.jsxs("div",{style:{fontSize:"0.65rem",color:"#10b981",marginTop:"3px"},children:[p[I].rows.length," row(s)"]})]}),c===I&&e.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",width:"3px",height:"60%",background:"#3b82f6",borderRadius:"3px 0 0 3px"}})]},I)),d.length===0&&e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)",fontSize:"0.85rem"},children:[e.jsx(Ai,{size:32,style:{marginBottom:"1rem",opacity:.2}}),e.jsx("p",{children:'Click "Trace Query" to analyze SQL logic steps.'})]})]}),e.jsx("div",{className:"result-area",style:{display:"flex",flexDirection:"column"},children:d.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"step-query-info",style:{padding:"1rem 1.5rem",background:"rgba(0,0,0,0.2)"},children:[e.jsx("div",{style:{fontSize:"0.7rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#10b981",fontWeight:700,marginBottom:"0.5rem"},children:"Current Operation Query"}),e.jsx("div",{style:{background:"#020617",padding:"0.75rem 1rem",borderRadius:"8px",fontFamily:"monospace",fontSize:"0.85rem",color:"#cbd5e1",border:"1px solid rgba(255,255,255,0.05)",whiteSpace:"pre-wrap"},children:d[c]?.query})]}),e.jsx("div",{className:"step-data-preview",style:{flex:1,padding:"1.5rem",overflow:"auto"},children:p[c]?.error?e.jsx("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.2)"},children:e.jsx("pre",{style:{margin:0,fontSize:"0.85rem",color:"#f87171",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:p[c].error})}):p[c]?e.jsx("div",{className:"debugger-table-container",children:p[c].columns.length>0&&p[c].rows.length>0?e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"rgba(255,255,255,0.05)"},children:p[c].columns.map((b,I)=>e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid var(--border-color)",color:"#3b82f6",fontWeight:600},children:b},I))})}),e.jsx("tbody",{children:p[c].rows.map((b,I)=>e.jsx("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.03)"},children:b.map(($,G)=>e.jsx("td",{style:{padding:"0.75rem",color:$===null?"var(--text-muted)":"var(--text-main)"},children:$===null?"NULL":String($)},G))},I))})]}):e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"Query executed successfully. No rows returned."})}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",opacity:.5},children:[e.jsx(sn,{size:32}),e.jsx("p",{style:{marginTop:"1rem"},children:"No data for this step."})]})}),e.jsxs("div",{className:"debugger-footer",style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:["Step ",c+1," of ",d.length]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[c>0&&e.jsx("button",{onClick:S,style:{padding:"0.5rem 1.25rem",background:"rgba(255,255,255,0.05)",color:"var(--text-main)",border:"1px solid var(--border-color)",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:"â† Previous"}),c<d.length-1&&e.jsxs("button",{onClick:D,style:{padding:"0.5rem 1.25rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Next Step ",e.jsx(wa,{size:16})]})]})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,padding:"3rem",textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"20px",background:"rgba(59, 130, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1.5rem"},children:e.jsx(At,{size:32,color:"#3b82f6"})}),e.jsx("h4",{style:{margin:"0 0 0.5rem 0"},children:"Ready to Debug"}),e.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-muted)",maxWidth:"400px"},children:"The debugger will break your SQL query into physical execution steps so you can see how data flows through JOINs and WHERE clauses."})]})})]}),e.jsx("style",{children:`
                .sql-debugger-panel {
                    border-radius: 20px;
                    overflow: hidden;
                    background: var(--bg-card);
                    border: 1px solid var(--border-color);
                    box-shadow: var(--glass-shadow);
                }
                .debugger-table-container {
                    border-radius: 12px;
                    border: 1px solid rgba(255,255,255,0.05);
                    overflow: hidden;
                    background: #020617;
                }
            `})]})}let Is=null,hn=null;const el=async()=>{if(!Is){const[r,n]=await Promise.all([Dr(()=>import("./index-CGpBrb7s.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])),Dr(()=>import("./coco-ssd.es2017.esm.min-Cu4i25oh.js").then(d=>d.c),__vite__mapDeps([9,2,3,1,4]))]);Is=r,hn=n}return{tf:Is,cocoSsd:hn}},Ts="http://localhost:3000/api",hr={Python:{monacoLang:"python",ext:".py",defaultCode:`# Write your Python code here

def solution():
    pass

# Call your solution
solution()`},JavaScript:{monacoLang:"javascript",ext:".js",defaultCode:`// Write your JavaScript code here

function solution() {
    
}

// Call your solution
solution();`},Java:{monacoLang:"java",ext:".java",defaultCode:`// Write your Java code here

public class Solution {
    public static void main(String[] args) {
        // Your code here
    }
}`},C:{monacoLang:"c",ext:".c",defaultCode:`// Write your C code here
#include <stdio.h>

int main() {
    // Your code here
    return 0;
}`},"C++":{monacoLang:"cpp",ext:".cpp",defaultCode:`// Write your C++ code here
#include <iostream>
using namespace std;

int main() {
    // Your code here
    return 0;
}`},SQL:{monacoLang:"sql",ext:".sql",defaultCode:`-- Write your SQL query here
SELECT * FROM table_name;`}},bn={aptitude:{label:"Aptitude",icon:It},verbal:{label:"Verbal",icon:St},logical:{label:"Logical",icon:At},coding:{label:"Coding",icon:vt},sql:{label:"SQL",icon:Tt}};function tl(r,n){const d=[...r];let u=d.length;const c=()=>(n=(n*9301+49297)%233280,n/233280);for(;u--;){const g=Math.floor(c()*(u+1));[d[u],d[g]]=[d[g],d[u]]}return d}function rl(r,n){let d=0;const u=`${r}-${n}`;for(let c=0;c<u.length;c++)d=(d<<5)-d+u.charCodeAt(c)|0;return Math.abs(d)}function sl({test:r,user:n,onClose:d,onComplete:u}){const[c,g]=i.useState(0),[f,j]=i.useState(0),[p,o]=i.useState({}),[y,T]=i.useState((r.duration||180)*60),[R,h]=i.useState(0),[W,m]=i.useState(!1),[k,L]=i.useState(""),[D,S]=i.useState(!1),[b,I]=i.useState(null),[$,G]=i.useState(!1),[ae,ne]=i.useState(!1),[v,N]=i.useState({}),[A,te]=i.useState(""),[se,ie]=i.useState(!1),[ge,pe]=i.useState(!0),[de,ce]=i.useState(350),B=i.useRef(null),K=i.useRef(!1),[V,Ae]=i.useState({}),[Fe,He]=i.useState({}),[Ie,Je]=i.useState({}),[Ve,st]=i.useState({}),[ve,X]=i.useState("validator"),ye=i.useRef(null),ze=i.useRef(p),F=i.useRef(R),O=i.useRef(y),z=i.useRef(!1),q=r.proctoring||{},[Se,E]=i.useState(!1),[ee,re]=i.useState(!1),[Pe,we]=i.useState(null),[Qe,ht]=i.useState(!1),[Ue,Ge]=i.useState(0),[Et,ut]=i.useState(!1),[ot,Vt]=i.useState(!1),[$e,Gt]=i.useState(q.enabled&&q.enableVideoAudio),[ue,Kt]=i.useState(!1),[wt,Ht]=i.useState(0),[mt,rr]=i.useState(0),Ke=i.useRef(null),Pt=i.useRef(null),kt=i.useRef(null),qe=i.useRef(null),Y=i.useRef(null),gr=i.useRef(0),sr=i.useRef(0),rt=i.useRef(0),[Qt,nr]=i.useState(0),Xt=i.useRef(0),dt=i.useRef(!1),Nt=i.useMemo(()=>{const _=r.questionsBySection||{};return["aptitude","verbal","logical","coding","sql"].filter(H=>(_[H]&&_[H].length)>0)},[r.questionsBySection]),Ze=i.useMemo(()=>{const _=r.questionsBySection||{},H=rl(n.id,r.id),J=[];return Nt.forEach(Z=>{const xe=(_[Z]||[]).map(Ee=>({...Ee,section:Z}));J.push(...tl(xe,H+Z.length))}),J},[r.questionsBySection,Nt,n.id,r.id]),jr=Nt[c]||Nt[0],bt=Ze.filter(_=>_.section===jr),U=bt[f],zt=Ze.length;i.useEffect(()=>{ze.current=p},[p]),i.useEffect(()=>{F.current=R},[R]),i.useEffect(()=>{O.current=y},[y]),i.useEffect(()=>{const _=async()=>{try{!document.fullscreenElement&&!z.current&&await document.documentElement.requestFullscreen()}catch{}};_();const H=()=>{!document.fullscreenElement&&!z.current&&q.enabled&&(L("âš ï¸ Fullscreen mode required! Re-entering..."),m(!0),setTimeout(()=>{z.current||_(),m(!1)},1500))};return document.addEventListener("fullscreenchange",H),r&&n&&Xe.emitSubmissionStarted(n.id,n.name||n.email,r.id,r.title,null,r.proctoring?.enabled||!1),()=>{document.removeEventListener("fullscreenchange",H),document.fullscreenElement&&!z.current&&document.exitFullscreen().catch(()=>{})}},[]),i.useEffect(()=>{if(!(b||!zt))return ye.current=setInterval(()=>{T(_=>_<=1?(clearInterval(ye.current),he(!0),0):_-1)},1e3),()=>clearInterval(ye.current)},[b,zt]);const Lt=r.maxTabSwitches??3;i.useEffect(()=>{const _=()=>{document.hidden&&!b&&h(H=>{const J=H+1;return Xe.emitProctoringViolation(n.id,n.name||n.email,"window_switch",J>=Lt?"critical":"warning",null),J>=Lt?(L(`Disqualified: max tab switches (${J}) exceeded.`),m(!0),setTimeout(()=>he(!0),2e3)):(L(`Tab switch detected (${J}/${Lt}).`),m(!0),setTimeout(()=>m(!1),3e3)),J})};return document.addEventListener("visibilitychange",_),()=>document.removeEventListener("visibilitychange",_)},[b,Lt]);const nt=async()=>{try{const _=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:320,height:240},audio:!0});if(we(_),E(!0),re(!0),ut(!0),Vt(!1),Ke.current&&(Ke.current.srcObject=_,Ke.current.play().catch(()=>{})),q.detectCameraBlocking&&(kt.current=setInterval(Cr,1500)),q.detectPhoneUsage||q.detectCameraBlocking)try{const{tf:H,cocoSsd:J}=await el();await H.ready();const Z=await J.load();qe.current=Z,Y.current=setInterval(vr,3e3)}catch(H){console.warn("Failed to load object detector:",H)}return!0}catch(_){return console.error("Camera access denied:",_),Vt(!0),ut(!1),!1}};i.useEffect(()=>{if(!(q.enabled&&q.enableVideoAudio))return(!q.enabled||!q.enableVideoAudio)&&(ut(!0),Gt(!1)),()=>{kt.current&&clearInterval(kt.current),Y.current&&clearInterval(Y.current),Pe&&Pe.getTracks().forEach(_=>_.stop())}},[q.enabled,q.enableVideoAudio]),i.useEffect(()=>{dt.current=Qe},[Qe]);const vr=i.useCallback(async()=>{if(!(!qe.current||!Ke.current||Ke.current.readyState!==4))try{const _=await qe.current.detect(Ke.current);q.detectPhoneUsage&&(_.find(Z=>Z.class==="cell phone"&&Z.score>.6)?(Kt(!0),Ht(Z=>{const xe=Z+1;return sr.current=xe,L(`ðŸ“µ Mobile Phone Detected! (${xe})`),m(!0),setTimeout(()=>m(!1),3e3),Xe.emitProctoringViolation(n.id,n.name||n.email,"phone_detected",xe>=3?"critical":"warning",null),xe})):Kt(!1)),!_.find(J=>J.class==="person"&&J.score>.5)&&!dt.current&&nr(J=>{const Z=J+1;return Xt.current=Z,Z%3===0&&Xe.emitProctoringViolation(n.id,n.name||n.email,"face_not_detected",Z>=9?"critical":"warning",null),Z})}catch(_){console.error("Detection error:",_)}},[q.detectPhoneUsage]),Cr=i.useCallback(()=>{if(!Ke.current||!Pt.current)return;const _=Ke.current,H=Pt.current;if(_.readyState<2||_.videoWidth===0)return;const J=H.getContext("2d");H.width=_.videoWidth||320,H.height=_.videoHeight||240,J.drawImage(_,0,0,H.width,H.height);const xe=J.getImageData(0,0,H.width,H.height).data;let Ee=0,yt=0,Jt=H.width*H.height;for(let Wt=0;Wt<xe.length;Wt+=4){const Dt=(xe[Wt]+xe[Wt+1]+xe[Wt+2])/3;Ee+=Dt,Dt<15&&yt++}const Ut=Ee/Jt,Oe=yt/Jt,Yt=Ut<25||Oe>.85;Yt&&!dt.current?(dt.current=!0,ht(!0),Ge(Wt=>{const Dt=Wt+1;return gr.current=Dt,L(`âš ï¸ Camera blocked detected! Please uncover your camera. (${Dt})`),m(!0),Xe.emitProctoringViolation(n.id,n.name||n.email,"camera_blocked",Dt>=3?"critical":"warning",null),Dt})):!Yt&&dt.current&&(dt.current=!1,ht(!1),m(!1))},[n]);i.useEffect(()=>{if(!q.enabled||!q.disableCopyPaste)return;const _=Z=>{Z.preventDefault(),rr(xe=>{const Ee=xe+1;return rt.current=Ee,L(`ðŸ“‹ Copy attempt blocked! (${Ee})`),m(!0),setTimeout(()=>m(!1),2e3),Xe.emitProctoringViolation(n.id,n.name||n.email,"copy_attempt",Ee>=5?"critical":"warning",null),Ee})},H=Z=>{Z.preventDefault(),rr(xe=>{const Ee=xe+1;return rt.current=Ee,L(`ðŸ“‹ Paste attempt blocked! (${Ee})`),m(!0),setTimeout(()=>m(!1),2e3),Xe.emitProctoringViolation(n.id,n.name||n.email,"paste_attempt",Ee>=5?"critical":"warning",null),Ee})},J=Z=>Z.preventDefault();return document.addEventListener("copy",_),document.addEventListener("paste",H),document.addEventListener("contextmenu",J),()=>{document.removeEventListener("copy",_),document.removeEventListener("paste",H),document.removeEventListener("contextmenu",J)}},[q.enabled,q.disableCopyPaste]),i.useEffect(()=>{gr.current=Ue},[Ue]),i.useEffect(()=>{sr.current=wt},[wt]),i.useEffect(()=>{rt.current=mt},[mt]),i.useEffect(()=>{Xt.current=Qt},[Qt]);const ir=(_,H)=>{o(J=>({...J,[_]:H}))};i.useEffect(()=>{if(!U)return;if(U.questionType==="coding"||U.questionType==="sql"||U.type==="coding"||U.type==="SQL"){const H=U.type==="SQL"||U.questionType==="sql"?"SQL":U.testCases?.language||"Python";if(!Ve[U.id]){const J=Object.keys(hr).find(Z=>Z.toLowerCase()===H.toLowerCase())||"Python";if(st(Z=>({...Z,[U.id]:J})),p[U.id]===void 0){const Z=hr[J].defaultCode;o(xe=>({...xe,[U.id]:Z}))}}}},[U?.id,U?.questionType,U?.starterCode,U?.testCases?.language]);const Rr=(_,H)=>{p[_]&&(p[_],hr[Ve[_]]?.defaultCode),st(J=>({...J,[_]:H})),o(J=>({...J,[_]:hr[H].defaultCode}))},M=async(_,H,J,Z)=>{N(xe=>({...xe,[_]:"Running..."})),Ae(xe=>({...xe,[_]:"output"}));try{const xe=await oe.post(`${Ts}/run`,{code:H,language:J,problemId:_,sqlSchema:Z,stdin:Fe[_]||""});let Ee=xe.data.output||"";xe.data.stderr&&(Ee=Ee?`${Ee}

--- Errors ---
${xe.data.stderr}`:xe.data.stderr),N(yt=>({...yt,[_]:Ee||xe.data.error||"No output"}))}catch(xe){N(Ee=>({...Ee,[_]:"Error: "+(xe.response?.data?.error||xe.message)}))}finally{ne(!1)}},me=async()=>{if(U){ie(!0);try{const _=U.type==="SQL"||U.questionType==="sql",H=Ve[U.id]||(_?"SQL":"Python"),J=await oe.post(`${Ts}/hints`,{problemDescription:U.question,currentCode:p[U.id]||"",language:H});te(J.data.hint)}catch{te("Unable to generate hint at this time.")}finally{ie(!1)}}},he=async(_=!1)=>{if(!D&&!(!_&&zt>0&&Object.keys(p).length<zt&&!window.confirm(`You have ${zt-Object.keys(p).length} unanswered. Submit anyway?`))){if(z.current=!0,S(!0),Pe&&Pe.getTracks().forEach(H=>H.stop()),kt.current&&clearInterval(kt.current),Y.current&&clearInterval(Y.current),document.fullscreenElement)try{await document.exitFullscreen()}catch{}try{const H=(r.duration||120)*60-O.current;console.log("[Submit] Sending submission..."),n&&r&&Xe.emitSubmissionCompleted(n.id,n.name||n.email,r.id,r.title,null,"success",Math.round(Object.keys(ze.current).length/zt*100));const J=await oe.post(`${Ts}/global-tests/${r.id}/submit`,{studentId:n.id,answers:ze.current,selectedLanguages:Ve,timeSpent:H,tabSwitches:F.current,copyPasteAttempts:rt.current,cameraBlockedCount:gr.current,phoneDetectionCount:sr.current,faceMissingCount:Xt.current,proctoringEnabled:q.enabled||!1});console.log("[Submit] Response received:",JSON.stringify(J.data).substring(0,500));const Z=J.data.submission||J.data;console.log("[Submit] submissionResult status:",Z?.status,"score:",Z?.score,"sectionScores:",JSON.stringify(Z?.sectionScores)),Z?(await new Promise(xe=>setTimeout(xe,200)),console.log("[Submit] Submission successful, returning to test list..."),S(!1),d(),u&&u(Z)):(console.error("[Submit] No submission data in response"),S(!1),alert("Test submitted but no result data received. Please refresh the page."))}catch(H){console.error("[Submit] Error:",H),S(!1),alert(H.response?.data?.error||"Submit failed. Please try again.")}}},Te=_=>{const H=Math.floor(_/60),J=_%60;return`${String(H).padStart(2,"0")}:${String(J).padStart(2,"0")}`},_e=()=>{f<bt.length-1?j(_=>_+1):c<Nt.length-1&&(g(c+1),j(0))},gt=()=>{if(f>0)j(_=>_-1);else if(c>0){const _=Nt[c-1],H=Ze.filter(J=>J.section===_).length;g(c-1),j(H-1)}};if($&&b){const _=b.sectionScores||{},H=b.status==="passed";return e.jsxs("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"auto",animation:"fadeIn 0.3s ease-out"},children:[e.jsx("style",{children:`
                    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                    @keyframes scaleIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
                    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
                    @keyframes confetti { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(-100px) rotate(720deg); opacity: 0; } }
                `}),e.jsxs("div",{style:{background:"rgba(30,41,59,0.98)",borderRadius:"24px",border:`2px solid ${H?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)"}`,maxWidth:800,width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:`0 25px 50px -12px ${H?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,animation:"scaleIn 0.4s ease-out"},children:[e.jsxs("div",{style:{padding:"2rem 2rem 1.5rem",background:H?"linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(6, 182, 212, 0.1))":"linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(251, 146, 60, 0.1))",borderBottom:`1px solid ${H?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`,textAlign:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:H?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",boxShadow:`0 8px 24px ${H?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)"}`,animation:H?"pulse 2s ease-in-out infinite":"none"},children:H?e.jsx(_t,{size:40,color:"white"}):e.jsx(We,{size:40,color:"white"})}),e.jsx("h2",{style:{margin:"0 0 0.5rem",color:"white",fontSize:"1.75rem",fontWeight:800},children:H?"ðŸŽ‰ Congratulations!":"Test Completed"}),e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.7)",fontSize:"1rem"},children:H?"You have successfully passed the assessment!":"Keep practicing to improve your score."})]}),e.jsxs("div",{style:{padding:"2rem",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"2rem",flexWrap:"wrap",justifyContent:"center"},children:[e.jsxs("div",{style:{padding:"1.5rem 2.5rem",background:H?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",borderRadius:16,border:`2px solid ${H?"rgba(16,185,129,0.4)":"rgba(239,68,68,0.4)"}`,textAlign:"center",minWidth:"180px"},children:[e.jsxs("div",{style:{fontSize:"3.5rem",fontWeight:900,color:H?"#10b981":"#ef4444",lineHeight:1},children:[b.score??b.overallPercentage,"%"]}),e.jsx("div",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.6)",marginTop:"0.5rem",textTransform:"uppercase",letterSpacing:"2px",fontWeight:600},children:"Overall Score"})]}),e.jsxs("div",{style:{padding:"1.5rem 2rem",background:"rgba(139, 92, 246, 0.1)",borderRadius:16,border:"1px solid rgba(139, 92, 246, 0.3)",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"2rem",fontWeight:800,color:"#a78bfa"},children:[b.correctCount||0,"/",b.totalQuestions||0]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.5)",marginTop:"0.25rem"},children:"Correct Answers"})]})]}),e.jsxs("h3",{style:{margin:"0 0 1rem",color:"white",fontSize:"1.1rem",fontWeight:700,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(At,{size:18,color:"#8b5cf6"})," Section-wise Performance"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"0.75rem"},children:Object.entries(_).map(([J,Z])=>{const xe=Z>=70?"#10b981":Z>=50?"#f59e0b":"#ef4444";return e.jsxs("div",{style:{padding:"1rem",background:"rgba(30, 41, 59, 0.8)",borderRadius:12,border:"1px solid rgba(255,255,255,0.1)",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:xe},children:[Z,"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",textTransform:"capitalize",marginTop:"0.25rem"},children:J})]},J)})})]}),e.jsx("div",{style:{padding:"1.25rem 2rem",borderTop:"1px solid rgba(139,92,246,0.2)",display:"flex",justifyContent:"center",gap:"1rem",background:"rgba(15, 23, 42, 0.5)"},children:e.jsx("button",{type:"button",onClick:()=>{document.fullscreenElement&&document.exitFullscreen(),d(),u&&u(b)},style:{padding:"0.85rem 2.5rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"12px",color:"white",fontWeight:700,fontSize:"1rem",cursor:"pointer",boxShadow:"0 4px 14px rgba(139, 92, 246, 0.4)",transition:"all 0.2s"},onMouseOver:J=>J.target.style.transform="translateY(-2px)",onMouseOut:J=>J.target.style.transform="translateY(0)",children:"Close & View Results"})})]})]})}if(Ze.length===0)return e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"white"},children:["No questions available.",e.jsx("button",{onClick:d,style:{marginLeft:"1rem",padding:"0.5rem",cursor:"pointer"},children:"Close"})]});const Ye=U?.questionType==="sql"||U?.questionType==="SQL"||U?.language==="SQL"||U?.type==="SQL",ct=(U?.questionType==="coding"||U?.type==="coding"||!!U?.language)&&!Ye,lt=Ve[U?.id]||(Ye?"SQL":"Python"),pt=ct||Ye?p[U?.id]??hr[lt]?.defaultCode??"":"",xt=i.useMemo(()=>{if(!U)return{input:"N/A",output:"N/A"};if(U.sampleInput!==void 0&&U.expectedOutput!==void 0)return{input:String(U.sampleInput),output:String(U.expectedOutput)};if(U.testCases){if(U.questionType==="sql"||U.type==="SQL"){let J="N/A";if(Array.isArray(U.testCases)){const Z=U.testCases[0];Z&&(J=Z.expected_output||Z.expectedOutput||"N/A")}else U.testCases&&(J=U.testCases.expectedOutput||"N/A");return{input:"N/A",output:String(J)}}const _=Array.isArray(U.testCases)?U.testCases:U.testCases.cases||[],H=_.find(J=>!J.isHidden)||_[0];if(H){const J=H.input??H.sampleInput??"(empty)",Z=H.expected_output??H.expectedOutput??"(empty)";return{input:String(J),output:String(Z)}}}return{input:"N/A",output:"N/A"}},[U]);return e.jsxs("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[W&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,padding:"0.75rem 2rem",background:"linear-gradient(135deg, #f59e0b, #d97706)",color:"#1f2937",textAlign:"center",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",boxShadow:"0 4px 20px rgba(245, 158, 11, 0.4)",animation:"slideDown 0.3s ease-out"},children:[e.jsx("style",{children:"@keyframes slideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }"}),e.jsx(Be,{size:20}),e.jsx("span",{style:{fontWeight:600},children:k})]}),D&&e.jsxs("div",{style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.95)",zIndex:1e5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1.5rem"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",border:"4px solid rgba(139, 92, 246, 0.2)",borderTopColor:"#8b5cf6",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),e.jsx("h2",{style:{margin:0,color:"white",fontSize:"1.5rem",fontWeight:700},children:"Submitting Your Test..."}),e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.6)",fontSize:"0.95rem"},children:"Please wait while we evaluate your answers"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#8b5cf6",animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#8b5cf6",animation:"pulse 1.5s ease-in-out 0.2s infinite"}}),e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#8b5cf6",animation:"pulse 1.5s ease-in-out 0.4s infinite"}})]}),e.jsx("style",{children:"@keyframes pulse { 0%, 100% { opacity: 0.3; transform: scale(1); } 50% { opacity: 1; transform: scale(1.2); } }"})]}),$e&&q.enabled&&q.enableVideoAudio&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.98)",zIndex:100001,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #1e293b, #0f172a)",borderRadius:"20px",padding:"3rem",maxWidth:"500px",width:"100%",border:"1px solid rgba(139, 92, 246, 0.3)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.5)"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:e.jsx(ds,{size:40,color:"#8b5cf6"})}),e.jsx("h2",{style:{margin:0,color:"white",fontSize:"1.75rem",fontWeight:700,marginBottom:"0.75rem"},children:"Camera Access Required"}),e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.6)",fontSize:"1rem",lineHeight:1.6},children:"This is a proctored test. You must allow camera and microphone access to continue."})]}),e.jsx("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"12px",padding:"1rem",marginBottom:"2rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx(cr,{size:20,color:"#f59e0b",style:{flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#fbbf24",lineHeight:1.5},children:[e.jsx("strong",{children:"Proctoring features enabled:"}),e.jsxs("ul",{style:{margin:"0.5rem 0 0",paddingLeft:"1.25rem"},children:[q.enableVideoAudio&&e.jsx("li",{children:"Camera & Audio monitoring"}),q.detectCameraBlocking&&e.jsx("li",{children:"Camera obstruction detection"}),q.detectPhoneUsage&&e.jsx("li",{children:"Phone usage detection"}),q.disableCopyPaste&&e.jsx("li",{children:"Copy/Paste disabled"})]})]})]})}),ot&&e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.15)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Be,{size:20,color:"#ef4444"}),e.jsx("div",{style:{color:"#fca5a5",fontSize:"0.9rem"},children:"Camera access was denied. Please allow camera access in your browser settings and try again."})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:d,style:{flex:1,padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"rgba(255,255,255,0.7)",fontSize:"1rem",fontWeight:600,cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:async()=>{await nt()&&Gt(!1)},style:{flex:2,padding:"1rem",borderRadius:"12px",border:"none",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",color:"white",fontSize:"1rem",fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"0 4px 15px rgba(139, 92, 246, 0.4)"},children:[e.jsx(ds,{size:20})," Allow Camera & Start Test"]})]})]})}),Qe&&q.enabled&&q.detectCameraBlocking&&!$e&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(239, 68, 68, 0.95)",zIndex:99999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"20px",padding:"3rem",textAlign:"center",maxWidth:"500px"},children:[e.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem",animation:"pulse 1.5s ease-in-out infinite"},children:e.jsx(cs,{size:50,color:"white"})}),e.jsx("h2",{style:{margin:0,color:"white",fontSize:"2rem",fontWeight:700,marginBottom:"1rem"},children:"Camera Blocked!"}),e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.9)",fontSize:"1.1rem",lineHeight:1.6,marginBottom:"1.5rem"},children:"Your camera appears to be covered or obstructed. Please uncover your camera to continue the test."}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"12px",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(Be,{size:20,color:"white"}),e.jsxs("span",{style:{color:"white",fontWeight:600},children:["Violations logged: ",Ue]})]})]})}),e.jsxs("header",{style:{padding:"0.75rem 2rem",borderBottom:"1px solid rgba(139,92,246,0.2)",background:"linear-gradient(180deg, rgba(15,23,42,0.98) 0%, rgba(15,23,42,0.95) 100%)",display:"flex",justifyContent:"space-between",alignItems:"center",backdropFilter:"blur(12px)",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",paddingRight:"1.5rem",borderRight:"1px solid rgba(139,92,246,0.2)"},children:[e.jsx(tr,{size:20,color:"#8b5cf6"}),e.jsx("span",{style:{fontWeight:700,fontSize:"1.1rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Assessment"})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:Nt.map((_,H)=>{const J=bn[_]?.icon||At,Z=c===H;return e.jsxs("button",{type:"button",onClick:()=>{g(H),j(0)},style:{padding:"0.5rem 1rem",borderRadius:10,border:Z?"1px solid rgba(139,92,246,0.5)":"1px solid transparent",background:Z?"linear-gradient(135deg, rgba(139,92,246,0.25), rgba(99,102,241,0.15))":"transparent",color:Z?"#a78bfa":"#94a3b8",cursor:"pointer",fontSize:"0.85rem",fontWeight:Z?600:500,display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease"},children:[e.jsx(J,{size:14}),bn[_]?.label||_]},_)})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem"},children:[q.enabled&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem 0.75rem",background:"rgba(239,68,68,0.15)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px"},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#ef4444",animation:"pulse 1.5s infinite"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#fca5a5",fontWeight:600,letterSpacing:"0.5px"},children:"PROCTORED"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem 0.75rem",background:"rgba(139,92,246,0.1)",borderRadius:"8px",border:"1px solid rgba(139,92,246,0.2)"},children:[e.jsx(Le,{size:14,color:"#a78bfa"}),e.jsxs("span",{style:{color:"#a78bfa",fontSize:"0.85rem",fontWeight:600},children:[Object.keys(p).length,"/",zt]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:y<300?"linear-gradient(135deg, rgba(239,68,68,0.2), rgba(220,38,38,0.1))":"linear-gradient(135deg, rgba(16,185,129,0.2), rgba(5,150,105,0.1))",borderRadius:10,border:`1px solid ${y<300?"rgba(239,68,68,0.4)":"rgba(16,185,129,0.4)"}`,boxShadow:y<300?"0 0 20px rgba(239,68,68,0.2)":"none"},children:[e.jsx(ft,{size:16,color:y<300?"#ef4444":"#10b981"}),e.jsx("span",{style:{fontVariantNumeric:"tabular-nums",color:y<300?"#fca5a5":"#6ee7b7",fontWeight:700,fontSize:"1rem"},children:Te(y)})]})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[e.jsx("div",{style:{width:"300px",background:"linear-gradient(180deg, rgba(15,23,42,0.95) 0%, rgba(30,41,59,0.9) 100%)",borderRight:"1px solid rgba(139,92,246,0.15)",display:"flex",flexDirection:"column",backdropFilter:"blur(12px)"},children:e.jsxs("div",{style:{flex:1,padding:"1.25rem",overflowY:"auto"},children:[q.enabled&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(239,68,68,0.2), rgba(220,38,38,0.1))",border:"1px solid rgba(239,68,68,0.3)",borderRadius:10,padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"#fca5a5",fontWeight:600,fontSize:"0.8rem",marginBottom:"1rem",letterSpacing:"0.5px"},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#ef4444",animation:"pulse 1.5s infinite"}}),"PROCTORED MODE"]}),q.enableVideoAudio&&e.jsxs("div",{style:{position:"relative",borderRadius:12,overflow:"hidden",border:"2px solid rgba(139,92,246,0.3)",background:"#000",marginBottom:"1rem",boxShadow:"0 8px 24px rgba(0,0,0,0.4)"},children:[e.jsx("video",{ref:Ke,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",display:"block",transform:"scaleX(-1)",aspectRatio:"4/3",objectFit:"cover"}}),e.jsxs("div",{style:{position:"absolute",bottom:8,left:8,display:"flex",gap:4},children:[e.jsx("div",{style:{padding:5,borderRadius:"50%",background:Se?"rgba(16,185,129,0.9)":"rgba(239,68,68,0.9)",backdropFilter:"blur(4px)"},children:e.jsx(ds,{size:10,color:"white"})}),e.jsx("div",{style:{padding:5,borderRadius:"50%",background:ee?"rgba(16,185,129,0.9)":"rgba(239,68,68,0.9)",backdropFilter:"blur(4px)"},children:e.jsx(Ws,{size:10,color:"white"})})]}),e.jsxs("div",{style:{position:"absolute",top:8,right:8,display:"flex",alignItems:"center",gap:4,padding:"3px 8px",borderRadius:20,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("div",{style:{width:5,height:5,borderRadius:"50%",background:"#10b981",animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontSize:"0.6rem",color:"white",fontWeight:600},children:"REC"})]})]}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem",fontSize:"0.8rem",background:"rgba(30,41,59,0.4)",padding:"1rem",borderRadius:12,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#e2e8f0",fontWeight:500},children:[e.jsx("span",{children:"Tab Switches:"}),e.jsxs("span",{style:{color:R>0?"#f59e0b":"#10b981",fontWeight:700},children:[R,"/",Lt]})]}),q.detectCameraBlocking&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#e2e8f0",fontWeight:500},children:[e.jsx("span",{children:"Cam Blocks:"}),e.jsx("span",{style:{color:Ue>0?"#ef4444":"#10b981",fontWeight:700},children:Ue})]}),q.detectPhoneUsage&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#e2e8f0",fontWeight:500},children:[e.jsx("span",{children:"Phone Detected:"}),e.jsx("span",{style:{color:wt>0?"#ef4444":"#10b981",fontWeight:700},children:wt})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#e2e8f0",fontWeight:500},children:[e.jsx("span",{children:"Face Missing:"}),e.jsx("span",{style:{color:Qt>0?"#f59e0b":"#10b981",fontWeight:700},children:Qt})]})]}),e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsxs("h4",{style:{color:"rgba(239,68,68,0.9)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Be,{size:14})," Proctoring Rules"]}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.75rem",color:"#94a3b8",lineHeight:1.6,display:"flex",flexDirection:"column",gap:"0.4rem"},children:[e.jsx("li",{children:"Do not switch tabs or windows."}),q.enableVideoAudio&&e.jsx("li",{children:"Keep your camera and microphone on."}),q.enforceFullscreen&&e.jsx("li",{children:"Do not exit fullscreen mode."}),q.detectCameraBlocking&&e.jsx("li",{children:"Ensure your face is always visible."}),q.detectPhoneUsage&&e.jsx("li",{children:"No mobile phones allowed."})]})]})]}),e.jsxs("h3",{style:{margin:"0 0 1rem",fontSize:"0.9rem",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:16})," Question Palette"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem"},children:bt.map((_,H)=>e.jsx("button",{onClick:()=>j(H),style:{width:36,height:36,borderRadius:8,border:f===H?"2px solid #3b82f6":"1px solid rgba(139,92,246,0.3)",background:p[bt[H].id]?"linear-gradient(135deg, #10b981, #06b6d4)":f===H?"rgba(59,130,246,0.3)":"transparent",color:"white",cursor:"pointer",fontSize:"0.85rem"},children:H+1},H))})]})}),!ct&&!Ye?e.jsx(e.Fragment,{children:e.jsxs("div",{style:{flex:1,padding:"2rem",overflowY:"auto",display:"flex",flexDirection:"column",maxWidth:"900px",margin:"0 auto",width:"100%"},children:[e.jsxs("div",{style:{marginBottom:"1rem",fontSize:"1rem",color:"#8b5cf6",fontWeight:600},children:["Question ",f+1," OF ",bt.length]}),e.jsx("h2",{style:{fontSize:"1.25rem",color:"white",lineHeight:1.6,marginBottom:"2rem"},children:U?.question}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:(U?.options||[]).map((_,H)=>e.jsxs("button",{onClick:()=>ir(U.id,_),style:{padding:"1.25rem",textAlign:"left",borderRadius:12,border:`1px solid ${p[U.id]===_?"#8b5cf6":"rgba(255,255,255,0.1)"}`,background:p[U.id]===_?"rgba(139,92,246,0.1)":"rgba(255,255,255,0.02)",color:"white",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.2s"},children:[e.jsx("div",{style:{width:28,height:28,borderRadius:"50%",border:"1px solid rgba(255,255,255,0.3)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",background:p[U.id]===_?"#8b5cf6":"transparent"},children:String.fromCharCode(65+H)}),_]},H))}),e.jsxs("div",{style:{marginTop:"auto",paddingTop:"2rem",display:"flex",justifyContent:"space-between"},children:[e.jsxs("button",{onClick:gt,disabled:c===0&&f===0,style:{padding:"0.75rem 1.5rem",borderRadius:10,background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ps,{size:20})," Previous"]}),e.jsxs("button",{onClick:_e,style:{padding:"0.75rem 1.5rem",borderRadius:10,background:"linear-gradient(135deg, #3b82f6, #6366f1)",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Next ",e.jsx(Qr,{size:20})]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"35%",minWidth:"350px",maxWidth:"450px",borderRight:"1px solid #334155",display:"flex",flexDirection:"column",background:"#0f172a"},children:e.jsxs("div",{style:{flex:1,padding:"2rem",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{background:"rgba(139, 92, 246, 0.15)",padding:"0.6rem",borderRadius:"10px"},children:e.jsx(St,{size:20,color:"#8b5cf6"})}),e.jsx("h3",{style:{margin:0,color:"white",fontSize:"1.2rem",fontWeight:700},children:"Problem Statement"})]}),e.jsx("div",{style:{padding:"0.4rem 0.8rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px",background:U.difficulty?.toLowerCase()==="hard"?"rgba(239, 68, 68, 0.1)":U.difficulty?.toLowerCase()==="medium"?"rgba(245, 158, 11, 0.1)":"rgba(16, 185, 129, 0.1)",color:U.difficulty?.toLowerCase()==="hard"?"#ef4444":U.difficulty?.toLowerCase()==="medium"?"#f59e0b":"#10b981",border:`1px solid ${U.difficulty?.toLowerCase()==="hard"?"rgba(239, 68, 68, 0.2)":U.difficulty?.toLowerCase()==="medium"?"rgba(245, 158, 11, 0.2)":"rgba(16, 185, 129, 0.2)"}`},children:U.difficulty||"Medium"})]}),e.jsx("div",{style:{color:"#94a3b8",lineHeight:1.8,fontSize:"1rem",letterSpacing:"-0.01em"},children:U.question}),Ye&&e.jsxs("div",{style:{marginTop:"2rem",display:"flex",flexDirection:"column",gap:"1.25rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#60a5fa"},children:[e.jsx(Tt,{size:18}),e.jsx("span",{style:{fontWeight:700,fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Database Schema"})]}),e.jsxs("div",{style:{background:"#0f172a",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.3)",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"0.5rem 1rem",borderBottom:"1px solid rgba(59, 130, 246, 0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",fontFamily:"monospace"},children:"schema.sql"}),e.jsx(Tt,{size:12,color:"rgba(255,255,255,0.3)"})]}),e.jsx("pre",{style:{margin:0,padding:"1.25rem",fontSize:"0.85rem",color:"#93c5fd",overflowX:"auto",whiteSpace:"pre-wrap",fontFamily:'"Fira Code", "Source Code Pro", monospace',lineHeight:1.6},children:U.sqlSchema||U.starterCode||"No schema provided"})]})]}),xt.output&&xt.output!=="N/A"&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#10b981"},children:[e.jsx(it,{size:16}),e.jsx("span",{style:{fontWeight:700,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Expected Output"}),e.jsx("span",{style:{fontSize:"0.7rem",color:"rgba(16, 185, 129, 0.6)",marginLeft:"auto"},children:"Your query should produce this result"})]}),e.jsx("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08), rgba(6, 182, 212, 0.05))",borderRadius:"12px",border:"1px solid rgba(16, 185, 129, 0.25)",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:xt.output.includes("|")?e.jsx("div",{style:{overflowX:"auto"},children:e.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontFamily:'"Fira Code", monospace',fontSize:"0.85rem"},children:e.jsx("tbody",{children:xt.output.split(`
`).filter(Boolean).map((_,H)=>{const J=_.split("|").map(xe=>xe.trim()),Z=H===0&&J.every(xe=>/^[a-zA-Z_\s]+$/.test(xe));return e.jsx("tr",{style:{background:Z?"rgba(16, 185, 129, 0.15)":H%2===0?"transparent":"rgba(255,255,255,0.02)"},children:J.map((xe,Ee)=>Z?e.jsx("th",{style:{padding:"0.75rem 1rem",textAlign:"left",color:"#10b981",fontWeight:700,borderBottom:"2px solid rgba(16, 185, 129, 0.3)",whiteSpace:"nowrap"},children:xe},Ee):e.jsx("td",{style:{padding:"0.65rem 1rem",color:"#4ade80",borderBottom:"1px solid rgba(255,255,255,0.05)",whiteSpace:"nowrap"},children:xe},Ee))},H)})})})}):e.jsx("pre",{style:{margin:0,padding:"1rem",fontFamily:'"Fira Code", monospace',fontSize:"0.85rem",color:"#4ade80",whiteSpace:"pre-wrap",lineHeight:1.6},children:xt.output})}),e.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem 0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"8px",border:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(br,{size:14,color:"#f59e0b"}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#fbbf24"},children:"Tip: Your output should match both the data values and ordering. Column headers may vary."})]})]})]}),!Ye&&e.jsxs("div",{style:{marginTop:"2rem",display:"flex",flexDirection:"column",gap:"1.25rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#94a3b8"},children:[e.jsx(St,{size:16}),e.jsx("span",{style:{fontWeight:700,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Sample Input"})]}),e.jsx("div",{style:{background:"#1e293b",padding:"1rem",borderRadius:"10px",border:"1px solid #334155",fontFamily:'"Fira Code", monospace',fontSize:"0.9rem",color:"#e2e8f0",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.2)"},children:xt.input})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#10b981"},children:[e.jsx(Le,{size:16}),e.jsx("span",{style:{fontWeight:700,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Expected Output"})]}),e.jsx("div",{style:{background:"rgba(16, 185, 129, 0.05)",padding:"1rem",borderRadius:"10px",border:"1px solid rgba(16, 185, 129, 0.2)",fontFamily:'"Fira Code", monospace',fontSize:"0.9rem",color:"#4ade80",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:xt.output})]})]}),e.jsxs("div",{style:{marginTop:"2rem"},children:[e.jsxs("button",{onClick:me,disabled:se,style:{width:"100%",padding:"0.75rem",background:"rgba(251,191,36,0.1)",border:"1px solid rgba(251,191,36,0.3)",color:"#fbbf24",borderRadius:8,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(br,{size:16})," ",se?"Loading...":"Get AI Hint"]}),A&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(16,185,129,0.1)",border:"1px solid rgba(16,185,129,0.2)",color:"#4ade80",borderRadius:10,fontSize:"0.9rem"},children:["ðŸ’¡ ",A]})]})]})}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"linear-gradient(180deg, #111827 0%, #0f172a 100%)"},children:[e.jsxs("div",{style:{padding:"0.65rem 1.25rem",borderBottom:"1px solid rgba(59, 130, 246, 0.15)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(180deg, rgba(31, 41, 55, 0.6) 0%, rgba(31, 41, 55, 0.3) 100%)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(vt,{size:14,color:"#3b82f6"}),e.jsx("div",{style:{color:"#94a3b8",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Language"})]}),e.jsx("select",{value:lt,onChange:_=>Rr(U.id,_.target.value),disabled:Ye,style:{background:"rgba(30, 41, 59, 0.8)",color:"#f3f4f6",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"0.4rem 0.75rem",cursor:Ye?"default":"pointer",fontSize:"0.85rem",outline:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:Object.keys(hr).map(_=>e.jsx("option",{value:_,disabled:Ye&&_!=="SQL",children:_},_))})]}),!Ye&&e.jsx("button",{onClick:()=>M(U.id,pt,lt,U.sqlSchema),disabled:ae,style:{padding:"0.5rem 1.25rem",background:ae?"#374151":"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"8px",color:"white",fontWeight:600,cursor:ae?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.6rem",boxShadow:ae?"none":"0 4px 10px rgba(37, 99, 235, 0.3)",transition:"all 0.2s",fontSize:"0.9rem"},children:ae?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin",style:{width:14,height:14,border:"2px solid rgba(255,255,255,0.3)",borderTopColor:"white",borderRadius:"50%"}}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qt,{size:16,fill:"white"})," Run Code"]})})]}),e.jsxs("div",{style:{flex:1,position:"relative",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx("div",{style:{flex:1,position:"relative",minHeight:"200px"},children:e.jsx(Vr,{height:"100%",defaultLanguage:Ye?"sql":"python",language:hr[lt]?.monacoLang||"python",theme:"vs-dark",value:pt,onChange:_=>o(H=>({...H,[U.id]:_||""})),options:{minimap:{enabled:!1},fontSize:14,padding:{top:16}}})}),e.jsxs("div",{ref:B,style:{height:ge?`${de}px`:"40px",flex:0,minHeight:ge?"400px":"40px",transition:K.current?"none":"height 0.25s cubic-bezier(0.4, 0, 0.2, 1)",borderTop:"2px solid rgba(59, 130, 246, 0.3)",background:"linear-gradient(180deg, #0a0f1a 0%, #020617 100%)",display:"flex",flexDirection:"column",flexShrink:0,position:"relative",overflow:"hidden",boxShadow:"0 -4px 20px rgba(0,0,0,0.3)"},children:[ge&&e.jsx("div",{onMouseDown:_=>{_.preventDefault(),_.stopPropagation(),K.current=!0;const H=_.clientY,J=de;document.body.style.cursor="ns-resize",document.body.style.userSelect="none";const Z=Ee=>{Ee.preventDefault();const yt=H-Ee.clientY,Jt=Math.min(Math.max(J+yt,120),600);ce(Jt)},xe=()=>{K.current=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",Z),document.removeEventListener("mouseup",xe)};document.addEventListener("mousemove",Z),document.addEventListener("mouseup",xe)},style:{position:"absolute",top:"-4px",left:0,right:0,height:"12px",cursor:"ns-resize",background:"transparent",zIndex:20,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{style:{width:"60px",height:"5px",background:"linear-gradient(90deg, transparent, #3b82f6, transparent)",borderRadius:"3px",opacity:.7,transition:"opacity 0.2s, width 0.2s"},onMouseEnter:_=>{_.target.style.opacity="1",_.target.style.width="80px"},onMouseLeave:_=>{_.target.style.opacity="0.7",_.target.style.width="60px"}})}),!ge&&e.jsxs("div",{onClick:()=>pe(!0),style:{flex:1,display:"flex",alignItems:"center",padding:"0 1.5rem",cursor:"pointer",background:"linear-gradient(180deg, #0f172a 0%, #1e293b 100%)",gap:"0.75rem",color:"#94a3b8",fontSize:"0.85rem",justifyContent:"space-between",borderTop:"1px solid rgba(59, 130, 246, 0.2)",transition:"background 0.2s"},onMouseEnter:_=>_.currentTarget.style.background="linear-gradient(180deg, #1e293b 0%, #334155 100%)",onMouseLeave:_=>_.currentTarget.style.background="linear-gradient(180deg, #0f172a 0%, #1e293b 100%)",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{padding:"0.35rem",background:"rgba(59, 130, 246, 0.2)",borderRadius:"6px",display:"flex",alignItems:"center"},children:e.jsx(Rn,{size:16,color:"#3b82f6"})}),e.jsx("span",{style:{fontWeight:600},children:"Console & Test Results"})]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("kbd",{style:{padding:"2px 6px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",fontSize:"0.7rem"},children:"Click"}),"to expand"]})]}),Ye&&ge&&e.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"0.75rem 1.25rem",background:"#0f172a",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"1.25rem"},children:[e.jsxs("button",{onClick:()=>X("validator"),style:{padding:"0.5rem 0.75rem",background:"transparent",color:ve==="validator"?"#3b82f6":"#94a3b8",border:"none",borderBottom:`2px solid ${ve==="validator"?"#3b82f6":"transparent"}`,cursor:"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.6rem",transition:"all 0.2s",marginTop:"2px"},children:[e.jsx(cr,{size:16})," Validator"]}),e.jsxs("button",{onClick:()=>X("visualizer"),style:{padding:"0.5rem 0.75rem",background:"transparent",color:ve==="visualizer"?"#8b5cf6":"#94a3b8",border:"none",borderBottom:`2px solid ${ve==="visualizer"?"#8b5cf6":"transparent"}`,cursor:"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.6rem",transition:"all 0.2s",marginTop:"2px"},children:[e.jsx(Tt,{size:16})," ER Diagram"]}),e.jsxs("button",{onClick:()=>X("debugger"),style:{padding:"0.5rem 0.75rem",background:"transparent",color:ve==="debugger"?"#10b981":"#94a3b8",border:"none",borderBottom:`2px solid ${ve==="debugger"?"#10b981":"transparent"}`,cursor:"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.6rem",transition:"all 0.2s",marginTop:"2px"},children:[e.jsx(At,{size:16})," Debugger"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.3)",fontWeight:500,textTransform:"uppercase"},children:"Advanced SQL Tools"}),e.jsx("button",{onClick:()=>pe(!1),style:{background:"transparent",border:"none",cursor:"pointer",color:"#64748b"},children:e.jsx(Ns,{size:18})})]})]}),e.jsxs("div",{style:{flex:1,overflow:"auto",padding:"1.5rem",background:"radial-gradient(circle at top left, rgba(30,41,59,0.2), transparent)",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[ve==="validator"&&e.jsx(qn,{query:pt,schemaContext:U.sqlSchema||U.starterCode}),ve==="visualizer"&&e.jsx(Hn,{schema:U.sqlSchema||U.starterCode}),ve==="debugger"&&e.jsx(Qn,{query:pt,schema:U.sqlSchema||U.starterCode})]})]}),!Ye&&ge&&e.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(59, 130, 246, 0.1)",background:"linear-gradient(180deg, rgba(15, 23, 42, 0.8) 0%, rgba(15, 23, 42, 0.5) 100%)",justifyContent:"space-between",paddingRight:"1rem"},children:[e.jsx("div",{style:{display:"flex"},children:["input","output","tests"].map(_=>{const H=(V[U.id]||"input")===_;return e.jsxs("button",{onClick:()=>Ae(J=>({...J,[U.id]:_})),style:{padding:"1rem 1.5rem",background:H?"rgba(30, 41, 59, 0.8)":"transparent",border:"none",borderBottom:H?`3px solid ${_==="input"?"#f59e0b":_==="output"?"#3b82f6":"#10b981"}`:"3px solid transparent",color:H?_==="input"?"#fbbf24":_==="output"?"#60a5fa":"#4ade80":"#94a3b8",cursor:"pointer",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.75rem",transition:"all 0.2s"},children:[_==="input"&&e.jsxs(e.Fragment,{children:[e.jsx(St,{size:14})," Custom Input"]}),_==="output"&&e.jsxs(e.Fragment,{children:[e.jsx(vt,{size:14})," Output ",e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:v[U.id]?"#10b981":"transparent",marginLeft:4}})]}),_==="tests"&&e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:14})," Test Cases",Ie[U.id]&&e.jsxs("span",{style:{fontSize:"0.7rem",background:"rgba(255,255,255,0.1)",padding:"1px 6px",borderRadius:4,marginLeft:4},children:[Ie[U.id].passed,"/",Ie[U.id].total]})]})]},_)})}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:e.jsx("button",{onClick:()=>pe(!1),title:"Collapse",style:{background:"transparent",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"4px"},children:e.jsx(Ns,{size:18})})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",padding:"1.5rem"},children:[(V[U.id]||"input")==="input"&&e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"1rem"},children:e.jsx("textarea",{value:Fe[U.id]||"",onChange:_=>He(H=>({...H,[U.id]:_.target.value})),placeholder:"Enter custom input here...",style:{width:"100%",flex:1,background:"rgba(15, 23, 42, 0.6)",color:"#e2e8f0",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px",padding:"1.25rem",fontFamily:"monospace",resize:"none",outline:"none",fontSize:"0.9rem",lineHeight:"1.6"}})}),(V[U.id]||"input")==="output"&&e.jsx("div",{style:{padding:"1.5rem",fontFamily:"monospace",color:"#e2e8f0",fontSize:"0.9rem",whiteSpace:"pre-wrap",flex:1,overflow:"auto",maxHeight:"100%",lineHeight:"1.6"},children:v[U.id]||"No output yet. Run your code to see results."}),(V[U.id]||"input")==="tests"&&e.jsx("div",{style:{padding:"1.5rem",overflow:"auto",flex:1,display:"flex",flexDirection:"column",gap:"1.5rem"},children:e.jsx(Fn,{problemId:U.id,code:pt,language:lt,isGlobalTest:!0,onRunComplete:_=>{if(_?.testResults){const H=_.testResults.filter(Z=>Z.passed).length,J=_.testResults.length;if(Je(Z=>({...Z,[U.id]:{passed:H,total:J}})),n&&Xe){const Z=Math.round(H/J*100);Xe.emitProgressUpdate(n.id,U.id,Z,null)}}}})})]})]})]})]})]})]})]}),e.jsxs("div",{style:{padding:"0.75rem 2rem",borderTop:"1px solid rgba(139,92,246,0.2)",background:"linear-gradient(180deg, rgba(15,23,42,0.98) 0%, rgba(15,23,42,0.95) 100%)",display:"flex",justifyContent:"space-between",alignItems:"center",backdropFilter:"blur(12px)",boxShadow:"0 -4px 20px rgba(0,0,0,0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("span",{style:{fontSize:"0.85rem",color:"#64748b"},children:["Question ",Ze.indexOf(U)+1," of ",zt]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:gt,style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.05)",color:"#94a3b8",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.35rem",transition:"all 0.2s"},children:[e.jsx(ps,{size:16})," Prev"]}),e.jsxs("button",{onClick:_e,style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.05)",color:"#94a3b8",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.35rem",transition:"all 0.2s"},children:["Next ",e.jsx(Qr,{size:16})]})]})]}),e.jsxs("button",{onClick:()=>he(!1),disabled:D,style:{padding:"0.75rem 2rem",borderRadius:12,border:"none",background:D?"#374151":"linear-gradient(135deg, #8b5cf6, #6366f1)",color:"white",fontWeight:700,cursor:D?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:D?"none":"0 4px 20px rgba(139, 92, 246, 0.4)",transition:"all 0.2s",fontSize:"0.95rem"},children:[e.jsx(Mt,{size:18})," ",D?"Submitting...":"Submit Test"]})]}),e.jsx("canvas",{ref:Pt,style:{display:"none"}})]})}let As=null,yn=null,jn=null;const vn=async()=>{if(!As){const[r,n,d]=await Promise.all([Dr(()=>import("./index-CGpBrb7s.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])),Dr(()=>import("./coco-ssd.es2017.esm.min-Cu4i25oh.js").then(u=>u.c),__vite__mapDeps([9,2,3,1,4])),Dr(()=>import("./blazeface.esm-8Y4_H_JF.js"),__vite__mapDeps([10,1,2,3,5,6,7,8]))]);As=r,yn=n,jn=d}return{tf:As,cocoSsd:yn,blazeface:jn}},ns="http://localhost:3000/api",is={Python:{monacoLang:"python",ext:".py",defaultCode:`# Write your Python code here

def solution():
    pass

# Call your solution
solution()`},JavaScript:{monacoLang:"javascript",ext:".js",defaultCode:`// Write your JavaScript code here

function solution() {
    
}

// Call your solution
solution();`},Java:{monacoLang:"java",ext:".java",defaultCode:`// Write your Java code here

public class Solution {
    public static void main(String[] args) {
        // Your code here
    }
}`},C:{monacoLang:"c",ext:".c",defaultCode:`// Write your C code here
#include <stdio.h>

int main() {
    // Your code here
    return 0;
}`},"C++":{monacoLang:"cpp",ext:".cpp",defaultCode:`// Write your C++ code here
#include <iostream>
using namespace std;

int main() {
    // Your code here
    return 0;
}`},SQL:{monacoLang:"sql",ext:".sql",defaultCode:`-- Write your SQL query here
SELECT * FROM table_name;`}};function nl({problem:r,user:n,onClose:d,onSubmitSuccess:u}){const[c,g]=i.useState(r.language),[f,j]=i.useState(is[r.language]?.defaultCode||""),[p,o]=i.useState(!1),[y,T]=i.useState(!1),[R,h]=i.useState(""),[W,m]=i.useState(""),[k,L]=i.useState(!1),[D,S]=i.useState(!1),[b,I]=i.useState(""),[$,G]=i.useState("output"),[ae,ne]=i.useState([]),[v,N]=i.useState([]),[A,te]=i.useState(!1),se=i.useRef(null),[ie,ge]=i.useState(0),[pe,de]=i.useState(0),[ce,B]=i.useState(!1),[K,V]=i.useState(""),[Ae,Fe]=i.useState(!1),[He]=i.useState(Date.now()),[Ie,Je]=i.useState(null),[Ve,st]=i.useState(!1),[ve,X]=i.useState(!1),[ye,ze]=i.useState(null),[F,O]=i.useState(!1),[z,q]=i.useState(0),[Se,E]=i.useState(!1),[ee,re]=i.useState(0),[Pe,we]=i.useState(!1),[Qe,ht]=i.useState(!0),[Ue,Ge]=i.useState(!1),[Et,ut]=i.useState(0),[ot,Vt]=i.useState(0),[$e,Gt]=i.useState(0),ue=i.useRef(null),Kt=i.useRef(null),wt=i.useRef(null),Ht=i.useRef(!1),mt=i.useRef(!1),rr=i.useRef(null),Ke=i.useRef(null),Pt=i.useRef(null),kt=i.useRef(null);i.useRef(!0);const qe=r.proctoring||{},Y=qe.maxTabSwitches||3;i.useEffect(()=>{setTimeout(()=>{se.current&&!document.fullscreenElement&&se.current.requestFullscreen().then(()=>{S(!0)}).catch(he=>{console.log("Fullscreen request failed:",he.message)})},100);const me=()=>{S(!!document.fullscreenElement)};if(document.addEventListener("fullscreenchange",me),r.testCases){const he=typeof r.testCases=="string"?JSON.parse(r.testCases):r.testCases;ne(Array.isArray(he)?he:[])}return()=>{document.removeEventListener("fullscreenchange",me),document.fullscreenElement&&document.exitFullscreen().catch(()=>{})}},[]),i.useEffect(()=>(qe.enabled&&qe.videoAudio&&gr(),()=>{nr(),ye&&ye.getTracks().forEach(M=>M.stop())}),[]);const gr=async()=>{try{const M=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"},audio:!0});ze(M),st(!0),X(!0),ue.current&&(ue.current.srcObject=M),Qt(),dt(),(qe.enableFaceDetection||qe.detectMultipleFaces||qe.trackFaceLookaway)&&bt()}catch(M){console.error("Failed to access camera/microphone:",M),V("âš ï¸ Camera/Microphone access required for proctoring"),B(!0)}},sr=()=>{nr(),Ze(),nt(),ye&&(ye.getTracks().forEach(M=>{M.stop(),console.log(`ðŸ›‘ Stopped ${M.kind} track`)}),ze(null)),ue.current&&(ue.current.srcObject=null),st(!1),X(!1)},rt=()=>{sr(),d()},Qt=()=>{const M=document.createElement("canvas");M.width=64,M.height=48,Kt.current=M,wt.current=setInterval(()=>{Xt()},3e3)},nr=()=>{wt.current&&(clearInterval(wt.current),wt.current=null)},Xt=()=>{if(!ue.current||!Kt.current)return;const M=ue.current,me=Kt.current,he=me.getContext("2d");he.drawImage(M,0,0,me.width,me.height);const _e=he.getImageData(0,0,me.width,me.height).data;let gt=0,Ye=0,ct={r:0,g:0,b:0};const lt=_e.length/4;for(let Z=0;Z<_e.length;Z+=4){const xe=_e[Z],Ee=_e[Z+1],yt=_e[Z+2],Jt=(xe+Ee+yt)/3;gt+=Jt,ct.r+=xe,ct.g+=Ee,ct.b+=yt,Jt<30&&Ye++}const pt=gt/lt,xt=Ye/lt,_={r:ct.r/lt,g:ct.g/lt,b:ct.b/lt};let H=0;for(let Z=0;Z<_e.length;Z+=4){const xe=_e[Z],Ee=_e[Z+1],yt=_e[Z+2];H+=Math.abs(xe-_.r)+Math.abs(Ee-_.g)+Math.abs(yt-_.b)}H=H/lt/3;const J=xt>.9||pt<15||H<8;console.log(`Camera check - Brightness: ${pt.toFixed(1)}, Variance: ${H.toFixed(1)}, Dark%: ${(xt*100).toFixed(1)}%, Blocked: ${J}`),J&&!Ht.current?(Ht.current=!0,O(!0),q(Z=>{const xe=Z+1;return Xe.emitProctoringViolation(n.id,n.name||n.email,"camera_blocked","critical",r.mentorId),V(`ðŸš« Camera obstruction detected! (${xe} times) Please uncover your camera.`),B(!0),xe})):!J&&Ht.current&&(Ht.current=!1,O(!1),B(!1))},dt=async()=>{try{console.log("ðŸ“± Loading object detection model...");const{tf:M,cocoSsd:me}=await vn();await M.ready();const he=await me.load({base:"lite_mobilenet_v2"});rr.current=he,we(!0),console.log("âœ… Object detection model loaded"),Nt()}catch(M){console.error("Failed to load object detection model:",M)}},Nt=()=>{Ke.current=setInterval(()=>{jr()},2e3)},Ze=()=>{Ke.current&&(clearInterval(Ke.current),Ke.current=null)},jr=async()=>{if(!ue.current||!rr.current){console.log("â³ Phone detection skipped - video or model not ready");return}if(ue.current.readyState<2){console.log("â³ Video not ready yet, readyState:",ue.current.readyState);return}try{const M=await rr.current.detect(ue.current);console.log("ðŸ” Detection ran, found:",M.length,"objects:",M.map(Te=>`${Te.class}(${(Te.score*100).toFixed(0)}%)`).join(", "));const me=M.filter(Te=>["cell phone","laptop","book","remote"].includes(Te.class)&&Te.score>.4),he=me.some(Te=>Te.class==="cell phone"&&Te.score>.4);me.length>0&&console.log("ðŸš¨ Suspicious objects detected:",me.map(Te=>`${Te.class} (${(Te.score*100).toFixed(0)}%)`)),he&&!mt.current?(mt.current=!0,E(!0),re(Te=>{const _e=Te+1;return Xe.emitProctoringViolation(n.id,n.name||n.email,"phone_detected",_e>2?"critical":"warning",r.mentorId),V(`ðŸ“± Mobile phone detected! (${_e} times) Remove all electronic devices from view.`),B(!0),_e})):!he&&mt.current&&(mt.current=!1,E(!1),setTimeout(()=>{!mt.current&&!Ht.current&&B(!1)},3e3))}catch(M){console.error("Phone detection error:",M)}},bt=async()=>{try{console.log("ðŸ‘ï¸ Loading BlazeFace model...");const{blazeface:M}=await vn(),me=await M.load();Pt.current=me,console.log("âœ… BlazeFace model loaded successfully"),Lt()}catch(M){console.error("âŒ Failed to load BlazeFace model:",M)}},U=M=>{if(!M||!M.start||!M.end)return!1;const[me,he]=M.start,[Te,_e]=M.end,gt=(me+Te)/2,Ye=(he+_e)/2,ct=ue.current.videoWidth/2,lt=ue.current.videoHeight/2,pt=Math.abs(gt-ct),xt=Math.abs(Ye-lt),_=150;return pt>_||xt>_},zt=async()=>{if(!(!ue.current||!Pt.current))try{const M=await Pt.current.estimateFaces(ue.current,!1);console.log(`ðŸ‘ï¸ Face detection result: ${M.length} face(s)`),M.length===0?qe.enableFaceDetection&&(ht(!1),Vt(me=>(Xe.emitProctoringViolation(n.id,n.name||n.email,"face_not_detected","warning",r.mentorId),me+1)),console.log("âš ï¸ Face not detected")):M.length===1?(ht(!0),Ge(!1),console.log("âœ… Single face detected"),qe.trackFaceLookaway&&U(M[0])&&(ut(me=>(Xe.emitProctoringViolation(n.id,n.name||n.email,"face_lookaway","warning",r.mentorId),me+1)),console.log("âš ï¸ Face is off-center (looking away)"))):M.length>=2&&qe.detectMultipleFaces&&(ht(!0),Ge(!0),Gt(me=>(Xe.emitProctoringViolation(n.id,n.name||n.email,"multiple_faces","critical",r.mentorId),me+1)),V(`ðŸ‘¥ Multiple people detected! (${M.length} faces) - Automatic violation!`),B(!0),console.log("ðŸš¨ Multiple faces detected - CHEATING"))}catch(M){console.error("âŒ Face detection inference failed:",M),ht(!1)}},Lt=()=>{if(!Pt.current){console.error("âŒ Face detector not loaded yet");return}kt.current=setInterval(()=>{zt()},1e3),console.log("ðŸ‘ï¸ Face detection started (1s intervals)")},nt=()=>{kt.current&&(clearInterval(kt.current),kt.current=null,console.log("ðŸ‘ï¸ Face detection stopped"))};i.useEffect(()=>{if(!qe.enabled||!qe.trackTabSwitches)return;const M=()=>{document.hidden&&!Ae?ge(me=>{const he=me+1;return Xe.emitProctoringViolation(n.id,n.name||n.email,"window_switch",he>=Y?"critical":"warning",r.mentorId),he>=Y?(V(`ðŸš« Maximum tab switches reached (${he}/${Y}). This will be reported.`),B(!0),Fe(!0)):(V(`âš ï¸ Tab switch detected! (${he}/${Y}) ${Y-he} more will be flagged!`),B(!0),setTimeout(()=>B(!1),4e3)),he}):document.hidden||se.current&&!document.fullscreenElement&&setTimeout(()=>{se.current?.requestFullscreen().catch(()=>{})},100)};return document.addEventListener("visibilitychange",M),()=>document.removeEventListener("visibilitychange",M)},[qe,Ae,Y]),i.useEffect(()=>{if(!qe.enabled||!qe.disableCopyPaste)return;const M=he=>{(he.type==="paste"||he.ctrlKey&&(he.key==="v"||he.key==="c"))&&(he.preventDefault(),de(Te=>(Xe.emitProctoringViolation(n.id,n.name||n.email,"copy_attempt","warning",r.mentorId),Te+1)),V("ðŸš« Copy/Paste is disabled for this problem!"),B(!0),setTimeout(()=>B(!1),3e3))},me=he=>{he.preventDefault()};return document.addEventListener("paste",M),document.addEventListener("keydown",M),document.addEventListener("contextmenu",me),()=>{document.removeEventListener("paste",M),document.removeEventListener("keydown",M),document.removeEventListener("contextmenu",me)}},[qe]);const vr=async()=>{T(!0),h("");try{const M=await oe.post(`${ns}/run`,{code:f,language:r.language,problemId:r.id,sqlSchema:r.sqlSchema,stdin:b});h(M.data.output||M.data.error||"No output"),G("output"),(M.data.error||M.data.output?.includes("FAILED")||M.data.output?.includes("Error"))&&Xe.emitTestFailed(n.id,n.name||n.email,r.id,`Run Test - ${r.title}`,r.mentorId)}catch(M){const me="Error running code: "+(M.response?.data?.error||M.message);h(me),G("output"),Xe.emitTestFailed(n.id,n.name||n.email,r.id,`Run Error - ${r.title}`,r.mentorId)}finally{T(!1)}},Cr=async()=>{L(!0);try{const M=await oe.post(`${ns}/hints`,{problemDescription:r.description,currentCode:f,language:c});m(M.data.hint)}catch{m("Unable to generate hint at this time.")}finally{L(!1)}},ir=async()=>{if(!ae||ae.length===0){alert("No test cases available for this problem");return}te(!0),N([]);try{const M=[];for(let he=0;he<ae.length;he++){const Te=ae[he];try{const _e=await oe.post(`${ns}/run`,{code:f,language:r.language,problemId:r.id,sqlSchema:r.sqlSchema,stdin:Te.input||Te.stdin||""}),gt=(Te.expectedOutput||Te.expected_output||"").trim(),Ye=(_e.data.output||"").trim(),ct=Ye===gt&&!_e.data.error;M.push({testNumber:he+1,input:Te.input||Te.stdin||"N/A",expected:gt,actual:Ye,passed:ct,error:_e.data.error||null})}catch(_e){M.push({testNumber:he+1,input:Te.input||Te.stdin||"N/A",expected:Te.expectedOutput||Te.expected_output||"N/A",actual:"ERROR",passed:!1,error:_e.response?.data?.error||_e.message})}}N(M),G("tests"),M.every(he=>he.passed)&&Xe.emitTestSuccess(n.id,n.name||n.email,r.id,`All ${M.length} tests passed - ${r.title}`,r.mentorId)}catch(M){alert("Error running tests: "+M.message)}finally{te(!1)}},Rr=async()=>{if(!f.trim()){alert("Please write some code before submitting");return}o(!0);const M=Math.round((Date.now()-He)/1e3);Xe.emitSubmissionStarted(n.id,n.name||n.email,r.id,r.title,r.mentorId,qe.enabled||!1);try{const me=await oe.post(`${ns}/submissions/proctored`,{studentId:n.id,problemId:r.id,code:f,language:c,submissionType:"editor",tabSwitches:ie,copyPasteAttempts:pe,cameraBlockedCount:z,phoneDetectionCount:ee,faceNotDetectedCount:ot,multipleFacesDetectionCount:$e,faceLookawayCount:Et,timeSpent:M,proctored:qe.enabled});Xe.emitSubmissionCompleted(n.id,n.name||n.email,r.id,r.title,r.mentorId,me.data?.status||"success",me.data?.score||100),sr(),u&&u(me.data),Je(me.data)}catch(me){Xe.emitSubmissionCompleted(n.id,n.name||n.email,r.id,r.title,r.mentorId,"error",0),console.error("Submission error:",{status:me.response?.status,data:me.response?.data,message:me.message});const Te=`Submission failed: ${me.response?.data?.details||me.response?.data?.error||me.message}. Please check your code and try again.`;alert(Te)}finally{o(!1)}};return e.jsxs("div",{ref:se,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#0f172a",zIndex:1e4,display:"flex",flexDirection:"column"},children:[ce&&e.jsxs("div",{style:{position:"fixed",top:"1rem",left:"50%",transform:"translateX(-50%)",background:Ae?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #f59e0b, #d97706)",color:"white",padding:"1rem 2rem",borderRadius:"0.75rem",zIndex:10001,boxShadow:"0 10px 40px rgba(239, 68, 68, 0.5)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Be,{size:24}),e.jsx("span",{style:{fontWeight:600},children:K})]}),e.jsxs("div",{style:{borderBottom:"1px solid #334155",background:"#1e293b",padding:"1rem 2rem",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("h2",{style:{color:"#f8fafc",fontSize:"1.25rem",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"1rem"},children:[r.title,e.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem",borderRadius:"2rem",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#ef4444",animation:"pulse 2s infinite"}}),"ðŸ”’ PROCTORED MODE"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa"},children:r.type||"Coding"}),e.jsx("span",{className:`difficulty-badge ${r.difficulty?.toLowerCase()}`,children:r.difficulty?.toUpperCase()}),ie>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["âš ï¸ ",ie," violations"]}),pe>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["ðŸ“‹ ",pe," copy attempts"]}),z>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["ðŸ“¹ ",z," cam blocks"]}),ee>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["ðŸ“± ",ee," phone detected"]}),ot>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["ðŸ‘¤ ",ot," face missing"]}),$e>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["ðŸ‘¥ ",$e," multi-face"]}),Et>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["ðŸ‘€ ",Et," lookaway"]})]})]})}),qe.videoAudio&&e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginRight:"1rem"},children:[e.jsx("div",{style:{padding:"0.4rem",borderRadius:"6px",background:F?"rgba(239, 68, 68, 0.2)":Ve?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",border:`1px solid ${F?"#ef4444":Ve?"#10b981":"#ef4444"}`},children:F?e.jsx(cs,{size:16,color:"#ef4444"}):Ve?e.jsx(ds,{size:16,color:"#10b981"}):e.jsx(cs,{size:16,color:"#ef4444"})}),e.jsx("div",{style:{padding:"0.4rem",borderRadius:"6px",background:ve?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",border:`1px solid ${ve?"#10b981":"#ef4444"}`},children:ve?e.jsx(Ws,{size:16,color:"#10b981"}):e.jsx(_n,{size:16,color:"#ef4444"})})]}),e.jsx("button",{onClick:rt,style:{background:"#334155",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer"},children:"Exit Session"})]}),Ie?e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"2rem",background:"#0f172a",color:"#f8fafc"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",marginBottom:"2.5rem",paddingBottom:"2rem",borderBottom:"1px solid #334155"},children:[e.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:`conic-gradient(${Ie.score>=80?"#10b981":Ie.score>=60?"#f59e0b":"#ef4444"} ${Ie.score*3.6}deg, #1e293b 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},children:e.jsxs("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#0f172a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"2.5rem",fontWeight:800,color:"#f8fafc"},children:Ie.score}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#94a3b8",textTransform:"uppercase",letterSpacing:"1px"},children:"Score"})]})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{margin:0,color:Ie.score>=80?"#10b981":Ie.score>=60?"#f59e0b":"#ef4444",fontSize:"2rem",marginBottom:"0.75rem",fontWeight:700},children:Ie.score>=90?"Outstanding Performance!":Ie.score>=80?"Excellent Work!":Ie.score>=60?"Good Effort":"Needs Improvement"}),e.jsx("p",{style:{margin:0,color:"#94a3b8",fontSize:"1.1rem",lineHeight:"1.6"},children:Ie.feedback||(Ie.status==="accepted"?"Your solution passed all tests and met the requirements.":"Your solution needs some improvements.")}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"1rem"},children:[ie>0&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",background:"rgba(245, 158, 11, 0.2)",color:"#f59e0b",fontSize:"0.85rem"},children:["âš ï¸ ",ie," tab switches"]}),pe>0&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontSize:"0.85rem"},children:["ðŸ“‹ ",pe," copy attempts"]}),z>0&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontSize:"0.85rem"},children:["ðŸ“¹ ",z," cam blocks"]}),ee>0&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontSize:"0.85rem"},children:["ðŸ“± ",ee," phone detected"]})]})]})]}),Ie.analysis&&e.jsxs("div",{style:{marginBottom:"2.5rem"},children:[e.jsxs("h4",{style:{color:"#f8fafc",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(ur,{size:20,color:"#3b82f6"})," Performance Analysis"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.25rem"},children:Object.entries(Ie.analysis).map(([M,me])=>{if(me==="Unknown"||me===null)return null;const he=parseInt(me)||0,Te=M.replace(/([A-Z])/g," $1").trim();return e.jsxs("div",{style:{background:"#1e293b",padding:"1.25rem",borderRadius:"1rem",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.9rem",color:"#94a3b8",textTransform:"capitalize",fontWeight:600},children:Te}),e.jsxs("span",{style:{fontWeight:800,color:he>=80?"#10b981":he>=60?"#f59e0b":"#ef4444",fontSize:"1.1rem"},children:[he,"%"]})]}),e.jsx("div",{style:{height:"8px",background:"rgba(255,255,255,0.05)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${he}%`,height:"100%",background:he>=80?"#10b981":he>=60?"#f59e0b":"#ef4444",borderRadius:"4px",transition:"width 1s ease-out"}})})]},M)})})]}),Ie.aiExplanation&&e.jsxs("div",{style:{marginBottom:"2.5rem"},children:[e.jsxs("h4",{style:{color:"#f8fafc",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(wr,{size:20,color:"#8b5cf6"})," Detailed AI Analysis"]}),e.jsx("div",{style:{background:"#1e293b",padding:"1.75rem",borderRadius:"1rem",border:"1px solid #334155",color:"#cbd5e1",fontSize:"1rem",lineHeight:"1.8",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:Ie.aiExplanation})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:e.jsx("button",{onClick:rt,style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"1rem 2rem",borderRadius:"0.75rem",cursor:"pointer",fontWeight:600,fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:"Close Session"})})]}):e.jsxs("div",{style:{padding:0,display:"flex",flexDirection:"row",flex:1,minHeight:0,overflow:"hidden",background:"#0f172a"},children:[e.jsxs("div",{style:{width:"400px",borderRight:"1px solid #334155",padding:"2rem",overflowY:"auto",background:"#0f172a",display:"flex",flexDirection:"column"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"1.5rem",color:"#f8fafc"},children:"Problem Description"}),e.jsxs("div",{style:{color:"#cbd5e1",fontSize:"0.95rem",lineHeight:"1.7"},children:[r.description,r.type==="SQL"||r.language==="SQL"?e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[r.sqlSchema&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{color:"#06b6d4"},children:"ðŸ—„ï¸"}),e.jsx("strong",{style:{color:"#e2e8f0"},children:"Database Schema:"})]}),e.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"1rem",borderRadius:"6px",marginBottom:"1rem",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:r.sqlSchema})]}),r.expectedQueryResult&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{color:"#10b981"},children:"ðŸ“Š"}),e.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Query Result:"})]}),e.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"1rem",borderRadius:"6px",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:r.expectedQueryResult})]}),!r.sqlSchema&&!r.expectedQueryResult&&e.jsx("p",{style:{color:"#94a3b8",fontStyle:"italic",margin:0},children:"Write a SQL query to solve this problem. Your query will be executed against the database."})]}):e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[e.jsx("div",{style:{marginBottom:"0.5rem"},children:e.jsx("strong",{style:{color:"#e2e8f0"},children:"Sample Input:"})}),e.jsx("code",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block",marginBottom:"1rem"},children:r.sampleInput||"N/A"}),e.jsx("div",{style:{marginBottom:"0.5rem"},children:e.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Output:"})}),e.jsx("code",{style:{color:"#4ade80",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block"},children:r.expectedOutput||"N/A"})]})]}),e.jsxs("div",{style:{marginTop:"2rem",background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"0.75rem",padding:"1.25rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#fbbf24",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(br,{size:16})," Need Help?"]}),e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.8rem",margin:"0 0 1rem",lineHeight:1.6},children:"Stuck on this problem? Get AI-powered hints to guide you without revealing the full solution."}),e.jsxs("button",{onClick:Cr,disabled:k,style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",border:"none",color:"#1e293b",padding:"0.6rem 1.2rem",borderRadius:"6px",cursor:k?"not-allowed":"pointer",fontWeight:600,fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center"},children:[e.jsx(br,{size:16})," ",k?"Getting Hints...":"Get AI Hints"]}),W&&e.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"rgba(34, 197, 94, 0.1)",borderRadius:"8px",border:"1px solid rgba(34, 197, 94, 0.2)",fontSize:"0.85rem",color:"#4ade80"},children:["ðŸ’¡ ",W]})]}),e.jsxs("div",{style:{marginTop:"2rem",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"0.75rem",padding:"1.25rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#ef4444",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Be,{size:16})," Proctoring Rules"]}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"#94a3b8",fontSize:"0.8rem",lineHeight:1.8},children:[e.jsx("li",{children:"Do not switch tabs or windows"}),e.jsx("li",{children:"Do not exit fullscreen mode"}),e.jsx("li",{children:"All violations are recorded"}),e.jsx("li",{children:"3+ violations may result in disqualification"})]})]}),qe.videoAudio&&e.jsxs("div",{style:{marginTop:"2rem",padding:"0.75rem",background:"rgba(0,0,0,0.3)",borderRadius:"0.75rem",border:"1px solid #334155",position:"relative"},children:[e.jsx("video",{ref:ue,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"8px",background:"#000",border:F?"3px solid #ef4444":"2px solid #10b981",opacity:F?.5:1}}),F&&e.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(239, 68, 68, 0.9)",padding:"0.5rem 1rem",borderRadius:"8px",color:"white",fontWeight:600,fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(cs,{size:14})," CAMERA BLOCKED"]}),e.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.7rem",color:F?"#ef4444":"#10b981",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[!F&&e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981",animation:"pulse 1s infinite"}}),F?"âš ï¸ Uncover your camera!":Pe?"ðŸ¤– AI Monitoring Active":"â³ Loading AI..."]})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"#1e293b",minHeight:0},children:[e.jsxs("div",{style:{padding:"0.75rem 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #334155",background:"#1e293b"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[e.jsx("label",{style:{color:"#94a3b8",fontSize:"0.85rem"},children:"Language:"}),e.jsx("select",{value:c,onChange:M=>{const me=M.target.value;g(me),j(is[me]?.defaultCode||"")},disabled:r.type==="SQL"||r.language==="SQL",style:{background:"#0f172a",color:"#f8fafc",border:"1px solid #334155",borderRadius:"6px",padding:"0.4rem 0.75rem",fontSize:"0.85rem",cursor:r.type==="SQL"||r.language==="SQL"?"not-allowed":"pointer",opacity:r.type==="SQL"||r.language==="SQL"?.7:1},children:Object.keys(is).map(M=>e.jsx("option",{value:M,children:M},M))})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[e.jsxs("button",{onClick:vr,disabled:y||p,style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[e.jsx(qt,{size:16})," ",y?"Running...":"Run Code"]}),e.jsxs("button",{onClick:Rr,disabled:y||p,style:{background:"linear-gradient(135deg, #10b981, #059669)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:p?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[e.jsx(Mt,{size:16})," ",p?"Submitting...":"Submit"]})]})]}),e.jsx("div",{style:{flex:1,position:"relative",minHeight:0},children:e.jsx(Vr,{height:"100%",language:is[c]?.monacoLang||"python",theme:"vs-dark",value:f,onChange:M=>j(M||""),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,automaticLayout:!0,padding:{top:20}}})}),e.jsxs("div",{style:{flex:"0 0 280px",background:"#020617",borderTop:"1px solid #334155",display:"flex",flexDirection:"column",minHeight:0},children:[e.jsx("div",{style:{display:"flex",borderBottom:"1px solid #334155",background:"#0f172a"},children:["input","output","tests"].map(M=>e.jsxs("button",{onClick:()=>G(M),style:{padding:"0.75rem 1.25rem",background:$===M?"#1e293b":"transparent",border:"none",borderBottom:$===M?`2px solid ${M==="input"?"#f59e0b":M==="output"?"#3b82f6":"#06b6d4"}`:"2px solid transparent",color:$===M?M==="input"?"#fbbf24":M==="output"?"#60a5fa":"#06b6d4":"#64748b",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.5rem"},children:[M==="input"&&e.jsx(e.Fragment,{children:"ðŸ“ Custom Input"}),M==="output"&&e.jsxs(e.Fragment,{children:["âš™ï¸ Output ",R&&e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:R.includes("Error")?"#ef4444":"#10b981"}})]}),M==="tests"&&e.jsx(e.Fragment,{children:"ðŸ§ª Test Cases"})]},M))}),$==="input"&&e.jsxs("div",{style:{padding:"0.75rem",flex:1},children:[e.jsx("textarea",{value:b,onChange:M=>I(M.target.value),placeholder:`Enter your input here (stdin)...
Example:
5
1 2 3 4 5`,style:{width:"100%",height:"calc(100% - 30px)",background:"#0f172a",color:"#e2e8f0",border:"1px solid #334155",borderRadius:"8px",padding:"0.75rem",fontFamily:"monospace",fontSize:"0.85rem",resize:"none",outline:"none"}}),e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.7rem",color:"#64748b"},children:'ðŸ’¡ This input will be passed as stdin when you click "Run Code"'})]}),$==="output"&&e.jsx("div",{style:{padding:"0.75rem",flex:1,overflowY:"auto"},children:e.jsx("div",{style:{fontFamily:"monospace",color:R.includes("Error")?"#ef4444":"#e2e8f0",fontSize:"0.9rem",whiteSpace:"pre-wrap"},children:R||"ðŸ‘‰ Run your code to see output here"})}),$==="tests"&&e.jsx("div",{style:{padding:"0.75rem",flex:1,overflowY:"auto",display:"flex",flexDirection:"column"},children:v.length===0?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:ir,disabled:A||y,style:{background:"linear-gradient(135deg, #06b6d4, #0891b2)",border:"none",color:"white",padding:"0.6rem 1.2rem",borderRadius:"6px",marginBottom:"1rem",cursor:A?"not-allowed":"pointer",fontWeight:600,fontSize:"0.9rem"},children:A?"â³ Running All Tests...":"ðŸ§ª Run All Tests"}),e.jsx("div",{style:{color:"#cbd5e1",fontSize:"0.85rem"},children:r.type==="SQL"||r.language==="SQL"?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("strong",{style:{color:"#06b6d4"},children:"ðŸ“Š Database Schema:"}),e.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.75rem",borderRadius:"6px",marginTop:"0.5rem",fontSize:"0.75rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:r.sqlSchema||"Schema not provided"})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#10b981"},children:"ðŸ“ˆ Expected Result:"}),e.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"0.75rem",borderRadius:"6px",marginTop:"0.5rem",fontSize:"0.75rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:r.expectedQueryResult||"Expected result not provided"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("strong",{style:{color:"#f59e0b"},children:"ðŸ“¥ Sample Input:"}),e.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.75rem",borderRadius:"6px",marginTop:"0.5rem",fontSize:"0.75rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:r.sampleInput||"N/A"})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#10b981"},children:"ðŸ“¤ Expected Output:"}),e.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"0.75rem",borderRadius:"6px",marginTop:"0.5rem",fontSize:"0.75rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:r.expectedOutput||"N/A"})]})]})})]}):e.jsxs("div",{style:{color:"#cbd5e1",fontSize:"0.85rem"},children:[e.jsx("button",{onClick:ir,disabled:A||y,style:{background:"linear-gradient(135deg, #06b6d4, #0891b2)",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"6px",marginBottom:"1rem",cursor:A?"not-allowed":"pointer",fontWeight:600,fontSize:"0.85rem"},children:A?"â³ Running...":"ðŸ”„ Run Tests Again"}),e.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"#1e293b",borderRadius:"6px"},children:[e.jsx("strong",{style:{color:"#06b6d4"},children:"Test Results: "}),e.jsxs("span",{style:{color:v.every(M=>M.passed)?"#10b981":"#ef4444"},children:[v.filter(M=>M.passed).length,"/",v.length," passed"]})]}),v.map((M,me)=>e.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:M.passed?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",border:`1px solid ${M.passed?"#10b981":"#ef4444"}`,borderRadius:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1.2rem"},children:M.passed?"âœ…":"âŒ"}),e.jsxs("strong",{style:{color:M.passed?"#10b981":"#ef4444"},children:["Test ",M.testNumber]})]}),e.jsxs("div",{style:{fontSize:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx("strong",{style:{color:"#94a3b8"},children:"Input:"}),e.jsx("code",{style:{color:"#cbd5e1",display:"block",background:"#0f172a",padding:"0.5rem",borderRadius:"4px",marginTop:"0.25rem",whiteSpace:"pre-wrap"},children:M.input})]}),e.jsxs("div",{style:{fontSize:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx("strong",{style:{color:"#10b981"},children:"Expected:"}),e.jsx("code",{style:{color:"#4ade80",display:"block",background:"#0f172a",padding:"0.5rem",borderRadius:"4px",marginTop:"0.25rem",whiteSpace:"pre-wrap"},children:M.expected})]}),e.jsxs("div",{style:{fontSize:"0.75rem"},children:[e.jsx("strong",{style:{color:M.passed?"#10b981":"#ef4444"},children:"Actual:"}),e.jsx("code",{style:{color:M.passed?"#4ade80":"#ef4444",display:"block",background:"#0f172a",padding:"0.5rem",borderRadius:"4px",marginTop:"0.25rem",whiteSpace:"pre-wrap"},children:M.error?`ERROR: ${M.error}`:M.actual})]})]},me))]})})]})]})]}),e.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.5; transform: scale(1.2); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}const _s="http://localhost:3000";function il({attemptId:r,attemptData:n,onComplete:d,onFailed:u}){const[c,g]=i.useState([]),[f,j]=i.useState({}),[p,o]=i.useState(0),[y,T]=i.useState(0),[R,h]=i.useState(null),[W,m]=i.useState(!0),[k,L]=i.useState(!1),[D,S]=i.useState(null),[b,I]=i.useState(""),[$,G]=i.useState(0),[ae,ne]=i.useState(!1),v=i.useRef(null);i.useEffect(()=>(A(),()=>{v.current&&clearInterval(v.current)}),[]),i.useEffect(()=>{const ce=()=>{document.hidden&&G(B=>{const K=B+1;return N("tab_switch",`Tab switch detected (count: ${K})`,K>3?"high":"medium"),K})};return document.addEventListener("visibilitychange",ce),()=>document.removeEventListener("visibilitychange",ce)},[]);const N=async(ce,B,K="low")=>{try{await oe.post(`${_s}/api/skill-tests/proctoring/log`,{attemptId:r,testStage:"mcq",eventType:ce,details:B,severity:K})}catch{}},A=async()=>{try{const{data:ce}=await oe.post(`${_s}/api/skill-tests/mcq/start/${r}`);g(ce.questions||[]),j(ce.existing_answers||{});let B;ce.end_time&&(B=new Date(ce.end_time)),(!B||isNaN(B.getTime()))&&(B=new Date(Date.now()+1800*1e3)),h(B),v.current=setInterval(()=>{const V=Math.max(0,Math.floor((B-new Date)/1e3));T(V),V<=0&&(clearInterval(v.current),ie(!0))},1e3),m(!1)}catch(ce){I(ce.response?.data?.error||ce.message),m(!1)}},te=(ce,B)=>{j(K=>({...K,[String(ce)]:B}))},se=()=>{if(c.length-Object.keys(f).length>0){ne(!0);return}ie(!1)},ie=async(ce=!1)=>{if(!k){ne(!1),L(!0),v.current&&clearInterval(v.current);try{const{data:B}=await oe.post(`${_s}/api/skill-tests/mcq/submit`,{attemptId:r,answers:f});S(B),B.passed?setTimeout(()=>d(B),2e3):setTimeout(()=>u(),3e3)}catch(B){I(B.response?.data?.error||B.message),L(!1)}}},ge=ce=>{const B=Math.floor(ce/60),K=ce%60;return`${B.toString().padStart(2,"0")}:${K.toString().padStart(2,"0")}`};if(W)return e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Loading MCQ questions..."});if(D)return e.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:D.passed?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)"},children:D.passed?e.jsx(Le,{size:40,color:"#22c55e"}):e.jsx(We,{size:40,color:"#ef4444"})}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:700,margin:"0 0 8px",color:"#f1f5f9"},children:D.passed?"MCQ Passed!":"MCQ Failed"}),e.jsxs("p",{style:{fontSize:"18px",color:"#94a3b8"},children:["Score: ",D.correct,"/",D.total," (",Math.round(D.score),"%)"]}),e.jsx("p",{style:{fontSize:"14px",color:D.passed?"#22c55e":"#ef4444",marginTop:"12px"},children:D.passed?"Proceeding to Coding section...":"Assessment ended. Generating report..."})]});const pe=c[p],de=Object.keys(f).length;return e.jsxs("div",{style:{paddingBottom:"80px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",background:"#1e293b",borderRadius:"10px",marginBottom:"20px",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontWeight:700,fontSize:"15px",color:"#f1f5f9"},children:"MCQ Test"}),e.jsxs("span",{style:{fontSize:"13px",color:"#94a3b8"},children:[de,"/",c.length," answered"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",background:y<60?"rgba(239,68,68,0.15)":y<300?"rgba(245,158,11,0.15)":"rgba(16,185,129,0.15)",borderRadius:"20px",fontWeight:700,fontSize:"16px",color:y<60?"#f87171":y<300?"#fbbf24":"#34d399"},children:[e.jsx(ft,{size:16})," ",ge(y)]}),e.jsxs("button",{onClick:se,disabled:k,style:{padding:"8px 20px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",opacity:k?.6:1},children:[e.jsx(Mt,{size:14})," Submit All"]})]}),$>0&&e.jsxs("div",{style:{background:"rgba(245,158,11,0.1)",border:"1px solid rgba(245,158,11,0.3)",borderRadius:"8px",padding:"8px 16px",marginBottom:"16px",fontSize:"12px",color:"#fbbf24",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(cr,{size:14})," Warning: ",$," tab switch(es) detected. This is being monitored."]}),b&&e.jsx("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",color:"#fca5a5",fontSize:"13px"},children:b}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"20px"},children:c.map((ce,B)=>{const K=f[String(ce.id)]!==void 0,V=B===p;return e.jsx("button",{onClick:()=>o(B),style:{width:"34px",height:"34px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"12px",background:V?"#8b5cf6":K?"#22c55e":"#334155",color:V||K?"white":"#94a3b8"},children:B+1},B)})}),pe&&e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"12px",padding:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxs("span",{style:{fontSize:"13px",color:"#8b5cf6",fontWeight:600},children:["Question ",p+1," of ",c.length]}),pe.difficulty&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:600,background:pe.difficulty==="hard"?"#fee2e2":pe.difficulty==="medium"?"#fef3c7":"#dcfce7",color:pe.difficulty==="hard"?"#dc2626":pe.difficulty==="medium"?"#d97706":"#16a34a"},children:pe.difficulty})]}),e.jsx("p",{style:{fontSize:"16px",fontWeight:600,marginBottom:"20px",lineHeight:1.5,color:"#f1f5f9"},children:pe.question}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:(pe.options||[]).map((ce,B)=>{const K=String.fromCharCode(65+B),V=f[String(pe.id)]===K;return e.jsxs("button",{onClick:()=>te(pe.id,K),style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",borderRadius:"10px",cursor:"pointer",background:V?"rgba(139,92,246,0.15)":"#0f172a",border:V?"2px solid #8b5cf6":"1px solid #475569",textAlign:"left",fontSize:"14px",transition:"all 0.15s",color:"#e2e8f0"},children:[e.jsx("span",{style:{width:"28px",height:"28px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"13px",fontWeight:700,background:V?"#8b5cf6":"#1e293b",color:V?"white":"#94a3b8",flexShrink:0},children:K}),e.jsx("span",{children:ce})]},B)})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"24px"},children:[e.jsxs("button",{onClick:()=>o(Math.max(0,p-1)),disabled:p===0,style:{padding:"8px 16px",background:"#334155",border:"1px solid #475569",borderRadius:"8px",cursor:"pointer",fontSize:"13px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"6px",opacity:p===0?.4:1},children:[e.jsx(ps,{size:14})," Previous"]}),e.jsxs("button",{onClick:()=>o(Math.min(c.length-1,p+1)),disabled:p===c.length-1,style:{padding:"8px 16px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",opacity:p===c.length-1?.4:1},children:["Next ",e.jsx(Qr,{size:14})]})]})]}),ae&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#1e293b",borderRadius:"16px",padding:"28px",maxWidth:"400px",width:"90%",border:"1px solid #334155",textAlign:"center"},children:[e.jsx(Be,{size:36,color:"#fbbf24",style:{marginBottom:"12px"}}),e.jsx("h3",{style:{margin:"0 0 8px",color:"#f1f5f9",fontSize:"18px"},children:"Unanswered Questions"}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"14px",margin:"0 0 20px"},children:["You have ",c.length-Object.keys(f).length," unanswered question(s). Submit anyway?"]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>ne(!1),style:{flex:1,padding:"10px",background:"#334155",color:"#94a3b8",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Cancel"}),e.jsx("button",{onClick:()=>ie(!1),style:{flex:1,padding:"10px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Submit Anyway"})]})]})})]})}const Nr="http://localhost:3000",Sn=[{value:"python",label:"Python",monacoId:"python"},{value:"javascript",label:"JavaScript",monacoId:"javascript"},{value:"java",label:"Java",monacoId:"java"},{value:"c",label:"C",monacoId:"c"},{value:"cpp",label:"C++",monacoId:"cpp"}];function al({attemptId:r,attemptData:n,onComplete:d,onFailed:u}){const[c,g]=i.useState([]),[f,j]=i.useState(0),[p,o]=i.useState({}),[y,T]=i.useState({}),[R,h]=i.useState(""),[W,m]=i.useState(""),[k,L]=i.useState(!1),[D,S]=i.useState(null),[b,I]=i.useState(!1),[$,G]=i.useState(!1),[ae,ne]=i.useState(!1),[v,N]=i.useState(!1),[A,te]=i.useState({}),[se,ie]=i.useState(null),[ge,pe]=i.useState(!0),[de,ce]=i.useState(""),[B,K]=i.useState(null),V=i.useRef(null);i.useEffect(()=>{if(B!==null){if(B<=0){Ae();return}return V.current=setInterval(()=>{K(z=>z<=1?(clearInterval(V.current),Ae(),0):z-1)},1e3),()=>clearInterval(V.current)}},[B]);const Ae=()=>{alert("Time is up! Submitting your test automatically."),ve()},Fe=z=>{const q=Math.floor(z/60),Se=z%60;return`${q}:${Se<10?"0":""}${Se}`};i.useEffect(()=>{He()},[]);const He=async()=>{try{const{data:z}=await oe.post(`${Nr}/api/skill-tests/coding/start/${r}`);g(z.problems||[]),te(z.existing_submissions||{});const q={},Se={};(z.problems||[]).forEach(E=>{const ee=(z.existing_submissions||{})[String(E.id)];if(ee)q[E.id]=ee.code,Se[E.id]=ee.language||"python";else{const re="python";let Pe="";E.starter_code&&typeof E.starter_code=="object"?Pe=E.starter_code[re]||Ie(E,re):typeof E.starter_code=="string"?Pe=E.starter_code:Pe=Ie(E,re),q[E.id]=Pe,Se[E.id]=re}}),o(q),T(Se),z.duration_minutes&&K(z.duration_minutes*60),pe(!1)}catch(z){ce(z.response?.data?.error||z.message),pe(!1)}},Ie=(z,q)=>{const Se=z.title||"Solution";return q==="python"?`import sys

# ${Se}
def solution():
    # Write your code here
    pass

# !!! DO NOT EDIT BELOW THIS LINE !!!
if __name__ == '__main__':
    # Default driver code (fallback)
    lines = sys.stdin.read().split('\\n')
    # ... print(solution(...))
`:q==="javascript"?`const fs = require('fs');

// ${Se}
function solution() {
    // Write your code here
}

// !!! DO NOT EDIT BELOW THIS LINE !!!
try {
    const input = fs.readFileSync(0, 'utf-8');
    // ... console.log(solution(...))
} catch (e) {}
`:q==="java"?`import java.util.*;

public class Main {
    public static void solution() {
        // Write your code here
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        // ...
    }
}
`:q==="c"?`#include <stdio.h>
#include <stdlib.h>

void solution() {
    // Write your code here
}

int main() {
    // Driver code
    return 0;
}
`:q==="cpp"?`#include <iostream>
#include <vector>
#include <string>
using namespace std;

void solution() {
    // Write your code here
}

int main() {
    // Driver code
    return 0;
}
`:`// ${Se}
`},Je=(z,q=50)=>z?z.length>q?z.substring(0,q)+"...":z:"",Ve=async()=>{const z=c[f];if(z){I(!0),h(""),S(null);try{const{data:q}=await oe.post(`${Nr}/api/skill-tests/coding/run`,{code:p[z.id]||"",language:y[z.id]||"python",input_data:W||" "});h(q.success?q.output||"No output":`Error:
${q.error||q.output||"Unknown error"}`)}catch(q){h("Error: "+(q.response?.data?.error||q.message))}finally{I(!1)}}},st=async()=>{const z=c[f];if(z){G(!0),S(null);try{const{data:q}=await oe.post(`${Nr}/api/skill-tests/coding/submit`,{attemptId:r,problemId:z.id,code:p[z.id]||"",language:y[z.id]||"python"});S(q.test_results||[]),te(Se=>({...Se,[String(z.id)]:{passed:q.all_passed,test_results:q.test_results}}))}catch(q){ce(q.response?.data?.error||q.message)}finally{G(!1)}}},ve=async()=>{N(!1),ne(!0);try{const{data:z}=await oe.post(`${Nr}/api/skill-tests/coding/finish/${r}`);ie(z),z.passed?setTimeout(()=>d(z),2e3):setTimeout(()=>u(),3e3)}catch(z){ce(z.response?.data?.error||z.message),ne(!1)}},[X,ye]=i.useState(!1),ze=async()=>{ye(!0),ce("");try{await oe.post(`${Nr}/api/skill-tests/coding/regenerate/${r}`),await He()}catch(z){ce(z.response?.data?.error||"Failed to regenerate. Please try again."),ye(!1)}};if(ge)return e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:[e.jsx(lr,{size:24,style:{animation:"spin 1s linear infinite",marginBottom:"8px"}})," Loading coding problems..."]});if(!ge&&c.length===0&&!se)return e.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[e.jsx(Es,{size:48,color:"#64748b",style:{marginBottom:"16px"}}),e.jsx("h3",{style:{color:"#f1f5f9",margin:"0 0 8px"},children:"No Coding Problems Available"}),e.jsx("p",{style:{color:"#94a3b8",fontSize:"14px",marginBottom:"20px"},children:"Problems couldn't be generated. Click below to regenerate them."}),de&&e.jsx("p",{style:{color:"#fca5a5",fontSize:"13px",marginBottom:"16px"},children:de}),e.jsx("button",{onClick:ze,disabled:X,style:{padding:"10px 24px",background:X?"#6d28d9":"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:X?"not-allowed":"pointer",fontWeight:600,fontSize:"14px",display:"inline-flex",alignItems:"center",gap:"8px",opacity:X?.7:1},children:X?e.jsxs(e.Fragment,{children:[e.jsx(lr,{size:16,style:{animation:"spin 1s linear infinite"}})," Generating Problems..."]}):"ðŸ”„ Regenerate Problems"}),e.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]});if(se)return e.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:se.passed?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)"},children:se.passed?e.jsx(Le,{size:40,color:"#22c55e"}):e.jsx(We,{size:40,color:"#ef4444"})}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:700,margin:"0 0 8px",color:"#f1f5f9"},children:se.passed?"Coding Passed!":"Coding Failed"}),e.jsxs("p",{style:{fontSize:"18px",color:"#94a3b8"},children:["Solved: ",se.solved,"/",se.total," (",Math.round(se.score),"%)"]}),e.jsx("p",{style:{fontSize:"14px",color:se.passed?"#22c55e":"#ef4444",marginTop:"12px"},children:se.passed?"Proceeding to SQL section...":"Assessment ended. Generating report..."})]});const F=c[f],O=Object.keys(A).length;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",background:"#1e293b",borderRadius:"10px",marginBottom:"16px",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(Es,{size:20,color:"#8b5cf6"}),e.jsx("span",{style:{fontWeight:700,fontSize:"15px",color:"#f1f5f9"},children:"Coding Test"}),e.jsxs("span",{style:{fontSize:"13px",color:"#94a3b8"},children:[O,"/",c.length," solved"]}),B!==null&&e.jsxs("span",{style:{padding:"4px 10px",borderRadius:"12px",fontSize:"13px",fontWeight:600,background:B<300?"rgba(239,68,68,0.2)":"rgba(59,130,246,0.15)",color:B<300?"#fca5a5":"#60a5fa",border:"1px solid "+(B<300?"rgba(239,68,68,0.4)":"rgba(59,130,246,0.3)")},children:["Time Left: ",Fe(B)]})]}),e.jsx("button",{onClick:()=>N(!0),disabled:ae,style:{padding:"8px 20px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"13px",opacity:ae?.6:1},children:ae?"Submitting...":"Finish Coding â†’"})]}),de&&e.jsx("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",padding:"10px",marginBottom:"12px",color:"#fca5a5",fontSize:"13px"},children:de}),e.jsx("div",{style:{display:"flex",gap:"6px",marginBottom:"12px"},children:c.map((z,q)=>{const Se=A[String(z.id)],E=Se?.passed,ee=Se&&!Se.passed;let re="#334155";return q===f?re="#8b5cf6":E?re="#22c55e":ee&&(re="#ef4444"),e.jsxs("button",{onClick:()=>{j(q),h(""),A[String(z.id)]?S(A[String(z.id)].test_results||null):S(null)},style:{padding:"6px 14px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"12px",background:re,color:"white"},children:["P",q+1," ",E?"âœ“":ee?"âœ—":""]},q)})}),F&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px",padding:"16px",overflowY:"auto",maxHeight:"600px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:700,color:"#f1f5f9"},children:F.title}),F.difficulty&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:600,background:F.difficulty==="hard"?"rgba(239,68,68,0.15)":F.difficulty==="medium"?"rgba(245,158,11,0.15)":"rgba(34,197,94,0.15)",color:F.difficulty==="hard"?"#f87171":F.difficulty==="medium"?"#fbbf24":"#34d399"},children:F.difficulty})]}),e.jsx("p",{style:{fontSize:"14px",lineHeight:1.6,color:"#cbd5e1"},children:F.description}),F.examples&&F.examples.length>0&&e.jsxs("div",{style:{marginTop:"16px",background:"#0f172a",padding:"12px",borderRadius:"8px",border:"1px solid #334155"},children:[e.jsx("h4",{style:{fontSize:"13px",fontWeight:700,marginBottom:"10px",color:"#10b981",display:"flex",alignItems:"center",gap:"6px"},children:"ðŸ“‹ Sample Input/Output"}),F.examples.map((z,q)=>e.jsxs("div",{style:{background:"#1e293b",padding:"10px",borderRadius:"6px",marginBottom:"8px",fontSize:"12px",color:"#cbd5e1",fontFamily:"monospace"},children:[e.jsxs("div",{style:{marginBottom:"6px"},children:[e.jsx("strong",{style:{color:"#10b981"},children:"Input:"}),e.jsx("pre",{style:{margin:"4px 0 0",background:"#0f172a",padding:"6px",borderRadius:"4px",whiteSpace:"pre-wrap"},children:z.input})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#10b981"},children:"Expected Output:"}),e.jsx("pre",{style:{margin:"4px 0 0",background:"#0f172a",padding:"6px",borderRadius:"4px",whiteSpace:"pre-wrap"},children:z.output})]}),z.explanation&&e.jsx("div",{style:{color:"#94a3b8",marginTop:"6px",fontSize:"11px"},children:e.jsxs("em",{children:["ðŸ’¡ ",z.explanation]})})]},q))]}),F.constraints&&e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx("h4",{style:{fontSize:"13px",fontWeight:600,marginBottom:"6px",color:"#94a3b8"},children:"Constraints:"}),e.jsx("p",{style:{fontSize:"13px",color:"#64748b"},children:F.constraints})]}),D&&e.jsxs("div",{style:{marginTop:"16px",background:"#0f172a",border:"2px solid #334155",borderRadius:"8px",padding:"12px"},children:[e.jsxs("h4",{style:{fontSize:"13px",fontWeight:700,marginBottom:"10px",color:D.every(z=>z.passed)?"#10b981":"#ef4444",display:"flex",alignItems:"center",gap:"6px"},children:[D.every(z=>z.passed)?e.jsx(Le,{size:14}):e.jsx(We,{size:14}),"Test Results"]}),e.jsx("div",{style:{display:"grid",gap:"8px"},children:D.map((z,q)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px",background:z.passed?"rgba(34,197,94,0.1)":"rgba(239,68,68,0.1)",border:`1px solid ${z.passed?"#22c55e":"#ef4444"}`,borderRadius:"6px",fontSize:"12px",color:"#cbd5e1"},children:[z.passed?e.jsx(Le,{size:16,color:"#22c55e"}):e.jsx(We,{size:16,color:"#ef4444"}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsxs("span",{children:[e.jsxs("strong",{children:["Test Case ",z.name||q+1,":"]})," ",z.passed?"âœ“ Passed":"âœ— Failed"]}),!z.passed&&z.expected&&z.actual&&e.jsxs("div",{style:{fontSize:"11px",background:"rgba(0,0,0,0.3)",padding:"6px",borderRadius:"4px",marginTop:"4px"},children:[e.jsxs("div",{style:{color:"#ef4444"},children:["Exp: ",Je(z.expected)]}),e.jsxs("div",{style:{color:"#fca5a5"},children:["Act: ",Je(z.actual)]})]}),!z.passed&&z.output&&!z.expected&&e.jsx("div",{style:{fontSize:"11px",fontFamily:"monospace",color:"#fca5a5"},children:Je(z.output)})]})]},q))})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("select",{value:y[F.id]||"python",onChange:z=>{const q=z.target.value;T(E=>({...E,[F.id]:q})),p[F.id];let Se="";F.starter_code&&typeof F.starter_code=="object"&&F.starter_code[q]?Se=F.starter_code[q]:Se=Ie(F,q),o(E=>({...E,[F.id]:Se}))},style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #475569",fontSize:"13px",background:"#0f172a",color:"#f1f5f9",fontWeight:600},children:Sn.map(z=>e.jsx("option",{value:z.value,children:z.label},z.value))}),e.jsxs("button",{onClick:Ve,disabled:b,style:{padding:"8px 16px",background:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",opacity:b?.6:1,transition:"all 0.2s"},children:[b?e.jsx(lr,{size:16,className:"animate-spin"}):e.jsx(qt,{size:16}),e.jsx("strong",{children:"â–¶ Check Your Code"})]}),e.jsxs("button",{onClick:st,disabled:$,style:{padding:"8px 16px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",opacity:$?.6:1,transition:"all 0.2s"},children:[$?e.jsx(lr,{size:16}):e.jsx(Mt,{size:16}),e.jsx("strong",{children:"Submit Solution"})]})]}),e.jsx("div",{style:{border:"1px solid #334155",borderRadius:"8px",overflow:"hidden",flex:1,minHeight:"400px"},children:e.jsx(Vr,{height:"400px",language:Sn.find(z=>z.value===(y[F.id]||"python"))?.monacoId||"python",value:p[F.id]||"",onChange:z=>o(q=>({...q,[F.id]:z||""})),theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,padding:{top:10}}})}),e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"8px",overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>L(!k),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",color:"#94a3b8",fontSize:"12px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:k?"1px solid #334155":"none"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:["âŒ¨ï¸ Custom Input ",W?"(has input)":""]}),e.jsx("span",{children:k?"â–²":"â–¼"})]}),k&&e.jsx("textarea",{value:W,onChange:z=>m(z.target.value),placeholder:"Enter custom input here (stdin)...",style:{width:"100%",minHeight:"70px",padding:"8px 12px",background:"#0f172a",color:"#f1f5f9",border:"none",fontSize:"13px",fontFamily:"monospace",resize:"vertical",boxSizing:"border-box",outline:"none"}})]}),e.jsxs("div",{style:{background:"#0f172a",color:"#d4d4d4",padding:"12px",borderRadius:"8px",fontSize:"13px",fontFamily:"monospace",minHeight:"100px",maxHeight:"180px",overflowY:"auto",border:"2px solid #334155"},children:[e.jsxs("div",{style:{fontSize:"11px",color:"#64748b",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:R?"#10b981":"#475569"}}),"OUTPUT TERMINAL"]}),e.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordWrap:"break-word",color:R?"#10b981":"#64748b"},children:R||"(Run your code to see output here...)"})]})]})]}),v&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#1e293b",borderRadius:"16px",padding:"28px",maxWidth:"400px",width:"90%",border:"1px solid #334155",textAlign:"center"},children:[e.jsx(Mt,{size:36,color:"#8b5cf6",style:{marginBottom:"12px"}}),e.jsx("h3",{style:{margin:"0 0 8px",color:"#f1f5f9",fontSize:"18px"},children:"Submit Coding?"}),e.jsx("p",{style:{color:"#94a3b8",fontSize:"14px",margin:"0 0 20px"},children:"Submit your coding solutions? This will move to the SQL section."}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>N(!1),style:{flex:1,padding:"10px",background:"#334155",color:"#94a3b8",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Cancel"}),e.jsx("button",{onClick:ve,style:{flex:1,padding:"10px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Submit"})]})]})})]})}const as="http://localhost:3000";function ol({attemptId:r,attemptData:n,onComplete:d,onFailed:u}){const[c,g]=i.useState([]),[f,j]=i.useState(0),[p,o]=i.useState({}),[y,T]=i.useState(null),[R,h]=i.useState(null),[W,m]=i.useState({}),[k,L]=i.useState(!1),[D,S]=i.useState(!1),[b,I]=i.useState(!1),[$,G]=i.useState(null),[ae,ne]=i.useState(!0),[v,N]=i.useState(null),[A,te]=i.useState(""),[se,ie]=i.useState(!1),[ge,pe]=i.useState(!1),[de,ce]=i.useState(null),[B,K]=i.useState({employees:"employees",departments:"departments",projects:"projects",orders:"orders"}),V=i.useRef(null);i.useEffect(()=>{if(de!==null){if(de<=0){Ae();return}return V.current=setInterval(()=>{ce(F=>F<=1?(clearInterval(V.current),Ae(),0):F-1)},1e3),()=>clearInterval(V.current)}},[de]);const Ae=()=>{alert("Time is up! Submitting your test automatically."),Ve()},Fe=F=>{const O=Math.floor(F/60),z=F%60;return`${O}:${z<10?"0":""}${z}`};i.useEffect(()=>{He()},[]);const He=async()=>{try{const{data:F}=await oe.post(`${as}/api/skill-tests/sql/start/${r}`);g(F.problems||[]),m(F.existing_submissions||{}),F.tables&&K(F.tables);const O={};(F.problems||[]).forEach(z=>{const q=(F.existing_submissions||{})[String(z.id)];O[z.id]=q?q.query:""}),o(O),F.duration_minutes&&ce(F.duration_minutes*60),ne(!1)}catch(F){te(F.response?.data?.error||F.message),ne(!1)}},Ie=async()=>{const F=c[f];if(F){L(!0),T(null),h(null);try{const{data:O}=await oe.post(`${as}/api/skill-tests/sql/run`,{query:p[F.id]||"",attemptId:r});T(O)}catch(O){T({success:!1,error:O.message})}finally{L(!1)}}},Je=async()=>{const F=c[f];if(F){S(!0),h(null);try{const{data:O}=await oe.post(`${as}/api/skill-tests/sql/evaluate`,{attemptId:r,problemId:F.id,query:p[F.id]||""});h(O),m(z=>({...z,[String(F.id)]:{passed:O.passed,feedback:O.feedback,expected:O.expected,actual:O.actual}}))}catch(O){te(O.response?.data?.error||O.message)}finally{S(!1)}}},Ve=async()=>{pe(!1),I(!0);try{const{data:F}=await oe.post(`${as}/api/skill-tests/sql/finish/${r}`);G(F),ie(!0)}catch(F){te(F.response?.data?.error||F.message),I(!1)}},st=()=>{$?.passed?d($):u()};if(ae)return e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Loading SQL problems..."});if($)return e.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:$.passed?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)"},children:$.passed?e.jsx(Le,{size:40,color:"#22c55e"}):e.jsx(We,{size:40,color:"#ef4444"})}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:700,margin:"0 0 8px",color:"#f1f5f9"},children:$.passed?"SQL Passed!":"SQL Failed"}),e.jsxs("p",{style:{fontSize:"18px",color:"#94a3b8"},children:["Solved: ",$.solved,"/",$.total," (",Math.round($.score),"%)"]}),e.jsxs("div",{style:{marginTop:"32px"},children:[e.jsxs("button",{onClick:st,style:{padding:"12px 24px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:700,fontSize:"16px",display:"inline-flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(139,92,246,0.3)"},children:[$.passed?"Continue to Interview":"View Report"," ",e.jsx(Ls,{size:18})]}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginTop:"12px"},children:"Click to proceed to the next stage"})]})]});const ve=c[f],X=Object.values(W).filter(F=>F.passed).length,ye=[{name:B.employees,columns:["id","name","department","salary","hire_date","manager_id"]},{name:B.departments,columns:["id","name","budget","location"]},{name:B.projects,columns:["id","name","department_id","start_date","end_date","status"]},{name:B.orders,columns:["id","customer_name","product","quantity","price","order_date"]}],ze=(F,O,z)=>{if(!O||!O.columns&&!O.error)return null;const q=z==="success"?"#10b981":z==="fail"?"#ef4444":"#60a5fa";return O.error?e.jsxs("div",{style:{flex:1,minWidth:"300px"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:800,color:"#ef4444",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.05em"},children:F}),e.jsxs("div",{style:{padding:"16px",background:"rgba(239, 68, 68, 0.08)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#fca5a5",fontSize:"13px",fontFamily:'"JetBrains Mono", monospace'},children:[e.jsx("div",{style:{color:"#ef4444",fontWeight:700,marginBottom:"4px"},children:"Query Error:"}),O.error]})]}):e.jsxs("div",{style:{flex:1,minWidth:"300px",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{fontSize:"11px",fontWeight:800,color:q,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:F}),e.jsxs("span",{style:{fontSize:"10px",opacity:.6},children:[O.rows?.length||0," rows"]})]}),e.jsx("div",{style:{overflow:"auto",background:"rgba(15, 23, 42, 0.6)",borderRadius:"12px",border:`1px solid ${q}30`,maxHeight:"250px",position:"relative"},children:e.jsxs("table",{style:{borderCollapse:"separate",borderSpacing:0,width:"100%",fontSize:"12px"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{position:"sticky",top:0,zIndex:10},children:O.columns.map(Se=>e.jsx("th",{style:{padding:"10px 16px",background:q+"20",backdropFilter:"blur(4px)",borderBottom:`2px solid ${q}40`,textAlign:"left",color:"#f1f5f9",fontWeight:700,whiteSpace:"nowrap"},children:Se},Se))})}),e.jsx("tbody",{children:O.rows&&O.rows.map((Se,E)=>e.jsx("tr",{style:{background:E%2===0?"rgba(255,255,255,0.02)":"transparent",transition:"background 0.2s"},onMouseEnter:ee=>ee.currentTarget.style.background="rgba(255,255,255,0.05)",onMouseLeave:ee=>ee.currentTarget.style.background=E%2===0?"rgba(255,255,255,0.02)":"transparent",children:O.columns.map(ee=>e.jsx("td",{style:{padding:"8px 16px",borderBottom:"1px solid rgba(255,255,255,0.03)",color:"#cbd5e1",whiteSpace:"nowrap"},children:Se[ee]??e.jsx("span",{style:{color:"#475569",fontStyle:"italic"},children:"NULL"})},ee))},E))})]})})]})};return e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",color:"#f1f5f9"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",background:"rgba(30, 41, 59, 0.7)",backdropFilter:"blur(12px)",borderRadius:"16px",marginBottom:"20px",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 8px 32px rgba(0,0,0,0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #d946ef)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 15px rgba(139, 92, 246, 0.4)"},children:e.jsx(Tt,{size:22,color:"white"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:800,fontSize:"18px",letterSpacing:"-0.02em"},children:"SQL Proficiency Test"}),e.jsxs("div",{style:{fontSize:"12px",color:"#94a3b8",fontWeight:500},children:["Validated: ",e.jsx("span",{style:{color:"#8b5cf6"},children:X})," of ",c.length," challenges"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[de!==null&&e.jsxs("div",{style:{padding:"8px 16px",borderRadius:"10px",fontSize:"14px",fontWeight:700,background:de<300?"rgba(239, 68, 68, 0.15)":"rgba(59, 130, 246, 0.1)",color:de<300?"#fca5a5":"#60a5fa",border:`1px solid ${de<300?"rgba(239, 68, 68, 0.3)":"rgba(59, 130, 246, 0.2)"}`,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:"â±ï¸"})," ",Fe(de)]}),e.jsx("button",{onClick:()=>pe(!0),disabled:b,style:{padding:"10px 24px",background:"linear-gradient(to right, #8b5cf6, #7c3aed)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:700,fontSize:"14px",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)",transition:"transform 0.2s, opacity 0.2s",opacity:b?.6:1},children:b?"Saving...":"Complete Test â†’"})]})]}),A&&e.jsxs("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.2)",borderRadius:"12px",padding:"12px 16px",marginBottom:"20px",color:"#fca5a5",fontSize:"14px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(We,{size:18})," ",A]}),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",padding:"0 4px"},children:c.map((F,O)=>{const z=W[String(F.id)],q=z?.passed,Se=z&&!z.passed;let E="rgba(51, 65, 85, 0.5)",ee="1px solid rgba(255,255,255,0.05)",re="#94a3b8";return O===f?(E="rgba(139, 92, 246, 0.2)",ee="1px solid rgba(139, 92, 246, 0.5)",re="#ddd6fe"):q?(E="rgba(34, 197, 94, 0.1)",ee="1px solid rgba(34, 197, 94, 0.4)",re="#86efac"):Se&&(E="rgba(239, 68, 68, 0.1)",ee="1px solid rgba(239, 68, 68, 0.4)",re="#fca5a5"),e.jsxs("button",{onClick:()=>{j(O),T(null),h(W[String(F.id)]||null),N(null)},style:{padding:"10px 20px",borderRadius:"10px",border:ee,cursor:"pointer",fontWeight:700,fontSize:"13px",background:E,color:re,transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},children:["Q",O+1,q&&e.jsx(Le,{size:14}),Se&&e.jsx(We,{size:14})]},O)})}),ve&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"420px 1fr",gap:"20px",alignItems:"start"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{background:"#1e293b",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.1)",overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:e.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:800,color:"#f8fafc"},children:ve.title})}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 12px",background:ve.difficulty==="easy"?"rgba(34,197,94,0.1)":ve.difficulty==="medium"?"rgba(245,158,11,0.1)":"rgba(239,68,68,0.1)",color:ve.difficulty==="easy"?"#86efac":ve.difficulty==="medium"?"#fcd34d":"#fca5a5",borderRadius:"20px",fontSize:"11px",fontWeight:800,textTransform:"uppercase",letterSpacing:"0.05em",border:"1px solid currentColor"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"currentColor"}}),ve.difficulty]}),ve.expected_columns&&ve.expected_columns.length>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 12px",background:"rgba(59,130,246,0.1)",color:"#93c5fd",borderRadius:"20px",fontSize:"11px",fontWeight:700,border:"1px solid rgba(59,130,246,0.3)"},children:[e.jsx(Tt,{size:12}),ve.expected_columns.length," Columns Expected"]})]}),e.jsx("p",{style:{fontSize:"15px",lineHeight:1.7,color:"#f1f5f9",margin:"0 0 20px",fontWeight:450},children:ve.description})]}),e.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>N(v==="schema"?null:"schema"),style:{flex:1,padding:"10px",borderRadius:"10px",fontSize:"13px",fontWeight:700,background:v==="schema"?"#334155":"rgba(51, 65, 85, 0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"#f1f5f9",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(Ds,{size:16,color:"#8b5cf6"})," Schema"]}),e.jsxs("button",{onClick:()=>N(v==="expected"?null:"expected"),style:{flex:1,padding:"10px",borderRadius:"10px",fontSize:"13px",fontWeight:700,background:v==="expected"?"#334155":"rgba(51, 65, 85, 0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"#f1f5f9",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(it,{size:16,color:"#10b981"})," Expected"]})]}),v==="schema"&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:ye.map(F=>e.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.4)",padding:"12px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:800,color:"#8b5cf6",marginBottom:"8px",letterSpacing:"0.05em"},children:F.name.toUpperCase()}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:F.columns.map(O=>e.jsx("span",{style:{fontSize:"11px",color:"#94a3b8",background:"rgba(255,255,255,0.03)",padding:"2px 8px",borderRadius:"4px"},children:O},O))})]},F.name))}),v==="expected"&&e.jsxs("div",{style:{background:"#0f172a",padding:"12px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",fontSize:"13px"},children:[ve.expected_columns&&e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("div",{style:{color:"#64748b",fontSize:"11px",fontWeight:700,marginBottom:"6px"},children:"REQUIRED COLUMNS"}),e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:ve.expected_columns.map(F=>e.jsx("span",{style:{background:"rgba(96,165,250,0.1)",color:"#60a5fa",padding:"2px 8px",borderRadius:"4px",border:"1px solid rgba(96,165,250,0.2)"},children:F},F))})]}),ve.expected_output_description&&e.jsxs("div",{children:[e.jsx("div",{style:{color:"#64748b",fontSize:"11px",fontWeight:700,marginBottom:"6px"},children:"EXPECTED RESULT"}),e.jsx("div",{style:{color:"#ec4899",fontStyle:"italic"},children:ve.expected_output_description})]})]}),ve.hints&&!v&&e.jsxs("div",{style:{background:"rgba(245,158,11,0.05)",padding:"12px",borderRadius:"12px",border:"1px solid rgba(245,158,11,0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#fbbf24",fontWeight:700,fontSize:"13px",marginBottom:"4px"},children:[e.jsx("span",{children:"ðŸ’¡"})," Pro Tip:"]}),e.jsx("div",{style:{fontSize:"13px",color:"#d97706",lineHeight:1.5},children:ve.hints})]})]})]}),R&&e.jsx("div",{style:{background:R.passed?"rgba(34, 197, 94, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"16px",border:`1px solid ${R.passed?"rgba(34, 197, 94, 0.2)":"rgba(239, 68, 68, 0.2)"}`,padding:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:R.passed?"#22c55e":"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:R.passed?e.jsx(Le,{size:14,color:"white"}):e.jsx(We,{size:14,color:"white"})}),e.jsx("span",{style:{fontWeight:800,fontSize:"15px",color:R.passed?"#4ade80":"#f87171",letterSpacing:"0.05em"},children:R.passed?"PASSED":"FAILED"})]}),e.jsx("button",{onClick:()=>{const F=document.getElementById("sql-console-tabs");F&&F.scrollIntoView({behavior:"smooth"})},style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"#94a3b8",fontSize:"11px",fontWeight:700,padding:"4px 10px",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:F=>F.currentTarget.style.background="rgba(255,255,255,0.1)",onMouseLeave:F=>F.currentTarget.style.background="rgba(255,255,255,0.05)",children:"VIEW COMPARISON"})]})})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:e.jsxs("div",{style:{background:"#0f172a",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.1)",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{padding:"12px 20px",background:"rgba(30, 41, 59, 0.5)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#ff5f56"}}),e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#ffbd2e"}}),e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#27c93f"}}),e.jsx("span",{style:{marginLeft:"8px",fontSize:"12px",fontWeight:600,color:"#64748b"},children:"query.sql"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:Ie,disabled:k,style:{padding:"6px 16px",background:"#334155",color:"#f1f5f9",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",cursor:"pointer",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",opacity:k?.6:1},children:[k?e.jsx(lr,{size:14,className:"animate-spin"}):e.jsx(qt,{size:14,color:"#10b981"})," Run Query"]}),e.jsxs("button",{onClick:Je,disabled:D,style:{padding:"6px 16px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",opacity:D?.6:1},children:[D?e.jsx(lr,{size:14,className:"animate-spin"}):e.jsx(Mt,{size:14})," Submit Final"]})]})]}),e.jsx("div",{style:{height:"300px"},children:e.jsx(Vr,{height:"300px",language:"sql",value:p[ve.id]||"",onChange:F=>o(O=>({...O,[ve.id]:F||""})),theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,padding:{top:16,bottom:16},fontFamily:"'Fira Code', 'Cascadia Code', monospace",lineNumbers:"on",renderLineHighlight:"all",contextmenu:!1}})}),e.jsxs("div",{style:{background:"#020617",padding:"0",borderTop:"1px solid rgba(255,255,255,0.05)",minHeight:"300px",maxHeight:"500px",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{id:"sql-console-tabs",style:{padding:"0 16px",background:"rgba(15, 23, 42, 0.8)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex"},children:[e.jsx("button",{onClick:()=>h(null),style:{padding:"12px 16px",fontSize:"11px",fontWeight:700,letterSpacing:"0.05em",background:R?"transparent":"rgba(56, 189, 248, 0.1)",color:R?"#475569":"#38bdf8",border:"none",borderBottom:R?"2px solid transparent":"2px solid #38bdf8",cursor:"pointer",transition:"all 0.2s"},children:"EXECUTION RESULT"}),R&&e.jsx("button",{style:{padding:"12px 16px",fontSize:"11px",fontWeight:700,letterSpacing:"0.05em",background:"rgba(139, 92, 246, 0.1)",color:"#a78bfa",border:"none",borderBottom:"2px solid #8b5cf6",cursor:"pointer"},children:"SUBMISSION COMPARISON"})]}),y&&e.jsx("div",{style:{fontSize:"10px",color:"#10b981",fontWeight:800},children:"SUCCESS"})]}),e.jsx("div",{style:{padding:"16px",overflowY:"auto",flex:1,fontFamily:"'JetBrains Mono', monospace"},children:R?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",gap:"20px",flexWrap:"nowrap",overflowX:"auto",paddingBottom:"12px"},children:[ze("Expected Outcome",R.expected,"success"),ze("Your Submission Output",R.actual,R.passed?"success":"fail")]}),e.jsxs("div",{style:{padding:"20px",background:R.passed?"rgba(16, 185, 129, 0.03)":"rgba(239, 68, 68, 0.03)",borderRadius:"16px",border:`1px solid ${R.passed?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)"}`,display:"flex",gap:"20px",alignItems:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"16px",background:R.passed?"#10b981":"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 8px 16px ${R.passed?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`},children:R.passed?e.jsx(Le,{size:24,color:"white"}):e.jsx(We,{size:24,color:"white"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px",fontWeight:800,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Final Assessment"}),e.jsx("div",{style:{fontSize:"18px",color:"#f1f5f9",fontWeight:800,letterSpacing:"-0.02em"},children:R.passed?"Challenge Successfully Solved":"Submission Mismatch Detected"}),e.jsx("div",{style:{fontSize:"13px",color:"#94a3b8",marginTop:"4px"},children:R.passed?"Your logic perfectly matches the expected criteria.":"Refine your query logic to match the expected results shown above."})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#64748b",fontWeight:800,textTransform:"uppercase",marginBottom:"4px"},children:"SCORE"}),e.jsx("div",{style:{fontSize:"28px",color:R.passed?"#10b981":"#ef4444",fontWeight:900},children:R.passed?"100":Math.max(0,R.score||0)})]})]})]}):y?y.success?y.rows&&y.rows.length>0?e.jsxs("div",{style:{overflowX:"auto"},children:[e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",fontSize:"13px"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"rgba(56, 189, 248, 0.08)"},children:y.columns.map(F=>e.jsx("th",{style:{padding:"10px 14px",borderBottom:"2px solid #1e293b",textAlign:"left",color:"#7dd3fc",fontWeight:700},children:F},F))})}),e.jsx("tbody",{children:y.rows.slice(0,50).map((F,O)=>e.jsx("tr",{style:{borderBottom:"1px solid #0f172a",background:O%2===0?"rgba(255,255,255,0.01)":"transparent"},children:y.columns.map(z=>e.jsx("td",{style:{padding:"10px 14px",color:"#cbd5e1"},children:F[z]??e.jsx("span",{style:{color:"#475569",fontStyle:"italic"},children:"NULL"})},z))},O))})]}),e.jsx("div",{style:{marginTop:"16px",fontSize:"11px",color:"#475569",borderTop:"1px solid #1e293b",paddingTop:"10px",display:"flex",justifyContent:"space-between"},children:e.jsxs("span",{children:["Showing ",Math.min(y.rows.length,50)," of ",y.rows.length," records"]})})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#10b981",background:"rgba(16,185,129,0.08)",padding:"16px",borderRadius:"12px",border:"1px solid rgba(16,185,129,0.2)"},children:[e.jsx("div",{style:{padding:"4px",borderRadius:"50%",background:"#10b98140"},children:e.jsx(Le,{size:16})}),e.jsx("span",{style:{fontSize:"14px",fontWeight:600},children:y.message||"Execution successful. No rows returned."})]}):e.jsxs("div",{style:{color:"#ef4444",fontSize:"13px",background:"rgba(239,68,68,0.05)",padding:"16px",borderRadius:"12px",border:"1px solid rgba(239,68,68,0.2)",fontFamily:'"JetBrains Mono", monospace'},children:[e.jsx("strong",{style:{display:"block",marginBottom:"8px",textTransform:"uppercase",fontSize:"11px",letterSpacing:"0.05em"},children:"Execution Error"}),y.error]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"180px",color:"#334155"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(30,41,59,0.5)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px"},children:e.jsx(Tt,{size:24,style:{opacity:.5}})}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600,letterSpacing:"0.02em"},children:"Ready for execution"})]})})]})]})})]}),ge&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(2, 6, 23, 0.85)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#1e293b",borderRadius:"24px",padding:"40px",maxWidth:"440px",width:"90%",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.5)"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"20px",background:"rgba(139,92,246,0.1)",margin:"0 auto 24px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Tt,{size:32,color:"#8b5cf6"})}),e.jsx("h3",{style:{margin:"0 0 12px",color:"#f8fafc",fontSize:"24px",fontWeight:800},children:"Submit Solutions?"}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"15px",lineHeight:1.6,margin:"0 0 32px"},children:["You have submitted solutions for ",X," out of ",c.length," challenges. Are you ready to finalize this section?"]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>pe(!1),style:{flex:1,padding:"12px",background:"rgba(51, 65, 85, 0.5)",color:"#cbd5e1",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",cursor:"pointer",fontWeight:700,fontSize:"15px"},children:"Go Back"}),e.jsx("button",{onClick:Ve,style:{flex:2,padding:"12px",background:"linear-gradient(to right, #8b5cf6, #7c3aed)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontWeight:700,fontSize:"15px",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:"Submit & Continue"})]})]})})]})}function wn({state:r="idle",size:n=300}){const d={white:"#F8FAFC",silver:"#CBD5E1",dark:"#1E293B",blueWait:"#0EA5E9",blueActive:"#38BDF8",green:"#4ADE80",pink:"#F472B6"},c=r==="listening"?d.green:r==="thinking"?d.pink:r==="speaking"?d.blueActive:d.blueWait;return e.jsxs("div",{className:"avatar-container",style:{display:"flex",flexDirection:"column",alignItems:"center",filter:"drop-shadow(0 8px 24px rgba(14, 165, 233, 0.15))"},children:[e.jsxs("svg",{width:n,height:n*1.2,viewBox:"0 0 400 500",style:{overflow:"visible"},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"bodyGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFFFFF"}),e.jsx("stop",{offset:"100%",stopColor:"#E2E8F0"})]}),e.jsxs("radialGradient",{id:"screenGrad",cx:"50%",cy:"40%",r:"80%",children:[e.jsx("stop",{offset:"0%",stopColor:"#334155"}),e.jsx("stop",{offset:"100%",stopColor:"#020617"})]}),e.jsxs("filter",{id:"blueGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("g",{transform:"translate(200, 360)",children:e.jsxs("g",{children:[e.jsx("path",{d:"M-60 -20 Q-70 100 0 110 Q70 100 60 -20 L40 -40 Q0 -30 -40 -40 Z",fill:"url(#bodyGrad)",stroke:d.silver,strokeWidth:"2"}),e.jsx("path",{d:"M-20 0 L-20 60 M0 10 L0 70 M20 0 L20 60",stroke:c,strokeWidth:"4",strokeLinecap:"round",opacity:"0.8",filter:"url(#blueGlow)",children:r==="speaking"&&e.jsx("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"0.5s",repeatCount:"indefinite"})}),e.jsxs("g",{transform:"translate(0, -35)",children:[e.jsx("rect",{x:"-15",y:"-15",width:"30",height:"30",rx:"4",fill:d.dark}),e.jsx("rect",{x:"-15",y:"-10",width:"30",height:"4",fill:d.silver}),e.jsx("rect",{x:"-15",y:"0",width:"30",height:"4",fill:d.silver})]})]})}),e.jsxs("g",{transform:"translate(280.5, 340)",children:[e.jsx("circle",{cx:"0",cy:"0",r:"22",fill:"#E2E8F0",stroke:d.silver}),e.jsx("circle",{cx:"0",cy:"0",r:"10",fill:d.dark}),e.jsxs("g",{children:[r==="idle"&&e.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"-5; 5; -5",dur:"3s",repeatCount:"indefinite"}),r==="speaking"&&e.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0; -15; 0; -10; 0",dur:"2s",repeatCount:"indefinite"}),e.jsx("rect",{x:"-12",y:"0",width:"24",height:"60",rx:"10",fill:"url(#bodyGrad)"}),e.jsx("rect",{x:"-12",y:"25",width:"24",height:"5",fill:d.dark,opacity:"0.5"}),e.jsxs("g",{transform:"translate(0, 60)",children:[e.jsx("circle",{cx:"0",cy:"0",r:"14",fill:d.silver}),e.jsxs("g",{transform:"rotate(-30)",children:[e.jsx("rect",{x:"-10",y:"0",width:"20",height:"50",rx:"8",fill:"url(#bodyGrad)"}),e.jsxs("g",{transform:"translate(0, 55)",children:[e.jsx("path",{d:"M-12 -5 Q0 15 12 -5 Z",fill:"#E2E8F0"}),e.jsx("rect",{x:"-14",y:"0",width:"6",height:"15",rx:"3",fill:"#E2E8F0",transform:"rotate(-15)"}),e.jsx("rect",{x:"-5",y:"5",width:"6",height:"16",rx:"3",fill:"#E2E8F0"}),e.jsx("rect",{x:"5",y:"5",width:"6",height:"16",rx:"3",fill:"#E2E8F0"}),e.jsx("rect",{x:"14",y:"0",width:"6",height:"15",rx:"3",fill:"#E2E8F0",transform:"rotate(15)"})]})]})]})]})]}),e.jsxs("g",{transform:"translate(119.5, 340) scale(-1, 1)",children:[e.jsx("circle",{cx:"0",cy:"0",r:"22",fill:"#E2E8F0",stroke:d.silver}),e.jsx("circle",{cx:"0",cy:"0",r:"10",fill:d.dark}),e.jsxs("g",{children:[r==="idle"&&e.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"5; -5; 5",dur:"3s",repeatCount:"indefinite"}),r==="speaking"&&e.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0; 10; 0; 5; 0",dur:"2.5s",repeatCount:"indefinite",delay:"0.5s"}),e.jsx("rect",{x:"-12",y:"0",width:"24",height:"60",rx:"10",fill:"url(#bodyGrad)"}),e.jsx("rect",{x:"-12",y:"25",width:"24",height:"5",fill:d.dark,opacity:"0.5"}),e.jsxs("g",{transform:"translate(0, 60)",children:[e.jsx("circle",{cx:"0",cy:"0",r:"14",fill:d.silver}),e.jsxs("g",{transform:"rotate(-30)",children:[e.jsx("rect",{x:"-10",y:"0",width:"20",height:"50",rx:"8",fill:"url(#bodyGrad)"}),e.jsxs("g",{transform:"translate(0, 55)",children:[e.jsx("path",{d:"M-12 -5 Q0 15 12 -5 Z",fill:"#E2E8F0"}),e.jsx("rect",{x:"-5",y:"5",width:"10",height:"12",rx:"3",fill:"#E2E8F0"})]})]})]})]})]}),e.jsx("g",{transform:"translate(200, 240)",children:e.jsxs("g",{children:[r==="listening"&&e.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0; 5; 0; -2; 0",dur:"4s",repeatCount:"indefinite"}),r==="thinking"&&e.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0; -15; -15",dur:"1s",fill:"freeze"}),r==="speaking"&&e.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0 0; 0 2; 0 0",dur:"0.2s",repeatCount:"indefinite",additive:"sum"}),e.jsx("path",{d:"M-80 0 C-80 -70 -50 -90 0 -90 C50 -90 80 -70 80 0 C80 60 50 80 0 80 C-50 80 -80 60 -80 0 Z",fill:"url(#bodyGrad)",stroke:"#CBD5E1",strokeWidth:"2"}),e.jsx("rect",{x:"-60",y:"-40",width:"120",height:"90",rx:"25",fill:"url(#screenGrad)",stroke:"#334155",strokeWidth:"2"}),e.jsx("line",{x1:"50",y1:"-75",x2:"70",y2:"-100",stroke:d.silver,strokeWidth:"4",strokeLinecap:"round"}),e.jsx("circle",{cx:"70",cy:"-100",r:"6",fill:c,filter:"url(#blueGlow)",children:e.jsx("animate",{attributeName:"opacity",values:"0.6;1;0.6",dur:"2s",repeatCount:"indefinite"})}),e.jsxs("g",{children:[e.jsx("path",{d:"M-82 -10 L-88 -10 L-88 30 L-82 30 Z",fill:d.silver}),e.jsx("rect",{x:"-92",y:"-15",width:"14",height:"50",rx:"4",fill:d.white,stroke:d.silver}),e.jsx("circle",{cx:"-85",cy:"10",r:"12",fill:d.dark}),e.jsx("circle",{cx:"-85",cy:"10",r:"6",fill:c,opacity:"0.7"})]}),e.jsxs("g",{children:[e.jsx("path",{d:"M82 -10 L88 -10 L88 30 L82 30 Z",fill:d.silver}),e.jsx("rect",{x:"78",y:"-15",width:"14",height:"50",rx:"4",fill:d.white,stroke:d.silver}),e.jsx("circle",{cx:"85",cy:"10",r:"12",fill:d.dark}),e.jsx("circle",{cx:"85",cy:"10",r:"6",fill:c,opacity:"0.7"})]}),e.jsxs("g",{transform:"translate(0, 5)",children:[e.jsxs("g",{transform:"translate(-25, -5)",children:[e.jsx("ellipse",{cx:"0",cy:"0",rx:"16",ry:"18",fill:"url(#screenGrad)",stroke:c,strokeWidth:"3",filter:"url(#blueGlow)"}),e.jsx("circle",{cx:"4",cy:"-4",r:"5",fill:"white",opacity:"0.8"}),r==="idle"&&e.jsx("animateTransform",{attributeName:"transform",type:"scale",values:"1 1; 1 0.1; 1 1",keyTimes:"0; 0.45; 0.5; 1",dur:"4s",repeatCount:"indefinite"})]}),e.jsxs("g",{transform:"translate(25, -5)",children:[e.jsx("ellipse",{cx:"0",cy:"0",rx:"16",ry:"18",fill:"url(#screenGrad)",stroke:c,strokeWidth:"3",filter:"url(#blueGlow)"}),e.jsx("circle",{cx:"4",cy:"-4",r:"5",fill:"white",opacity:"0.8"}),r==="idle"&&e.jsx("animateTransform",{attributeName:"transform",type:"scale",values:"1 1; 1 0.1; 1 1",keyTimes:"0; 0.45; 0.5; 1",dur:"4s",repeatCount:"indefinite"})]}),e.jsx("g",{transform:"translate(0, 30)",children:r==="speaking"?e.jsx("path",{d:"M-10 0 Q0 10 10 0",fill:"none",stroke:c,strokeWidth:"3",strokeLinecap:"round",children:e.jsx("animate",{attributeName:"d",values:"M-10 0 Q0 15 10 0; M-10 0 Q0 5 10 0; M-10 0 Q0 15 10 0",dur:"0.3s",repeatCount:"indefinite"})}):e.jsx("path",{d:"M-8 0 Q0 5 8 0",fill:"none",stroke:c,strokeWidth:"3",strokeLinecap:"round",opacity:"0.8"})})]})]})})]}),e.jsxs("div",{style:{marginTop:"-30px",padding:"8px 20px",background:r==="speaking"?"rgba(56, 189, 248, 0.1)":"rgba(30, 41, 59, 0.8)",backdropFilter:"blur(4px)",borderRadius:"24px",border:`1px solid ${c}40`,display:"flex",alignItems:"center",gap:"8px",zIndex:10},children:[e.jsx("span",{style:{display:"block",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:c,boxShadow:`0 0 10px ${c}`,animation:r==="speaking"?"pulse 1s infinite":"none"}}),e.jsx("span",{style:{color:"white",fontSize:"13px",fontWeight:600,letterSpacing:"0.5px",textTransform:"uppercase"},children:r==="speaking"?"AI Interviewer":r==="listening"?"Listening...":r==="thinking"?"Thinking...":"Ready"})]}),e.jsx("style",{children:`
                    @keyframes pulse { 0% { opacity: 0.5; transform: scale(0.8); } 50% { opacity: 1; transform: scale(1.2); } 100% { opacity: 0.5; transform: scale(0.8); } }
                `})]})}const kn="http://localhost:3000";function ll({attemptId:r,attemptData:n,onComplete:d,onFailed:u}){const[c,g]=i.useState(""),[f,j]=i.useState(""),[p,o]=i.useState("medium"),[y,T]=i.useState(1),[R,h]=i.useState(5),[W,m]=i.useState(""),[k,L]=i.useState(null),[D,S]=i.useState("idle"),[b,I]=i.useState(!1),[$,G]=i.useState(!1),[ae,ne]=i.useState(!0),[v,N]=i.useState(!1),[A,te]=i.useState(null),[se,ie]=i.useState(!0),[ge,pe]=i.useState([]),[de,ce]=i.useState(""),[B,K]=i.useState(null),V=i.useRef(null),Ae=i.useRef(null),Fe=i.useRef(null),He=i.useRef(null),Ie=i.useRef(null);i.useEffect(()=>{if(B!==null){if(B<=0){Je();return}return Ie.current=setInterval(()=>{K(O=>O<=1?(clearInterval(Ie.current),Je(),0):O-1)},1e3),()=>clearInterval(Ie.current)}},[B]);const Je=()=>{alert("Time is up! Submitting your test automatically."),u()},Ve=O=>{const z=Math.floor(O/60),q=O%60;return`${z}:${q<10?"0":""}${q}`};i.useEffect(()=>(He.current=window.speechSynthesis,st(),()=>{ye(),He.current&&He.current.cancel()}),[]);const st=async()=>{try{const{data:O}=await oe.post(`${kn}/api/skill-tests/interview/start/${r}`);g(O.question),j(O.category||""),o(O.difficulty||"medium"),T(O.question_number),h(O.total_questions),O.duration_minutes&&K(O.duration_minutes*60),ie(!1),ae&&ve(O.question)}catch(O){ce(O.response?.data?.error||O.message),ie(!1)}},ve=O=>{if(!He.current||!ae)return;He.current.cancel();const z=new SpeechSynthesisUtterance(O);z.rate=.95,z.pitch=1,z.volume=.8,z.onstart=()=>{G(!0),S("speaking")},z.onend=()=>{G(!1),S("idle")},z.onerror=()=>{G(!1),S("idle")},He.current.speak(z)},X=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){ce("Speech recognition not supported in this browser. Please type your answer.");return}const O=window.SpeechRecognition||window.webkitSpeechRecognition,z=new O;z.continuous=!0,z.interimResults=!0,z.lang="en-US";let q=W;z.onresult=Se=>{let E="";for(let ee=Se.resultIndex;ee<Se.results.length;ee++)Se.results[ee].isFinal?q+=Se.results[ee][0].transcript+" ":E+=Se.results[ee][0].transcript;m(q+E)},z.onend=()=>{I(!1),S("idle")},z.onerror=Se=>{Se.error!=="no-speech"&&console.error("Speech error:",Se.error),I(!1),S("idle")},Fe.current=z,z.start(),I(!0),S("listening"),He.current&&He.current.cancel()},ye=()=>{Fe.current&&(Fe.current.stop(),Fe.current=null),I(!1),S("idle")},ze=async()=>{if(!W.trim())return ce("Please provide an answer");N(!0),ce(""),L(null),S("thinking"),ye();try{const{data:O}=await oe.post(`${kn}/api/skill-tests/interview/answer`,{attemptId:r,answer:W.trim()});pe(z=>[...z,{question:c,answer:W.trim(),score:O.score,feedback:O.feedback}]),L({score:O.score,feedback:O.feedback}),O.is_complete?(te({passed:O.passed,overall_score:O.overall_score,status:O.status}),S("idle"),O.passed?setTimeout(()=>d(O),3e3):setTimeout(()=>u(),3e3)):setTimeout(()=>{g(O.next_question),j(O.next_category||""),o(O.next_difficulty||"medium"),T(O.question_number),m(""),L(null),S("idle"),ae&&ve(O.next_question)},3e3)}catch(O){ce(O.response?.data?.error||O.message),S("idle")}finally{N(!1),F()}},F=()=>{setTimeout(()=>{V.current?.scrollIntoView({behavior:"smooth"})},100)};return i.useEffect(()=>{F()},[ge,c,k]),se?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Starting AI Interview..."}):A?e.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[e.jsx(wn,{state:"idle",size:160}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:A.passed?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)"},children:A.passed?e.jsx(Le,{size:40,color:"#22c55e"}):e.jsx(We,{size:40,color:"#ef4444"})}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:700,margin:"0 0 8px",color:"#f1f5f9"},children:A.passed?"Interview Passed!":"Interview Not Passed"}),e.jsxs("p",{style:{fontSize:"18px",color:"#94a3b8"},children:["Average Score: ",(A.overall_score||0).toFixed(1),"/10"]}),e.jsx("p",{style:{fontSize:"14px",color:A.passed?"#22c55e":"#ef4444",marginTop:"12px"},children:A.passed?"Assessment complete! Generating report...":"Assessment ended. Generating report..."})]})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"300px 1fr",height:"700px",background:"#0f172a",borderRadius:"24px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)",boxShadow:"0 20px 50px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{background:"#1e293b",borderRight:"1px solid rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",padding:"24px",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(wn,{state:D,size:180}),e.jsx("div",{style:{position:"absolute",bottom:"10px",right:"10px",width:"12px",height:"12px",borderRadius:"50%",background:D==="speaking"?"#10b981":D==="thinking"?"#8b5cf6":"#94a3b8",border:"2px solid #1e293b"}})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:800,color:"#f8fafc",marginBottom:"4px"},children:"AI Interviewer"}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:700},children:D==="speaking"?"Speaking...":D==="thinking"?"Processing...":"Ready"})]}),e.jsx("div",{style:{width:"100%",height:"1px",background:"rgba(255,255,255,0.05)",margin:"10px 0"}}),B!==null&&e.jsxs("div",{style:{width:"100%"},children:[e.jsx("div",{style:{fontSize:"11px",color:"#64748b",fontWeight:800,marginBottom:"8px",textTransform:"uppercase"},children:"Time Efficiency"}),e.jsx("div",{style:{padding:"12px",borderRadius:"16px",fontSize:"20px",fontWeight:900,background:B<300?"rgba(239,68,68,0.1)":"rgba(16, 185, 129, 0.1)",color:B<300?"#fca5a5":"#10b981",border:"1px solid "+(B<300?"rgba(239,68,68,0.2)":"rgba(16, 185, 129, 0.2)"),textAlign:"center",fontFamily:'"JetBrains Mono", monospace'},children:Ve(B)})]}),e.jsxs("div",{style:{width:"100%",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",padding:"12px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#64748b",fontWeight:800},children:"PROGRESS"}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:900,color:"#8b5cf6"},children:[y,"/",R]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",padding:"12px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#64748b",fontWeight:800},children:"DIFFICULTY"}),e.jsx("div",{style:{fontSize:"13px",fontWeight:800,color:p==="hard"?"#ef4444":"#f59e0b",textTransform:"uppercase"},children:p})]})]})]}),e.jsx("div",{style:{marginTop:"auto"},children:e.jsxs("button",{onClick:()=>ne(!ae),style:{width:"100%",padding:"12px",background:ae?"rgba(16, 185, 129, 0.1)":"rgba(255,255,255,0.03)",border:"1px solid "+(ae?"rgba(16, 185, 129, 0.2)":"rgba(255,255,255,0.05)"),borderRadius:"12px",color:ae?"#10b981":"#64748b",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s",fontWeight:700,fontSize:"13px"},children:[ae?e.jsx(ln,{size:16}):e.jsx(_a,{size:16}),ae?"VOICE ENABLED":"MUTE MODE"]})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",background:"#0f172a",position:"relative"},children:[e.jsxs("div",{ref:Ae,style:{flex:1,overflowY:"auto",padding:"32px",display:"flex",flexDirection:"column",gap:"24px",scrollBehavior:"smooth"},children:[e.jsxs("div",{style:{paddingBottom:"20px",borderBottom:"1px solid rgba(255,255,255,0.05)",marginBottom:"10px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:800,color:"#f8fafc",margin:0},children:"Technical Assessment"}),e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",margin:"4px 0 0"},children:["Conducting focus session on ",f||"General Software Engineering"]})]}),ge.map((O,z)=>e.jsxs(dr.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"12px",maxWidth:"85%"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#8b5cf6",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Pr,{size:16,color:"white"})}),e.jsx("div",{style:{background:"#1e293b",padding:"16px",borderRadius:"4px 20px 20px 20px",border:"1px solid rgba(255,255,255,0.05)",color:"#e2e8f0",fontSize:"15px",lineHeight:1.6},children:O.question})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",maxWidth:"85%",alignSelf:"flex-end",flexDirection:"row-reverse"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx("div",{style:{fontSize:"14px",fontWeight:900,color:"white"},children:"Y"})}),e.jsx("div",{style:{background:"rgba(16, 185, 129, 0.1)",padding:"16px",borderRadius:"20px 4px 20px 20px",border:"1px solid rgba(16, 185, 129, 0.2)",color:"#f1f5f9",fontSize:"15px",lineHeight:1.6},children:O.answer})]}),e.jsx("div",{style:{display:"flex",gap:"12px",maxWidth:"75%",alignSelf:"center"},children:e.jsxs("div",{style:{background:O.score>=7?"rgba(34,197,94,0.05)":"rgba(245,158,11,0.05)",padding:"12px 20px",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{fontSize:"12px",fontWeight:900,color:O.score>=7?"#10b981":"#f59e0b",background:"rgba(255,255,255,0.05)",padding:"4px 8px",borderRadius:"8px"},children:["SCORE: ",O.score,"/10"]}),e.jsx("div",{style:{fontSize:"13px",color:"#94a3b8",fontStyle:"italic"},children:O.feedback})]})})]},z)),!k&&!A&&e.jsxs("div",{style:{display:"flex",gap:"12px",maxWidth:"85%"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#8b5cf6",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Pr,{size:16,color:"white"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{background:"#1e293b",padding:"16px",borderRadius:"4px 20px 20px 20px",border:"1px solid rgba(255,255,255,0.05)",color:"#e2e8f0",fontSize:"15px",lineHeight:1.6,boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[c,!$&&ae&&e.jsxs("button",{onClick:()=>ve(c),style:{marginTop:"12px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.05)",cursor:"pointer",color:"#8b5cf6",fontSize:"11px",fontWeight:700,padding:"4px 10px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ln,{size:12})," REPLAY AUDIO"]})]}),e.jsx("div",{style:{fontSize:"11px",color:"#475569",paddingLeft:"4px",fontWeight:600},children:"WAITING FOR YOUR ANSWER"})]})]}),de&&e.jsxs("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"12px",padding:"12px 20px",color:"#fca5a5",fontSize:"13px",alignSelf:"center"},children:[e.jsx("strong",{children:"Error:"})," ",de]}),k&&!A&&e.jsxs("div",{style:{display:"flex",gap:"12px",maxWidth:"85%",opacity:.6},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#334155",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(lr,{size:16,className:"animate-spin",color:"white"})}),e.jsx("div",{style:{background:"#0f172a",padding:"16px",color:"#475569",fontStyle:"italic",fontSize:"14px"},children:"Moving to next question..."})]}),e.jsx("div",{ref:V})]}),e.jsxs("div",{style:{padding:"0 32px 32px"},children:[!k&&!A&&e.jsxs("div",{style:{background:"#1e293b",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 10px 40px rgba(0,0,0,0.4)",padding:"12px",transition:"all 0.3s"},children:[e.jsx("textarea",{value:W,onChange:O=>m(O.target.value),placeholder:"Type your response here...",rows:2,style:{width:"100%",background:"transparent",border:"none",color:"#f8fafc",fontSize:"15px",lineHeight:1.6,padding:"12px",resize:"none",outline:"none",fontFamily:"inherit"},onKeyDown:O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),W.trim()&&!v&&ze())}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 12px 12px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:b?ye:X,style:{width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",background:b?"#ef4444":"rgba(16, 185, 129, 0.1)",color:b?"white":"#10b981",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",border:b?"none":"1px solid rgba(16, 185, 129, 0.2)"},children:b?e.jsx(_n,{size:20}):e.jsx(Ws,{size:20})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"0 12px",background:"rgba(255,255,255,0.03)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#64748b"}}),e.jsxs("span",{style:{fontSize:"11px",fontWeight:700,color:"#64748b"},children:[W.split(/\s+/).filter(Boolean).length," WORDS"]})]})]}),e.jsxs("button",{onClick:ze,disabled:v||!W.trim(),style:{padding:"10px 24px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"16px",cursor:"pointer",fontWeight:800,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s",opacity:v||!W.trim()?.3:1,boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:[v?e.jsx(lr,{size:16,className:"animate-spin"}):e.jsx(Mt,{size:16}),"SUBMIT"]})]})]}),(k||A)&&e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#475569",fontSize:"14px",fontWeight:600,letterSpacing:"0.05em"},children:A?"INTERVIEW COMPLETED":"EVALUATING RESPONSE..."})]})]})]})}const os="http://localhost:3000";function dl({user:r}){const[n,d]=i.useState([]),[u,c]=i.useState(!0),[g,f]=i.useState(null),[j,p]=i.useState(null),[o,y]=i.useState("list"),[T,R]=i.useState(""),[h,W]=i.useState(!1),[m,k]=i.useState(null),[L,D]=i.useState(""),[S,b]=i.useState(!1),[I,$]=i.useState(null),[G,ae]=i.useState(null),ne=i.useRef(null),v=i.useRef(null),[N,A]=i.useState({violationCount:0,tabSwitchCount:0,cameraBlocks:0,phoneDetections:0,fullscreenExits:0,cameraActive:!1}),[te,se]=i.useState(null),ie=i.useRef(null),ge=i.useRef(null),pe=i.useRef(null),de=i.useRef(null),[ce,B]=i.useState(!1),K=i.useRef(0),[V,Ae]=i.useState(null);i.useEffect(()=>{Je(),Fe()},[]);const Fe=async()=>{try{const E=()=>new Promise(re=>{if(window.cocoSsd)return re();let Pe=0;const we=setInterval(()=>{Pe+=200,(window.cocoSsd||Pe>3e4)&&(clearInterval(we),re())},200)});if(console.log("â³ Waiting for TensorFlow.js & COCO-SSD scripts..."),await E(),!window.cocoSsd){console.error("âŒ COCO-SSD scripts failed to load from CDN");return}console.log("ðŸ“¦ Scripts ready. Loading COCO-SSD model weights...");const ee=await window.cocoSsd.load({base:"mobilenet_v2"});Ae(ee),B(!0),console.log("âœ… AI Proctoring Model loaded successfully!");try{const re=document.createElement("canvas");re.width=64,re.height=64,await ee.detect(re),console.log("ðŸ”¥ Model warmed up and ready for real-time detection")}catch{}}catch(E){console.error("Model load error:",E)}};i.useEffect(()=>()=>{m&&m.getTracks().forEach(E=>E.stop())},[m]),i.useEffect(()=>{const E=()=>{const ee=!!document.fullscreenElement;W(ee),!ee&&g&&o!=="list"&&o!=="report"&&de.current?.("fullscreen_exit","Student exited fullscreen mode","high")};return document.addEventListener("fullscreenchange",E),()=>document.removeEventListener("fullscreenchange",E)},[g,o]);const He=i.useCallback((E,ee,re)=>{se({title:E,message:ee,severity:re}),ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>se(null),4e3)},[]),Ie=i.useCallback(async(E,ee,re="medium")=>{if(!(!g||j?.proctoring_enabled===!1))try{await oe.post(`${os}/api/skill-tests/proctoring/log`,{attemptId:g,testStage:o,eventType:E,details:ee,severity:re}),A(Qe=>({...Qe,violationCount:Qe.violationCount+1,tabSwitchCount:E==="tab_switch"?Qe.tabSwitchCount+1:Qe.tabSwitchCount,fullscreenExits:E==="fullscreen_exit"?Qe.fullscreenExits+1:Qe.fullscreenExits,phoneDetections:E==="phone_detected"?Qe.phoneDetections+1:Qe.phoneDetections,cameraBlocks:E==="camera_blocked"?Qe.cameraBlocks+1:Qe.cameraBlocks}));const we={tab_switch:{title:"âš ï¸ Tab Switch Detected!",msg:"Switching tabs is monitored. Return to your test immediately."},fullscreen_exit:{title:"âš ï¸ Fullscreen Exited!",msg:"You must stay in fullscreen mode. Please re-enter fullscreen."},camera_blocked:{title:"ðŸ“· Camera Blocked!",msg:"Your camera appears to be covered or blocked. Please uncover it."},phone_detected:{title:"ðŸ“± Suspicious Activity!",msg:"Device or object detected near camera. Keep your area clear."}}[E]||{title:"âš ï¸ Violation!",msg:ee};He(we.title,we.msg,re)}catch{}},[g,o,j,He]);i.useEffect(()=>{de.current=Ie},[Ie]),i.useEffect(()=>{if(!g||o==="list"||o==="report"||j?.proctoring_enabled===!1)return;const E=ee=>{ee.preventDefault()};return window.addEventListener("copy",E),window.addEventListener("paste",E),window.addEventListener("cut",E),window.addEventListener("contextmenu",E),()=>{window.removeEventListener("copy",E),window.removeEventListener("paste",E),window.removeEventListener("cut",E),window.removeEventListener("contextmenu",E)}},[g,o,j]),i.useEffect(()=>{const E=()=>{document.hidden&&g&&o!=="list"&&o!=="report"&&de.current?.("tab_switch","Student switched tabs or minimized window","high")};return document.addEventListener("visibilitychange",E),()=>document.removeEventListener("visibilitychange",E)},[g,o]),i.useEffect(()=>{A(E=>({...E,cameraActive:!!m}))},[m]),i.useEffect(()=>{if(!m||!g||o==="list"||o==="report"){pe.current&&(clearInterval(pe.current),pe.current=null);return}const E=document.createElement("canvas");E.width=640,E.height=480;const ee=E.getContext("2d");ge.current=E;const re=document.createElement("video");re.srcObject=m,re.muted=!0,re.playsInline=!0,re.width=640,re.height=480,re.play().catch(Ue=>console.warn("Video play error:",Ue));let Pe=0;const we=20,Qe=3,ht=8e3;return pe.current=setInterval(async()=>{try{if(!re||re.paused||re.ended||re.readyState<2||!ee)return;try{ee.drawImage(re,0,0,640,480);const Ge=ee.getImageData(0,0,640,480).data;let Et=0;for(let ot=0;ot<Ge.length;ot+=16)Et+=Ge[ot]*.299+Ge[ot+1]*.587+Ge[ot+2]*.114;Et/(Ge.length/16)<we?(Pe++,Pe===Qe&&(de.current?.("camera_blocked","Camera appears to be covered","high"),Pe=0)):Pe=0}catch{return}if(V&&re.readyState>=2)try{const Ue=await V.detect(re),Ge=Ue.filter($e=>$e.class!=="person");Ge.length>0&&console.log("ðŸ” AI:",Ge.map($e=>`${$e.class}(${($e.score*100).toFixed(0)}%)`).join(", "));const Et=["cell phone","remote","laptop","mouse","tablet"],ut=Ue.find($e=>Et.includes($e.class)&&$e.score>=.4);if(ut){const $e=Date.now();$e-K.current>ht&&(K.current=$e,console.warn(`ðŸš¨ SUSPICIOUS DEVICE: ${ut.class} (${(ut.score*100).toFixed(0)}%)`),de.current?.("phone_detected",`Suspicious activity: ${ut.class} detected (${(ut.score*100).toFixed(0)}% confidence)`,"high"))}const ot=Ue.filter($e=>["book","keyboard"].includes($e.class)&&$e.score>.45);if(ot.length>0){console.warn("âš ï¸ Suspicious:",ot.map(Gt=>`${Gt.class}(${(Gt.score*100).toFixed(0)}%)`).join(", "));const $e=Date.now();$e-K.current>ht&&(K.current=$e,de.current?.("phone_detected",`${ot[0].class} detected`,"medium"))}const Vt=Ue.filter($e=>$e.class==="person"&&$e.score>.35);Vt.length>1&&de.current?.("phone_detected",`Multiple people detected (${Vt.length} persons)`,"high")}catch(Ue){console.warn("Detection error:",Ue.message)}}catch(Ue){console.error(Ue)}},500),()=>{pe.current&&(clearInterval(pe.current),pe.current=null),re.pause(),re.srcObject=null}},[m,g,o,V]),i.useEffect(()=>()=>{ie.current&&clearTimeout(ie.current),pe.current&&clearInterval(pe.current)},[]);const Je=async()=>{try{c(!0);const{data:E}=await oe.get(`${os}/api/skill-tests/student/available`,{params:{studentId:r?.id||r?.email||"student"}});d(E)}catch(E){R(E.response?.data?.error||E.message)}finally{c(!1)}},Ve=E=>{const ee=n.find(re=>re.id===E);if(ee&&ee.proctoring_enabled===!1){ze(E);return}$(E),ae(null),b(!0),D("")},st=E=>{let ee=!0;for(const re of n)if(re.my_attempts?.find(we=>we.id===E)){re.proctoring_enabled===!1&&(ee=!1);break}if(!ee){F(E);return}ae(E),$(null),b(!0),D("")},ve=async()=>{try{const E=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:!1});return k(E),D(""),v.current&&(v.current.srcObject=E),!0}catch{return D("Camera access denied. Please allow camera access and try again."),!1}},X=async()=>{try{return ne.current&&!document.fullscreenElement&&await ne.current.requestFullscreen(),W(!0),!0}catch{return!1}},ye=async()=>{await X(),b(!1),I?await ze(I):G&&await F(G),$(null),ae(null)},ze=async E=>{try{R(""),A({violationCount:0,tabSwitchCount:0,cameraBlocks:0,phoneDetections:0,fullscreenExits:0,cameraActive:!!m});const{data:ee}=await oe.post(`${os}/api/skill-tests/${E}/start`,{studentId:r?.id||r?.email||"student",studentName:r?.name||r?.username||"Student"});f(ee.attemptId),await O(ee.attemptId)}catch(ee){R(ee.response?.data?.error||ee.message)}},F=async E=>{try{R(""),A({violationCount:0,tabSwitchCount:0,cameraBlocks:0,phoneDetections:0,fullscreenExits:0,cameraActive:!!m}),f(E),await O(E)}catch(ee){R(ee.response?.data?.error||ee.message)}},O=async E=>{try{const{data:ee}=await oe.get(`${os}/api/skill-tests/attempt/${E}`);p(ee),ee.overall_status==="completed"||ee.overall_status==="failed"?y("report"):y(ee.current_stage||"mcq")}catch(ee){R(ee.message)}},z=async E=>{f(E),await O(E),y("report")},q=async(E,ee)=>{await O(g),setTimeout(()=>{document.fullscreenElement||(ne.current||document.documentElement).requestFullscreen().catch(()=>{console.warn("Could not re-enter fullscreen after stage change")})},200)},Se=()=>{document.fullscreenElement&&document.exitFullscreen().catch(()=>{}),m&&(m.getTracks().forEach(E=>E.stop()),k(null)),f(null),p(null),y("list"),A({violationCount:0,tabSwitchCount:0,cameraBlocks:0,phoneDetections:0,fullscreenExits:0,cameraActive:!1}),Je()};if(S)return e.jsx("div",{ref:ne,style:{minHeight:"100vh",background:"#0f172a",color:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px"},children:e.jsxs("div",{style:{maxWidth:"500px",width:"100%",background:"#1e293b",borderRadius:"20px",padding:"40px",border:"1px solid #334155",textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",margin:"0 auto 20px",background:"rgba(139,92,246,0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(cr,{size:32,color:"#8b5cf6"})}),e.jsx("h2",{style:{fontSize:"22px",fontWeight:800,margin:"0 0 8px",color:"#f1f5f9"},children:"Proctoring Setup"}),e.jsx("p",{style:{fontSize:"14px",color:"#94a3b8",margin:"0 0 28px"},children:"This test requires camera access and fullscreen mode for proctoring."}),e.jsx("div",{style:{width:"240px",height:"180px",margin:"0 auto 20px",borderRadius:"12px",overflow:"hidden",border:"2px solid "+(m?"#22c55e":"#475569"),background:"#0f172a",display:"flex",alignItems:"center",justifyContent:"center"},children:m?e.jsx("video",{ref:v,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"}}):e.jsx(ws,{size:40,color:"#475569"})}),L&&e.jsx("div",{style:{fontSize:"12px",color:"#fca5a5",margin:"0 0 16px",padding:"8px 12px",background:"rgba(239,68,68,0.1)",borderRadius:"8px"},children:L}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"24px"},children:[e.jsx("button",{onClick:ve,style:{padding:"12px 24px",borderRadius:"10px",cursor:"pointer",fontWeight:700,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:"100%",background:m?"rgba(16,185,129,0.15)":"rgba(59,130,246,0.15)",color:m?"#34d399":"#60a5fa",border:"1px solid "+(m?"rgba(16,185,129,0.3)":"rgba(59,130,246,0.3)")},children:m?e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:16})," Camera Enabled"]}):e.jsxs(e.Fragment,{children:[e.jsx(ws,{size:16})," Enable Camera"]})}),e.jsxs("div",{style:{textAlign:"left",fontSize:"13px",padding:"12px 16px",background:"#0f172a",borderRadius:"10px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",color:m?"#34d399":"#94a3b8"},children:[m?e.jsx(Le,{size:14}):e.jsx(We,{size:14})," Camera access"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",color:"#94a3b8"},children:[e.jsx(ts,{size:14})," Fullscreen will activate on start"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#94a3b8"},children:[e.jsx(ba,{size:14})," Tab switches are monitored"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>{b(!1),$(null),ae(null)},style:{flex:1,padding:"12px",background:"#334155",color:"#94a3b8",border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:"Cancel"}),e.jsxs("button",{onClick:ye,disabled:!m,style:{flex:2,padding:"12px",background:m?"linear-gradient(135deg, #8b5cf6, #7c3aed)":"#334155",color:m?"white":"#64748b",border:"none",borderRadius:"10px",cursor:m?"pointer":"not-allowed",fontWeight:700,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:m?"0 2px 10px rgba(139,92,246,0.3)":"none"},children:[e.jsx(qt,{size:16})," Start Assessment"]})]})]})});if(g&&j){const E=["mcq","coding","sql","interview"],ee=E.indexOf(j.current_stage);return o==="report"?e.jsx(Xi,{attemptId:g,onBack:Se}):e.jsxs("div",{ref:ne,style:{minHeight:"100vh",background:"#0f172a",color:"#f1f5f9",display:"flex",overflow:"hidden"},children:[e.jsx("style",{children:"@keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }"}),m&&e.jsxs("div",{style:{width:"260px",minWidth:"260px",background:"#0b1120",borderRight:"1px solid #1e293b",display:"flex",flexDirection:"column",padding:"12px",gap:"10px",height:"100vh",position:"sticky",top:0},children:[e.jsxs("div",{style:{width:"100%",aspectRatio:"3/4",borderRadius:"12px",overflow:"hidden",border:"2px solid #8b5cf6",boxShadow:"0 4px 20px rgba(139,92,246,0.2)",background:"#000",position:"relative"},children:[e.jsx("video",{ref:re=>{re&&m&&(re.srcObject=m)},autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"}}),e.jsxs("div",{style:{position:"absolute",top:"6px",left:"6px",background:"rgba(239,68,68,0.9)",borderRadius:"4px",padding:"2px 8px",fontSize:"10px",color:"white",fontWeight:700,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"white",animation:"blink 1s infinite"}}),"REC"]})]}),e.jsxs("div",{style:{background:"#1e293b",borderRadius:"10px",padding:"10px",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:700,color:"#94a3b8",marginBottom:"8px"},children:[e.jsx(cr,{size:13,color:"#8b5cf6"})," Proctoring"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[e.jsxs("div",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:600,background:ce?"rgba(34,197,94,0.1)":"rgba(234,179,8,0.1)",color:ce?"#22c55e":"#eab308",border:`1px solid ${ce?"rgba(34,197,94,0.2)":"rgba(234,179,8,0.2)"}`,display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx("div",{style:{width:"5px",height:"5px",borderRadius:"50%",background:ce?"#22c55e":"#eab308",boxShadow:`0 0 6px ${ce?"#22c55e":"#eab308"}`,animation:ce?"none":"blink 1s infinite"}}),ce?"â— AI Active":"â—Œ AI Loading..."]}),e.jsxs("div",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:600,background:"rgba(16,185,129,0.1)",color:"#10b981",border:"1px solid rgba(16,185,129,0.2)",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(ws,{size:10})," Camera ON"]})]})]}),e.jsxs("div",{style:{background:"#1e293b",borderRadius:"10px",padding:"10px",border:"1px solid #334155"},children:[e.jsx("div",{style:{fontSize:"10px",fontWeight:700,color:"#64748b",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Monitoring"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"3px 0"},children:[e.jsxs("span",{style:{fontSize:"11px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(nn,{size:10})," Tab Switches"]}),e.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:N.tabSwitchCount>0?"#fbbf24":"#64748b"},children:N.tabSwitchCount})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"3px 0"},children:[e.jsxs("span",{style:{fontSize:"11px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(rn,{size:10})," Phone"]}),e.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:N.phoneDetections>0?"#fbbf24":"#64748b"},children:N.phoneDetections})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"3px 0"},children:[e.jsxs("span",{style:{fontSize:"11px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ts,{size:10})," FS Exits"]}),e.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:N.fullscreenExits>0?"#fbbf24":"#64748b"},children:N.fullscreenExits})]}),N.violationCount>0&&e.jsxs("div",{style:{marginTop:"4px",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:700,background:"rgba(239,68,68,0.1)",color:"#fca5a5",border:"1px solid rgba(239,68,68,0.2)",display:"flex",alignItems:"center",gap:"4px",justifyContent:"center"},children:[e.jsx(Be,{size:10})," ",N.violationCount," Violations"]})]})]})]}),e.jsx("div",{style:{flex:1,overflow:"auto",height:"100vh"},children:e.jsxs("div",{style:{padding:"12px 20px",paddingBottom:"80px"},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:700,color:"#f1f5f9"},children:j.test_title||j.title||"Skill Test"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[!h&&e.jsxs("button",{onClick:X,style:{padding:"6px 12px",background:"rgba(245,158,11,0.15)",border:"1px solid rgba(245,158,11,0.3)",borderRadius:"8px",cursor:"pointer",fontSize:"11px",color:"#fbbf24",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ts,{size:13})," Re-enter Fullscreen"]}),e.jsx("button",{onClick:Se,style:{padding:"6px 14px",background:"#334155",border:"1px solid #475569",borderRadius:"8px",cursor:"pointer",fontSize:"12px",color:"#94a3b8"},children:"â† Exit Test"})]})]}),e.jsx("div",{style:{display:"flex",gap:"4px",marginBottom:"8px"},children:E.map((re,Pe)=>{const we=j[`${re}_status`]||(re==="interview"?j.interview_status:"pending");let Qe="#334155";return we==="completed"||we==="passed"?Qe="#22c55e":we==="failed"?Qe="#ef4444":we==="in_progress"?Qe="#f59e0b":Pe===ee&&(Qe="#3b82f6"),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"3px"},children:[e.jsx("div",{style:{width:"100%",height:"5px",borderRadius:"3px",background:Qe}}),e.jsx("span",{style:{fontSize:"10px",fontWeight:600,textTransform:"uppercase",color:Pe===ee?"#60a5fa":"#64748b"},children:re==="mcq"?"MCQ":re.charAt(0).toUpperCase()+re.slice(1)})]},re)})}),j.proctoring_enabled!==!1&&!m&&e.jsxs("div",{style:{display:"flex",gap:"10px",padding:"8px 14px",background:"#1e293b",borderRadius:"8px",border:"1px solid #334155",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:600},children:[e.jsx(cr,{size:13,color:"#8b5cf6"}),e.jsx("span",{style:{color:"#94a3b8"},children:"Proctoring:"})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",marginLeft:"auto"},children:[e.jsxs("div",{style:{fontSize:"10px",color:"#64748b",display:"flex",alignItems:"center",gap:"3px",background:"#0f172a",padding:"3px 7px",borderRadius:"6px",border:"1px solid #334155"},children:[e.jsx(nn,{size:9})," Tabs: ",e.jsx("span",{style:{color:N.tabSwitchCount>0?"#fbbf24":"#94a3b8"},children:N.tabSwitchCount})]}),e.jsxs("div",{style:{fontSize:"10px",color:"#64748b",display:"flex",alignItems:"center",gap:"3px",background:"#0f172a",padding:"3px 7px",borderRadius:"6px",border:"1px solid #334155"},children:[e.jsx(rn,{size:9})," Phone: ",e.jsx("span",{style:{color:N.phoneDetections>0?"#fbbf24":"#94a3b8"},children:N.phoneDetections})]}),e.jsxs("div",{style:{fontSize:"10px",color:"#64748b",display:"flex",alignItems:"center",gap:"3px",background:"#0f172a",padding:"3px 7px",borderRadius:"6px",border:"1px solid #334155"},children:[e.jsx(ts,{size:9})," FS: ",e.jsx("span",{style:{color:N.fullscreenExits>0?"#fbbf24":"#94a3b8"},children:N.fullscreenExits})]})]})]})]}),o==="mcq"&&e.jsx(il,{attemptId:g,attemptData:j,onComplete:re=>q(),onFailed:()=>{O(g),y("report")}}),o==="coding"&&e.jsx(al,{attemptId:g,attemptData:j,onComplete:re=>q(),onFailed:()=>{O(g),y("report")}}),o==="sql"&&e.jsx(ol,{attemptId:g,attemptData:j,onComplete:re=>q(),onFailed:()=>{O(g),y("report")}}),o==="interview"&&e.jsx(ll,{attemptId:g,attemptData:j,onComplete:re=>q(),onFailed:()=>{O(g),y("report")}})]})}),te&&e.jsxs("div",{style:{position:"fixed",top:"24px",left:"50%",transform:"translateX(-50%)",zIndex:1e4,minWidth:"320px",maxWidth:"400px",background:te.severity==="high"?"#ef4444":"#f59e0b",color:"white",padding:"20px",borderRadius:"16px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease-out",display:"flex",gap:"16px",alignItems:"flex-start"},children:[e.jsx("style",{children:`
                            @keyframes slideIn { from { transform: translate(-50%, -40px); opacity: 0; } to { transform: translate(-50%, 0); opacity: 1; } }
                        `}),e.jsx(Be,{size:24,style:{marginTop:"2px"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:800,fontSize:"18px",marginBottom:"4px"},children:te.title}),e.jsx("div",{style:{fontSize:"14px",opacity:.9,lineHeight:"1.4"},children:te.message})]})]})]})}return e.jsxs("div",{style:{padding:"24px",maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #8b5cf6, #6d28d9)"},children:e.jsx(It,{size:22,color:"white"})}),e.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:800,color:"#f1f5f9"},children:"Skill Assessments"})]}),T&&e.jsxs("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",color:"#fca5a5",fontSize:"13px"},children:[e.jsx(Be,{size:16,style:{verticalAlign:"middle",marginRight:"6px"}}),T]}),u?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Loading available tests..."}):n.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#94a3b8"},children:[e.jsx(It,{size:48,style:{marginBottom:"12px",opacity:.5}}),e.jsx("p",{style:{fontSize:"16px",color:"#e2e8f0"},children:"No skill tests available yet"}),e.jsx("p",{style:{fontSize:"13px"},children:"Tests will appear here when your admin creates them"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:n.map(E=>{E.my_attempts?.[0];const ee=E.my_attempts?.some(we=>we.overall_status==="completed"),re=E.my_attempts?.some(we=>we.overall_status==="in_progress"),Pe=E.my_attempts?.find(we=>we.overall_status==="in_progress");return e.jsx("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"box-shadow 0.2s"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{margin:"0 0 6px",fontSize:"17px",fontWeight:700,color:"#f1f5f9"},children:E.title}),E.description&&e.jsx("p",{style:{margin:"0 0 10px",color:"#94a3b8",fontSize:"13px"},children:E.description}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",marginBottom:"10px"},children:(E.skills&&Array.isArray(E.skills)?E.skills:[]).map(we=>e.jsx("span",{style:{padding:"2px 8px",background:"rgba(139,92,246,0.15)",color:"#a78bfa",borderRadius:"12px",fontSize:"11px",border:"1px solid rgba(139,92,246,0.25)"},children:we},we))}),e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"#94a3b8",flexWrap:"wrap"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(it,{size:13})," MCQ: ",E.mcq_count," | Coding: ",E.coding_count," | SQL: ",E.sql_count," | Interview: ",E.interview_count]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ft,{size:13})," ",E.mcq_duration_minutes,"min MCQ"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ji,{size:13})," ",E.attempts_used||0,"/",E.attempt_limit," attempts"]})]}),E.my_attempts&&E.my_attempts.length>0&&e.jsxs("div",{style:{marginTop:"10px",padding:"8px 12px",background:"#0f172a",borderRadius:"8px"},children:[e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#e2e8f0"},children:"Previous Attempts:"}),e.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"4px",flexWrap:"wrap"},children:E.my_attempts.map(we=>e.jsxs("button",{onClick:()=>{we.overall_status==="in_progress"?st(we.id):z(we.id)},style:{padding:"4px 10px",borderRadius:"16px",fontSize:"11px",cursor:"pointer",border:"none",fontWeight:600,background:we.overall_status==="completed"?"rgba(16,185,129,0.15)":we.overall_status==="failed"?"rgba(239,68,68,0.15)":"rgba(245,158,11,0.15)",color:we.overall_status==="completed"?"#34d399":we.overall_status==="failed"?"#fca5a5":"#fbbf24"},children:["#",we.attempt_number,": ",we.overall_status==="in_progress"?`In Progress (${we.current_stage})`:we.overall_status,we.overall_status!=="in_progress"&&` - MCQ: ${Math.round(we.mcq_score)}%`]},we.id))})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginLeft:"16px"},children:[re&&e.jsxs("button",{onClick:()=>st(Pe.id),style:{padding:"10px 20px",background:"#f59e0b",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},children:[e.jsx(qt,{size:16})," Resume"]}),E.can_attempt&&e.jsxs("button",{onClick:()=>Ve(E.id),style:{padding:"10px 20px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},children:[e.jsx(Ls,{size:16})," ",E.attempts_used>0?"Retry":"Start Test"]}),!E.can_attempt&&!re&&e.jsx("span",{style:{fontSize:"12px",color:"#9ca3af",fontStyle:"italic"},children:ee?"âœ“ Completed":"No attempts left"})]})]})},E.id)})})]})}const cl=({onResultsChange:r})=>{const{theme:n}=i.useContext(mr),[d,u]=i.useState(""),[c,g]=i.useState({difficulty:"all",category:"all",status:"all",timeRange:"all"}),[f,j]=i.useState([]),[p,o]=i.useState(!1),y=localStorage.getItem("authToken"),T=async()=>{o(!0);try{const h=new URLSearchParams({q:d,difficulty:c.difficulty,category:c.category,status:c.status,timeRange:c.timeRange}),W=await fetch(`/api/search?${h}`,{headers:{Authorization:`Bearer ${y}`}});if(W.ok){const m=await W.json();j(m.results||[]),r?.(m.results)}}catch(h){console.error("Search error:",h)}finally{o(!1)}},R=()=>{const h=f.map(L=>`${L.title},${L.category},${L.difficulty},${L.status}`).join(`
`),W=new Blob([h],{type:"text/csv"}),m=window.URL.createObjectURL(W),k=document.createElement("a");k.href=m,k.download="search-results.csv",k.click()};return e.jsxs("div",{className:`advanced-search ${n}`,children:[e.jsx("div",{className:"search-header",children:e.jsxs("h2",{children:[e.jsx($r,{size:24}),"Advanced Search"]})}),e.jsxs("div",{className:"search-container",children:[e.jsxs("div",{className:"search-input-group",children:[e.jsx("input",{type:"text",placeholder:"Search problems, categories, or users...",value:d,onChange:h=>u(h.target.value),onKeyPress:h=>h.key==="Enter"&&T(),className:"search-input"}),e.jsx("button",{className:"search-btn",onClick:T,children:e.jsx($r,{size:20})})]}),e.jsxs("div",{className:"filters",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Difficulty"}),e.jsxs("select",{value:c.difficulty,onChange:h=>g({...c,difficulty:h.target.value}),children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"easy",children:"Beginner"}),e.jsx("option",{value:"medium",children:"Intermediate"}),e.jsx("option",{value:"hard",children:"Advanced"}),e.jsx("option",{value:"expert",children:"Expert"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Category"}),e.jsxs("select",{value:c.category,onChange:h=>g({...c,category:h.target.value}),children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"arrays",children:"Arrays"}),e.jsx("option",{value:"strings",children:"Strings"}),e.jsx("option",{value:"trees",children:"Trees"}),e.jsx("option",{value:"graphs",children:"Graphs"}),e.jsx("option",{value:"dp",children:"Dynamic Programming"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:c.status,onChange:h=>g({...c,status:h.target.value}),children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"solved",children:"Solved"}),e.jsx("option",{value:"attempted",children:"Attempted"}),e.jsx("option",{value:"unsolved",children:"Not Solved"})]})]})]})]}),e.jsxs("div",{className:"search-results",children:[e.jsxs("div",{className:"results-header",children:[e.jsxs("span",{children:[f.length," results found"]}),f.length>0&&e.jsxs("button",{className:"export-btn",onClick:R,children:[e.jsx(Fr,{size:16}),"Export"]})]}),p?e.jsx("div",{className:"loading",children:"Searching..."}):f.length>0?e.jsx("div",{className:"results-list",children:f.map((h,W)=>e.jsxs("div",{className:"search-result",children:[e.jsx("div",{className:"result-title",children:h.title}),e.jsxs("div",{className:"result-meta",children:[e.jsx("span",{className:"badge",children:h.category}),e.jsx("span",{className:"badge difficulty",children:h.difficulty}),e.jsx("span",{className:"badge status",children:h.status})]}),e.jsx("div",{className:"result-description",children:h.description})]},W))}):e.jsx("div",{className:"no-results",children:"No results found"})]})]})},pl=()=>{const{theme:r}=i.useContext(mr),{user:n}=zr(),[d,u]=i.useState([]),[c,g]=i.useState(!0),f=localStorage.getItem("authToken");i.useEffect(()=>{j()},[]);const j=async()=>{try{const p=await fetch(`/api/recommendations/ai?userId=${n?.id}`,{headers:{Authorization:`Bearer ${f}`}});if(p.ok){const o=await p.json();u(o.recommendations||[])}}catch(p){console.error("Error loading recommendations:",p)}finally{g(!1)}};return e.jsxs("div",{className:`ai-recommendations ${r}`,children:[e.jsxs("div",{className:"rec-header",children:[e.jsxs("h2",{children:[e.jsx(yr,{size:24}),"AI-Powered Recommendations"]}),e.jsx("p",{children:"Personalized problem suggestions based on your learning patterns"})]}),c?e.jsx("div",{className:"loading",children:"Analyzing your performance..."}):e.jsx("div",{className:"recommendations-grid",children:d.length>0?d.map((p,o)=>e.jsxs("div",{className:`rec-card priority-${p.priority}`,children:[e.jsx("div",{className:"rec-icon",children:p.type==="skill-gap"?"ðŸ“š":"âš¡"}),e.jsx("div",{className:"rec-title",children:p.title}),e.jsx("div",{className:"rec-reason",children:p.reason}),e.jsx("div",{className:"rec-problems",children:p.suggestedProblems?.map((y,T)=>e.jsx("div",{className:"problem-chip",children:y},T))}),e.jsxs("button",{className:"rec-action",children:["Start Learning",e.jsx(Ls,{size:14})]})]},o)):e.jsx("div",{className:"no-recs",children:"Keep solving problems to get personalized recommendations!"})})]})},ul=({problemId:r})=>{const{theme:n}=i.useContext(mr),{user:d}=zr(),[u,c]=i.useState([]),[g,f]=i.useState(!1),[j,p]=i.useState(5),o=localStorage.getItem("authToken"),y=async()=>{f(!0);try{const T=await fetch("/api/ai/generate-test-cases",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({problem_id:r,count:j})});if(T.ok){const R=await T.json();c(R.testCases||[])}}catch(T){console.error("Error generating test cases:",T)}finally{f(!1)}};return e.jsxs("div",{className:`ai-test-case-gen ${n}`,children:[e.jsx("div",{className:"gen-header",children:e.jsxs("h3",{children:[e.jsx(Ci,{size:20}),"AI Test Case Generator"]})}),e.jsxs("div",{className:"gen-controls",children:[e.jsxs("div",{className:"control-group",children:[e.jsx("label",{children:"Number of Test Cases:"}),e.jsx("input",{type:"number",min:"1",max:"20",value:j,onChange:T=>p(parseInt(T.target.value))})]}),e.jsxs("button",{className:"gen-btn",onClick:y,disabled:g,children:[e.jsx(Tn,{size:16}),g?"Generating...":"Generate Test Cases"]})]}),u.length>0&&e.jsx("div",{className:"test-cases-list",children:u.map((T,R)=>e.jsxs("div",{className:"test-case",children:[e.jsxs("div",{className:"test-header",children:[e.jsxs("span",{className:"test-num",children:["Test Case ",R+1]}),e.jsxs("span",{className:"test-status",children:[e.jsx(Le,{size:14}),"Generated by AI"]})]}),e.jsxs("div",{className:"test-input",children:[e.jsx("strong",{children:"Input:"}),e.jsx("pre",{children:T.input})]}),e.jsxs("div",{className:"test-output",children:[e.jsx("strong",{children:"Expected Output:"}),e.jsx("pre",{children:T.expectedOutput})]}),T.explanation&&e.jsxs("div",{className:"test-explanation",children:[e.jsx("strong",{children:"Explanation:"}),e.jsx("p",{children:T.explanation})]})]},R))})]})},ml=({submissionId:r,problemId:n})=>{const{theme:d}=i.useContext(mr),{user:u}=zr(),[c,g]=i.useState([]),[f,j]=i.useState(""),[p,o]=i.useState(null),[y,T]=i.useState(!0),R=localStorage.getItem("authToken");i.useEffect(()=>{h()},[r]);const h=async()=>{try{const k=await fetch(`/api/submissions/${r}/reviews`,{headers:{Authorization:`Bearer ${R}`}});if(k.ok){const L=await k.json();g(L)}}catch(k){console.error("Error loading comments:",k)}finally{T(!1)}},W=async()=>{if(f.trim())try{const k=await fetch(`/api/submissions/${r}/reviews`,{method:"POST",headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"},body:JSON.stringify({content:f,line_number:p,comment_type:"review"})});if(k.ok){const L=await k.json();g([...c,L]),j(""),o(null)}}catch(k){console.error("Error submitting comment:",k)}},m=async k=>{try{(await fetch(`/api/reviews/${k}`,{method:"DELETE",headers:{Authorization:`Bearer ${R}`}})).ok&&g(c.filter(D=>D.id!==k))}catch(L){console.error("Error deleting comment:",L)}};return e.jsxs("div",{className:`code-review-panel ${d}`,children:[e.jsxs("div",{className:"review-header",children:[e.jsxs("h3",{children:[e.jsx(ra,{size:20}),"Code Review"]}),e.jsx("span",{className:"comment-count",children:c.length})]}),y?e.jsx("div",{className:"loading",children:"Loading reviews..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"comments-list",children:c.length===0?e.jsx("div",{className:"no-comments",children:"No comments yet"}):c.map(k=>e.jsxs("div",{className:"comment-item",children:[k.line_number&&e.jsxs("div",{className:"line-badge",children:["Line ",k.line_number]}),e.jsxs("div",{className:"comment-header",children:[e.jsx("strong",{children:k.reviewer_name}),e.jsx("span",{className:"comment-date",children:new Date(k.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"comment-content",children:k.content}),k.reviewer_id===u?.id&&e.jsx("button",{className:"delete-btn",onClick:()=>m(k.id),children:e.jsx(ls,{size:14})})]},k.id))}),e.jsxs("div",{className:"comment-input-area",children:[e.jsx("textarea",{placeholder:"Add a code review comment...",value:f,onChange:k=>j(k.target.value),className:"comment-textarea"}),p&&e.jsxs("div",{className:"line-selection",children:["Commenting on line ",p,e.jsx("button",{onClick:()=>o(null),children:"Clear"})]}),e.jsxs("button",{className:"submit-comment-btn",onClick:W,disabled:!f.trim(),children:[e.jsx(Mt,{size:16}),"Post Review"]})]})]})]})},gl=()=>{const{theme:r}=i.useContext(mr),[n,d]=i.useState(!1),[u,c]=i.useState("performance"),[g,f]=i.useState("month"),j=localStorage.getItem("authToken"),p=async o=>{d(!0);try{const y=await fetch(`/api/reports/export?type=${u}&range=${g}&format=${o}`,{headers:{Authorization:`Bearer ${j}`}});if(y.ok){const T=await y.blob(),R=window.URL.createObjectURL(T),h=document.createElement("a");h.href=R,h.download=`report-${u}-${o}`,h.click()}}catch(y){console.error("Export error:",y)}finally{d(!1)}};return e.jsxs("div",{className:`export-reports ${r}`,children:[e.jsx("div",{className:"export-header",children:e.jsxs("h2",{children:[e.jsx(Fr,{size:24}),"Export Reports"]})}),e.jsxs("div",{className:"export-options",children:[e.jsxs("div",{className:"option-group",children:[e.jsx("label",{children:"Report Type"}),e.jsxs("select",{value:u,onChange:o=>c(o.target.value),children:[e.jsx("option",{value:"performance",children:"Performance Report"}),e.jsx("option",{value:"progress",children:"Progress Report"}),e.jsx("option",{value:"analytics",children:"Analytics Report"}),e.jsx("option",{value:"achievements",children:"Achievements Report"})]})]}),e.jsxs("div",{className:"option-group",children:[e.jsx("label",{children:"Date Range"}),e.jsxs("select",{value:g,onChange:o=>f(o.target.value),children:[e.jsx("option",{value:"week",children:"Last 7 Days"}),e.jsx("option",{value:"month",children:"Last 30 Days"}),e.jsx("option",{value:"quarter",children:"Last 90 Days"}),e.jsx("option",{value:"year",children:"Last Year"}),e.jsx("option",{value:"alltime",children:"All-Time"})]})]})]}),e.jsxs("div",{className:"export-formats",children:[e.jsxs("button",{className:"export-btn pdf",onClick:()=>p("pdf"),disabled:n,children:[e.jsx(St,{size:20}),"Download PDF"]}),e.jsxs("button",{className:"export-btn excel",onClick:()=>p("xlsx"),disabled:n,children:[e.jsx(ur,{size:20}),"Download Excel"]}),e.jsxs("button",{className:"export-btn csv",onClick:()=>p("csv"),disabled:n,children:[e.jsx(Fr,{size:20}),"Download CSV"]})]}),n&&e.jsx("div",{className:"exporting",children:"Generating report..."}),e.jsxs("div",{className:"report-info",children:[e.jsx("h4",{children:"Report Includes:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"âœ“ Problems solved and success rate"}),e.jsx("li",{children:"âœ“ Time spent and skill progression"}),e.jsx("li",{children:"âœ“ Achievements and badges earned"}),e.jsx("li",{children:"âœ“ Category-wise performance"}),e.jsx("li",{children:"âœ“ Ranking and percentile"}),e.jsx("li",{children:"âœ“ Detailed analytics and trends"})]})]})]})},xl=({submissionId:r,code:n})=>{const{theme:d}=i.useContext(mr),[u,c]=i.useState(null),[g,f]=i.useState(!1),j=localStorage.getItem("authToken"),p=async()=>{f(!0);try{const o=await fetch("/api/plagiarism/check",{method:"POST",headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"},body:JSON.stringify({submission_id:r,code:n})});if(o.ok){const y=await o.json();c(y)}}catch(o){console.error("Error checking plagiarism:",o)}finally{f(!1)}};return e.jsxs("div",{className:`plagiarism-checker ${d}`,children:[e.jsx("div",{className:"checker-header",children:e.jsxs("h3",{children:[e.jsx(Be,{size:20}),"Plagiarism Check"]})}),u?e.jsxs("div",{className:`plagiarism-result ${u.isPlagiarized?"warning":"safe"}`,children:[e.jsx("div",{className:"result-icon",children:u.isPlagiarized?e.jsx(Be,{size:32}):e.jsx(Le,{size:32})}),e.jsxs("div",{className:"result-content",children:[e.jsx("h4",{children:u.isPlagiarized?"Plagiarism Detected":"No Plagiarism Detected"}),e.jsxs("div",{className:"similarity-score",children:["Similarity Score: ",u.similarityScore,"%"]}),u.matches?.length>0&&e.jsxs("div",{className:"matches",children:[e.jsx("h5",{children:"Matching Sources:"}),u.matches.map((o,y)=>e.jsxs("div",{className:"match",children:[e.jsx("span",{children:o.source}),e.jsxs("span",{className:"match-percent",children:[o.percentage,"%"]})]},y))]})]}),e.jsx("button",{className:"recheck-btn",onClick:()=>c(null),children:"Recheck"})]}):e.jsx("button",{className:"check-btn",onClick:p,disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx(_i,{size:16,className:"spinning"}),"Checking..."]}):"Run Plagiarism Check"})]})},fl=()=>{const{theme:r}=i.useContext(mr),{user:n}=zr(),[d,u]=i.useState([]),[c,g]=i.useState(null),[f,j]=i.useState(!0),p=localStorage.getItem("authToken");i.useEffect(()=>{o()},[]);const o=async()=>{try{const T=await fetch(`/api/mentors/matching?studentId=${n?.id}`,{headers:{Authorization:`Bearer ${p}`}});if(T.ok){const R=await T.json();u(R.mentors||[])}}catch(T){console.error("Error loading mentors:",T)}finally{j(!1)}},y=async T=>{try{(await fetch("/api/mentor-requests",{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify({mentor_id:T})})).ok&&alert("Request sent to mentor!")}catch(R){console.error("Error requesting mentor:",R)}};return e.jsxs("div",{className:`mentor-matching ${r}`,children:[e.jsxs("div",{className:"matching-header",children:[e.jsxs("h2",{children:[e.jsx(Or,{size:24}),"Find Your Mentor"]}),e.jsx("p",{children:"Get matched with experienced mentors based on your learning goals"})]}),f?e.jsx("div",{className:"loading",children:"Finding mentors for you..."}):e.jsx("div",{className:"mentors-grid",children:d.length>0?d.map(T=>e.jsxs("div",{className:`mentor-card ${c?.id===T.id?"selected":""}`,children:[e.jsxs("div",{className:"mentor-header",children:[e.jsx("img",{src:T.avatar,alt:T.name,className:"mentor-avatar"}),e.jsxs("div",{className:"mentor-info",children:[e.jsx("h3",{children:T.name}),e.jsx("div",{className:"mentor-title",children:T.specialization})]})]}),e.jsxs("div",{className:"mentor-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx(va,{size:16}),e.jsxs("span",{children:[T.rating,"/5 (",T.reviewCount," reviews)"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx(Or,{size:16}),e.jsxs("span",{children:[T.studentCount," students"]})]})]}),e.jsx("div",{className:"mentor-bio",children:T.bio}),e.jsx("div",{className:"mentor-skills",children:T.expertiseAreas?.map((R,h)=>e.jsx("span",{className:"skill-tag",children:R},h))}),e.jsxs("div",{className:"mentor-actions",children:[e.jsxs("button",{className:"msg-btn",children:[e.jsx(Pr,{size:16}),"Message"]}),e.jsx("button",{className:"request-btn",onClick:()=>y(T.id),children:"Request Mentoring"})]}),e.jsxs("div",{className:"match-score",children:[T.matchScore,"% compatibility"]})]},T.id)):e.jsx("div",{className:"no-mentors",children:"No mentors available right now"})})]})},hl=()=>{const{theme:r}=i.useContext(mr),{user:n}=zr(),[d,u]=i.useState({}),[c,g]=i.useState(new Date),[f,j]=i.useState(!0),p=localStorage.getItem("authToken"),o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],y=["January","February","March","April","May","June","July","August","September","October","November","December"];i.useEffect(()=>{T()},[c]);const T=async()=>{try{const D=await fetch(`/api/users/${n?.id}/availability`,{headers:{Authorization:`Bearer ${p}`}});if(D.ok){const S=await D.json();u(S.slots||{})}}catch(D){console.error("Error loading availability:",D)}finally{j(!1)}},R=D=>{const S=D.toISOString().split("T")[0];u(b=>({...b,[S]:!b[S]}))},h=async()=>{try{(await fetch(`/api/users/${n?.id}/availability`,{method:"PUT",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify({slots:d})})).ok&&alert("Availability updated!")}catch(D){console.error("Error saving availability:",D)}},W=D=>new Date(D.getFullYear(),D.getMonth()+1,0).getDate(),m=D=>new Date(D.getFullYear(),D.getMonth(),1).getDay(),L=(()=>{const D=W(c),S=m(c),b=[];for(let I=0;I<S;I++)b.push(null);for(let I=1;I<=D;I++)b.push(new Date(c.getFullYear(),c.getMonth(),I));return b})();return e.jsxs("div",{className:`availability-calendar ${r}`,children:[e.jsxs("div",{className:"calendar-header",children:[e.jsxs("h2",{children:[e.jsx(In,{size:24}),"Set Availability"]}),e.jsx("p",{children:"Mark your available slots for mentoring sessions"})]}),e.jsxs("div",{className:"calendar-nav",children:[e.jsx("button",{onClick:()=>g(new Date(c.getFullYear(),c.getMonth()-1)),children:"â† Previous"}),e.jsxs("h3",{children:[y[c.getMonth()]," ",c.getFullYear()]}),e.jsx("button",{onClick:()=>g(new Date(c.getFullYear(),c.getMonth()+1)),children:"Next â†’"})]}),e.jsxs("div",{className:"calendar-grid",children:[e.jsx("div",{className:"weekdays",children:o.map(D=>e.jsx("div",{className:"weekday",children:D},D))}),e.jsx("div",{className:"dates",children:L.map((D,S)=>e.jsx("div",{className:`date-cell ${D?"active":"empty"} ${D&&d[D.toISOString().split("T")[0]]?"available":""}`,onClick:()=>D&&R(D),children:D?.getDate()},S))})]}),e.jsxs("div",{className:"calendar-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-box empty"}),e.jsx("span",{children:"Unavailable"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-box available"}),e.jsx("span",{children:"Available"})]})]}),e.jsxs("button",{className:"save-btn",onClick:h,children:[e.jsx(Ei,{size:16}),"Save Availability"]})]})};function bl(){const[r,n]=i.useState("all"),d=[{id:1,category:"learning",title:"Advanced Search",description:"Search problems by title, difficulty, and tags with advanced filtering",icon:$r,path:"/student/search",color:"#3b82f6"},{id:2,category:"learning",title:"AI Recommendations",description:"Get personalized problem recommendations based on your skills",icon:tr,path:"/student/recommendations",color:"#8b5cf6"},{id:3,category:"learning",title:"AI Test Case Generator",description:"Auto-generate test cases for your coding problems",icon:St,path:"/student/test-generator",color:"#06b6d4"},{id:4,category:"review",title:"Code Reviews",description:"Detailed code reviews with line-by-line feedback and comments",icon:kr,path:"/student/code-reviews",color:"#10b981"},{id:5,category:"review",title:"Plagiarism Detection",description:"Check your submissions for plagiarism and code similarities",icon:Be,path:"/student/plagiarism",color:"#f59e0b"},{id:6,category:"collaboration",title:"Mentor Matching",description:"Find and connect with the perfect mentor for your goals",icon:Or,path:"/student/mentor-matching",color:"#ec4899"},{id:7,category:"collaboration",title:"Direct Messaging",description:"Real-time direct messaging with mentors and students",icon:Pr,path:"/student/messaging",color:"#14b8a6"},{id:8,category:"collaboration",title:"Availability Calendar",description:"Set your availability and schedule sessions with mentors",icon:ft,path:"/student/availability",color:"#f97316"},{id:9,category:"analytics",title:"Skill Badges",description:"Earn and showcase skill badges for your achievements",icon:_t,path:"/student/badges",color:"#6366f1"},{id:10,category:"analytics",title:"Performance Analytics",description:"Detailed analytics dashboard tracking your progress",icon:qr,path:"/student/analytics",color:"#22c55e"},{id:11,category:"analytics",title:"Leaderboards",description:"Compete with peers and view global rankings",icon:er,path:"/student/leaderboard",color:"#f1941f"},{id:12,category:"analytics",title:"Export Reports",description:"Download comprehensive reports in PDF format",icon:Fr,path:"/student/reports",color:"#8b5cf6"},{id:13,category:"learning",title:"Skill Tests",description:"Test your specific skills with targeted assessments",icon:it,path:"/student/skill-tests",color:"#3b82f6"},{id:14,category:"learning",title:"Aptitude Tests",description:"Comprehensive aptitude assessments for career readiness",icon:It,path:"/student/aptitude",color:"#06b6d4"},{id:15,category:"learning",title:"Global Tests",description:"Complete coding tests with proctoring and time limits",icon:wr,path:"/student/global-tests",color:"#10b981"},{id:16,category:"analytics",title:"Settings",description:"Customize your profile, preferences, and notifications",icon:Zi,path:"/student/settings",color:"#94a3b8"}],u=[{id:"all",label:"All Features"},{id:"learning",label:"Learning"},{id:"review",label:"Reviews"},{id:"collaboration",label:"Collaboration"},{id:"analytics",label:"Analytics"}],c=r==="all"?d:d.filter(g=>g.category===r);return e.jsxs("div",{style:Ne.container,children:[e.jsxs("div",{style:Ne.header,children:[e.jsx("h1",{style:Ne.title,children:"ðŸš€ Mentor Hub - 16+ Features"}),e.jsx("p",{style:Ne.subtitle,children:"Discover all available features on your personalized dashboard"})]}),e.jsx("div",{style:Ne.filterContainer,children:u.map(g=>e.jsx("button",{onClick:()=>n(g.id),style:{...Ne.filterBtn,...r===g.id?Ne.filterBtnActive:{}},children:g.label},g.id))}),e.jsx("div",{style:Ne.grid,children:c.map((g,f)=>{const j=g.icon;return e.jsx(Er,{to:g.path,style:{textDecoration:"none"},children:e.jsxs("div",{style:Ne.card,onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-8px)",p.currentTarget.style.boxShadow="0 20px 40px rgba(0,0,0,0.15)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{...Ne.iconContainer,backgroundColor:g.color+"15",borderColor:g.color+"40"},children:e.jsx(j,{size:32,style:{color:g.color}})}),e.jsx("h3",{style:Ne.cardTitle,children:g.title}),e.jsx("p",{style:Ne.cardDescription,children:g.description}),e.jsxs("div",{style:Ne.cardFooter,children:[e.jsx("span",{style:Ne.badge,children:g.category}),e.jsx("span",{style:Ne.arrow,children:"â†’"})]})]})},g.id)})}),e.jsxs("div",{style:Ne.quickAccessSection,children:[e.jsx("h2",{style:Ne.quickAccessTitle,children:"ðŸ“Œ Quick Access"}),e.jsxs("div",{style:Ne.quickAccessGrid,children:[e.jsx(Er,{to:"/student/dashboard",style:Ne.quickLink,children:e.jsx("span",{children:"ðŸ“Š Dashboard"})}),e.jsx(Er,{to:"/student/tasks",style:Ne.quickLink,children:e.jsx("span",{children:"ðŸ“ Tasks"})}),e.jsx(Er,{to:"/student/assignments",style:Ne.quickLink,children:e.jsx("span",{children:"ðŸ’» Assignments"})}),e.jsx(Er,{to:"/student/submissions",style:Ne.quickLink,children:e.jsx("span",{children:"âœ… Submissions"})})]})]}),e.jsxs("div",{style:Ne.statsSection,children:[e.jsxs("div",{style:Ne.stat,children:[e.jsx("div",{style:Ne.statNumber,children:"16+"}),e.jsx("div",{style:Ne.statLabel,children:"Features"})]}),e.jsxs("div",{style:Ne.stat,children:[e.jsx("div",{style:Ne.statNumber,children:"100%"}),e.jsx("div",{style:Ne.statLabel,children:"Functional"})]}),e.jsxs("div",{style:Ne.stat,children:[e.jsx("div",{style:Ne.statNumber,children:"24/7"}),e.jsx("div",{style:Ne.statLabel,children:"Available"})]}),e.jsxs("div",{style:Ne.stat,children:[e.jsx("div",{style:Ne.statNumber,children:"âˆž"}),e.jsx("div",{style:Ne.statLabel,children:"Possibilities"})]})]})]})}const Ne={container:{maxWidth:"1400px",margin:"0 auto",padding:"40px 20px",backgroundColor:"#f8fafc",minHeight:"100vh"},header:{textAlign:"center",marginBottom:"50px"},title:{fontSize:"2.5rem",fontWeight:"bold",color:"#1e293b",marginBottom:"10px"},subtitle:{fontSize:"1.1rem",color:"#64748b",marginBottom:"20px"},filterContainer:{display:"flex",gap:"10px",justifyContent:"center",marginBottom:"40px",flexWrap:"wrap"},filterBtn:{padding:"8px 16px",border:"2px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#fff",cursor:"pointer",fontWeight:"500",transition:"all 0.3s ease",color:"#64748b"},filterBtnActive:{backgroundColor:"#3b82f6",color:"#fff",borderColor:"#3b82f6"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"24px",marginBottom:"50px"},card:{backgroundColor:"#fff",borderRadius:"12px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease",cursor:"pointer",display:"flex",flexDirection:"column"},iconContainer:{width:"56px",height:"56px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",border:"2px solid"},cardTitle:{fontSize:"1.2rem",fontWeight:"bold",color:"#1e293b",marginBottom:"8px"},cardDescription:{fontSize:"0.95rem",color:"#64748b",marginBottom:"16px",flex:1},cardFooter:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"12px",borderTop:"1px solid #e2e8f0"},badge:{fontSize:"0.75rem",padding:"4px 8px",backgroundColor:"#f1f5f9",borderRadius:"4px",color:"#64748b",textTransform:"capitalize",fontWeight:"bold"},arrow:{color:"#3b82f6",fontWeight:"bold",fontSize:"1.2rem"},quickAccessSection:{backgroundColor:"#fff",borderRadius:"12px",padding:"30px",marginBottom:"40px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},quickAccessTitle:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b",marginBottom:"20px"},quickAccessGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px"},quickLink:{padding:"16px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",textDecoration:"none",borderRadius:"8px",textAlign:"center",fontWeight:"500",transition:"all 0.3s ease",cursor:"pointer","&:hover":{transform:"translateY(-4px)"}},statsSection:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"20px",marginTop:"40px"},stat:{backgroundColor:"#fff",borderRadius:"12px",padding:"24px",textAlign:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},statNumber:{fontSize:"2.5rem",fontWeight:"bold",background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"8px"},statLabel:{fontSize:"1rem",color:"#64748b",fontWeight:"500"}},Bs="http://localhost:3000/api";function yl({limit:r=100}){const[n,d]=i.useState([]),[u,c]=i.useState(!0),[g,f]=i.useState(null);i.useEffect(()=>{j()},[r]);const j=async()=>{try{c(!0);const y=await oe.get(`${Bs}/gamification/leaderboard?limit=${r}`);d(y.data.leaderboard),f(null)}catch(y){f(y.response?.data?.error||"Failed to fetch leaderboard"),console.error("Error fetching leaderboard:",y)}finally{c(!1)}},p=y=>{switch(y){case 1:return"ðŸ¥‡";case 2:return"ðŸ¥ˆ";case 3:return"ðŸ¥‰";default:return y}},o=y=>y>=10?"#FFD700":y>=5?"#C0C0C0":"#CD7F32";return u?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("div",{style:{fontSize:"1.5rem",color:"var(--text-muted)"},children:"Loading leaderboard..."})}):g?e.jsxs("div",{style:{padding:"2rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",color:"#ef4444"},children:["Error: ",g]}):!n||n.length===0?e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"2rem"},children:[e.jsx(er,{size:24,style:{color:"#f59e0b"}}),e.jsx("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Leaderboard"})]}),e.jsxs("div",{style:{padding:"3rem 2rem",textAlign:"center",background:"var(--bg-card)",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[e.jsx(er,{size:48,style:{color:"var(--text-muted)",marginBottom:"1rem",opacity:.5}}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"1.1rem",margin:0},children:"No leaderboard entries yet"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem",marginTop:"0.5rem"},children:"Start solving problems and completing tests to earn points!"})]})]}):e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"2rem"},children:[e.jsx(er,{size:24,style:{color:"#f59e0b"}}),e.jsx("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Leaderboard"})]}),e.jsx("div",{style:{overflowX:"auto",borderRadius:"12px",border:"1px solid var(--border-color)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"var(--bg-card)"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"linear-gradient(135deg, var(--bg-dark), var(--bg-secondary))",borderBottom:"2px solid var(--border-color)"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:700,color:"var(--primary)"},children:"Rank"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:700,color:"var(--primary)"},children:"Student"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:700,color:"var(--primary)"},children:"Level"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:700,color:"var(--primary)"},children:"Points"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:700,color:"var(--primary)"},children:"Streak"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:700,color:"var(--primary)"},children:"Badges"})]})}),e.jsx("tbody",{children:n.map((y,T)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)",backgroundColor:y.rank<=3?"rgba(245, 158, 11, 0.05)":"transparent",transition:"all 0.2s"},children:[e.jsx("td",{style:{padding:"1rem",fontWeight:700,fontSize:"1.2rem",color:o(y.level)},children:p(y.rank)}),e.jsx("td",{style:{padding:"1rem",fontWeight:600},children:y.name||y.email}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("span",{style:{background:`linear-gradient(135deg, ${o(y.level)}, ${o(y.level)}aa)`,color:"white",padding:"0.4rem 0.8rem",borderRadius:"20px",fontWeight:700,fontSize:"0.9rem"},children:["Lvl ",y.level]})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center",fontWeight:700,color:"var(--primary)"},children:y.total_points.toLocaleString()}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.3rem",background:"rgba(239, 68, 68, 0.1)",padding:"0.4rem 0.8rem",borderRadius:"20px",color:"#ef4444",fontWeight:700},children:[e.jsx(yr,{size:14}),y.current_streak||0]})}),e.jsxs("td",{style:{padding:"1rem",textAlign:"center",fontWeight:700},children:[y.badge_count||0," ðŸ…"]})]},y.student_id))})]})})]})}function jl({studentId:r}){const[n,d]=i.useState([]),[u,c]=i.useState(!0);i.useEffect(()=>{g()},[r]);const g=async()=>{try{const f=await oe.get(`${Bs}/gamification/achievements/${r}`);d(f.data.achievements||[])}catch(f){console.error("Error fetching achievements:",f),d([])}finally{c(!1)}};return u?e.jsx("div",{children:"Loading achievements..."}):!n||n.length===0?e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"1.5rem"},children:[e.jsx(_t,{size:20,style:{color:"#f59e0b"}}),"Recent Achievements"]}),e.jsx("p",{style:{color:"var(--text-muted)",textAlign:"center",padding:"1rem"},children:"No achievements yet. Keep learning!"})]}):e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"1.5rem"},children:[e.jsx(_t,{size:20,style:{color:"#f59e0b"}}),"Recent Achievements"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"1rem"},children:n.slice(0,8).map((f,j)=>e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"var(--bg-card)",borderRadius:"12px",border:"2px solid var(--border-color)",transition:"all 0.2s"},children:[e.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:f.badge_icon||"ðŸ…"}),e.jsx("div",{style:{fontSize:"0.85rem",fontWeight:600,color:"var(--text-main)",marginBottom:"0.3rem"},children:f.badge_name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:new Date(f.earned_at).toLocaleDateString()})]},j))})]})}function vl({studentId:r}){const[n,d]=i.useState(null),[u,c]=i.useState(!0);i.useEffect(()=>{g()},[r]);const g=async()=>{try{const j=await oe.get(`${Bs}/gamification/student/${r}`);d(j.data)}catch(j){console.error("Error fetching profile:",j),d({level:1,total_points:0,current_xp:0,next_level_xp:1e3,current_streak:0,longest_streak:0,badges:[]})}finally{c(!1)}};if(u)return e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading profile..."});if(!n)return e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No profile data available"});const f=n.next_level_xp?n.current_xp/n.next_level_xp*100:0;return e.jsxs("div",{style:{background:"linear-gradient(135deg, var(--primary), #6366f1)",color:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 8px 20px rgba(59, 130, 246, 0.3)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:["Level ",n.level]}),e.jsxs("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:[n.total_points.toLocaleString()," Points"]})]}),e.jsx("div",{style:{textAlign:"right",fontSize:"2rem"},children:"â­"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.3rem",fontSize:"0.85rem"},children:[e.jsx("span",{children:"Next Level Progress"}),e.jsxs("span",{children:[n.current_xp," / ",n.next_level_xp," XP"]})]}),e.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(255,255,255,0.2)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${f}%`,height:"100%",background:"rgba(255,255,255,0.8)",transition:"width 0.3s"}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginTop:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Current Streak"}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700},children:[n.current_streak||0," ðŸ”¥"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Longest Streak"}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700},children:[n.longest_streak||0," ðŸ†"]})]})]}),n.badges&&n.badges.length>0&&e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginBottom:"0.5rem"},children:["Badges (",n.badges.length,")"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[n.badges.slice(0,5).map((j,p)=>e.jsx("span",{title:j.description,style:{fontSize:"1.5rem",cursor:"pointer",opacity:.9,transition:"all 0.2s"},children:j.icon_url||"ðŸ…"},p)),n.badges.length>5&&e.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.3rem 0.6rem",borderRadius:"12px",fontSize:"0.8rem"},children:["+",n.badges.length-5]})]})]})]})}const Sl="http://localhost:3000/api";function wl({studentId:r}){const[n,d]=i.useState(null),[u,c]=i.useState(!0);i.useEffect(()=>{g()},[r]);const g=async()=>{try{const o=await oe.get(`${Sl}/analytics/student/${r}`);d(o.data)}catch(o){console.error("Error fetching analytics:",o),d({risk_score:0,at_risk:!1,problem_completion_rate:0,average_test_score:0,prediction_confidence:0,total_problems:0,total_tests:0})}finally{c(!1)}};if(u)return e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"var(--text-muted)"},children:"Loading risk data..."});if(!n)return e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"var(--text-muted)"},children:"No analytics data"});const f=o=>o>75?"#ef4444":o>50?"#f59e0b":o>25?"#eab308":"#10b981",j=o=>o>75?"CRITICAL":o>50?"HIGH":o>25?"MEDIUM":"LOW",p=Number(n?.risk_score)||0;return e.jsxs("div",{style:{position:"relative",background:`linear-gradient(135deg, ${f(p)}22, ${f(p)}11)`,border:`2px solid ${f(p)}`,borderRadius:"12px",padding:"1.5rem",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"100px",height:"100px",background:`${f(p)}11`,borderRadius:"50%",transform:"translate(30%, -30%)"}}),e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[p>50?e.jsx(Be,{size:20,color:f(p)}):e.jsx(_t,{size:20,color:f(p)}),e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Risk Assessment"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("span",{style:{fontSize:"2.5rem",fontWeight:900,color:f(p)},children:p.toFixed(1)}),e.jsx("span",{style:{fontSize:"1rem",color:"var(--text-muted)"},children:"/ 100"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("span",{style:{background:f(p),color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:700},children:j(p)}),n.at_risk&&e.jsx("span",{style:{background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:700},children:"âš ï¸ At Risk"})]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)",lineHeight:"1.6"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Completion Rate:"})," ",(Number(n?.problem_completion_rate)||0).toFixed(1),"%"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Test Score:"})," ",(Number(n?.average_test_score)||0).toFixed(1),"%"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Confidence:"})," ",((Number(n?.prediction_confidence)||0)*100).toFixed(0),"%"]})]})]})]})}const De="http://localhost:3000/api",Lr={Python:{monacoLang:"python",ext:".py",defaultCode:`# Write your Python code here

def solution():
    pass

# Call your solution
solution()`},JavaScript:{monacoLang:"javascript",ext:".js",defaultCode:`// Write your JavaScript code here

function solution() {
    
}

// Call your solution
solution();`},Java:{monacoLang:"java",ext:".java",defaultCode:`// Write your Java code here

public class Solution {
    public static void main(String[] args) {
        // Your code here
    }
}`},C:{monacoLang:"c",ext:".c",defaultCode:`// Write your C code here
#include <stdio.h>

int main() {
    // Your code here
    return 0;
}`},"C++":{monacoLang:"cpp",ext:".cpp",defaultCode:`// Write your C++ code here
#include <iostream>
using namespace std;

int main() {
    // Your code here
    return 0;
}`},SQL:{monacoLang:"sql",ext:".sql",defaultCode:`-- Write your SQL query here
SELECT * FROM table_name;`}};function kl(){const{user:r}=zr(),{t:n}=zn(),d=Ri(),[u,c]=i.useState(""),[g,f]=i.useState(""),[j,p]=i.useState(null),[o,y]=i.useState(0);i.useEffect(()=>{const R=r?.id||r?.userId;if(!R)return;const h=async()=>{try{const m=await oe.get(`${De}/messages/unread/${R}`);y(m.data.unreadCount||0)}catch{}};h();const W=setInterval(h,15e3);return()=>clearInterval(W)},[r]),i.useEffect(()=>{r?.id&&oe.get(`${De}/analytics/student/${r.id}`).then(R=>{R.data.mentorInfo&&p(R.data.mentorInfo)}).catch(R=>console.error("Error fetching mentor info:",R))},[r?.id]),i.useEffect(()=>{switch(d.pathname.split("/").pop()){case"tasks":c(n("ml_tasks")),f(n("ml_tasks_subtitle"));break;case"assignments":c(n("coding_problems")),f(n("solve_coding_subtitle"));break;case"aptitude":c(n("aptitude_tests")),f(n("aptitude_subtitle"));break;case"global-tests":c(n("global_complete_tests")),f(n("global_tests_student_subtitle"));break;case"submissions":c(n("my_submissions")),f(n("submissions_subtitle"));break;case"analytics":c(n("my_analytics")),f(n("analytics_subtitle"));break;case"messaging":c("Messages"),f("Chat with your mentor");break;case"skill-tests":c("Skill Tests"),f("AI-powered skill assessments");break;case"skill-submissions":c("Skill Test Submissions"),f("View your skill test results & reports");break;default:c(n("dashboard")),f(n("welcome_back_name",{name:r?.name||""}))}},[d,r,n]);const T=[{path:"/student",label:n("dashboard"),icon:e.jsx(Ni,{size:20})},{path:"/student/features",label:"âœ¨ All Features",icon:e.jsx(tr,{size:20})},{label:"Learning",icon:e.jsx(Hr,{size:20}),defaultExpanded:!1,children:[{path:"/student/tasks",label:n("ml_tasks"),icon:e.jsx(Hr,{size:20})},{path:"/student/assignments",label:n("coding_problems"),icon:e.jsx(vt,{size:20})},{path:"/student/aptitude",label:n("aptitude_tests"),icon:e.jsx(It,{size:20})},{path:"/student/global-tests",label:n("global_complete_tests"),icon:e.jsx(At,{size:20})},{path:"/student/skill-tests",label:"Skill Tests",icon:e.jsx(it,{size:20})},{path:"/student/search",label:"Advanced Search",icon:e.jsx($r,{size:20})},{path:"/student/recommendations",label:"AI Recommendations",icon:e.jsx(tr,{size:20})},{path:"/student/test-generator",label:"Test Generator",icon:e.jsx(St,{size:20})}]},{label:"Progress & Analytics",icon:e.jsx(qr,{size:20}),defaultExpanded:!1,children:[{path:"/student/submissions",label:n("my_submissions"),icon:e.jsx(Mt,{size:20})},{path:"/student/skill-submissions",label:"Skill Submissions",icon:e.jsx(it,{size:20})},{path:"/student/analytics",label:n("my_analytics"),icon:e.jsx(qr,{size:20})},{path:"/student/leaderboard",label:"Leaderboard",icon:e.jsx(er,{size:20})},{path:"/student/badges",label:"Skill Badges",icon:e.jsx(_t,{size:20})},{path:"/student/reports",label:"Export Reports",icon:e.jsx(Fr,{size:20})}]},{label:"Review & Collaboration",icon:e.jsx(kr,{size:20}),defaultExpanded:!1,children:[{path:"/student/code-reviews",label:"Code Reviews",icon:e.jsx(kr,{size:20})},{path:"/student/plagiarism",label:"Plagiarism Check",icon:e.jsx(Be,{size:20})},{path:"/student/mentor-matching",label:"Mentor Matching",icon:e.jsx(Or,{size:20})},{path:"/student/messaging",label:"Direct Messages",icon:e.jsx(Pr,{size:20}),badge:o}]},{label:"Calendar & Settings",icon:e.jsx(ft,{size:20}),defaultExpanded:!1,children:[{path:"/student/availability",label:"Availability Calendar",icon:e.jsx(ft,{size:20})},{path:"/student/settings",label:"Settings",icon:e.jsx(yr,{size:20})}]}];return e.jsx(Li,{navItems:T,title:u,subtitle:g,mentorInfo:j,children:e.jsxs(Ii,{children:[e.jsx(tt,{path:"/",element:e.jsx(zl,{user:r})}),e.jsx(tt,{path:"/tasks",element:e.jsx(Cl,{user:r})}),e.jsx(tt,{path:"/assignments",element:e.jsx(Tl,{user:r})}),e.jsx(tt,{path:"/aptitude",element:e.jsx(Wl,{user:r})}),e.jsx(tt,{path:"/global-tests",element:e.jsx(Ll,{user:r})}),e.jsx(tt,{path:"/skill-tests",element:e.jsx(dl,{user:r})}),e.jsx(tt,{path:"/search",element:e.jsx(cl,{user:r})}),e.jsx(tt,{path:"/recommendations",element:e.jsx(pl,{user:r})}),e.jsx(tt,{path:"/test-generator",element:e.jsx(ul,{user:r})}),e.jsx(tt,{path:"/skill-submissions",element:e.jsx(ea,{user:r})}),e.jsx(tt,{path:"/submissions",element:e.jsx(_l,{user:r})}),e.jsx(tt,{path:"/analytics",element:e.jsx(Dl,{user:r})}),e.jsx(tt,{path:"/leaderboard",element:e.jsx(yl,{limit:100})}),e.jsx(tt,{path:"/badges",element:e.jsx(jl,{userId:r?.id})}),e.jsx(tt,{path:"/reports",element:e.jsx(gl,{user:r})}),e.jsx(tt,{path:"/code-reviews",element:e.jsx(ml,{user:r})}),e.jsx(tt,{path:"/plagiarism",element:e.jsx(xl,{user:r})}),e.jsx(tt,{path:"/mentor-matching",element:e.jsx(fl,{currentUser:r})}),e.jsx(tt,{path:"/messaging",element:e.jsx(Wi,{currentUser:r})}),e.jsx(tt,{path:"/availability",element:e.jsx(hl,{user:r})}),e.jsx(tt,{path:"/features",element:e.jsx(bl,{})})]})})}function zl({user:r}){const[n,d]=i.useState(null),[u,c]=i.useState(!0);i.useEffect(()=>{oe.get(`${De}/analytics/student/${r.id}`).then(m=>{d(m.data),c(!1)}).catch(m=>{console.error(m),c(!1)})},[r.id]);const g=m=>{const k=new Date(m),D=new Date-k,S=Math.floor(D/6e4),b=Math.floor(D/36e5),I=Math.floor(D/864e5);return S<1?"Just now":S<60?`${S}m ago`:b<24?`${b}h ago`:I<7?`${I}d ago`:k.toLocaleDateString()};if(u)return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:e.jsx("div",{className:"loading-spinner"})});if(!n)return e.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-muted)"},children:"Unable to load dashboard data"});const f=n.submissionTrends&&n.submissionTrends.length>0?n.submissionTrends:(()=>{const m=[];for(let k=6;k>=0;k--){const L=new Date;L.setDate(L.getDate()-k),m.push({date:L.toLocaleDateString("en-US",{month:"short",day:"numeric"}),count:0})}return m})(),j=[{name:"Tasks",completed:n.completedTasks,total:n.totalTasks},{name:"Coding",completed:n.completedProblems,total:n.totalProblems},{name:"Aptitude",completed:n.completedAptitude,total:n.totalAptitude}],p=[{name:"Tasks",value:n.completedTasks||0,color:"#3b82f6"},{name:"Code",value:n.completedProblems||0,color:"#10b981"},{name:"Aptitude",value:n.completedAptitude||0,color:"#a78bfa"},{name:"Remaining",value:Math.max(0,n.totalTasks-n.completedTasks+(n.totalProblems-n.completedProblems)+(n.totalAptitude-n.completedAptitude)),color:"rgba(100,116,139,0.2)"}].filter(m=>m.value>0),o=[{subject:"Task Score",A:n.avgTaskScore||0},{subject:"Code Score",A:n.avgProblemScore||0},{subject:"Tasks Done",A:n.totalTasks>0?Math.round(n.completedTasks/n.totalTasks*100):0},{subject:"Code Done",A:n.totalProblems>0?Math.round(n.completedProblems/n.totalProblems*100):0},{subject:"Aptitude",A:n.totalAptitude>0?Math.round(n.completedAptitude/n.totalAptitude*100):0}],y=n.completedTasks+n.completedProblems+n.completedAptitude,T=n.totalTasks+n.totalProblems+n.totalAptitude,R=T>0?Math.round(y/T*100):0,h=({pct:m,size:k=52,strokeWidth:L=5,color:D})=>{const S=(k-L)/2,b=2*Math.PI*S,I=b-Math.min(m,100)/100*b;return e.jsxs("svg",{width:k,height:k,style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:k/2,cy:k/2,r:S,fill:"none",stroke:"rgba(148,163,184,0.1)",strokeWidth:L}),e.jsx("circle",{cx:k/2,cy:k/2,r:S,fill:"none",stroke:D,strokeWidth:L,strokeDasharray:b,strokeDashoffset:I,strokeLinecap:"round",style:{transition:"stroke-dashoffset 1s ease"}})]})},W=({active:m,payload:k,label:L})=>m&&k&&k.length?e.jsxs("div",{className:"dash-tooltip",children:[e.jsx("div",{className:"dash-tooltip-label",children:L}),k.map((D,S)=>e.jsxs("div",{className:"dash-tooltip-value",style:{color:D.color||D.stroke||"#818cf8"},children:[D.name,": ",D.value]},S))]}):null;return e.jsxs("div",{className:"sdash",children:[e.jsx("div",{className:"sdash-stats",children:[{label:"Tasks",done:n.completedTasks,total:n.totalTasks,icon:e.jsx(Hr,{size:20}),color:"#3b82f6",gradient:"linear-gradient(135deg, #1e40af, #3b82f6)"},{label:"Problems",done:n.completedProblems,total:n.totalProblems,icon:e.jsx(vt,{size:20}),color:"#10b981",gradient:"linear-gradient(135deg, #047857, #10b981)"},{label:"Aptitude",done:n.completedAptitude,total:n.totalAptitude,icon:e.jsx(It,{size:20}),color:"#a78bfa",gradient:"linear-gradient(135deg, #6d28d9, #a78bfa)"},{label:"Task Score",done:n.avgTaskScore,total:100,icon:e.jsx(_t,{size:20}),color:"#f472b6",gradient:"linear-gradient(135deg, #be185d, #f472b6)",suffix:"%"},{label:"Code Score",done:n.avgProblemScore,total:100,icon:e.jsx(it,{size:20}),color:"#fbbf24",gradient:"linear-gradient(135deg, #d97706, #fbbf24)",suffix:"%"},{label:"Overall",done:R,total:100,icon:e.jsx(qr,{size:20}),color:"#06b6d4",gradient:"linear-gradient(135deg, #0e7490, #06b6d4)",suffix:"%"}].map((m,k)=>{const L=m.total>0?Math.round(m.done/m.total*100):0;return e.jsxs("div",{className:"sdash-stat-card",children:[e.jsxs("div",{className:"sdash-stat-ring",children:[e.jsx(h,{pct:L,color:m.color}),e.jsx("div",{className:"sdash-stat-icon",style:{background:m.gradient},children:dr.cloneElement(m.icon,{color:"#fff",size:18})})]}),e.jsxs("div",{className:"sdash-stat-info",children:[e.jsxs("div",{className:"sdash-stat-val",children:[m.done,m.suffix||"",!m.suffix&&e.jsxs("span",{className:"sdash-stat-dim",children:["/",m.total]})]}),e.jsx("div",{className:"sdash-stat-lbl",children:m.label})]})]},k)})}),e.jsxs("div",{className:"sdash-row2",children:[e.jsxs("div",{className:"sdash-card sdash-grow",children:[e.jsxs("div",{className:"sdash-card-head",children:[e.jsxs("h3",{children:[e.jsx(qr,{size:16,color:"#818cf8"})," Activity"]}),e.jsx("span",{className:"sdash-badge-sm",style:{color:"#818cf8",background:"rgba(129,140,248,0.12)"},children:"7 Days"})]}),e.jsx("div",{style:{width:"100%",height:200,marginTop:8},children:e.jsx(es,{children:e.jsxs(Di,{data:f,margin:{top:5,right:8,left:-25,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"aGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#818cf8",stopOpacity:.35}),e.jsx("stop",{offset:"100%",stopColor:"#818cf8",stopOpacity:0})]})}),e.jsx(Xs,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.06)"}),e.jsx(Js,{dataKey:"date",tick:{fill:"#64748b",fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(Zs,{tick:{fill:"#64748b",fontSize:10},axisLine:!1,tickLine:!1,allowDecimals:!1}),e.jsx(Ss,{content:e.jsx(W,{})}),e.jsx(Bi,{type:"monotone",dataKey:"count",name:"Submissions",stroke:"#818cf8",strokeWidth:2.5,fill:"url(#aGrad)",dot:{r:3,fill:"#818cf8",stroke:"#1e1b4b",strokeWidth:2},activeDot:{r:5}})]})})})]}),e.jsxs("div",{className:"sdash-card",children:[e.jsx("div",{className:"sdash-card-head",children:e.jsxs("h3",{children:[e.jsx(ur,{size:16,color:"#10b981"})," Progress"]})}),e.jsx("div",{style:{width:"100%",height:200,marginTop:8},children:e.jsx(es,{children:e.jsxs(Mi,{data:j,margin:{top:5,right:8,left:-25,bottom:0},barGap:4,barSize:22,children:[e.jsx(Xs,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.06)"}),e.jsx(Js,{dataKey:"name",tick:{fill:"#64748b",fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(Zs,{tick:{fill:"#64748b",fontSize:10},axisLine:!1,tickLine:!1,allowDecimals:!1}),e.jsx(Ss,{content:e.jsx(W,{})}),e.jsx(en,{dataKey:"completed",name:"Completed",radius:[4,4,0,0],fill:"#10b981"}),e.jsx(en,{dataKey:"total",name:"Total",radius:[4,4,0,0],fill:"rgba(100,116,139,0.25)"})]})})})]})]}),e.jsxs("div",{className:"sdash-row3",children:[e.jsxs("div",{className:"sdash-card sdash-center-card",children:[e.jsx("div",{className:"sdash-card-head",children:e.jsxs("h3",{children:[e.jsx(An,{size:16,color:"#a78bfa"})," Completion"]})}),e.jsxs("div",{style:{width:"100%",height:175,position:"relative",marginTop:4},children:[e.jsx(es,{children:e.jsxs(Pi,{children:[e.jsx($i,{data:p.length>0?p:[{name:"No Data",value:1,color:"rgba(100,116,139,0.2)"}],cx:"50%",cy:"50%",innerRadius:48,outerRadius:72,paddingAngle:2,dataKey:"value",strokeWidth:0,children:(p.length>0?p:[{name:"No Data",value:1,color:"rgba(100,116,139,0.2)"}]).map((m,k)=>e.jsx(Fi,{fill:m.color},k))}),e.jsx(Ss,{content:e.jsx(W,{})})]})}),e.jsxs("div",{className:"sdash-donut-center",children:[e.jsxs("span",{className:"sdash-donut-pct",children:[R,"%"]}),e.jsx("span",{className:"sdash-donut-sub",children:"Done"})]})]}),e.jsx("div",{className:"sdash-legend",children:[{l:"Tasks",c:"#3b82f6"},{l:"Code",c:"#10b981"},{l:"Aptitude",c:"#a78bfa"}].map(m=>e.jsxs("span",{className:"sdash-legend-item",children:[e.jsx("span",{className:"sdash-legend-dot",style:{background:m.c}}),m.l]},m.l))})]}),e.jsxs("div",{className:"sdash-card sdash-center-card",children:[e.jsx("div",{className:"sdash-card-head",children:e.jsxs("h3",{children:[e.jsx(En,{size:16,color:"#f472b6"})," Skill Radar"]})}),e.jsx("div",{style:{width:"100%",height:210,marginTop:4},children:e.jsx(es,{children:e.jsxs(Oi,{data:o,cx:"50%",cy:"50%",outerRadius:"68%",children:[e.jsx(qi,{stroke:"rgba(148,163,184,0.1)"}),e.jsx(Hi,{dataKey:"subject",tick:{fill:"#94a3b8",fontSize:9}}),e.jsx(Qi,{angle:90,domain:[0,100],tick:!1,axisLine:!1}),e.jsx(Ui,{name:"Score",dataKey:"A",stroke:"#f472b6",fill:"#f472b6",fillOpacity:.15,strokeWidth:2,dot:{r:3,fill:"#f472b6"}})]})})})]}),e.jsx("div",{className:"sdash-card sdash-gami-card",children:e.jsx(vl,{studentId:r?.id||r?.userId})})]}),e.jsxs("div",{className:"sdash-row4",children:[e.jsx("div",{className:"sdash-card",children:e.jsx(wl,{studentId:r?.id||r?.userId})}),e.jsxs("div",{className:"sdash-card",children:[e.jsx("div",{className:"sdash-card-head",children:e.jsxs("h3",{children:[e.jsx(At,{size:16,color:"#8b5cf6"})," Skills"]})}),e.jsxs("div",{className:"sdash-skills",children:[[{name:"ML Tasks",done:n.completedTasks,total:n.totalTasks,color:"#3b82f6"},{name:"Coding",done:n.completedProblems,total:n.totalProblems,color:"#10b981"},{name:"Aptitude",done:n.completedAptitude,total:n.totalAptitude,color:"#a78bfa"}].map((m,k)=>e.jsxs("div",{className:"sdash-skill-row",children:[e.jsxs("div",{className:"sdash-skill-label",children:[e.jsx("span",{children:m.name}),e.jsxs("span",{style:{color:m.color,fontWeight:700,fontVariantNumeric:"tabular-nums"},children:[m.done,"/",m.total]})]}),e.jsx("div",{className:"sdash-skill-track",children:e.jsx("div",{className:"sdash-skill-fill",style:{width:`${m.total>0?m.done/m.total*100:0}%`,background:`linear-gradient(90deg, ${m.color}cc, ${m.color})`}})})]},k)),e.jsx("div",{className:"sdash-skill-row",style:{marginTop:10,paddingTop:10,borderTop:"1px solid var(--border-color)"},children:e.jsxs("div",{className:"sdash-skill-label",children:[e.jsx("span",{style:{fontWeight:600},children:"Total Submissions"}),e.jsx("span",{style:{color:"#06b6d4",fontWeight:700},children:n.totalSubmissions||0})]})})]})]}),e.jsxs("div",{className:"sdash-card",children:[e.jsxs("div",{className:"sdash-card-head",children:[e.jsxs("h3",{children:[e.jsx(ft,{size:16,color:"#3b82f6"})," Recent"]}),e.jsx("button",{onClick:()=>window.location.href="/student/submissions",className:"view-all-btn",children:"All â†’"})]}),e.jsx("div",{className:"submissions-list",style:{maxHeight:240},children:n.recentSubmissions&&n.recentSubmissions.length>0?n.recentSubmissions.map((m,k)=>e.jsxs("div",{className:"submission-item",children:[e.jsx("div",{className:"submission-icon",children:e.jsx(vt,{size:16,color:"#3b82f6"})}),e.jsxs("div",{className:"submission-info",children:[e.jsx("div",{className:"submission-title",children:m.title}),e.jsxs("div",{className:"submission-meta",children:[g(m.time)," Â· ",m.score,"/100"]})]}),e.jsx("span",{className:`submission-status ${m.status}`,children:m.status})]},k)):e.jsxs("div",{className:"empty-state-small",children:[e.jsx(vt,{size:28,color:"var(--text-muted)"}),"No submissions"]})})]}),e.jsxs("div",{className:"sdash-card",children:[e.jsx("div",{className:"sdash-card-head",children:e.jsxs("h3",{children:[e.jsx(er,{size:16,color:"#fbbf24"})," Leaderboard"]})}),e.jsx("div",{className:"leaderboard-list",style:{maxHeight:240},children:n.leaderboard&&n.leaderboard.length>0?n.leaderboard.slice(0,5).map((m,k)=>e.jsxs("div",{className:`leaderboard-item ${m.studentId===r.id?"current-user":""}`,children:[e.jsx("div",{className:`rank-badge rank-${k+1}`,children:m.rank}),e.jsxs("div",{className:"leaderboard-info",children:[e.jsx("div",{className:"leaderboard-name",children:m.name}),e.jsxs("div",{className:"leaderboard-stats",children:[m.taskCount,"T Â· ",m.codeCount,"C Â· ",m.aptitudeCount,"A"]})]}),e.jsxs("div",{className:`leaderboard-score rank-${k+1}-score`,children:[m.avgScore,"%"]})]},k)):e.jsxs("div",{className:"empty-state-small",children:[e.jsx(er,{size:28,color:"var(--text-muted)"}),"No data yet"]})})]})]})]})}function Cl({user:r}){const[n,d]=i.useState([]),[u,c]=i.useState(!0),[g,f]=i.useState(null),[j,p]=i.useState(null),o=(y=!0)=>{y&&c(!0),oe.get(`${De}/students/${r.id}/tasks`).then(T=>{d(T.data),c(!1)}).catch(T=>c(!1))};return i.useEffect(()=>{o(!0)},[r.id]),u?e.jsx("div",{className:"loading-spinner"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"cards-grid animate-slideUp",children:n.length===0?e.jsxs("div",{className:"empty-state",style:{gridColumn:"1 / -1"},children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(Hr,{size:40})}),e.jsx("h3",{children:"No ML Tasks Assigned"}),e.jsx("p",{children:"Your mentor hasn't assigned any tasks yet."})]}):n.map(y=>e.jsxs("div",{className:"item-card glass",children:[e.jsxs("div",{className:"item-card-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{padding:"10px",background:"var(--primary-alpha)",borderRadius:"10px"},children:e.jsx(Hr,{size:20,color:"var(--primary)"})}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.65rem",color:"var(--secondary)",fontWeight:700,textTransform:"uppercase"},children:"ML TASK"}),e.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:y.title})]})]}),e.jsx("span",{className:`difficulty-badge ${y.difficulty?.toLowerCase()}`,children:y.difficulty})]}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.6",marginBottom:"1rem",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:y.description}),y.requirements&&e.jsxs("div",{style:{background:"var(--bg-dark)",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[e.jsx("strong",{style:{color:"var(--primary)"},children:"Requirements:"}),e.jsx("br",{}),y.requirements.split(`
`).slice(0,2).join(`
`),"..."]}),e.jsxs("div",{className:"item-card-footer",style:{paddingTop:"1rem",marginTop:"auto",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("span",{className:`status-badge ${y.status||"live"}`,children:y.status||"Active"}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"0.5rem"},children:[y.maxAttempts>0&&e.jsxs("span",{style:{fontSize:"0.8rem",color:y.attemptCount>=y.maxAttempts?"var(--error)":"var(--text-muted)",alignSelf:"center",marginRight:"0.5rem",fontWeight:600},children:[y.attemptCount,"/",y.maxAttempts," Attempts"]}),e.jsxs("button",{onClick:()=>p(y),className:"btn-reset",style:{padding:"0.5rem 0.75rem",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.35rem"},children:[e.jsx(Ot,{size:14})," View"]}),e.jsxs("button",{onClick:()=>f(y),className:"btn-create-new",disabled:y.maxAttempts>0&&y.attemptCount>=y.maxAttempts,style:{padding:"0.5rem 1rem",fontSize:"0.85rem",opacity:y.maxAttempts>0&&y.attemptCount>=y.maxAttempts?.5:1,cursor:y.maxAttempts>0&&y.attemptCount>=y.maxAttempts?"not-allowed":"pointer"},children:[e.jsx(Br,{size:16})," ",y.maxAttempts>0&&y.attemptCount>=y.maxAttempts?"Limit Reached":"Submit"]})]})]})]},y.id))}),j&&e.jsx(Rl,{task:j,onClose:()=>p(null),onSubmit:()=>{p(null),f(j)}}),g&&e.jsx(Il,{task:g,user:r,onClose:()=>f(null),onSubmissionComplete:()=>o(!1)})]})}function Rl({task:r,onClose:n,onSubmit:d}){return e.jsx("div",{className:"modal-overlay",onClick:n,children:e.jsxs("div",{className:"modal-content",onClick:u=>u.stopPropagation(),style:{maxWidth:"700px",maxHeight:"85vh",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, var(--secondary), var(--primary))",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(wr,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--primary)",textTransform:"uppercase",fontWeight:600},children:"ML Task Details"}),e.jsx("h2",{style:{margin:0},children:r.title})]})]}),e.jsx("button",{onClick:n,className:"modal-close",children:e.jsx(We,{size:20})})]}),e.jsxs("div",{className:"modal-body",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1.5rem"},children:[e.jsx("span",{className:`difficulty-badge ${r.difficulty?.toLowerCase()}`,style:{fontSize:"0.85rem",padding:"0.4rem 0.8rem"},children:r.difficulty}),e.jsx("span",{className:`status-badge ${r.status||"live"}`,style:{fontSize:"0.85rem",padding:"0.4rem 0.8rem"},children:r.status||"Active"}),r.maxAttempts>0&&e.jsxs("span",{style:{fontSize:"0.85rem",padding:"0.4rem 0.8rem",borderRadius:"2rem",background:r.attemptCount>=r.maxAttempts?"var(--error-alpha)":"var(--bg-secondary)",color:r.attemptCount>=r.maxAttempts?"var(--error)":"var(--text-muted)",border:"1px solid var(--border-color)",fontWeight:600},children:[r.attemptCount,"/",r.maxAttempts," Attempts Used"]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{color:"var(--text-main)",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(St,{size:18,color:"var(--primary)"})," Description"]}),e.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.8",fontSize:"0.95rem",background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.75rem",margin:0},children:r.description})]}),r.requirements&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{color:"var(--text-main)",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18,color:"var(--secondary)"})," Requirements"]}),e.jsx("div",{style:{background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)"},children:r.requirements.split(`
`).map((u,c)=>e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:c<r.requirements.split(`
`).length-1?"0.75rem":0},children:[e.jsx(Le,{size:16,color:"var(--success)",style:{marginTop:"3px",flexShrink:0}}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.5"},children:u.replace(/^[-â€¢*]\s*/,"")})]},c))})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{color:"var(--text-main)",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(br,{size:18,color:"var(--warning)"})," Submission Guidelines"]}),e.jsx("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.05), rgba(245, 158, 11, 0.08))",padding:"1rem",borderRadius:"0.75rem",border:"1px solid rgba(251, 191, 36, 0.2)"},children:e.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.8"},children:[e.jsxs("li",{children:["You can submit a ",e.jsx("strong",{children:"file"})," (.py, .ipynb, .zip) or a ",e.jsx("strong",{children:"GitHub repository URL"})]}),e.jsxs("li",{children:["For GitHub submissions, ensure the repository is ",e.jsx("strong",{children:"public"})," or share access"]}),e.jsxs("li",{children:["Include a ",e.jsx("strong",{children:"README.md"})," with instructions to run your code"]}),e.jsx("li",{children:"Your submission will be evaluated by AI based on the requirements"}),e.jsx("li",{children:"You will receive a score and detailed feedback after evaluation"})]})})]}),(r.sampleInput||r.expectedOutput)&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{color:"var(--text-main)",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(vt,{size:18,color:"var(--info)"})," Sample Data"]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[r.sampleInput&&e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem",display:"block"},children:"Sample Input"}),e.jsx("pre",{style:{background:"var(--bg-dark)",padding:"0.75rem",borderRadius:"0.5rem",margin:0,fontSize:"0.85rem",overflow:"auto"},children:r.sampleInput})]}),r.expectedOutput&&e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem",display:"block"},children:"Expected Output"}),e.jsx("pre",{style:{background:"var(--bg-dark)",padding:"0.75rem",borderRadius:"0.5rem",margin:0,fontSize:"0.85rem",overflow:"auto"},children:r.expectedOutput})]})]})]})]}),e.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("button",{onClick:n,className:"btn-reset",children:"Close"}),e.jsxs("button",{onClick:d,className:"btn-create-new",disabled:r.maxAttempts>0&&r.attemptCount>=r.maxAttempts,style:{display:"flex",alignItems:"center",gap:"0.5rem",opacity:r.maxAttempts>0&&r.attemptCount>=r.maxAttempts?.5:1,cursor:r.maxAttempts>0&&r.attemptCount>=r.maxAttempts?"not-allowed":"pointer"},children:[e.jsx(Br,{size:16})," ",r.maxAttempts>0&&r.attemptCount>=r.maxAttempts?"Attempt Limit Reached":"Submit Solution"]})]})]})})}function Il({task:r,user:n,onClose:d,onSubmissionComplete:u}){const[c,g]=i.useState(null),[f,j]=i.useState(""),[p,o]=i.useState("file"),[y,T]=i.useState(!1),[R,h]=i.useState(null),[W,m]=i.useState(!1),k=S=>{const b=S.target.files[0];b&&g(b)},L=S=>/^https?:\/\/(www\.)?github\.com\/[\w-]+\/[\w.-]+\/?.*$/i.test(S),D=async()=>{if(!(p==="file"&&!c)&&!(p==="github"&&!f)){if(p==="github"&&!L(f)){alert("Please enter a valid GitHub repository URL");return}T(!0),m(!0);try{if(p==="file"){const S=new FileReader;S.onload=async b=>{try{const I=await oe.post(`${De}/submissions/ml-task`,{studentId:n.id,taskId:r.id,submissionType:"file",code:b.target.result,fileName:c.name,taskTitle:r.title,taskDescription:r.description,taskRequirements:r.requirements});h(I.data),u&&u()}catch(I){console.error(I),h({status:"error",score:0,feedback:I.response?.data?.error||"Submission failed. Please try again."})}finally{T(!1),m(!1)}},S.readAsText(c)}else{const S=await oe.post(`${De}/submissions/ml-task`,{studentId:n.id,taskId:r.id,submissionType:"github",githubUrl:f,taskTitle:r.title,taskDescription:r.description,taskRequirements:r.requirements});h(S.data),T(!1),m(!1),u&&u()}}catch(S){console.error(S),h({status:"error",score:0,feedback:S.response?.data?.error||"Submission failed. Please try again."}),T(!1),m(!1)}}};return e.jsx("div",{className:"modal-overlay",onClick:d,children:e.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),style:{maxWidth:"650px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, var(--secondary), var(--primary))",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Br,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Submit Solution"}),e.jsx("h2",{style:{margin:0,fontSize:"1.1rem"},children:r.title})]})]}),e.jsx("button",{onClick:d,className:"modal-close",children:e.jsx(We,{size:20})})]}),e.jsx("div",{className:"modal-body",children:R?e.jsxs("div",{style:{textAlign:"left",padding:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem",marginBottom:"2rem",paddingBottom:"1.5rem",borderBottom:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:`conic-gradient(${R.score>=80?"var(--success)":R.score>=60?"var(--warning)":"var(--danger)"} ${R.score*3.6}deg, var(--bg-dark) 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},children:e.jsxs("div",{style:{width:"85px",height:"85px",borderRadius:"50%",background:"var(--bg-card)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"1.8rem",fontWeight:800,color:"var(--text-main)"},children:R.score}),e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Score"})]})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,color:R.score>=80?"var(--success)":R.score>=60?"var(--warning)":"var(--danger)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:R.score>=90?"Outstanding!":R.score>=80?"Excellent Work!":R.score>=60?"Good Effort":"Needs Improvement"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.95rem",lineHeight:"1.5"},children:R.summary||"Evaluation complete. Review the detailed feedback below to improve your skills."})]})]}),(R.metrics||R.breakdown)&&e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h4",{style:{color:"var(--text-main)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ur,{size:18,color:"var(--primary)"})," Performance Metrics"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:Object.entries(R.metrics||R.breakdown).map(([S,b])=>e.jsxs("div",{style:{background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-muted)",textTransform:"capitalize"},children:S.replace(/_/g," ")}),e.jsxs("span",{style:{fontWeight:700,color:b>=80?"var(--success)":b>=60?"var(--warning)":"var(--danger)"},children:[b,"%"]})]}),e.jsx("div",{style:{height:"6px",background:"rgba(255,255,255,0.05)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${b}%`,height:"100%",background:b>=80?"var(--success)":b>=60?"var(--warning)":"var(--danger)",borderRadius:"3px",transition:"width 1s ease-out"}})})]},S))})]}),(R.strengths?.length>0||R.suggestion_points?.length>0)&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[R.strengths?.length>0&&e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.05)",padding:"1.25rem",borderRadius:"0.75rem",border:"1px solid rgba(16, 185, 129, 0.15)"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",color:"var(--success)",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem"},children:[e.jsx(Le,{size:18})," Key Strengths"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:R.strengths.map((S,b)=>e.jsx("li",{style:{color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.5"},children:S},b))})]}),R.suggestion_points?.length>0&&e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.05)",padding:"1.25rem",borderRadius:"0.75rem",border:"1px solid rgba(245, 158, 11, 0.15)"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",color:"var(--warning)",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem"},children:[e.jsx(Be,{size:18})," Areas for Improvement"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:R.suggestion_points.map((S,b)=>e.jsx("li",{style:{color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.5"},children:S},b))})]})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h4",{style:{color:"var(--text-main)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(St,{size:18,color:"var(--info)"})," Detailed Analysis"]}),e.jsx("div",{style:{background:"var(--bg-dark)",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)",maxHeight:"400px",overflowY:"auto"},children:e.jsx("div",{style:{whiteSpace:"pre-wrap",color:"var(--text-muted)",fontSize:"0.95rem",lineHeight:"1.7",fontFamily:"monospace"},children:R.detailed_feedback||R.feedback})})]}),R.next_steps&&e.jsxs("div",{style:{background:"linear-gradient(to right, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1))",padding:"1.25rem",borderRadius:"0.75rem",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"var(--primary)",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem"},children:[e.jsx(it,{size:18})," Recommended Next Steps"]}),e.jsx("p",{style:{margin:0,color:"var(--text-main)",fontSize:"0.95rem",lineHeight:"1.6"},children:R.next_steps})]}),e.jsx("button",{className:"btn-create-new",onClick:d,style:{marginTop:"2rem",width:"100%",padding:"1rem",fontSize:"1rem"},children:"Close Report"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",style:{marginBottom:"0.75rem",display:"block"},children:"Choose Submission Method"}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[e.jsxs("button",{onClick:()=>o("file"),style:{flex:1,padding:"1rem",borderRadius:"0.75rem",border:`2px solid ${p==="file"?"var(--primary)":"var(--border-color)"}`,background:p==="file"?"var(--primary-alpha)":"var(--bg-dark)",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[e.jsx(Br,{size:24,color:p==="file"?"var(--primary)":"var(--text-muted)"}),e.jsx("span",{style:{fontWeight:600,color:p==="file"?"var(--primary)":"var(--text-muted)"},children:"Upload File"}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:".py, .ipynb, .zip"})]}),e.jsxs("button",{onClick:()=>o("github"),style:{flex:1,padding:"1rem",borderRadius:"0.75rem",border:`2px solid ${p==="github"?"var(--primary)":"var(--border-color)"}`,background:p==="github"?"var(--primary-alpha)":"var(--bg-dark)",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[e.jsx(kr,{size:24,color:p==="github"?"var(--primary)":"var(--text-muted)"}),e.jsx("span",{style:{fontWeight:600,color:p==="github"?"var(--primary)":"var(--text-muted)"},children:"GitHub URL"}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Repository link"})]})]})]}),p==="file"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Upload Your Solution File"}),e.jsxs("div",{style:{border:"2px dashed var(--border-color)",borderRadius:"1rem",padding:"2rem",textAlign:"center",background:"var(--bg-dark)",cursor:"pointer",transition:"all 0.3s"},onClick:()=>document.getElementById("file-input").click(),children:[e.jsx("input",{type:"file",id:"file-input",onChange:k,accept:".py,.ipynb,.csv,.pkl,.h5,.zip",style:{display:"none"}}),e.jsx(Br,{size:40,style:{color:"var(--secondary)",marginBottom:"1rem"}}),c?e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:600,color:"var(--success)"},children:c.name}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:[(c.size/1024).toFixed(2)," KB"]})]}):e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:600},children:"Click to upload or drag and drop"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:"Supports: .py, .ipynb, .csv, .pkl, .h5, .zip"})]})]})]}),p==="github"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"GitHub Repository URL"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(kr,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"url",value:f,onChange:S=>j(S.target.value),placeholder:"https://github.com/username/repository",style:{width:"100%",padding:"0.875rem 1rem 0.875rem 2.75rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)",background:"var(--bg-dark)",color:"var(--text-main)",fontSize:"0.95rem"}})]}),f&&!L(f)&&e.jsx("p",{style:{color:"var(--danger)",fontSize:"0.8rem",marginTop:"0.5rem"},children:"Please enter a valid GitHub URL (e.g., https://github.com/username/repo)"}),e.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(59, 130, 246, 0.2)"},children:e.jsxs("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-muted)"},children:[e.jsx("strong",{style:{color:"var(--info)"},children:"Note:"})," Make sure your repository is public. Include a README.md with setup instructions."]})})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn-reset",onClick:d,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn-create-new",onClick:D,disabled:p==="file"&&!c||p==="github"&&(!f||!L(f))||y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-small"})," ",W?"Evaluating...":"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Mt,{size:16})," Submit for Evaluation"]})})]})]})})]})})}function Tl({user:r}){const[n,d]=i.useState([]),[u,c]=i.useState(!0),[g,f]=i.useState(null),[j,p]=i.useState(!1),[o,y]=i.useState("coding"),[T,R]=i.useState({}),h=async b=>{const I={};await Promise.all(b.map(async $=>{try{const G=await oe.get(`${De}/submissions/count?studentId=${r.id}&problemId=${$.id}`);I[$.id]=G.data.attemptCount||0}catch{I[$.id]=0}})),R(I)},W=(b=!1)=>{b||c(!0),oe.get(`${De}/students/${r.id}/problems`).then(I=>{const $=I.data;d($),b||c(!1),h($)}).catch(I=>{b||c(!1)})};i.useEffect(()=>{W()},[r.id]);const m=b=>{const I=b.maxAttempts||b.max_attempts||0,$=T[b.id]||0;if(I>0&&$>=I){alert(`You have used all ${I} attempt(s) for this problem.`);return}f(b),p(b.proctoring?.enabled===!0)},k=()=>{f(null),p(!1),W(!0)},L=n.filter(b=>b.language!=="SQL"&&b.type!=="SQL"),D=n.filter(b=>b.language==="SQL"||b.type==="SQL");if(u)return e.jsx("div",{className:"loading-spinner"});const S=b=>e.jsxs("div",{className:"item-card glass",children:[e.jsxs("div",{className:"item-card-header",children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:"0.65rem",padding:"3px 8px",borderRadius:"4px",background:"var(--primary-alpha)",color:"var(--primary)",fontWeight:700},children:b.type?.toUpperCase()}),e.jsx("span",{className:`status-badge ${b.status||"live"}`,style:{fontSize:"0.65rem"},children:b.status||"Active"}),b.proctoring?.enabled&&e.jsxs("span",{style:{fontSize:"0.6rem",padding:"3px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",fontWeight:700,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(cr,{size:10})," PROCTORED"]})]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",background:"var(--bg-dark)",padding:"2px 8px",borderRadius:"4px"},children:b.language})]}),e.jsx("h3",{style:{margin:"0.75rem 0",fontSize:"1.2rem"},children:b.title}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",marginBottom:"1rem"},children:b.description}),b.proctoring?.enabled&&e.jsx("div",{style:{padding:"0.5rem 0.75rem",background:"rgba(239, 68, 68, 0.08)",borderRadius:"8px",marginBottom:"0.75rem",border:"1px solid rgba(239, 68, 68, 0.15)"},children:e.jsxs("p",{style:{margin:0,fontSize:"0.75rem",color:"#f87171",display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap"},children:[e.jsx(Ot,{size:12})," Proctoring Enabled:",b.proctoring.videoAudio&&e.jsx("span",{style:{marginLeft:"4px"},children:"ðŸ“¹ Video"}),b.proctoring.disableCopyPaste&&e.jsx("span",{style:{marginLeft:"4px"},children:"ðŸ“‹ No Copy"}),b.proctoring.trackTabSwitches&&e.jsx("span",{style:{marginLeft:"4px"},children:"ðŸ”’ Tab Track"}),b.proctoring.enableFaceDetection&&e.jsx("span",{style:{marginLeft:"4px"},children:"ðŸ‘ï¸ Face"}),b.proctoring.detectMultipleFaces&&e.jsx("span",{style:{marginLeft:"4px"},children:"ðŸ‘¥ Multi-Face"}),b.proctoring.trackFaceLookaway&&e.jsx("span",{style:{marginLeft:"4px"},children:"ðŸ‘€ Lookaway"})]})}),(()=>{const I=b.maxAttempts||b.max_attempts||0,$=T[b.id]||0,G=I>0&&$>=I;return e.jsx("div",{style:{padding:"0.5rem 0.75rem",background:G?"rgba(239, 68, 68, 0.08)":"rgba(139, 92, 246, 0.08)",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${G?"rgba(239, 68, 68, 0.15)":"rgba(139, 92, 246, 0.15)"}`},children:e.jsxs("p",{style:{margin:0,fontSize:"0.75rem",color:G?"#ef4444":"#8b5cf6",fontWeight:600},children:["ðŸ”„ Attempts: ",$,I>0?`/${I}`:""," ",G?"(Limit Reached)":I>0?`(${I-$} remaining)`:"(Unlimited)"]})})})(),e.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"1rem",borderTop:"1px solid var(--border-color)"},children:[e.jsx("span",{className:`difficulty-badge ${b.difficulty?.toLowerCase()}`,children:b.difficulty}),(()=>{const I=b.maxAttempts||b.max_attempts||0,$=T[b.id]||0,G=I>0&&$>=I;return e.jsxs("button",{onClick:()=>m(b),className:"btn-create-new",disabled:G,style:{padding:"0.5rem 1rem",fontSize:"0.85rem",opacity:G?.5:1,cursor:G?"not-allowed":"pointer"},children:[e.jsx(qt,{size:16})," ",G?"No Attempts Left":"Solve"]})})()]})]},b.id);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"12px",width:"fit-content"},children:[e.jsxs("button",{onClick:()=>y("coding"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:o==="coding"?"var(--primary)":"transparent",color:o==="coding"?"white":"var(--text-muted)"},children:[e.jsx(vt,{size:18}),"Coding Problems",e.jsx("span",{style:{background:o==="coding"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:L.length})]}),e.jsxs("button",{onClick:()=>y("sql"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:o==="sql"?"linear-gradient(135deg, #06b6d4, #0891b2)":"transparent",color:o==="sql"?"white":"var(--text-muted)"},children:[e.jsx(St,{size:18}),"SQL Problems",e.jsx("span",{style:{background:o==="sql"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:D.length})]})]}),o==="coding"&&e.jsx("div",{className:"cards-grid animate-slideUp",children:L.length===0?e.jsxs("div",{className:"empty-state",style:{gridColumn:"1 / -1"},children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(vt,{size:40})}),e.jsx("h3",{children:"No Coding Problems"}),e.jsx("p",{children:"Your mentor hasn't assigned any coding problems yet."})]}):L.map(b=>S(b))}),o==="sql"&&e.jsx("div",{className:"cards-grid animate-slideUp",children:D.length===0?e.jsxs("div",{className:"empty-state",style:{gridColumn:"1 / -1"},children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(St,{size:40})}),e.jsx("h3",{children:"No SQL Problems"}),e.jsx("p",{children:"Your mentor hasn't assigned any SQL problems yet."})]}):D.map(b=>S(b))}),g&&j&&e.jsx(nl,{problem:g,user:r,onClose:k,onSubmitSuccess:()=>{oe.get(`${De}/students/${r.id}/problems`).then(b=>d(b.data))}}),g&&!j&&e.jsx(Al,{problem:g,user:r,onClose:k,onSubmissionComplete:()=>W(!0)})]})}function Al({problem:r,user:n,onClose:d,onSubmissionComplete:u}){const c=Lr[r.language]||Lr.Python,[g,f]=i.useState(c.defaultCode),[j,p]=i.useState(r.language||"Python"),[o,y]=i.useState("validator"),[T,R]=i.useState(""),[h,W]=i.useState("idle"),[m,k]=i.useState(null),[L,D]=i.useState(0),[S,b]=i.useState(!1),[I,$]=i.useState(!1),[G,ae]=i.useState(""),[ne,v]=i.useState(!1),[N,A]=i.useState(null),[te,se]=i.useState(r.sampleInput||r.testInput||""),[ie,ge]=i.useState("input"),pe=i.useRef(null);i.useEffect(()=>{const ye=setTimeout(async()=>{try{pe.current&&document.fullscreenEnabled&&(await pe.current.requestFullscreen(),b(!0))}catch(ze){console.warn("Could not enter fullscreen:",ze)}},100);return()=>clearTimeout(ye)},[]),i.useEffect(()=>{const X=()=>{const ye=!!document.fullscreenElement;b(ye),!ye&&!m&&(ae("âš ï¸ You exited fullscreen mode! This action has been recorded."),$(!0),D(ze=>ze+1),setTimeout(async()=>{if(pe.current&&document.fullscreenEnabled)try{await pe.current.requestFullscreen()}catch{}},500))};return document.addEventListener("fullscreenchange",X),()=>document.removeEventListener("fullscreenchange",X)},[m]);const[de,ce]=i.useState(!1);i.useEffect(()=>{const X=()=>{document.hidden&&!m&&!de&&D(ye=>{const ze=ye+1;return ze>=3?(ae(`ðŸš« DISQUALIFIED! You have exceeded the maximum allowed tab switches (${ze}/3). Session terminated.`),$(!0),ce(!0),setTimeout(async()=>{try{await oe.post(`${De}/submissions`,{studentId:n.id,problemId:r.id,language:j,code:g,submissionType:"editor",tabSwitches:ze})}catch(F){console.error("Auto-submit failed:",F)}document.fullscreenElement&&document.exitFullscreen(),d()},3e3)):(ae(`âš ï¸ Tab switch detected! (${ze}/3 violations) ${3-ze} more will disqualify you!`),$(!0)),ze})};return document.addEventListener("visibilitychange",X),()=>document.removeEventListener("visibilitychange",X)},[m,de,n.id,r.id,j,g,d]),i.useEffect(()=>{if(I){const X=setTimeout(()=>$(!1),3e3);return()=>clearTimeout(X)}},[I]);const B=X=>{p(X),f(Lr[X]?.defaultCode||"")},K=async()=>{W("running"),R(`Running code...
`),ge("output");try{const X=await oe.post(`${De}/run`,{code:g,language:j,problemId:r.id,sqlSchema:r.sqlSchema,stdin:te||""});R(X.data.output),W(X.data.status==="error"?"error":"success");try{const ye=await oe.post(`${De}/run-with-tests`,{problemId:r.id,code:g,language:j});ye.data?.testResults&&A({passed:ye.data.testResults.filter(ze=>ze.passed).length,total:ye.data.testResults.length,results:ye.data.testResults})}catch(ye){console.log("No test cases or test run failed:",ye)}}catch(X){R(`Error: ${X.response?.data?.details||"Failed to execute code."}`),W("error")}},[V,Ae]=i.useState(null),[Fe,He]=i.useState(!1),[Ie,Je]=i.useState(!1),Ve=async()=>{He(!0),Je(!0);try{const X=await oe.post(`${De}/hints`,{code:g,language:j,problemId:r.id});Ae(X.data)}catch{Ae({hints:["Think about the problem step by step.","Consider what data structure would be most efficient."],encouragement:"Don't give up! Every expert was once a beginner.",error:!0})}finally{He(!1)}},st=async()=>{W("submitting");try{const X=await oe.post(`${De}/submissions`,{studentId:n.id,problemId:r.id,language:j,code:g,submissionType:"editor",tabSwitches:L});k(X.data),W("done"),u&&u(),document.fullscreenElement&&document.exitFullscreen()}catch(X){X.response?.status===403&&X.response?.data?.error==="Attempt limit reached"?(k({status:"rejected",score:0,feedback:X.response.data.message||"You have used all attempts for this problem."}),W("done"),document.fullscreenElement&&document.exitFullscreen()):(k({status:"rejected",score:0,feedback:"Submission failed."}),W("error"))}},ve=()=>{!m&&!window.confirm("Exiting early will be recorded. Are you sure?")||(document.fullscreenElement&&document.exitFullscreen(),d())};return e.jsxs("div",{ref:pe,className:"proctored-container",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#0f172a",zIndex:1e4,display:"flex",flexDirection:"column"},children:[I&&e.jsxs("div",{style:{position:"fixed",top:"1rem",left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",padding:"1rem 2rem",borderRadius:"0.75rem",zIndex:10001,boxShadow:"0 10px 40px rgba(239, 68, 68, 0.5)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Be,{size:24}),e.jsx("span",{style:{fontWeight:600},children:G})]}),e.jsxs("div",{style:{borderBottom:"1px solid #334155",background:"#1e293b",padding:"1rem 2rem",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("h2",{style:{color:"#f8fafc",fontSize:"1.25rem",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"1rem"},children:[r.title,e.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem",borderRadius:"2rem",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#ef4444",animation:"pulse 2s infinite"}}),"ðŸ”’ PROCTORED MODE"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa"},children:r.type||"coding"}),e.jsx("span",{className:`difficulty-badge ${r.difficulty?.toLowerCase()}`,children:r.difficulty?.toUpperCase()}),L>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["âš ï¸ ",L," violations"]})]})]})}),e.jsx("button",{onClick:ve,style:{background:"#334155",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer"},children:"Exit Session"})]}),e.jsxs("div",{style:{padding:0,display:"flex",flexDirection:"row",flex:1,minHeight:0,overflow:"hidden",background:"#0f172a"},children:[e.jsxs("div",{style:{width:"400px",borderRight:"1px solid #334155",padding:"2rem",overflowY:"auto",background:"#0f172a"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"1.5rem",color:"#f8fafc"},children:"Problem Description"}),e.jsxs("div",{style:{color:"#cbd5e1",fontSize:"0.95rem",lineHeight:"1.7"},children:[r.description,r.type==="SQL"||r.language==="SQL"?e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[r.sqlSchema&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{color:"#06b6d4"},children:"ðŸ—„ï¸"}),e.jsx("strong",{style:{color:"#e2e8f0"},children:"Database Schema:"})]}),e.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"1rem",borderRadius:"6px",marginBottom:"1rem",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:r.sqlSchema})]}),r.expectedQueryResult&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{color:"#10b981"},children:"ðŸ“Š"}),e.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Query Result:"})]}),e.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"1rem",borderRadius:"6px",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:r.expectedQueryResult})]}),!r.sqlSchema&&!r.expectedQueryResult&&e.jsx("p",{style:{color:"#94a3b8",fontStyle:"italic",margin:0},children:"Write a SQL query to solve this problem. Your query will be executed against the database."})]}):e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[e.jsx("div",{style:{marginBottom:"0.5rem"},children:e.jsx("strong",{style:{color:"#e2e8f0"},children:"Sample Input:"})}),e.jsx("code",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block",marginBottom:"1rem"},children:r.sampleInput||r.testInput||"N/A"}),e.jsx("div",{style:{marginBottom:"0.5rem"},children:e.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Output:"})}),e.jsx("code",{style:{color:"#4ade80",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block"},children:r.expectedOutput||"N/A"})]})]}),e.jsxs("div",{style:{marginTop:"2rem",background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"0.75rem",padding:"1.25rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#fbbf24",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(br,{size:16})," Need Help?"]}),Ie?e.jsx("div",{children:Fe?e.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[e.jsx("div",{style:{color:"#fbbf24",marginBottom:"0.5rem"},children:"ðŸ¤”"}),e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.85rem",margin:0},children:"Analyzing your code..."})]}):V&&e.jsxs("div",{children:[V.encouragement&&e.jsx("div",{style:{background:"rgba(34, 197, 94, 0.1)",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",border:"1px solid rgba(34, 197, 94, 0.2)"},children:e.jsxs("p",{style:{color:"#4ade80",fontSize:"0.8rem",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(tr,{size:14})," ",V.encouragement]})}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("p",{style:{color:"#e2e8f0",fontSize:"0.8rem",fontWeight:600,margin:"0 0 0.5rem"},children:"ðŸ’¡ Hints:"}),e.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"#cbd5e1",fontSize:"0.8rem",lineHeight:1.8},children:V.hints?.map((X,ye)=>e.jsx("li",{style:{marginBottom:"0.5rem"},children:X},ye))})]}),V.conceptsToReview&&V.conceptsToReview.length>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("p",{style:{color:"#e2e8f0",fontSize:"0.8rem",fontWeight:600,margin:"0 0 0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(wr,{size:14})," Concepts to Review:"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:V.conceptsToReview.map((X,ye)=>e.jsx("span",{style:{background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa",padding:"0.25rem 0.75rem",borderRadius:"2rem",fontSize:"0.7rem",border:"1px solid rgba(59, 130, 246, 0.3)"},children:X},ye))})]}),V.commonMistakes&&e.jsx("div",{style:{background:"rgba(239, 68, 68, 0.1)",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:e.jsxs("p",{style:{color:"#f87171",fontSize:"0.8rem",margin:0},children:[e.jsx("strong",{children:"âš ï¸ Common Mistake:"})," ",V.commonMistakes]})}),e.jsx("button",{onClick:()=>{Je(!1),Ae(null)},style:{background:"transparent",border:"1px solid #334155",color:"#94a3b8",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",marginTop:"1rem",width:"100%"},children:"Hide Hints"})]})}):e.jsxs("div",{children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.8rem",margin:"0 0 1rem",lineHeight:1.6},children:"Stuck on this problem? Get AI-powered hints to guide you without revealing the full solution."}),e.jsxs("button",{onClick:Ve,disabled:Fe,style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",border:"none",color:"#1e293b",padding:"0.6rem 1.2rem",borderRadius:"6px",cursor:"pointer",fontWeight:600,fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center"},children:[e.jsx(tr,{size:16})," ",Fe?"Getting Hints...":"Get AI Hints"]})]})]}),e.jsxs("div",{style:{marginTop:"2rem",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"0.75rem",padding:"1.25rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#ef4444",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Be,{size:16})," Proctoring Rules"]}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"#94a3b8",fontSize:"0.8rem",lineHeight:1.8},children:[e.jsx("li",{children:"Do not switch tabs or windows"}),e.jsx("li",{children:"Do not exit fullscreen mode"}),e.jsx("li",{children:"All violations are recorded"}),e.jsx("li",{children:"3+ violations may result in disqualification"})]})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"#1e293b"},children:[!m&&e.jsxs("div",{style:{padding:"0.75rem 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #334155",background:"#1e293b"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[e.jsx("label",{style:{color:"#94a3b8",fontSize:"0.85rem"},children:"Language:"}),e.jsx("select",{value:j,onChange:X=>B(X.target.value),disabled:r.type==="SQL"||r.language==="SQL",style:{background:"#0f172a",color:"#f8fafc",border:"1px solid #334155",borderRadius:"6px",padding:"0.4rem 0.75rem",fontSize:"0.85rem",opacity:r.type==="SQL"||r.language==="SQL"?.7:1,cursor:r.type==="SQL"||r.language==="SQL"?"not-allowed":"pointer"},children:Object.keys(Lr).map(X=>e.jsx("option",{value:X,children:X},X))})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[j!=="SQL"&&e.jsxs("button",{onClick:K,disabled:h==="running"||h==="submitting",style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[e.jsx(qt,{size:16})," ",h==="running"?"Running...":"Run Code"]}),e.jsxs("button",{onClick:st,disabled:h==="running"||h==="submitting"||m,style:{background:m?"#334155":"linear-gradient(135deg, #10b981, #059669)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:m?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[e.jsx(Mt,{size:16})," ",h==="submitting"?"Submitting...":"Submit"]})]})]}),!m&&e.jsx("div",{style:{flex:1,position:"relative",minHeight:0},children:e.jsx(Vr,{height:"100%",language:Lr[j]?.monacoLang||"python",theme:"vs-dark",value:g,onChange:X=>f(X),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,automaticLayout:!0,padding:{top:20}}})}),m&&e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"2rem",background:"#0f172a",color:"#f8fafc"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",marginBottom:"2.5rem",paddingBottom:"2rem",borderBottom:"1px solid #334155"},children:[e.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:`conic-gradient(${m.score>=80?"#10b981":m.score>=60?"#f59e0b":"#ef4444"} ${m.score*3.6}deg, #1e293b 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},children:e.jsxs("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#0f172a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"2.5rem",fontWeight:800,color:"#f8fafc"},children:m.score}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#94a3b8",textTransform:"uppercase",letterSpacing:"1px"},children:"Score"})]})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{margin:0,color:m.score>=80?"#10b981":m.score>=60?"#f59e0b":"#ef4444",fontSize:"2rem",marginBottom:"0.75rem",fontWeight:700},children:m.score>=90?"Outstanding Performance!":m.score>=80?"Excellent Work!":m.score>=60?"Good Effort":"Needs Improvement"}),e.jsx("p",{style:{margin:0,color:"#94a3b8",fontSize:"1.1rem",lineHeight:"1.6"},children:m.feedback||(m.status==="accepted"?"Your solution passed all tests and met the requirements.":"Your solution needs some improvements.")}),L>0&&e.jsxs("p",{style:{marginTop:"0.5rem",color:"#f59e0b",fontSize:"0.9rem"},children:["âš ï¸ ",L," tab switch notifications recorded."]})]})]}),m.analysis&&e.jsxs("div",{style:{marginBottom:"2.5rem"},children:[e.jsxs("h4",{style:{color:"#f8fafc",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(ur,{size:20,color:"#3b82f6"})," Performance Analysis"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.25rem"},children:Object.entries(m.analysis).map(([X,ye])=>{if(ye==="Unknown"||ye===null)return null;const ze=parseInt(ye)||0,F=X.replace(/([A-Z])/g," $1").trim();return e.jsxs("div",{style:{background:"#1e293b",padding:"1.25rem",borderRadius:"1rem",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.9rem",color:"#94a3b8",textTransform:"capitalize",fontWeight:600},children:F}),e.jsxs("span",{style:{fontWeight:800,color:ze>=80?"#10b981":ze>=60?"#f59e0b":"#ef4444",fontSize:"1.1rem"},children:[ze,"%"]})]}),e.jsx("div",{style:{height:"8px",background:"rgba(255,255,255,0.05)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${ze}%`,height:"100%",background:ze>=80?"#10b981":ze>=60?"#f59e0b":"#ef4444",borderRadius:"4px",transition:"width 1s ease-out"}})})]},X)})})]}),m.aiExplanation&&e.jsxs("div",{style:{marginBottom:"2.5rem"},children:[e.jsxs("h4",{style:{color:"#f8fafc",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(wr,{size:20,color:"#8b5cf6"})," Detailed AI Analysis"]}),e.jsx("div",{style:{background:"#1e293b",padding:"1.75rem",borderRadius:"1rem",border:"1px solid #334155",color:"#cbd5e1",fontSize:"1rem",lineHeight:"1.8",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:m.aiExplanation})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:e.jsx("button",{onClick:ve,style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"1rem 2rem",borderRadius:"0.75rem",cursor:"pointer",fontWeight:600,fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:"Close Session"})})]}),!m&&j!=="SQL"&&e.jsxs("div",{style:{maxHeight:"350px",background:"#020617",borderTop:"1px solid #334155",display:"flex",flexDirection:"column",overflowY:"auto"},children:[e.jsx("div",{style:{display:"flex",borderBottom:"1px solid #1e293b",background:"#0f172a"},children:["input","output","tests"].map(X=>e.jsxs("button",{onClick:()=>ge(X),style:{padding:"0.75rem 1.25rem",background:ie===X?"#1e293b":"transparent",border:"none",borderBottom:ie===X?`2px solid ${X==="input"?"#f59e0b":X==="output"?"#3b82f6":"#10b981"}`:"2px solid transparent",color:ie===X?X==="input"?"#fbbf24":X==="output"?"#60a5fa":"#4ade80":"#64748b",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.5rem"},children:[X==="input"&&e.jsxs(e.Fragment,{children:[e.jsx(St,{size:14})," Custom Input"]}),X==="output"&&e.jsxs(e.Fragment,{children:[e.jsx(vt,{size:14})," Output ",T&&e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:h==="success"?"#10b981":h==="error"?"#ef4444":"#3b82f6"}})]}),X==="tests"&&e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:14})," Test Cases",N&&e.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"0.7rem",fontWeight:600,background:N.passed===N.total?"rgba(16, 185, 129, 0.2)":"rgba(249, 115, 22, 0.2)",color:N.passed===N.total?"#10b981":"#f97316"},children:[N.passed,"/",N.total]})]})]},X))}),ie==="input"&&e.jsxs("div",{style:{padding:"0.75rem",flex:1},children:[e.jsx("textarea",{value:te,onChange:X=>se(X.target.value),placeholder:`Enter your input here (stdin)...
Example:
5
1 2 3 4 5`,style:{width:"100%",minHeight:"120px",background:"#0f172a",color:"#e2e8f0",border:"1px solid #334155",borderRadius:"8px",padding:"0.75rem",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical",outline:"none"}}),e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.7rem",color:"#64748b"},children:'ðŸ’¡ This input will be passed as stdin when you click "Run Code"'})]}),ie==="output"&&e.jsx("div",{style:{padding:"1rem",fontFamily:"monospace",color:"#e2e8f0",fontSize:"0.9rem",whiteSpace:"pre-wrap",flex:1,overflowY:"auto"},children:T||"No output yet. Run your code to see results."}),ie==="tests"&&e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:e.jsx(Fn,{problemId:r.id,code:g,language:j,showRunButton:!0,onRunComplete:X=>{X?.testResults&&A({passed:X.testResults.filter(ye=>ye.passed).length,total:X.testResults.length})}})})]}),(r.type==="SQL"||r.language==="SQL")&&!m&&e.jsxs("div",{style:{borderTop:"1px solid #334155",padding:"1.25rem",background:"#0f172a"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.25rem",padding:"4px",background:"#020617",borderRadius:"10px",width:"fit-content"},children:[e.jsxs("button",{onClick:()=>y("validator"),style:{padding:"0.6rem 1.25rem",borderRadius:"8px",border:"none",cursor:"pointer",background:o==="validator"?"rgba(59, 130, 246, 0.15)":"transparent",color:o==="validator"?"#60a5fa":"#64748b",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(cr,{size:16})," Validator"]}),e.jsxs("button",{onClick:()=>y("visualizer"),style:{padding:"0.6rem 1.25rem",borderRadius:"8px",border:"none",cursor:"pointer",background:o==="visualizer"?"rgba(139, 92, 246, 0.15)":"transparent",color:o==="visualizer"?"#a78bfa":"#64748b",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Tt,{size:16})," ER Diagram"]}),e.jsxs("button",{onClick:()=>y("debugger"),style:{padding:"0.6rem 1.25rem",borderRadius:"8px",border:"none",cursor:"pointer",background:o==="debugger"?"rgba(16, 185, 129, 0.15)":"transparent",color:o==="debugger"?"#4ade80":"#64748b",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(At,{size:16})," Debugger"]})]}),e.jsxs("div",{className:"sql-tool-container animate-fadeIn",children:[o==="validator"&&e.jsx(qn,{query:g,onQueryChange:f,schemaContext:r.sqlSchema}),o==="visualizer"&&e.jsx(Hn,{schema:r.sqlSchema}),o==="debugger"&&e.jsx(Qn,{query:g,schema:r.sqlSchema})]})]})]})]}),e.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.5; transform: scale(1.2); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function _l({user:r}){const[n,d]=i.useState([]),[u,c]=i.useState([]),[g,f]=i.useState([]),[j,p]=i.useState([]),[o,y]=i.useState(!0),[T,R]=i.useState(null),[h,W]=i.useState(null),[m,k]=i.useState("all"),[L,D]=i.useState(null),[S,b]=i.useState(null),[I,$]=i.useState(""),G=()=>{y(!0),Promise.all([oe.get(`${De}/submissions?studentId=${r.id}`),oe.get(`${De}/aptitude-submissions?studentId=${r.id}`),oe.get(`${De}/global-test-submissions?studentId=${r.id}`)]).then(([A,te,se])=>{const ie=Array.isArray(A.data)?A.data:A.data?.data||[],ge=ie.filter(de=>de.isMLTask).map(de=>({...de,subType:"ml-task"})),pe=ie.filter(de=>!de.isMLTask).map(de=>({...de,subType:"code"}));d(pe),c(ge),f((te.data||[]).map(de=>({...de,subType:"aptitude",itemTitle:de.testTitle}))),p((se.data||[]).map(de=>({...de,subType:"global",itemTitle:de.testTitle,score:de.overallPercentage}))),y(!1)}).catch(A=>{console.error("Fetch submissions error:",A),y(!1)})};i.useEffect(()=>{G()},[r.id]);const ae=async A=>{if(window.confirm("Are you sure you want to delete this submission?"))try{const te=A.subType==="global"?`${De}/global-test-submissions/${A.id}`:`${De}/submissions/${A.id}`;await oe.delete(te),G()}catch{alert("Error deleting submission")}},ne=[...n,...u,...g,...j].sort((A,te)=>new Date(te.submittedAt)-new Date(A.submittedAt)),N=(m==="all"?ne:m==="code"?n:m==="ml-task"?u:m==="aptitude"?g:j).filter(te=>(te.itemTitle||te.testTitle||"").toLowerCase().includes(I.toLowerCase())||te.status.toLowerCase().includes(I.toLowerCase()));return o?e.jsx("div",{className:"loading-spinner"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>k("all"),style:{padding:"0.6rem 1.2rem",background:m==="all"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:m==="all"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:m==="all"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["All (",ne.length,")"]}),e.jsxs("button",{onClick:()=>k("code"),style:{padding:"0.6rem 1.2rem",background:m==="code"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:m==="code"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:m==="code"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["ðŸ’» Code (",n.length,")"]}),e.jsxs("button",{onClick:()=>k("ml-task"),style:{padding:"0.6rem 1.2rem",background:m==="ml-task"?"#06b6d4":"rgba(6, 182, 212, 0.1)",border:m==="ml-task"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:m==="ml-task"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["ðŸ§  ML Tasks (",u.length,")"]}),e.jsxs("button",{onClick:()=>k("aptitude"),style:{padding:"0.6rem 1.2rem",background:m==="aptitude"?"#8b5cf6":"rgba(139, 92, 246, 0.1)",border:m==="aptitude"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:m==="aptitude"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["ðŸ“ Aptitude (",g.length,")"]}),e.jsxs("button",{onClick:()=>k("global"),style:{padding:"0.6rem 1.2rem",background:m==="global"?"#3b82f6":"rgba(59, 130, 246, 0.1)",border:m==="global"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:m==="global"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["ðŸŒ Global (",j.length,")"]})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx($r,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search problem or status...",style:{padding:"0.6rem 1rem 0.6rem 2.5rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"white",width:"250px"},value:I,onChange:A=>$(A.target.value)})]})]}),e.jsx("div",{className:"table-container animate-slideUp card glass",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Problem / Test"}),e.jsx("th",{children:"Language"}),e.jsx("th",{children:"Score"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Submitted At"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:N.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{textAlign:"center",padding:"3rem"},children:"No submissions found"})}):N.map(A=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:A.subType==="ml-task"?"rgba(6, 182, 212, 0.1)":A.subType==="aptitude"?"rgba(139, 92, 246, 0.1)":"var(--primary-alpha)",color:A.subType==="ml-task"?"#06b6d4":A.subType==="aptitude"?"#8b5cf6":"var(--primary)"},children:A.subType==="ml-task"?"ðŸ§  ML Task":A.subType==="aptitude"?"ðŸ“ Aptitude":A.subType==="global"?"ðŸŒ Global":"ðŸ’» Code"})}),e.jsx("td",{children:e.jsx("div",{style:{color:"var(--primary)",fontWeight:500},children:A.itemTitle||A.testTitle})}),e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:A.subType==="aptitude"?"N/A":A.subType==="global"?"Mixed":A.language?.toUpperCase()||"N/A"})}),e.jsxs("td",{style:{fontWeight:700,fontSize:"1.1rem"},children:[A.score,"%"]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",alignItems:"center"},children:[e.jsx("span",{className:`status-badge ${A.status}`,children:A.status}),A.plagiarism?.detected&&e.jsxs("span",{className:"status-badge plagiarized",style:{display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(Be,{size:11})," Plag"]}),(A.integrity?.integrityViolation||A.tabSwitches>0)&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(Be,{size:10})," ",A.integrity?.tabSwitches||A.tabSwitches||0," Tab"]}),A.cameraBlockedCount>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:["ðŸ“· ",A.cameraBlockedCount," Cam"]}),A.phoneDetectionCount>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:["ðŸ“± ",A.phoneDetectionCount," Phone"]})]})}),e.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(A.submittedAt).toLocaleString()}),e.jsx("td",{children:e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:A.subType==="aptitude"?e.jsxs("button",{onClick:()=>D(A),style:{background:"rgba(139, 92, 246, 0.1)",border:"none",color:"#8b5cf6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ot,{size:14})," Results"]}):A.subType==="global"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>b(A.id),style:{background:"var(--primary-alpha)",border:"none",color:"var(--primary)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ot,{size:14})," Full Report"]}),e.jsx("button",{onClick:()=>ae(A),style:{background:"var(--danger-alpha)",border:"none",color:"var(--danger)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:e.jsx(ls,{size:14})})]}):A.subType==="ml-task"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>W(A),style:{background:"rgba(6, 182, 212, 0.1)",border:"none",color:"#06b6d4",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ot,{size:14})," ML Report"]}),e.jsx("button",{onClick:()=>ae(A),style:{background:"var(--danger-alpha)",border:"none",color:"var(--danger)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:e.jsx(ls,{size:14})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>R(A),style:{background:"var(--primary-alpha)",border:"none",color:"var(--primary)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ot,{size:14})," Report"]}),e.jsx("button",{onClick:()=>ae(A),style:{background:"var(--danger-alpha)",border:"none",color:"var(--danger)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:e.jsx(ls,{size:14})})]})})})]},A.id))})]})}),T&&e.jsx(El,{submission:T,user:r,onClose:()=>R(null)}),h&&e.jsx(Nl,{submission:h,onClose:()=>W(null)}),L&&e.jsx(Yi,{submission:L,onClose:()=>D(null),isStudentView:!0}),S&&e.jsx(Vi,{submissionId:S,onClose:()=>b(null),isStudentView:!0})]})}function El({submission:r,user:n,onClose:d}){const u=j=>{if(!j)return{score:0,max:0,comment:""};const p=j.match(/(\d+)\/(\d+)/);return p?{score:parseInt(p[1]),max:parseInt(p[2]),comment:j.replace(/\d+\/\d+\s*[-â€“]?\s*/,"").trim()}:{score:0,max:0,comment:j}},c=r.analysis||{},g={correctness:u(c.correctness),efficiency:u(c.efficiency),codeStyle:u(c.codeStyle),bestPractices:u(c.bestPractices)},f=({label:j,icon:p,score:o,max:y,comment:T,color:R})=>e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[p,e.jsx("span",{style:{fontWeight:600,fontSize:"0.9rem"},children:j})]}),e.jsxs("span",{style:{fontWeight:700,color:R},children:[o,"/",y]})]}),e.jsx("div",{style:{background:"var(--bg-dark)",borderRadius:"0.5rem",height:"8px",overflow:"hidden"},children:e.jsx("div",{style:{width:y>0?`${o/y*100}%`:"0%",height:"100%",background:`linear-gradient(90deg, ${R}, ${R}88)`,borderRadius:"0.5rem",transition:"width 0.5s ease"}})}),T&&e.jsx("p",{style:{margin:"0.5rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)"},children:T})]});return e.jsx("div",{className:"modal-overlay",onClick:d,children:e.jsxs("div",{className:"modal-content",onClick:j=>j.stopPropagation(),style:{maxWidth:"900px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:r.status==="accepted"?"linear-gradient(135deg, var(--success), #06b6d4)":"linear-gradient(135deg, var(--danger), var(--warning))",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(St,{size:20,color:"white"})}),e.jsx("h2",{children:"Submission Report"})]}),e.jsx("button",{onClick:d,className:"modal-close",children:e.jsx(We,{size:20})})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"75vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"var(--bg-dark)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Student"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600,fontSize:"1.1rem"},children:n?.name})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submitted At"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:new Date(r.submittedAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Language"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:r.language})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:r.status==="accepted"?"var(--success-alpha)":"var(--danger-alpha)",borderRadius:"1rem",border:`1px solid ${r.status==="accepted"?"var(--success)":"var(--danger)"}`},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"3rem",fontWeight:800,color:r.status==="accepted"?"var(--success)":"var(--danger)"},children:r.score}),e.jsx("div",{style:{color:"var(--text-muted)"},children:"AI Evaluation Score"})]}),e.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"1rem",background:r.status==="accepted"?"var(--success-alpha)":"var(--danger-alpha)",color:r.status==="accepted"?"var(--success)":"var(--danger)",fontWeight:700,fontSize:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.status==="accepted"?e.jsx(Le,{size:24}):e.jsx(We,{size:24}),r.status?.toUpperCase()]})]}),(c.correctness||c.efficiency||c.codeStyle||c.bestPractices)&&e.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"var(--bg-dark)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:[e.jsxs("h4",{style:{margin:"0 0 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18,color:"var(--primary)"})," Detailed Score Breakdown"]}),e.jsx(f,{label:"Correctness",icon:e.jsx(Le,{size:16,color:"#10b981"}),score:g.correctness.score,max:g.correctness.max||40,comment:g.correctness.comment,color:"#10b981"}),e.jsx(f,{label:"Efficiency",icon:e.jsx(yr,{size:16,color:"#3b82f6"}),score:g.efficiency.score,max:g.efficiency.max||25,comment:g.efficiency.comment,color:"#3b82f6"}),e.jsx(f,{label:"Code Style",icon:e.jsx(Ot,{size:16,color:"#8b5cf6"}),score:g.codeStyle.score,max:g.codeStyle.max||20,comment:g.codeStyle.comment,color:"#8b5cf6"}),e.jsx(f,{label:"Best Practices",icon:e.jsx(er,{size:16,color:"#f59e0b"}),score:g.bestPractices.score,max:g.bestPractices.max||15,comment:g.bestPractices.comment,color:"#f59e0b"})]}),r.plagiarism?.detected&&e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"var(--danger-alpha)",borderRadius:"0.75rem",border:"1px solid var(--danger)",display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(Be,{size:24,color:"var(--danger)"}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"var(--danger)"},children:"Plagiarism Detected"}),e.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["This code matches a submission from ",r.plagiarism.copiedFromName]})]})]}),r.integrity?.integrityViolation&&e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.75rem",border:"1px solid #f59e0b",display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(Be,{size:24,color:"#f59e0b"}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#f59e0b"},children:"Integrity Violation"}),e.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["Tab switches detected: ",r.integrity.tabSwitches,". Score was capped due to academic integrity concerns."]})]})]}),(r.tabSwitches>0||r.copyPasteAttempts>0||r.cameraBlockedCount>0||r.phoneDetectionCount>0)&&e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"var(--bg-dark)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#f59e0b"},children:[e.jsx(Be,{size:18})," Proctoring Violations"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[r.tabSwitches>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Ot,{size:18,color:"#f59e0b"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[r.tabSwitches," Tab Switches"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(r.tabSwitches*5,25)," pts"]})]})]}),r.copyPasteAttempts>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“‹"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[r.copyPasteAttempts," Copy/Paste"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(r.copyPasteAttempts*3,15)," pts"]})]})]}),r.cameraBlockedCount>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“·"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[r.cameraBlockedCount," Camera Blocked"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(r.cameraBlockedCount*10,30)," pts"]})]})]}),r.phoneDetectionCount>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“±"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[r.phoneDetectionCount," Phone Detected"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(r.phoneDetectionCount*15,45)," pts"]})]})]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(tr,{size:18,color:"var(--primary)"})," AI Feedback"]}),e.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.5rem"},children:r.feedback||"No feedback provided."})]}),r.aiExplanation&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ot,{size:18,color:"var(--secondary)"})," Why this score?"]}),e.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--secondary-alpha)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid var(--secondary)"},children:r.aiExplanation})]}),r.suggestions&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(br,{size:18,color:"#fbbf24"})," Improvement Suggestion"]}),e.jsx("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))",padding:"1rem",borderRadius:"0.5rem",border:"1px solid rgba(251, 191, 36, 0.3)"},children:e.jsx("p",{style:{color:"#fbbf24",margin:0,fontSize:"0.95rem"},children:r.suggestions})})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Submitted Code"}),e.jsx("pre",{style:{background:"var(--code-bg)",padding:"1.5rem",borderRadius:"0.5rem",overflow:"auto",maxHeight:"300px",fontSize:"0.85rem",fontFamily:"monospace",color:"var(--code-text)",border:"1px solid var(--border-color)"},children:r.code})]})]})]})})}function Nl({submission:r,onClose:n}){const d=(r.submissionType||"").includes("github"),u=g=>{if(!g||g==="N/A")return null;const f=g.match(/(\d+)/);return f?parseInt(f[1]):null},c=[{label:"Correctness",value:u(r.analysis?.correctness),color:"#3b82f6"},{label:"Code Quality",value:u(r.analysis?.efficiency),color:"#8b5cf6"},{label:"Documentation",value:u(r.analysis?.codeStyle),color:"#06b6d4"},{label:"Model Performance",value:u(r.analysis?.bestPractices),color:"#10b981"}].filter(g=>g.value!==null);return e.jsx("div",{className:"modal-overlay",onClick:n,children:e.jsxs("div",{className:"modal-content",onClick:g=>g.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #06b6d4, #0891b2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(It,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"#06b6d4",textTransform:"uppercase",fontWeight:600},children:"ML Task Report"}),e.jsx("h2",{style:{margin:0,fontSize:"1.1rem"},children:r.itemTitle||"ML Task"})]})]}),e.jsx("button",{onClick:n,className:"modal-close",children:e.jsx(We,{size:20})})]}),e.jsxs("div",{className:"modal-body",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",marginBottom:"2rem",padding:"1.5rem",borderRadius:"1rem",background:r.status==="accepted"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",border:`1px solid ${r.status==="accepted"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[e.jsx("div",{style:{width:"90px",height:"90px",borderRadius:"50%",background:`conic-gradient(${r.score>=80?"#10b981":r.score>=60?"#f59e0b":"#ef4444"} ${(r.score||0)*3.6}deg, rgba(255,255,255,0.05) 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsxs("div",{style:{width:"76px",height:"76px",borderRadius:"50%",background:"var(--bg-card)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"1.6rem",fontWeight:800,color:"var(--text-main)"},children:r.score}),e.jsx("span",{style:{fontSize:"0.65rem",color:"var(--text-muted)"},children:"SCORE"})]})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem 1rem",borderRadius:"2rem",marginBottom:"0.5rem",background:r.status==="accepted"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",color:r.status==="accepted"?"#10b981":"#ef4444",fontWeight:700,fontSize:"0.9rem"},children:[r.status==="accepted"?e.jsx(Le,{size:16}):e.jsx(We,{size:16}),(r.status||"pending").toUpperCase()]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"0.5rem"},children:[e.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:["ðŸ“… ",new Date(r.submittedAt).toLocaleString()]}),e.jsx("span",{style:{fontSize:"0.8rem",color:"#06b6d4",fontWeight:600},children:d?"ðŸ”— GitHub Submission":"ðŸ“ File Upload"})]})]})]}),c.length>0&&e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-main)"},children:[e.jsx(ur,{size:18,color:"#06b6d4"})," Performance Metrics"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:c.map(g=>e.jsxs("div",{style:{background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:g.label}),e.jsxs("span",{style:{fontWeight:700,color:g.value>=80?"#10b981":g.value>=60?"#f59e0b":"#ef4444"},children:[g.value,"%"]})]}),e.jsx("div",{style:{height:"6px",background:"rgba(255,255,255,0.05)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${g.value}%`,height:"100%",background:g.color,borderRadius:"3px",transition:"width 1s ease-out"}})})]},g.label))})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(tr,{size:18,color:"#06b6d4"})," AI Feedback"]}),e.jsx("div",{style:{background:"var(--bg-dark)",padding:"1.25rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)",whiteSpace:"pre-wrap",color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.7",maxHeight:"300px",overflowY:"auto"},children:r.feedback||"No feedback provided."})]}),r.aiExplanation&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ot,{size:18,color:"#8b5cf6"})," Summary"]}),e.jsx("div",{style:{background:"rgba(139, 92, 246, 0.05)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid rgba(139, 92, 246, 0.2)",color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.6"},children:r.aiExplanation})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d?e.jsx(kr,{size:18,color:"var(--text-main)"}):e.jsx(St,{size:18,color:"var(--text-main)"}),d?"GitHub Repository":"Submitted Code"]}),d?e.jsx("div",{style:{background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)"},children:e.jsxs("a",{href:r.code,target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6",display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[e.jsx(ta,{size:16})," ",r.code]})}):e.jsx("pre",{style:{background:"var(--bg-dark)",padding:"1.25rem",borderRadius:"0.75rem",overflow:"auto",maxHeight:"300px",fontSize:"0.8rem",fontFamily:"monospace",color:"var(--text-main)",border:"1px solid var(--border-color)",lineHeight:"1.6"},children:r.code})]})]})]})})}function Ll({user:r}){const[n,d]=i.useState([]),[u,c]=i.useState(!0),[g,f]=i.useState(null),[j,p]=i.useState(!1),[o,y]=i.useState([]),[T,R]=i.useState(null);i.useEffect(()=>{const S=async()=>{try{const I=await oe.get(`${De}/global-tests?status=live`),$=await oe.get(`${De}/tests/allocated-to/${r.id}`),G=Array.isArray(I.data)?I.data:[],ae=Array.isArray($.data)?$.data:[],ne=G.filter(v=>{const N=ae.find(A=>A.test_id===v.id);return!N||!N.has_allocations?!0:N.is_allocated_to_student});d(ne)}catch(I){if(I.response?.status===503)d([]);else{console.error(I);try{const $=await oe.get(`${De}/global-tests?status=live`);d(Array.isArray($.data)?$.data:[])}catch{d([])}}}finally{c(!1)}},b=async()=>{try{const I=await oe.get(`${De}/global-test-submissions?studentId=${r.id}`);y(Array.isArray(I.data)?I.data:[])}catch{y([])}};S(),b()},[r.id]);const h=S=>o.filter(b=>b.testId===S).length,W=S=>o.find(b=>b.testId===S),m=(S,b)=>{const I=o.some(ae=>ae.testId===S&&ae.status==="passed"),$=h(S),G=b?.maxAttempts??1;return I||G!==-1&&$>=G},k=async S=>{if(S.startTime&&new Date(S.startTime)>new Date){alert("This test is not yet available.");return}if(S.deadline&&new Date(S.deadline)<new Date){alert("This test has expired.");return}const b=o.filter($=>$.testId===S.id).length,I=S.maxAttempts??1;if(I!==-1&&b>=I){alert(`Max attempts (${I}) reached for this test.`);return}try{const $=await oe.get(`${De}/global-tests/${S.id}`);f($.data),p(!0)}catch($){alert($.response?.data?.error||"Failed to load test")}},L=S=>{p(!1),f(null),S&&R(S),oe.get(`${De}/global-test-submissions?studentId=${r.id}`).then(b=>y(Array.isArray(b.data)?b.data:[])).catch(()=>{})};if(u)return e.jsx("div",{className:"loading-spinner"});if(j&&g)return e.jsx(sl,{test:g,user:r,onClose:()=>{p(!1),f(null)},onComplete:L});o.filter(S=>S.status==="passed").length;const D=()=>{if(!T)return null;const S=T.sectionScores||{},b=T.status==="passed";return e.jsxs("div",{style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.9)",backdropFilter:"blur(8px)",zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"auto",animation:"fadeIn 0.3s ease-out"},children:[e.jsx("style",{children:`
                    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                    @keyframes scaleIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
                    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
                `}),e.jsxs("div",{style:{background:"rgba(30,41,59,0.98)",borderRadius:"24px",border:`2px solid ${b?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)"}`,maxWidth:800,width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:`0 25px 50px -12px ${b?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,animation:"scaleIn 0.4s ease-out"},children:[e.jsxs("div",{style:{padding:"2rem 2rem 1.5rem",background:b?"linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(6, 182, 212, 0.1))":"linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(251, 146, 60, 0.1))",borderBottom:`1px solid ${b?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`,textAlign:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:b?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",boxShadow:`0 8px 24px ${b?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)"}`,animation:b?"pulse 2s ease-in-out infinite":"none"},children:b?e.jsx(_t,{size:40,color:"white"}):e.jsx(We,{size:40,color:"white"})}),e.jsx("h2",{style:{margin:"0 0 0.5rem",color:"white",fontSize:"1.75rem",fontWeight:800},children:b?"ðŸŽ‰ Congratulations!":"Test Completed"}),e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.7)",fontSize:"1rem"},children:b?"You have successfully passed the assessment!":"Keep practicing to improve your score."})]}),e.jsxs("div",{style:{padding:"2rem",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"2rem",flexWrap:"wrap",justifyContent:"center"},children:[e.jsxs("div",{style:{padding:"1.5rem 2.5rem",background:b?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",borderRadius:16,border:`2px solid ${b?"rgba(16,185,129,0.4)":"rgba(239,68,68,0.4)"}`,textAlign:"center",minWidth:"180px"},children:[e.jsxs("div",{style:{fontSize:"3.5rem",fontWeight:900,color:b?"#10b981":"#ef4444",lineHeight:1},children:[T.score??T.overallPercentage,"%"]}),e.jsx("div",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.6)",marginTop:"0.5rem",textTransform:"uppercase",letterSpacing:"2px",fontWeight:600},children:"Overall Score"})]}),e.jsxs("div",{style:{padding:"1.5rem 2rem",background:"rgba(139, 92, 246, 0.1)",borderRadius:16,border:"1px solid rgba(139, 92, 246, 0.3)",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"2rem",fontWeight:800,color:"#a78bfa"},children:[T.correctCount||0,"/",T.totalQuestions||0]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.5)",marginTop:"0.25rem"},children:"Correct Answers"})]})]}),e.jsxs("h3",{style:{margin:"0 0 1rem",color:"white",fontSize:"1.1rem",fontWeight:700,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(At,{size:18,color:"#8b5cf6"})," Section-wise Performance"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"0.75rem"},children:Object.entries(S).map(([I,$])=>{const G=$>=70?"#10b981":$>=50?"#f59e0b":"#ef4444";return e.jsxs("div",{style:{padding:"1rem",background:"rgba(30, 41, 59, 0.8)",borderRadius:12,border:"1px solid rgba(255,255,255,0.1)",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:G},children:[$,"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",textTransform:"capitalize",marginTop:"0.25rem"},children:I})]},I)})})]}),e.jsx("div",{style:{padding:"1.25rem 2rem",borderTop:"1px solid rgba(139,92,246,0.2)",display:"flex",justifyContent:"center",gap:"1rem",background:"rgba(15, 23, 42, 0.5)"},children:e.jsx("button",{type:"button",onClick:()=>R(null),style:{padding:"0.85rem 2.5rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"12px",color:"white",fontWeight:700,fontSize:"1rem",cursor:"pointer",boxShadow:"0 4px 14px rgba(139, 92, 246, 0.4)",transition:"all 0.2s"},onMouseOver:I=>I.target.style.transform="translateY(-2px)",onMouseOut:I=>I.target.style.transform="translateY(0)",children:"Close & View Results"})})]})]})};return e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:56,height:56,borderRadius:16,background:"linear-gradient(135deg, #06b6d4, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(At,{size:28,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Global Complete Tests"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Aptitude, Verbal, Logical, Coding, SQL â€“ all in one test"})]})]})}),n.length===0?e.jsx("div",{style:{textAlign:"center",padding:"3rem",background:"var(--bg-card)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:e.jsx("p",{style:{color:"var(--text-muted)"},children:"No global tests available. Check back later."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(6, 182, 212, 0.1)",color:"#06b6d4"},children:e.jsx(At,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Available"}),e.jsx("span",{className:"stat-value",children:n.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:e.jsx(Le,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Submitted"}),e.jsx("span",{className:"stat-value",children:o.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:e.jsx(_t,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Passed"}),e.jsx("span",{className:"stat-value",children:o.filter(S=>S.status==="passed").length})]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:n.map(S=>{const b=m(S.id,S),I=W(S.id),$=h(S.id),G=I?.status==="passed",ae=S.maxAttempts===-1||$<(S.maxAttempts||1),ne=!G&&ae&&$>0;return e.jsxs("div",{className:"card glass",style:{padding:"1.5rem",position:"relative",overflow:"hidden"},children:[$>0&&e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",padding:"0.25rem 0.75rem",borderRadius:"20px",background:G?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:G?"#10b981":"#ef4444",fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.25rem"},children:G?e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:14})," Passed"]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{size:14})," Failed"]})}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #06b6d4, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(At,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:600},children:S.title}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[e.jsx("span",{className:`difficulty-badge ${S.difficulty?.toLowerCase()}`,children:S.difficulty}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[e.jsx(ft,{size:14})," ",S.duration," min"]})]})]})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"1.5rem",fontSize:"0.85rem",color:"var(--text-muted)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:16,color:"#06b6d4"}),e.jsxs("span",{children:[S.totalQuestions," Questions"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_t,{size:16,color:"#f59e0b"}),e.jsxs("span",{children:["Pass: ",S.passingScore,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Be,{size:16,color:"#ef4444"}),e.jsxs("span",{children:["Tab Limit: ",S.maxTabSwitches||3]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(yr,{size:16,color:"#3b82f6"}),e.jsxs("span",{children:["Attempts: ",$,"/",S.maxAttempts===-1?"âˆž":S.maxAttempts||1]})]}),S.deadline&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:S.startTime&&new Date(S.startTime)>new Date?"#f59e42":S.deadline&&new Date(S.deadline)<new Date?"#ef4444":"var(--text-muted)"},children:[e.jsx(ft,{size:16,color:S.startTime&&new Date(S.startTime)>new Date?"#f59e42":S.deadline&&new Date(S.deadline)<new Date?"#ef4444":"#10b981"}),e.jsx("span",{children:S.startTime&&new Date(S.startTime)>new Date?"Not Yet Started":S.deadline&&new Date(S.deadline)<new Date?"Expired":S.deadline?`Due: ${new Date(S.deadline).toLocaleDateString()}`:""})]})]}),$>0&&I&&e.jsx("div",{style:{background:"var(--bg-tertiary)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",border:"1px solid var(--border-color)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:"Your Score"}),e.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,color:G?"#10b981":"#ef4444"},children:[I.overallPercentage,"%"]})]})}),e.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:b?e.jsxs("button",{disabled:!0,style:{flex:1,padding:"0.75rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"10px",color:"#10b981",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",cursor:"not-allowed"},children:[e.jsx(Le,{size:18})," Completed"]}):ne?e.jsxs("button",{onClick:()=>k(S),className:"btn-create-new",style:{flex:1,padding:"0.75rem",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:["Retry Test ",e.jsx(Tn,{size:18})]}):S.startTime&&new Date(S.startTime)>new Date?e.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(245, 158, 66, 0.15)",borderRadius:"10px",color:"#f59e42",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(We,{size:18})," Not Yet Started"]}):S.deadline&&new Date(S.deadline)<new Date?e.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(107, 114, 128, 0.2)",borderRadius:"10px",color:"#6b7280",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(We,{size:18})," Test Expired"]}):e.jsxs("button",{onClick:()=>k(S),className:"btn-create-new",style:{flex:1,padding:"0.75rem",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:["Start Test ",e.jsx(Qr,{size:18})]})})]},S.id)})})]}),e.jsx(D,{})]})}function Wl({user:r}){const[n,d]=i.useState([]),[u,c]=i.useState(!0),[g,f]=i.useState(null),[j,p]=i.useState(!1),[o,y]=i.useState([]),[T,R]=i.useState(null);i.useEffect(()=>{h(),W()},[r.id]);const h=async()=>{try{const v=await oe.get(`${De}/aptitude?status=live`);let N=v.data;try{const A=await oe.get(`${De}/aptitude/allocated-to/${r.id}`),te=new Set(A.data.map(se=>se.id));N=await Promise.all(v.data.map(async se=>{try{return(await oe.get(`${De}/aptitude/${se.id}/allocated-students`)).data.count>0?te.has(se.id)?se:null:se}catch{return se}})),N=N.filter(se=>se!==null)}catch{console.warn("Could not fetch allocated tests, showing all live tests")}d(N),c(!1)}catch(v){console.error("Error fetching tests:",v),c(!1)}},W=async()=>{try{const v=await oe.get(`${De}/aptitude-submissions?studentId=${r.id}`);y(v.data)}catch(v){console.error("Error fetching submissions:",v)}},m=v=>{if(!v.startTime)return!0;const N=new Date(v.startTime),A=new Date,te=Date.UTC(N.getUTCFullYear(),N.getUTCMonth(),N.getUTCDate(),N.getUTCHours(),N.getUTCMinutes());return Date.UTC(A.getUTCFullYear(),A.getUTCMonth(),A.getUTCDate(),A.getUTCHours(),A.getUTCMinutes())>=te},k=v=>{if(!v.deadline)return!1;const N=new Date(v.deadline),A=new Date,te=Date.UTC(N.getUTCFullYear(),N.getUTCMonth(),N.getUTCDate(),N.getUTCHours(),N.getUTCMinutes());return Date.UTC(A.getUTCFullYear(),A.getUTCMonth(),A.getUTCDate(),A.getUTCHours(),A.getUTCMinutes())>te},L=async v=>{if(!m(v)){alert("This test is not yet available. Please check the start time.");return}if(k(v)){alert("This test has expired. The deadline has passed.");return}if(!$(v)&&I(v.id)>0){alert(`You have reached the maximum number of attempts (${v.maxAttempts}) for this test.`);return}try{const N=await oe.get(`${De}/aptitude/${v.id}`);f(N.data),p(!0)}catch{alert("Error loading test")}},D=v=>{W(),p(!1),f(null)},S=v=>o.some(N=>N.testId===v),b=v=>{const N=o.filter(A=>A.testId===v);return N.length>0?N[0]:null},I=v=>o.filter(N=>N.testId===v).length,$=v=>{const N=I(v.id),A=v.maxAttempts;return A===-1?!0:N<(A||1)},G=v=>{const N=I(v.id),A=v.maxAttempts;return A===-1?"âˆž":Math.max(0,(A||1)-N)},ne=(()=>{const v={};return o.forEach(N=>{v[N.testId]||(v[N.testId]=N)}),Object.values(v)})();return u?e.jsx("div",{className:"loading-spinner"}):j&&g?e.jsx(Wa,{test:g,user:r,onClose:()=>{p(!1),f(null)},onComplete:D}):e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(It,{size:28,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Aptitude Tests"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Test your reasoning, analytical, and problem-solving skills"})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:e.jsx(It,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Available Tests"}),e.jsx("span",{className:"stat-value",children:n.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:e.jsx(Le,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Completed"}),e.jsx("span",{className:"stat-value",children:ne.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:e.jsx(it,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Avg Score"}),e.jsxs("span",{className:"stat-value",children:[ne.length>0?Math.round(ne.reduce((v,N)=>v+N.score,0)/ne.length):0,"%"]})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b"},children:e.jsx(_t,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Passed"}),e.jsx("span",{className:"stat-value",children:ne.filter(v=>v.status==="passed").length})]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:n.map(v=>{const N=S(v.id),A=b(v.id);return e.jsxs("div",{className:"card glass",style:{padding:"1.5rem",position:"relative",overflow:"hidden"},children:[N&&e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",padding:"0.25rem 0.75rem",borderRadius:"20px",background:A?.status==="passed"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:A?.status==="passed"?"#10b981":"#ef4444",fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.25rem"},children:A?.status==="passed"?e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:14})," Passed"]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{size:14})," Failed"]})}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(It,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:600},children:v.title}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[e.jsx("span",{className:`difficulty-badge ${v.difficulty?.toLowerCase()}`,children:v.difficulty}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[e.jsx(ft,{size:14})," ",v.duration," min"]})]})]})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"1.5rem",fontSize:"0.85rem",color:"var(--text-muted)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:16,color:"#8b5cf6"}),e.jsxs("span",{children:[v.questionCount||v.totalQuestions," Questions"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_t,{size:16,color:"#f59e0b"}),e.jsxs("span",{children:["Pass: ",v.passingScore,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Be,{size:16,color:"#ef4444"}),e.jsxs("span",{children:["Tab Limit: ",v.maxTabSwitches||3]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(yr,{size:16,color:"#06b6d4"}),e.jsxs("span",{children:["Attempts: ",I(v.id),"/",v.maxAttempts===-1?"âˆž":v.maxAttempts||1]})]}),v.startTime&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:m(v)?"#10b981":"#f59e42"},children:[e.jsx(ft,{size:16,color:m(v)?"#10b981":"#f59e42"}),e.jsx("span",{children:m(v)?`Started: ${new Date(v.startTime).toLocaleDateString()}`:`Starts: ${new Date(v.startTime).toLocaleString()}`})]}),v.deadline&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:k(v)?"#ef4444":"var(--text-muted)"},children:[e.jsx(ft,{size:16,color:k(v)?"#ef4444":"#10b981"}),e.jsx("span",{children:k(v)?"Expired":`Due: ${new Date(v.deadline).toLocaleString()}`})]})]}),N&&A&&e.jsxs("div",{style:{background:"var(--bg-tertiary)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:"Your Score"}),e.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,color:A.status==="passed"?"#10b981":"#ef4444"},children:[A.score,"%"]})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:e.jsxs("span",{children:[A.correctCount,"/",A.totalQuestions," Correct"]})})]}),e.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:N?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>R(A),style:{flex:1,padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"10px",color:"#3b82f6",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(Ot,{size:18})," View Results"]}),$(v)?e.jsxs("button",{onClick:()=>L(v),style:{padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"10px",color:"#8b5cf6",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(yr,{size:18})," Retry (",G(v)," left)"]}):e.jsxs("div",{style:{padding:"0.75rem 1rem",background:"rgba(107, 114, 128, 0.1)",border:"1px solid rgba(107, 114, 128, 0.3)",borderRadius:"10px",color:"#6b7280",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(We,{size:18})," No retries left"]})]}):m(v)?k(v)?e.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(107, 114, 128, 0.2)",border:"none",borderRadius:"10px",color:"#6b7280",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(We,{size:18})," Test Expired"]}):e.jsxs("button",{onClick:()=>L(v),style:{flex:1,padding:"0.75rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"10px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(qt,{size:18})," Start Test"]}):e.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(245, 158, 66, 0.15)",border:"none",borderRadius:"10px",color:"#f59e42",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(We,{size:18})," Not Yet Started"]})})]},v.id)})}),n.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"4rem",color:"var(--text-muted)"},children:[e.jsx(It,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),e.jsx("p",{children:"No aptitude tests available at the moment."})]}),T&&e.jsx("div",{className:"modal-overlay",onClick:()=>R(null),children:e.jsxs("div",{className:"modal-content",onClick:v=>v.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:T.status==="passed"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center"},children:T.status==="passed"?e.jsx(_t,{size:20,color:"white"}):e.jsx(it,{size:20,color:"white"})}),e.jsx("h2",{children:T.testTitle})]}),e.jsx("button",{onClick:()=>R(null),className:"modal-close",children:e.jsx(We,{size:20})})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#3b82f6"},children:[T.score,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Score"})]}),e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#10b981"},children:T.correctCount}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Correct"})]}),e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#ef4444"},children:T.totalQuestions-T.correctCount}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Wrong"})]})]}),e.jsx("h4",{style:{marginBottom:"1rem"},children:"Question Breakdown"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:T.questionResults?.map((v,N)=>e.jsx("div",{style:{background:v.isCorrect?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",border:`1px solid ${v.isCorrect?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"12px",padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[v.isCorrect?e.jsx(Le,{size:20,color:"#10b981",style:{flexShrink:0,marginTop:"2px"}}):e.jsx(We,{size:20,color:"#ef4444",style:{flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("p",{style:{margin:"0 0 0.5rem",fontWeight:500,fontSize:"0.9rem"},children:["Q",N+1,": ",v.question]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.8rem"},children:[e.jsxs("span",{children:["Your: ",e.jsx("strong",{style:{color:v.isCorrect?"#10b981":"#ef4444"},children:v.userAnswer})]}),!v.isCorrect&&e.jsxs("span",{children:["Correct: ",e.jsx("strong",{style:{color:"#10b981"},children:v.correctAnswer})]})]}),v.explanation&&e.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)",fontStyle:"italic"},children:["ðŸ’¡ ",v.explanation]})]})]})},N))})]})]})})]})}function Dl({user:r}){const{t:n}=zn(),[d,u]=i.useState("learning-path"),[c,g]=i.useState(null),[f,j]=i.useState(null),[p,o]=i.useState(null),[y,T]=i.useState(!0);if(i.useEffect(()=>{T(!0),(async()=>{try{const[W,m,k]=await Promise.all([oe.get(`${De}/analytics/learning-path/${r.id}`),oe.get(`${De}/analytics/peer-comparison/${r.id}`),oe.get(`${De}/analytics/topics?studentId=${r.id}`)]);g(W.data),j(m.data),o(k.data)}catch(W){console.error(W)}T(!1)})()},[r.id]),y)return e.jsx("div",{className:"loading-spinner"});const R=[{id:"learning-path",label:n("learning_path"),icon:e.jsx(En,{size:16})},{id:"peer-comparison",label:n("peer_comparison"),icon:e.jsx(Or,{size:16})},{id:"topic-analysis",label:n("topic_analysis"),icon:e.jsx(An,{size:16})}];return e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:R.map(h=>e.jsxs("button",{onClick:()=>u(h.id),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1.2rem",borderRadius:"10px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.85rem",background:d===h.id?"var(--primary)":"var(--card-bg)",color:d===h.id?"#fff":"var(--text-secondary)",boxShadow:d===h.id?"0 4px 15px rgba(59,130,246,0.3)":"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.2s"},children:[h.icon," ",h.label]},h.id))}),d==="learning-path"&&c&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{className:"dashboard-stat-card stat-card-blue",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #1e40af, #3b82f6)"},children:e.jsx(it,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsxs("div",{className:"stat-number",children:[c.overallPassRate,"%"]}),e.jsx("div",{className:"stat-label-text",children:n("overall_pass_rate")})]})]})}),e.jsx("div",{className:"dashboard-stat-card stat-card-green",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #047857, #10b981)"},children:e.jsx(Le,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:c.totalPassed}),e.jsx("div",{className:"stat-label-text",children:n("problems_passed")})]})]})}),e.jsx("div",{className:"dashboard-stat-card stat-card-purple",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #6d28d9, #8b5cf6)"},children:e.jsx(an,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:c.totalAttempts}),e.jsx("div",{className:"stat-label-text",children:n("total_attempts")})]})]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",style:{color:"#ef4444"},children:[e.jsx(Be,{size:18})," ",n("weak_areas")]}),c.weakAreas.length>0?c.weakAreas.map((h,W)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderRadius:"8px",background:"rgba(239,68,68,0.06)",marginBottom:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600,fontSize:"0.9rem",textTransform:"capitalize"},children:h.category}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[h.attempts," ",n("attempts_made")]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("span",{style:{fontWeight:700,color:"#ef4444",fontSize:"1.1rem"},children:[h.avgScore,"%"]}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"#ef4444"},children:[h.passRate,"% ",n("pass_rate")]})]})]},W)):e.jsx("div",{style:{color:"var(--text-muted)",padding:"1rem",textAlign:"center"},children:n("no_weak_areas")})]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",style:{color:"#10b981"},children:[e.jsx(Le,{size:18})," ",n("strengths")]}),c.strengths.length>0?c.strengths.map((h,W)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderRadius:"8px",background:"rgba(16,185,129,0.06)",marginBottom:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600,fontSize:"0.9rem",textTransform:"capitalize"},children:h.category}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[h.attempts," ",n("attempts_made")]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("span",{style:{fontWeight:700,color:"#10b981",fontSize:"1.1rem"},children:[h.avgScore,"%"]}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"#10b981"},children:[h.passRate,"% ",n("pass_rate")]})]})]},W)):e.jsx("div",{style:{color:"var(--text-muted)",padding:"1rem",textAlign:"center"},children:n("no_data")})]})]}),c.languageProficiency.length>0&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(vt,{size:18,color:"#3b82f6"})," ",n("language_proficiency")]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:c.languageProficiency.map((h,W)=>e.jsxs("div",{style:{padding:"1rem",borderRadius:"12px",background:"var(--bg-secondary)",textAlign:"center"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1.1rem",marginBottom:"0.25rem"},children:h.language}),e.jsx("div",{style:{display:"inline-block",padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,background:h.level==="Advanced"?"rgba(16,185,129,0.15)":h.level==="Intermediate"?"rgba(251,191,36,0.15)":"rgba(239,68,68,0.15)",color:h.level==="Advanced"?"#10b981":h.level==="Intermediate"?"#f59e0b":"#ef4444"},children:h.level}),e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsx("div",{style:{height:"6px",borderRadius:"3px",background:"rgba(0,0,0,0.1)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${h.avgScore}%`,borderRadius:"3px",background:h.level==="Advanced"?"#10b981":h.level==="Intermediate"?"#f59e0b":"#ef4444",transition:"width 0.5s"}})}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[h.avgScore,"% avg â€¢ ",h.attempts," solved"]})]})]},W))})]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(tr,{size:18,color:"#f59e0b"})," ",n("recommended_problems")]}),c.recommendations.length>0?e.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:c.recommendations.map((h,W)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem 1rem",borderRadius:"10px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.85rem",background:h.priority>=5?"rgba(239,68,68,0.12)":h.priority>=3?"rgba(251,191,36,0.12)":"rgba(59,130,246,0.12)",color:h.priority>=5?"#ef4444":h.priority>=3?"#f59e0b":"#3b82f6"},children:W+1}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:h.title}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:h.reason})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,background:h.difficulty==="easy"?"rgba(16,185,129,0.12)":h.difficulty==="medium"?"rgba(251,191,36,0.12)":"rgba(239,68,68,0.12)",color:h.difficulty==="easy"?"#10b981":h.difficulty==="medium"?"#f59e0b":"#ef4444"},children:h.difficulty}),h.language&&e.jsx("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",background:"rgba(59,130,246,0.1)",color:"#3b82f6"},children:h.language})]})]},W))}):e.jsx("div",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:n("complete_more_problems")})]})]}),d==="peer-comparison"&&f&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:1,minWidth:"280px",padding:"1.5rem",borderRadius:"16px",background:"linear-gradient(135deg, #1e40af, #3b82f6)",color:"#fff",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.85rem",opacity:.9},children:n("your_rank")}),e.jsxs("div",{style:{fontSize:"3rem",fontWeight:800},children:["#",f.you.rank]}),e.jsxs("div",{style:{fontSize:"0.8rem",opacity:.8},children:[n("out_of")," ",f.you.totalStudents," ",n("students")]})]}),e.jsxs("div",{style:{flex:1,minWidth:"280px",padding:"1.5rem",borderRadius:"16px",background:"linear-gradient(135deg, #059669, #10b981)",color:"#fff",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.85rem",opacity:.9},children:n("percentile")}),e.jsxs("div",{style:{fontSize:"3rem",fontWeight:800},children:[f.you.percentile,"th"]}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.8},children:n("top_performer_msg")})]})]}),e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(ur,{size:18,color:"#8b5cf6"})," ",n("your_score_vs_class")]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem"},children:[{label:n("avg_score"),yours:f.you.avgScore,classVal:f.classAverage.avgScore,suffix:"%"},{label:n("pass_rate"),yours:f.you.passRate,classVal:f.classAverage.avgPassRate,suffix:"%"},{label:n("total_submissions"),yours:f.you.totalSubmissions,classVal:f.classAverage.avgSubmissions,suffix:""},{label:n("problems_solved_label"),yours:f.you.problemsSolved,classVal:f.classAverage.avgProblemsSolved,suffix:""},{label:n("tasks_completed"),yours:f.you.tasksDone,classVal:f.classAverage.avgTasksDone,suffix:""}].map((h,W)=>{const m=h.yours-h.classVal,k=m>0,L=m===0;return e.jsxs("div",{style:{padding:"1rem",borderRadius:"12px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.5rem",fontWeight:600,textTransform:"uppercase"},children:h.label}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"var(--text-primary)"},children:[h.yours,h.suffix]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:n("you")})]}),e.jsxs("div",{style:{textAlign:"center",padding:"0.25rem 0.5rem",borderRadius:"8px",background:k?"rgba(16,185,129,0.1)":L?"rgba(156,163,175,0.1)":"rgba(239,68,68,0.1)"},children:[k?e.jsx(oa,{size:14,color:"#10b981"}):L?e.jsx(fa,{size:14,color:"#9ca3af"}):e.jsx(na,{size:14,color:"#ef4444"}),e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:700,color:k?"#10b981":L?"#9ca3af":"#ef4444"},children:[k?"+":"",m,h.suffix]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:600,color:"var(--text-secondary)"},children:[Math.round(h.classVal),h.suffix]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:n("class_avg")})]})]})]},W)})})]}),f.scoreDistribution&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(ur,{size:18,color:"#3b82f6"})," ",n("score_distribution")]}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"4px",height:"120px",padding:"0 1rem"},children:f.scoreDistribution.map((h,W)=>{const m=Math.max(...f.scoreDistribution.map(L=>L.count)),k=m>0?h.count/m*100:0;return e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontSize:"0.6rem",fontWeight:600},children:h.count}),e.jsx("div",{style:{width:"100%",height:`${k}%`,minHeight:"4px",borderRadius:"4px 4px 0 0",background:h.isYou?"linear-gradient(180deg, #3b82f6, #1e40af)":"rgba(59,130,246,0.15)",border:h.isYou?"2px solid #1e40af":"none",transition:"height 0.3s"}}),e.jsx("span",{style:{fontSize:"0.55rem",color:h.isYou?"#3b82f6":"var(--text-muted)",fontWeight:h.isYou?700:400},children:h.range})]},W)})}),e.jsx("div",{style:{textAlign:"center",fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:n("highlighted_your_position")})]}),f.languageComparison.length>0&&e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(vt,{size:18,color:"#8b5cf6"})," ",n("language_vs_class")]}),e.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:f.languageComparison.map((h,W)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",borderRadius:"10px",background:"var(--bg-secondary)"},children:[e.jsx("div",{style:{width:"80px",fontWeight:700,fontSize:"0.9rem"},children:h.language}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",marginBottom:"4px"},children:[e.jsxs("span",{style:{fontSize:"0.7rem",color:"#3b82f6",width:"50px"},children:[n("you"),": ",h.yourScore,"%"]}),e.jsx("div",{style:{flex:1,height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${h.yourScore}%`,borderRadius:"4px",background:"linear-gradient(90deg, #3b82f6, #60a5fa)"}})})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"0.7rem",color:"#9ca3af",width:"50px"},children:[n("class"),": ",h.classAvg,"%"]}),e.jsx("div",{style:{flex:1,height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${h.classAvg}%`,borderRadius:"4px",background:"rgba(156,163,175,0.4)"}})})]})]}),e.jsxs("div",{style:{fontWeight:700,fontSize:"0.85rem",padding:"0.25rem 0.5rem",borderRadius:"6px",color:h.difference>0?"#10b981":h.difference<0?"#ef4444":"#9ca3af",background:h.difference>0?"rgba(16,185,129,0.1)":h.difference<0?"rgba(239,68,68,0.1)":"rgba(156,163,175,0.1)"},children:[h.difference>0?"+":"",h.difference,"%"]})]},W))})]})]}),d==="topic-analysis"&&p&&e.jsxs("div",{children:[p.byType.length>0&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(wr,{size:18,color:"#3b82f6"})," ",n("performance_by_type")]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:p.byType.map((h,W)=>e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"12px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1rem",marginBottom:"0.75rem",textTransform:"capitalize"},children:h.type}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:n("submissions")}),e.jsx("div",{style:{fontWeight:700,fontSize:"1.2rem"},children:h.submissions})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:n("avg_score")}),e.jsxs("div",{style:{fontWeight:700,fontSize:"1.2rem",color:h.avgScore>=70?"#10b981":h.avgScore>=40?"#f59e0b":"#ef4444"},children:[h.avgScore,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:n("pass_rate")}),e.jsxs("div",{style:{fontWeight:700,color:"#10b981"},children:[h.passRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:n("fail_rate")}),e.jsxs("div",{style:{fontWeight:700,color:"#ef4444"},children:[h.failRate,"%"]})]})]}),e.jsx("div",{style:{marginTop:"0.75rem",height:"6px",borderRadius:"3px",background:"rgba(0,0,0,0.1)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${h.passRate}%`,borderRadius:"3px",background:"linear-gradient(90deg, #10b981, #34d399)",transition:"width 0.5s"}})})]},W))})]}),p.byDifficulty.length>0&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(it,{size:18,color:"#f59e0b"})," ",n("performance_by_difficulty")]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:p.byDifficulty.map((h,W)=>{const k={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"}[h.difficulty]||"#3b82f6";return e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"12px",background:"var(--bg-secondary)",borderLeft:`4px solid ${k}`},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1rem",textTransform:"capitalize",color:k,marginBottom:"0.75rem"},children:h.difficulty}),e.jsxs("div",{style:{fontSize:"2rem",fontWeight:800},children:[h.avgScore,"%"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[h.submissions," ",n("submissions")," â€¢ ",h.passRate,"% ",n("pass_rate")]})]},W)})})]}),p.byLanguage.length>0&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(vt,{size:18,color:"#8b5cf6"})," ",n("performance_by_language")]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:n("language")}),e.jsx("th",{style:{textAlign:"center",padding:"0.75rem"},children:n("submissions")}),e.jsx("th",{style:{textAlign:"center",padding:"0.75rem"},children:n("avg_score")}),e.jsx("th",{style:{textAlign:"center",padding:"0.75rem"},children:n("pass_rate")})]})}),e.jsx("tbody",{children:p.byLanguage.map((h,W)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsx("td",{style:{padding:"0.75rem",fontWeight:600},children:h.language}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:h.submissions}),e.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:700,color:h.avgScore>=70?"#10b981":h.avgScore>=40?"#f59e0b":"#ef4444"},children:[h.avgScore,"%"]}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"60px",height:"6px",borderRadius:"3px",background:"rgba(0,0,0,0.1)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${h.passRate}%`,borderRadius:"3px",background:"#10b981"}})}),e.jsxs("span",{children:[h.passRate,"%"]})]})})]},W))})]})})]}),p.topProblems.length>0&&e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(an,{size:18,color:"#ef4444"})," ",n("most_attempted_problems")]}),e.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:p.topProblems.map((h,W)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 0.75rem",borderRadius:"8px",background:"var(--bg-secondary)"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"8px",background:"rgba(59,130,246,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.8rem",color:"#3b82f6"},children:W+1}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.85rem"},children:h.title}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:[h.type," â€¢ ",h.difficulty]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:"0.85rem"},children:[h.avgScore,"%"]}),e.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)"},children:[h.attempts," attempts â€¢ ",h.passRate,"% pass"]})]})]},W))})]})]})]})}const Fl=Object.freeze(Object.defineProperty({__proto__:null,default:kl},Symbol.toStringTag,{value:"Module"}));export{Fl as S,xn as r};
