const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-ai-B8mSylpS.js","assets/vendor-react-DZU2lOjX.js","assets/vendor-sql-8AFooPkz.js"])))=>i.map(i=>d[i]);
import{r as s,j as e,R as qs,L as $t,k as dr,f as cr,h as Ee}from"./vendor-react-DZU2lOjX.js";import{s as ze,D as pr,E as xr,a as gr,A as mr,G as ur,C as hr}from"./Portal-B5LUEaqQ.js";import{c as Q,B as Me,d as me,e as ge,T as he,f as He,g as Ae,h as Je,i as ss,j as zt,P as Ze,k as ws,l as lt,a as fs,E as Hs,m as ys,D as Oe,n as fr,o as Qs,p as bs,K as br,q as yr,H as ks,r as jr,s as rs,t as vr,u as qe,v as zs,w as Sr,x as wr,y as kr,z as Qe,V as es,F as gt,G as ts,S as Ct,I as De,J as Ve,O as js,Q as Rt,R as Ys,C as It,U as Nt,W as xt,A as Us,Y as Cs,Z as zr,_ as is,$ as cs,a0 as Gt,a1 as Cr,a2 as Rs,a3 as Is,a4 as Rr,a5 as Ts,a6 as Ir,a7 as Tr,a8 as Ar,a9 as Gs,aa as Lt,ab as Vs,ac as Ot,ad as Ks,ae as Wr,af as qt,ag as Er,ah as Ht,ai as Xs,aj as Js,ak as Zs,al as Xe,am as _t,an as ps,ao as As,ap as Nr,aq as Lr,ar as Br,as as Dr}from"./vendor-misc-D7KlG0WG.js";import{_ as Mt,T as er,u as $r,a as tr}from"./index-Dce4qVRW.js";import{F as Qt}from"./vendor-monaco-DLtW3Y0d.js";import{i as sr}from"./vendor-sql-8AFooPkz.js";import{S as Fr,a as Pr}from"./SkillSubmissions-Dd-6kOYN.js";/* empty css                             */import{R as Vt,A as _r,C as Ws,X as Es,Y as Ns,T as xs,a as Mr,B as Or,b as Ls,P as qr,c as Hr,d as Qr,e as Yr,f as Ur,g as Gr,h as Vr,i as Kr}from"./vendor-charts-DyrUJrah.js";const Xr="http://localhost:3000/api";function Jr(t,r){const c=[...t];let f=c.length;const a=()=>(r=(r*9301+49297)%233280,r/233280);for(;f>0;){const x=Math.floor(a()*f);f--,[c[f],c[x]]=[c[x],c[f]]}return c}function Zr(t,r){const c=`${t}-${r}`;let f=0;for(let a=0;a<c.length;a++){const x=c.charCodeAt(a);f=(f<<5)-f+x,f=f&f}return Math.abs(f)}function ei({test:t,user:r,onClose:c,onComplete:f}){const[a,x]=s.useState(0),[l,h]=s.useState({}),[i,m]=s.useState(t.duration*60),[p,B]=s.useState(0),[S,o]=s.useState(!1),[T,d]=s.useState(""),[u,y]=s.useState(!1),[A,g]=s.useState(!1),[n,z]=s.useState(null),[R,q]=s.useState(!1),U=t.questions||[],K=s.useMemo(()=>{const I=Zr(r.id,t.id);return Jr(U,I)},[U,r.id,t.id]),k=s.useRef(null),D=s.useRef(l),w=s.useRef(p),re=s.useRef(i);s.useEffect(()=>{D.current=l},[l]),s.useEffect(()=>{w.current=p},[p]),s.useEffect(()=>{re.current=i},[i]),s.useEffect(()=>((async()=>{try{await document.documentElement.requestFullscreen()}catch(Y){console.log("Fullscreen request failed:",Y)}})(),()=>{document.fullscreenElement&&document.exitFullscreen().catch(()=>{})}),[]),s.useEffect(()=>{if(!(n||A))return k.current=setInterval(()=>{m(I=>I<=1?(clearInterval(k.current),X(),0):I-1)},1e3),()=>clearInterval(k.current)},[n,A]);const te=t.maxTabSwitches||3;s.useEffect(()=>{const I=()=>{document.hidden&&!n&&!A&&B(Y=>{const O=Y+1;return O>=te?(d(`ðŸš« DISQUALIFIED! You have exceeded the maximum allowed tab switches (${O}/${te}). Test terminated.`),o(!0),g(!0),setTimeout(()=>{X(!0)},3e3)):(d(`âš ï¸ Tab switch detected! (${O}/${te} violations) ${te-O} more will disqualify you!`),o(!0),setTimeout(()=>o(!1),4e3)),O})};return document.addEventListener("visibilitychange",I),()=>document.removeEventListener("visibilitychange",I)},[n,A]),s.useEffect(()=>{const I=O=>O.preventDefault(),Y=O=>{(O.ctrlKey||O.altKey||O.metaKey)&&["c","v","u","p","s","a"].includes(O.key.toLowerCase())&&O.preventDefault(),(O.key==="F12"||O.key==="Escape")&&O.preventDefault()};return document.addEventListener("contextmenu",I),document.addEventListener("keydown",Y),()=>{document.removeEventListener("contextmenu",I),document.removeEventListener("keydown",Y)}},[]);const oe=I=>{const Y=Math.floor(I/60),O=I%60;return`${Y.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`},fe=(I,Y)=>{h(O=>({...O,[I]:Y}))},X=async(I=!1)=>{y(!0);try{const Y=D.current,O=w.current,be=re.current,Ce=await Q.post(`${Xr}/aptitude/${t.id}/submit`,{studentId:r.id,answers:I?{}:Y,timeSpent:t.duration*60-be,tabSwitches:O});z(Ce.data.submission),q(!0)}catch(Y){console.error("Submit failed:",Y)}finally{y(!1)}},Z=async()=>{if(Object.keys(l).length<K.length){const I=K.length-Object.keys(l).length;if(!window.confirm(`You have ${I} unanswered question(s). Submit anyway?`))return}await X()},V=Object.keys(l).length;return R&&n?e.jsx("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflowY:"auto"},children:e.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(139, 92, 246, 0.3)",maxWidth:"900px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(15, 23, 42, 0.5)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:n.status==="passed"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Me,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700,color:"white"},children:"Aptitude Test Report"}),e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.5)",fontSize:"0.9rem"},children:t.title})]})]}),e.jsx("button",{onClick:()=>{document.fullscreenElement&&document.exitFullscreen(),c(),f&&f(n)},style:{background:"rgba(71, 85, 105, 0.5)",border:"none",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},children:e.jsx(me,{size:20})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:n.status==="passed"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"16px",border:`1px solid ${n.status==="passed"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"4rem",fontWeight:800,color:n.status==="passed"?"#10b981":"#ef4444",lineHeight:1},children:[n.score,"%"]}),e.jsx("div",{style:{color:"rgba(255,255,255,0.5)",marginTop:"0.5rem"},children:"Overall Score"})]}),e.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"12px",background:n.status==="passed"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",border:`1px solid ${n.status==="passed"?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,display:"flex",alignItems:"center",gap:"0.75rem"},children:[n.status==="passed"?e.jsx(ge,{size:28,color:"#10b981"}):e.jsx(me,{size:28,color:"#ef4444"}),e.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:n.status==="passed"?"#10b981":"#ef4444"},children:n.status==="passed"?"PASSED":"FAILED"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(59, 130, 246, 0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#3b82f6"},children:n.totalQuestions}),e.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:"Total Questions"})]}),e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(16, 185, 129, 0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#10b981"},children:n.correctCount}),e.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:"Correct"})]}),e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(239, 68, 68, 0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#ef4444"},children:n.totalQuestions-n.correctCount}),e.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:"Incorrect"})]}),e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(245, 158, 11, 0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:(n.tabSwitches||p||0)>0?"#f59e0b":"#10b981"},children:n.tabSwitches||p||0}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[e.jsx(he,{size:12}),"Violations"]})]}),e.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(139, 92, 246, 0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#8b5cf6"},children:n.timeSpent?`${Math.floor(n.timeSpent/60)}m`:`${Math.round((t.duration*60-i)/60)}m`}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[e.jsx(He,{size:12}),"Time Spent"]})]})]}),(n.tabSwitches||p||0)>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem 1.5rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",border:"1px solid rgba(245, 158, 11, 0.3)",marginBottom:"2rem"},children:[e.jsx(he,{size:24,color:"#f59e0b"}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#f59e0b"},children:"Tab Switch Violations Detected"}),e.jsxs("p",{style:{margin:"0.25rem 0 0",color:"rgba(255,255,255,0.6)",fontSize:"0.9rem"},children:["You switched tabs/windows ",n.tabSwitches||p||0," time(s) during the test."]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{style:{margin:"0 0 1rem",fontSize:"1.1rem",fontWeight:600,color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ae,{size:18,color:"#8b5cf6"}),"Detailed Question Breakdown"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.questionResults?.map((I,Y)=>e.jsxs("div",{style:{padding:"1.25rem",background:I.isCorrect?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",border:`1px solid ${I.isCorrect?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,borderRadius:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsx("span",{style:{minWidth:"28px",height:"28px",borderRadius:"50%",background:I.isCorrect?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:700,flexShrink:0},children:I.isCorrect?"âœ“":"âœ—"}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#8b5cf6",textTransform:"uppercase",letterSpacing:"0.05em"},children:["Question ",Y+1]}),I.category&&e.jsx("span",{style:{fontSize:"0.7rem",padding:"0.2rem 0.6rem",background:"rgba(139, 92, 246, 0.2)",borderRadius:"20px",color:"#a78bfa"},children:I.category})]}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:500,color:"white",lineHeight:1.5},children:I.question})]})]}),e.jsxs("div",{style:{marginLeft:"2.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem 1rem",background:I.isCorrect?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:`1px solid ${I.isCorrect?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"rgba(255,255,255,0.5)",minWidth:"100px"},children:"Your Answer:"}),e.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:I.isCorrect?"#10b981":"#ef4444"},children:I.userAnswer||"(Not answered)"})]}),!I.isCorrect&&e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"rgba(255,255,255,0.5)",minWidth:"100px"},children:"Correct Answer:"}),e.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:"#10b981"},children:I.correctAnswer})]}),I.explanation&&e.jsxs("div",{style:{padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.05)",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.15)"},children:[e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#a78bfa",display:"block",marginBottom:"0.25rem"},children:"ðŸ’¡ Explanation"}),e.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"rgba(255,255,255,0.7)",lineHeight:1.5},children:I.explanation})]})]})]},Y))})]})]}),e.jsx("div",{style:{padding:"1.5rem 2rem",borderTop:"1px solid rgba(139, 92, 246, 0.2)",background:"rgba(15, 23, 42, 0.5)",display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{onClick:()=>{document.fullscreenElement&&document.exitFullscreen(),c(),f&&f(n)},style:{padding:"0.875rem 2rem",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",border:"none",borderRadius:"10px",color:"white",fontSize:"1rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:"Close & Return"})})]})}):e.jsxs("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 2rem",background:"rgba(15, 23, 42, 0.8)",borderBottom:"1px solid rgba(139, 92, 246, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(Me,{size:28,color:"#8b5cf6"}),e.jsx("div",{children:e.jsxs("h1",{style:{margin:0,fontSize:"1.25rem",fontWeight:700,color:"white"},children:["Aptitude Test â€“ ",t.title]})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:i<60?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)",padding:"0.5rem 1rem",borderRadius:"8px",border:`1px solid ${i<60?"#ef4444":"#10b981"}`},children:[e.jsx(He,{size:20,color:i<60?"#ef4444":"#10b981"}),e.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"monospace",color:i<60?"#ef4444":"#10b981"},children:oe(i)})]})]}),S&&e.jsxs("div",{style:{background:p>=3?"linear-gradient(135deg, #dc2626, #b91c1c)":"linear-gradient(135deg, #f59e0b, #d97706)",padding:"1rem 2rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",animation:"pulse 1s infinite"},children:[e.jsx(he,{size:24,color:"white"}),e.jsx("span",{style:{color:"white",fontWeight:600},children:T})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{width:"200px",background:"rgba(30, 41, 59, 0.5)",borderRight:"1px solid rgba(139, 92, 246, 0.2)",padding:"1.5rem",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"0.9rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ae,{size:16})," Question Palette"]}),e.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:[V,"/",K.length," Answered"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginBottom:"1.5rem"},children:K.map((I,Y)=>e.jsx("button",{onClick:()=>x(Y),style:{width:"36px",height:"36px",borderRadius:"8px",border:a===Y?"2px solid #3b82f6":"none",background:l[I.id]?"linear-gradient(135deg, #10b981, #06b6d4)":a===Y?"rgba(59, 130, 246, 0.3)":"rgba(71, 85, 105, 0.5)",color:"white",fontWeight:600,fontSize:"0.85rem",cursor:"pointer",transition:"all 0.2s"},children:Y+1},I.id))}),e.jsxs("div",{style:{marginTop:"auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"4px",background:"linear-gradient(135deg, #10b981, #06b6d4)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Answered"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"4px",background:"rgba(71, 85, 105, 0.5)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Unanswered"})]})]}),e.jsxs("button",{onClick:Z,disabled:u,style:{marginTop:"1.5rem",width:"100%",padding:"1rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"12px",color:"white",fontSize:"0.95rem",fontWeight:600,cursor:u?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",opacity:u?.7:1},children:[e.jsx(Je,{size:18}),u?"Submitting...":"Submit Test"]})]}),e.jsx("div",{style:{flex:1,padding:"2rem 4rem",overflowY:"auto"},children:K[a]&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("span",{style:{color:"#8b5cf6",fontSize:"0.9rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:["Question ",a+1," of ",K.length]}),e.jsx("h2",{style:{margin:"1rem 0",fontSize:"1.5rem",fontWeight:600,color:"white",lineHeight:1.5},children:K[a].question}),K[a].category&&e.jsx("span",{style:{display:"inline-block",padding:"0.25rem 0.75rem",background:"rgba(139, 92, 246, 0.2)",borderRadius:"20px",fontSize:"0.8rem",color:"#a78bfa"},children:K[a].category})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:K[a].options.map((I,Y)=>{const O=["A","B","C","D"][Y],be=l[K[a].id]===I;return e.jsxs("button",{onClick:()=>fe(K[a].id,I),style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1.25rem 1.5rem",background:be?"rgba(59, 130, 246, 0.15)":"rgba(30, 41, 59, 0.8)",border:be?"2px solid #3b82f6":"1px solid rgba(71, 85, 105, 0.5)",borderRadius:"12px",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:be?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"rgba(71, 85, 105, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:700,fontSize:"0.9rem"},children:O}),e.jsx("span",{style:{color:be?"#3b82f6":"rgba(255,255,255,0.9)",fontSize:"1.05rem",fontWeight:be?600:400},children:I})]},Y)})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"3rem"},children:[e.jsxs("button",{onClick:()=>x(I=>Math.max(0,I-1)),disabled:a===0,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:"rgba(71, 85, 105, 0.5)",border:"none",borderRadius:"8px",color:a===0?"rgba(255,255,255,0.3)":"white",cursor:a===0?"not-allowed":"pointer",fontSize:"0.95rem",fontWeight:500},children:[e.jsx(ss,{size:20})," Previous"]}),e.jsxs("button",{onClick:()=>x(I=>Math.min(K.length-1,I+1)),disabled:a===K.length-1,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:a===K.length-1?"rgba(71, 85, 105, 0.5)":"linear-gradient(135deg, #3b82f6, #8b5cf6)",border:"none",borderRadius:"8px",color:a===K.length-1?"rgba(255,255,255,0.3)":"white",cursor:a===K.length-1?"not-allowed":"pointer",fontSize:"0.95rem",fontWeight:500},children:["Next ",e.jsx(zt,{size:20})]})]})]})})]})]})}const ti="http://localhost:3000/api";function rr({problemId:t,code:r,language:c,onRunComplete:f,showRunButton:a=!0,isGlobalTest:x=!1}){const[l,h]=s.useState(!1),[i,m]=s.useState(null),[p,B]=s.useState("all"),S=async()=>{if(!(!r?.trim()||!t)){h(!0),m(null);try{const y=await Q.post(`${ti}/run-with-tests`,{problemId:t,code:r,language:c,isGlobalTest:x});m(y.data),f&&f(y.data)}catch(y){m({success:!1,error:y.response?.data?.error||"Execution failed"})}finally{h(!1)}}},o=()=>{if(!i?.testResults)return[];switch(p){case"passed":return i.testResults.filter(y=>y.passed);case"failed":return i.testResults.filter(y=>!y.passed);default:return i.testResults}},T=i?.testResults?.filter(y=>y.passed).length||0,d=i?.testResults?.length||0;i?.testResults?.filter(y=>!y.isHidden);const u=i?.testResults?.filter(y=>y.isHidden)||[];return e.jsxs("div",{children:[a&&e.jsx("button",{onClick:S,disabled:l||!r?.trim(),style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center",padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:l||!r?.trim()?"not-allowed":"pointer",opacity:l||!r?.trim()?.6:1},children:l?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-small"}),"Running Tests..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{size:16}),"Run with Test Cases"]})}),!i&&!l&&e.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"rgba(59, 130, 246, 0.05)",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[e.jsx(ws,{size:40,style:{marginBottom:"0.75rem",color:"#3b82f6",opacity:.7}}),e.jsx("div",{style:{color:"var(--text-main)",fontWeight:500,marginBottom:"0.5rem"},children:"Ready to Test"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:'Click "Run with Test Cases" to execute your code against all test cases'})]}),i&&!i.success&&i.error&&e.jsxs("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.2)",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(he,{size:18,color:"#ef4444"}),e.jsx("span",{style:{fontWeight:600,color:"#ef4444"},children:"Execution Error"})]}),e.jsx("pre",{style:{margin:0,fontSize:"0.8rem",color:"#f87171",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},children:i.error})]}),i&&i.testResults&&e.jsxs("div",{style:{background:"var(--bg-dark)",borderRadius:"12px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{padding:"1rem",background:T===d?"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.1))":"linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(234, 88, 12, 0.1))",borderBottom:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[T===d?e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #10b981, #059669)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(lt,{size:24,color:"white"})}):e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #f97316, #ea580c)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(fs,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:T===d?"#10b981":"#f97316"},children:T===d?"All Tests Passed!":`${T}/${d} Tests Passed`}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:["Score: ",i.score||0," / ",i.totalPoints||0," points"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#10b981",fontWeight:600},children:[e.jsx(ge,{size:16})," ",T]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Passed"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#ef4444",fontWeight:600},children:[e.jsx(me,{size:16})," ",d-T]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Failed"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#8b5cf6",fontWeight:600},children:[e.jsx(Hs,{size:16})," ",u.length]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Hidden"})]})]})]}),e.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border-color)"},children:["all","passed","failed"].map(y=>e.jsx("button",{onClick:()=>B(y),style:{flex:1,padding:"0.75rem",background:p===y?"var(--bg-card)":"transparent",border:"none",borderBottom:p===y?"2px solid var(--primary)":"2px solid transparent",color:p===y?"var(--primary)":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,textTransform:"capitalize"},children:y==="all"?`All (${d})`:y==="passed"?`Passed (${T})`:`Failed (${d-T})`},y))}),e.jsxs("div",{style:{maxHeight:"400px",overflowY:"auto"},children:[o().map((y,A)=>e.jsx(si,{result:y,index:A+1},y.testCaseId||A)),o().length===0&&e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No test cases in this category"})]})]}),i&&(!i.testResults||i.testResults.length===0)&&!i.error&&e.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"var(--bg-dark)",borderRadius:"12px",color:"var(--text-muted)"},children:[e.jsx(ws,{size:40,style:{marginBottom:"0.5rem",opacity:.5}}),e.jsx("div",{children:"No test cases found for this problem"}),e.jsx("div",{style:{fontSize:"0.8rem",marginTop:"0.25rem"},children:"Ask your mentor to add test cases"})]})]})}function si({result:t,index:r}){const[c,f]=s.useState(!t.passed);return e.jsxs("div",{style:{borderBottom:"1px solid var(--border-color)",background:t.passed?"transparent":"rgba(239, 68, 68, 0.03)"},children:[e.jsxs("div",{onClick:()=>!t.isHidden&&f(!c),style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:t.isHidden?"default":"pointer",transition:"background 0.2s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[t.passed?e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ge,{size:14,color:"#10b981"})}):e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(me,{size:14,color:"#ef4444"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("span",{style:{fontWeight:500,fontSize:"0.9rem"},children:["Test Case ",r]}),t.isHidden&&e.jsxs("span",{style:{padding:"0.15rem 0.5rem",background:"rgba(139, 92, 246, 0.2)",color:"#a78bfa",borderRadius:"4px",fontSize:"0.65rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Hs,{size:10})," Hidden"]})]}),t.description&&e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.15rem"},children:t.description})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.executionTime&&e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(He,{size:12})," ",t.executionTime,"ms"]}),e.jsxs("span",{style:{padding:"0.25rem 0.5rem",background:t.passed?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:t.passed?"#10b981":"#ef4444",borderRadius:"4px",fontSize:"0.75rem",fontWeight:600},children:[t.points||0," pts"]})]})]}),!t.isHidden&&c&&e.jsxs("div",{style:{padding:"0 1rem 1rem 3.5rem",display:"grid",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Input"}),e.jsx("pre",{style:{margin:0,padding:"0.5rem 0.75rem",background:"var(--bg-card)",borderRadius:"6px",fontSize:"0.8rem",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:String(t.input??"(no input)")})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Expected Output"}),e.jsx("pre",{style:{margin:0,padding:"0.5rem 0.75rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"6px",fontSize:"0.8rem",color:"#10b981",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",border:"1px solid rgba(16, 185, 129, 0.2)"},children:String(t.expectedOutput||t.expected_output||"(empty)")})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Your Output"}),e.jsx("pre",{style:{margin:0,padding:"0.5rem 0.75rem",background:t.passed?"rgba(30, 41, 59, 0.4)":"rgba(239, 68, 68, 0.05)",borderRadius:"6px",fontSize:"0.8rem",color:t.passed?"#e2e8f0":"#ef4444",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",border:`1px solid ${t.passed?"rgba(255, 255, 255, 0.05)":"rgba(239, 68, 68, 0.1)"}`},children:String(t.actualOutput||t.output||"(no output)")})]})]}),t.isHidden&&e.jsx("div",{style:{padding:"0 1rem 0.75rem 3.5rem",fontSize:"0.75rem",color:"var(--text-muted)",fontStyle:"italic"},children:t.passed?"âœ“ Your code passed this hidden test case":"âœ— Your code failed this hidden test case. Details are hidden."})]})}function ir({query:t,schemaContext:r}){const[c,f]=s.useState(!1),[a,x]=s.useState(null),[l,h]=s.useState(null),[i,m]=s.useState(!0);s.useEffect(()=>{(async()=>{try{const u=await sr({locateFile:y=>`/${y}`});h(u),m(!1)}catch(u){console.error("Failed to initialize SQL.js:",u),m(!1)}})()},[]);const p=async()=>{if(!(!t?.trim()||!l)){f(!0),x(null);try{const d=new l.Database;r?.trim()&&d.run(r);const u=d.exec(t);if(u.length>0){const y=u[0];x({success:!0,output:"Success",parsedData:{columns:y.columns,rows:y.values}})}else x({success:!0,output:"Query executed successfully. No rows returned.",parsedData:{columns:[],rows:[]}});d.close()}catch(d){x({success:!1,error:d.message||"Execution failed"})}finally{f(!1)}}},B=d=>{navigator.clipboard.writeText(d)},S=()=>{if(!a?.parsedData)return{columns:[],rows:[]};const{columns:d,rows:u}=a.parsedData;return{columns:d||[],rows:u||[]}},{columns:o,rows:T}=S();return e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:e.jsx("button",{onClick:p,disabled:c||!t?.trim()||i,style:{fontSize:"0.85rem",padding:"0.6rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, #3b82f6, #2563eb)",color:"white",border:"none",borderRadius:"8px",cursor:c||!t?.trim()||i?"not-allowed":"pointer",opacity:c||!t?.trim()||i?.6:1,fontWeight:500},children:i?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-small"}),"Initializing..."]}):c?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-small"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ys,{size:16}),"Run & Visualize"]})})}),!i&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.75rem",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"0.4rem 0.75rem",borderRadius:"20px",fontWeight:600,border:"1px solid rgba(16, 185, 129, 0.2)"},children:[e.jsx(Oe,{size:12}),"WASM Sandbox Active"]})]}),a&&e.jsxs("div",{style:{background:"var(--bg-dark)",borderRadius:"12px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",borderBottom:"1px solid var(--border-color)",background:"var(--bg-card)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:a.success?e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:16,color:"#10b981"}),e.jsx("span",{style:{fontWeight:500,color:"#10b981"},children:"Results"})]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{size:16,color:"#ef4444"}),e.jsx("span",{style:{fontWeight:500,color:"#ef4444"},children:"Error"})]})}),a.success&&T.length>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[T.length," row(s) returned"]}),e.jsxs("button",{onClick:()=>B(a.output||""),style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.3rem 0.6rem",fontSize:"0.75rem",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"4px",color:"var(--text-muted)",cursor:"pointer"},children:[e.jsx(fr,{size:12})," Copy"]})]})]}),e.jsx("div",{style:{padding:"1rem"},children:a.success?e.jsx(e.Fragment,{children:o.length>0&&T.length>0?e.jsx("div",{style:{overflowX:"auto",maxHeight:"350px"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"rgba(59, 130, 246, 0.1)",position:"sticky",top:0},children:o.map((d,u)=>e.jsx("th",{style:{padding:"0.75rem 1rem",textAlign:"left",borderBottom:"2px solid var(--border-color)",fontWeight:600,color:"#3b82f6",whiteSpace:"nowrap"},children:d},u))})}),e.jsx("tbody",{children:T.map((d,u)=>e.jsx("tr",{style:{background:u%2===0?"transparent":"rgba(255,255,255,0.02)"},children:d.map((y,A)=>e.jsx("td",{style:{padding:"0.6rem 1rem",borderBottom:"1px solid var(--border-color)",color:y===null||y===""?"var(--text-muted)":"var(--text-main)"},children:y===null?"NULL":y},A))},u))})]})}):e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"var(--text-muted)",fontStyle:"italic"},children:"Query executed successfully. No rows returned."})}):e.jsx("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.2)"},children:e.jsx("pre",{style:{margin:0,fontSize:"0.85rem",color:"#f87171",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},children:a.error||a.output||"Unknown error"})})})]})]})}function ri(t){if(!t||!t.trim())return{tables:[]};const r=[],c=/CREATE\s+TABLE\s+(?:IF\s+NOT\s+EXISTS\s+)?[`"']?(\w+)[`"']?\s*\(([\s\S]*?)\)\s*;/gi;let f;for(;(f=c.exec(t))!==null;){const a=f[1],x=f[2],l=[],h=x.match(/PRIMARY\s+KEY\s*\(([^)]+)\)/i),i=h?h[1].split(",").map(o=>o.trim().replace(/[`"']/g,"").toLowerCase()):[],m=/FOREIGN\s+KEY\s*\(\s*[`"']?(\w+)[`"']?\s*\)\s*REFERENCES\s+[`"']?(\w+)[`"']?\s*\(\s*[`"']?(\w+)[`"']?\s*\)/gi,p={};let B;for(;(B=m.exec(x))!==null;)p[B[1].toLowerCase()]={table:B[2],column:B[3]};const S=x.split(`
`).map(o=>o.trim().replace(/,\s*$/,"")).filter(o=>o.length>0);for(const o of S){if(/^\s*(PRIMARY\s+KEY|FOREIGN\s+KEY|UNIQUE|CHECK|CONSTRAINT|INDEX|KEY\s)/i.test(o))continue;const T=o.match(/^[`"']?(\w+)[`"']?\s+(\w+(?:\s*\([^)]*\))?)\s*(.*)?$/i);if(!T)continue;const d=T[1],u=T[2],y=T[3]||"",A=i.includes(d.toLowerCase())||/PRIMARY\s+KEY/i.test(y),g=p.hasOwnProperty(d.toLowerCase());l.push({name:d,type:u,isPrimaryKey:A,isForeignKey:g,isNotNull:/NOT\s+NULL/i.test(y),isAutoIncrement:/AUTO_INCREMENT|AUTOINCREMENT/i.test(y),defaultValue:y.match(/DEFAULT\s+([^\s,]+)/i)?.[1]||null,references:g?p[d.toLowerCase()]:null})}l.length>0&&r.push({name:a,columns:l})}return{tables:r}}function ii(t){const r=(t||"").toLowerCase();return r.includes("int")||r.includes("decimal")||r.includes("float")||r.includes("double")||r.includes("numeric")?e.jsx(ks,{size:12,color:"#f59e0b"}):r.includes("char")||r.includes("text")||r.includes("varchar")?e.jsx(jr,{size:12,color:"#3b82f6"}):r.includes("date")||r.includes("time")||r.includes("timestamp")?e.jsx(rs,{size:12,color:"#8b5cf6"}):r.includes("bool")?e.jsx(vr,{size:12,color:"#10b981"}):e.jsx(ks,{size:12,color:"#64748b"})}function nr({schema:t}){const[r,c]=s.useState(null),[f,a]=s.useState({});s.useEffect(()=>{if(t){const h=ri(t);if(c(h),h.tables){const i={};h.tables.forEach(m=>i[m.name]=!0),a(i)}}},[t]);const x=h=>{a(i=>({...i,[h]:!i[h]}))};if(!r||!r.tables||r.tables.length===0)return e.jsxs("div",{className:"glass",style:{padding:"2rem",textAlign:"center",borderRadius:"16px"},children:[e.jsx(Oe,{size:32,style:{opacity:.3,marginBottom:"1rem"}}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem"},children:"No schema detected for this problem."})]});const l=[];return r.tables.forEach(h=>{h.columns.forEach(i=>{i.isForeignKey&&i.references&&l.push({from:h.name,fromCol:i.name,to:i.references.table,toCol:i.references.column})})}),e.jsxs("div",{className:"sql-visualizer animate-fadeIn",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{padding:"0.5rem",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",borderRadius:"10px",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:e.jsx(Oe,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Database Map"}),e.jsxs("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:["Interactive Entity Relationship View â€¢ ",r.tables.length," table(s) detected"]})]}),e.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.7rem",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"0.35rem 0.7rem",borderRadius:"20px",fontWeight:600,border:"1px solid rgba(16, 185, 129, 0.2)"},children:"âš¡ Local Parse"})]}),l.length>0&&e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.08)",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.15)"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"#a78bfa",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Relationships"}),l.map((h,i)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem",marginBottom:"0.25rem"},children:[e.jsx("span",{style:{fontWeight:600,color:"#3b82f6"},children:h.from}),e.jsxs("span",{style:{color:"var(--text-muted)"},children:[".",h.fromCol]}),e.jsx("span",{style:{color:"#f59e0b"},children:"â†’"}),e.jsx("span",{style:{fontWeight:600,color:"#10b981"},children:h.to}),e.jsxs("span",{style:{color:"var(--text-muted)"},children:[".",h.toCol]})]},i))]}),e.jsx("div",{className:"er-diagram-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.5rem"},children:r.tables.map(h=>e.jsxs("div",{className:"glass table-card",style:{borderRadius:"16px",overflow:"hidden",border:"1px solid var(--glass-border)",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",background:"var(--glass-bg)",transition:"all 0.3s ease"},children:[e.jsxs("div",{onClick:()=>x(h.name),style:{padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderBottom:f[h.name]?"1px solid var(--glass-border)":"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(ys,{size:18,color:"#3b82f6"}),e.jsx("span",{style:{fontWeight:700,fontSize:"1rem",letterSpacing:"-0.01em"},children:h.name}),e.jsxs("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",background:"rgba(255,255,255,0.05)",padding:"0.15rem 0.5rem",borderRadius:"10px"},children:[h.columns.length," cols"]})]}),f[h.name]?e.jsx(Qs,{size:16}):e.jsx(bs,{size:16})]}),f[h.name]&&e.jsx("div",{className:"table-columns",style:{padding:"0.5rem 0"},children:h.columns.map((i,m)=>e.jsxs("div",{className:"column-row",style:{padding:"0.6rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"0.85rem",borderBottom:m===h.columns.length-1?"none":"1px solid rgba(255,255,255,0.03)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.isPrimaryKey?e.jsx(br,{size:14,color:"#f59e0b",title:"Primary Key"}):i.isForeignKey?e.jsx(yr,{size:14,color:"#10b981",title:`FK â†’ ${i.references?.table}`}):ii(i.type),e.jsx("span",{style:{fontWeight:i.isPrimaryKey||i.isForeignKey?600:400},children:i.name}),i.isPrimaryKey&&e.jsx("span",{style:{fontSize:"0.6rem",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",padding:"0.1rem 0.4rem",borderRadius:"4px",fontWeight:700},children:"PK"}),i.isForeignKey&&e.jsx("span",{style:{fontSize:"0.6rem",background:"rgba(16, 185, 129, 0.15)",color:"#10b981",padding:"0.1rem 0.4rem",borderRadius:"4px",fontWeight:700},children:"FK"}),i.isNotNull&&e.jsx("span",{style:{fontSize:"0.6rem",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",padding:"0.1rem 0.4rem",borderRadius:"4px",fontWeight:700},children:"NN"})]}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.75rem",fontFamily:"monospace"},children:i.type?.toLowerCase()})]},m))})]},h.name))}),e.jsx("style",{children:`
                .table-card:hover {
                    transform: translateY(-5px);
                    border-color: var(--primary);
                    box-shadow: 0 15px 35px rgba(59, 130, 246, 0.15);
                }
                .column-row:hover {
                    background: rgba(255, 255, 255, 0.05);
                }
                .sql-visualizer {
                    padding: 1.5rem;
                    background: rgba(15, 23, 42, 0.2);
                    border-radius: 20px;
                    border: 1px solid var(--border-color);
                }
            `})]})}function ni(t){if(!t||!t.trim())return[];const r=t.trim(),c=[],f=r.replace(/\s+/g," "),a=f.match(/FROM\s+(.+?)(?:\s+WHERE|\s+GROUP\s+BY|\s+HAVING|\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),x=f.match(/WHERE\s+(.+?)(?:\s+GROUP\s+BY|\s+HAVING|\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),l=f.match(/GROUP\s+BY\s+(.+?)(?:\s+HAVING|\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),h=f.match(/HAVING\s+(.+?)(?:\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),i=f.match(/ORDER\s+BY\s+(.+?)(?:\s+LIMIT|\s*;?\s*$)/i),m=f.match(/LIMIT\s+(\d+)/i),p=a?a[1].trim():null;if(!p)return c.push({stepName:"Execute",description:"Run the full query",query:r}),c;if(c.push({stepName:"1. FROM (Base Data)",description:`Load all rows from: ${p}`,query:`SELECT * FROM ${p};`}),x&&c.push({stepName:"2. WHERE (Filter)",description:`Apply filter: ${x[1].trim()}`,query:`SELECT * FROM ${p} WHERE ${x[1].trim()};`}),l){const T=l[1].trim();let d=`SELECT ${T}, COUNT(*) as count FROM ${p}`;x&&(d+=` WHERE ${x[1].trim()}`),d+=` GROUP BY ${T}`,h&&(d+=` HAVING ${h[1].trim()}`),d+=";",c.push({stepName:"3. GROUP BY (Aggregate)",description:`Group rows by: ${T}${h?` with HAVING: ${h[1].trim()}`:""}`,query:d})}let B=f.replace(/\s*ORDER\s+BY\s+.+?(?=\s+LIMIT|\s*;?\s*$)/i,"").replace(/\s*LIMIT\s+\d+/i,"").replace(/;?\s*$/,";");B!==r.replace(/;?\s*$/,";")&&c.push({stepName:`${l?"4":x?"3":"2"}. SELECT (Projection)`,description:"Apply column selection and expressions",query:B}),(i||m)&&c.push({stepName:`${c.length+1}. Final Result`,description:`${i?`Sort by: ${i[1].trim()}`:""}${m?` | Limit: ${m[1]}`:""}`,query:r.replace(/;?\s*$/,";")});const S=c[c.length-1]?.query?.replace(/;\s*$/,"").trim().toLowerCase(),o=r.replace(/;\s*$/,"").trim().toLowerCase();return S!==o&&c.push({stepName:`${c.length+1}. Final Result`,description:"Complete query output",query:r.replace(/;?\s*$/,";")}),c}function ar({query:t,schema:r}){const[c,f]=s.useState([]),[a,x]=s.useState(0),[l,h]=s.useState(!1),[i,m]=s.useState({}),[p,B]=s.useState(null),[S,o]=s.useState(null),[T,d]=s.useState(!1);s.useEffect(()=>{(async()=>{try{const z=await sr({locateFile:R=>`/${R}`});o(z),d(!0)}catch(z){console.error("Failed to init SQL.js:",z)}})()},[]);const u=(n,z)=>{try{const R=n.exec(z);return R.length>0?{columns:R[0].columns,rows:R[0].values}:{columns:[],rows:[]}}catch(R){return{error:R.message}}},y=()=>{if(!(!t||!S)){h(!0),B(null),m({});try{const n=ni(t);if(n.length===0){B("Could not break down the query. Make sure it is a valid SELECT statement."),h(!1);return}f(n),x(0);const z=new S.Database;r?.trim()&&z.run(r);const R={};for(let q=0;q<n.length;q++)R[q]=u(z,n[q].query);m(R),z.close()}catch(n){B(n.message||"Failed to analyze query.")}finally{h(!1)}}},A=()=>{a<c.length-1&&x(a+1)},g=()=>{a>0&&x(a-1)};return e.jsxs("div",{className:"sql-debugger-panel animate-fadeIn",children:[e.jsxs("div",{className:"debugger-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.25rem",borderBottom:"1px solid var(--border-color)",background:"rgba(59, 130, 246, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(qe,{size:20,color:"#3b82f6"}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:700},children:"Step-Wise Debugger"}),e.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:"Trace query logic layer by layer"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[T&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.7rem",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"0.35rem 0.7rem",borderRadius:"20px",fontWeight:600,border:"1px solid rgba(16, 185, 129, 0.2)"},children:[e.jsx(Oe,{size:12})," WASM"]}),e.jsxs("button",{onClick:y,disabled:l||!T,style:{padding:"0.6rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,cursor:l||!T?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",opacity:l||!T?.6:1},children:[e.jsx(Ze,{size:16})," ",c.length>0?"Restart Trace":"Trace Query"]})]})]}),p&&e.jsxs("div",{style:{padding:"1rem 1.25rem",background:"rgba(239, 68, 68, 0.1)",borderBottom:"1px solid rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(zs,{size:16,color:"#ef4444"}),e.jsx("span",{style:{fontSize:"0.85rem",color:"#f87171"},children:p})]}),e.jsxs("div",{className:"debugger-content",style:{display:"grid",gridTemplateColumns:"300px 1fr",minHeight:"400px"},children:[e.jsxs("div",{className:"steps-sidebar",style:{borderRight:"1px solid var(--border-color)",background:"rgba(0,0,0,0.1)"},children:[c.map((n,z)=>e.jsxs("div",{onClick:()=>x(z),style:{padding:"1rem 1.25rem",borderBottom:"1px solid rgba(255,255,255,0.03)",cursor:"pointer",background:a===z?"rgba(59, 130, 246, 0.15)":"transparent",position:"relative",display:"flex",alignItems:"flex-start",gap:"0.75rem",transition:"background 0.2s"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:i[z]?.error?"#ef4444":z<=a?"#10b981":"var(--bg-dark)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:800,color:"white",marginTop:"2px",flexShrink:0},children:i[z]?.error?"!":z<a?e.jsx(Sr,{size:14}):z+1}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.85rem"},children:n.stepName}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"2px"},children:n.description}),i[z]&&!i[z].error&&e.jsxs("div",{style:{fontSize:"0.65rem",color:"#10b981",marginTop:"3px"},children:[i[z].rows.length," row(s)"]})]}),a===z&&e.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",width:"3px",height:"60%",background:"#3b82f6",borderRadius:"3px 0 0 3px"}})]},z)),c.length===0&&e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)",fontSize:"0.85rem"},children:[e.jsx(wr,{size:32,style:{marginBottom:"1rem",opacity:.2}}),e.jsx("p",{children:'Click "Trace Query" to analyze SQL logic steps.'})]})]}),e.jsx("div",{className:"result-area",style:{display:"flex",flexDirection:"column"},children:c.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"step-query-info",style:{padding:"1rem 1.5rem",background:"rgba(0,0,0,0.2)"},children:[e.jsx("div",{style:{fontSize:"0.7rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#10b981",fontWeight:700,marginBottom:"0.5rem"},children:"Current Operation Query"}),e.jsx("div",{style:{background:"#020617",padding:"0.75rem 1rem",borderRadius:"8px",fontFamily:"monospace",fontSize:"0.85rem",color:"#cbd5e1",border:"1px solid rgba(255,255,255,0.05)",whiteSpace:"pre-wrap"},children:c[a]?.query})]}),e.jsx("div",{className:"step-data-preview",style:{flex:1,padding:"1.5rem",overflow:"auto"},children:i[a]?.error?e.jsx("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.2)"},children:e.jsx("pre",{style:{margin:0,fontSize:"0.85rem",color:"#f87171",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:i[a].error})}):i[a]?e.jsx("div",{className:"debugger-table-container",children:i[a].columns.length>0&&i[a].rows.length>0?e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"rgba(255,255,255,0.05)"},children:i[a].columns.map((n,z)=>e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid var(--border-color)",color:"#3b82f6",fontWeight:600},children:n},z))})}),e.jsx("tbody",{children:i[a].rows.map((n,z)=>e.jsx("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.03)"},children:n.map((R,q)=>e.jsx("td",{style:{padding:"0.75rem",color:R===null?"var(--text-muted)":"var(--text-main)"},children:R===null?"NULL":String(R)},q))},z))})]}):e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"Query executed successfully. No rows returned."})}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",opacity:.5},children:[e.jsx(zs,{size:32}),e.jsx("p",{style:{marginTop:"1rem"},children:"No data for this step."})]})}),e.jsxs("div",{className:"debugger-footer",style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:["Step ",a+1," of ",c.length]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[a>0&&e.jsx("button",{onClick:g,style:{padding:"0.5rem 1.25rem",background:"rgba(255,255,255,0.05)",color:"var(--text-main)",border:"1px solid var(--border-color)",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:"â† Previous"}),a<c.length-1&&e.jsxs("button",{onClick:A,style:{padding:"0.5rem 1.25rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Next Step ",e.jsx(kr,{size:16})]})]})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,padding:"3rem",textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"20px",background:"rgba(59, 130, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1.5rem"},children:e.jsx(qe,{size:32,color:"#3b82f6"})}),e.jsx("h4",{style:{margin:"0 0 0.5rem 0"},children:"Ready to Debug"}),e.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-muted)",maxWidth:"400px"},children:"The debugger will break your SQL query into physical execution steps so you can see how data flows through JOINs and WHERE clauses."})]})})]}),e.jsx("style",{children:`
                .sql-debugger-panel {
                    border-radius: 20px;
                    overflow: hidden;
                    background: var(--bg-card);
                    border: 1px solid var(--border-color);
                    box-shadow: var(--glass-shadow);
                }
                .debugger-table-container {
                    border-radius: 12px;
                    border: 1px solid rgba(255,255,255,0.05);
                    overflow: hidden;
                    background: #020617;
                }
            `})]})}let gs=null,Bs=null;const ai=async()=>{if(!gs){const[t,r]=await Promise.all([Mt(()=>import("./vendor-ai-B8mSylpS.js").then(c=>c.i),__vite__mapDeps([0,1,2])),Mt(()=>import("./vendor-ai-B8mSylpS.js").then(c=>c.c),__vite__mapDeps([0,1,2]))]);gs=t,Bs=r}return{tf:gs,cocoSsd:Bs}},ms="http://localhost:3000/api",kt={Python:{monacoLang:"python",ext:".py",defaultCode:`# Write your Python code here

def solution():
    pass

# Call your solution
solution()`},JavaScript:{monacoLang:"javascript",ext:".js",defaultCode:`// Write your JavaScript code here

function solution() {
    
}

// Call your solution
solution();`},Java:{monacoLang:"java",ext:".java",defaultCode:`// Write your Java code here

public class Solution {
    public static void main(String[] args) {
        // Your code here
    }
}`},C:{monacoLang:"c",ext:".c",defaultCode:`// Write your C code here
#include <stdio.h>

int main() {
    // Your code here
    return 0;
}`},"C++":{monacoLang:"cpp",ext:".cpp",defaultCode:`// Write your C++ code here
#include <iostream>
using namespace std;

int main() {
    // Your code here
    return 0;
}`},SQL:{monacoLang:"sql",ext:".sql",defaultCode:`-- Write your SQL query here
SELECT * FROM table_name;`}},Ds={aptitude:{label:"Aptitude",icon:Me},verbal:{label:"Verbal",icon:Ve},logical:{label:"Logical",icon:qe},coding:{label:"Coding",icon:De},sql:{label:"SQL",icon:Oe}};function oi(t,r){const c=[...t];let f=c.length;const a=()=>(r=(r*9301+49297)%233280,r/233280);for(;f--;){const x=Math.floor(a()*(f+1));[c[f],c[x]]=[c[x],c[f]]}return c}function li(t,r){let c=0;const f=`${t}-${r}`;for(let a=0;a<f.length;a++)c=(c<<5)-c+f.charCodeAt(a)|0;return Math.abs(c)}function di({test:t,user:r,onClose:c,onComplete:f}){const[a,x]=s.useState(0),[l,h]=s.useState(0),[i,m]=s.useState({}),[p,B]=s.useState((t.duration||180)*60),[S,o]=s.useState(0),[T,d]=s.useState(!1),[u,y]=s.useState(""),[A,g]=s.useState(!1),[n,z]=s.useState(null),[R,q]=s.useState(!1),[U,K]=s.useState(!1),[k,D]=s.useState({}),[w,re]=s.useState(""),[te,oe]=s.useState(!1),[fe,X]=s.useState(!0),[Z,V]=s.useState(350),I=s.useRef(null),Y=s.useRef(!1),[O,be]=s.useState({}),[Ce,Se]=s.useState({}),[de,We]=s.useState({}),[Ie,Ne]=s.useState({}),[se,F]=s.useState("validator"),ie=s.useRef(null),le=s.useRef(i),E=s.useRef(S),W=s.useRef(p),b=s.useRef(!1),N=t.proctoring||{},[ne,j]=s.useState(!1),[P,H]=s.useState(!1),[ye,ae]=s.useState(null),[we,et]=s.useState(!1),[Te,Pe]=s.useState(0),[nt,Ye]=s.useState(!1),[Be,mt]=s.useState(!1),[je,ut]=s.useState(N.enabled&&N.enableVideoAudio),[Le,Tt]=s.useState(!1),[at,ht]=s.useState(0),[dt,At]=s.useState(0),$e=s.useRef(null),ct=s.useRef(null),tt=s.useRef(null),ke=s.useRef(null),Ue=s.useRef(null),Bt=s.useRef(0),Wt=s.useRef(0),ft=s.useRef(0),[Et,Yt]=s.useState(0),Dt=s.useRef(0),pt=s.useRef(!1),ot=s.useMemo(()=>{const v=t.questionsBySection||{};return["aptitude","verbal","logical","coding","sql"].filter(L=>(v[L]&&v[L].length)>0)},[t.questionsBySection]),bt=s.useMemo(()=>{const v=t.questionsBySection||{},L=li(r.id,t.id),M=[];return ot.forEach(_=>{const J=(v[_]||[]).map(ue=>({...ue,section:_}));M.push(...oi(J,L+_.length))}),M},[t.questionsBySection,ot,r.id,t.id]),ns=ot[a]||ot[0],yt=bt.filter(v=>v.section===ns),$=yt[l],st=bt.length;s.useEffect(()=>{le.current=i},[i]),s.useEffect(()=>{E.current=S},[S]),s.useEffect(()=>{W.current=p},[p]),s.useEffect(()=>{const v=async()=>{try{!document.fullscreenElement&&!b.current&&await document.documentElement.requestFullscreen()}catch{}};v();const L=()=>{!document.fullscreenElement&&!b.current&&N.enabled&&(y("âš ï¸ Fullscreen mode required! Re-entering..."),d(!0),setTimeout(()=>{b.current||v(),d(!1)},1500))};return document.addEventListener("fullscreenchange",L),t&&r&&ze.emitSubmissionStarted(r.id,r.name||r.email,t.id,t.title,null,t.proctoring?.enabled||!1),()=>{document.removeEventListener("fullscreenchange",L),document.fullscreenElement&&!b.current&&document.exitFullscreen().catch(()=>{})}},[]),s.useEffect(()=>{if(!(n||!st))return ie.current=setInterval(()=>{B(v=>v<=1?(clearInterval(ie.current),ee(!0),0):v-1)},1e3),()=>clearInterval(ie.current)},[n,st]);const jt=t.maxTabSwitches??3;s.useEffect(()=>{const v=()=>{document.hidden&&!n&&o(L=>{const M=L+1;return ze.emitProctoringViolation(r.id,r.name||r.email,"window_switch",M>=jt?"critical":"warning",null),M>=jt?(y(`Disqualified: max tab switches (${M}) exceeded.`),d(!0),setTimeout(()=>ee(!0),2e3)):(y(`Tab switch detected (${M}/${jt}).`),d(!0),setTimeout(()=>d(!1),3e3)),M})};return document.addEventListener("visibilitychange",v),()=>document.removeEventListener("visibilitychange",v)},[n,jt]);const as=async()=>{try{const v=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:320,height:240},audio:!0});if(ae(v),j(!0),H(!0),Ye(!0),mt(!1),$e.current&&($e.current.srcObject=v,$e.current.play().catch(()=>{})),N.detectCameraBlocking&&(tt.current=setInterval(ls,1500)),N.detectPhoneUsage||N.detectCameraBlocking)try{const{tf:L,cocoSsd:M}=await ai();await L.ready();const _=await M.load();ke.current=_,Ue.current=setInterval(os,3e3)}catch(L){console.warn("Failed to load object detector:",L)}return!0}catch(v){return console.error("Camera access denied:",v),mt(!0),Ye(!1),!1}};s.useEffect(()=>{if(!(N.enabled&&N.enableVideoAudio))return(!N.enabled||!N.enableVideoAudio)&&(Ye(!0),ut(!1)),()=>{tt.current&&clearInterval(tt.current),Ue.current&&clearInterval(Ue.current),ye&&ye.getTracks().forEach(v=>v.stop())}},[N.enabled,N.enableVideoAudio]),s.useEffect(()=>{pt.current=we},[we]);const os=s.useCallback(async()=>{if(!(!ke.current||!$e.current||$e.current.readyState!==4))try{const v=await ke.current.detect($e.current);N.detectPhoneUsage&&(v.find(_=>_.class==="cell phone"&&_.score>.6)?(Tt(!0),ht(_=>{const J=_+1;return Wt.current=J,y(`ðŸ“µ Mobile Phone Detected! (${J})`),d(!0),setTimeout(()=>d(!1),3e3),ze.emitProctoringViolation(r.id,r.name||r.email,"phone_detected",J>=3?"critical":"warning",null),J})):Tt(!1)),!v.find(M=>M.class==="person"&&M.score>.5)&&!pt.current&&Yt(M=>{const _=M+1;return Dt.current=_,_%3===0&&ze.emitProctoringViolation(r.id,r.name||r.email,"face_not_detected",_>=9?"critical":"warning",null),_})}catch(v){console.error("Detection error:",v)}},[N.detectPhoneUsage]),ls=s.useCallback(()=>{if(!$e.current||!ct.current)return;const v=$e.current,L=ct.current;if(v.readyState<2||v.videoWidth===0)return;const M=L.getContext("2d");L.width=v.videoWidth||320,L.height=v.videoHeight||240,M.drawImage(v,0,0,L.width,L.height);const J=M.getImageData(0,0,L.width,L.height).data;let ue=0,Ke=0,vt=L.width*L.height;for(let St=0;St<J.length;St+=4){const wt=(J[St]+J[St+1]+J[St+2])/3;ue+=wt,wt<15&&Ke++}const or=ue/vt,lr=Ke/vt,Ss=or<25||lr>.85;Ss&&!pt.current?(pt.current=!0,et(!0),Pe(St=>{const wt=St+1;return Bt.current=wt,y(`âš ï¸ Camera blocked detected! Please uncover your camera. (${wt})`),d(!0),ze.emitProctoringViolation(r.id,r.name||r.email,"camera_blocked",wt>=3?"critical":"warning",null),wt})):!Ss&&pt.current&&(pt.current=!1,et(!1),d(!1))},[r]);s.useEffect(()=>{if(!N.enabled||!N.disableCopyPaste)return;const v=_=>{_.preventDefault(),At(J=>{const ue=J+1;return ft.current=ue,y(`ðŸ“‹ Copy attempt blocked! (${ue})`),d(!0),setTimeout(()=>d(!1),2e3),ze.emitProctoringViolation(r.id,r.name||r.email,"copy_attempt",ue>=5?"critical":"warning",null),ue})},L=_=>{_.preventDefault(),At(J=>{const ue=J+1;return ft.current=ue,y(`ðŸ“‹ Paste attempt blocked! (${ue})`),d(!0),setTimeout(()=>d(!1),2e3),ze.emitProctoringViolation(r.id,r.name||r.email,"paste_attempt",ue>=5?"critical":"warning",null),ue})},M=_=>_.preventDefault();return document.addEventListener("copy",v),document.addEventListener("paste",L),document.addEventListener("contextmenu",M),()=>{document.removeEventListener("copy",v),document.removeEventListener("paste",L),document.removeEventListener("contextmenu",M)}},[N.enabled,N.disableCopyPaste]),s.useEffect(()=>{Bt.current=Te},[Te]),s.useEffect(()=>{Wt.current=at},[at]),s.useEffect(()=>{ft.current=dt},[dt]),s.useEffect(()=>{Dt.current=Et},[Et]);const Ut=(v,L)=>{m(M=>({...M,[v]:L}))};s.useEffect(()=>{if(!$)return;if($.questionType==="coding"||$.questionType==="sql"||$.type==="coding"||$.type==="SQL"){const L=$.type==="SQL"||$.questionType==="sql"?"SQL":$.testCases?.language||"Python";if(!Ie[$.id]){const M=Object.keys(kt).find(_=>_.toLowerCase()===L.toLowerCase())||"Python";if(Ne(_=>({..._,[$.id]:M})),i[$.id]===void 0){const _=kt[M].defaultCode;m(J=>({...J,[$.id]:_}))}}}},[$?.id,$?.questionType,$?.starterCode,$?.testCases?.language]);const ds=(v,L)=>{i[v]&&(i[v],kt[Ie[v]]?.defaultCode),Ne(M=>({...M,[v]:L})),m(M=>({...M,[v]:kt[L].defaultCode}))},C=async(v,L,M,_)=>{D(J=>({...J,[v]:"Running..."})),be(J=>({...J,[v]:"output"}));try{const J=await Q.post(`${ms}/run`,{code:L,language:M,problemId:v,sqlSchema:_,stdin:Ce[v]||""});let ue=J.data.output||"";J.data.stderr&&(ue=ue?`${ue}

--- Errors ---
${J.data.stderr}`:J.data.stderr),D(Ke=>({...Ke,[v]:ue||J.data.error||"No output"}))}catch(J){D(ue=>({...ue,[v]:"Error: "+(J.response?.data?.error||J.message)}))}finally{K(!1)}},G=async()=>{if($){oe(!0);try{const v=$.type==="SQL"||$.questionType==="sql",L=Ie[$.id]||(v?"SQL":"Python"),M=await Q.post(`${ms}/hints`,{problemDescription:$.question,currentCode:i[$.id]||"",language:L});re(M.data.hint)}catch{re("Unable to generate hint at this time.")}finally{oe(!1)}}},ee=async(v=!1)=>{if(!A&&!(!v&&st>0&&Object.keys(i).length<st&&!window.confirm(`You have ${st-Object.keys(i).length} unanswered. Submit anyway?`))){if(b.current=!0,g(!0),ye&&ye.getTracks().forEach(L=>L.stop()),tt.current&&clearInterval(tt.current),Ue.current&&clearInterval(Ue.current),document.fullscreenElement)try{await document.exitFullscreen()}catch{}try{const L=(t.duration||120)*60-W.current;console.log("[Submit] Sending submission..."),r&&t&&ze.emitSubmissionCompleted(r.id,r.name||r.email,t.id,t.title,null,"success",Math.round(Object.keys(le.current).length/st*100));const M=await Q.post(`${ms}/global-tests/${t.id}/submit`,{studentId:r.id,answers:le.current,selectedLanguages:Ie,timeSpent:L,tabSwitches:E.current,copyPasteAttempts:ft.current,cameraBlockedCount:Bt.current,phoneDetectionCount:Wt.current,faceMissingCount:Dt.current,proctoringEnabled:N.enabled||!1});console.log("[Submit] Response received:",JSON.stringify(M.data).substring(0,500));const _=M.data.submission||M.data;console.log("[Submit] submissionResult status:",_?.status,"score:",_?.score,"sectionScores:",JSON.stringify(_?.sectionScores)),_?(await new Promise(J=>setTimeout(J,200)),console.log("[Submit] Submission successful, returning to test list..."),g(!1),c(),f&&f(_)):(console.error("[Submit] No submission data in response"),g(!1),alert("Test submitted but no result data received. Please refresh the page."))}catch(L){console.error("[Submit] Error:",L),g(!1),alert(L.response?.data?.error||"Submit failed. Please try again.")}}},ce=v=>{const L=Math.floor(v/60),M=v%60;return`${String(L).padStart(2,"0")}:${String(M).padStart(2,"0")}`},ve=()=>{l<yt.length-1?h(v=>v+1):a<ot.length-1&&(x(a+1),h(0))},rt=()=>{if(l>0)h(v=>v-1);else if(a>0){const v=ot[a-1],L=bt.filter(M=>M.section===v).length;x(a-1),h(L-1)}};if(R&&n){const v=n.sectionScores||{},L=n.status==="passed";return e.jsxs("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"auto",animation:"fadeIn 0.3s ease-out"},children:[e.jsx("style",{children:`
                    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                    @keyframes scaleIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
                    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
                    @keyframes confetti { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(-100px) rotate(720deg); opacity: 0; } }
                `}),e.jsxs("div",{style:{background:"rgba(30,41,59,0.98)",borderRadius:"24px",border:`2px solid ${L?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)"}`,maxWidth:800,width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:`0 25px 50px -12px ${L?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,animation:"scaleIn 0.4s ease-out"},children:[e.jsxs("div",{style:{padding:"2rem 2rem 1.5rem",background:L?"linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(6, 182, 212, 0.1))":"linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(251, 146, 60, 0.1))",borderBottom:`1px solid ${L?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`,textAlign:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:L?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",boxShadow:`0 8px 24px ${L?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)"}`,animation:L?"pulse 2s ease-in-out infinite":"none"},children:L?e.jsx(Qe,{size:40,color:"white"}):e.jsx(me,{size:40,color:"white"})}),e.jsx("h2",{style:{margin:"0 0 0.5rem",color:"white",fontSize:"1.75rem",fontWeight:800},children:L?"ðŸŽ‰ Congratulations!":"Test Completed"}),e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.7)",fontSize:"1rem"},children:L?"You have successfully passed the assessment!":"Keep practicing to improve your score."})]}),e.jsxs("div",{style:{padding:"2rem",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"2rem",flexWrap:"wrap",justifyContent:"center"},children:[e.jsxs("div",{style:{padding:"1.5rem 2.5rem",background:L?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",borderRadius:16,border:`2px solid ${L?"rgba(16,185,129,0.4)":"rgba(239,68,68,0.4)"}`,textAlign:"center",minWidth:"180px"},children:[e.jsxs("div",{style:{fontSize:"3.5rem",fontWeight:900,color:L?"#10b981":"#ef4444",lineHeight:1},children:[n.score??n.overallPercentage,"%"]}),e.jsx("div",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.6)",marginTop:"0.5rem",textTransform:"uppercase",letterSpacing:"2px",fontWeight:600},children:"Overall Score"})]}),e.jsxs("div",{style:{padding:"1.5rem 2rem",background:"rgba(139, 92, 246, 0.1)",borderRadius:16,border:"1px solid rgba(139, 92, 246, 0.3)",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"2rem",fontWeight:800,color:"#a78bfa"},children:[n.correctCount||0,"/",n.totalQuestions||0]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.5)",marginTop:"0.25rem"},children:"Correct Answers"})]})]}),e.jsxs("h3",{style:{margin:"0 0 1rem",color:"white",fontSize:"1.1rem",fontWeight:700,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(qe,{size:18,color:"#8b5cf6"})," Section-wise Performance"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"0.75rem"},children:Object.entries(v).map(([M,_])=>{const J=_>=70?"#10b981":_>=50?"#f59e0b":"#ef4444";return e.jsxs("div",{style:{padding:"1rem",background:"rgba(30, 41, 59, 0.8)",borderRadius:12,border:"1px solid rgba(255,255,255,0.1)",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:J},children:[_,"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",textTransform:"capitalize",marginTop:"0.25rem"},children:M})]},M)})})]}),e.jsx("div",{style:{padding:"1.25rem 2rem",borderTop:"1px solid rgba(139,92,246,0.2)",display:"flex",justifyContent:"center",gap:"1rem",background:"rgba(15, 23, 42, 0.5)"},children:e.jsx("button",{type:"button",onClick:()=>{document.fullscreenElement&&document.exitFullscreen(),c(),f&&f(n)},style:{padding:"0.85rem 2.5rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"12px",color:"white",fontWeight:700,fontSize:"1rem",cursor:"pointer",boxShadow:"0 4px 14px rgba(139, 92, 246, 0.4)",transition:"all 0.2s"},onMouseOver:M=>M.target.style.transform="translateY(-2px)",onMouseOut:M=>M.target.style.transform="translateY(0)",children:"Close & View Results"})})]})]})}if(bt.length===0)return e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"white"},children:["No questions available.",e.jsx("button",{onClick:c,style:{marginLeft:"1rem",padding:"0.5rem",cursor:"pointer"},children:"Close"})]});const Re=$?.questionType==="sql"||$?.questionType==="SQL"||$?.language==="SQL"||$?.type==="SQL",_e=($?.questionType==="coding"||$?.type==="coding"||!!$?.language)&&!Re,Fe=Ie[$?.id]||(Re?"SQL":"Python"),it=_e||Re?i[$?.id]??kt[Fe]?.defaultCode??"":"",Ge=s.useMemo(()=>{if(!$)return{input:"N/A",output:"N/A"};if($.sampleInput!==void 0&&$.expectedOutput!==void 0)return{input:String($.sampleInput),output:String($.expectedOutput)};if($.testCases){if($.questionType==="sql"||$.type==="SQL"){let M="N/A";if(Array.isArray($.testCases)){const _=$.testCases[0];_&&(M=_.expected_output||_.expectedOutput||"N/A")}else $.testCases&&(M=$.testCases.expectedOutput||"N/A");return{input:"N/A",output:String(M)}}const v=Array.isArray($.testCases)?$.testCases:$.testCases.cases||[],L=v.find(M=>!M.isHidden)||v[0];if(L){const M=L.input??L.sampleInput??"(empty)",_=L.expected_output??L.expectedOutput??"(empty)";return{input:String(M),output:String(_)}}}return{input:"N/A",output:"N/A"}},[$]);return e.jsxs("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[T&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,padding:"0.75rem 2rem",background:"linear-gradient(135deg, #f59e0b, #d97706)",color:"#1f2937",textAlign:"center",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",boxShadow:"0 4px 20px rgba(245, 158, 11, 0.4)",animation:"slideDown 0.3s ease-out"},children:[e.jsx("style",{children:"@keyframes slideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }"}),e.jsx(he,{size:20}),e.jsx("span",{style:{fontWeight:600},children:u})]}),A&&e.jsxs("div",{style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.95)",zIndex:1e5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1.5rem"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",border:"4px solid rgba(139, 92, 246, 0.2)",borderTopColor:"#8b5cf6",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),e.jsx("h2",{style:{margin:0,color:"white",fontSize:"1.5rem",fontWeight:700},children:"Submitting Your Test..."}),e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.6)",fontSize:"0.95rem"},children:"Please wait while we evaluate your answers"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#8b5cf6",animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#8b5cf6",animation:"pulse 1.5s ease-in-out 0.2s infinite"}}),e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#8b5cf6",animation:"pulse 1.5s ease-in-out 0.4s infinite"}})]}),e.jsx("style",{children:"@keyframes pulse { 0%, 100% { opacity: 0.3; transform: scale(1); } 50% { opacity: 1; transform: scale(1.2); } }"})]}),je&&N.enabled&&N.enableVideoAudio&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.98)",zIndex:100001,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #1e293b, #0f172a)",borderRadius:"20px",padding:"3rem",maxWidth:"500px",width:"100%",border:"1px solid rgba(139, 92, 246, 0.3)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.5)"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:e.jsx(es,{size:40,color:"#8b5cf6"})}),e.jsx("h2",{style:{margin:0,color:"white",fontSize:"1.75rem",fontWeight:700,marginBottom:"0.75rem"},children:"Camera Access Required"}),e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.6)",fontSize:"1rem",lineHeight:1.6},children:"This is a proctored test. You must allow camera and microphone access to continue."})]}),e.jsx("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"12px",padding:"1rem",marginBottom:"2rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx(gt,{size:20,color:"#f59e0b",style:{flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#fbbf24",lineHeight:1.5},children:[e.jsx("strong",{children:"Proctoring features enabled:"}),e.jsxs("ul",{style:{margin:"0.5rem 0 0",paddingLeft:"1.25rem"},children:[N.enableVideoAudio&&e.jsx("li",{children:"Camera & Audio monitoring"}),N.detectCameraBlocking&&e.jsx("li",{children:"Camera obstruction detection"}),N.detectPhoneUsage&&e.jsx("li",{children:"Phone usage detection"}),N.disableCopyPaste&&e.jsx("li",{children:"Copy/Paste disabled"})]})]})]})}),Be&&e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.15)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(he,{size:20,color:"#ef4444"}),e.jsx("div",{style:{color:"#fca5a5",fontSize:"0.9rem"},children:"Camera access was denied. Please allow camera access in your browser settings and try again."})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:c,style:{flex:1,padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"rgba(255,255,255,0.7)",fontSize:"1rem",fontWeight:600,cursor:"pointer"},children:"Cancel"}),e.jsxs("button",{onClick:async()=>{await as()&&ut(!1)},style:{flex:2,padding:"1rem",borderRadius:"12px",border:"none",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",color:"white",fontSize:"1rem",fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"0 4px 15px rgba(139, 92, 246, 0.4)"},children:[e.jsx(es,{size:20})," Allow Camera & Start Test"]})]})]})}),we&&N.enabled&&N.detectCameraBlocking&&!je&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(239, 68, 68, 0.95)",zIndex:99999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"20px",padding:"3rem",textAlign:"center",maxWidth:"500px"},children:[e.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem",animation:"pulse 1.5s ease-in-out infinite"},children:e.jsx(ts,{size:50,color:"white"})}),e.jsx("h2",{style:{margin:0,color:"white",fontSize:"2rem",fontWeight:700,marginBottom:"1rem"},children:"Camera Blocked!"}),e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.9)",fontSize:"1.1rem",lineHeight:1.6,marginBottom:"1.5rem"},children:"Your camera appears to be covered or obstructed. Please uncover your camera to continue the test."}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"12px",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(he,{size:20,color:"white"}),e.jsxs("span",{style:{color:"white",fontWeight:600},children:["Violations logged: ",Te]})]})]})}),e.jsxs("header",{style:{padding:"0.75rem 2rem",borderBottom:"1px solid rgba(139,92,246,0.2)",background:"linear-gradient(180deg, rgba(15,23,42,0.98) 0%, rgba(15,23,42,0.95) 100%)",display:"flex",justifyContent:"space-between",alignItems:"center",backdropFilter:"blur(12px)",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",paddingRight:"1.5rem",borderRight:"1px solid rgba(139,92,246,0.2)"},children:[e.jsx(Ct,{size:20,color:"#8b5cf6"}),e.jsx("span",{style:{fontWeight:700,fontSize:"1.1rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Assessment"})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:ot.map((v,L)=>{const M=Ds[v]?.icon||qe,_=a===L;return e.jsxs("button",{type:"button",onClick:()=>{x(L),h(0)},style:{padding:"0.5rem 1rem",borderRadius:10,border:_?"1px solid rgba(139,92,246,0.5)":"1px solid transparent",background:_?"linear-gradient(135deg, rgba(139,92,246,0.25), rgba(99,102,241,0.15))":"transparent",color:_?"#a78bfa":"#94a3b8",cursor:"pointer",fontSize:"0.85rem",fontWeight:_?600:500,display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease"},children:[e.jsx(M,{size:14}),Ds[v]?.label||v]},v)})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem"},children:[N.enabled&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem 0.75rem",background:"rgba(239,68,68,0.15)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px"},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#ef4444",animation:"pulse 1.5s infinite"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#fca5a5",fontWeight:600,letterSpacing:"0.5px"},children:"PROCTORED"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem 0.75rem",background:"rgba(139,92,246,0.1)",borderRadius:"8px",border:"1px solid rgba(139,92,246,0.2)"},children:[e.jsx(ge,{size:14,color:"#a78bfa"}),e.jsxs("span",{style:{color:"#a78bfa",fontSize:"0.85rem",fontWeight:600},children:[Object.keys(i).length,"/",st]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:p<300?"linear-gradient(135deg, rgba(239,68,68,0.2), rgba(220,38,38,0.1))":"linear-gradient(135deg, rgba(16,185,129,0.2), rgba(5,150,105,0.1))",borderRadius:10,border:`1px solid ${p<300?"rgba(239,68,68,0.4)":"rgba(16,185,129,0.4)"}`,boxShadow:p<300?"0 0 20px rgba(239,68,68,0.2)":"none"},children:[e.jsx(He,{size:16,color:p<300?"#ef4444":"#10b981"}),e.jsx("span",{style:{fontVariantNumeric:"tabular-nums",color:p<300?"#fca5a5":"#6ee7b7",fontWeight:700,fontSize:"1rem"},children:ce(p)})]})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[e.jsx("div",{style:{width:"300px",background:"linear-gradient(180deg, rgba(15,23,42,0.95) 0%, rgba(30,41,59,0.9) 100%)",borderRight:"1px solid rgba(139,92,246,0.15)",display:"flex",flexDirection:"column",backdropFilter:"blur(12px)"},children:e.jsxs("div",{style:{flex:1,padding:"1.25rem",overflowY:"auto"},children:[N.enabled&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(239,68,68,0.2), rgba(220,38,38,0.1))",border:"1px solid rgba(239,68,68,0.3)",borderRadius:10,padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"#fca5a5",fontWeight:600,fontSize:"0.8rem",marginBottom:"1rem",letterSpacing:"0.5px"},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#ef4444",animation:"pulse 1.5s infinite"}}),"PROCTORED MODE"]}),N.enableVideoAudio&&e.jsxs("div",{style:{position:"relative",borderRadius:12,overflow:"hidden",border:"2px solid rgba(139,92,246,0.3)",background:"#000",marginBottom:"1rem",boxShadow:"0 8px 24px rgba(0,0,0,0.4)"},children:[e.jsx("video",{ref:$e,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",display:"block",transform:"scaleX(-1)",aspectRatio:"4/3",objectFit:"cover"}}),e.jsxs("div",{style:{position:"absolute",bottom:8,left:8,display:"flex",gap:4},children:[e.jsx("div",{style:{padding:5,borderRadius:"50%",background:ne?"rgba(16,185,129,0.9)":"rgba(239,68,68,0.9)",backdropFilter:"blur(4px)"},children:e.jsx(es,{size:10,color:"white"})}),e.jsx("div",{style:{padding:5,borderRadius:"50%",background:P?"rgba(16,185,129,0.9)":"rgba(239,68,68,0.9)",backdropFilter:"blur(4px)"},children:e.jsx(js,{size:10,color:"white"})})]}),e.jsxs("div",{style:{position:"absolute",top:8,right:8,display:"flex",alignItems:"center",gap:4,padding:"3px 8px",borderRadius:20,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("div",{style:{width:5,height:5,borderRadius:"50%",background:"#10b981",animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontSize:"0.6rem",color:"white",fontWeight:600},children:"REC"})]})]}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem",fontSize:"0.8rem",background:"rgba(30,41,59,0.4)",padding:"1rem",borderRadius:12,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#e2e8f0",fontWeight:500},children:[e.jsx("span",{children:"Tab Switches:"}),e.jsxs("span",{style:{color:S>0?"#f59e0b":"#10b981",fontWeight:700},children:[S,"/",jt]})]}),N.detectCameraBlocking&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#e2e8f0",fontWeight:500},children:[e.jsx("span",{children:"Cam Blocks:"}),e.jsx("span",{style:{color:Te>0?"#ef4444":"#10b981",fontWeight:700},children:Te})]}),N.detectPhoneUsage&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#e2e8f0",fontWeight:500},children:[e.jsx("span",{children:"Phone Detected:"}),e.jsx("span",{style:{color:at>0?"#ef4444":"#10b981",fontWeight:700},children:at})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#e2e8f0",fontWeight:500},children:[e.jsx("span",{children:"Face Missing:"}),e.jsx("span",{style:{color:Et>0?"#f59e0b":"#10b981",fontWeight:700},children:Et})]})]}),e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsxs("h4",{style:{color:"rgba(239,68,68,0.9)",fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(he,{size:14})," Proctoring Rules"]}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.75rem",color:"#94a3b8",lineHeight:1.6,display:"flex",flexDirection:"column",gap:"0.4rem"},children:[e.jsx("li",{children:"Do not switch tabs or windows."}),N.enableVideoAudio&&e.jsx("li",{children:"Keep your camera and microphone on."}),N.enforceFullscreen&&e.jsx("li",{children:"Do not exit fullscreen mode."}),N.detectCameraBlocking&&e.jsx("li",{children:"Ensure your face is always visible."}),N.detectPhoneUsage&&e.jsx("li",{children:"No mobile phones allowed."})]})]})]}),e.jsxs("h3",{style:{margin:"0 0 1rem",fontSize:"0.9rem",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ae,{size:16})," Question Palette"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem"},children:yt.map((v,L)=>e.jsx("button",{onClick:()=>h(L),style:{width:36,height:36,borderRadius:8,border:l===L?"2px solid #3b82f6":"1px solid rgba(139,92,246,0.3)",background:i[yt[L].id]?"linear-gradient(135deg, #10b981, #06b6d4)":l===L?"rgba(59,130,246,0.3)":"transparent",color:"white",cursor:"pointer",fontSize:"0.85rem"},children:L+1},L))})]})}),!_e&&!Re?e.jsx(e.Fragment,{children:e.jsxs("div",{style:{flex:1,padding:"2rem",overflowY:"auto",display:"flex",flexDirection:"column",maxWidth:"900px",margin:"0 auto",width:"100%"},children:[e.jsxs("div",{style:{marginBottom:"1rem",fontSize:"1rem",color:"#8b5cf6",fontWeight:600},children:["Question ",l+1," OF ",yt.length]}),e.jsx("h2",{style:{fontSize:"1.25rem",color:"white",lineHeight:1.6,marginBottom:"2rem"},children:$?.question}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:($?.options||[]).map((v,L)=>e.jsxs("button",{onClick:()=>Ut($.id,v),style:{padding:"1.25rem",textAlign:"left",borderRadius:12,border:`1px solid ${i[$.id]===v?"#8b5cf6":"rgba(255,255,255,0.1)"}`,background:i[$.id]===v?"rgba(139,92,246,0.1)":"rgba(255,255,255,0.02)",color:"white",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.2s"},children:[e.jsx("div",{style:{width:28,height:28,borderRadius:"50%",border:"1px solid rgba(255,255,255,0.3)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",background:i[$.id]===v?"#8b5cf6":"transparent"},children:String.fromCharCode(65+L)}),v]},L))}),e.jsxs("div",{style:{marginTop:"auto",paddingTop:"2rem",display:"flex",justifyContent:"space-between"},children:[e.jsxs("button",{onClick:rt,disabled:a===0&&l===0,style:{padding:"0.75rem 1.5rem",borderRadius:10,background:"rgba(255,255,255,0.1)",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ss,{size:20})," Previous"]}),e.jsxs("button",{onClick:ve,style:{padding:"0.75rem 1.5rem",borderRadius:10,background:"linear-gradient(135deg, #3b82f6, #6366f1)",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Next ",e.jsx(zt,{size:20})]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"35%",minWidth:"350px",maxWidth:"450px",borderRight:"1px solid #334155",display:"flex",flexDirection:"column",background:"#0f172a"},children:e.jsxs("div",{style:{flex:1,padding:"2rem",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{background:"rgba(139, 92, 246, 0.15)",padding:"0.6rem",borderRadius:"10px"},children:e.jsx(Ve,{size:20,color:"#8b5cf6"})}),e.jsx("h3",{style:{margin:0,color:"white",fontSize:"1.2rem",fontWeight:700},children:"Problem Statement"})]}),e.jsx("div",{style:{padding:"0.4rem 0.8rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px",background:$.difficulty?.toLowerCase()==="hard"?"rgba(239, 68, 68, 0.1)":$.difficulty?.toLowerCase()==="medium"?"rgba(245, 158, 11, 0.1)":"rgba(16, 185, 129, 0.1)",color:$.difficulty?.toLowerCase()==="hard"?"#ef4444":$.difficulty?.toLowerCase()==="medium"?"#f59e0b":"#10b981",border:`1px solid ${$.difficulty?.toLowerCase()==="hard"?"rgba(239, 68, 68, 0.2)":$.difficulty?.toLowerCase()==="medium"?"rgba(245, 158, 11, 0.2)":"rgba(16, 185, 129, 0.2)"}`},children:$.difficulty||"Medium"})]}),e.jsx("div",{style:{color:"#94a3b8",lineHeight:1.8,fontSize:"1rem",letterSpacing:"-0.01em"},children:$.question}),Re&&e.jsxs("div",{style:{marginTop:"2rem",display:"flex",flexDirection:"column",gap:"1.25rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#60a5fa"},children:[e.jsx(Oe,{size:18}),e.jsx("span",{style:{fontWeight:700,fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Database Schema"})]}),e.jsxs("div",{style:{background:"#0f172a",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.3)",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"0.5rem 1rem",borderBottom:"1px solid rgba(59, 130, 246, 0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",fontFamily:"monospace"},children:"schema.sql"}),e.jsx(Oe,{size:12,color:"rgba(255,255,255,0.3)"})]}),e.jsx("pre",{style:{margin:0,padding:"1.25rem",fontSize:"0.85rem",color:"#93c5fd",overflowX:"auto",whiteSpace:"pre-wrap",fontFamily:'"Fira Code", "Source Code Pro", monospace',lineHeight:1.6},children:$.sqlSchema||$.starterCode||"No schema provided"})]})]}),Ge.output&&Ge.output!=="N/A"&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#10b981"},children:[e.jsx(Ae,{size:16}),e.jsx("span",{style:{fontWeight:700,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Expected Output"}),e.jsx("span",{style:{fontSize:"0.7rem",color:"rgba(16, 185, 129, 0.6)",marginLeft:"auto"},children:"Your query should produce this result"})]}),e.jsx("div",{style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08), rgba(6, 182, 212, 0.05))",borderRadius:"12px",border:"1px solid rgba(16, 185, 129, 0.25)",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:Ge.output.includes("|")?e.jsx("div",{style:{overflowX:"auto"},children:e.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontFamily:'"Fira Code", monospace',fontSize:"0.85rem"},children:e.jsx("tbody",{children:Ge.output.split(`
`).filter(Boolean).map((v,L)=>{const M=v.split("|").map(J=>J.trim()),_=L===0&&M.every(J=>/^[a-zA-Z_\s]+$/.test(J));return e.jsx("tr",{style:{background:_?"rgba(16, 185, 129, 0.15)":L%2===0?"transparent":"rgba(255,255,255,0.02)"},children:M.map((J,ue)=>_?e.jsx("th",{style:{padding:"0.75rem 1rem",textAlign:"left",color:"#10b981",fontWeight:700,borderBottom:"2px solid rgba(16, 185, 129, 0.3)",whiteSpace:"nowrap"},children:J},ue):e.jsx("td",{style:{padding:"0.65rem 1rem",color:"#4ade80",borderBottom:"1px solid rgba(255,255,255,0.05)",whiteSpace:"nowrap"},children:J},ue))},L)})})})}):e.jsx("pre",{style:{margin:0,padding:"1rem",fontFamily:'"Fira Code", monospace',fontSize:"0.85rem",color:"#4ade80",whiteSpace:"pre-wrap",lineHeight:1.6},children:Ge.output})}),e.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem 0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"8px",border:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Rt,{size:14,color:"#f59e0b"}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#fbbf24"},children:"Tip: Your output should match both the data values and ordering. Column headers may vary."})]})]})]}),!Re&&e.jsxs("div",{style:{marginTop:"2rem",display:"flex",flexDirection:"column",gap:"1.25rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#94a3b8"},children:[e.jsx(Ve,{size:16}),e.jsx("span",{style:{fontWeight:700,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Sample Input"})]}),e.jsx("div",{style:{background:"#1e293b",padding:"1rem",borderRadius:"10px",border:"1px solid #334155",fontFamily:'"Fira Code", monospace',fontSize:"0.9rem",color:"#e2e8f0",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.2)"},children:Ge.input})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"#10b981"},children:[e.jsx(ge,{size:16}),e.jsx("span",{style:{fontWeight:700,fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Expected Output"})]}),e.jsx("div",{style:{background:"rgba(16, 185, 129, 0.05)",padding:"1rem",borderRadius:"10px",border:"1px solid rgba(16, 185, 129, 0.2)",fontFamily:'"Fira Code", monospace',fontSize:"0.9rem",color:"#4ade80",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:Ge.output})]})]}),e.jsxs("div",{style:{marginTop:"2rem"},children:[e.jsxs("button",{onClick:G,disabled:te,style:{width:"100%",padding:"0.75rem",background:"rgba(251,191,36,0.1)",border:"1px solid rgba(251,191,36,0.3)",color:"#fbbf24",borderRadius:8,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(Rt,{size:16})," ",te?"Loading...":"Get AI Hint"]}),w&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(16,185,129,0.1)",border:"1px solid rgba(16,185,129,0.2)",color:"#4ade80",borderRadius:10,fontSize:"0.9rem"},children:["ðŸ’¡ ",w]})]})]})}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"linear-gradient(180deg, #111827 0%, #0f172a 100%)"},children:[e.jsxs("div",{style:{padding:"0.65rem 1.25rem",borderBottom:"1px solid rgba(59, 130, 246, 0.15)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(180deg, rgba(31, 41, 55, 0.6) 0%, rgba(31, 41, 55, 0.3) 100%)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(De,{size:14,color:"#3b82f6"}),e.jsx("div",{style:{color:"#94a3b8",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Language"})]}),e.jsx("select",{value:Fe,onChange:v=>ds($.id,v.target.value),disabled:Re,style:{background:"rgba(30, 41, 59, 0.8)",color:"#f3f4f6",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"0.4rem 0.75rem",cursor:Re?"default":"pointer",fontSize:"0.85rem",outline:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:Object.keys(kt).map(v=>e.jsx("option",{value:v,disabled:Re&&v!=="SQL",children:v},v))})]}),!Re&&e.jsx("button",{onClick:()=>C($.id,it,Fe,$.sqlSchema),disabled:U,style:{padding:"0.5rem 1.25rem",background:U?"#374151":"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"8px",color:"white",fontWeight:600,cursor:U?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.6rem",boxShadow:U?"none":"0 4px 10px rgba(37, 99, 235, 0.3)",transition:"all 0.2s",fontSize:"0.9rem"},children:U?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin",style:{width:14,height:14,border:"2px solid rgba(255,255,255,0.3)",borderTopColor:"white",borderRadius:"50%"}}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{size:16,fill:"white"})," Run Code"]})})]}),e.jsxs("div",{style:{flex:1,position:"relative",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx("div",{style:{flex:1,position:"relative",minHeight:"200px"},children:e.jsx(Qt,{height:"100%",defaultLanguage:Re?"sql":"python",language:kt[Fe]?.monacoLang||"python",theme:"vs-dark",value:it,onChange:v=>m(L=>({...L,[$.id]:v||""})),options:{minimap:{enabled:!1},fontSize:14,padding:{top:16}}})}),e.jsxs("div",{ref:I,style:{height:fe?`${Z}px`:"40px",flex:0,minHeight:fe?"400px":"40px",transition:Y.current?"none":"height 0.25s cubic-bezier(0.4, 0, 0.2, 1)",borderTop:"2px solid rgba(59, 130, 246, 0.3)",background:"linear-gradient(180deg, #0a0f1a 0%, #020617 100%)",display:"flex",flexDirection:"column",flexShrink:0,position:"relative",overflow:"hidden",boxShadow:"0 -4px 20px rgba(0,0,0,0.3)"},children:[fe&&e.jsx("div",{onMouseDown:v=>{v.preventDefault(),v.stopPropagation(),Y.current=!0;const L=v.clientY,M=Z;document.body.style.cursor="ns-resize",document.body.style.userSelect="none";const _=ue=>{ue.preventDefault();const Ke=L-ue.clientY,vt=Math.min(Math.max(M+Ke,120),600);V(vt)},J=()=>{Y.current=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",J)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",J)},style:{position:"absolute",top:"-4px",left:0,right:0,height:"12px",cursor:"ns-resize",background:"transparent",zIndex:20,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{style:{width:"60px",height:"5px",background:"linear-gradient(90deg, transparent, #3b82f6, transparent)",borderRadius:"3px",opacity:.7,transition:"opacity 0.2s, width 0.2s"},onMouseEnter:v=>{v.target.style.opacity="1",v.target.style.width="80px"},onMouseLeave:v=>{v.target.style.opacity="0.7",v.target.style.width="60px"}})}),!fe&&e.jsxs("div",{onClick:()=>X(!0),style:{flex:1,display:"flex",alignItems:"center",padding:"0 1.5rem",cursor:"pointer",background:"linear-gradient(180deg, #0f172a 0%, #1e293b 100%)",gap:"0.75rem",color:"#94a3b8",fontSize:"0.85rem",justifyContent:"space-between",borderTop:"1px solid rgba(59, 130, 246, 0.2)",transition:"background 0.2s"},onMouseEnter:v=>v.currentTarget.style.background="linear-gradient(180deg, #1e293b 0%, #334155 100%)",onMouseLeave:v=>v.currentTarget.style.background="linear-gradient(180deg, #0f172a 0%, #1e293b 100%)",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{padding:"0.35rem",background:"rgba(59, 130, 246, 0.2)",borderRadius:"6px",display:"flex",alignItems:"center"},children:e.jsx(Qs,{size:16,color:"#3b82f6"})}),e.jsx("span",{style:{fontWeight:600},children:"Console & Test Results"})]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("kbd",{style:{padding:"2px 6px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",fontSize:"0.7rem"},children:"Click"}),"to expand"]})]}),Re&&fe&&e.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"0.75rem 1.25rem",background:"#0f172a",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"1.25rem"},children:[e.jsxs("button",{onClick:()=>F("validator"),style:{padding:"0.5rem 0.75rem",background:"transparent",color:se==="validator"?"#3b82f6":"#94a3b8",border:"none",borderBottom:`2px solid ${se==="validator"?"#3b82f6":"transparent"}`,cursor:"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.6rem",transition:"all 0.2s",marginTop:"2px"},children:[e.jsx(gt,{size:16})," Validator"]}),e.jsxs("button",{onClick:()=>F("visualizer"),style:{padding:"0.5rem 0.75rem",background:"transparent",color:se==="visualizer"?"#8b5cf6":"#94a3b8",border:"none",borderBottom:`2px solid ${se==="visualizer"?"#8b5cf6":"transparent"}`,cursor:"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.6rem",transition:"all 0.2s",marginTop:"2px"},children:[e.jsx(Oe,{size:16})," ER Diagram"]}),e.jsxs("button",{onClick:()=>F("debugger"),style:{padding:"0.5rem 0.75rem",background:"transparent",color:se==="debugger"?"#10b981":"#94a3b8",border:"none",borderBottom:`2px solid ${se==="debugger"?"#10b981":"transparent"}`,cursor:"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.6rem",transition:"all 0.2s",marginTop:"2px"},children:[e.jsx(qe,{size:16})," Debugger"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.3)",fontWeight:500,textTransform:"uppercase"},children:"Advanced SQL Tools"}),e.jsx("button",{onClick:()=>X(!1),style:{background:"transparent",border:"none",cursor:"pointer",color:"#64748b"},children:e.jsx(bs,{size:18})})]})]}),e.jsxs("div",{style:{flex:1,overflow:"auto",padding:"1.5rem",background:"radial-gradient(circle at top left, rgba(30,41,59,0.2), transparent)",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[se==="validator"&&e.jsx(ir,{query:it,schemaContext:$.sqlSchema||$.starterCode}),se==="visualizer"&&e.jsx(nr,{schema:$.sqlSchema||$.starterCode}),se==="debugger"&&e.jsx(ar,{query:it,schema:$.sqlSchema||$.starterCode})]})]}),!Re&&fe&&e.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(59, 130, 246, 0.1)",background:"linear-gradient(180deg, rgba(15, 23, 42, 0.8) 0%, rgba(15, 23, 42, 0.5) 100%)",justifyContent:"space-between",paddingRight:"1rem"},children:[e.jsx("div",{style:{display:"flex"},children:["input","output","tests"].map(v=>{const L=(O[$.id]||"input")===v;return e.jsxs("button",{onClick:()=>be(M=>({...M,[$.id]:v})),style:{padding:"1rem 1.5rem",background:L?"rgba(30, 41, 59, 0.8)":"transparent",border:"none",borderBottom:L?`3px solid ${v==="input"?"#f59e0b":v==="output"?"#3b82f6":"#10b981"}`:"3px solid transparent",color:L?v==="input"?"#fbbf24":v==="output"?"#60a5fa":"#4ade80":"#94a3b8",cursor:"pointer",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.75rem",transition:"all 0.2s"},children:[v==="input"&&e.jsxs(e.Fragment,{children:[e.jsx(Ve,{size:14})," Custom Input"]}),v==="output"&&e.jsxs(e.Fragment,{children:[e.jsx(De,{size:14})," Output ",e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:k[$.id]?"#10b981":"transparent",marginLeft:4}})]}),v==="tests"&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:14})," Test Cases",de[$.id]&&e.jsxs("span",{style:{fontSize:"0.7rem",background:"rgba(255,255,255,0.1)",padding:"1px 6px",borderRadius:4,marginLeft:4},children:[de[$.id].passed,"/",de[$.id].total]})]})]},v)})}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:e.jsx("button",{onClick:()=>X(!1),title:"Collapse",style:{background:"transparent",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"4px"},children:e.jsx(bs,{size:18})})})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",padding:"1.5rem"},children:[(O[$.id]||"input")==="input"&&e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"1rem"},children:e.jsx("textarea",{value:Ce[$.id]||"",onChange:v=>Se(L=>({...L,[$.id]:v.target.value})),placeholder:"Enter custom input here...",style:{width:"100%",flex:1,background:"rgba(15, 23, 42, 0.6)",color:"#e2e8f0",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px",padding:"1.25rem",fontFamily:"monospace",resize:"none",outline:"none",fontSize:"0.9rem",lineHeight:"1.6"}})}),(O[$.id]||"input")==="output"&&e.jsx("div",{style:{padding:"1.5rem",fontFamily:"monospace",color:"#e2e8f0",fontSize:"0.9rem",whiteSpace:"pre-wrap",flex:1,overflow:"auto",maxHeight:"100%",lineHeight:"1.6"},children:k[$.id]||"No output yet. Run your code to see results."}),(O[$.id]||"input")==="tests"&&e.jsx("div",{style:{padding:"1.5rem",overflow:"auto",flex:1,display:"flex",flexDirection:"column",gap:"1.5rem"},children:e.jsx(rr,{problemId:$.id,code:it,language:Fe,isGlobalTest:!0,onRunComplete:v=>{if(v?.testResults){const L=v.testResults.filter(_=>_.passed).length,M=v.testResults.length;if(We(_=>({..._,[$.id]:{passed:L,total:M}})),r&&ze){const _=Math.round(L/M*100);ze.emitProgressUpdate(r.id,$.id,_,null)}}}})})]})]})]})]})]})]})]}),e.jsxs("div",{style:{padding:"0.75rem 2rem",borderTop:"1px solid rgba(139,92,246,0.2)",background:"linear-gradient(180deg, rgba(15,23,42,0.98) 0%, rgba(15,23,42,0.95) 100%)",display:"flex",justifyContent:"space-between",alignItems:"center",backdropFilter:"blur(12px)",boxShadow:"0 -4px 20px rgba(0,0,0,0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsxs("span",{style:{fontSize:"0.85rem",color:"#64748b"},children:["Question ",bt.indexOf($)+1," of ",st]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:rt,style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.05)",color:"#94a3b8",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.35rem",transition:"all 0.2s"},children:[e.jsx(ss,{size:16})," Prev"]}),e.jsxs("button",{onClick:ve,style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.05)",color:"#94a3b8",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.35rem",transition:"all 0.2s"},children:["Next ",e.jsx(zt,{size:16})]})]})]}),e.jsxs("button",{onClick:()=>ee(!1),disabled:A,style:{padding:"0.75rem 2rem",borderRadius:12,border:"none",background:A?"#374151":"linear-gradient(135deg, #8b5cf6, #6366f1)",color:"white",fontWeight:700,cursor:A?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:A?"none":"0 4px 20px rgba(139, 92, 246, 0.4)",transition:"all 0.2s",fontSize:"0.95rem"},children:[e.jsx(Je,{size:18})," ",A?"Submitting...":"Submit Test"]})]}),e.jsx("canvas",{ref:ct,style:{display:"none"}})]})}let us=null,$s=null,Fs=null;const Ps=async()=>{if(!us){const[t,r,c]=await Promise.all([Mt(()=>import("./vendor-ai-B8mSylpS.js").then(f=>f.i),__vite__mapDeps([0,1,2])),Mt(()=>import("./vendor-ai-B8mSylpS.js").then(f=>f.c),__vite__mapDeps([0,1,2])),Mt(()=>import("./vendor-ai-B8mSylpS.js").then(f=>f.b),__vite__mapDeps([0,1,2]))]);us=t,$s=r,Fs=c}return{tf:us,cocoSsd:$s,blazeface:Fs}},Kt="http://localhost:3000/api",Xt={Python:{monacoLang:"python",ext:".py",defaultCode:`# Write your Python code here

def solution():
    pass

# Call your solution
solution()`},JavaScript:{monacoLang:"javascript",ext:".js",defaultCode:`// Write your JavaScript code here

function solution() {
    
}

// Call your solution
solution();`},Java:{monacoLang:"java",ext:".java",defaultCode:`// Write your Java code here

public class Solution {
    public static void main(String[] args) {
        // Your code here
    }
}`},C:{monacoLang:"c",ext:".c",defaultCode:`// Write your C code here
#include <stdio.h>

int main() {
    // Your code here
    return 0;
}`},"C++":{monacoLang:"cpp",ext:".cpp",defaultCode:`// Write your C++ code here
#include <iostream>
using namespace std;

int main() {
    // Your code here
    return 0;
}`},SQL:{monacoLang:"sql",ext:".sql",defaultCode:`-- Write your SQL query here
SELECT * FROM table_name;`}};function ci({problem:t,user:r,onClose:c,onSubmitSuccess:f}){const[a,x]=s.useState(t.language),[l,h]=s.useState(Xt[t.language]?.defaultCode||""),[i,m]=s.useState(!1),[p,B]=s.useState(!1),[S,o]=s.useState(""),[T,d]=s.useState(""),[u,y]=s.useState(!1),[A,g]=s.useState(!1),[n,z]=s.useState(""),[R,q]=s.useState("output"),[U,K]=s.useState([]),[k,D]=s.useState([]),[w,re]=s.useState(!1),te=s.useRef(null),[oe,fe]=s.useState(0),[X,Z]=s.useState(0),[V,I]=s.useState(!1),[Y,O]=s.useState(""),[be,Ce]=s.useState(!1),[Se]=s.useState(Date.now()),[de,We]=s.useState(null),[Ie,Ne]=s.useState(!1),[se,F]=s.useState(!1),[ie,le]=s.useState(null),[E,W]=s.useState(!1),[b,N]=s.useState(0),[ne,j]=s.useState(!1),[P,H]=s.useState(0),[ye,ae]=s.useState(!1),[we,et]=s.useState(!0),[Te,Pe]=s.useState(!1),[nt,Ye]=s.useState(0),[Be,mt]=s.useState(0),[je,ut]=s.useState(0),Le=s.useRef(null),Tt=s.useRef(null),at=s.useRef(null),ht=s.useRef(!1),dt=s.useRef(!1),At=s.useRef(null),$e=s.useRef(null),ct=s.useRef(null),tt=s.useRef(null);s.useRef(!0);const ke=t.proctoring||{},Ue=ke.maxTabSwitches||3;s.useEffect(()=>{setTimeout(()=>{te.current&&!document.fullscreenElement&&te.current.requestFullscreen().then(()=>{g(!0)}).catch(ee=>{console.log("Fullscreen request failed:",ee.message)})},100);const G=()=>{g(!!document.fullscreenElement)};if(document.addEventListener("fullscreenchange",G),t.testCases){const ee=typeof t.testCases=="string"?JSON.parse(t.testCases):t.testCases;K(Array.isArray(ee)?ee:[])}return()=>{document.removeEventListener("fullscreenchange",G),document.fullscreenElement&&document.exitFullscreen().catch(()=>{})}},[]),s.useEffect(()=>(ke.enabled&&ke.videoAudio&&Bt(),()=>{Yt(),ie&&ie.getTracks().forEach(C=>C.stop())}),[]);const Bt=async()=>{try{const C=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"},audio:!0});le(C),Ne(!0),F(!0),Le.current&&(Le.current.srcObject=C),Et(),pt(),(ke.enableFaceDetection||ke.detectMultipleFaces||ke.trackFaceLookaway)&&yt()}catch(C){console.error("Failed to access camera/microphone:",C),O("âš ï¸ Camera/Microphone access required for proctoring"),I(!0)}},Wt=()=>{Yt(),bt(),as(),ie&&(ie.getTracks().forEach(C=>{C.stop(),console.log(`ðŸ›‘ Stopped ${C.kind} track`)}),le(null)),Le.current&&(Le.current.srcObject=null),Ne(!1),F(!1)},ft=()=>{Wt(),c()},Et=()=>{const C=document.createElement("canvas");C.width=64,C.height=48,Tt.current=C,at.current=setInterval(()=>{Dt()},3e3)},Yt=()=>{at.current&&(clearInterval(at.current),at.current=null)},Dt=()=>{if(!Le.current||!Tt.current)return;const C=Le.current,G=Tt.current,ee=G.getContext("2d");ee.drawImage(C,0,0,G.width,G.height);const ve=ee.getImageData(0,0,G.width,G.height).data;let rt=0,Re=0,_e={r:0,g:0,b:0};const Fe=ve.length/4;for(let _=0;_<ve.length;_+=4){const J=ve[_],ue=ve[_+1],Ke=ve[_+2],vt=(J+ue+Ke)/3;rt+=vt,_e.r+=J,_e.g+=ue,_e.b+=Ke,vt<30&&Re++}const it=rt/Fe,Ge=Re/Fe,v={r:_e.r/Fe,g:_e.g/Fe,b:_e.b/Fe};let L=0;for(let _=0;_<ve.length;_+=4){const J=ve[_],ue=ve[_+1],Ke=ve[_+2];L+=Math.abs(J-v.r)+Math.abs(ue-v.g)+Math.abs(Ke-v.b)}L=L/Fe/3;const M=Ge>.9||it<15||L<8;console.log(`Camera check - Brightness: ${it.toFixed(1)}, Variance: ${L.toFixed(1)}, Dark%: ${(Ge*100).toFixed(1)}%, Blocked: ${M}`),M&&!ht.current?(ht.current=!0,W(!0),N(_=>{const J=_+1;return ze.emitProctoringViolation(r.id,r.name||r.email,"camera_blocked","critical",t.mentorId),O(`ðŸš« Camera obstruction detected! (${J} times) Please uncover your camera.`),I(!0),J})):!M&&ht.current&&(ht.current=!1,W(!1),I(!1))},pt=async()=>{try{console.log("ðŸ“± Loading object detection model...");const{tf:C,cocoSsd:G}=await Ps();await C.ready();const ee=await G.load({base:"lite_mobilenet_v2"});At.current=ee,ae(!0),console.log("âœ… Object detection model loaded"),ot()}catch(C){console.error("Failed to load object detection model:",C)}},ot=()=>{$e.current=setInterval(()=>{ns()},2e3)},bt=()=>{$e.current&&(clearInterval($e.current),$e.current=null)},ns=async()=>{if(!Le.current||!At.current){console.log("â³ Phone detection skipped - video or model not ready");return}if(Le.current.readyState<2){console.log("â³ Video not ready yet, readyState:",Le.current.readyState);return}try{const C=await At.current.detect(Le.current);console.log("ðŸ” Detection ran, found:",C.length,"objects:",C.map(ce=>`${ce.class}(${(ce.score*100).toFixed(0)}%)`).join(", "));const G=C.filter(ce=>["cell phone","laptop","book","remote"].includes(ce.class)&&ce.score>.4),ee=G.some(ce=>ce.class==="cell phone"&&ce.score>.4);G.length>0&&console.log("ðŸš¨ Suspicious objects detected:",G.map(ce=>`${ce.class} (${(ce.score*100).toFixed(0)}%)`)),ee&&!dt.current?(dt.current=!0,j(!0),H(ce=>{const ve=ce+1;return ze.emitProctoringViolation(r.id,r.name||r.email,"phone_detected",ve>2?"critical":"warning",t.mentorId),O(`ðŸ“± Mobile phone detected! (${ve} times) Remove all electronic devices from view.`),I(!0),ve})):!ee&&dt.current&&(dt.current=!1,j(!1),setTimeout(()=>{!dt.current&&!ht.current&&I(!1)},3e3))}catch(C){console.error("Phone detection error:",C)}},yt=async()=>{try{console.log("ðŸ‘ï¸ Loading BlazeFace model...");const{blazeface:C}=await Ps(),G=await C.load();ct.current=G,console.log("âœ… BlazeFace model loaded successfully"),jt()}catch(C){console.error("âŒ Failed to load BlazeFace model:",C)}},$=C=>{if(!C||!C.start||!C.end)return!1;const[G,ee]=C.start,[ce,ve]=C.end,rt=(G+ce)/2,Re=(ee+ve)/2,_e=Le.current.videoWidth/2,Fe=Le.current.videoHeight/2,it=Math.abs(rt-_e),Ge=Math.abs(Re-Fe),v=150;return it>v||Ge>v},st=async()=>{if(!(!Le.current||!ct.current))try{const C=await ct.current.estimateFaces(Le.current,!1);console.log(`ðŸ‘ï¸ Face detection result: ${C.length} face(s)`),C.length===0?ke.enableFaceDetection&&(et(!1),mt(G=>(ze.emitProctoringViolation(r.id,r.name||r.email,"face_not_detected","warning",t.mentorId),G+1)),console.log("âš ï¸ Face not detected")):C.length===1?(et(!0),Pe(!1),console.log("âœ… Single face detected"),ke.trackFaceLookaway&&$(C[0])&&(Ye(G=>(ze.emitProctoringViolation(r.id,r.name||r.email,"face_lookaway","warning",t.mentorId),G+1)),console.log("âš ï¸ Face is off-center (looking away)"))):C.length>=2&&ke.detectMultipleFaces&&(et(!0),Pe(!0),ut(G=>(ze.emitProctoringViolation(r.id,r.name||r.email,"multiple_faces","critical",t.mentorId),G+1)),O(`ðŸ‘¥ Multiple people detected! (${C.length} faces) - Automatic violation!`),I(!0),console.log("ðŸš¨ Multiple faces detected - CHEATING"))}catch(C){console.error("âŒ Face detection inference failed:",C),et(!1)}},jt=()=>{if(!ct.current){console.error("âŒ Face detector not loaded yet");return}tt.current=setInterval(()=>{st()},1e3),console.log("ðŸ‘ï¸ Face detection started (1s intervals)")},as=()=>{tt.current&&(clearInterval(tt.current),tt.current=null,console.log("ðŸ‘ï¸ Face detection stopped"))};s.useEffect(()=>{if(!ke.enabled||!ke.trackTabSwitches)return;const C=()=>{document.hidden&&!be?fe(G=>{const ee=G+1;return ze.emitProctoringViolation(r.id,r.name||r.email,"window_switch",ee>=Ue?"critical":"warning",t.mentorId),ee>=Ue?(O(`ðŸš« Maximum tab switches reached (${ee}/${Ue}). This will be reported.`),I(!0),Ce(!0)):(O(`âš ï¸ Tab switch detected! (${ee}/${Ue}) ${Ue-ee} more will be flagged!`),I(!0),setTimeout(()=>I(!1),4e3)),ee}):document.hidden||te.current&&!document.fullscreenElement&&setTimeout(()=>{te.current?.requestFullscreen().catch(()=>{})},100)};return document.addEventListener("visibilitychange",C),()=>document.removeEventListener("visibilitychange",C)},[ke,be,Ue]),s.useEffect(()=>{if(!ke.enabled||!ke.disableCopyPaste)return;const C=ee=>{(ee.type==="paste"||ee.ctrlKey&&(ee.key==="v"||ee.key==="c"))&&(ee.preventDefault(),Z(ce=>(ze.emitProctoringViolation(r.id,r.name||r.email,"copy_attempt","warning",t.mentorId),ce+1)),O("ðŸš« Copy/Paste is disabled for this problem!"),I(!0),setTimeout(()=>I(!1),3e3))},G=ee=>{ee.preventDefault()};return document.addEventListener("paste",C),document.addEventListener("keydown",C),document.addEventListener("contextmenu",G),()=>{document.removeEventListener("paste",C),document.removeEventListener("keydown",C),document.removeEventListener("contextmenu",G)}},[ke]);const os=async()=>{B(!0),o("");try{const C=await Q.post(`${Kt}/run`,{code:l,language:t.language,problemId:t.id,sqlSchema:t.sqlSchema,stdin:n});o(C.data.output||C.data.error||"No output"),q("output"),(C.data.error||C.data.output?.includes("FAILED")||C.data.output?.includes("Error"))&&ze.emitTestFailed(r.id,r.name||r.email,t.id,`Run Test - ${t.title}`,t.mentorId)}catch(C){const G="Error running code: "+(C.response?.data?.error||C.message);o(G),q("output"),ze.emitTestFailed(r.id,r.name||r.email,t.id,`Run Error - ${t.title}`,t.mentorId)}finally{B(!1)}},ls=async()=>{y(!0);try{const C=await Q.post(`${Kt}/hints`,{problemDescription:t.description,currentCode:l,language:a});d(C.data.hint)}catch{d("Unable to generate hint at this time.")}finally{y(!1)}},Ut=async()=>{if(!U||U.length===0){alert("No test cases available for this problem");return}re(!0),D([]);try{const C=[];for(let ee=0;ee<U.length;ee++){const ce=U[ee];try{const ve=await Q.post(`${Kt}/run`,{code:l,language:t.language,problemId:t.id,sqlSchema:t.sqlSchema,stdin:ce.input||ce.stdin||""}),rt=(ce.expectedOutput||ce.expected_output||"").trim(),Re=(ve.data.output||"").trim(),_e=Re===rt&&!ve.data.error;C.push({testNumber:ee+1,input:ce.input||ce.stdin||"N/A",expected:rt,actual:Re,passed:_e,error:ve.data.error||null})}catch(ve){C.push({testNumber:ee+1,input:ce.input||ce.stdin||"N/A",expected:ce.expectedOutput||ce.expected_output||"N/A",actual:"ERROR",passed:!1,error:ve.response?.data?.error||ve.message})}}D(C),q("tests"),C.every(ee=>ee.passed)&&ze.emitTestSuccess(r.id,r.name||r.email,t.id,`All ${C.length} tests passed - ${t.title}`,t.mentorId)}catch(C){alert("Error running tests: "+C.message)}finally{re(!1)}},ds=async()=>{if(!l.trim()){alert("Please write some code before submitting");return}m(!0);const C=Math.round((Date.now()-Se)/1e3);ze.emitSubmissionStarted(r.id,r.name||r.email,t.id,t.title,t.mentorId,ke.enabled||!1);try{const G=await Q.post(`${Kt}/submissions/proctored`,{studentId:r.id,problemId:t.id,code:l,language:a,submissionType:"editor",tabSwitches:oe,copyPasteAttempts:X,cameraBlockedCount:b,phoneDetectionCount:P,faceNotDetectedCount:Be,multipleFacesDetectionCount:je,faceLookawayCount:nt,timeSpent:C,proctored:ke.enabled});ze.emitSubmissionCompleted(r.id,r.name||r.email,t.id,t.title,t.mentorId,G.data?.status||"success",G.data?.score||100),Wt(),f&&f(G.data),We(G.data)}catch(G){ze.emitSubmissionCompleted(r.id,r.name||r.email,t.id,t.title,t.mentorId,"error",0),console.error("Submission error:",{status:G.response?.status,data:G.response?.data,message:G.message});const ce=`Submission failed: ${G.response?.data?.details||G.response?.data?.error||G.message}. Please check your code and try again.`;alert(ce)}finally{m(!1)}};return e.jsxs("div",{ref:te,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#0f172a",zIndex:1e4,display:"flex",flexDirection:"column"},children:[V&&e.jsxs("div",{style:{position:"fixed",top:"1rem",left:"50%",transform:"translateX(-50%)",background:be?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #f59e0b, #d97706)",color:"white",padding:"1rem 2rem",borderRadius:"0.75rem",zIndex:10001,boxShadow:"0 10px 40px rgba(239, 68, 68, 0.5)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(he,{size:24}),e.jsx("span",{style:{fontWeight:600},children:Y})]}),e.jsxs("div",{style:{borderBottom:"1px solid #334155",background:"#1e293b",padding:"1rem 2rem",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("h2",{style:{color:"#f8fafc",fontSize:"1.25rem",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"1rem"},children:[t.title,e.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem",borderRadius:"2rem",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#ef4444",animation:"pulse 2s infinite"}}),"ðŸ”’ PROCTORED MODE"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa"},children:t.type||"Coding"}),e.jsx("span",{className:`difficulty-badge ${t.difficulty?.toLowerCase()}`,children:t.difficulty?.toUpperCase()}),oe>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["âš ï¸ ",oe," violations"]}),X>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["ðŸ“‹ ",X," copy attempts"]}),b>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["ðŸ“¹ ",b," cam blocks"]}),P>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["ðŸ“± ",P," phone detected"]}),Be>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["ðŸ‘¤ ",Be," face missing"]}),je>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["ðŸ‘¥ ",je," multi-face"]}),nt>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["ðŸ‘€ ",nt," lookaway"]})]})]})}),ke.videoAudio&&e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginRight:"1rem"},children:[e.jsx("div",{style:{padding:"0.4rem",borderRadius:"6px",background:E?"rgba(239, 68, 68, 0.2)":Ie?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",border:`1px solid ${E?"#ef4444":Ie?"#10b981":"#ef4444"}`},children:E?e.jsx(ts,{size:16,color:"#ef4444"}):Ie?e.jsx(es,{size:16,color:"#10b981"}):e.jsx(ts,{size:16,color:"#ef4444"})}),e.jsx("div",{style:{padding:"0.4rem",borderRadius:"6px",background:se?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",border:`1px solid ${se?"#10b981":"#ef4444"}`},children:se?e.jsx(js,{size:16,color:"#10b981"}):e.jsx(Ys,{size:16,color:"#ef4444"})})]}),e.jsx("button",{onClick:ft,style:{background:"#334155",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer"},children:"Exit Session"})]}),de?e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"2rem",background:"#0f172a",color:"#f8fafc"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",marginBottom:"2.5rem",paddingBottom:"2rem",borderBottom:"1px solid #334155"},children:[e.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:`conic-gradient(${de.score>=80?"#10b981":de.score>=60?"#f59e0b":"#ef4444"} ${de.score*3.6}deg, #1e293b 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},children:e.jsxs("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#0f172a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"2.5rem",fontWeight:800,color:"#f8fafc"},children:de.score}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#94a3b8",textTransform:"uppercase",letterSpacing:"1px"},children:"Score"})]})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{margin:0,color:de.score>=80?"#10b981":de.score>=60?"#f59e0b":"#ef4444",fontSize:"2rem",marginBottom:"0.75rem",fontWeight:700},children:de.score>=90?"Outstanding Performance!":de.score>=80?"Excellent Work!":de.score>=60?"Good Effort":"Needs Improvement"}),e.jsx("p",{style:{margin:0,color:"#94a3b8",fontSize:"1.1rem",lineHeight:"1.6"},children:de.feedback||(de.status==="accepted"?"Your solution passed all tests and met the requirements.":"Your solution needs some improvements.")}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"1rem"},children:[oe>0&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",background:"rgba(245, 158, 11, 0.2)",color:"#f59e0b",fontSize:"0.85rem"},children:["âš ï¸ ",oe," tab switches"]}),X>0&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontSize:"0.85rem"},children:["ðŸ“‹ ",X," copy attempts"]}),b>0&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontSize:"0.85rem"},children:["ðŸ“¹ ",b," cam blocks"]}),P>0&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontSize:"0.85rem"},children:["ðŸ“± ",P," phone detected"]})]})]})]}),de.analysis&&e.jsxs("div",{style:{marginBottom:"2.5rem"},children:[e.jsxs("h4",{style:{color:"#f8fafc",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(It,{size:20,color:"#3b82f6"})," Performance Analysis"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.25rem"},children:Object.entries(de.analysis).map(([C,G])=>{if(G==="Unknown"||G===null)return null;const ee=parseInt(G)||0,ce=C.replace(/([A-Z])/g," $1").trim();return e.jsxs("div",{style:{background:"#1e293b",padding:"1.25rem",borderRadius:"1rem",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.9rem",color:"#94a3b8",textTransform:"capitalize",fontWeight:600},children:ce}),e.jsxs("span",{style:{fontWeight:800,color:ee>=80?"#10b981":ee>=60?"#f59e0b":"#ef4444",fontSize:"1.1rem"},children:[ee,"%"]})]}),e.jsx("div",{style:{height:"8px",background:"rgba(255,255,255,0.05)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${ee}%`,height:"100%",background:ee>=80?"#10b981":ee>=60?"#f59e0b":"#ef4444",borderRadius:"4px",transition:"width 1s ease-out"}})})]},C)})})]}),de.aiExplanation&&e.jsxs("div",{style:{marginBottom:"2.5rem"},children:[e.jsxs("h4",{style:{color:"#f8fafc",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Nt,{size:20,color:"#8b5cf6"})," Detailed AI Analysis"]}),e.jsx("div",{style:{background:"#1e293b",padding:"1.75rem",borderRadius:"1rem",border:"1px solid #334155",color:"#cbd5e1",fontSize:"1rem",lineHeight:"1.8",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:de.aiExplanation})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:e.jsx("button",{onClick:ft,style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"1rem 2rem",borderRadius:"0.75rem",cursor:"pointer",fontWeight:600,fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:"Close Session"})})]}):e.jsxs("div",{style:{padding:0,display:"flex",flexDirection:"row",flex:1,minHeight:0,overflow:"hidden",background:"#0f172a"},children:[e.jsxs("div",{style:{width:"400px",borderRight:"1px solid #334155",padding:"2rem",overflowY:"auto",background:"#0f172a",display:"flex",flexDirection:"column"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"1.5rem",color:"#f8fafc"},children:"Problem Description"}),e.jsxs("div",{style:{color:"#cbd5e1",fontSize:"0.95rem",lineHeight:"1.7"},children:[t.description,t.type==="SQL"||t.language==="SQL"?e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[t.sqlSchema&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{color:"#06b6d4"},children:"ðŸ—„ï¸"}),e.jsx("strong",{style:{color:"#e2e8f0"},children:"Database Schema:"})]}),e.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"1rem",borderRadius:"6px",marginBottom:"1rem",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.sqlSchema})]}),t.expectedQueryResult&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{color:"#10b981"},children:"ðŸ“Š"}),e.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Query Result:"})]}),e.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"1rem",borderRadius:"6px",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.expectedQueryResult})]}),!t.sqlSchema&&!t.expectedQueryResult&&e.jsx("p",{style:{color:"#94a3b8",fontStyle:"italic",margin:0},children:"Write a SQL query to solve this problem. Your query will be executed against the database."})]}):e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[e.jsx("div",{style:{marginBottom:"0.5rem"},children:e.jsx("strong",{style:{color:"#e2e8f0"},children:"Sample Input:"})}),e.jsx("code",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block",marginBottom:"1rem"},children:t.sampleInput||"N/A"}),e.jsx("div",{style:{marginBottom:"0.5rem"},children:e.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Output:"})}),e.jsx("code",{style:{color:"#4ade80",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block"},children:t.expectedOutput||"N/A"})]})]}),e.jsxs("div",{style:{marginTop:"2rem",background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"0.75rem",padding:"1.25rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#fbbf24",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Rt,{size:16})," Need Help?"]}),e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.8rem",margin:"0 0 1rem",lineHeight:1.6},children:"Stuck on this problem? Get AI-powered hints to guide you without revealing the full solution."}),e.jsxs("button",{onClick:ls,disabled:u,style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",border:"none",color:"#1e293b",padding:"0.6rem 1.2rem",borderRadius:"6px",cursor:u?"not-allowed":"pointer",fontWeight:600,fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center"},children:[e.jsx(Rt,{size:16})," ",u?"Getting Hints...":"Get AI Hints"]}),T&&e.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"rgba(34, 197, 94, 0.1)",borderRadius:"8px",border:"1px solid rgba(34, 197, 94, 0.2)",fontSize:"0.85rem",color:"#4ade80"},children:["ðŸ’¡ ",T]})]}),e.jsxs("div",{style:{marginTop:"2rem",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"0.75rem",padding:"1.25rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#ef4444",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(he,{size:16})," Proctoring Rules"]}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"#94a3b8",fontSize:"0.8rem",lineHeight:1.8},children:[e.jsx("li",{children:"Do not switch tabs or windows"}),e.jsx("li",{children:"Do not exit fullscreen mode"}),e.jsx("li",{children:"All violations are recorded"}),e.jsx("li",{children:"3+ violations may result in disqualification"})]})]}),ke.videoAudio&&e.jsxs("div",{style:{marginTop:"2rem",padding:"0.75rem",background:"rgba(0,0,0,0.3)",borderRadius:"0.75rem",border:"1px solid #334155",position:"relative"},children:[e.jsx("video",{ref:Le,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"8px",background:"#000",border:E?"3px solid #ef4444":"2px solid #10b981",opacity:E?.5:1}}),E&&e.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(239, 68, 68, 0.9)",padding:"0.5rem 1rem",borderRadius:"8px",color:"white",fontWeight:600,fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ts,{size:14})," CAMERA BLOCKED"]}),e.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.7rem",color:E?"#ef4444":"#10b981",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[!E&&e.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981",animation:"pulse 1s infinite"}}),E?"âš ï¸ Uncover your camera!":ye?"ðŸ¤– AI Monitoring Active":"â³ Loading AI..."]})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"#1e293b",minHeight:0},children:[e.jsxs("div",{style:{padding:"0.75rem 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #334155",background:"#1e293b"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[e.jsx("label",{style:{color:"#94a3b8",fontSize:"0.85rem"},children:"Language:"}),e.jsx("select",{value:a,onChange:C=>{const G=C.target.value;x(G),h(Xt[G]?.defaultCode||"")},disabled:t.type==="SQL"||t.language==="SQL",style:{background:"#0f172a",color:"#f8fafc",border:"1px solid #334155",borderRadius:"6px",padding:"0.4rem 0.75rem",fontSize:"0.85rem",cursor:t.type==="SQL"||t.language==="SQL"?"not-allowed":"pointer",opacity:t.type==="SQL"||t.language==="SQL"?.7:1},children:Object.keys(Xt).map(C=>e.jsx("option",{value:C,children:C},C))})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[e.jsxs("button",{onClick:os,disabled:p||i,style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[e.jsx(Ze,{size:16})," ",p?"Running...":"Run Code"]}),e.jsxs("button",{onClick:ds,disabled:p||i,style:{background:"linear-gradient(135deg, #10b981, #059669)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:i?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[e.jsx(Je,{size:16})," ",i?"Submitting...":"Submit"]})]})]}),e.jsx("div",{style:{flex:1,position:"relative",minHeight:0},children:e.jsx(Qt,{height:"100%",language:Xt[a]?.monacoLang||"python",theme:"vs-dark",value:l,onChange:C=>h(C||""),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,automaticLayout:!0,padding:{top:20}}})}),e.jsxs("div",{style:{flex:"0 0 280px",background:"#020617",borderTop:"1px solid #334155",display:"flex",flexDirection:"column",minHeight:0},children:[e.jsx("div",{style:{display:"flex",borderBottom:"1px solid #334155",background:"#0f172a"},children:["input","output","tests"].map(C=>e.jsxs("button",{onClick:()=>q(C),style:{padding:"0.75rem 1.25rem",background:R===C?"#1e293b":"transparent",border:"none",borderBottom:R===C?`2px solid ${C==="input"?"#f59e0b":C==="output"?"#3b82f6":"#06b6d4"}`:"2px solid transparent",color:R===C?C==="input"?"#fbbf24":C==="output"?"#60a5fa":"#06b6d4":"#64748b",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.5rem"},children:[C==="input"&&e.jsx(e.Fragment,{children:"ðŸ“ Custom Input"}),C==="output"&&e.jsxs(e.Fragment,{children:["âš™ï¸ Output ",S&&e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:S.includes("Error")?"#ef4444":"#10b981"}})]}),C==="tests"&&e.jsx(e.Fragment,{children:"ðŸ§ª Test Cases"})]},C))}),R==="input"&&e.jsxs("div",{style:{padding:"0.75rem",flex:1},children:[e.jsx("textarea",{value:n,onChange:C=>z(C.target.value),placeholder:`Enter your input here (stdin)...
Example:
5
1 2 3 4 5`,style:{width:"100%",height:"calc(100% - 30px)",background:"#0f172a",color:"#e2e8f0",border:"1px solid #334155",borderRadius:"8px",padding:"0.75rem",fontFamily:"monospace",fontSize:"0.85rem",resize:"none",outline:"none"}}),e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.7rem",color:"#64748b"},children:'ðŸ’¡ This input will be passed as stdin when you click "Run Code"'})]}),R==="output"&&e.jsx("div",{style:{padding:"0.75rem",flex:1,overflowY:"auto"},children:e.jsx("div",{style:{fontFamily:"monospace",color:S.includes("Error")?"#ef4444":"#e2e8f0",fontSize:"0.9rem",whiteSpace:"pre-wrap"},children:S||"ðŸ‘‰ Run your code to see output here"})}),R==="tests"&&e.jsx("div",{style:{padding:"0.75rem",flex:1,overflowY:"auto",display:"flex",flexDirection:"column"},children:k.length===0?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Ut,disabled:w||p,style:{background:"linear-gradient(135deg, #06b6d4, #0891b2)",border:"none",color:"white",padding:"0.6rem 1.2rem",borderRadius:"6px",marginBottom:"1rem",cursor:w?"not-allowed":"pointer",fontWeight:600,fontSize:"0.9rem"},children:w?"â³ Running All Tests...":"ðŸ§ª Run All Tests"}),e.jsx("div",{style:{color:"#cbd5e1",fontSize:"0.85rem"},children:t.type==="SQL"||t.language==="SQL"?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("strong",{style:{color:"#06b6d4"},children:"ðŸ“Š Database Schema:"}),e.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.75rem",borderRadius:"6px",marginTop:"0.5rem",fontSize:"0.75rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.sqlSchema||"Schema not provided"})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#10b981"},children:"ðŸ“ˆ Expected Result:"}),e.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"0.75rem",borderRadius:"6px",marginTop:"0.5rem",fontSize:"0.75rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.expectedQueryResult||"Expected result not provided"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("strong",{style:{color:"#f59e0b"},children:"ðŸ“¥ Sample Input:"}),e.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.75rem",borderRadius:"6px",marginTop:"0.5rem",fontSize:"0.75rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.sampleInput||"N/A"})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#10b981"},children:"ðŸ“¤ Expected Output:"}),e.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"0.75rem",borderRadius:"6px",marginTop:"0.5rem",fontSize:"0.75rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.expectedOutput||"N/A"})]})]})})]}):e.jsxs("div",{style:{color:"#cbd5e1",fontSize:"0.85rem"},children:[e.jsx("button",{onClick:Ut,disabled:w||p,style:{background:"linear-gradient(135deg, #06b6d4, #0891b2)",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"6px",marginBottom:"1rem",cursor:w?"not-allowed":"pointer",fontWeight:600,fontSize:"0.85rem"},children:w?"â³ Running...":"ðŸ”„ Run Tests Again"}),e.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"#1e293b",borderRadius:"6px"},children:[e.jsx("strong",{style:{color:"#06b6d4"},children:"Test Results: "}),e.jsxs("span",{style:{color:k.every(C=>C.passed)?"#10b981":"#ef4444"},children:[k.filter(C=>C.passed).length,"/",k.length," passed"]})]}),k.map((C,G)=>e.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:C.passed?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",border:`1px solid ${C.passed?"#10b981":"#ef4444"}`,borderRadius:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1.2rem"},children:C.passed?"âœ…":"âŒ"}),e.jsxs("strong",{style:{color:C.passed?"#10b981":"#ef4444"},children:["Test ",C.testNumber]})]}),e.jsxs("div",{style:{fontSize:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx("strong",{style:{color:"#94a3b8"},children:"Input:"}),e.jsx("code",{style:{color:"#cbd5e1",display:"block",background:"#0f172a",padding:"0.5rem",borderRadius:"4px",marginTop:"0.25rem",whiteSpace:"pre-wrap"},children:C.input})]}),e.jsxs("div",{style:{fontSize:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx("strong",{style:{color:"#10b981"},children:"Expected:"}),e.jsx("code",{style:{color:"#4ade80",display:"block",background:"#0f172a",padding:"0.5rem",borderRadius:"4px",marginTop:"0.25rem",whiteSpace:"pre-wrap"},children:C.expected})]}),e.jsxs("div",{style:{fontSize:"0.75rem"},children:[e.jsx("strong",{style:{color:C.passed?"#10b981":"#ef4444"},children:"Actual:"}),e.jsx("code",{style:{color:C.passed?"#4ade80":"#ef4444",display:"block",background:"#0f172a",padding:"0.5rem",borderRadius:"4px",marginTop:"0.25rem",whiteSpace:"pre-wrap"},children:C.error?`ERROR: ${C.error}`:C.actual})]})]},G))]})})]})]})]}),e.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.5; transform: scale(1.2); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}const hs="http://localhost:3000";function pi({attemptId:t,attemptData:r,onComplete:c,onFailed:f}){const[a,x]=s.useState([]),[l,h]=s.useState({}),[i,m]=s.useState(0),[p,B]=s.useState(0),[S,o]=s.useState(null),[T,d]=s.useState(!0),[u,y]=s.useState(!1),[A,g]=s.useState(null),[n,z]=s.useState(""),[R,q]=s.useState(0),[U,K]=s.useState(!1),k=s.useRef(null);s.useEffect(()=>(w(),()=>{k.current&&clearInterval(k.current)}),[]),s.useEffect(()=>{const V=()=>{document.hidden&&q(I=>{const Y=I+1;return D("tab_switch",`Tab switch detected (count: ${Y})`,Y>3?"high":"medium"),Y})};return document.addEventListener("visibilitychange",V),()=>document.removeEventListener("visibilitychange",V)},[]);const D=async(V,I,Y="low")=>{try{await Q.post(`${hs}/api/skill-tests/proctoring/log`,{attemptId:t,testStage:"mcq",eventType:V,details:I,severity:Y})}catch{}},w=async()=>{try{const{data:V}=await Q.post(`${hs}/api/skill-tests/mcq/start/${t}`);x(V.questions||[]),h(V.existing_answers||{});let I;V.end_time&&(I=new Date(V.end_time)),(!I||isNaN(I.getTime()))&&(I=new Date(Date.now()+1800*1e3)),o(I),k.current=setInterval(()=>{const O=Math.max(0,Math.floor((I-new Date)/1e3));B(O),O<=0&&(clearInterval(k.current),oe(!0))},1e3),d(!1)}catch(V){z(V.response?.data?.error||V.message),d(!1)}},re=(V,I)=>{h(Y=>({...Y,[String(V)]:I}))},te=()=>{if(a.length-Object.keys(l).length>0){K(!0);return}oe(!1)},oe=async(V=!1)=>{if(!u){K(!1),y(!0),k.current&&clearInterval(k.current);try{const{data:I}=await Q.post(`${hs}/api/skill-tests/mcq/submit`,{attemptId:t,answers:l});g(I),I.passed?setTimeout(()=>c(I),2e3):setTimeout(()=>f(),3e3)}catch(I){z(I.response?.data?.error||I.message),y(!1)}}},fe=V=>{const I=Math.floor(V/60),Y=V%60;return`${I.toString().padStart(2,"0")}:${Y.toString().padStart(2,"0")}`};if(T)return e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Loading MCQ questions..."});if(A)return e.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:A.passed?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)"},children:A.passed?e.jsx(ge,{size:40,color:"#22c55e"}):e.jsx(me,{size:40,color:"#ef4444"})}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:700,margin:"0 0 8px",color:"#f1f5f9"},children:A.passed?"MCQ Passed!":"MCQ Failed"}),e.jsxs("p",{style:{fontSize:"18px",color:"#94a3b8"},children:["Score: ",A.correct,"/",A.total," (",Math.round(A.score),"%)"]}),e.jsx("p",{style:{fontSize:"14px",color:A.passed?"#22c55e":"#ef4444",marginTop:"12px"},children:A.passed?"Proceeding to Coding section...":"Assessment ended. Generating report..."})]});const X=a[i],Z=Object.keys(l).length;return e.jsxs("div",{style:{paddingBottom:"80px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",background:"#1e293b",borderRadius:"10px",marginBottom:"20px",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontWeight:700,fontSize:"15px",color:"#f1f5f9"},children:"MCQ Test"}),e.jsxs("span",{style:{fontSize:"13px",color:"#94a3b8"},children:[Z,"/",a.length," answered"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",background:p<60?"rgba(239,68,68,0.15)":p<300?"rgba(245,158,11,0.15)":"rgba(16,185,129,0.15)",borderRadius:"20px",fontWeight:700,fontSize:"16px",color:p<60?"#f87171":p<300?"#fbbf24":"#34d399"},children:[e.jsx(He,{size:16})," ",fe(p)]}),e.jsxs("button",{onClick:te,disabled:u,style:{padding:"8px 20px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",opacity:u?.6:1},children:[e.jsx(Je,{size:14})," Submit All"]})]}),R>0&&e.jsxs("div",{style:{background:"rgba(245,158,11,0.1)",border:"1px solid rgba(245,158,11,0.3)",borderRadius:"8px",padding:"8px 16px",marginBottom:"16px",fontSize:"12px",color:"#fbbf24",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(gt,{size:14})," Warning: ",R," tab switch(es) detected. This is being monitored."]}),n&&e.jsx("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",color:"#fca5a5",fontSize:"13px"},children:n}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"20px"},children:a.map((V,I)=>{const Y=l[String(V.id)]!==void 0,O=I===i;return e.jsx("button",{onClick:()=>m(I),style:{width:"34px",height:"34px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"12px",background:O?"#8b5cf6":Y?"#22c55e":"#334155",color:O||Y?"white":"#94a3b8"},children:I+1},I)})}),X&&e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"12px",padding:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxs("span",{style:{fontSize:"13px",color:"#8b5cf6",fontWeight:600},children:["Question ",i+1," of ",a.length]}),X.difficulty&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:600,background:X.difficulty==="hard"?"#fee2e2":X.difficulty==="medium"?"#fef3c7":"#dcfce7",color:X.difficulty==="hard"?"#dc2626":X.difficulty==="medium"?"#d97706":"#16a34a"},children:X.difficulty})]}),e.jsx("p",{style:{fontSize:"16px",fontWeight:600,marginBottom:"20px",lineHeight:1.5,color:"#f1f5f9"},children:X.question}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:(X.options||[]).map((V,I)=>{const Y=String.fromCharCode(65+I),O=l[String(X.id)]===Y;return e.jsxs("button",{onClick:()=>re(X.id,Y),style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",borderRadius:"10px",cursor:"pointer",background:O?"rgba(139,92,246,0.15)":"#0f172a",border:O?"2px solid #8b5cf6":"1px solid #475569",textAlign:"left",fontSize:"14px",transition:"all 0.15s",color:"#e2e8f0"},children:[e.jsx("span",{style:{width:"28px",height:"28px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"13px",fontWeight:700,background:O?"#8b5cf6":"#1e293b",color:O?"white":"#94a3b8",flexShrink:0},children:Y}),e.jsx("span",{children:V})]},I)})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"24px"},children:[e.jsxs("button",{onClick:()=>m(Math.max(0,i-1)),disabled:i===0,style:{padding:"8px 16px",background:"#334155",border:"1px solid #475569",borderRadius:"8px",cursor:"pointer",fontSize:"13px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"6px",opacity:i===0?.4:1},children:[e.jsx(ss,{size:14})," Previous"]}),e.jsxs("button",{onClick:()=>m(Math.min(a.length-1,i+1)),disabled:i===a.length-1,style:{padding:"8px 16px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",opacity:i===a.length-1?.4:1},children:["Next ",e.jsx(zt,{size:14})]})]})]}),U&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#1e293b",borderRadius:"16px",padding:"28px",maxWidth:"400px",width:"90%",border:"1px solid #334155",textAlign:"center"},children:[e.jsx(he,{size:36,color:"#fbbf24",style:{marginBottom:"12px"}}),e.jsx("h3",{style:{margin:"0 0 8px",color:"#f1f5f9",fontSize:"18px"},children:"Unanswered Questions"}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"14px",margin:"0 0 20px"},children:["You have ",a.length-Object.keys(l).length," unanswered question(s). Submit anyway?"]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>K(!1),style:{flex:1,padding:"10px",background:"#334155",color:"#94a3b8",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Cancel"}),e.jsx("button",{onClick:()=>oe(!1),style:{flex:1,padding:"10px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Submit Anyway"})]})]})})]})}const Ft="http://localhost:3000",_s=[{value:"python",label:"Python",monacoId:"python"},{value:"javascript",label:"JavaScript",monacoId:"javascript"},{value:"java",label:"Java",monacoId:"java"},{value:"c",label:"C",monacoId:"c"},{value:"cpp",label:"C++",monacoId:"cpp"}];function xi({attemptId:t,attemptData:r,onComplete:c,onFailed:f}){const[a,x]=s.useState([]),[l,h]=s.useState(0),[i,m]=s.useState({}),[p,B]=s.useState({}),[S,o]=s.useState(""),[T,d]=s.useState(""),[u,y]=s.useState(!1),[A,g]=s.useState(null),[n,z]=s.useState(!1),[R,q]=s.useState(!1),[U,K]=s.useState(!1),[k,D]=s.useState(!1),[w,re]=s.useState({}),[te,oe]=s.useState(null),[fe,X]=s.useState(!0),[Z,V]=s.useState(""),[I,Y]=s.useState(null),O=s.useRef(null);s.useEffect(()=>{if(I!==null){if(I<=0){be();return}return O.current=setInterval(()=>{Y(b=>b<=1?(clearInterval(O.current),be(),0):b-1)},1e3),()=>clearInterval(O.current)}},[I]);const be=()=>{alert("Time is up! Submitting your test automatically."),se()},Ce=b=>{const N=Math.floor(b/60),ne=b%60;return`${N}:${ne<10?"0":""}${ne}`};s.useEffect(()=>{Se()},[]);const Se=async()=>{try{const{data:b}=await Q.post(`${Ft}/api/skill-tests/coding/start/${t}`);x(b.problems||[]),re(b.existing_submissions||{});const N={},ne={};(b.problems||[]).forEach(j=>{const P=(b.existing_submissions||{})[String(j.id)];if(P)N[j.id]=P.code,ne[j.id]=P.language||"python";else{const H="python";let ye="";j.starter_code&&typeof j.starter_code=="object"?ye=j.starter_code[H]||de(j,H):typeof j.starter_code=="string"?ye=j.starter_code:ye=de(j,H),N[j.id]=ye,ne[j.id]=H}}),m(N),B(ne),b.duration_minutes&&Y(b.duration_minutes*60),X(!1)}catch(b){V(b.response?.data?.error||b.message),X(!1)}},de=(b,N)=>{const ne=b.title||"Solution";return N==="python"?`import sys

# ${ne}
def solution():
    # Write your code here
    pass

# !!! DO NOT EDIT BELOW THIS LINE !!!
if __name__ == '__main__':
    # Default driver code (fallback)
    lines = sys.stdin.read().split('\\n')
    # ... print(solution(...))
`:N==="javascript"?`const fs = require('fs');

// ${ne}
function solution() {
    // Write your code here
}

// !!! DO NOT EDIT BELOW THIS LINE !!!
try {
    const input = fs.readFileSync(0, 'utf-8');
    // ... console.log(solution(...))
} catch (e) {}
`:N==="java"?`import java.util.*;

public class Main {
    public static void solution() {
        // Write your code here
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        // ...
    }
}
`:N==="c"?`#include <stdio.h>
#include <stdlib.h>

void solution() {
    // Write your code here
}

int main() {
    // Driver code
    return 0;
}
`:N==="cpp"?`#include <iostream>
#include <vector>
#include <string>
using namespace std;

void solution() {
    // Write your code here
}

int main() {
    // Driver code
    return 0;
}
`:`// ${ne}
`},We=(b,N=50)=>b?b.length>N?b.substring(0,N)+"...":b:"",Ie=async()=>{const b=a[l];if(b){z(!0),o(""),g(null);try{const{data:N}=await Q.post(`${Ft}/api/skill-tests/coding/run`,{code:i[b.id]||"",language:p[b.id]||"python",input_data:T||" "});o(N.success?N.output||"No output":`Error:
${N.error||N.output||"Unknown error"}`)}catch(N){o("Error: "+(N.response?.data?.error||N.message))}finally{z(!1)}}},Ne=async()=>{const b=a[l];if(b){q(!0),g(null);try{const{data:N}=await Q.post(`${Ft}/api/skill-tests/coding/submit`,{attemptId:t,problemId:b.id,code:i[b.id]||"",language:p[b.id]||"python"});g(N.test_results||[]),re(ne=>({...ne,[String(b.id)]:{passed:N.all_passed,test_results:N.test_results}}))}catch(N){V(N.response?.data?.error||N.message)}finally{q(!1)}}},se=async()=>{D(!1),K(!0);try{const{data:b}=await Q.post(`${Ft}/api/skill-tests/coding/finish/${t}`);oe(b),b.passed?setTimeout(()=>c(b),2e3):setTimeout(()=>f(),3e3)}catch(b){V(b.response?.data?.error||b.message),K(!1)}},[F,ie]=s.useState(!1),le=async()=>{ie(!0),V("");try{await Q.post(`${Ft}/api/skill-tests/coding/regenerate/${t}`),await Se()}catch(b){V(b.response?.data?.error||"Failed to regenerate. Please try again."),ie(!1)}};if(fe)return e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:[e.jsx(xt,{size:24,style:{animation:"spin 1s linear infinite",marginBottom:"8px"}})," Loading coding problems..."]});if(!fe&&a.length===0&&!te)return e.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[e.jsx(fs,{size:48,color:"#64748b",style:{marginBottom:"16px"}}),e.jsx("h3",{style:{color:"#f1f5f9",margin:"0 0 8px"},children:"No Coding Problems Available"}),e.jsx("p",{style:{color:"#94a3b8",fontSize:"14px",marginBottom:"20px"},children:"Problems couldn't be generated. Click below to regenerate them."}),Z&&e.jsx("p",{style:{color:"#fca5a5",fontSize:"13px",marginBottom:"16px"},children:Z}),e.jsx("button",{onClick:le,disabled:F,style:{padding:"10px 24px",background:F?"#6d28d9":"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:F?"not-allowed":"pointer",fontWeight:600,fontSize:"14px",display:"inline-flex",alignItems:"center",gap:"8px",opacity:F?.7:1},children:F?e.jsxs(e.Fragment,{children:[e.jsx(xt,{size:16,style:{animation:"spin 1s linear infinite"}})," Generating Problems..."]}):"ðŸ”„ Regenerate Problems"}),e.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]});if(te)return e.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:te.passed?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)"},children:te.passed?e.jsx(ge,{size:40,color:"#22c55e"}):e.jsx(me,{size:40,color:"#ef4444"})}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:700,margin:"0 0 8px",color:"#f1f5f9"},children:te.passed?"Coding Passed!":"Coding Failed"}),e.jsxs("p",{style:{fontSize:"18px",color:"#94a3b8"},children:["Solved: ",te.solved,"/",te.total," (",Math.round(te.score),"%)"]}),e.jsx("p",{style:{fontSize:"14px",color:te.passed?"#22c55e":"#ef4444",marginTop:"12px"},children:te.passed?"Proceeding to SQL section...":"Assessment ended. Generating report..."})]});const E=a[l],W=Object.keys(w).length;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",background:"#1e293b",borderRadius:"10px",marginBottom:"16px",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(fs,{size:20,color:"#8b5cf6"}),e.jsx("span",{style:{fontWeight:700,fontSize:"15px",color:"#f1f5f9"},children:"Coding Test"}),e.jsxs("span",{style:{fontSize:"13px",color:"#94a3b8"},children:[W,"/",a.length," solved"]}),I!==null&&e.jsxs("span",{style:{padding:"4px 10px",borderRadius:"12px",fontSize:"13px",fontWeight:600,background:I<300?"rgba(239,68,68,0.2)":"rgba(59,130,246,0.15)",color:I<300?"#fca5a5":"#60a5fa",border:"1px solid "+(I<300?"rgba(239,68,68,0.4)":"rgba(59,130,246,0.3)")},children:["Time Left: ",Ce(I)]})]}),e.jsx("button",{onClick:()=>D(!0),disabled:U,style:{padding:"8px 20px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"13px",opacity:U?.6:1},children:U?"Submitting...":"Finish Coding â†’"})]}),Z&&e.jsx("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",padding:"10px",marginBottom:"12px",color:"#fca5a5",fontSize:"13px"},children:Z}),e.jsx("div",{style:{display:"flex",gap:"6px",marginBottom:"12px"},children:a.map((b,N)=>{const ne=w[String(b.id)],j=ne?.passed,P=ne&&!ne.passed;let H="#334155";return N===l?H="#8b5cf6":j?H="#22c55e":P&&(H="#ef4444"),e.jsxs("button",{onClick:()=>{h(N),o(""),w[String(b.id)]?g(w[String(b.id)].test_results||null):g(null)},style:{padding:"6px 14px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"12px",background:H,color:"white"},children:["P",N+1," ",j?"âœ“":P?"âœ—":""]},N)})}),E&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px",padding:"16px",overflowY:"auto",maxHeight:"600px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:700,color:"#f1f5f9"},children:E.title}),E.difficulty&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:600,background:E.difficulty==="hard"?"rgba(239,68,68,0.15)":E.difficulty==="medium"?"rgba(245,158,11,0.15)":"rgba(34,197,94,0.15)",color:E.difficulty==="hard"?"#f87171":E.difficulty==="medium"?"#fbbf24":"#34d399"},children:E.difficulty})]}),e.jsx("p",{style:{fontSize:"14px",lineHeight:1.6,color:"#cbd5e1"},children:E.description}),E.examples&&E.examples.length>0&&e.jsxs("div",{style:{marginTop:"16px",background:"#0f172a",padding:"12px",borderRadius:"8px",border:"1px solid #334155"},children:[e.jsx("h4",{style:{fontSize:"13px",fontWeight:700,marginBottom:"10px",color:"#10b981",display:"flex",alignItems:"center",gap:"6px"},children:"ðŸ“‹ Sample Input/Output"}),E.examples.map((b,N)=>e.jsxs("div",{style:{background:"#1e293b",padding:"10px",borderRadius:"6px",marginBottom:"8px",fontSize:"12px",color:"#cbd5e1",fontFamily:"monospace"},children:[e.jsxs("div",{style:{marginBottom:"6px"},children:[e.jsx("strong",{style:{color:"#10b981"},children:"Input:"}),e.jsx("pre",{style:{margin:"4px 0 0",background:"#0f172a",padding:"6px",borderRadius:"4px",whiteSpace:"pre-wrap"},children:b.input})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#10b981"},children:"Expected Output:"}),e.jsx("pre",{style:{margin:"4px 0 0",background:"#0f172a",padding:"6px",borderRadius:"4px",whiteSpace:"pre-wrap"},children:b.output})]}),b.explanation&&e.jsx("div",{style:{color:"#94a3b8",marginTop:"6px",fontSize:"11px"},children:e.jsxs("em",{children:["ðŸ’¡ ",b.explanation]})})]},N))]}),E.constraints&&e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx("h4",{style:{fontSize:"13px",fontWeight:600,marginBottom:"6px",color:"#94a3b8"},children:"Constraints:"}),e.jsx("p",{style:{fontSize:"13px",color:"#64748b"},children:E.constraints})]}),A&&e.jsxs("div",{style:{marginTop:"16px",background:"#0f172a",border:"2px solid #334155",borderRadius:"8px",padding:"12px"},children:[e.jsxs("h4",{style:{fontSize:"13px",fontWeight:700,marginBottom:"10px",color:A.every(b=>b.passed)?"#10b981":"#ef4444",display:"flex",alignItems:"center",gap:"6px"},children:[A.every(b=>b.passed)?e.jsx(ge,{size:14}):e.jsx(me,{size:14}),"Test Results"]}),e.jsx("div",{style:{display:"grid",gap:"8px"},children:A.map((b,N)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px",background:b.passed?"rgba(34,197,94,0.1)":"rgba(239,68,68,0.1)",border:`1px solid ${b.passed?"#22c55e":"#ef4444"}`,borderRadius:"6px",fontSize:"12px",color:"#cbd5e1"},children:[b.passed?e.jsx(ge,{size:16,color:"#22c55e"}):e.jsx(me,{size:16,color:"#ef4444"}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsxs("span",{children:[e.jsxs("strong",{children:["Test Case ",b.name||N+1,":"]})," ",b.passed?"âœ“ Passed":"âœ— Failed"]}),!b.passed&&b.expected&&b.actual&&e.jsxs("div",{style:{fontSize:"11px",background:"rgba(0,0,0,0.3)",padding:"6px",borderRadius:"4px",marginTop:"4px"},children:[e.jsxs("div",{style:{color:"#ef4444"},children:["Exp: ",We(b.expected)]}),e.jsxs("div",{style:{color:"#fca5a5"},children:["Act: ",We(b.actual)]})]}),!b.passed&&b.output&&!b.expected&&e.jsx("div",{style:{fontSize:"11px",fontFamily:"monospace",color:"#fca5a5"},children:We(b.output)})]})]},N))})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("select",{value:p[E.id]||"python",onChange:b=>{const N=b.target.value;B(j=>({...j,[E.id]:N})),i[E.id];let ne="";E.starter_code&&typeof E.starter_code=="object"&&E.starter_code[N]?ne=E.starter_code[N]:ne=de(E,N),m(j=>({...j,[E.id]:ne}))},style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #475569",fontSize:"13px",background:"#0f172a",color:"#f1f5f9",fontWeight:600},children:_s.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))}),e.jsxs("button",{onClick:Ie,disabled:n,style:{padding:"8px 16px",background:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",opacity:n?.6:1,transition:"all 0.2s"},children:[n?e.jsx(xt,{size:16,className:"animate-spin"}):e.jsx(Ze,{size:16}),e.jsx("strong",{children:"â–¶ Check Your Code"})]}),e.jsxs("button",{onClick:Ne,disabled:R,style:{padding:"8px 16px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",opacity:R?.6:1,transition:"all 0.2s"},children:[R?e.jsx(xt,{size:16}):e.jsx(Je,{size:16}),e.jsx("strong",{children:"Submit Solution"})]})]}),e.jsx("div",{style:{border:"1px solid #334155",borderRadius:"8px",overflow:"hidden",flex:1,minHeight:"400px"},children:e.jsx(Qt,{height:"400px",language:_s.find(b=>b.value===(p[E.id]||"python"))?.monacoId||"python",value:i[E.id]||"",onChange:b=>m(N=>({...N,[E.id]:b||""})),theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,padding:{top:10}}})}),e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"8px",overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>y(!u),style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",color:"#94a3b8",fontSize:"12px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:u?"1px solid #334155":"none"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:["âŒ¨ï¸ Custom Input ",T?"(has input)":""]}),e.jsx("span",{children:u?"â–²":"â–¼"})]}),u&&e.jsx("textarea",{value:T,onChange:b=>d(b.target.value),placeholder:"Enter custom input here (stdin)...",style:{width:"100%",minHeight:"70px",padding:"8px 12px",background:"#0f172a",color:"#f1f5f9",border:"none",fontSize:"13px",fontFamily:"monospace",resize:"vertical",boxSizing:"border-box",outline:"none"}})]}),e.jsxs("div",{style:{background:"#0f172a",color:"#d4d4d4",padding:"12px",borderRadius:"8px",fontSize:"13px",fontFamily:"monospace",minHeight:"100px",maxHeight:"180px",overflowY:"auto",border:"2px solid #334155"},children:[e.jsxs("div",{style:{fontSize:"11px",color:"#64748b",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:S?"#10b981":"#475569"}}),"OUTPUT TERMINAL"]}),e.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordWrap:"break-word",color:S?"#10b981":"#64748b"},children:S||"(Run your code to see output here...)"})]})]})]}),k&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#1e293b",borderRadius:"16px",padding:"28px",maxWidth:"400px",width:"90%",border:"1px solid #334155",textAlign:"center"},children:[e.jsx(Je,{size:36,color:"#8b5cf6",style:{marginBottom:"12px"}}),e.jsx("h3",{style:{margin:"0 0 8px",color:"#f1f5f9",fontSize:"18px"},children:"Submit Coding?"}),e.jsx("p",{style:{color:"#94a3b8",fontSize:"14px",margin:"0 0 20px"},children:"Submit your coding solutions? This will move to the SQL section."}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>D(!1),style:{flex:1,padding:"10px",background:"#334155",color:"#94a3b8",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Cancel"}),e.jsx("button",{onClick:se,style:{flex:1,padding:"10px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Submit"})]})]})})]})}const Jt="http://localhost:3000";function gi({attemptId:t,attemptData:r,onComplete:c,onFailed:f}){const[a,x]=s.useState([]),[l,h]=s.useState(0),[i,m]=s.useState({}),[p,B]=s.useState(null),[S,o]=s.useState(null),[T,d]=s.useState({}),[u,y]=s.useState(!1),[A,g]=s.useState(!1),[n,z]=s.useState(!1),[R,q]=s.useState(null),[U,K]=s.useState(!0),[k,D]=s.useState(null),[w,re]=s.useState(""),[te,oe]=s.useState(!1),[fe,X]=s.useState(!1),[Z,V]=s.useState(null),[I,Y]=s.useState({employees:"employees",departments:"departments",projects:"projects",orders:"orders"}),O=s.useRef(null);s.useEffect(()=>{if(Z!==null){if(Z<=0){be();return}return O.current=setInterval(()=>{V(E=>E<=1?(clearInterval(O.current),be(),0):E-1)},1e3),()=>clearInterval(O.current)}},[Z]);const be=()=>{alert("Time is up! Submitting your test automatically."),Ie()},Ce=E=>{const W=Math.floor(E/60),b=E%60;return`${W}:${b<10?"0":""}${b}`};s.useEffect(()=>{Se()},[]);const Se=async()=>{try{const{data:E}=await Q.post(`${Jt}/api/skill-tests/sql/start/${t}`);x(E.problems||[]),d(E.existing_submissions||{}),E.tables&&Y(E.tables);const W={};(E.problems||[]).forEach(b=>{const N=(E.existing_submissions||{})[String(b.id)];W[b.id]=N?N.query:""}),m(W),E.duration_minutes&&V(E.duration_minutes*60),K(!1)}catch(E){re(E.response?.data?.error||E.message),K(!1)}},de=async()=>{const E=a[l];if(E){y(!0),B(null),o(null);try{const{data:W}=await Q.post(`${Jt}/api/skill-tests/sql/run`,{query:i[E.id]||"",attemptId:t});B(W)}catch(W){B({success:!1,error:W.message})}finally{y(!1)}}},We=async()=>{const E=a[l];if(E){g(!0),o(null);try{const{data:W}=await Q.post(`${Jt}/api/skill-tests/sql/evaluate`,{attemptId:t,problemId:E.id,query:i[E.id]||""});o(W),d(b=>({...b,[String(E.id)]:{passed:W.passed,feedback:W.feedback,expected:W.expected,actual:W.actual}}))}catch(W){re(W.response?.data?.error||W.message)}finally{g(!1)}}},Ie=async()=>{X(!1),z(!0);try{const{data:E}=await Q.post(`${Jt}/api/skill-tests/sql/finish/${t}`);q(E),oe(!0)}catch(E){re(E.response?.data?.error||E.message),z(!1)}},Ne=()=>{R?.passed?c(R):f()};if(U)return e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Loading SQL problems..."});if(R)return e.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:R.passed?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)"},children:R.passed?e.jsx(ge,{size:40,color:"#22c55e"}):e.jsx(me,{size:40,color:"#ef4444"})}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:700,margin:"0 0 8px",color:"#f1f5f9"},children:R.passed?"SQL Passed!":"SQL Failed"}),e.jsxs("p",{style:{fontSize:"18px",color:"#94a3b8"},children:["Solved: ",R.solved,"/",R.total," (",Math.round(R.score),"%)"]}),e.jsxs("div",{style:{marginTop:"32px"},children:[e.jsxs("button",{onClick:Ne,style:{padding:"12px 24px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:700,fontSize:"16px",display:"inline-flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(139,92,246,0.3)"},children:[R.passed?"Continue to Interview":"View Report"," ",e.jsx(Us,{size:18})]}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginTop:"12px"},children:"Click to proceed to the next stage"})]})]});const se=a[l],F=Object.values(T).filter(E=>E.passed).length,ie=[{name:I.employees,columns:["id","name","department","salary","hire_date","manager_id"]},{name:I.departments,columns:["id","name","budget","location"]},{name:I.projects,columns:["id","name","department_id","start_date","end_date","status"]},{name:I.orders,columns:["id","customer_name","product","quantity","price","order_date"]}],le=(E,W,b)=>{if(!W||!W.columns&&!W.error)return null;const N=b==="success"?"#10b981":b==="fail"?"#ef4444":"#60a5fa";return W.error?e.jsxs("div",{style:{flex:1,minWidth:"300px"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:800,color:"#ef4444",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.05em"},children:E}),e.jsxs("div",{style:{padding:"16px",background:"rgba(239, 68, 68, 0.08)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#fca5a5",fontSize:"13px",fontFamily:'"JetBrains Mono", monospace'},children:[e.jsx("div",{style:{color:"#ef4444",fontWeight:700,marginBottom:"4px"},children:"Query Error:"}),W.error]})]}):e.jsxs("div",{style:{flex:1,minWidth:"300px",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{fontSize:"11px",fontWeight:800,color:N,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:E}),e.jsxs("span",{style:{fontSize:"10px",opacity:.6},children:[W.rows?.length||0," rows"]})]}),e.jsx("div",{style:{overflow:"auto",background:"rgba(15, 23, 42, 0.6)",borderRadius:"12px",border:`1px solid ${N}30`,maxHeight:"250px",position:"relative"},children:e.jsxs("table",{style:{borderCollapse:"separate",borderSpacing:0,width:"100%",fontSize:"12px"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{position:"sticky",top:0,zIndex:10},children:W.columns.map(ne=>e.jsx("th",{style:{padding:"10px 16px",background:N+"20",backdropFilter:"blur(4px)",borderBottom:`2px solid ${N}40`,textAlign:"left",color:"#f1f5f9",fontWeight:700,whiteSpace:"nowrap"},children:ne},ne))})}),e.jsx("tbody",{children:W.rows&&W.rows.map((ne,j)=>e.jsx("tr",{style:{background:j%2===0?"rgba(255,255,255,0.02)":"transparent",transition:"background 0.2s"},onMouseEnter:P=>P.currentTarget.style.background="rgba(255,255,255,0.05)",onMouseLeave:P=>P.currentTarget.style.background=j%2===0?"rgba(255,255,255,0.02)":"transparent",children:W.columns.map(P=>e.jsx("td",{style:{padding:"8px 16px",borderBottom:"1px solid rgba(255,255,255,0.03)",color:"#cbd5e1",whiteSpace:"nowrap"},children:ne[P]??e.jsx("span",{style:{color:"#475569",fontStyle:"italic"},children:"NULL"})},P))},j))})]})})]})};return e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",color:"#f1f5f9"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",background:"rgba(30, 41, 59, 0.7)",backdropFilter:"blur(12px)",borderRadius:"16px",marginBottom:"20px",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 8px 32px rgba(0,0,0,0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #d946ef)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 15px rgba(139, 92, 246, 0.4)"},children:e.jsx(Oe,{size:22,color:"white"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:800,fontSize:"18px",letterSpacing:"-0.02em"},children:"SQL Proficiency Test"}),e.jsxs("div",{style:{fontSize:"12px",color:"#94a3b8",fontWeight:500},children:["Validated: ",e.jsx("span",{style:{color:"#8b5cf6"},children:F})," of ",a.length," challenges"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[Z!==null&&e.jsxs("div",{style:{padding:"8px 16px",borderRadius:"10px",fontSize:"14px",fontWeight:700,background:Z<300?"rgba(239, 68, 68, 0.15)":"rgba(59, 130, 246, 0.1)",color:Z<300?"#fca5a5":"#60a5fa",border:`1px solid ${Z<300?"rgba(239, 68, 68, 0.3)":"rgba(59, 130, 246, 0.2)"}`,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:"â±ï¸"})," ",Ce(Z)]}),e.jsx("button",{onClick:()=>X(!0),disabled:n,style:{padding:"10px 24px",background:"linear-gradient(to right, #8b5cf6, #7c3aed)",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:700,fontSize:"14px",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)",transition:"transform 0.2s, opacity 0.2s",opacity:n?.6:1},children:n?"Saving...":"Complete Test â†’"})]})]}),w&&e.jsxs("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.2)",borderRadius:"12px",padding:"12px 16px",marginBottom:"20px",color:"#fca5a5",fontSize:"14px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(me,{size:18})," ",w]}),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",padding:"0 4px"},children:a.map((E,W)=>{const b=T[String(E.id)],N=b?.passed,ne=b&&!b.passed;let j="rgba(51, 65, 85, 0.5)",P="1px solid rgba(255,255,255,0.05)",H="#94a3b8";return W===l?(j="rgba(139, 92, 246, 0.2)",P="1px solid rgba(139, 92, 246, 0.5)",H="#ddd6fe"):N?(j="rgba(34, 197, 94, 0.1)",P="1px solid rgba(34, 197, 94, 0.4)",H="#86efac"):ne&&(j="rgba(239, 68, 68, 0.1)",P="1px solid rgba(239, 68, 68, 0.4)",H="#fca5a5"),e.jsxs("button",{onClick:()=>{h(W),B(null),o(T[String(E.id)]||null),D(null)},style:{padding:"10px 20px",borderRadius:"10px",border:P,cursor:"pointer",fontWeight:700,fontSize:"13px",background:j,color:H,transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},children:["Q",W+1,N&&e.jsx(ge,{size:14}),ne&&e.jsx(me,{size:14})]},W)})}),se&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"420px 1fr",gap:"20px",alignItems:"start"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{background:"#1e293b",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.1)",overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:e.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:800,color:"#f8fafc"},children:se.title})}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 12px",background:se.difficulty==="easy"?"rgba(34,197,94,0.1)":se.difficulty==="medium"?"rgba(245,158,11,0.1)":"rgba(239,68,68,0.1)",color:se.difficulty==="easy"?"#86efac":se.difficulty==="medium"?"#fcd34d":"#fca5a5",borderRadius:"20px",fontSize:"11px",fontWeight:800,textTransform:"uppercase",letterSpacing:"0.05em",border:"1px solid currentColor"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"currentColor"}}),se.difficulty]}),se.expected_columns&&se.expected_columns.length>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 12px",background:"rgba(59,130,246,0.1)",color:"#93c5fd",borderRadius:"20px",fontSize:"11px",fontWeight:700,border:"1px solid rgba(59,130,246,0.3)"},children:[e.jsx(Oe,{size:12}),se.expected_columns.length," Columns Expected"]})]}),e.jsx("p",{style:{fontSize:"15px",lineHeight:1.7,color:"#f1f5f9",margin:"0 0 20px",fontWeight:450},children:se.description})]}),e.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>D(k==="schema"?null:"schema"),style:{flex:1,padding:"10px",borderRadius:"10px",fontSize:"13px",fontWeight:700,background:k==="schema"?"#334155":"rgba(51, 65, 85, 0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"#f1f5f9",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(ys,{size:16,color:"#8b5cf6"})," Schema"]}),e.jsxs("button",{onClick:()=>D(k==="expected"?null:"expected"),style:{flex:1,padding:"10px",borderRadius:"10px",fontSize:"13px",fontWeight:700,background:k==="expected"?"#334155":"rgba(51, 65, 85, 0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"#f1f5f9",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(Ae,{size:16,color:"#10b981"})," Expected"]})]}),k==="schema"&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:ie.map(E=>e.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.4)",padding:"12px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:800,color:"#8b5cf6",marginBottom:"8px",letterSpacing:"0.05em"},children:E.name.toUpperCase()}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:E.columns.map(W=>e.jsx("span",{style:{fontSize:"11px",color:"#94a3b8",background:"rgba(255,255,255,0.03)",padding:"2px 8px",borderRadius:"4px"},children:W},W))})]},E.name))}),k==="expected"&&e.jsxs("div",{style:{background:"#0f172a",padding:"12px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",fontSize:"13px"},children:[se.expected_columns&&e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("div",{style:{color:"#64748b",fontSize:"11px",fontWeight:700,marginBottom:"6px"},children:"REQUIRED COLUMNS"}),e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:se.expected_columns.map(E=>e.jsx("span",{style:{background:"rgba(96,165,250,0.1)",color:"#60a5fa",padding:"2px 8px",borderRadius:"4px",border:"1px solid rgba(96,165,250,0.2)"},children:E},E))})]}),se.expected_output_description&&e.jsxs("div",{children:[e.jsx("div",{style:{color:"#64748b",fontSize:"11px",fontWeight:700,marginBottom:"6px"},children:"EXPECTED RESULT"}),e.jsx("div",{style:{color:"#ec4899",fontStyle:"italic"},children:se.expected_output_description})]})]}),se.hints&&!k&&e.jsxs("div",{style:{background:"rgba(245,158,11,0.05)",padding:"12px",borderRadius:"12px",border:"1px solid rgba(245,158,11,0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#fbbf24",fontWeight:700,fontSize:"13px",marginBottom:"4px"},children:[e.jsx("span",{children:"ðŸ’¡"})," Pro Tip:"]}),e.jsx("div",{style:{fontSize:"13px",color:"#d97706",lineHeight:1.5},children:se.hints})]})]})]}),S&&e.jsx("div",{style:{background:S.passed?"rgba(34, 197, 94, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"16px",border:`1px solid ${S.passed?"rgba(34, 197, 94, 0.2)":"rgba(239, 68, 68, 0.2)"}`,padding:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:S.passed?"#22c55e":"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:S.passed?e.jsx(ge,{size:14,color:"white"}):e.jsx(me,{size:14,color:"white"})}),e.jsx("span",{style:{fontWeight:800,fontSize:"15px",color:S.passed?"#4ade80":"#f87171",letterSpacing:"0.05em"},children:S.passed?"PASSED":"FAILED"})]}),e.jsx("button",{onClick:()=>{const E=document.getElementById("sql-console-tabs");E&&E.scrollIntoView({behavior:"smooth"})},style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"#94a3b8",fontSize:"11px",fontWeight:700,padding:"4px 10px",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:E=>E.currentTarget.style.background="rgba(255,255,255,0.1)",onMouseLeave:E=>E.currentTarget.style.background="rgba(255,255,255,0.05)",children:"VIEW COMPARISON"})]})})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:e.jsxs("div",{style:{background:"#0f172a",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.1)",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{padding:"12px 20px",background:"rgba(30, 41, 59, 0.5)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#ff5f56"}}),e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#ffbd2e"}}),e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#27c93f"}}),e.jsx("span",{style:{marginLeft:"8px",fontSize:"12px",fontWeight:600,color:"#64748b"},children:"query.sql"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:de,disabled:u,style:{padding:"6px 16px",background:"#334155",color:"#f1f5f9",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",cursor:"pointer",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",opacity:u?.6:1},children:[u?e.jsx(xt,{size:14,className:"animate-spin"}):e.jsx(Ze,{size:14,color:"#10b981"})," Run Query"]}),e.jsxs("button",{onClick:We,disabled:A,style:{padding:"6px 16px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",opacity:A?.6:1},children:[A?e.jsx(xt,{size:14,className:"animate-spin"}):e.jsx(Je,{size:14})," Submit Final"]})]})]}),e.jsx("div",{style:{height:"300px"},children:e.jsx(Qt,{height:"300px",language:"sql",value:i[se.id]||"",onChange:E=>m(W=>({...W,[se.id]:E||""})),theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,padding:{top:16,bottom:16},fontFamily:"'Fira Code', 'Cascadia Code', monospace",lineNumbers:"on",renderLineHighlight:"all",contextmenu:!1}})}),e.jsxs("div",{style:{background:"#020617",padding:"0",borderTop:"1px solid rgba(255,255,255,0.05)",minHeight:"300px",maxHeight:"500px",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{id:"sql-console-tabs",style:{padding:"0 16px",background:"rgba(15, 23, 42, 0.8)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex"},children:[e.jsx("button",{onClick:()=>o(null),style:{padding:"12px 16px",fontSize:"11px",fontWeight:700,letterSpacing:"0.05em",background:S?"transparent":"rgba(56, 189, 248, 0.1)",color:S?"#475569":"#38bdf8",border:"none",borderBottom:S?"2px solid transparent":"2px solid #38bdf8",cursor:"pointer",transition:"all 0.2s"},children:"EXECUTION RESULT"}),S&&e.jsx("button",{style:{padding:"12px 16px",fontSize:"11px",fontWeight:700,letterSpacing:"0.05em",background:"rgba(139, 92, 246, 0.1)",color:"#a78bfa",border:"none",borderBottom:"2px solid #8b5cf6",cursor:"pointer"},children:"SUBMISSION COMPARISON"})]}),p&&e.jsx("div",{style:{fontSize:"10px",color:"#10b981",fontWeight:800},children:"SUCCESS"})]}),e.jsx("div",{style:{padding:"16px",overflowY:"auto",flex:1,fontFamily:"'JetBrains Mono', monospace"},children:S?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",gap:"20px",flexWrap:"nowrap",overflowX:"auto",paddingBottom:"12px"},children:[le("Expected Outcome",S.expected,"success"),le("Your Submission Output",S.actual,S.passed?"success":"fail")]}),e.jsxs("div",{style:{padding:"20px",background:S.passed?"rgba(16, 185, 129, 0.03)":"rgba(239, 68, 68, 0.03)",borderRadius:"16px",border:`1px solid ${S.passed?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)"}`,display:"flex",gap:"20px",alignItems:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"16px",background:S.passed?"#10b981":"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 8px 16px ${S.passed?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`},children:S.passed?e.jsx(ge,{size:24,color:"white"}):e.jsx(me,{size:24,color:"white"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px",fontWeight:800,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Final Assessment"}),e.jsx("div",{style:{fontSize:"18px",color:"#f1f5f9",fontWeight:800,letterSpacing:"-0.02em"},children:S.passed?"Challenge Successfully Solved":"Submission Mismatch Detected"}),e.jsx("div",{style:{fontSize:"13px",color:"#94a3b8",marginTop:"4px"},children:S.passed?"Your logic perfectly matches the expected criteria.":"Refine your query logic to match the expected results shown above."})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#64748b",fontWeight:800,textTransform:"uppercase",marginBottom:"4px"},children:"SCORE"}),e.jsx("div",{style:{fontSize:"28px",color:S.passed?"#10b981":"#ef4444",fontWeight:900},children:S.passed?"100":Math.max(0,S.score||0)})]})]})]}):p?p.success?p.rows&&p.rows.length>0?e.jsxs("div",{style:{overflowX:"auto"},children:[e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",fontSize:"13px"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"rgba(56, 189, 248, 0.08)"},children:p.columns.map(E=>e.jsx("th",{style:{padding:"10px 14px",borderBottom:"2px solid #1e293b",textAlign:"left",color:"#7dd3fc",fontWeight:700},children:E},E))})}),e.jsx("tbody",{children:p.rows.slice(0,50).map((E,W)=>e.jsx("tr",{style:{borderBottom:"1px solid #0f172a",background:W%2===0?"rgba(255,255,255,0.01)":"transparent"},children:p.columns.map(b=>e.jsx("td",{style:{padding:"10px 14px",color:"#cbd5e1"},children:E[b]??e.jsx("span",{style:{color:"#475569",fontStyle:"italic"},children:"NULL"})},b))},W))})]}),e.jsx("div",{style:{marginTop:"16px",fontSize:"11px",color:"#475569",borderTop:"1px solid #1e293b",paddingTop:"10px",display:"flex",justifyContent:"space-between"},children:e.jsxs("span",{children:["Showing ",Math.min(p.rows.length,50)," of ",p.rows.length," records"]})})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"#10b981",background:"rgba(16,185,129,0.08)",padding:"16px",borderRadius:"12px",border:"1px solid rgba(16,185,129,0.2)"},children:[e.jsx("div",{style:{padding:"4px",borderRadius:"50%",background:"#10b98140"},children:e.jsx(ge,{size:16})}),e.jsx("span",{style:{fontSize:"14px",fontWeight:600},children:p.message||"Execution successful. No rows returned."})]}):e.jsxs("div",{style:{color:"#ef4444",fontSize:"13px",background:"rgba(239,68,68,0.05)",padding:"16px",borderRadius:"12px",border:"1px solid rgba(239,68,68,0.2)",fontFamily:'"JetBrains Mono", monospace'},children:[e.jsx("strong",{style:{display:"block",marginBottom:"8px",textTransform:"uppercase",fontSize:"11px",letterSpacing:"0.05em"},children:"Execution Error"}),p.error]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"180px",color:"#334155"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(30,41,59,0.5)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px"},children:e.jsx(Oe,{size:24,style:{opacity:.5}})}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600,letterSpacing:"0.02em"},children:"Ready for execution"})]})})]})]})})]}),fe&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(2, 6, 23, 0.85)",backdropFilter:"blur(8px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#1e293b",borderRadius:"24px",padding:"40px",maxWidth:"440px",width:"90%",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.5)"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"20px",background:"rgba(139,92,246,0.1)",margin:"0 auto 24px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Oe,{size:32,color:"#8b5cf6"})}),e.jsx("h3",{style:{margin:"0 0 12px",color:"#f8fafc",fontSize:"24px",fontWeight:800},children:"Submit Solutions?"}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"15px",lineHeight:1.6,margin:"0 0 32px"},children:["You have submitted solutions for ",F," out of ",a.length," challenges. Are you ready to finalize this section?"]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>X(!1),style:{flex:1,padding:"12px",background:"rgba(51, 65, 85, 0.5)",color:"#cbd5e1",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",cursor:"pointer",fontWeight:700,fontSize:"15px"},children:"Go Back"}),e.jsx("button",{onClick:Ie,style:{flex:2,padding:"12px",background:"linear-gradient(to right, #8b5cf6, #7c3aed)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontWeight:700,fontSize:"15px",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:"Submit & Continue"})]})]})})]})}function Ms({state:t="idle",size:r=300}){const c={white:"#F8FAFC",silver:"#CBD5E1",dark:"#1E293B",blueWait:"#0EA5E9",blueActive:"#38BDF8",green:"#4ADE80",pink:"#F472B6"},a=t==="listening"?c.green:t==="thinking"?c.pink:t==="speaking"?c.blueActive:c.blueWait;return e.jsxs("div",{className:"avatar-container",style:{display:"flex",flexDirection:"column",alignItems:"center",filter:"drop-shadow(0 8px 24px rgba(14, 165, 233, 0.15))"},children:[e.jsxs("svg",{width:r,height:r*1.2,viewBox:"0 0 400 500",style:{overflow:"visible"},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"bodyGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFFFFF"}),e.jsx("stop",{offset:"100%",stopColor:"#E2E8F0"})]}),e.jsxs("radialGradient",{id:"screenGrad",cx:"50%",cy:"40%",r:"80%",children:[e.jsx("stop",{offset:"0%",stopColor:"#334155"}),e.jsx("stop",{offset:"100%",stopColor:"#020617"})]}),e.jsxs("filter",{id:"blueGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("g",{transform:"translate(200, 360)",children:e.jsxs("g",{children:[e.jsx("path",{d:"M-60 -20 Q-70 100 0 110 Q70 100 60 -20 L40 -40 Q0 -30 -40 -40 Z",fill:"url(#bodyGrad)",stroke:c.silver,strokeWidth:"2"}),e.jsx("path",{d:"M-20 0 L-20 60 M0 10 L0 70 M20 0 L20 60",stroke:a,strokeWidth:"4",strokeLinecap:"round",opacity:"0.8",filter:"url(#blueGlow)",children:t==="speaking"&&e.jsx("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"0.5s",repeatCount:"indefinite"})}),e.jsxs("g",{transform:"translate(0, -35)",children:[e.jsx("rect",{x:"-15",y:"-15",width:"30",height:"30",rx:"4",fill:c.dark}),e.jsx("rect",{x:"-15",y:"-10",width:"30",height:"4",fill:c.silver}),e.jsx("rect",{x:"-15",y:"0",width:"30",height:"4",fill:c.silver})]})]})}),e.jsxs("g",{transform:"translate(280.5, 340)",children:[e.jsx("circle",{cx:"0",cy:"0",r:"22",fill:"#E2E8F0",stroke:c.silver}),e.jsx("circle",{cx:"0",cy:"0",r:"10",fill:c.dark}),e.jsxs("g",{children:[t==="idle"&&e.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"-5; 5; -5",dur:"3s",repeatCount:"indefinite"}),t==="speaking"&&e.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0; -15; 0; -10; 0",dur:"2s",repeatCount:"indefinite"}),e.jsx("rect",{x:"-12",y:"0",width:"24",height:"60",rx:"10",fill:"url(#bodyGrad)"}),e.jsx("rect",{x:"-12",y:"25",width:"24",height:"5",fill:c.dark,opacity:"0.5"}),e.jsxs("g",{transform:"translate(0, 60)",children:[e.jsx("circle",{cx:"0",cy:"0",r:"14",fill:c.silver}),e.jsxs("g",{transform:"rotate(-30)",children:[e.jsx("rect",{x:"-10",y:"0",width:"20",height:"50",rx:"8",fill:"url(#bodyGrad)"}),e.jsxs("g",{transform:"translate(0, 55)",children:[e.jsx("path",{d:"M-12 -5 Q0 15 12 -5 Z",fill:"#E2E8F0"}),e.jsx("rect",{x:"-14",y:"0",width:"6",height:"15",rx:"3",fill:"#E2E8F0",transform:"rotate(-15)"}),e.jsx("rect",{x:"-5",y:"5",width:"6",height:"16",rx:"3",fill:"#E2E8F0"}),e.jsx("rect",{x:"5",y:"5",width:"6",height:"16",rx:"3",fill:"#E2E8F0"}),e.jsx("rect",{x:"14",y:"0",width:"6",height:"15",rx:"3",fill:"#E2E8F0",transform:"rotate(15)"})]})]})]})]})]}),e.jsxs("g",{transform:"translate(119.5, 340) scale(-1, 1)",children:[e.jsx("circle",{cx:"0",cy:"0",r:"22",fill:"#E2E8F0",stroke:c.silver}),e.jsx("circle",{cx:"0",cy:"0",r:"10",fill:c.dark}),e.jsxs("g",{children:[t==="idle"&&e.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"5; -5; 5",dur:"3s",repeatCount:"indefinite"}),t==="speaking"&&e.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0; 10; 0; 5; 0",dur:"2.5s",repeatCount:"indefinite",delay:"0.5s"}),e.jsx("rect",{x:"-12",y:"0",width:"24",height:"60",rx:"10",fill:"url(#bodyGrad)"}),e.jsx("rect",{x:"-12",y:"25",width:"24",height:"5",fill:c.dark,opacity:"0.5"}),e.jsxs("g",{transform:"translate(0, 60)",children:[e.jsx("circle",{cx:"0",cy:"0",r:"14",fill:c.silver}),e.jsxs("g",{transform:"rotate(-30)",children:[e.jsx("rect",{x:"-10",y:"0",width:"20",height:"50",rx:"8",fill:"url(#bodyGrad)"}),e.jsxs("g",{transform:"translate(0, 55)",children:[e.jsx("path",{d:"M-12 -5 Q0 15 12 -5 Z",fill:"#E2E8F0"}),e.jsx("rect",{x:"-5",y:"5",width:"10",height:"12",rx:"3",fill:"#E2E8F0"})]})]})]})]})]}),e.jsx("g",{transform:"translate(200, 240)",children:e.jsxs("g",{children:[t==="listening"&&e.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0; 5; 0; -2; 0",dur:"4s",repeatCount:"indefinite"}),t==="thinking"&&e.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0; -15; -15",dur:"1s",fill:"freeze"}),t==="speaking"&&e.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0 0; 0 2; 0 0",dur:"0.2s",repeatCount:"indefinite",additive:"sum"}),e.jsx("path",{d:"M-80 0 C-80 -70 -50 -90 0 -90 C50 -90 80 -70 80 0 C80 60 50 80 0 80 C-50 80 -80 60 -80 0 Z",fill:"url(#bodyGrad)",stroke:"#CBD5E1",strokeWidth:"2"}),e.jsx("rect",{x:"-60",y:"-40",width:"120",height:"90",rx:"25",fill:"url(#screenGrad)",stroke:"#334155",strokeWidth:"2"}),e.jsx("line",{x1:"50",y1:"-75",x2:"70",y2:"-100",stroke:c.silver,strokeWidth:"4",strokeLinecap:"round"}),e.jsx("circle",{cx:"70",cy:"-100",r:"6",fill:a,filter:"url(#blueGlow)",children:e.jsx("animate",{attributeName:"opacity",values:"0.6;1;0.6",dur:"2s",repeatCount:"indefinite"})}),e.jsxs("g",{children:[e.jsx("path",{d:"M-82 -10 L-88 -10 L-88 30 L-82 30 Z",fill:c.silver}),e.jsx("rect",{x:"-92",y:"-15",width:"14",height:"50",rx:"4",fill:c.white,stroke:c.silver}),e.jsx("circle",{cx:"-85",cy:"10",r:"12",fill:c.dark}),e.jsx("circle",{cx:"-85",cy:"10",r:"6",fill:a,opacity:"0.7"})]}),e.jsxs("g",{children:[e.jsx("path",{d:"M82 -10 L88 -10 L88 30 L82 30 Z",fill:c.silver}),e.jsx("rect",{x:"78",y:"-15",width:"14",height:"50",rx:"4",fill:c.white,stroke:c.silver}),e.jsx("circle",{cx:"85",cy:"10",r:"12",fill:c.dark}),e.jsx("circle",{cx:"85",cy:"10",r:"6",fill:a,opacity:"0.7"})]}),e.jsxs("g",{transform:"translate(0, 5)",children:[e.jsxs("g",{transform:"translate(-25, -5)",children:[e.jsx("ellipse",{cx:"0",cy:"0",rx:"16",ry:"18",fill:"url(#screenGrad)",stroke:a,strokeWidth:"3",filter:"url(#blueGlow)"}),e.jsx("circle",{cx:"4",cy:"-4",r:"5",fill:"white",opacity:"0.8"}),t==="idle"&&e.jsx("animateTransform",{attributeName:"transform",type:"scale",values:"1 1; 1 0.1; 1 1",keyTimes:"0; 0.45; 0.5; 1",dur:"4s",repeatCount:"indefinite"})]}),e.jsxs("g",{transform:"translate(25, -5)",children:[e.jsx("ellipse",{cx:"0",cy:"0",rx:"16",ry:"18",fill:"url(#screenGrad)",stroke:a,strokeWidth:"3",filter:"url(#blueGlow)"}),e.jsx("circle",{cx:"4",cy:"-4",r:"5",fill:"white",opacity:"0.8"}),t==="idle"&&e.jsx("animateTransform",{attributeName:"transform",type:"scale",values:"1 1; 1 0.1; 1 1",keyTimes:"0; 0.45; 0.5; 1",dur:"4s",repeatCount:"indefinite"})]}),e.jsx("g",{transform:"translate(0, 30)",children:t==="speaking"?e.jsx("path",{d:"M-10 0 Q0 10 10 0",fill:"none",stroke:a,strokeWidth:"3",strokeLinecap:"round",children:e.jsx("animate",{attributeName:"d",values:"M-10 0 Q0 15 10 0; M-10 0 Q0 5 10 0; M-10 0 Q0 15 10 0",dur:"0.3s",repeatCount:"indefinite"})}):e.jsx("path",{d:"M-8 0 Q0 5 8 0",fill:"none",stroke:a,strokeWidth:"3",strokeLinecap:"round",opacity:"0.8"})})]})]})})]}),e.jsxs("div",{style:{marginTop:"-30px",padding:"8px 20px",background:t==="speaking"?"rgba(56, 189, 248, 0.1)":"rgba(30, 41, 59, 0.8)",backdropFilter:"blur(4px)",borderRadius:"24px",border:`1px solid ${a}40`,display:"flex",alignItems:"center",gap:"8px",zIndex:10},children:[e.jsx("span",{style:{display:"block",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:a,boxShadow:`0 0 10px ${a}`,animation:t==="speaking"?"pulse 1s infinite":"none"}}),e.jsx("span",{style:{color:"white",fontSize:"13px",fontWeight:600,letterSpacing:"0.5px",textTransform:"uppercase"},children:t==="speaking"?"AI Interviewer":t==="listening"?"Listening...":t==="thinking"?"Thinking...":"Ready"})]}),e.jsx("style",{children:`
                    @keyframes pulse { 0% { opacity: 0.5; transform: scale(0.8); } 50% { opacity: 1; transform: scale(1.2); } 100% { opacity: 0.5; transform: scale(0.8); } }
                `})]})}const Os="http://localhost:3000";function mi({attemptId:t,attemptData:r,onComplete:c,onFailed:f}){const[a,x]=s.useState(""),[l,h]=s.useState(""),[i,m]=s.useState("medium"),[p,B]=s.useState(1),[S,o]=s.useState(5),[T,d]=s.useState(""),[u,y]=s.useState(null),[A,g]=s.useState("idle"),[n,z]=s.useState(!1),[R,q]=s.useState(!1),[U,K]=s.useState(!0),[k,D]=s.useState(!1),[w,re]=s.useState(null),[te,oe]=s.useState(!0),[fe,X]=s.useState([]),[Z,V]=s.useState(""),[I,Y]=s.useState(null),O=s.useRef(null),be=s.useRef(null),Ce=s.useRef(null),Se=s.useRef(null),de=s.useRef(null);s.useEffect(()=>{if(I!==null){if(I<=0){We();return}return de.current=setInterval(()=>{Y(W=>W<=1?(clearInterval(de.current),We(),0):W-1)},1e3),()=>clearInterval(de.current)}},[I]);const We=()=>{alert("Time is up! Submitting your test automatically."),f()},Ie=W=>{const b=Math.floor(W/60),N=W%60;return`${b}:${N<10?"0":""}${N}`};s.useEffect(()=>(Se.current=window.speechSynthesis,Ne(),()=>{ie(),Se.current&&Se.current.cancel()}),[]);const Ne=async()=>{try{const{data:W}=await Q.post(`${Os}/api/skill-tests/interview/start/${t}`);x(W.question),h(W.category||""),m(W.difficulty||"medium"),B(W.question_number),o(W.total_questions),W.duration_minutes&&Y(W.duration_minutes*60),oe(!1),U&&se(W.question)}catch(W){V(W.response?.data?.error||W.message),oe(!1)}},se=W=>{if(!Se.current||!U)return;Se.current.cancel();const b=new SpeechSynthesisUtterance(W);b.rate=.95,b.pitch=1,b.volume=.8,b.onstart=()=>{q(!0),g("speaking")},b.onend=()=>{q(!1),g("idle")},b.onerror=()=>{q(!1),g("idle")},Se.current.speak(b)},F=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){V("Speech recognition not supported in this browser. Please type your answer.");return}const W=window.SpeechRecognition||window.webkitSpeechRecognition,b=new W;b.continuous=!0,b.interimResults=!0,b.lang="en-US";let N=T;b.onresult=ne=>{let j="";for(let P=ne.resultIndex;P<ne.results.length;P++)ne.results[P].isFinal?N+=ne.results[P][0].transcript+" ":j+=ne.results[P][0].transcript;d(N+j)},b.onend=()=>{z(!1),g("idle")},b.onerror=ne=>{ne.error!=="no-speech"&&console.error("Speech error:",ne.error),z(!1),g("idle")},Ce.current=b,b.start(),z(!0),g("listening"),Se.current&&Se.current.cancel()},ie=()=>{Ce.current&&(Ce.current.stop(),Ce.current=null),z(!1),g("idle")},le=async()=>{if(!T.trim())return V("Please provide an answer");D(!0),V(""),y(null),g("thinking"),ie();try{const{data:W}=await Q.post(`${Os}/api/skill-tests/interview/answer`,{attemptId:t,answer:T.trim()});X(b=>[...b,{question:a,answer:T.trim(),score:W.score,feedback:W.feedback}]),y({score:W.score,feedback:W.feedback}),W.is_complete?(re({passed:W.passed,overall_score:W.overall_score,status:W.status}),g("idle"),W.passed?setTimeout(()=>c(W),3e3):setTimeout(()=>f(),3e3)):setTimeout(()=>{x(W.next_question),h(W.next_category||""),m(W.next_difficulty||"medium"),B(W.question_number),d(""),y(null),g("idle"),U&&se(W.next_question)},3e3)}catch(W){V(W.response?.data?.error||W.message),g("idle")}finally{D(!1),E()}},E=()=>{setTimeout(()=>{O.current?.scrollIntoView({behavior:"smooth"})},100)};return s.useEffect(()=>{E()},[fe,a,u]),te?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Starting AI Interview..."}):w?e.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[e.jsx(Ms,{state:"idle",size:160}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 20px",display:"flex",alignItems:"center",justifyContent:"center",background:w.passed?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)"},children:w.passed?e.jsx(ge,{size:40,color:"#22c55e"}):e.jsx(me,{size:40,color:"#ef4444"})}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:700,margin:"0 0 8px",color:"#f1f5f9"},children:w.passed?"Interview Passed!":"Interview Not Passed"}),e.jsxs("p",{style:{fontSize:"18px",color:"#94a3b8"},children:["Average Score: ",(w.overall_score||0).toFixed(1),"/10"]}),e.jsx("p",{style:{fontSize:"14px",color:w.passed?"#22c55e":"#ef4444",marginTop:"12px"},children:w.passed?"Assessment complete! Generating report...":"Assessment ended. Generating report..."})]})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"300px 1fr",height:"700px",background:"#0f172a",borderRadius:"24px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)",boxShadow:"0 20px 50px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{background:"#1e293b",borderRight:"1px solid rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",padding:"24px",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Ms,{state:A,size:180}),e.jsx("div",{style:{position:"absolute",bottom:"10px",right:"10px",width:"12px",height:"12px",borderRadius:"50%",background:A==="speaking"?"#10b981":A==="thinking"?"#8b5cf6":"#94a3b8",border:"2px solid #1e293b"}})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:800,color:"#f8fafc",marginBottom:"4px"},children:"AI Interviewer"}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:700},children:A==="speaking"?"Speaking...":A==="thinking"?"Processing...":"Ready"})]}),e.jsx("div",{style:{width:"100%",height:"1px",background:"rgba(255,255,255,0.05)",margin:"10px 0"}}),I!==null&&e.jsxs("div",{style:{width:"100%"},children:[e.jsx("div",{style:{fontSize:"11px",color:"#64748b",fontWeight:800,marginBottom:"8px",textTransform:"uppercase"},children:"Time Efficiency"}),e.jsx("div",{style:{padding:"12px",borderRadius:"16px",fontSize:"20px",fontWeight:900,background:I<300?"rgba(239,68,68,0.1)":"rgba(16, 185, 129, 0.1)",color:I<300?"#fca5a5":"#10b981",border:"1px solid "+(I<300?"rgba(239,68,68,0.2)":"rgba(16, 185, 129, 0.2)"),textAlign:"center",fontFamily:'"JetBrains Mono", monospace'},children:Ie(I)})]}),e.jsxs("div",{style:{width:"100%",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",padding:"12px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#64748b",fontWeight:800},children:"PROGRESS"}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:900,color:"#8b5cf6"},children:[p,"/",S]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",padding:"12px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#64748b",fontWeight:800},children:"DIFFICULTY"}),e.jsx("div",{style:{fontSize:"13px",fontWeight:800,color:i==="hard"?"#ef4444":"#f59e0b",textTransform:"uppercase"},children:i})]})]})]}),e.jsx("div",{style:{marginTop:"auto"},children:e.jsxs("button",{onClick:()=>K(!U),style:{width:"100%",padding:"12px",background:U?"rgba(16, 185, 129, 0.1)":"rgba(255,255,255,0.03)",border:"1px solid "+(U?"rgba(16, 185, 129, 0.2)":"rgba(255,255,255,0.05)"),borderRadius:"12px",color:U?"#10b981":"#64748b",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s",fontWeight:700,fontSize:"13px"},children:[U?e.jsx(Cs,{size:16}):e.jsx(zr,{size:16}),U?"VOICE ENABLED":"MUTE MODE"]})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",background:"#0f172a",position:"relative"},children:[e.jsxs("div",{ref:be,style:{flex:1,overflowY:"auto",padding:"32px",display:"flex",flexDirection:"column",gap:"24px",scrollBehavior:"smooth"},children:[e.jsxs("div",{style:{paddingBottom:"20px",borderBottom:"1px solid rgba(255,255,255,0.05)",marginBottom:"10px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:800,color:"#f8fafc",margin:0},children:"Technical Assessment"}),e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",margin:"4px 0 0"},children:["Conducting focus session on ",l||"General Software Engineering"]})]}),fe.map((W,b)=>e.jsxs(qs.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"12px",maxWidth:"85%"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#8b5cf6",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(is,{size:16,color:"white"})}),e.jsx("div",{style:{background:"#1e293b",padding:"16px",borderRadius:"4px 20px 20px 20px",border:"1px solid rgba(255,255,255,0.05)",color:"#e2e8f0",fontSize:"15px",lineHeight:1.6},children:W.question})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",maxWidth:"85%",alignSelf:"flex-end",flexDirection:"row-reverse"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx("div",{style:{fontSize:"14px",fontWeight:900,color:"white"},children:"Y"})}),e.jsx("div",{style:{background:"rgba(16, 185, 129, 0.1)",padding:"16px",borderRadius:"20px 4px 20px 20px",border:"1px solid rgba(16, 185, 129, 0.2)",color:"#f1f5f9",fontSize:"15px",lineHeight:1.6},children:W.answer})]}),e.jsx("div",{style:{display:"flex",gap:"12px",maxWidth:"75%",alignSelf:"center"},children:e.jsxs("div",{style:{background:W.score>=7?"rgba(34,197,94,0.05)":"rgba(245,158,11,0.05)",padding:"12px 20px",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{fontSize:"12px",fontWeight:900,color:W.score>=7?"#10b981":"#f59e0b",background:"rgba(255,255,255,0.05)",padding:"4px 8px",borderRadius:"8px"},children:["SCORE: ",W.score,"/10"]}),e.jsx("div",{style:{fontSize:"13px",color:"#94a3b8",fontStyle:"italic"},children:W.feedback})]})})]},b)),!u&&!w&&e.jsxs("div",{style:{display:"flex",gap:"12px",maxWidth:"85%"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#8b5cf6",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(is,{size:16,color:"white"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{background:"#1e293b",padding:"16px",borderRadius:"4px 20px 20px 20px",border:"1px solid rgba(255,255,255,0.05)",color:"#e2e8f0",fontSize:"15px",lineHeight:1.6,boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[a,!R&&U&&e.jsxs("button",{onClick:()=>se(a),style:{marginTop:"12px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.05)",cursor:"pointer",color:"#8b5cf6",fontSize:"11px",fontWeight:700,padding:"4px 10px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Cs,{size:12})," REPLAY AUDIO"]})]}),e.jsx("div",{style:{fontSize:"11px",color:"#475569",paddingLeft:"4px",fontWeight:600},children:"WAITING FOR YOUR ANSWER"})]})]}),Z&&e.jsxs("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"12px",padding:"12px 20px",color:"#fca5a5",fontSize:"13px",alignSelf:"center"},children:[e.jsx("strong",{children:"Error:"})," ",Z]}),u&&!w&&e.jsxs("div",{style:{display:"flex",gap:"12px",maxWidth:"85%",opacity:.6},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"#334155",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(xt,{size:16,className:"animate-spin",color:"white"})}),e.jsx("div",{style:{background:"#0f172a",padding:"16px",color:"#475569",fontStyle:"italic",fontSize:"14px"},children:"Moving to next question..."})]}),e.jsx("div",{ref:O})]}),e.jsxs("div",{style:{padding:"0 32px 32px"},children:[!u&&!w&&e.jsxs("div",{style:{background:"#1e293b",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 10px 40px rgba(0,0,0,0.4)",padding:"12px",transition:"all 0.3s"},children:[e.jsx("textarea",{value:T,onChange:W=>d(W.target.value),placeholder:"Type your response here...",rows:2,style:{width:"100%",background:"transparent",border:"none",color:"#f8fafc",fontSize:"15px",lineHeight:1.6,padding:"12px",resize:"none",outline:"none",fontFamily:"inherit"},onKeyDown:W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),T.trim()&&!k&&le())}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 12px 12px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:n?ie:F,style:{width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",background:n?"#ef4444":"rgba(16, 185, 129, 0.1)",color:n?"white":"#10b981",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",border:n?"none":"1px solid rgba(16, 185, 129, 0.2)"},children:n?e.jsx(Ys,{size:20}):e.jsx(js,{size:20})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"0 12px",background:"rgba(255,255,255,0.03)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#64748b"}}),e.jsxs("span",{style:{fontSize:"11px",fontWeight:700,color:"#64748b"},children:[T.split(/\s+/).filter(Boolean).length," WORDS"]})]})]}),e.jsxs("button",{onClick:le,disabled:k||!T.trim(),style:{padding:"10px 24px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"16px",cursor:"pointer",fontWeight:800,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s",opacity:k||!T.trim()?.3:1,boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:[k?e.jsx(xt,{size:16,className:"animate-spin"}):e.jsx(Je,{size:16}),"SUBMIT"]})]})]}),(u||w)&&e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#475569",fontSize:"14px",fontWeight:600,letterSpacing:"0.05em"},children:w?"INTERVIEW COMPLETED":"EVALUATING RESPONSE..."})]})]})]})}const Zt="http://localhost:3000";function ui({user:t}){const[r,c]=s.useState([]),[f,a]=s.useState(!0),[x,l]=s.useState(null),[h,i]=s.useState(null),[m,p]=s.useState("list"),[B,S]=s.useState(""),[o,T]=s.useState(!1),[d,u]=s.useState(null),[y,A]=s.useState(""),[g,n]=s.useState(!1),[z,R]=s.useState(null),[q,U]=s.useState(null),K=s.useRef(null),k=s.useRef(null),[D,w]=s.useState({violationCount:0,tabSwitchCount:0,cameraBlocks:0,phoneDetections:0,fullscreenExits:0,cameraActive:!1}),[re,te]=s.useState(null),oe=s.useRef(null),fe=s.useRef(null),X=s.useRef(null),Z=s.useRef(null),[V,I]=s.useState(!1),Y=s.useRef(0),[O,be]=s.useState(null);s.useEffect(()=>{We(),Ce()},[]);const Ce=async()=>{try{const j=()=>new Promise(H=>{if(window.cocoSsd)return H();let ye=0;const ae=setInterval(()=>{ye+=200,(window.cocoSsd||ye>3e4)&&(clearInterval(ae),H())},200)});if(console.log("â³ Waiting for TensorFlow.js & COCO-SSD scripts..."),await j(),!window.cocoSsd){console.error("âŒ COCO-SSD scripts failed to load from CDN");return}console.log("ðŸ“¦ Scripts ready. Loading COCO-SSD model weights...");const P=await window.cocoSsd.load({base:"mobilenet_v2"});be(P),I(!0),console.log("âœ… AI Proctoring Model loaded successfully!");try{const H=document.createElement("canvas");H.width=64,H.height=64,await P.detect(H),console.log("ðŸ”¥ Model warmed up and ready for real-time detection")}catch{}}catch(j){console.error("Model load error:",j)}};s.useEffect(()=>()=>{d&&d.getTracks().forEach(j=>j.stop())},[d]),s.useEffect(()=>{const j=()=>{const P=!!document.fullscreenElement;T(P),!P&&x&&m!=="list"&&m!=="report"&&Z.current?.("fullscreen_exit","Student exited fullscreen mode","high")};return document.addEventListener("fullscreenchange",j),()=>document.removeEventListener("fullscreenchange",j)},[x,m]);const Se=s.useCallback((j,P,H)=>{te({title:j,message:P,severity:H}),oe.current&&clearTimeout(oe.current),oe.current=setTimeout(()=>te(null),4e3)},[]),de=s.useCallback(async(j,P,H="medium")=>{if(!(!x||h?.proctoring_enabled===!1))try{await Q.post(`${Zt}/api/skill-tests/proctoring/log`,{attemptId:x,testStage:m,eventType:j,details:P,severity:H}),w(we=>({...we,violationCount:we.violationCount+1,tabSwitchCount:j==="tab_switch"?we.tabSwitchCount+1:we.tabSwitchCount,fullscreenExits:j==="fullscreen_exit"?we.fullscreenExits+1:we.fullscreenExits,phoneDetections:j==="phone_detected"?we.phoneDetections+1:we.phoneDetections,cameraBlocks:j==="camera_blocked"?we.cameraBlocks+1:we.cameraBlocks}));const ae={tab_switch:{title:"âš ï¸ Tab Switch Detected!",msg:"Switching tabs is monitored. Return to your test immediately."},fullscreen_exit:{title:"âš ï¸ Fullscreen Exited!",msg:"You must stay in fullscreen mode. Please re-enter fullscreen."},camera_blocked:{title:"ðŸ“· Camera Blocked!",msg:"Your camera appears to be covered or blocked. Please uncover it."},phone_detected:{title:"ðŸ“± Suspicious Activity!",msg:"Device or object detected near camera. Keep your area clear."}}[j]||{title:"âš ï¸ Violation!",msg:P};Se(ae.title,ae.msg,H)}catch{}},[x,m,h,Se]);s.useEffect(()=>{Z.current=de},[de]),s.useEffect(()=>{if(!x||m==="list"||m==="report"||h?.proctoring_enabled===!1)return;const j=P=>{P.preventDefault()};return window.addEventListener("copy",j),window.addEventListener("paste",j),window.addEventListener("cut",j),window.addEventListener("contextmenu",j),()=>{window.removeEventListener("copy",j),window.removeEventListener("paste",j),window.removeEventListener("cut",j),window.removeEventListener("contextmenu",j)}},[x,m,h]),s.useEffect(()=>{const j=()=>{document.hidden&&x&&m!=="list"&&m!=="report"&&Z.current?.("tab_switch","Student switched tabs or minimized window","high")};return document.addEventListener("visibilitychange",j),()=>document.removeEventListener("visibilitychange",j)},[x,m]),s.useEffect(()=>{w(j=>({...j,cameraActive:!!d}))},[d]),s.useEffect(()=>{if(!d||!x||m==="list"||m==="report"){X.current&&(clearInterval(X.current),X.current=null);return}const j=document.createElement("canvas");j.width=640,j.height=480;const P=j.getContext("2d");fe.current=j;const H=document.createElement("video");H.srcObject=d,H.muted=!0,H.playsInline=!0,H.width=640,H.height=480,H.play().catch(Te=>console.warn("Video play error:",Te));let ye=0;const ae=20,we=3,et=8e3;return X.current=setInterval(async()=>{try{if(!H||H.paused||H.ended||H.readyState<2||!P)return;try{P.drawImage(H,0,0,640,480);const Pe=P.getImageData(0,0,640,480).data;let nt=0;for(let Be=0;Be<Pe.length;Be+=16)nt+=Pe[Be]*.299+Pe[Be+1]*.587+Pe[Be+2]*.114;nt/(Pe.length/16)<ae?(ye++,ye===we&&(Z.current?.("camera_blocked","Camera appears to be covered","high"),ye=0)):ye=0}catch{return}if(O&&H.readyState>=2)try{const Te=await O.detect(H),Pe=Te.filter(je=>je.class!=="person");Pe.length>0&&console.log("ðŸ” AI:",Pe.map(je=>`${je.class}(${(je.score*100).toFixed(0)}%)`).join(", "));const nt=["cell phone","remote","laptop","mouse","tablet"],Ye=Te.find(je=>nt.includes(je.class)&&je.score>=.4);if(Ye){const je=Date.now();je-Y.current>et&&(Y.current=je,console.warn(`ðŸš¨ SUSPICIOUS DEVICE: ${Ye.class} (${(Ye.score*100).toFixed(0)}%)`),Z.current?.("phone_detected",`Suspicious activity: ${Ye.class} detected (${(Ye.score*100).toFixed(0)}% confidence)`,"high"))}const Be=Te.filter(je=>["book","keyboard"].includes(je.class)&&je.score>.45);if(Be.length>0){console.warn("âš ï¸ Suspicious:",Be.map(ut=>`${ut.class}(${(ut.score*100).toFixed(0)}%)`).join(", "));const je=Date.now();je-Y.current>et&&(Y.current=je,Z.current?.("phone_detected",`${Be[0].class} detected`,"medium"))}const mt=Te.filter(je=>je.class==="person"&&je.score>.35);mt.length>1&&Z.current?.("phone_detected",`Multiple people detected (${mt.length} persons)`,"high")}catch(Te){console.warn("Detection error:",Te.message)}}catch(Te){console.error(Te)}},500),()=>{X.current&&(clearInterval(X.current),X.current=null),H.pause(),H.srcObject=null}},[d,x,m,O]),s.useEffect(()=>()=>{oe.current&&clearTimeout(oe.current),X.current&&clearInterval(X.current)},[]);const We=async()=>{try{a(!0);const{data:j}=await Q.get(`${Zt}/api/skill-tests/student/available`,{params:{studentId:t?.id||t?.email||"student"}});c(j)}catch(j){S(j.response?.data?.error||j.message)}finally{a(!1)}},Ie=j=>{const P=r.find(H=>H.id===j);if(P&&P.proctoring_enabled===!1){le(j);return}R(j),U(null),n(!0),A("")},Ne=j=>{let P=!0;for(const H of r)if(H.my_attempts?.find(ae=>ae.id===j)){H.proctoring_enabled===!1&&(P=!1);break}if(!P){E(j);return}U(j),R(null),n(!0),A("")},se=async()=>{try{const j=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:!1});return u(j),A(""),k.current&&(k.current.srcObject=j),!0}catch{return A("Camera access denied. Please allow camera access and try again."),!1}},F=async()=>{try{return K.current&&!document.fullscreenElement&&await K.current.requestFullscreen(),T(!0),!0}catch{return!1}},ie=async()=>{await F(),n(!1),z?await le(z):q&&await E(q),R(null),U(null)},le=async j=>{try{S(""),w({violationCount:0,tabSwitchCount:0,cameraBlocks:0,phoneDetections:0,fullscreenExits:0,cameraActive:!!d});const{data:P}=await Q.post(`${Zt}/api/skill-tests/${j}/start`,{studentId:t?.id||t?.email||"student",studentName:t?.name||t?.username||"Student"});l(P.attemptId),await W(P.attemptId)}catch(P){S(P.response?.data?.error||P.message)}},E=async j=>{try{S(""),w({violationCount:0,tabSwitchCount:0,cameraBlocks:0,phoneDetections:0,fullscreenExits:0,cameraActive:!!d}),l(j),await W(j)}catch(P){S(P.response?.data?.error||P.message)}},W=async j=>{try{const{data:P}=await Q.get(`${Zt}/api/skill-tests/attempt/${j}`);i(P),P.overall_status==="completed"||P.overall_status==="failed"?p("report"):p(P.current_stage||"mcq")}catch(P){S(P.message)}},b=async j=>{l(j),await W(j),p("report")},N=async(j,P)=>{await W(x),setTimeout(()=>{document.fullscreenElement||(K.current||document.documentElement).requestFullscreen().catch(()=>{console.warn("Could not re-enter fullscreen after stage change")})},200)},ne=()=>{document.fullscreenElement&&document.exitFullscreen().catch(()=>{}),d&&(d.getTracks().forEach(j=>j.stop()),u(null)),l(null),i(null),p("list"),w({violationCount:0,tabSwitchCount:0,cameraBlocks:0,phoneDetections:0,fullscreenExits:0,cameraActive:!1}),We()};if(g)return e.jsx("div",{ref:K,style:{minHeight:"100vh",background:"#0f172a",color:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px"},children:e.jsxs("div",{style:{maxWidth:"500px",width:"100%",background:"#1e293b",borderRadius:"20px",padding:"40px",border:"1px solid #334155",textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",margin:"0 auto 20px",background:"rgba(139,92,246,0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(gt,{size:32,color:"#8b5cf6"})}),e.jsx("h2",{style:{fontSize:"22px",fontWeight:800,margin:"0 0 8px",color:"#f1f5f9"},children:"Proctoring Setup"}),e.jsx("p",{style:{fontSize:"14px",color:"#94a3b8",margin:"0 0 28px"},children:"This test requires camera access and fullscreen mode for proctoring."}),e.jsx("div",{style:{width:"240px",height:"180px",margin:"0 auto 20px",borderRadius:"12px",overflow:"hidden",border:"2px solid "+(d?"#22c55e":"#475569"),background:"#0f172a",display:"flex",alignItems:"center",justifyContent:"center"},children:d?e.jsx("video",{ref:k,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"}}):e.jsx(cs,{size:40,color:"#475569"})}),y&&e.jsx("div",{style:{fontSize:"12px",color:"#fca5a5",margin:"0 0 16px",padding:"8px 12px",background:"rgba(239,68,68,0.1)",borderRadius:"8px"},children:y}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"24px"},children:[e.jsx("button",{onClick:se,style:{padding:"12px 24px",borderRadius:"10px",cursor:"pointer",fontWeight:700,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:"100%",background:d?"rgba(16,185,129,0.15)":"rgba(59,130,246,0.15)",color:d?"#34d399":"#60a5fa",border:"1px solid "+(d?"rgba(16,185,129,0.3)":"rgba(59,130,246,0.3)")},children:d?e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:16})," Camera Enabled"]}):e.jsxs(e.Fragment,{children:[e.jsx(cs,{size:16})," Enable Camera"]})}),e.jsxs("div",{style:{textAlign:"left",fontSize:"13px",padding:"12px 16px",background:"#0f172a",borderRadius:"10px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",color:d?"#34d399":"#94a3b8"},children:[d?e.jsx(ge,{size:14}):e.jsx(me,{size:14})," Camera access"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",color:"#94a3b8"},children:[e.jsx(Gt,{size:14})," Fullscreen will activate on start"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#94a3b8"},children:[e.jsx(Cr,{size:14})," Tab switches are monitored"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>{n(!1),R(null),U(null)},style:{flex:1,padding:"12px",background:"#334155",color:"#94a3b8",border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:"Cancel"}),e.jsxs("button",{onClick:ie,disabled:!d,style:{flex:2,padding:"12px",background:d?"linear-gradient(135deg, #8b5cf6, #7c3aed)":"#334155",color:d?"white":"#64748b",border:"none",borderRadius:"10px",cursor:d?"pointer":"not-allowed",fontWeight:700,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:d?"0 2px 10px rgba(139,92,246,0.3)":"none"},children:[e.jsx(Ze,{size:16})," Start Assessment"]})]})]})});if(x&&h){const j=["mcq","coding","sql","interview"],P=j.indexOf(h.current_stage);return m==="report"?e.jsx(Fr,{attemptId:x,onBack:ne}):e.jsxs("div",{ref:K,style:{minHeight:"100vh",background:"#0f172a",color:"#f1f5f9",display:"flex",overflow:"hidden"},children:[e.jsx("style",{children:"@keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }"}),d&&e.jsxs("div",{style:{width:"260px",minWidth:"260px",background:"#0b1120",borderRight:"1px solid #1e293b",display:"flex",flexDirection:"column",padding:"12px",gap:"10px",height:"100vh",position:"sticky",top:0},children:[e.jsxs("div",{style:{width:"100%",aspectRatio:"3/4",borderRadius:"12px",overflow:"hidden",border:"2px solid #8b5cf6",boxShadow:"0 4px 20px rgba(139,92,246,0.2)",background:"#000",position:"relative"},children:[e.jsx("video",{ref:H=>{H&&d&&(H.srcObject=d)},autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"}}),e.jsxs("div",{style:{position:"absolute",top:"6px",left:"6px",background:"rgba(239,68,68,0.9)",borderRadius:"4px",padding:"2px 8px",fontSize:"10px",color:"white",fontWeight:700,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"white",animation:"blink 1s infinite"}}),"REC"]})]}),e.jsxs("div",{style:{background:"#1e293b",borderRadius:"10px",padding:"10px",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:700,color:"#94a3b8",marginBottom:"8px"},children:[e.jsx(gt,{size:13,color:"#8b5cf6"})," Proctoring"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[e.jsxs("div",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:600,background:V?"rgba(34,197,94,0.1)":"rgba(234,179,8,0.1)",color:V?"#22c55e":"#eab308",border:`1px solid ${V?"rgba(34,197,94,0.2)":"rgba(234,179,8,0.2)"}`,display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx("div",{style:{width:"5px",height:"5px",borderRadius:"50%",background:V?"#22c55e":"#eab308",boxShadow:`0 0 6px ${V?"#22c55e":"#eab308"}`,animation:V?"none":"blink 1s infinite"}}),V?"â— AI Active":"â—Œ AI Loading..."]}),e.jsxs("div",{style:{padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:600,background:"rgba(16,185,129,0.1)",color:"#10b981",border:"1px solid rgba(16,185,129,0.2)",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(cs,{size:10})," Camera ON"]})]})]}),e.jsxs("div",{style:{background:"#1e293b",borderRadius:"10px",padding:"10px",border:"1px solid #334155"},children:[e.jsx("div",{style:{fontSize:"10px",fontWeight:700,color:"#64748b",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Monitoring"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"3px 0"},children:[e.jsxs("span",{style:{fontSize:"11px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Rs,{size:10})," Tab Switches"]}),e.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:D.tabSwitchCount>0?"#fbbf24":"#64748b"},children:D.tabSwitchCount})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"3px 0"},children:[e.jsxs("span",{style:{fontSize:"11px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Is,{size:10})," Phone"]}),e.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:D.phoneDetections>0?"#fbbf24":"#64748b"},children:D.phoneDetections})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"3px 0"},children:[e.jsxs("span",{style:{fontSize:"11px",color:"#94a3b8",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Gt,{size:10})," FS Exits"]}),e.jsx("span",{style:{fontSize:"12px",fontWeight:700,color:D.fullscreenExits>0?"#fbbf24":"#64748b"},children:D.fullscreenExits})]}),D.violationCount>0&&e.jsxs("div",{style:{marginTop:"4px",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:700,background:"rgba(239,68,68,0.1)",color:"#fca5a5",border:"1px solid rgba(239,68,68,0.2)",display:"flex",alignItems:"center",gap:"4px",justifyContent:"center"},children:[e.jsx(he,{size:10})," ",D.violationCount," Violations"]})]})]})]}),e.jsx("div",{style:{flex:1,overflow:"auto",height:"100vh"},children:e.jsxs("div",{style:{padding:"12px 20px",paddingBottom:"80px"},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:700,color:"#f1f5f9"},children:h.test_title||h.title||"Skill Test"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[!o&&e.jsxs("button",{onClick:F,style:{padding:"6px 12px",background:"rgba(245,158,11,0.15)",border:"1px solid rgba(245,158,11,0.3)",borderRadius:"8px",cursor:"pointer",fontSize:"11px",color:"#fbbf24",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Gt,{size:13})," Re-enter Fullscreen"]}),e.jsx("button",{onClick:ne,style:{padding:"6px 14px",background:"#334155",border:"1px solid #475569",borderRadius:"8px",cursor:"pointer",fontSize:"12px",color:"#94a3b8"},children:"â† Exit Test"})]})]}),e.jsx("div",{style:{display:"flex",gap:"4px",marginBottom:"8px"},children:j.map((H,ye)=>{const ae=h[`${H}_status`]||(H==="interview"?h.interview_status:"pending");let we="#334155";return ae==="completed"||ae==="passed"?we="#22c55e":ae==="failed"?we="#ef4444":ae==="in_progress"?we="#f59e0b":ye===P&&(we="#3b82f6"),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"3px"},children:[e.jsx("div",{style:{width:"100%",height:"5px",borderRadius:"3px",background:we}}),e.jsx("span",{style:{fontSize:"10px",fontWeight:600,textTransform:"uppercase",color:ye===P?"#60a5fa":"#64748b"},children:H==="mcq"?"MCQ":H.charAt(0).toUpperCase()+H.slice(1)})]},H)})}),h.proctoring_enabled!==!1&&!d&&e.jsxs("div",{style:{display:"flex",gap:"10px",padding:"8px 14px",background:"#1e293b",borderRadius:"8px",border:"1px solid #334155",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:600},children:[e.jsx(gt,{size:13,color:"#8b5cf6"}),e.jsx("span",{style:{color:"#94a3b8"},children:"Proctoring:"})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",marginLeft:"auto"},children:[e.jsxs("div",{style:{fontSize:"10px",color:"#64748b",display:"flex",alignItems:"center",gap:"3px",background:"#0f172a",padding:"3px 7px",borderRadius:"6px",border:"1px solid #334155"},children:[e.jsx(Rs,{size:9})," Tabs: ",e.jsx("span",{style:{color:D.tabSwitchCount>0?"#fbbf24":"#94a3b8"},children:D.tabSwitchCount})]}),e.jsxs("div",{style:{fontSize:"10px",color:"#64748b",display:"flex",alignItems:"center",gap:"3px",background:"#0f172a",padding:"3px 7px",borderRadius:"6px",border:"1px solid #334155"},children:[e.jsx(Is,{size:9})," Phone: ",e.jsx("span",{style:{color:D.phoneDetections>0?"#fbbf24":"#94a3b8"},children:D.phoneDetections})]}),e.jsxs("div",{style:{fontSize:"10px",color:"#64748b",display:"flex",alignItems:"center",gap:"3px",background:"#0f172a",padding:"3px 7px",borderRadius:"6px",border:"1px solid #334155"},children:[e.jsx(Gt,{size:9})," FS: ",e.jsx("span",{style:{color:D.fullscreenExits>0?"#fbbf24":"#94a3b8"},children:D.fullscreenExits})]})]})]})]}),m==="mcq"&&e.jsx(pi,{attemptId:x,attemptData:h,onComplete:H=>N(),onFailed:()=>{W(x),p("report")}}),m==="coding"&&e.jsx(xi,{attemptId:x,attemptData:h,onComplete:H=>N(),onFailed:()=>{W(x),p("report")}}),m==="sql"&&e.jsx(gi,{attemptId:x,attemptData:h,onComplete:H=>N(),onFailed:()=>{W(x),p("report")}}),m==="interview"&&e.jsx(mi,{attemptId:x,attemptData:h,onComplete:H=>N(),onFailed:()=>{W(x),p("report")}})]})}),re&&e.jsxs("div",{style:{position:"fixed",top:"24px",left:"50%",transform:"translateX(-50%)",zIndex:1e4,minWidth:"320px",maxWidth:"400px",background:re.severity==="high"?"#ef4444":"#f59e0b",color:"white",padding:"20px",borderRadius:"16px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",animation:"slideIn 0.3s ease-out",display:"flex",gap:"16px",alignItems:"flex-start"},children:[e.jsx("style",{children:`
                            @keyframes slideIn { from { transform: translate(-50%, -40px); opacity: 0; } to { transform: translate(-50%, 0); opacity: 1; } }
                        `}),e.jsx(he,{size:24,style:{marginTop:"2px"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:800,fontSize:"18px",marginBottom:"4px"},children:re.title}),e.jsx("div",{style:{fontSize:"14px",opacity:.9,lineHeight:"1.4"},children:re.message})]})]})]})}return e.jsxs("div",{style:{padding:"24px",maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #8b5cf6, #6d28d9)"},children:e.jsx(Me,{size:22,color:"white"})}),e.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:800,color:"#f1f5f9"},children:"Skill Assessments"})]}),B&&e.jsxs("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",color:"#fca5a5",fontSize:"13px"},children:[e.jsx(he,{size:16,style:{verticalAlign:"middle",marginRight:"6px"}}),B]}),f?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Loading available tests..."}):r.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#94a3b8"},children:[e.jsx(Me,{size:48,style:{marginBottom:"12px",opacity:.5}}),e.jsx("p",{style:{fontSize:"16px",color:"#e2e8f0"},children:"No skill tests available yet"}),e.jsx("p",{style:{fontSize:"13px"},children:"Tests will appear here when your admin creates them"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:r.map(j=>{j.my_attempts?.[0];const P=j.my_attempts?.some(ae=>ae.overall_status==="completed"),H=j.my_attempts?.some(ae=>ae.overall_status==="in_progress"),ye=j.my_attempts?.find(ae=>ae.overall_status==="in_progress");return e.jsx("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"box-shadow 0.2s"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{margin:"0 0 6px",fontSize:"17px",fontWeight:700,color:"#f1f5f9"},children:j.title}),j.description&&e.jsx("p",{style:{margin:"0 0 10px",color:"#94a3b8",fontSize:"13px"},children:j.description}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",marginBottom:"10px"},children:(j.skills&&Array.isArray(j.skills)?j.skills:[]).map(ae=>e.jsx("span",{style:{padding:"2px 8px",background:"rgba(139,92,246,0.15)",color:"#a78bfa",borderRadius:"12px",fontSize:"11px",border:"1px solid rgba(139,92,246,0.25)"},children:ae},ae))}),e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"#94a3b8",flexWrap:"wrap"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ae,{size:13})," MCQ: ",j.mcq_count," | Coding: ",j.coding_count," | SQL: ",j.sql_count," | Interview: ",j.interview_count]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(He,{size:13})," ",j.mcq_duration_minutes,"min MCQ"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Rr,{size:13})," ",j.attempts_used||0,"/",j.attempt_limit," attempts"]})]}),j.my_attempts&&j.my_attempts.length>0&&e.jsxs("div",{style:{marginTop:"10px",padding:"8px 12px",background:"#0f172a",borderRadius:"8px"},children:[e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#e2e8f0"},children:"Previous Attempts:"}),e.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"4px",flexWrap:"wrap"},children:j.my_attempts.map(ae=>e.jsxs("button",{onClick:()=>{ae.overall_status==="in_progress"?Ne(ae.id):b(ae.id)},style:{padding:"4px 10px",borderRadius:"16px",fontSize:"11px",cursor:"pointer",border:"none",fontWeight:600,background:ae.overall_status==="completed"?"rgba(16,185,129,0.15)":ae.overall_status==="failed"?"rgba(239,68,68,0.15)":"rgba(245,158,11,0.15)",color:ae.overall_status==="completed"?"#34d399":ae.overall_status==="failed"?"#fca5a5":"#fbbf24"},children:["#",ae.attempt_number,": ",ae.overall_status==="in_progress"?`In Progress (${ae.current_stage})`:ae.overall_status,ae.overall_status!=="in_progress"&&` - MCQ: ${Math.round(ae.mcq_score)}%`]},ae.id))})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginLeft:"16px"},children:[H&&e.jsxs("button",{onClick:()=>Ne(ye.id),style:{padding:"10px 20px",background:"#f59e0b",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},children:[e.jsx(Ze,{size:16})," Resume"]}),j.can_attempt&&e.jsxs("button",{onClick:()=>Ie(j.id),style:{padding:"10px 20px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:700,fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},children:[e.jsx(Us,{size:16})," ",j.attempts_used>0?"Retry":"Start Test"]}),!j.can_attempt&&!H&&e.jsx("span",{style:{fontSize:"12px",color:"#9ca3af",fontStyle:"italic"},children:P?"âœ“ Completed":"No attempts left"})]})]})},j.id)})})]})}const hi="http://localhost:3000/api",fi=({user:t})=>{const{theme:r}=s.useContext(er),[c,f]=s.useState([]),[a,x]=s.useState(!0),[l,h]=s.useState(null),[i,m]=s.useState(null),[p,B]=s.useState(!1),[S,o]=s.useState(null),T=localStorage.getItem("authToken");s.useEffect(()=>{t?.id&&(x(!0),Q.get(`${hi}/submissions?studentId=${t.id}`).then(A=>{const g=Array.isArray(A.data)?A.data:A.data?.data||[];f(g.filter(n=>!n.isMLTask))}).catch(()=>o("Failed to load submissions.")).finally(()=>x(!1)))},[t?.id]);const d=A=>{h(A),m(null),o(null)},u=async()=>{if(l){B(!0),o(null);try{const A=await fetch("/api/plagiarism/check",{method:"POST",headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"},body:JSON.stringify({submissionId:l.id,code:l.code})});if(A.ok){const g=await A.json();m({isPlagiarized:g.verdict==="PLAGIARISM_DETECTED"||g.isPlagiarized||!1,isSuspicious:g.verdict==="SUSPICIOUS",similarityScore:g.similarity??g.similarityScore??0,matches:(g.matches||[]).map(n=>({studentName:n.student_name||n.student_email||"Unknown Student",studentEmail:n.student_email||"",percentage:n.similarity??n.percentage??g.similarity??0}))})}else{const g=await A.json().catch(()=>({}));o(g.error||"Plagiarism check failed. Please try again.")}}catch(A){console.error("Error checking plagiarism:",A),o("An error occurred while checking plagiarism.")}finally{B(!1)}}},y=A=>A?new Date(A).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"";return e.jsxs("div",{className:`plagiarism-checker-container ${r}`,children:[e.jsxs("div",{className:"checker-header",children:[e.jsxs("h2",{children:[e.jsx(he,{size:22}),"Plagiarism Check"]}),e.jsx("p",{children:"Select one of your code submissions below to run a plagiarism analysis."})]}),e.jsxs("div",{className:"plagiarism-layout",children:[e.jsxs("div",{className:"submission-select-panel",children:[e.jsx("h4",{style:{margin:"0 0 0.75rem",fontSize:"0.9rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Your Submissions"}),a?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-secondary)",padding:"1rem 0"},children:[e.jsx(Ts,{size:16,className:"spinning"})," Loading..."]}):c.length===0?e.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"No code submissions found."}):e.jsx("ul",{className:"submission-list",children:c.map(A=>e.jsxs("li",{className:`submission-item ${l?.id===A.id?"active":""}`,onClick:()=>d(A),children:[e.jsx(Ir,{size:16,style:{flexShrink:0}}),e.jsxs("div",{className:"submission-item-info",children:[e.jsx("span",{className:"submission-item-title",children:A.itemTitle||A.problemTitle||`Submission #${A.id}`}),e.jsxs("span",{className:"submission-item-meta",children:[A.language," â€¢ ",y(A.submittedAt)]})]}),e.jsx(zt,{size:14,style:{flexShrink:0,opacity:.4}})]},A.id))})]}),e.jsx("div",{className:"checker-panel",children:l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"selected-submission-info",children:[e.jsx("h4",{children:l.itemTitle||l.problemTitle||`Submission #${l.id}`}),e.jsx("span",{className:"lang-badge",children:l.language}),e.jsxs("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginLeft:"0.5rem"},children:["Submitted ",y(l.submittedAt)]})]}),e.jsxs("pre",{className:"code-preview",children:[l.code?.slice(0,600),l.code?.length>600?`
...`:""]}),S&&e.jsx("div",{className:"plagiarism-error",children:S}),i?e.jsxs("div",{className:`plagiarism-result ${i.isPlagiarized?"warning":i.isSuspicious?"suspicious":"safe"}`,children:[e.jsx("div",{className:"result-icon",children:i.isPlagiarized?e.jsx(he,{size:32}):i.isSuspicious?e.jsx(he,{size:32}):e.jsx(ge,{size:32})}),e.jsxs("div",{className:"result-content",children:[e.jsx("h4",{children:i.isPlagiarized?"Plagiarism Detected":i.isSuspicious?"Suspicious Similarity":"No Plagiarism Detected"}),e.jsxs("div",{className:"similarity-score",children:["Similarity Score: ",e.jsxs("strong",{children:[i.similarityScore,"%"]})]}),i.matches?.length>0&&e.jsxs("div",{className:"matches-section",children:[e.jsx("div",{className:"matches-title",children:"Matching Sources:"}),i.matches.map((A,g)=>e.jsxs("div",{className:"match-item",children:[e.jsxs("div",{className:"match-header",children:[e.jsx("span",{className:"match-source",children:A.studentName}),e.jsxs("span",{className:"match-percentage",children:[A.percentage,"% match"]})]}),e.jsx("div",{className:"match-file",children:A.studentEmail?`Student Â· ${A.studentEmail}`:"Similar submission for the same problem"})]},g))]})]}),e.jsx("button",{className:"recheck-btn",onClick:()=>m(null),children:"Recheck"})]}):e.jsx("button",{className:"check-btn",onClick:u,disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx(Ts,{size:16,className:"spinning"}),"Checking..."]}):"Run Plagiarism Check"})]}):e.jsxs("div",{className:"no-selection-msg",children:[e.jsx(he,{size:40,style:{opacity:.3,marginBottom:"0.75rem"}}),e.jsx("p",{children:"Select a submission from the list to check for plagiarism."})]})})]})]})},bi=({user:t})=>{const{theme:r}=s.useContext(er),[c,f]=s.useState({}),[a,x]=s.useState(null),[l,h]=s.useState(new Date),[i,m]=s.useState(!0),p=localStorage.getItem("authToken"),B=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],S=["January","February","March","April","May","June","July","August","September","October","November","December"],o=t?.mentorId||t?.mentor_id;s.useEffect(()=>{if(!o){m(!1);return}T()},[o,l]);const T=async()=>{m(!0);try{const n=await fetch(`/api/users/${o}`,{headers:{Authorization:`Bearer ${p}`}});if(n.ok){const R=await n.json();x(R.user||R)}const z=await fetch(`/api/users/${o}/availability`,{headers:{Authorization:`Bearer ${p}`}});if(z.ok){const R=await z.json();f(R.slots||{})}}catch(n){console.error("Error loading mentor availability:",n)}finally{m(!1)}},d=n=>new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),u=n=>new Date(n.getFullYear(),n.getMonth(),1).getDay(),y=()=>{const n=d(l),z=u(l),R=[];for(let q=0;q<z;q++)R.push(null);for(let q=1;q<=n;q++)R.push(new Date(l.getFullYear(),l.getMonth(),q));return R},A=new Date().toISOString().split("T")[0],g=y();return o?e.jsxs("div",{className:`availability-calendar ${r}`,children:[e.jsxs("div",{className:"calendar-header",children:[e.jsxs("h2",{children:[e.jsx(rs,{size:24}),"Mentor Availability"]}),e.jsx("p",{children:"View your mentor's available slots for sessions"})]}),a&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"10px 16px",borderRadius:10,marginBottom:16,background:r==="dark"?"rgba(79,70,229,0.12)":"rgba(79,70,229,0.07)",border:"1px solid rgba(79,70,229,0.25)",fontSize:14},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:"linear-gradient(135deg,#4f46e5,#7c3aed)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:700,fontSize:15,flexShrink:0},children:(a.name||"M")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:a.name||"Your Mentor"}),e.jsx("div",{style:{fontSize:12,opacity:.55},children:a.email||""})]}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:5,fontSize:12,opacity:.55},children:[e.jsx(Ar,{size:13}),"Read-only"]})]}),e.jsxs("div",{className:"calendar-nav",children:[e.jsx("button",{onClick:()=>h(new Date(l.getFullYear(),l.getMonth()-1)),children:"â† Previous"}),e.jsxs("h3",{children:[S[l.getMonth()]," ",l.getFullYear()]}),e.jsx("button",{onClick:()=>h(new Date(l.getFullYear(),l.getMonth()+1)),children:"Next â†’"})]}),i?e.jsx("div",{style:{textAlign:"center",padding:"40px 0",opacity:.5},children:"Loading availabilityâ€¦"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"calendar-grid",children:[e.jsx("div",{className:"weekdays",children:B.map(n=>e.jsx("div",{className:"weekday",children:n},n))}),e.jsx("div",{className:"dates",children:g.map((n,z)=>{const R=n?n.toISOString().split("T")[0]:null,q=R&&c[R],U=R&&R<A;return e.jsx("div",{className:`date-cell ${n?"active":"empty"} ${q?"available":""}`,style:{cursor:"default",opacity:U?.4:1},title:q?"Mentor is available":n?"Not available":"",children:n?.getDate()},z)})})]}),e.jsxs("div",{className:"calendar-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-box empty"}),e.jsx("span",{children:"Not Available"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-box available"}),e.jsx("span",{children:"Mentor Available â€” Book a session!"})]})]}),Object.values(c).filter(Boolean).length===0&&e.jsx("p",{style:{textAlign:"center",opacity:.45,fontSize:13,marginTop:12},children:"Your mentor hasn't marked any available slots yet."})]})]}):e.jsxs("div",{className:`availability-calendar ${r}`,style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx(Tr,{size:48,style:{opacity:.3,marginBottom:12}}),e.jsx("h3",{style:{opacity:.6,fontWeight:500},children:"No mentor assigned yet"}),e.jsx("p",{style:{opacity:.4,fontSize:14},children:"Once a mentor is allocated to you, their availability will appear here."})]})};function yi(){const[t,r]=s.useState("all"),c=[{id:1,category:"learning",title:"Advanced Search",description:"Search problems by title, difficulty, and tags with advanced filtering",icon:Gs,path:"/student/search",color:"#3b82f6"},{id:2,category:"learning",title:"AI Recommendations",description:"Get personalized problem recommendations based on your skills",icon:Ct,path:"/student/recommendations",color:"#8b5cf6"},{id:3,category:"learning",title:"AI Test Case Generator",description:"Auto-generate test cases for your coding problems",icon:Ve,path:"/student/test-generator",color:"#06b6d4"},{id:4,category:"review",title:"Code Reviews",description:"Detailed code reviews with line-by-line feedback and comments",icon:Lt,path:"/student/code-reviews",color:"#10b981"},{id:5,category:"review",title:"Plagiarism Detection",description:"Check your submissions for plagiarism and code similarities",icon:he,path:"/student/plagiarism",color:"#f59e0b"},{id:6,category:"collaboration",title:"Mentor Matching",description:"Find and connect with the perfect mentor for your goals",icon:Vs,path:"/student/mentor-matching",color:"#ec4899"},{id:7,category:"collaboration",title:"Direct Messaging",description:"Real-time direct messaging with mentors and students",icon:is,path:"/student/messaging",color:"#14b8a6"},{id:8,category:"collaboration",title:"Availability Calendar",description:"Set your availability and schedule sessions with mentors",icon:He,path:"/student/availability",color:"#f97316"},{id:9,category:"analytics",title:"Skill Badges",description:"Earn and showcase skill badges for your achievements",icon:Qe,path:"/student/badges",color:"#6366f1"},{id:10,category:"analytics",title:"Performance Analytics",description:"Detailed analytics dashboard tracking your progress",icon:Ot,path:"/student/analytics",color:"#22c55e"},{id:11,category:"analytics",title:"Leaderboards",description:"Compete with peers and view global rankings",icon:lt,path:"/student/leaderboard",color:"#f1941f"},{id:12,category:"analytics",title:"Export Reports",description:"Download comprehensive reports in PDF format",icon:Ks,path:"/student/reports",color:"#8b5cf6"},{id:13,category:"learning",title:"Skill Tests",description:"Test your specific skills with targeted assessments",icon:Ae,path:"/student/skill-tests",color:"#3b82f6"},{id:14,category:"learning",title:"Aptitude Tests",description:"Comprehensive aptitude assessments for career readiness",icon:Me,path:"/student/aptitude",color:"#06b6d4"},{id:15,category:"learning",title:"Global Tests",description:"Complete coding tests with proctoring and time limits",icon:Nt,path:"/student/global-tests",color:"#10b981"},{id:16,category:"analytics",title:"Settings",description:"Customize your profile, preferences, and notifications",icon:Wr,path:"/student/settings",color:"#94a3b8"}],f=[{id:"all",label:"All Features"},{id:"learning",label:"Learning"},{id:"review",label:"Reviews"},{id:"collaboration",label:"Collaboration"},{id:"analytics",label:"Analytics"}],a=t==="all"?c:c.filter(x=>x.category===t);return e.jsxs("div",{style:pe.container,children:[e.jsxs("div",{style:pe.header,children:[e.jsx("h1",{style:pe.title,children:"ðŸš€ Mentor Hub - 16+ Features"}),e.jsx("p",{style:pe.subtitle,children:"Discover all available features on your personalized dashboard"})]}),e.jsx("div",{style:pe.filterContainer,children:f.map(x=>e.jsx("button",{onClick:()=>r(x.id),style:{...pe.filterBtn,...t===x.id?pe.filterBtnActive:{}},children:x.label},x.id))}),e.jsx("div",{style:pe.grid,children:a.map((x,l)=>{const h=x.icon;return e.jsx($t,{to:x.path,style:{textDecoration:"none"},children:e.jsxs("div",{style:pe.card,onMouseEnter:i=>{i.currentTarget.style.transform="translateY(-8px)",i.currentTarget.style.boxShadow="0 20px 40px rgba(0,0,0,0.15)"},onMouseLeave:i=>{i.currentTarget.style.transform="translateY(0)",i.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{...pe.iconContainer,backgroundColor:x.color+"15",borderColor:x.color+"40"},children:e.jsx(h,{size:32,style:{color:x.color}})}),e.jsx("h3",{style:pe.cardTitle,children:x.title}),e.jsx("p",{style:pe.cardDescription,children:x.description}),e.jsxs("div",{style:pe.cardFooter,children:[e.jsx("span",{style:pe.badge,children:x.category}),e.jsx("span",{style:pe.arrow,children:"â†’"})]})]})},x.id)})}),e.jsxs("div",{style:pe.quickAccessSection,children:[e.jsx("h2",{style:pe.quickAccessTitle,children:"ðŸ“Œ Quick Access"}),e.jsxs("div",{style:pe.quickAccessGrid,children:[e.jsx($t,{to:"/student/dashboard",style:pe.quickLink,children:e.jsx("span",{children:"ðŸ“Š Dashboard"})}),e.jsx($t,{to:"/student/tasks",style:pe.quickLink,children:e.jsx("span",{children:"ðŸ“ Tasks"})}),e.jsx($t,{to:"/student/assignments",style:pe.quickLink,children:e.jsx("span",{children:"ðŸ’» Assignments"})}),e.jsx($t,{to:"/student/submissions",style:pe.quickLink,children:e.jsx("span",{children:"âœ… Submissions"})})]})]}),e.jsxs("div",{style:pe.statsSection,children:[e.jsxs("div",{style:pe.stat,children:[e.jsx("div",{style:pe.statNumber,children:"16+"}),e.jsx("div",{style:pe.statLabel,children:"Features"})]}),e.jsxs("div",{style:pe.stat,children:[e.jsx("div",{style:pe.statNumber,children:"100%"}),e.jsx("div",{style:pe.statLabel,children:"Functional"})]}),e.jsxs("div",{style:pe.stat,children:[e.jsx("div",{style:pe.statNumber,children:"24/7"}),e.jsx("div",{style:pe.statLabel,children:"Available"})]}),e.jsxs("div",{style:pe.stat,children:[e.jsx("div",{style:pe.statNumber,children:"âˆž"}),e.jsx("div",{style:pe.statLabel,children:"Possibilities"})]})]})]})}const pe={container:{maxWidth:"1400px",margin:"0 auto",padding:"40px 20px",backgroundColor:"#f8fafc",minHeight:"100vh"},header:{textAlign:"center",marginBottom:"50px"},title:{fontSize:"2.5rem",fontWeight:"bold",color:"#1e293b",marginBottom:"10px"},subtitle:{fontSize:"1.1rem",color:"#64748b",marginBottom:"20px"},filterContainer:{display:"flex",gap:"10px",justifyContent:"center",marginBottom:"40px",flexWrap:"wrap"},filterBtn:{padding:"8px 16px",border:"2px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#fff",cursor:"pointer",fontWeight:"500",transition:"all 0.3s ease",color:"#64748b"},filterBtnActive:{backgroundColor:"#3b82f6",color:"#fff",borderColor:"#3b82f6"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"24px",marginBottom:"50px"},card:{backgroundColor:"#fff",borderRadius:"12px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease",cursor:"pointer",display:"flex",flexDirection:"column"},iconContainer:{width:"56px",height:"56px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",border:"2px solid"},cardTitle:{fontSize:"1.2rem",fontWeight:"bold",color:"#1e293b",marginBottom:"8px"},cardDescription:{fontSize:"0.95rem",color:"#64748b",marginBottom:"16px",flex:1},cardFooter:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"12px",borderTop:"1px solid #e2e8f0"},badge:{fontSize:"0.75rem",padding:"4px 8px",backgroundColor:"#f1f5f9",borderRadius:"4px",color:"#64748b",textTransform:"capitalize",fontWeight:"bold"},arrow:{color:"#3b82f6",fontWeight:"bold",fontSize:"1.2rem"},quickAccessSection:{backgroundColor:"#fff",borderRadius:"12px",padding:"30px",marginBottom:"40px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},quickAccessTitle:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b",marginBottom:"20px"},quickAccessGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px"},quickLink:{padding:"16px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",textDecoration:"none",borderRadius:"8px",textAlign:"center",fontWeight:"500",transition:"all 0.3s ease",cursor:"pointer","&:hover":{transform:"translateY(-4px)"}},statsSection:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"20px",marginTop:"40px"},stat:{backgroundColor:"#fff",borderRadius:"12px",padding:"24px",textAlign:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},statNumber:{fontSize:"2.5rem",fontWeight:"bold",background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"8px"},statLabel:{fontSize:"1rem",color:"#64748b",fontWeight:"500"}},vs="http://localhost:3000/api";function ji({limit:t=100}){const[r,c]=s.useState([]),[f,a]=s.useState(!0),[x,l]=s.useState(null);s.useEffect(()=>{h()},[t]);const h=async()=>{try{a(!0);const p=await Q.get(`${vs}/gamification/leaderboard?limit=${t}`);c(p.data.leaderboard),l(null)}catch(p){l(p.response?.data?.error||"Failed to fetch leaderboard"),console.error("Error fetching leaderboard:",p)}finally{a(!1)}},i=p=>{switch(p){case 1:return"ðŸ¥‡";case 2:return"ðŸ¥ˆ";case 3:return"ðŸ¥‰";default:return p}},m=p=>p>=10?"#FFD700":p>=5?"#C0C0C0":"#CD7F32";return f?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("div",{style:{fontSize:"1.5rem",color:"var(--text-muted)"},children:"Loading leaderboard..."})}):x?e.jsxs("div",{style:{padding:"2rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",color:"#ef4444"},children:["Error: ",x]}):!r||r.length===0?e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"2rem"},children:[e.jsx(lt,{size:24,style:{color:"#f59e0b"}}),e.jsx("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Leaderboard"})]}),e.jsxs("div",{style:{padding:"3rem 2rem",textAlign:"center",background:"var(--bg-card)",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[e.jsx(lt,{size:48,style:{color:"var(--text-muted)",marginBottom:"1rem",opacity:.5}}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"1.1rem",margin:0},children:"No leaderboard entries yet"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem",marginTop:"0.5rem"},children:"Start solving problems and completing tests to earn points!"})]})]}):e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"2rem"},children:[e.jsx(lt,{size:24,style:{color:"#f59e0b"}}),e.jsx("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Leaderboard"})]}),e.jsx("div",{style:{overflowX:"auto",borderRadius:"12px",border:"1px solid var(--border-color)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"var(--bg-card)"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"linear-gradient(135deg, var(--bg-dark), var(--bg-secondary))",borderBottom:"2px solid var(--border-color)"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:700,color:"var(--primary)"},children:"Rank"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:700,color:"var(--primary)"},children:"Student"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:700,color:"var(--primary)"},children:"Level"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:700,color:"var(--primary)"},children:"Points"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:700,color:"var(--primary)"},children:"Streak"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:700,color:"var(--primary)"},children:"Badges"})]})}),e.jsx("tbody",{children:r.map((p,B)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)",backgroundColor:p.rank<=3?"rgba(245, 158, 11, 0.05)":"transparent",transition:"all 0.2s"},children:[e.jsx("td",{style:{padding:"1rem",fontWeight:700,fontSize:"1.2rem",color:m(p.level)},children:i(p.rank)}),e.jsx("td",{style:{padding:"1rem",fontWeight:600},children:p.name||p.email}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("span",{style:{background:`linear-gradient(135deg, ${m(p.level)}, ${m(p.level)}aa)`,color:"white",padding:"0.4rem 0.8rem",borderRadius:"20px",fontWeight:700,fontSize:"0.9rem"},children:["Lvl ",p.level]})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center",fontWeight:700,color:"var(--primary)"},children:p.total_points.toLocaleString()}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.3rem",background:"rgba(239, 68, 68, 0.1)",padding:"0.4rem 0.8rem",borderRadius:"20px",color:"#ef4444",fontWeight:700},children:[e.jsx(qt,{size:14}),p.current_streak||0]})}),e.jsxs("td",{style:{padding:"1rem",textAlign:"center",fontWeight:700},children:[p.badge_count||0," ðŸ…"]})]},p.student_id))})]})})]})}function vi({studentId:t}){const[r,c]=s.useState([]),[f,a]=s.useState(0),[x,l]=s.useState(!0);s.useEffect(()=>{h()},[t]);const h=async()=>{try{const i=localStorage.getItem("authToken"),m=await Q.get(`${vs}/users/${t}/badges`,{headers:{Authorization:`Bearer ${i}`}}),p=m.data.unlocked||[];a(m.data.totalSolved||0);const B=p.map(S=>({badge_icon:S.icon,badge_name:S.name,requirement:S.requirement,earned_at:new Date().toISOString()}));c(B)}catch(i){console.error("Error fetching achievements:",i),c([])}finally{l(!1)}};return x?e.jsx("div",{children:"Loading achievements..."}):!r||r.length===0?e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"1.5rem"},children:[e.jsx(Qe,{size:20,style:{color:"#f59e0b"}}),"Skill Badges"]}),e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ðŸŽ¯"}),e.jsx("p",{style:{marginBottom:"0.5rem",fontWeight:600},children:"No badges unlocked yet"}),e.jsxs("p",{style:{fontSize:"0.85rem"},children:["You've solved ",e.jsx("strong",{style:{color:"var(--primary)"},children:f})," problem",f!==1?"s":""," so far. Solve 1 problem with score â‰¥ 70 to earn your first badge!"]})]})]}):e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"1.5rem"},children:[e.jsx(Qe,{size:20,style:{color:"#f59e0b"}}),"Skill Badges (",r.length," unlocked)"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"1rem"},children:r.slice(0,8).map((i,m)=>e.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"var(--bg-card)",borderRadius:"12px",border:"2px solid var(--border-color)",transition:"all 0.2s"},children:[e.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:i.badge_icon||"ðŸ…"}),e.jsx("div",{style:{fontSize:"0.85rem",fontWeight:600,color:"var(--text-main)",marginBottom:"0.3rem"},children:i.badge_name}),e.jsx("div",{style:{fontSize:"0.72rem",color:"var(--text-muted)"},children:i.requirement||"âœ“ Unlocked"})]},m))})]})}function Si({studentId:t}){const[r,c]=s.useState(null),[f,a]=s.useState(!0);s.useEffect(()=>{x()},[t]);const x=async()=>{try{const h=await Q.get(`${vs}/gamification/student/${t}`);c(h.data)}catch(h){console.error("Error fetching profile:",h),c({level:1,total_points:0,current_xp:0,next_level_xp:1e3,current_streak:0,longest_streak:0,badges:[]})}finally{a(!1)}};if(f)return e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading profile..."});if(!r)return e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No profile data available"});const l=r.next_level_xp?r.current_xp/r.next_level_xp*100:0;return e.jsxs("div",{style:{background:"linear-gradient(135deg, var(--primary), #6366f1)",color:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 8px 20px rgba(59, 130, 246, 0.3)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:["Level ",r.level]}),e.jsxs("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:[r.total_points.toLocaleString()," Points"]})]}),e.jsx("div",{style:{textAlign:"right",fontSize:"2rem"},children:"â­"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.3rem",fontSize:"0.85rem"},children:[e.jsx("span",{children:"Next Level Progress"}),e.jsxs("span",{children:[r.current_xp," / ",r.next_level_xp," XP"]})]}),e.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(255,255,255,0.2)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${l}%`,height:"100%",background:"rgba(255,255,255,0.8)",transition:"width 0.3s"}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginTop:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Current Streak"}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700},children:[r.current_streak||0," ðŸ”¥"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Longest Streak"}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700},children:[r.longest_streak||0," ðŸ†"]})]})]}),r.badges&&r.badges.length>0&&e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginBottom:"0.5rem"},children:["Badges (",r.badges.length,")"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[r.badges.slice(0,5).map((h,i)=>e.jsx("span",{title:h.description,style:{fontSize:"1.5rem",cursor:"pointer",opacity:.9,transition:"all 0.2s"},children:h.icon_url||"ðŸ…"},i)),r.badges.length>5&&e.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.3rem 0.6rem",borderRadius:"12px",fontSize:"0.8rem"},children:["+",r.badges.length-5]})]})]})]})}const wi="http://localhost:3000/api";function ki({studentId:t}){const[r,c]=s.useState(null),[f,a]=s.useState(!0);s.useEffect(()=>{x()},[t]);const x=async()=>{try{const m=await Q.get(`${wi}/analytics/student/${t}`);c(m.data)}catch(m){console.error("Error fetching analytics:",m),c({risk_score:0,at_risk:!1,problem_completion_rate:0,average_test_score:0,prediction_confidence:0,total_problems:0,total_tests:0})}finally{a(!1)}};if(f)return e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"var(--text-muted)"},children:"Loading risk data..."});if(!r)return e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"var(--text-muted)"},children:"No analytics data"});const l=m=>m>75?"#ef4444":m>50?"#f59e0b":m>25?"#eab308":"#10b981",h=m=>m>75?"CRITICAL":m>50?"HIGH":m>25?"MEDIUM":"LOW",i=Number(r?.risk_score)||0;return e.jsxs("div",{style:{position:"relative",background:`linear-gradient(135deg, ${l(i)}22, ${l(i)}11)`,border:`2px solid ${l(i)}`,borderRadius:"12px",padding:"1.5rem",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"100px",height:"100px",background:`${l(i)}11`,borderRadius:"50%",transform:"translate(30%, -30%)"}}),e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i>50?e.jsx(he,{size:20,color:l(i)}):e.jsx(Qe,{size:20,color:l(i)}),e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Risk Assessment"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("span",{style:{fontSize:"2.5rem",fontWeight:900,color:l(i)},children:i.toFixed(1)}),e.jsx("span",{style:{fontSize:"1rem",color:"var(--text-muted)"},children:"/ 100"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("span",{style:{background:l(i),color:"white",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:700},children:h(i)}),r.at_risk&&e.jsx("span",{style:{background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:700},children:"âš ï¸ At Risk"})]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)",lineHeight:"1.6"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Completion Rate:"})," ",(Number(r?.problem_completion_rate)||0).toFixed(1),"%"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Test Score:"})," ",(Number(r?.average_test_score)||0).toFixed(1),"%"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Confidence:"})," ",((Number(r?.prediction_confidence)||0)*100).toFixed(0),"%"]})]})]})]})}const xe="http://localhost:3000/api",Pt={Python:{monacoLang:"python",ext:".py",defaultCode:`# Write your Python code here

def solution():
    pass

# Call your solution
solution()`},JavaScript:{monacoLang:"javascript",ext:".js",defaultCode:`// Write your JavaScript code here

function solution() {
    
}

// Call your solution
solution();`},Java:{monacoLang:"java",ext:".java",defaultCode:`// Write your Java code here

public class Solution {
    public static void main(String[] args) {
        // Your code here
    }
}`},C:{monacoLang:"c",ext:".c",defaultCode:`// Write your C code here
#include <stdio.h>

int main() {
    // Your code here
    return 0;
}`},"C++":{monacoLang:"cpp",ext:".cpp",defaultCode:`// Write your C++ code here
#include <iostream>
using namespace std;

int main() {
    // Your code here
    return 0;
}`},SQL:{monacoLang:"sql",ext:".sql",defaultCode:`-- Write your SQL query here
SELECT * FROM table_name;`}};function Ui(){const{user:t}=$r(),{t:r}=tr(),c=dr(),[f,a]=s.useState(""),[x,l]=s.useState(""),[h,i]=s.useState(null),[m,p]=s.useState(0);s.useEffect(()=>{const S=t?.id||t?.userId;if(!S)return;const o=async()=>{try{const d=await Q.get(`${xe}/messages/unread/${S}`);p(d.data.unreadCount||0)}catch{}};o();const T=setInterval(o,15e3);return()=>clearInterval(T)},[t]),s.useEffect(()=>{t?.id&&Q.get(`${xe}/analytics/student/${t.id}`).then(S=>{S.data.mentorInfo&&i(S.data.mentorInfo)}).catch(S=>console.error("Error fetching mentor info:",S))},[t?.id]),s.useEffect(()=>{switch(c.pathname.split("/").pop()){case"tasks":a(r("ml_tasks")),l(r("ml_tasks_subtitle"));break;case"assignments":a(r("coding_problems")),l(r("solve_coding_subtitle"));break;case"aptitude":a(r("aptitude_tests")),l(r("aptitude_subtitle"));break;case"global-tests":a(r("global_complete_tests")),l(r("global_tests_student_subtitle"));break;case"submissions":a(r("my_submissions")),l(r("submissions_subtitle"));break;case"analytics":a(r("my_analytics")),l(r("analytics_subtitle"));break;case"messaging":a("Messages"),l("Chat with your mentor");break;case"skill-tests":a("Skill Tests"),l("AI-powered skill assessments");break;case"skill-submissions":a("Skill Test Submissions"),l("View your skill test results & reports");break;default:a(r("dashboard")),l(r("welcome_back_name",{name:t?.name||""}))}},[c,t,r]);const B=[{path:"/student",label:r("dashboard"),icon:e.jsx(Er,{size:20})},{label:"Learning",icon:e.jsx(Ht,{size:20}),defaultExpanded:!1,children:[{path:"/student/tasks",label:r("ml_tasks"),icon:e.jsx(Ht,{size:20})},{path:"/student/assignments",label:r("coding_problems"),icon:e.jsx(De,{size:20})},{path:"/student/aptitude",label:r("aptitude_tests"),icon:e.jsx(Me,{size:20})},{path:"/student/global-tests",label:r("global_complete_tests"),icon:e.jsx(qe,{size:20})},{path:"/student/skill-tests",label:"Skill Tests",icon:e.jsx(Ae,{size:20})}]},{label:"Progress & Analytics",icon:e.jsx(Ot,{size:20}),defaultExpanded:!1,children:[{path:"/student/submissions",label:r("my_submissions"),icon:e.jsx(Je,{size:20})},{path:"/student/skill-submissions",label:"Skill Submissions",icon:e.jsx(Ae,{size:20})},{path:"/student/analytics",label:r("my_analytics"),icon:e.jsx(Ot,{size:20})},{path:"/student/leaderboard",label:"Leaderboard",icon:e.jsx(lt,{size:20})},{path:"/student/badges",label:"Skill Badges",icon:e.jsx(Qe,{size:20})},{path:"/student/reports",label:"Export Reports",icon:e.jsx(Ks,{size:20})}]},{label:"Review & Collaboration",icon:e.jsx(Lt,{size:20}),defaultExpanded:!1,children:[{path:"/student/code-reviews",label:"Code Reviews",icon:e.jsx(Lt,{size:20})},{path:"/student/plagiarism",label:"Plagiarism Check",icon:e.jsx(he,{size:20})},{path:"/student/messaging",label:"Direct Messages",icon:e.jsx(is,{size:20}),badge:m}]},{label:"My Mentor",icon:e.jsx(rs,{size:20}),defaultExpanded:!1,children:[{path:"/student/availability",label:"Mentor Availability",icon:e.jsx(rs,{size:20})}]}];return e.jsx(pr,{navItems:B,title:f,subtitle:x,mentorInfo:h,children:e.jsxs(cr,{children:[e.jsx(Ee,{path:"/",element:e.jsx(zi,{user:t})}),e.jsx(Ee,{path:"/tasks",element:e.jsx(Ci,{user:t})}),e.jsx(Ee,{path:"/assignments",element:e.jsx(Ti,{user:t})}),e.jsx(Ee,{path:"/aptitude",element:e.jsx(Bi,{user:t})}),e.jsx(Ee,{path:"/global-tests",element:e.jsx(Li,{user:t})}),e.jsx(Ee,{path:"/skill-tests",element:e.jsx(ui,{user:t})}),e.jsx(Ee,{path:"/skill-submissions",element:e.jsx(Pr,{user:t})}),e.jsx(Ee,{path:"/submissions",element:e.jsx(Wi,{user:t})}),e.jsx(Ee,{path:"/analytics",element:e.jsx(Di,{user:t})}),e.jsx(Ee,{path:"/leaderboard",element:e.jsx(ji,{limit:100})}),e.jsx(Ee,{path:"/badges",element:e.jsx(vi,{studentId:t?.id})}),e.jsx(Ee,{path:"/reports",element:e.jsx(xr,{user:t})}),e.jsx(Ee,{path:"/code-reviews",element:e.jsx($i,{user:t})}),e.jsx(Ee,{path:"/plagiarism",element:e.jsx(fi,{user:t})}),e.jsx(Ee,{path:"/messaging",element:e.jsx(gr,{currentUser:t})}),e.jsx(Ee,{path:"/availability",element:e.jsx(bi,{user:t})}),e.jsx(Ee,{path:"/features",element:e.jsx(yi,{})})]})})}function zi({user:t}){const[r,c]=s.useState(null),[f,a]=s.useState(!0),x=()=>{a(!0),Q.get(`${xe}/analytics/student/${t.id}`).then(u=>{c(u.data),a(!1)}).catch(u=>{console.error(u),a(!1)})};s.useEffect(()=>{x()},[t.id]);const l=u=>{const y=new Date(u),g=new Date-y,n=Math.floor(g/6e4),z=Math.floor(g/36e5),R=Math.floor(g/864e5);return n<1?"Just now":n<60?`${n}m ago`:z<24?`${z}h ago`:R<7?`${R}d ago`:y.toLocaleDateString()};if(f)return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:e.jsx("div",{className:"loading-spinner"})});if(!r)return e.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-muted)"},children:"Unable to load dashboard data"});const h=r.submissionTrends&&r.submissionTrends.length>0?r.submissionTrends:(()=>{const u=[];for(let y=6;y>=0;y--){const A=new Date;A.setDate(A.getDate()-y),u.push({date:A.toLocaleDateString("en-US",{month:"short",day:"numeric"}),count:0})}return u})(),i=[{name:"Tasks",completed:r.completedTasks,total:r.totalTasks},{name:"Coding",completed:r.completedProblems,total:r.totalProblems},{name:"Aptitude",completed:r.completedAptitude,total:r.totalAptitude}],m=[{name:"Tasks",value:r.completedTasks||0,color:"#3b82f6"},{name:"Code",value:r.completedProblems||0,color:"#10b981"},{name:"Aptitude",value:r.completedAptitude||0,color:"#a78bfa"},{name:"Remaining",value:Math.max(0,r.totalTasks-r.completedTasks+(r.totalProblems-r.completedProblems)+(r.totalAptitude-r.completedAptitude)),color:"rgba(100,116,139,0.2)"}].filter(u=>u.value>0),p=[{subject:"Task Score",A:r.avgTaskScore||0},{subject:"Code Score",A:r.avgProblemScore||0},{subject:"Tasks Done",A:r.totalTasks>0?Math.round(r.completedTasks/r.totalTasks*100):0},{subject:"Code Done",A:r.totalProblems>0?Math.round(r.completedProblems/r.totalProblems*100):0},{subject:"Aptitude",A:r.totalAptitude>0?Math.round(r.completedAptitude/r.totalAptitude*100):0}],B=r.completedTasks+r.completedProblems+r.completedAptitude,S=r.totalTasks+r.totalProblems+r.totalAptitude,o=S>0?Math.round(B/S*100):0,T=({pct:u,size:y=52,strokeWidth:A=5,color:g})=>{const n=(y-A)/2,z=2*Math.PI*n,R=z-Math.min(u,100)/100*z;return e.jsxs("svg",{width:y,height:y,style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:y/2,cy:y/2,r:n,fill:"none",stroke:"rgba(148,163,184,0.1)",strokeWidth:A}),e.jsx("circle",{cx:y/2,cy:y/2,r:n,fill:"none",stroke:g,strokeWidth:A,strokeDasharray:z,strokeDashoffset:R,strokeLinecap:"round",style:{transition:"stroke-dashoffset 1s ease"}})]})},d=({active:u,payload:y,label:A})=>u&&y&&y.length?e.jsxs("div",{className:"dash-tooltip",children:[e.jsx("div",{className:"dash-tooltip-label",children:A}),y.map((g,n)=>e.jsxs("div",{className:"dash-tooltip-value",style:{color:g.color||g.stroke||"#818cf8"},children:[g.name,": ",g.value]},n))]}):null;return e.jsxs("div",{className:"sdash",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:700},children:"Overview"}),e.jsxs("button",{onClick:x,className:"refresh-btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--text-main)",cursor:"pointer",fontSize:"0.85rem",transition:"all 0.2s"},children:[e.jsx(Xs,{size:16,className:f?"spin":""}),"Refresh"]})]}),e.jsx("div",{className:"sdash-stats",children:[{label:"Tasks",done:r.completedTasks,total:r.totalTasks,icon:e.jsx(Ht,{size:20}),color:"#3b82f6",gradient:"linear-gradient(135deg, #1e40af, #3b82f6)"},{label:"Problems",done:r.completedProblems,total:r.totalProblems,icon:e.jsx(De,{size:20}),color:"#10b981",gradient:"linear-gradient(135deg, #047857, #10b981)"},{label:"Aptitude",done:r.completedAptitude,total:r.totalAptitude,icon:e.jsx(Me,{size:20}),color:"#a78bfa",gradient:"linear-gradient(135deg, #6d28d9, #a78bfa)"},{label:"Task Score",done:r.avgTaskScore,total:100,icon:e.jsx(Qe,{size:20}),color:"#f472b6",gradient:"linear-gradient(135deg, #be185d, #f472b6)",suffix:"%"},{label:"Code Score",done:r.avgProblemScore,total:100,icon:e.jsx(Ae,{size:20}),color:"#fbbf24",gradient:"linear-gradient(135deg, #d97706, #fbbf24)",suffix:"%"},{label:"Overall",done:o,total:100,icon:e.jsx(Ot,{size:20}),color:"#06b6d4",gradient:"linear-gradient(135deg, #0e7490, #06b6d4)",suffix:"%"}].map((u,y)=>{const A=u.total>0?Math.round(u.done/u.total*100):0;return e.jsxs("div",{className:"sdash-stat-card",children:[e.jsxs("div",{className:"sdash-stat-ring",children:[e.jsx(T,{pct:A,color:u.color}),e.jsx("div",{className:"sdash-stat-icon",style:{background:u.gradient},children:qs.cloneElement(u.icon,{color:"#fff",size:18})})]}),e.jsxs("div",{className:"sdash-stat-info",children:[e.jsxs("div",{className:"sdash-stat-val",children:[u.done,u.suffix||"",!u.suffix&&e.jsxs("span",{className:"sdash-stat-dim",children:["/",u.total]})]}),e.jsx("div",{className:"sdash-stat-lbl",children:u.label})]})]},y)})}),e.jsxs("div",{className:"sdash-row2",children:[e.jsxs("div",{className:"sdash-card sdash-grow",children:[e.jsxs("div",{className:"sdash-card-head",children:[e.jsxs("h3",{children:[e.jsx(Ot,{size:16,color:"#818cf8"})," Activity"]}),e.jsx("span",{className:"sdash-badge-sm",style:{color:"#818cf8",background:"rgba(129,140,248,0.12)"},children:"7 Days"})]}),e.jsx("div",{style:{width:"100%",height:200,marginTop:8},children:e.jsx(Vt,{children:e.jsxs(_r,{data:h,margin:{top:5,right:8,left:-25,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"aGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#818cf8",stopOpacity:.35}),e.jsx("stop",{offset:"100%",stopColor:"#818cf8",stopOpacity:0})]})}),e.jsx(Ws,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.06)"}),e.jsx(Es,{dataKey:"date",tick:{fill:"#64748b",fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(Ns,{tick:{fill:"#64748b",fontSize:10},axisLine:!1,tickLine:!1,allowDecimals:!1}),e.jsx(xs,{content:e.jsx(d,{})}),e.jsx(Mr,{type:"monotone",dataKey:"count",name:"Submissions",stroke:"#818cf8",strokeWidth:2.5,fill:"url(#aGrad)",dot:{r:3,fill:"#818cf8",stroke:"#1e1b4b",strokeWidth:2},activeDot:{r:5}})]})})})]}),e.jsxs("div",{className:"sdash-card",children:[e.jsx("div",{className:"sdash-card-head",children:e.jsxs("h3",{children:[e.jsx(It,{size:16,color:"#10b981"})," Progress"]})}),e.jsx("div",{style:{width:"100%",height:200,marginTop:8},children:e.jsx(Vt,{children:e.jsxs(Or,{data:i,margin:{top:5,right:8,left:-25,bottom:0},barGap:4,barSize:22,children:[e.jsx(Ws,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.06)"}),e.jsx(Es,{dataKey:"name",tick:{fill:"#64748b",fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(Ns,{tick:{fill:"#64748b",fontSize:10},axisLine:!1,tickLine:!1,allowDecimals:!1}),e.jsx(xs,{content:e.jsx(d,{})}),e.jsx(Ls,{dataKey:"completed",name:"Completed",radius:[4,4,0,0],fill:"#10b981"}),e.jsx(Ls,{dataKey:"total",name:"Total",radius:[4,4,0,0],fill:"rgba(100,116,139,0.25)"})]})})})]})]}),e.jsxs("div",{className:"sdash-row3",children:[e.jsxs("div",{className:"sdash-card sdash-center-card",children:[e.jsx("div",{className:"sdash-card-head",children:e.jsxs("h3",{children:[e.jsx(Js,{size:16,color:"#a78bfa"})," Completion"]})}),e.jsxs("div",{style:{width:"100%",height:175,position:"relative",marginTop:4},children:[e.jsx(Vt,{children:e.jsxs(qr,{children:[e.jsx(Hr,{data:m.length>0?m:[{name:"No Data",value:1,color:"rgba(100,116,139,0.2)"}],cx:"50%",cy:"50%",innerRadius:48,outerRadius:72,paddingAngle:2,dataKey:"value",strokeWidth:0,children:(m.length>0?m:[{name:"No Data",value:1,color:"rgba(100,116,139,0.2)"}]).map((u,y)=>e.jsx(Qr,{fill:u.color},y))}),e.jsx(xs,{content:e.jsx(d,{})})]})}),e.jsxs("div",{className:"sdash-donut-center",children:[e.jsxs("span",{className:"sdash-donut-pct",children:[o,"%"]}),e.jsx("span",{className:"sdash-donut-sub",children:"Done"})]})]}),e.jsx("div",{className:"sdash-legend",children:[{l:"Tasks",c:"#3b82f6"},{l:"Code",c:"#10b981"},{l:"Aptitude",c:"#a78bfa"}].map(u=>e.jsxs("span",{className:"sdash-legend-item",children:[e.jsx("span",{className:"sdash-legend-dot",style:{background:u.c}}),u.l]},u.l))})]}),e.jsxs("div",{className:"sdash-card sdash-center-card",children:[e.jsx("div",{className:"sdash-card-head",children:e.jsxs("h3",{children:[e.jsx(Zs,{size:16,color:"#f472b6"})," Skill Radar"]})}),e.jsx("div",{style:{width:"100%",height:210,marginTop:4},children:e.jsx(Vt,{children:e.jsxs(Yr,{data:p,cx:"50%",cy:"50%",outerRadius:"68%",children:[e.jsx(Ur,{stroke:"rgba(148,163,184,0.1)"}),e.jsx(Gr,{dataKey:"subject",tick:{fill:"#94a3b8",fontSize:9}}),e.jsx(Vr,{angle:90,domain:[0,100],tick:!1,axisLine:!1}),e.jsx(Kr,{name:"Score",dataKey:"A",stroke:"#f472b6",fill:"#f472b6",fillOpacity:.15,strokeWidth:2,dot:{r:3,fill:"#f472b6"}})]})})})]}),e.jsx("div",{className:"sdash-card sdash-gami-card",children:e.jsx(Si,{studentId:t?.id||t?.userId})})]}),e.jsxs("div",{className:"sdash-row4",children:[e.jsx("div",{className:"sdash-card",children:e.jsx(ki,{studentId:t?.id||t?.userId})}),e.jsxs("div",{className:"sdash-card",children:[e.jsx("div",{className:"sdash-card-head",children:e.jsxs("h3",{children:[e.jsx(qe,{size:16,color:"#8b5cf6"})," Skills"]})}),e.jsxs("div",{className:"sdash-skills",children:[[{name:"ML Tasks",done:r.completedTasks,total:r.totalTasks,color:"#3b82f6"},{name:"Coding",done:r.completedProblems,total:r.totalProblems,color:"#10b981"},{name:"Aptitude",done:r.completedAptitude,total:r.totalAptitude,color:"#a78bfa"}].map((u,y)=>e.jsxs("div",{className:"sdash-skill-row",children:[e.jsxs("div",{className:"sdash-skill-label",children:[e.jsx("span",{children:u.name}),e.jsxs("span",{style:{color:u.color,fontWeight:700,fontVariantNumeric:"tabular-nums"},children:[u.done,"/",u.total]})]}),e.jsx("div",{className:"sdash-skill-track",children:e.jsx("div",{className:"sdash-skill-fill",style:{width:`${u.total>0?u.done/u.total*100:0}%`,background:`linear-gradient(90deg, ${u.color}cc, ${u.color})`}})})]},y)),e.jsx("div",{className:"sdash-skill-row",style:{marginTop:10,paddingTop:10,borderTop:"1px solid var(--border-color)"},children:e.jsxs("div",{className:"sdash-skill-label",children:[e.jsx("span",{style:{fontWeight:600},children:"Total Submissions"}),e.jsx("span",{style:{color:"#06b6d4",fontWeight:700},children:r.totalSubmissions||0})]})})]})]}),e.jsxs("div",{className:"sdash-card",children:[e.jsxs("div",{className:"sdash-card-head",children:[e.jsxs("h3",{children:[e.jsx(He,{size:16,color:"#3b82f6"})," Recent"]}),e.jsx("button",{onClick:()=>window.location.href="/student/submissions",className:"view-all-btn",children:"All â†’"})]}),e.jsx("div",{className:"submissions-list",style:{maxHeight:240},children:r.recentSubmissions&&r.recentSubmissions.length>0?r.recentSubmissions.map((u,y)=>e.jsxs("div",{className:"submission-item",children:[e.jsx("div",{className:"submission-icon",children:e.jsx(De,{size:16,color:"#3b82f6"})}),e.jsxs("div",{className:"submission-info",children:[e.jsx("div",{className:"submission-title",children:u.title}),e.jsxs("div",{className:"submission-meta",children:[l(u.time)," Â· ",u.score,"/100"]})]}),e.jsx("span",{className:`submission-status ${u.status}`,children:u.status})]},y)):e.jsxs("div",{className:"empty-state-small",children:[e.jsx(De,{size:28,color:"var(--text-muted)"}),"No submissions"]})})]}),e.jsxs("div",{className:"sdash-card",children:[e.jsx("div",{className:"sdash-card-head",children:e.jsxs("h3",{children:[e.jsx(lt,{size:16,color:"#fbbf24"})," Leaderboard"]})}),e.jsx("div",{className:"leaderboard-list",style:{maxHeight:240},children:r.leaderboard&&r.leaderboard.length>0?r.leaderboard.slice(0,5).map((u,y)=>e.jsxs("div",{className:`leaderboard-item ${u.studentId===t.id?"current-user":""}`,children:[e.jsx("div",{className:`rank-badge rank-${y+1}`,children:u.rank}),e.jsxs("div",{className:"leaderboard-info",children:[e.jsx("div",{className:"leaderboard-name",children:u.name}),e.jsxs("div",{className:"leaderboard-stats",children:[u.taskCount,"T Â· ",u.codeCount,"C Â· ",u.aptitudeCount,"A"]})]}),e.jsxs("div",{className:`leaderboard-score rank-${y+1}-score`,children:[u.avgScore,"%"]})]},y)):e.jsxs("div",{className:"empty-state-small",children:[e.jsx(lt,{size:28,color:"var(--text-muted)"}),"No data yet"]})})]})]})]})}function Ci({user:t}){const[r,c]=s.useState([]),[f,a]=s.useState(!0),[x,l]=s.useState(null),[h,i]=s.useState(null),m=(p=!0)=>{p&&a(!0),Q.get(`${xe}/students/${t.id}/tasks`).then(B=>{c(B.data),a(!1)}).catch(B=>a(!1))};return s.useEffect(()=>{m(!0)},[t.id]),f?e.jsx("div",{className:"loading-spinner"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"cards-grid animate-slideUp",children:r.length===0?e.jsxs("div",{className:"empty-state",style:{gridColumn:"1 / -1"},children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(Ht,{size:40})}),e.jsx("h3",{children:"No ML Tasks Assigned"}),e.jsx("p",{children:"Your mentor hasn't assigned any tasks yet."})]}):r.map(p=>e.jsxs("div",{className:"item-card glass",children:[e.jsxs("div",{className:"item-card-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{padding:"10px",background:"var(--primary-alpha)",borderRadius:"10px"},children:e.jsx(Ht,{size:20,color:"var(--primary)"})}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.65rem",color:"var(--secondary)",fontWeight:700,textTransform:"uppercase"},children:"ML TASK"}),e.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:p.title})]})]}),e.jsx("span",{className:`difficulty-badge ${p.difficulty?.toLowerCase()}`,children:p.difficulty})]}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.6",marginBottom:"1rem",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:p.description}),p.requirements&&e.jsxs("div",{style:{background:"var(--bg-dark)",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[e.jsx("strong",{style:{color:"var(--primary)"},children:"Requirements:"}),e.jsx("br",{}),p.requirements.split(`
`).slice(0,2).join(`
`),"..."]}),e.jsxs("div",{className:"item-card-footer",style:{paddingTop:"1rem",marginTop:"auto",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("span",{className:`status-badge ${p.status||"live"}`,children:p.status||"Active"}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"0.5rem"},children:[p.maxAttempts>0&&e.jsxs("span",{style:{fontSize:"0.8rem",color:p.attemptCount>=p.maxAttempts?"var(--error)":"var(--text-muted)",alignSelf:"center",marginRight:"0.5rem",fontWeight:600},children:[p.attemptCount,"/",p.maxAttempts," Attempts"]}),e.jsxs("button",{onClick:()=>i(p),className:"btn-reset",style:{padding:"0.5rem 0.75rem",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.35rem"},children:[e.jsx(Xe,{size:14})," View"]}),e.jsxs("button",{onClick:()=>l(p),className:"btn-create-new",disabled:p.maxAttempts>0&&p.attemptCount>=p.maxAttempts,style:{padding:"0.5rem 1rem",fontSize:"0.85rem",opacity:p.maxAttempts>0&&p.attemptCount>=p.maxAttempts?.5:1,cursor:p.maxAttempts>0&&p.attemptCount>=p.maxAttempts?"not-allowed":"pointer"},children:[e.jsx(_t,{size:16})," ",p.maxAttempts>0&&p.attemptCount>=p.maxAttempts?"Limit Reached":"Submit"]})]})]})]},p.id))}),h&&e.jsx(Ri,{task:h,onClose:()=>i(null),onSubmit:()=>{i(null),l(h)}}),x&&e.jsx(Ii,{task:x,user:t,onClose:()=>l(null),onSubmissionComplete:()=>m(!1)})]})}function Ri({task:t,onClose:r,onSubmit:c}){return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content",onClick:f=>f.stopPropagation(),style:{maxWidth:"700px",maxHeight:"85vh",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, var(--secondary), var(--primary))",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Nt,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--primary)",textTransform:"uppercase",fontWeight:600},children:"ML Task Details"}),e.jsx("h2",{style:{margin:0},children:t.title})]})]}),e.jsx("button",{onClick:r,className:"modal-close",children:e.jsx(me,{size:20})})]}),e.jsxs("div",{className:"modal-body",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1.5rem"},children:[e.jsx("span",{className:`difficulty-badge ${t.difficulty?.toLowerCase()}`,style:{fontSize:"0.85rem",padding:"0.4rem 0.8rem"},children:t.difficulty}),e.jsx("span",{className:`status-badge ${t.status||"live"}`,style:{fontSize:"0.85rem",padding:"0.4rem 0.8rem"},children:t.status||"Active"}),t.maxAttempts>0&&e.jsxs("span",{style:{fontSize:"0.85rem",padding:"0.4rem 0.8rem",borderRadius:"2rem",background:t.attemptCount>=t.maxAttempts?"var(--error-alpha)":"var(--bg-secondary)",color:t.attemptCount>=t.maxAttempts?"var(--error)":"var(--text-muted)",border:"1px solid var(--border-color)",fontWeight:600},children:[t.attemptCount,"/",t.maxAttempts," Attempts Used"]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{color:"var(--text-main)",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ve,{size:18,color:"var(--primary)"})," Description"]}),e.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.8",fontSize:"0.95rem",background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.75rem",margin:0},children:t.description})]}),t.requirements&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{color:"var(--text-main)",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ae,{size:18,color:"var(--secondary)"})," Requirements"]}),e.jsx("div",{style:{background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)"},children:t.requirements.split(`
`).map((f,a)=>e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:a<t.requirements.split(`
`).length-1?"0.75rem":0},children:[e.jsx(ge,{size:16,color:"var(--success)",style:{marginTop:"3px",flexShrink:0}}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.5"},children:f.replace(/^[-â€¢*]\s*/,"")})]},a))})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{color:"var(--text-main)",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Rt,{size:18,color:"var(--warning)"})," Submission Guidelines"]}),e.jsx("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.05), rgba(245, 158, 11, 0.08))",padding:"1rem",borderRadius:"0.75rem",border:"1px solid rgba(251, 191, 36, 0.2)"},children:e.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.8"},children:[e.jsxs("li",{children:["You can submit a ",e.jsx("strong",{children:"file"})," (.py, .ipynb, .zip) or a ",e.jsx("strong",{children:"GitHub repository URL"})]}),e.jsxs("li",{children:["For GitHub submissions, ensure the repository is ",e.jsx("strong",{children:"public"})," or share access"]}),e.jsxs("li",{children:["Include a ",e.jsx("strong",{children:"README.md"})," with instructions to run your code"]}),e.jsx("li",{children:"Your submission will be evaluated by AI based on the requirements"}),e.jsx("li",{children:"You will receive a score and detailed feedback after evaluation"})]})})]}),(t.sampleInput||t.expectedOutput)&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{color:"var(--text-main)",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(De,{size:18,color:"var(--info)"})," Sample Data"]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[t.sampleInput&&e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem",display:"block"},children:"Sample Input"}),e.jsx("pre",{style:{background:"var(--bg-dark)",padding:"0.75rem",borderRadius:"0.5rem",margin:0,fontSize:"0.85rem",overflow:"auto"},children:t.sampleInput})]}),t.expectedOutput&&e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem",display:"block"},children:"Expected Output"}),e.jsx("pre",{style:{background:"var(--bg-dark)",padding:"0.75rem",borderRadius:"0.5rem",margin:0,fontSize:"0.85rem",overflow:"auto"},children:t.expectedOutput})]})]})]})]}),e.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("button",{onClick:r,className:"btn-reset",children:"Close"}),e.jsxs("button",{onClick:c,className:"btn-create-new",disabled:t.maxAttempts>0&&t.attemptCount>=t.maxAttempts,style:{display:"flex",alignItems:"center",gap:"0.5rem",opacity:t.maxAttempts>0&&t.attemptCount>=t.maxAttempts?.5:1,cursor:t.maxAttempts>0&&t.attemptCount>=t.maxAttempts?"not-allowed":"pointer"},children:[e.jsx(_t,{size:16})," ",t.maxAttempts>0&&t.attemptCount>=t.maxAttempts?"Attempt Limit Reached":"Submit Solution"]})]})]})})}function Ii({task:t,user:r,onClose:c,onSubmissionComplete:f}){const[a,x]=s.useState(null),[l,h]=s.useState(""),[i,m]=s.useState("file"),[p,B]=s.useState(!1),[S,o]=s.useState(null),[T,d]=s.useState(!1),u=g=>{const n=g.target.files[0];n&&x(n)},y=g=>/^https?:\/\/(www\.)?github\.com\/[\w-]+\/[\w.-]+\/?.*$/i.test(g),A=async()=>{if(!(i==="file"&&!a)&&!(i==="github"&&!l)){if(i==="github"&&!y(l)){alert("Please enter a valid GitHub repository URL");return}B(!0),d(!0);try{if(i==="file"){const g=new FileReader;g.onload=async n=>{try{const z=await Q.post(`${xe}/submissions/ml-task`,{studentId:r.id,taskId:t.id,submissionType:"file",code:n.target.result,fileName:a.name,taskTitle:t.title,taskDescription:t.description,taskRequirements:t.requirements});o(z.data),f&&f()}catch(z){console.error(z),o({status:"error",score:0,feedback:z.response?.data?.error||"Submission failed. Please try again."})}finally{B(!1),d(!1)}},g.readAsText(a)}else{const g=await Q.post(`${xe}/submissions/ml-task`,{studentId:r.id,taskId:t.id,submissionType:"github",githubUrl:l,taskTitle:t.title,taskDescription:t.description,taskRequirements:t.requirements});o(g.data),B(!1),d(!1),f&&f()}}catch(g){console.error(g),o({status:"error",score:0,feedback:g.response?.data?.error||"Submission failed. Please try again."}),B(!1),d(!1)}}};return e.jsx("div",{className:"modal-overlay",onClick:c,children:e.jsxs("div",{className:"modal-content",onClick:g=>g.stopPropagation(),style:{maxWidth:"650px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, var(--secondary), var(--primary))",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_t,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Submit Solution"}),e.jsx("h2",{style:{margin:0,fontSize:"1.1rem"},children:t.title})]})]}),e.jsx("button",{onClick:c,className:"modal-close",children:e.jsx(me,{size:20})})]}),e.jsx("div",{className:"modal-body",children:S?e.jsxs("div",{style:{textAlign:"left",padding:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem",marginBottom:"2rem",paddingBottom:"1.5rem",borderBottom:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:`conic-gradient(${S.score>=80?"var(--success)":S.score>=60?"var(--warning)":"var(--danger)"} ${S.score*3.6}deg, var(--bg-dark) 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},children:e.jsxs("div",{style:{width:"85px",height:"85px",borderRadius:"50%",background:"var(--bg-card)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"1.8rem",fontWeight:800,color:"var(--text-main)"},children:S.score}),e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",textTransform:"uppercase"},children:"Score"})]})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,color:S.score>=80?"var(--success)":S.score>=60?"var(--warning)":"var(--danger)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:S.score>=90?"Outstanding!":S.score>=80?"Excellent Work!":S.score>=60?"Good Effort":"Needs Improvement"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.95rem",lineHeight:"1.5"},children:S.summary||"Evaluation complete. Review the detailed feedback below to improve your skills."})]})]}),(S.metrics||S.breakdown)&&e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h4",{style:{color:"var(--text-main)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(It,{size:18,color:"var(--primary)"})," Performance Metrics"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:Object.entries(S.metrics||S.breakdown).map(([g,n])=>e.jsxs("div",{style:{background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-muted)",textTransform:"capitalize"},children:g.replace(/_/g," ")}),e.jsxs("span",{style:{fontWeight:700,color:n>=80?"var(--success)":n>=60?"var(--warning)":"var(--danger)"},children:[n,"%"]})]}),e.jsx("div",{style:{height:"6px",background:"rgba(255,255,255,0.05)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${n}%`,height:"100%",background:n>=80?"var(--success)":n>=60?"var(--warning)":"var(--danger)",borderRadius:"3px",transition:"width 1s ease-out"}})})]},g))})]}),(S.strengths?.length>0||S.suggestion_points?.length>0)&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[S.strengths?.length>0&&e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.05)",padding:"1.25rem",borderRadius:"0.75rem",border:"1px solid rgba(16, 185, 129, 0.15)"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",color:"var(--success)",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem"},children:[e.jsx(ge,{size:18})," Key Strengths"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:S.strengths.map((g,n)=>e.jsx("li",{style:{color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.5"},children:g},n))})]}),S.suggestion_points?.length>0&&e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.05)",padding:"1.25rem",borderRadius:"0.75rem",border:"1px solid rgba(245, 158, 11, 0.15)"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",color:"var(--warning)",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem"},children:[e.jsx(he,{size:18})," Areas for Improvement"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:S.suggestion_points.map((g,n)=>e.jsx("li",{style:{color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.5"},children:g},n))})]})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h4",{style:{color:"var(--text-main)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ve,{size:18,color:"var(--info)"})," Detailed Analysis"]}),e.jsx("div",{style:{background:"var(--bg-dark)",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)",maxHeight:"400px",overflowY:"auto"},children:e.jsx("div",{style:{whiteSpace:"pre-wrap",color:"var(--text-muted)",fontSize:"0.95rem",lineHeight:"1.7",fontFamily:"monospace"},children:S.detailed_feedback||S.feedback})})]}),S.next_steps&&e.jsxs("div",{style:{background:"linear-gradient(to right, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1))",padding:"1.25rem",borderRadius:"0.75rem",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"var(--primary)",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1rem"},children:[e.jsx(Ae,{size:18})," Recommended Next Steps"]}),e.jsx("p",{style:{margin:0,color:"var(--text-main)",fontSize:"0.95rem",lineHeight:"1.6"},children:S.next_steps})]}),e.jsx("button",{className:"btn-create-new",onClick:c,style:{marginTop:"2rem",width:"100%",padding:"1rem",fontSize:"1rem"},children:"Close Report"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",style:{marginBottom:"0.75rem",display:"block"},children:"Choose Submission Method"}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[e.jsxs("button",{onClick:()=>m("file"),style:{flex:1,padding:"1rem",borderRadius:"0.75rem",border:`2px solid ${i==="file"?"var(--primary)":"var(--border-color)"}`,background:i==="file"?"var(--primary-alpha)":"var(--bg-dark)",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[e.jsx(_t,{size:24,color:i==="file"?"var(--primary)":"var(--text-muted)"}),e.jsx("span",{style:{fontWeight:600,color:i==="file"?"var(--primary)":"var(--text-muted)"},children:"Upload File"}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:".py, .ipynb, .zip"})]}),e.jsxs("button",{onClick:()=>m("github"),style:{flex:1,padding:"1rem",borderRadius:"0.75rem",border:`2px solid ${i==="github"?"var(--primary)":"var(--border-color)"}`,background:i==="github"?"var(--primary-alpha)":"var(--bg-dark)",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[e.jsx(Lt,{size:24,color:i==="github"?"var(--primary)":"var(--text-muted)"}),e.jsx("span",{style:{fontWeight:600,color:i==="github"?"var(--primary)":"var(--text-muted)"},children:"GitHub URL"}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Repository link"})]})]})]}),i==="file"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Upload Your Solution File"}),e.jsxs("div",{style:{border:"2px dashed var(--border-color)",borderRadius:"1rem",padding:"2rem",textAlign:"center",background:"var(--bg-dark)",cursor:"pointer",transition:"all 0.3s"},onClick:()=>document.getElementById("file-input").click(),children:[e.jsx("input",{type:"file",id:"file-input",onChange:u,accept:".py,.ipynb,.csv,.pkl,.h5,.zip",style:{display:"none"}}),e.jsx(_t,{size:40,style:{color:"var(--secondary)",marginBottom:"1rem"}}),a?e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:600,color:"var(--success)"},children:a.name}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:[(a.size/1024).toFixed(2)," KB"]})]}):e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:600},children:"Click to upload or drag and drop"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:"Supports: .py, .ipynb, .csv, .pkl, .h5, .zip"})]})]})]}),i==="github"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"GitHub Repository URL"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Lt,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"url",value:l,onChange:g=>h(g.target.value),placeholder:"https://github.com/username/repository",style:{width:"100%",padding:"0.875rem 1rem 0.875rem 2.75rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)",background:"var(--bg-dark)",color:"var(--text-main)",fontSize:"0.95rem"}})]}),l&&!y(l)&&e.jsx("p",{style:{color:"var(--danger)",fontSize:"0.8rem",marginTop:"0.5rem"},children:"Please enter a valid GitHub URL (e.g., https://github.com/username/repo)"}),e.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(59, 130, 246, 0.2)"},children:e.jsxs("p",{style:{margin:0,fontSize:"0.8rem",color:"var(--text-muted)"},children:[e.jsx("strong",{style:{color:"var(--info)"},children:"Note:"})," Make sure your repository is public. Include a README.md with setup instructions."]})})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn-reset",onClick:c,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn-create-new",onClick:A,disabled:i==="file"&&!a||i==="github"&&(!l||!y(l))||p,children:p?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-small"})," ",T?"Evaluating...":"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{size:16})," Submit for Evaluation"]})})]})]})})]})})}function Ti({user:t}){const[r,c]=s.useState([]),[f,a]=s.useState(!0),[x,l]=s.useState(null),[h,i]=s.useState(!1),[m,p]=s.useState("coding"),[B,S]=s.useState({}),o=async n=>{const z={};await Promise.all(n.map(async R=>{try{const q=await Q.get(`${xe}/submissions/count?studentId=${t.id}&problemId=${R.id}`);z[R.id]=q.data.attemptCount||0}catch{z[R.id]=0}})),S(z)},T=(n=!1)=>{n||a(!0),Q.get(`${xe}/students/${t.id}/problems`).then(z=>{const R=z.data;c(R),n||a(!1),o(R)}).catch(z=>{n||a(!1)})};s.useEffect(()=>{T()},[t.id]);const d=n=>{const z=n.maxAttempts||n.max_attempts||0,R=B[n.id]||0;if(z>0&&R>=z){alert(`You have used all ${z} attempt(s) for this problem.`);return}l(n),i(n.proctoring?.enabled===!0)},u=()=>{l(null),i(!1),T(!0)},y=r.filter(n=>n.language!=="SQL"&&n.type!=="SQL"),A=r.filter(n=>n.language==="SQL"||n.type==="SQL");if(f)return e.jsx("div",{className:"loading-spinner"});const g=n=>e.jsxs("div",{className:"item-card glass",children:[e.jsxs("div",{className:"item-card-header",children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:"0.65rem",padding:"3px 8px",borderRadius:"4px",background:"var(--primary-alpha)",color:"var(--primary)",fontWeight:700},children:n.type?.toUpperCase()}),e.jsx("span",{className:`status-badge ${n.status||"live"}`,style:{fontSize:"0.65rem"},children:n.status||"Active"}),n.proctoring?.enabled&&e.jsxs("span",{style:{fontSize:"0.6rem",padding:"3px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",fontWeight:700,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(gt,{size:10})," PROCTORED"]})]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",background:"var(--bg-dark)",padding:"2px 8px",borderRadius:"4px"},children:n.language})]}),e.jsx("h3",{style:{margin:"0.75rem 0",fontSize:"1.2rem"},children:n.title}),e.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",marginBottom:"1rem"},children:n.description}),n.proctoring?.enabled&&e.jsx("div",{style:{padding:"0.5rem 0.75rem",background:"rgba(239, 68, 68, 0.08)",borderRadius:"8px",marginBottom:"0.75rem",border:"1px solid rgba(239, 68, 68, 0.15)"},children:e.jsxs("p",{style:{margin:0,fontSize:"0.75rem",color:"#f87171",display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap"},children:[e.jsx(Xe,{size:12})," Proctoring Enabled:",n.proctoring.videoAudio&&e.jsx("span",{style:{marginLeft:"4px"},children:"ðŸ“¹ Video"}),n.proctoring.disableCopyPaste&&e.jsx("span",{style:{marginLeft:"4px"},children:"ðŸ“‹ No Copy"}),n.proctoring.trackTabSwitches&&e.jsx("span",{style:{marginLeft:"4px"},children:"ðŸ”’ Tab Track"}),n.proctoring.enableFaceDetection&&e.jsx("span",{style:{marginLeft:"4px"},children:"ðŸ‘ï¸ Face"}),n.proctoring.detectMultipleFaces&&e.jsx("span",{style:{marginLeft:"4px"},children:"ðŸ‘¥ Multi-Face"}),n.proctoring.trackFaceLookaway&&e.jsx("span",{style:{marginLeft:"4px"},children:"ðŸ‘€ Lookaway"})]})}),(()=>{const z=n.maxAttempts||n.max_attempts||0,R=B[n.id]||0,q=z>0&&R>=z;return e.jsx("div",{style:{padding:"0.5rem 0.75rem",background:q?"rgba(239, 68, 68, 0.08)":"rgba(139, 92, 246, 0.08)",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${q?"rgba(239, 68, 68, 0.15)":"rgba(139, 92, 246, 0.15)"}`},children:e.jsxs("p",{style:{margin:0,fontSize:"0.75rem",color:q?"#ef4444":"#8b5cf6",fontWeight:600},children:["ðŸ”„ Attempts: ",R,z>0?`/${z}`:""," ",q?"(Limit Reached)":z>0?`(${z-R} remaining)`:"(Unlimited)"]})})})(),e.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"1rem",borderTop:"1px solid var(--border-color)"},children:[e.jsx("span",{className:`difficulty-badge ${n.difficulty?.toLowerCase()}`,children:n.difficulty}),(()=>{const z=n.maxAttempts||n.max_attempts||0,R=B[n.id]||0,q=z>0&&R>=z;return e.jsxs("button",{onClick:()=>d(n),className:"btn-create-new",disabled:q,style:{padding:"0.5rem 1rem",fontSize:"0.85rem",opacity:q?.5:1,cursor:q?"not-allowed":"pointer"},children:[e.jsx(Ze,{size:16})," ",q?"No Attempts Left":"Solve"]})})()]})]},n.id);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"12px",width:"fit-content"},children:[e.jsxs("button",{onClick:()=>p("coding"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:m==="coding"?"var(--primary)":"transparent",color:m==="coding"?"white":"var(--text-muted)"},children:[e.jsx(De,{size:18}),"Coding Problems",e.jsx("span",{style:{background:m==="coding"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:y.length})]}),e.jsxs("button",{onClick:()=>p("sql"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:m==="sql"?"linear-gradient(135deg, #06b6d4, #0891b2)":"transparent",color:m==="sql"?"white":"var(--text-muted)"},children:[e.jsx(Ve,{size:18}),"SQL Problems",e.jsx("span",{style:{background:m==="sql"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:A.length})]})]}),m==="coding"&&e.jsx("div",{className:"cards-grid animate-slideUp",children:y.length===0?e.jsxs("div",{className:"empty-state",style:{gridColumn:"1 / -1"},children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(De,{size:40})}),e.jsx("h3",{children:"No Coding Problems"}),e.jsx("p",{children:"Your mentor hasn't assigned any coding problems yet."})]}):y.map(n=>g(n))}),m==="sql"&&e.jsx("div",{className:"cards-grid animate-slideUp",children:A.length===0?e.jsxs("div",{className:"empty-state",style:{gridColumn:"1 / -1"},children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(Ve,{size:40})}),e.jsx("h3",{children:"No SQL Problems"}),e.jsx("p",{children:"Your mentor hasn't assigned any SQL problems yet."})]}):A.map(n=>g(n))}),x&&h&&e.jsx(ci,{problem:x,user:t,onClose:u,onSubmitSuccess:()=>{Q.get(`${xe}/students/${t.id}/problems`).then(n=>c(n.data))}}),x&&!h&&e.jsx(Ai,{problem:x,user:t,onClose:u,onSubmissionComplete:()=>T(!0)})]})}function Ai({problem:t,user:r,onClose:c,onSubmissionComplete:f}){const a=Pt[t.language]||Pt.Python,[x,l]=s.useState(a.defaultCode),[h,i]=s.useState(t.language||"Python"),[m,p]=s.useState("validator"),[B,S]=s.useState(""),[o,T]=s.useState("idle"),[d,u]=s.useState(null),[y,A]=s.useState(0),[g,n]=s.useState(!1),[z,R]=s.useState(!1),[q,U]=s.useState(""),[K,k]=s.useState(!1),[D,w]=s.useState(null),[re,te]=s.useState(t.sampleInput||t.testInput||""),[oe,fe]=s.useState("input"),X=s.useRef(null);s.useEffect(()=>{const ie=setTimeout(async()=>{try{X.current&&document.fullscreenEnabled&&(await X.current.requestFullscreen(),n(!0))}catch(le){console.warn("Could not enter fullscreen:",le)}},100);return()=>clearTimeout(ie)},[]),s.useEffect(()=>{const F=()=>{const ie=!!document.fullscreenElement;n(ie),!ie&&!d&&(U("âš ï¸ You exited fullscreen mode! This action has been recorded."),R(!0),A(le=>le+1),setTimeout(async()=>{if(X.current&&document.fullscreenEnabled)try{await X.current.requestFullscreen()}catch{}},500))};return document.addEventListener("fullscreenchange",F),()=>document.removeEventListener("fullscreenchange",F)},[d]);const[Z,V]=s.useState(!1);s.useEffect(()=>{const F=()=>{document.hidden&&!d&&!Z&&A(ie=>{const le=ie+1;return le>=3?(U(`ðŸš« DISQUALIFIED! You have exceeded the maximum allowed tab switches (${le}/3). Session terminated.`),R(!0),V(!0),setTimeout(async()=>{try{await Q.post(`${xe}/submissions`,{studentId:r.id,problemId:t.id,language:h,code:x,submissionType:"editor",tabSwitches:le})}catch(E){console.error("Auto-submit failed:",E)}document.fullscreenElement&&document.exitFullscreen(),c()},3e3)):(U(`âš ï¸ Tab switch detected! (${le}/3 violations) ${3-le} more will disqualify you!`),R(!0)),le})};return document.addEventListener("visibilitychange",F),()=>document.removeEventListener("visibilitychange",F)},[d,Z,r.id,t.id,h,x,c]),s.useEffect(()=>{if(z){const F=setTimeout(()=>R(!1),3e3);return()=>clearTimeout(F)}},[z]);const I=F=>{i(F),l(Pt[F]?.defaultCode||"")},Y=async()=>{T("running"),S(`Running code...
`),fe("output");try{const F=await Q.post(`${xe}/run`,{code:x,language:h,problemId:t.id,sqlSchema:t.sqlSchema,stdin:re||""});S(F.data.output),T(F.data.status==="error"?"error":"success");try{const ie=await Q.post(`${xe}/run-with-tests`,{problemId:t.id,code:x,language:h});ie.data?.testResults&&w({passed:ie.data.testResults.filter(le=>le.passed).length,total:ie.data.testResults.length,results:ie.data.testResults})}catch(ie){console.log("No test cases or test run failed:",ie)}}catch(F){S(`Error: ${F.response?.data?.details||"Failed to execute code."}`),T("error")}},[O,be]=s.useState(null),[Ce,Se]=s.useState(!1),[de,We]=s.useState(!1),Ie=async()=>{Se(!0),We(!0);try{const F=await Q.post(`${xe}/hints`,{code:x,language:h,problemId:t.id});be(F.data)}catch{be({hints:["Think about the problem step by step.","Consider what data structure would be most efficient."],encouragement:"Don't give up! Every expert was once a beginner.",error:!0})}finally{Se(!1)}},Ne=async()=>{T("submitting");try{const F=await Q.post(`${xe}/submissions`,{studentId:r.id,problemId:t.id,language:h,code:x,submissionType:"editor",tabSwitches:y});u(F.data),T("done"),f&&f(),document.fullscreenElement&&document.exitFullscreen()}catch(F){F.response?.status===403&&F.response?.data?.error==="Attempt limit reached"?(u({status:"rejected",score:0,feedback:F.response.data.message||"You have used all attempts for this problem."}),T("done"),document.fullscreenElement&&document.exitFullscreen()):(u({status:"rejected",score:0,feedback:"Submission failed."}),T("error"))}},se=()=>{!d&&!window.confirm("Exiting early will be recorded. Are you sure?")||(document.fullscreenElement&&document.exitFullscreen(),c())};return e.jsxs("div",{ref:X,className:"proctored-container",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#0f172a",zIndex:1e4,display:"flex",flexDirection:"column"},children:[z&&e.jsxs("div",{style:{position:"fixed",top:"1rem",left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",padding:"1rem 2rem",borderRadius:"0.75rem",zIndex:10001,boxShadow:"0 10px 40px rgba(239, 68, 68, 0.5)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(he,{size:24}),e.jsx("span",{style:{fontWeight:600},children:q})]}),e.jsxs("div",{style:{borderBottom:"1px solid #334155",background:"#1e293b",padding:"1rem 2rem",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("h2",{style:{color:"#f8fafc",fontSize:"1.25rem",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"1rem"},children:[t.title,e.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem",borderRadius:"2rem",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#ef4444",animation:"pulse 2s infinite"}}),"ðŸ”’ PROCTORED MODE"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa"},children:t.type||"coding"}),e.jsx("span",{className:`difficulty-badge ${t.difficulty?.toLowerCase()}`,children:t.difficulty?.toUpperCase()}),y>0&&e.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:["âš ï¸ ",y," violations"]})]})]})}),e.jsx("button",{onClick:se,style:{background:"#334155",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer"},children:"Exit Session"})]}),e.jsxs("div",{style:{padding:0,display:"flex",flexDirection:"row",flex:1,minHeight:0,overflow:"hidden",background:"#0f172a"},children:[e.jsxs("div",{style:{width:"400px",borderRight:"1px solid #334155",padding:"2rem",overflowY:"auto",background:"#0f172a"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"1.5rem",color:"#f8fafc"},children:"Problem Description"}),e.jsxs("div",{style:{color:"#cbd5e1",fontSize:"0.95rem",lineHeight:"1.7"},children:[t.description,t.type==="SQL"||t.language==="SQL"?e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[t.sqlSchema&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{color:"#06b6d4"},children:"ðŸ—„ï¸"}),e.jsx("strong",{style:{color:"#e2e8f0"},children:"Database Schema:"})]}),e.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"1rem",borderRadius:"6px",marginBottom:"1rem",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.sqlSchema})]}),t.expectedQueryResult&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{color:"#10b981"},children:"ðŸ“Š"}),e.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Query Result:"})]}),e.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"1rem",borderRadius:"6px",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.expectedQueryResult})]}),!t.sqlSchema&&!t.expectedQueryResult&&e.jsx("p",{style:{color:"#94a3b8",fontStyle:"italic",margin:0},children:"Write a SQL query to solve this problem. Your query will be executed against the database."})]}):e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[e.jsx("div",{style:{marginBottom:"0.5rem"},children:e.jsx("strong",{style:{color:"#e2e8f0"},children:"Sample Input:"})}),e.jsx("code",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block",marginBottom:"1rem"},children:t.sampleInput||t.testInput||"N/A"}),e.jsx("div",{style:{marginBottom:"0.5rem"},children:e.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Output:"})}),e.jsx("code",{style:{color:"#4ade80",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block"},children:t.expectedOutput||"N/A"})]})]}),e.jsxs("div",{style:{marginTop:"2rem",background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"0.75rem",padding:"1.25rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#fbbf24",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Rt,{size:16})," Need Help?"]}),de?e.jsx("div",{children:Ce?e.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[e.jsx("div",{style:{color:"#fbbf24",marginBottom:"0.5rem"},children:"ðŸ¤”"}),e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.85rem",margin:0},children:"Analyzing your code..."})]}):O&&e.jsxs("div",{children:[O.encouragement&&e.jsx("div",{style:{background:"rgba(34, 197, 94, 0.1)",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",border:"1px solid rgba(34, 197, 94, 0.2)"},children:e.jsxs("p",{style:{color:"#4ade80",fontSize:"0.8rem",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ct,{size:14})," ",O.encouragement]})}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("p",{style:{color:"#e2e8f0",fontSize:"0.8rem",fontWeight:600,margin:"0 0 0.5rem"},children:"ðŸ’¡ Hints:"}),e.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"#cbd5e1",fontSize:"0.8rem",lineHeight:1.8},children:O.hints?.map((F,ie)=>e.jsx("li",{style:{marginBottom:"0.5rem"},children:F},ie))})]}),O.conceptsToReview&&O.conceptsToReview.length>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("p",{style:{color:"#e2e8f0",fontSize:"0.8rem",fontWeight:600,margin:"0 0 0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Nt,{size:14})," Concepts to Review:"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:O.conceptsToReview.map((F,ie)=>e.jsx("span",{style:{background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa",padding:"0.25rem 0.75rem",borderRadius:"2rem",fontSize:"0.7rem",border:"1px solid rgba(59, 130, 246, 0.3)"},children:F},ie))})]}),O.commonMistakes&&e.jsx("div",{style:{background:"rgba(239, 68, 68, 0.1)",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:e.jsxs("p",{style:{color:"#f87171",fontSize:"0.8rem",margin:0},children:[e.jsx("strong",{children:"âš ï¸ Common Mistake:"})," ",O.commonMistakes]})}),e.jsx("button",{onClick:()=>{We(!1),be(null)},style:{background:"transparent",border:"1px solid #334155",color:"#94a3b8",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",marginTop:"1rem",width:"100%"},children:"Hide Hints"})]})}):e.jsxs("div",{children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.8rem",margin:"0 0 1rem",lineHeight:1.6},children:"Stuck on this problem? Get AI-powered hints to guide you without revealing the full solution."}),e.jsxs("button",{onClick:Ie,disabled:Ce,style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",border:"none",color:"#1e293b",padding:"0.6rem 1.2rem",borderRadius:"6px",cursor:"pointer",fontWeight:600,fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center"},children:[e.jsx(Ct,{size:16})," ",Ce?"Getting Hints...":"Get AI Hints"]})]})]}),e.jsxs("div",{style:{marginTop:"2rem",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"0.75rem",padding:"1.25rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#ef4444",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(he,{size:16})," Proctoring Rules"]}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"#94a3b8",fontSize:"0.8rem",lineHeight:1.8},children:[e.jsx("li",{children:"Do not switch tabs or windows"}),e.jsx("li",{children:"Do not exit fullscreen mode"}),e.jsx("li",{children:"All violations are recorded"}),e.jsx("li",{children:"3+ violations may result in disqualification"})]})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"#1e293b"},children:[!d&&e.jsxs("div",{style:{padding:"0.75rem 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #334155",background:"#1e293b"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[e.jsx("label",{style:{color:"#94a3b8",fontSize:"0.85rem"},children:"Language:"}),e.jsx("select",{value:h,onChange:F=>I(F.target.value),disabled:t.type==="SQL"||t.language==="SQL",style:{background:"#0f172a",color:"#f8fafc",border:"1px solid #334155",borderRadius:"6px",padding:"0.4rem 0.75rem",fontSize:"0.85rem",opacity:t.type==="SQL"||t.language==="SQL"?.7:1,cursor:t.type==="SQL"||t.language==="SQL"?"not-allowed":"pointer"},children:Object.keys(Pt).map(F=>e.jsx("option",{value:F,children:F},F))})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[h!=="SQL"&&e.jsxs("button",{onClick:Y,disabled:o==="running"||o==="submitting",style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[e.jsx(Ze,{size:16})," ",o==="running"?"Running...":"Run Code"]}),e.jsxs("button",{onClick:Ne,disabled:o==="running"||o==="submitting"||d,style:{background:d?"#334155":"linear-gradient(135deg, #10b981, #059669)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:d?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[e.jsx(Je,{size:16})," ",o==="submitting"?"Submitting...":"Submit"]})]})]}),!d&&e.jsx("div",{style:{flex:1,position:"relative",minHeight:0},children:e.jsx(Qt,{height:"100%",language:Pt[h]?.monacoLang||"python",theme:"vs-dark",value:x,onChange:F=>l(F),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,automaticLayout:!0,padding:{top:20}}})}),d&&e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"2rem",background:"#0f172a",color:"#f8fafc"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",marginBottom:"2.5rem",paddingBottom:"2rem",borderBottom:"1px solid #334155"},children:[e.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:`conic-gradient(${d.score>=80?"#10b981":d.score>=60?"#f59e0b":"#ef4444"} ${d.score*3.6}deg, #1e293b 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},children:e.jsxs("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#0f172a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"2.5rem",fontWeight:800,color:"#f8fafc"},children:d.score}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#94a3b8",textTransform:"uppercase",letterSpacing:"1px"},children:"Score"})]})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{margin:0,color:d.score>=80?"#10b981":d.score>=60?"#f59e0b":"#ef4444",fontSize:"2rem",marginBottom:"0.75rem",fontWeight:700},children:d.score>=90?"Outstanding Performance!":d.score>=80?"Excellent Work!":d.score>=60?"Good Effort":"Needs Improvement"}),e.jsx("p",{style:{margin:0,color:"#94a3b8",fontSize:"1.1rem",lineHeight:"1.6"},children:d.feedback||(d.status==="accepted"?"Your solution passed all tests and met the requirements.":"Your solution needs some improvements.")}),y>0&&e.jsxs("p",{style:{marginTop:"0.5rem",color:"#f59e0b",fontSize:"0.9rem"},children:["âš ï¸ ",y," tab switch notifications recorded."]})]})]}),d.analysis&&e.jsxs("div",{style:{marginBottom:"2.5rem"},children:[e.jsxs("h4",{style:{color:"#f8fafc",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(It,{size:20,color:"#3b82f6"})," Performance Analysis"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.25rem"},children:Object.entries(d.analysis).map(([F,ie])=>{if(ie==="Unknown"||ie===null)return null;const le=parseInt(ie)||0,E=F.replace(/([A-Z])/g," $1").trim();return e.jsxs("div",{style:{background:"#1e293b",padding:"1.25rem",borderRadius:"1rem",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.9rem",color:"#94a3b8",textTransform:"capitalize",fontWeight:600},children:E}),e.jsxs("span",{style:{fontWeight:800,color:le>=80?"#10b981":le>=60?"#f59e0b":"#ef4444",fontSize:"1.1rem"},children:[le,"%"]})]}),e.jsx("div",{style:{height:"8px",background:"rgba(255,255,255,0.05)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${le}%`,height:"100%",background:le>=80?"#10b981":le>=60?"#f59e0b":"#ef4444",borderRadius:"4px",transition:"width 1s ease-out"}})})]},F)})})]}),d.aiExplanation&&e.jsxs("div",{style:{marginBottom:"2.5rem"},children:[e.jsxs("h4",{style:{color:"#f8fafc",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Nt,{size:20,color:"#8b5cf6"})," Detailed AI Analysis"]}),e.jsx("div",{style:{background:"#1e293b",padding:"1.75rem",borderRadius:"1rem",border:"1px solid #334155",color:"#cbd5e1",fontSize:"1rem",lineHeight:"1.8",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:d.aiExplanation})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:e.jsx("button",{onClick:se,style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"1rem 2rem",borderRadius:"0.75rem",cursor:"pointer",fontWeight:600,fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:"Close Session"})})]}),!d&&h!=="SQL"&&e.jsxs("div",{style:{maxHeight:"350px",background:"#020617",borderTop:"1px solid #334155",display:"flex",flexDirection:"column",overflowY:"auto"},children:[e.jsx("div",{style:{display:"flex",borderBottom:"1px solid #1e293b",background:"#0f172a"},children:["input","output","tests"].map(F=>e.jsxs("button",{onClick:()=>fe(F),style:{padding:"0.75rem 1.25rem",background:oe===F?"#1e293b":"transparent",border:"none",borderBottom:oe===F?`2px solid ${F==="input"?"#f59e0b":F==="output"?"#3b82f6":"#10b981"}`:"2px solid transparent",color:oe===F?F==="input"?"#fbbf24":F==="output"?"#60a5fa":"#4ade80":"#64748b",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.5rem"},children:[F==="input"&&e.jsxs(e.Fragment,{children:[e.jsx(Ve,{size:14})," Custom Input"]}),F==="output"&&e.jsxs(e.Fragment,{children:[e.jsx(De,{size:14})," Output ",B&&e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:o==="success"?"#10b981":o==="error"?"#ef4444":"#3b82f6"}})]}),F==="tests"&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:14})," Test Cases",D&&e.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"0.7rem",fontWeight:600,background:D.passed===D.total?"rgba(16, 185, 129, 0.2)":"rgba(249, 115, 22, 0.2)",color:D.passed===D.total?"#10b981":"#f97316"},children:[D.passed,"/",D.total]})]})]},F))}),oe==="input"&&e.jsxs("div",{style:{padding:"0.75rem",flex:1},children:[e.jsx("textarea",{value:re,onChange:F=>te(F.target.value),placeholder:`Enter your input here (stdin)...
Example:
5
1 2 3 4 5`,style:{width:"100%",minHeight:"120px",background:"#0f172a",color:"#e2e8f0",border:"1px solid #334155",borderRadius:"8px",padding:"0.75rem",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical",outline:"none"}}),e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.7rem",color:"#64748b"},children:'ðŸ’¡ This input will be passed as stdin when you click "Run Code"'})]}),oe==="output"&&e.jsx("div",{style:{padding:"1rem",fontFamily:"monospace",color:"#e2e8f0",fontSize:"0.9rem",whiteSpace:"pre-wrap",flex:1,overflowY:"auto"},children:B||"No output yet. Run your code to see results."}),oe==="tests"&&e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:e.jsx(rr,{problemId:t.id,code:x,language:h,showRunButton:!0,onRunComplete:F=>{F?.testResults&&w({passed:F.testResults.filter(ie=>ie.passed).length,total:F.testResults.length})}})})]}),(t.type==="SQL"||t.language==="SQL")&&!d&&e.jsxs("div",{style:{borderTop:"1px solid #334155",padding:"1.25rem",background:"#0f172a"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.25rem",padding:"4px",background:"#020617",borderRadius:"10px",width:"fit-content"},children:[e.jsxs("button",{onClick:()=>p("validator"),style:{padding:"0.6rem 1.25rem",borderRadius:"8px",border:"none",cursor:"pointer",background:m==="validator"?"rgba(59, 130, 246, 0.15)":"transparent",color:m==="validator"?"#60a5fa":"#64748b",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(gt,{size:16})," Validator"]}),e.jsxs("button",{onClick:()=>p("visualizer"),style:{padding:"0.6rem 1.25rem",borderRadius:"8px",border:"none",cursor:"pointer",background:m==="visualizer"?"rgba(139, 92, 246, 0.15)":"transparent",color:m==="visualizer"?"#a78bfa":"#64748b",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Oe,{size:16})," ER Diagram"]}),e.jsxs("button",{onClick:()=>p("debugger"),style:{padding:"0.6rem 1.25rem",borderRadius:"8px",border:"none",cursor:"pointer",background:m==="debugger"?"rgba(16, 185, 129, 0.15)":"transparent",color:m==="debugger"?"#4ade80":"#64748b",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(qe,{size:16})," Debugger"]})]}),e.jsxs("div",{className:"sql-tool-container animate-fadeIn",children:[m==="validator"&&e.jsx(ir,{query:x,onQueryChange:l,schemaContext:t.sqlSchema}),m==="visualizer"&&e.jsx(nr,{schema:t.sqlSchema}),m==="debugger"&&e.jsx(ar,{query:x,schema:t.sqlSchema})]})]})]})]}),e.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.5; transform: scale(1.2); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function Wi({user:t}){const[r,c]=s.useState([]),[f,a]=s.useState([]),[x,l]=s.useState([]),[h,i]=s.useState([]),[m,p]=s.useState(!0),[B,S]=s.useState(null),[o,T]=s.useState(null),[d,u]=s.useState("all"),[y,A]=s.useState(null),[g,n]=s.useState(null),[z,R]=s.useState(""),q=()=>{p(!0),Promise.all([Q.get(`${xe}/submissions?studentId=${t.id}`),Q.get(`${xe}/aptitude-submissions?studentId=${t.id}`),Q.get(`${xe}/global-test-submissions?studentId=${t.id}`)]).then(([w,re,te])=>{const oe=Array.isArray(w.data)?w.data:w.data?.data||[],fe=oe.filter(Z=>Z.isMLTask).map(Z=>({...Z,subType:"ml-task"})),X=oe.filter(Z=>!Z.isMLTask).map(Z=>({...Z,subType:"code"}));c(X),a(fe),l((re.data||[]).map(Z=>({...Z,subType:"aptitude",itemTitle:Z.testTitle}))),i((te.data||[]).map(Z=>({...Z,subType:"global",itemTitle:Z.testTitle,score:Z.overallPercentage}))),p(!1)}).catch(w=>{console.error("Fetch submissions error:",w),p(!1)})};s.useEffect(()=>{q()},[t.id]);const U=async w=>{if(window.confirm("Are you sure you want to delete this submission?"))try{const re=w.subType==="global"?`${xe}/global-test-submissions/${w.id}`:`${xe}/submissions/${w.id}`;await Q.delete(re),q()}catch{alert("Error deleting submission")}},K=[...r,...f,...x,...h].sort((w,re)=>new Date(re.submittedAt)-new Date(w.submittedAt)),D=(d==="all"?K:d==="code"?r:d==="ml-task"?f:d==="aptitude"?x:h).filter(re=>(re.itemTitle||re.testTitle||"").toLowerCase().includes(z.toLowerCase())||re.status.toLowerCase().includes(z.toLowerCase()));return m?e.jsx("div",{className:"loading-spinner"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>u("all"),style:{padding:"0.6rem 1.2rem",background:d==="all"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:d==="all"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:d==="all"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["All (",K.length,")"]}),e.jsxs("button",{onClick:()=>u("code"),style:{padding:"0.6rem 1.2rem",background:d==="code"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:d==="code"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:d==="code"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["ðŸ’» Code (",r.length,")"]}),e.jsxs("button",{onClick:()=>u("ml-task"),style:{padding:"0.6rem 1.2rem",background:d==="ml-task"?"#06b6d4":"rgba(6, 182, 212, 0.1)",border:d==="ml-task"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:d==="ml-task"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["ðŸ§  ML Tasks (",f.length,")"]}),e.jsxs("button",{onClick:()=>u("aptitude"),style:{padding:"0.6rem 1.2rem",background:d==="aptitude"?"#8b5cf6":"rgba(139, 92, 246, 0.1)",border:d==="aptitude"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:d==="aptitude"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["ðŸ“ Aptitude (",x.length,")"]}),e.jsxs("button",{onClick:()=>u("global"),style:{padding:"0.6rem 1.2rem",background:d==="global"?"#3b82f6":"rgba(59, 130, 246, 0.1)",border:d==="global"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:d==="global"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["ðŸŒ Global (",h.length,")"]})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Gs,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search problem or status...",style:{padding:"0.6rem 1rem 0.6rem 2.5rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"white",width:"250px"},value:z,onChange:w=>R(w.target.value)})]})]}),e.jsx("div",{className:"table-container animate-slideUp card glass",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Problem / Test"}),e.jsx("th",{children:"Language"}),e.jsx("th",{children:"Score"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Submitted At"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:D.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{textAlign:"center",padding:"3rem"},children:"No submissions found"})}):D.map(w=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:w.subType==="ml-task"?"rgba(6, 182, 212, 0.1)":w.subType==="aptitude"?"rgba(139, 92, 246, 0.1)":"var(--primary-alpha)",color:w.subType==="ml-task"?"#06b6d4":w.subType==="aptitude"?"#8b5cf6":"var(--primary)"},children:w.subType==="ml-task"?"ðŸ§  ML Task":w.subType==="aptitude"?"ðŸ“ Aptitude":w.subType==="global"?"ðŸŒ Global":"ðŸ’» Code"})}),e.jsx("td",{children:e.jsx("div",{style:{color:"var(--primary)",fontWeight:500},children:w.itemTitle||w.testTitle})}),e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:w.subType==="aptitude"?"N/A":w.subType==="global"?"Mixed":w.language?.toUpperCase()||"N/A"})}),e.jsxs("td",{style:{fontWeight:700,fontSize:"1.1rem"},children:[w.score,"%"]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",alignItems:"center"},children:[e.jsx("span",{className:`status-badge ${w.status}`,children:w.status}),w.plagiarism?.detected&&e.jsxs("span",{className:"status-badge plagiarized",style:{display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(he,{size:11})," Plag"]}),(w.integrity?.integrityViolation||w.tabSwitches>0)&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(he,{size:10})," ",w.integrity?.tabSwitches||w.tabSwitches||0," Tab"]}),w.cameraBlockedCount>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:["ðŸ“· ",w.cameraBlockedCount," Cam"]}),w.phoneDetectionCount>0&&e.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:["ðŸ“± ",w.phoneDetectionCount," Phone"]})]})}),e.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(w.submittedAt).toLocaleString()}),e.jsx("td",{children:e.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:w.subType==="aptitude"?e.jsxs("button",{onClick:()=>A(w),style:{background:"rgba(139, 92, 246, 0.1)",border:"none",color:"#8b5cf6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Xe,{size:14})," Results"]}):w.subType==="global"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>n(w.id),style:{background:"var(--primary-alpha)",border:"none",color:"var(--primary)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Xe,{size:14})," Full Report"]}),e.jsx("button",{onClick:()=>U(w),style:{background:"var(--danger-alpha)",border:"none",color:"var(--danger)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:e.jsx(ps,{size:14})})]}):w.subType==="ml-task"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>T(w),style:{background:"rgba(6, 182, 212, 0.1)",border:"none",color:"#06b6d4",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Xe,{size:14})," ML Report"]}),e.jsx("button",{onClick:()=>U(w),style:{background:"var(--danger-alpha)",border:"none",color:"var(--danger)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:e.jsx(ps,{size:14})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>S(w),style:{background:"var(--primary-alpha)",border:"none",color:"var(--primary)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Xe,{size:14})," Report"]}),e.jsx("button",{onClick:()=>U(w),style:{background:"var(--danger-alpha)",border:"none",color:"var(--danger)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:e.jsx(ps,{size:14})})]})})})]},w.id))})]})}),B&&e.jsx(Ei,{submission:B,user:t,onClose:()=>S(null)}),o&&e.jsx(Ni,{submission:o,onClose:()=>T(null)}),y&&e.jsx(mr,{submission:y,onClose:()=>A(null),isStudentView:!0}),g&&e.jsx(ur,{submissionId:g,onClose:()=>n(null),isStudentView:!0})]})}function Ei({submission:t,user:r,onClose:c}){const f=h=>{if(!h)return{score:0,max:0,comment:""};const i=h.match(/(\d+)\/(\d+)/);return i?{score:parseInt(i[1]),max:parseInt(i[2]),comment:h.replace(/\d+\/\d+\s*[-â€“]?\s*/,"").trim()}:{score:0,max:0,comment:h}},a=t.analysis||{},x={correctness:f(a.correctness),efficiency:f(a.efficiency),codeStyle:f(a.codeStyle),bestPractices:f(a.bestPractices)},l=({label:h,icon:i,score:m,max:p,comment:B,color:S})=>e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i,e.jsx("span",{style:{fontWeight:600,fontSize:"0.9rem"},children:h})]}),e.jsxs("span",{style:{fontWeight:700,color:S},children:[m,"/",p]})]}),e.jsx("div",{style:{background:"var(--bg-dark)",borderRadius:"0.5rem",height:"8px",overflow:"hidden"},children:e.jsx("div",{style:{width:p>0?`${m/p*100}%`:"0%",height:"100%",background:`linear-gradient(90deg, ${S}, ${S}88)`,borderRadius:"0.5rem",transition:"width 0.5s ease"}})}),B&&e.jsx("p",{style:{margin:"0.5rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)"},children:B})]});return e.jsx("div",{className:"modal-overlay",onClick:c,children:e.jsxs("div",{className:"modal-content",onClick:h=>h.stopPropagation(),style:{maxWidth:"900px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:t.status==="accepted"?"linear-gradient(135deg, var(--success), #06b6d4)":"linear-gradient(135deg, var(--danger), var(--warning))",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ve,{size:20,color:"white"})}),e.jsx("h2",{children:"Submission Report"})]}),e.jsx("button",{onClick:c,className:"modal-close",children:e.jsx(me,{size:20})})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"75vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"var(--bg-dark)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Student"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600,fontSize:"1.1rem"},children:r?.name})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submitted At"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:new Date(t.submittedAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Language"}),e.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.language})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:t.status==="accepted"?"var(--success-alpha)":"var(--danger-alpha)",borderRadius:"1rem",border:`1px solid ${t.status==="accepted"?"var(--success)":"var(--danger)"}`},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"3rem",fontWeight:800,color:t.status==="accepted"?"var(--success)":"var(--danger)"},children:t.score}),e.jsx("div",{style:{color:"var(--text-muted)"},children:"AI Evaluation Score"})]}),e.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"1rem",background:t.status==="accepted"?"var(--success-alpha)":"var(--danger-alpha)",color:t.status==="accepted"?"var(--success)":"var(--danger)",fontWeight:700,fontSize:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.status==="accepted"?e.jsx(ge,{size:24}):e.jsx(me,{size:24}),t.status?.toUpperCase()]})]}),(a.correctness||a.efficiency||a.codeStyle||a.bestPractices)&&e.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"var(--bg-dark)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:[e.jsxs("h4",{style:{margin:"0 0 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ae,{size:18,color:"var(--primary)"})," Detailed Score Breakdown"]}),e.jsx(l,{label:"Correctness",icon:e.jsx(ge,{size:16,color:"#10b981"}),score:x.correctness.score,max:x.correctness.max||40,comment:x.correctness.comment,color:"#10b981"}),e.jsx(l,{label:"Efficiency",icon:e.jsx(qt,{size:16,color:"#3b82f6"}),score:x.efficiency.score,max:x.efficiency.max||25,comment:x.efficiency.comment,color:"#3b82f6"}),e.jsx(l,{label:"Code Style",icon:e.jsx(Xe,{size:16,color:"#8b5cf6"}),score:x.codeStyle.score,max:x.codeStyle.max||20,comment:x.codeStyle.comment,color:"#8b5cf6"}),e.jsx(l,{label:"Best Practices",icon:e.jsx(lt,{size:16,color:"#f59e0b"}),score:x.bestPractices.score,max:x.bestPractices.max||15,comment:x.bestPractices.comment,color:"#f59e0b"})]}),t.plagiarism?.detected&&e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"var(--danger-alpha)",borderRadius:"0.75rem",border:"1px solid var(--danger)",display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(he,{size:24,color:"var(--danger)"}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"var(--danger)"},children:"Plagiarism Detected"}),e.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["This code matches a submission from ",t.plagiarism.copiedFromName]})]})]}),t.integrity?.integrityViolation&&e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.75rem",border:"1px solid #f59e0b",display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(he,{size:24,color:"#f59e0b"}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#f59e0b"},children:"Integrity Violation"}),e.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["Tab switches detected: ",t.integrity.tabSwitches,". Score was capped due to academic integrity concerns."]})]})]}),(t.tabSwitches>0||t.copyPasteAttempts>0||t.cameraBlockedCount>0||t.phoneDetectionCount>0)&&e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"var(--bg-dark)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#f59e0b"},children:[e.jsx(he,{size:18})," Proctoring Violations"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[t.tabSwitches>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Xe,{size:18,color:"#f59e0b"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.tabSwitches," Tab Switches"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.tabSwitches*5,25)," pts"]})]})]}),t.copyPasteAttempts>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“‹"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.copyPasteAttempts," Copy/Paste"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.copyPasteAttempts*3,15)," pts"]})]})]}),t.cameraBlockedCount>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“·"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.cameraBlockedCount," Camera Blocked"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.cameraBlockedCount*10,30)," pts"]})]})]}),t.phoneDetectionCount>0&&e.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“±"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.phoneDetectionCount," Phone Detected"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.phoneDetectionCount*15,45)," pts"]})]})]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ct,{size:18,color:"var(--primary)"})," AI Feedback"]}),e.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.5rem"},children:t.feedback||"No feedback provided."})]}),t.aiExplanation&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Xe,{size:18,color:"var(--secondary)"})," Why this score?"]}),e.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--secondary-alpha)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid var(--secondary)"},children:t.aiExplanation})]}),t.suggestions&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Rt,{size:18,color:"#fbbf24"})," Improvement Suggestion"]}),e.jsx("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))",padding:"1rem",borderRadius:"0.5rem",border:"1px solid rgba(251, 191, 36, 0.3)"},children:e.jsx("p",{style:{color:"#fbbf24",margin:0,fontSize:"0.95rem"},children:t.suggestions})})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Submitted Code"}),e.jsx("pre",{style:{background:"var(--code-bg)",padding:"1.5rem",borderRadius:"0.5rem",overflow:"auto",maxHeight:"300px",fontSize:"0.85rem",fontFamily:"monospace",color:"var(--code-text)",border:"1px solid var(--border-color)"},children:t.code})]})]})]})})}function Ni({submission:t,onClose:r}){const c=(t.submissionType||"").includes("github"),f=x=>{if(!x||x==="N/A")return null;const l=x.match(/(\d+)/);return l?parseInt(l[1]):null},a=[{label:"Correctness",value:f(t.analysis?.correctness),color:"#3b82f6"},{label:"Code Quality",value:f(t.analysis?.efficiency),color:"#8b5cf6"},{label:"Documentation",value:f(t.analysis?.codeStyle),color:"#06b6d4"},{label:"Model Performance",value:f(t.analysis?.bestPractices),color:"#10b981"}].filter(x=>x.value!==null);return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #06b6d4, #0891b2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Me,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"#06b6d4",textTransform:"uppercase",fontWeight:600},children:"ML Task Report"}),e.jsx("h2",{style:{margin:0,fontSize:"1.1rem"},children:t.itemTitle||"ML Task"})]})]}),e.jsx("button",{onClick:r,className:"modal-close",children:e.jsx(me,{size:20})})]}),e.jsxs("div",{className:"modal-body",style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",marginBottom:"2rem",padding:"1.5rem",borderRadius:"1rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",border:`1px solid ${t.status==="accepted"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[e.jsx("div",{style:{width:"90px",height:"90px",borderRadius:"50%",background:`conic-gradient(${t.score>=80?"#10b981":t.score>=60?"#f59e0b":"#ef4444"} ${(t.score||0)*3.6}deg, rgba(255,255,255,0.05) 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsxs("div",{style:{width:"76px",height:"76px",borderRadius:"50%",background:"var(--bg-card)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"1.6rem",fontWeight:800,color:"var(--text-main)"},children:t.score}),e.jsx("span",{style:{fontSize:"0.65rem",color:"var(--text-muted)"},children:"SCORE"})]})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem 1rem",borderRadius:"2rem",marginBottom:"0.5rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",color:t.status==="accepted"?"#10b981":"#ef4444",fontWeight:700,fontSize:"0.9rem"},children:[t.status==="accepted"?e.jsx(ge,{size:16}):e.jsx(me,{size:16}),(t.status||"pending").toUpperCase()]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"0.5rem"},children:[e.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:["ðŸ“… ",new Date(t.submittedAt).toLocaleString()]}),e.jsx("span",{style:{fontSize:"0.8rem",color:"#06b6d4",fontWeight:600},children:c?"ðŸ”— GitHub Submission":"ðŸ“ File Upload"})]})]})]}),a.length>0&&e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-main)"},children:[e.jsx(It,{size:18,color:"#06b6d4"})," Performance Metrics"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:a.map(x=>e.jsxs("div",{style:{background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:x.label}),e.jsxs("span",{style:{fontWeight:700,color:x.value>=80?"#10b981":x.value>=60?"#f59e0b":"#ef4444"},children:[x.value,"%"]})]}),e.jsx("div",{style:{height:"6px",background:"rgba(255,255,255,0.05)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${x.value}%`,height:"100%",background:x.color,borderRadius:"3px",transition:"width 1s ease-out"}})})]},x.label))})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ct,{size:18,color:"#06b6d4"})," AI Feedback"]}),e.jsx("div",{style:{background:"var(--bg-dark)",padding:"1.25rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)",whiteSpace:"pre-wrap",color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.7",maxHeight:"300px",overflowY:"auto"},children:t.feedback||"No feedback provided."})]}),t.aiExplanation&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Xe,{size:18,color:"#8b5cf6"})," Summary"]}),e.jsx("div",{style:{background:"rgba(139, 92, 246, 0.05)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid rgba(139, 92, 246, 0.2)",color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.6"},children:t.aiExplanation})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c?e.jsx(Lt,{size:18,color:"var(--text-main)"}):e.jsx(Ve,{size:18,color:"var(--text-main)"}),c?"GitHub Repository":"Submitted Code"]}),c?e.jsx("div",{style:{background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border-color)"},children:e.jsxs("a",{href:t.code,target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6",display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[e.jsx(Dr,{size:16})," ",t.code]})}):e.jsx("pre",{style:{background:"var(--bg-dark)",padding:"1.25rem",borderRadius:"0.75rem",overflow:"auto",maxHeight:"300px",fontSize:"0.8rem",fontFamily:"monospace",color:"var(--text-main)",border:"1px solid var(--border-color)",lineHeight:"1.6"},children:t.code})]})]})]})})}function Li({user:t}){const[r,c]=s.useState([]),[f,a]=s.useState(!0),[x,l]=s.useState(null),[h,i]=s.useState(!1),[m,p]=s.useState([]),[B,S]=s.useState(null);s.useEffect(()=>{const g=async()=>{try{const z=await Q.get(`${xe}/global-tests?status=live`),R=await Q.get(`${xe}/tests/allocated-to/${t.id}`),q=Array.isArray(z.data)?z.data:[],U=Array.isArray(R.data)?R.data:[],K=q.filter(k=>{const D=U.find(w=>w.test_id===k.id);return!D||!D.has_allocations?!0:D.is_allocated_to_student});c(K)}catch(z){if(z.response?.status===503)c([]);else{console.error(z);try{const R=await Q.get(`${xe}/global-tests?status=live`);c(Array.isArray(R.data)?R.data:[])}catch{c([])}}}finally{a(!1)}},n=async()=>{try{const z=await Q.get(`${xe}/global-test-submissions?studentId=${t.id}`);p(Array.isArray(z.data)?z.data:[])}catch{p([])}};g(),n()},[t.id]);const o=g=>m.filter(n=>n.testId===g).length,T=g=>m.find(n=>n.testId===g),d=(g,n)=>{const z=m.some(U=>U.testId===g&&U.status==="passed"),R=o(g),q=n?.maxAttempts??1;return z||q!==-1&&R>=q},u=async g=>{if(g.startTime&&new Date(g.startTime)>new Date){alert("This test is not yet available.");return}if(g.deadline&&new Date(g.deadline)<new Date){alert("This test has expired.");return}const n=m.filter(R=>R.testId===g.id).length,z=g.maxAttempts??1;if(z!==-1&&n>=z){alert(`Max attempts (${z}) reached for this test.`);return}try{const R=await Q.get(`${xe}/global-tests/${g.id}`);l(R.data),i(!0)}catch(R){alert(R.response?.data?.error||"Failed to load test")}},y=g=>{i(!1),l(null),g&&S(g),Q.get(`${xe}/global-test-submissions?studentId=${t.id}`).then(n=>p(Array.isArray(n.data)?n.data:[])).catch(()=>{})};if(f)return e.jsx("div",{className:"loading-spinner"});if(h&&x)return e.jsx(di,{test:x,user:t,onClose:()=>{i(!1),l(null)},onComplete:y});m.filter(g=>g.status==="passed").length;const A=()=>{if(!B)return null;const g=B.sectionScores||{},n=B.status==="passed";return e.jsxs("div",{style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.9)",backdropFilter:"blur(8px)",zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"auto",animation:"fadeIn 0.3s ease-out"},children:[e.jsx("style",{children:`
                    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                    @keyframes scaleIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
                    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
                `}),e.jsxs("div",{style:{background:"rgba(30,41,59,0.98)",borderRadius:"24px",border:`2px solid ${n?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)"}`,maxWidth:800,width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:`0 25px 50px -12px ${n?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,animation:"scaleIn 0.4s ease-out"},children:[e.jsxs("div",{style:{padding:"2rem 2rem 1.5rem",background:n?"linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(6, 182, 212, 0.1))":"linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(251, 146, 60, 0.1))",borderBottom:`1px solid ${n?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`,textAlign:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:n?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",boxShadow:`0 8px 24px ${n?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)"}`,animation:n?"pulse 2s ease-in-out infinite":"none"},children:n?e.jsx(Qe,{size:40,color:"white"}):e.jsx(me,{size:40,color:"white"})}),e.jsx("h2",{style:{margin:"0 0 0.5rem",color:"white",fontSize:"1.75rem",fontWeight:800},children:n?"ðŸŽ‰ Congratulations!":"Test Completed"}),e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.7)",fontSize:"1rem"},children:n?"You have successfully passed the assessment!":"Keep practicing to improve your score."})]}),e.jsxs("div",{style:{padding:"2rem",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"2rem",flexWrap:"wrap",justifyContent:"center"},children:[e.jsxs("div",{style:{padding:"1.5rem 2.5rem",background:n?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",borderRadius:16,border:`2px solid ${n?"rgba(16,185,129,0.4)":"rgba(239,68,68,0.4)"}`,textAlign:"center",minWidth:"180px"},children:[e.jsxs("div",{style:{fontSize:"3.5rem",fontWeight:900,color:n?"#10b981":"#ef4444",lineHeight:1},children:[B.score??B.overallPercentage,"%"]}),e.jsx("div",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.6)",marginTop:"0.5rem",textTransform:"uppercase",letterSpacing:"2px",fontWeight:600},children:"Overall Score"})]}),e.jsxs("div",{style:{padding:"1.5rem 2rem",background:"rgba(139, 92, 246, 0.1)",borderRadius:16,border:"1px solid rgba(139, 92, 246, 0.3)",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"2rem",fontWeight:800,color:"#a78bfa"},children:[B.correctCount||0,"/",B.totalQuestions||0]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.5)",marginTop:"0.25rem"},children:"Correct Answers"})]})]}),e.jsxs("h3",{style:{margin:"0 0 1rem",color:"white",fontSize:"1.1rem",fontWeight:700,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(qe,{size:18,color:"#8b5cf6"})," Section-wise Performance"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"0.75rem"},children:Object.entries(g).map(([z,R])=>{const q=R>=70?"#10b981":R>=50?"#f59e0b":"#ef4444";return e.jsxs("div",{style:{padding:"1rem",background:"rgba(30, 41, 59, 0.8)",borderRadius:12,border:"1px solid rgba(255,255,255,0.1)",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:q},children:[R,"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.5)",textTransform:"capitalize",marginTop:"0.25rem"},children:z})]},z)})})]}),e.jsx("div",{style:{padding:"1.25rem 2rem",borderTop:"1px solid rgba(139,92,246,0.2)",display:"flex",justifyContent:"center",gap:"1rem",background:"rgba(15, 23, 42, 0.5)"},children:e.jsx("button",{type:"button",onClick:()=>S(null),style:{padding:"0.85rem 2.5rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"12px",color:"white",fontWeight:700,fontSize:"1rem",cursor:"pointer",boxShadow:"0 4px 14px rgba(139, 92, 246, 0.4)",transition:"all 0.2s"},onMouseOver:z=>z.target.style.transform="translateY(-2px)",onMouseOut:z=>z.target.style.transform="translateY(0)",children:"Close & View Results"})})]})]})};return e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:56,height:56,borderRadius:16,background:"linear-gradient(135deg, #06b6d4, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(qe,{size:28,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Global Complete Tests"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Aptitude, Verbal, Logical, Coding, SQL â€“ all in one test"})]})]})}),r.length===0?e.jsx("div",{style:{textAlign:"center",padding:"3rem",background:"var(--bg-card)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:e.jsx("p",{style:{color:"var(--text-muted)"},children:"No global tests available. Check back later."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(6, 182, 212, 0.1)",color:"#06b6d4"},children:e.jsx(qe,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Available"}),e.jsx("span",{className:"stat-value",children:r.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:e.jsx(ge,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Submitted"}),e.jsx("span",{className:"stat-value",children:m.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:e.jsx(Qe,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Passed"}),e.jsx("span",{className:"stat-value",children:m.filter(g=>g.status==="passed").length})]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:r.map(g=>{const n=d(g.id,g),z=T(g.id),R=o(g.id),q=z?.status==="passed",U=g.maxAttempts===-1||R<(g.maxAttempts||1),K=!q&&U&&R>0;return e.jsxs("div",{className:"card glass",style:{padding:"1.5rem",position:"relative",overflow:"hidden"},children:[R>0&&e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",padding:"0.25rem 0.75rem",borderRadius:"20px",background:q?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:q?"#10b981":"#ef4444",fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.25rem"},children:q?e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:14})," Passed"]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{size:14})," Failed"]})}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #06b6d4, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(qe,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:600},children:g.title}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[e.jsx("span",{className:`difficulty-badge ${g.difficulty?.toLowerCase()}`,children:g.difficulty}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[e.jsx(He,{size:14})," ",g.duration," min"]})]})]})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"1.5rem",fontSize:"0.85rem",color:"var(--text-muted)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ae,{size:16,color:"#06b6d4"}),e.jsxs("span",{children:[g.totalQuestions," Questions"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Qe,{size:16,color:"#f59e0b"}),e.jsxs("span",{children:["Pass: ",g.passingScore,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(he,{size:16,color:"#ef4444"}),e.jsxs("span",{children:["Tab Limit: ",g.maxTabSwitches||3]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(qt,{size:16,color:"#3b82f6"}),e.jsxs("span",{children:["Attempts: ",R,"/",g.maxAttempts===-1?"âˆž":g.maxAttempts||1]})]}),g.deadline&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:g.startTime&&new Date(g.startTime)>new Date?"#f59e42":g.deadline&&new Date(g.deadline)<new Date?"#ef4444":"var(--text-muted)"},children:[e.jsx(He,{size:16,color:g.startTime&&new Date(g.startTime)>new Date?"#f59e42":g.deadline&&new Date(g.deadline)<new Date?"#ef4444":"#10b981"}),e.jsx("span",{children:g.startTime&&new Date(g.startTime)>new Date?"Not Yet Started":g.deadline&&new Date(g.deadline)<new Date?"Expired":g.deadline?`Due: ${new Date(g.deadline).toLocaleDateString()}`:""})]})]}),R>0&&z&&e.jsx("div",{style:{background:"var(--bg-tertiary)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",border:"1px solid var(--border-color)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:"Your Score"}),e.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,color:q?"#10b981":"#ef4444"},children:[z.overallPercentage,"%"]})]})}),e.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:n?e.jsxs("button",{disabled:!0,style:{flex:1,padding:"0.75rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"10px",color:"#10b981",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",cursor:"not-allowed"},children:[e.jsx(ge,{size:18})," Completed"]}):K?e.jsxs("button",{onClick:()=>u(g),className:"btn-create-new",style:{flex:1,padding:"0.75rem",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:["Retry Test ",e.jsx(Xs,{size:18})]}):g.startTime&&new Date(g.startTime)>new Date?e.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(245, 158, 66, 0.15)",borderRadius:"10px",color:"#f59e42",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(me,{size:18})," Not Yet Started"]}):g.deadline&&new Date(g.deadline)<new Date?e.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(107, 114, 128, 0.2)",borderRadius:"10px",color:"#6b7280",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(me,{size:18})," Test Expired"]}):e.jsxs("button",{onClick:()=>u(g),className:"btn-create-new",style:{flex:1,padding:"0.75rem",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:["Start Test ",e.jsx(zt,{size:18})]})})]},g.id)})})]}),e.jsx(A,{})]})}function Bi({user:t}){const[r,c]=s.useState([]),[f,a]=s.useState(!0),[x,l]=s.useState(null),[h,i]=s.useState(!1),[m,p]=s.useState([]),[B,S]=s.useState(null);s.useEffect(()=>{o(),T()},[t.id]);const o=async()=>{try{const k=await Q.get(`${xe}/aptitude?status=live`);let D=k.data;try{const w=await Q.get(`${xe}/aptitude/allocated-to/${t.id}`),re=new Set(w.data.map(te=>te.id));D=await Promise.all(k.data.map(async te=>{try{return(await Q.get(`${xe}/aptitude/${te.id}/allocated-students`)).data.count>0?re.has(te.id)?te:null:te}catch{return te}})),D=D.filter(te=>te!==null)}catch{console.warn("Could not fetch allocated tests, showing all live tests")}c(D),a(!1)}catch(k){console.error("Error fetching tests:",k),a(!1)}},T=async()=>{try{const k=await Q.get(`${xe}/aptitude-submissions?studentId=${t.id}`);p(k.data)}catch(k){console.error("Error fetching submissions:",k)}},d=k=>{if(!k.startTime)return!0;const D=new Date(k.startTime),w=new Date,re=Date.UTC(D.getUTCFullYear(),D.getUTCMonth(),D.getUTCDate(),D.getUTCHours(),D.getUTCMinutes());return Date.UTC(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate(),w.getUTCHours(),w.getUTCMinutes())>=re},u=k=>{if(!k.deadline)return!1;const D=new Date(k.deadline),w=new Date,re=Date.UTC(D.getUTCFullYear(),D.getUTCMonth(),D.getUTCDate(),D.getUTCHours(),D.getUTCMinutes());return Date.UTC(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate(),w.getUTCHours(),w.getUTCMinutes())>re},y=async k=>{if(!d(k)){alert("This test is not yet available. Please check the start time.");return}if(u(k)){alert("This test has expired. The deadline has passed.");return}if(!R(k)&&z(k.id)>0){alert(`You have reached the maximum number of attempts (${k.maxAttempts}) for this test.`);return}try{const D=await Q.get(`${xe}/aptitude/${k.id}`);l(D.data),i(!0)}catch{alert("Error loading test")}},A=k=>{T(),i(!1),l(null)},g=k=>m.some(D=>D.testId===k),n=k=>{const D=m.filter(w=>w.testId===k);return D.length>0?D[0]:null},z=k=>m.filter(D=>D.testId===k).length,R=k=>{const D=z(k.id),w=k.maxAttempts;return w===-1?!0:D<(w||1)},q=k=>{const D=z(k.id),w=k.maxAttempts;return w===-1?"âˆž":Math.max(0,(w||1)-D)},K=(()=>{const k={};return m.forEach(D=>{k[D.testId]||(k[D.testId]=D)}),Object.values(k)})();return f?e.jsx("div",{className:"loading-spinner"}):h&&x?e.jsx(ei,{test:x,user:t,onClose:()=>{i(!1),l(null)},onComplete:A}):e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Me,{size:28,color:"white"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Aptitude Tests"}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Test your reasoning, analytical, and problem-solving skills"})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:e.jsx(Me,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Available Tests"}),e.jsx("span",{className:"stat-value",children:r.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:e.jsx(ge,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Completed"}),e.jsx("span",{className:"stat-value",children:K.length})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:e.jsx(Ae,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Avg Score"}),e.jsxs("span",{className:"stat-value",children:[K.length>0?Math.round(K.reduce((k,D)=>k+D.score,0)/K.length):0,"%"]})]})]}),e.jsxs("div",{className:"stat-card glass",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b"},children:e.jsx(Qe,{size:24})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-label",children:"Passed"}),e.jsx("span",{className:"stat-value",children:K.filter(k=>k.status==="passed").length})]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:r.map(k=>{const D=g(k.id),w=n(k.id);return e.jsxs("div",{className:"card glass",style:{padding:"1.5rem",position:"relative",overflow:"hidden"},children:[D&&e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",padding:"0.25rem 0.75rem",borderRadius:"20px",background:w?.status==="passed"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:w?.status==="passed"?"#10b981":"#ef4444",fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.25rem"},children:w?.status==="passed"?e.jsxs(e.Fragment,{children:[e.jsx(ge,{size:14})," Passed"]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{size:14})," Failed"]})}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Me,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:600},children:k.title}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[e.jsx("span",{className:`difficulty-badge ${k.difficulty?.toLowerCase()}`,children:k.difficulty}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[e.jsx(He,{size:14})," ",k.duration," min"]})]})]})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"1.5rem",fontSize:"0.85rem",color:"var(--text-muted)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ae,{size:16,color:"#8b5cf6"}),e.jsxs("span",{children:[k.questionCount||k.totalQuestions," Questions"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Qe,{size:16,color:"#f59e0b"}),e.jsxs("span",{children:["Pass: ",k.passingScore,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(he,{size:16,color:"#ef4444"}),e.jsxs("span",{children:["Tab Limit: ",k.maxTabSwitches||3]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(qt,{size:16,color:"#06b6d4"}),e.jsxs("span",{children:["Attempts: ",z(k.id),"/",k.maxAttempts===-1?"âˆž":k.maxAttempts||1]})]}),k.startTime&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:d(k)?"#10b981":"#f59e42"},children:[e.jsx(He,{size:16,color:d(k)?"#10b981":"#f59e42"}),e.jsx("span",{children:d(k)?`Started: ${new Date(k.startTime).toLocaleDateString()}`:`Starts: ${new Date(k.startTime).toLocaleString()}`})]}),k.deadline&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:u(k)?"#ef4444":"var(--text-muted)"},children:[e.jsx(He,{size:16,color:u(k)?"#ef4444":"#10b981"}),e.jsx("span",{children:u(k)?"Expired":`Due: ${new Date(k.deadline).toLocaleString()}`})]})]}),D&&w&&e.jsxs("div",{style:{background:"var(--bg-tertiary)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:"Your Score"}),e.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,color:w.status==="passed"?"#10b981":"#ef4444"},children:[w.score,"%"]})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:e.jsxs("span",{children:[w.correctCount,"/",w.totalQuestions," Correct"]})})]}),e.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:D?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>S(w),style:{flex:1,padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"10px",color:"#3b82f6",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(Xe,{size:18})," View Results"]}),R(k)?e.jsxs("button",{onClick:()=>y(k),style:{padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"10px",color:"#8b5cf6",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(qt,{size:18})," Retry (",q(k)," left)"]}):e.jsxs("div",{style:{padding:"0.75rem 1rem",background:"rgba(107, 114, 128, 0.1)",border:"1px solid rgba(107, 114, 128, 0.3)",borderRadius:"10px",color:"#6b7280",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(me,{size:18})," No retries left"]})]}):d(k)?u(k)?e.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(107, 114, 128, 0.2)",border:"none",borderRadius:"10px",color:"#6b7280",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(me,{size:18})," Test Expired"]}):e.jsxs("button",{onClick:()=>y(k),style:{flex:1,padding:"0.75rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"10px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(Ze,{size:18})," Start Test"]}):e.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(245, 158, 66, 0.15)",border:"none",borderRadius:"10px",color:"#f59e42",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(me,{size:18})," Not Yet Started"]})})]},k.id)})}),r.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"4rem",color:"var(--text-muted)"},children:[e.jsx(Me,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),e.jsx("p",{children:"No aptitude tests available at the moment."})]}),B&&e.jsx("div",{className:"modal-overlay",onClick:()=>S(null),children:e.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-with-icon",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:B.status==="passed"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center"},children:B.status==="passed"?e.jsx(Qe,{size:20,color:"white"}):e.jsx(Ae,{size:20,color:"white"})}),e.jsx("h2",{children:B.testTitle})]}),e.jsx("button",{onClick:()=>S(null),className:"modal-close",children:e.jsx(me,{size:20})})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#3b82f6"},children:[B.score,"%"]}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Score"})]}),e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#10b981"},children:B.correctCount}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Correct"})]}),e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#ef4444"},children:B.totalQuestions-B.correctCount}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Wrong"})]})]}),e.jsx("h4",{style:{marginBottom:"1rem"},children:"Question Breakdown"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:B.questionResults?.map((k,D)=>e.jsx("div",{style:{background:k.isCorrect?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",border:`1px solid ${k.isCorrect?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"12px",padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[k.isCorrect?e.jsx(ge,{size:20,color:"#10b981",style:{flexShrink:0,marginTop:"2px"}}):e.jsx(me,{size:20,color:"#ef4444",style:{flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("p",{style:{margin:"0 0 0.5rem",fontWeight:500,fontSize:"0.9rem"},children:["Q",D+1,": ",k.question]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.8rem"},children:[e.jsxs("span",{children:["Your: ",e.jsx("strong",{style:{color:k.isCorrect?"#10b981":"#ef4444"},children:k.userAnswer})]}),!k.isCorrect&&e.jsxs("span",{children:["Correct: ",e.jsx("strong",{style:{color:"#10b981"},children:k.correctAnswer})]})]}),k.explanation&&e.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)",fontStyle:"italic"},children:["ðŸ’¡ ",k.explanation]})]})]})},D))})]})]})})]})}function Di({user:t}){const{t:r}=tr(),[c,f]=s.useState("learning-path"),[a,x]=s.useState(null),[l,h]=s.useState(null),[i,m]=s.useState(null),[p,B]=s.useState(!0);if(s.useEffect(()=>{B(!0),(async()=>{try{const[T,d,u]=await Promise.all([Q.get(`${xe}/analytics/learning-path/${t.id}`),Q.get(`${xe}/analytics/peer-comparison/${t.id}`),Q.get(`${xe}/analytics/topics?studentId=${t.id}`)]);x(T.data),h(d.data),m(u.data)}catch(T){console.error(T)}B(!1)})()},[t.id]),p)return e.jsx("div",{className:"loading-spinner"});const S=[{id:"learning-path",label:r("learning_path"),icon:e.jsx(Zs,{size:16})},{id:"peer-comparison",label:r("peer_comparison"),icon:e.jsx(Vs,{size:16})},{id:"topic-analysis",label:r("topic_analysis"),icon:e.jsx(Js,{size:16})}];return e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:S.map(o=>e.jsxs("button",{onClick:()=>f(o.id),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1.2rem",borderRadius:"10px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.85rem",background:c===o.id?"var(--primary)":"var(--card-bg)",color:c===o.id?"#fff":"var(--text-secondary)",boxShadow:c===o.id?"0 4px 15px rgba(59,130,246,0.3)":"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.2s"},children:[o.icon," ",o.label]},o.id))}),c==="learning-path"&&a&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{className:"dashboard-stat-card stat-card-blue",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #1e40af, #3b82f6)"},children:e.jsx(Ae,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsxs("div",{className:"stat-number",children:[a.overallPassRate,"%"]}),e.jsx("div",{className:"stat-label-text",children:r("overall_pass_rate")})]})]})}),e.jsx("div",{className:"dashboard-stat-card stat-card-green",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #047857, #10b981)"},children:e.jsx(ge,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:a.totalPassed}),e.jsx("div",{className:"stat-label-text",children:r("problems_passed")})]})]})}),e.jsx("div",{className:"dashboard-stat-card stat-card-purple",children:e.jsxs("div",{className:"stat-card-inner",children:[e.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #6d28d9, #8b5cf6)"},children:e.jsx(As,{size:22,color:"#fff"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:a.totalAttempts}),e.jsx("div",{className:"stat-label-text",children:r("total_attempts")})]})]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",style:{color:"#ef4444"},children:[e.jsx(he,{size:18})," ",r("weak_areas")]}),a.weakAreas.length>0?a.weakAreas.map((o,T)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderRadius:"8px",background:"rgba(239,68,68,0.06)",marginBottom:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600,fontSize:"0.9rem",textTransform:"capitalize"},children:o.category}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[o.attempts," ",r("attempts_made")]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("span",{style:{fontWeight:700,color:"#ef4444",fontSize:"1.1rem"},children:[o.avgScore,"%"]}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"#ef4444"},children:[o.passRate,"% ",r("pass_rate")]})]})]},T)):e.jsx("div",{style:{color:"var(--text-muted)",padding:"1rem",textAlign:"center"},children:r("no_weak_areas")})]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",style:{color:"#10b981"},children:[e.jsx(ge,{size:18})," ",r("strengths")]}),a.strengths.length>0?a.strengths.map((o,T)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderRadius:"8px",background:"rgba(16,185,129,0.06)",marginBottom:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600,fontSize:"0.9rem",textTransform:"capitalize"},children:o.category}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[o.attempts," ",r("attempts_made")]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("span",{style:{fontWeight:700,color:"#10b981",fontSize:"1.1rem"},children:[o.avgScore,"%"]}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"#10b981"},children:[o.passRate,"% ",r("pass_rate")]})]})]},T)):e.jsx("div",{style:{color:"var(--text-muted)",padding:"1rem",textAlign:"center"},children:r("no_data")})]})]}),a.languageProficiency.length>0&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(De,{size:18,color:"#3b82f6"})," ",r("language_proficiency")]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:a.languageProficiency.map((o,T)=>e.jsxs("div",{style:{padding:"1rem",borderRadius:"12px",background:"var(--bg-secondary)",textAlign:"center"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1.1rem",marginBottom:"0.25rem"},children:o.language}),e.jsx("div",{style:{display:"inline-block",padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,background:o.level==="Advanced"?"rgba(16,185,129,0.15)":o.level==="Intermediate"?"rgba(251,191,36,0.15)":"rgba(239,68,68,0.15)",color:o.level==="Advanced"?"#10b981":o.level==="Intermediate"?"#f59e0b":"#ef4444"},children:o.level}),e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsx("div",{style:{height:"6px",borderRadius:"3px",background:"rgba(0,0,0,0.1)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${o.avgScore}%`,borderRadius:"3px",background:o.level==="Advanced"?"#10b981":o.level==="Intermediate"?"#f59e0b":"#ef4444",transition:"width 0.5s"}})}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.25rem"},children:[o.avgScore,"% avg â€¢ ",o.attempts," solved"]})]})]},T))})]}),e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(Ct,{size:18,color:"#f59e0b"})," ",r("recommended_problems")]}),a.recommendations.length>0?e.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:a.recommendations.map((o,T)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem 1rem",borderRadius:"10px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.85rem",background:o.priority>=5?"rgba(239,68,68,0.12)":o.priority>=3?"rgba(251,191,36,0.12)":"rgba(59,130,246,0.12)",color:o.priority>=5?"#ef4444":o.priority>=3?"#f59e0b":"#3b82f6"},children:T+1}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:o.title}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:o.reason})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,background:o.difficulty==="easy"?"rgba(16,185,129,0.12)":o.difficulty==="medium"?"rgba(251,191,36,0.12)":"rgba(239,68,68,0.12)",color:o.difficulty==="easy"?"#10b981":o.difficulty==="medium"?"#f59e0b":"#ef4444"},children:o.difficulty}),o.language&&e.jsx("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"6px",fontSize:"0.7rem",background:"rgba(59,130,246,0.1)",color:"#3b82f6"},children:o.language})]})]},T))}):e.jsx("div",{style:{color:"var(--text-muted)",textAlign:"center",padding:"2rem"},children:r("complete_more_problems")})]})]}),c==="peer-comparison"&&l&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:1,minWidth:"280px",padding:"1.5rem",borderRadius:"16px",background:"linear-gradient(135deg, #1e40af, #3b82f6)",color:"#fff",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.85rem",opacity:.9},children:r("your_rank")}),e.jsxs("div",{style:{fontSize:"3rem",fontWeight:800},children:["#",l.you.rank]}),e.jsxs("div",{style:{fontSize:"0.8rem",opacity:.8},children:[r("out_of")," ",l.you.totalStudents," ",r("students")]})]}),e.jsxs("div",{style:{flex:1,minWidth:"280px",padding:"1.5rem",borderRadius:"16px",background:"linear-gradient(135deg, #059669, #10b981)",color:"#fff",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.85rem",opacity:.9},children:r("percentile")}),e.jsxs("div",{style:{fontSize:"3rem",fontWeight:800},children:[l.you.percentile,"th"]}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.8},children:r("top_performer_msg")})]})]}),e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(It,{size:18,color:"#8b5cf6"})," ",r("your_score_vs_class")]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem"},children:[{label:r("avg_score"),yours:l.you.avgScore,classVal:l.classAverage.avgScore,suffix:"%"},{label:r("pass_rate"),yours:l.you.passRate,classVal:l.classAverage.avgPassRate,suffix:"%"},{label:r("total_submissions"),yours:l.you.totalSubmissions,classVal:l.classAverage.avgSubmissions,suffix:""},{label:r("problems_solved_label"),yours:l.you.problemsSolved,classVal:l.classAverage.avgProblemsSolved,suffix:""},{label:r("tasks_completed"),yours:l.you.tasksDone,classVal:l.classAverage.avgTasksDone,suffix:""}].map((o,T)=>{const d=o.yours-o.classVal,u=d>0,y=d===0;return e.jsxs("div",{style:{padding:"1rem",borderRadius:"12px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.5rem",fontWeight:600,textTransform:"uppercase"},children:o.label}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:800,color:"var(--text-primary)"},children:[o.yours,o.suffix]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:r("you")})]}),e.jsxs("div",{style:{textAlign:"center",padding:"0.25rem 0.5rem",borderRadius:"8px",background:u?"rgba(16,185,129,0.1)":y?"rgba(156,163,175,0.1)":"rgba(239,68,68,0.1)"},children:[u?e.jsx(Nr,{size:14,color:"#10b981"}):y?e.jsx(Lr,{size:14,color:"#9ca3af"}):e.jsx(Br,{size:14,color:"#ef4444"}),e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:700,color:u?"#10b981":y?"#9ca3af":"#ef4444"},children:[u?"+":"",d,o.suffix]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:600,color:"var(--text-secondary)"},children:[Math.round(o.classVal),o.suffix]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:r("class_avg")})]})]})]},T)})})]}),l.scoreDistribution&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(It,{size:18,color:"#3b82f6"})," ",r("score_distribution")]}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"4px",height:"120px",padding:"0 1rem"},children:l.scoreDistribution.map((o,T)=>{const d=Math.max(...l.scoreDistribution.map(y=>y.count)),u=d>0?o.count/d*100:0;return e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontSize:"0.6rem",fontWeight:600},children:o.count}),e.jsx("div",{style:{width:"100%",height:`${u}%`,minHeight:"4px",borderRadius:"4px 4px 0 0",background:o.isYou?"linear-gradient(180deg, #3b82f6, #1e40af)":"rgba(59,130,246,0.15)",border:o.isYou?"2px solid #1e40af":"none",transition:"height 0.3s"}}),e.jsx("span",{style:{fontSize:"0.55rem",color:o.isYou?"#3b82f6":"var(--text-muted)",fontWeight:o.isYou?700:400},children:o.range})]},T)})}),e.jsx("div",{style:{textAlign:"center",fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:r("highlighted_your_position")})]}),l.languageComparison.length>0&&e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(De,{size:18,color:"#8b5cf6"})," ",r("language_vs_class")]}),e.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:l.languageComparison.map((o,T)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",borderRadius:"10px",background:"var(--bg-secondary)"},children:[e.jsx("div",{style:{width:"80px",fontWeight:700,fontSize:"0.9rem"},children:o.language}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",marginBottom:"4px"},children:[e.jsxs("span",{style:{fontSize:"0.7rem",color:"#3b82f6",width:"50px"},children:[r("you"),": ",o.yourScore,"%"]}),e.jsx("div",{style:{flex:1,height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${o.yourScore}%`,borderRadius:"4px",background:"linear-gradient(90deg, #3b82f6, #60a5fa)"}})})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"0.7rem",color:"#9ca3af",width:"50px"},children:[r("class"),": ",o.classAvg,"%"]}),e.jsx("div",{style:{flex:1,height:"8px",borderRadius:"4px",background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${o.classAvg}%`,borderRadius:"4px",background:"rgba(156,163,175,0.4)"}})})]})]}),e.jsxs("div",{style:{fontWeight:700,fontSize:"0.85rem",padding:"0.25rem 0.5rem",borderRadius:"6px",color:o.difference>0?"#10b981":o.difference<0?"#ef4444":"#9ca3af",background:o.difference>0?"rgba(16,185,129,0.1)":o.difference<0?"rgba(239,68,68,0.1)":"rgba(156,163,175,0.1)"},children:[o.difference>0?"+":"",o.difference,"%"]})]},T))})]})]}),c==="topic-analysis"&&i&&e.jsxs("div",{children:[i.byType.length>0&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(Nt,{size:18,color:"#3b82f6"})," ",r("performance_by_type")]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:i.byType.map((o,T)=>e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"12px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1rem",marginBottom:"0.75rem",textTransform:"capitalize"},children:o.type}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:r("submissions")}),e.jsx("div",{style:{fontWeight:700,fontSize:"1.2rem"},children:o.submissions})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:r("avg_score")}),e.jsxs("div",{style:{fontWeight:700,fontSize:"1.2rem",color:o.avgScore>=70?"#10b981":o.avgScore>=40?"#f59e0b":"#ef4444"},children:[o.avgScore,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:r("pass_rate")}),e.jsxs("div",{style:{fontWeight:700,color:"#10b981"},children:[o.passRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:r("fail_rate")}),e.jsxs("div",{style:{fontWeight:700,color:"#ef4444"},children:[o.failRate,"%"]})]})]}),e.jsx("div",{style:{marginTop:"0.75rem",height:"6px",borderRadius:"3px",background:"rgba(0,0,0,0.1)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${o.passRate}%`,borderRadius:"3px",background:"linear-gradient(90deg, #10b981, #34d399)",transition:"width 0.5s"}})})]},T))})]}),i.byDifficulty.length>0&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(Ae,{size:18,color:"#f59e0b"})," ",r("performance_by_difficulty")]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:i.byDifficulty.map((o,T)=>{const u={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"}[o.difficulty]||"#3b82f6";return e.jsxs("div",{style:{padding:"1.25rem",borderRadius:"12px",background:"var(--bg-secondary)",borderLeft:`4px solid ${u}`},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1rem",textTransform:"capitalize",color:u,marginBottom:"0.75rem"},children:o.difficulty}),e.jsxs("div",{style:{fontSize:"2rem",fontWeight:800},children:[o.avgScore,"%"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[o.submissions," ",r("submissions")," â€¢ ",o.passRate,"% ",r("pass_rate")]})]},T)})})]}),i.byLanguage.length>0&&e.jsxs("div",{className:"dashboard-panel",style:{marginBottom:"1.5rem"},children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(De,{size:18,color:"#8b5cf6"})," ",r("performance_by_language")]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:r("language")}),e.jsx("th",{style:{textAlign:"center",padding:"0.75rem"},children:r("submissions")}),e.jsx("th",{style:{textAlign:"center",padding:"0.75rem"},children:r("avg_score")}),e.jsx("th",{style:{textAlign:"center",padding:"0.75rem"},children:r("pass_rate")})]})}),e.jsx("tbody",{children:i.byLanguage.map((o,T)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsx("td",{style:{padding:"0.75rem",fontWeight:600},children:o.language}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:o.submissions}),e.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:700,color:o.avgScore>=70?"#10b981":o.avgScore>=40?"#f59e0b":"#ef4444"},children:[o.avgScore,"%"]}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"60px",height:"6px",borderRadius:"3px",background:"rgba(0,0,0,0.1)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${o.passRate}%`,borderRadius:"3px",background:"#10b981"}})}),e.jsxs("span",{children:[o.passRate,"%"]})]})})]},T))})]})})]}),i.topProblems.length>0&&e.jsxs("div",{className:"dashboard-panel",children:[e.jsxs("h3",{className:"panel-title",children:[e.jsx(As,{size:18,color:"#ef4444"})," ",r("most_attempted_problems")]}),e.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:i.topProblems.map((o,T)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 0.75rem",borderRadius:"8px",background:"var(--bg-secondary)"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"8px",background:"rgba(59,130,246,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.8rem",color:"#3b82f6"},children:T+1}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.85rem"},children:o.title}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:[o.type," â€¢ ",o.difficulty]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:"0.85rem"},children:[o.avgScore,"%"]}),e.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-muted)"},children:[o.attempts," attempts â€¢ ",o.passRate,"% pass"]})]})]},T))})]})]})]})}function $i({user:t}){const[r,c]=s.useState([]),[f,a]=s.useState(null),[x,l]=s.useState(!0),h=localStorage.getItem("authToken");return s.useEffect(()=>{Q.get(`${xe}/submissions?studentId=${t?.id}&limit=100`,{headers:{Authorization:`Bearer ${h}`}}).then(i=>{const m=Array.isArray(i.data)?i.data:i.data?.data||[];c(m.filter(p=>!p.isMLTask))}).catch(()=>c([])).finally(()=>l(!1))},[t]),f?e.jsxs("div",{style:{maxWidth:1100,margin:"0 auto"},children:[e.jsx("button",{onClick:()=>a(null),style:{marginBottom:16,padding:"7px 16px",cursor:"pointer",background:"var(--primary, #6366f1)",color:"#fff",border:"none",borderRadius:8,fontWeight:600,fontSize:"0.85rem"},children:"â† Back to my submissions"}),e.jsx(hr,{submissionId:f.id,submission:f})]}):x?e.jsx("div",{style:{padding:40,textAlign:"center"},children:"Loading your submissionsâ€¦"}):r.length?e.jsxs("div",{style:{maxWidth:860,margin:"0 auto"},children:[e.jsxs("p",{style:{marginBottom:12,opacity:.55,fontSize:"0.85rem"},children:[r.length," submission",r.length!==1?"s":""," â€” click one to view mentor feedback"]}),r.map(i=>{const m=i.status==="accepted"?"#4ade80":i.status==="rejected"?"#f87171":"#94a3b8",p=i.status==="accepted"?"rgba(34,197,94,0.12)":i.status==="rejected"?"rgba(239,68,68,0.12)":"rgba(148,163,184,0.12)";return e.jsxs("div",{onClick:()=>a(i),style:{padding:"13px 16px",marginBottom:8,borderRadius:10,background:"var(--card-bg, #1e293b)",border:"1px solid var(--border-color, #334155)",cursor:"pointer",display:"flex",alignItems:"center",gap:14,transition:"border-color 0.15s"},onMouseEnter:B=>B.currentTarget.style.borderColor="#6366f1",onMouseLeave:B=>B.currentTarget.style.borderColor="var(--border-color, #334155)",children:[e.jsx("div",{style:{width:36,height:36,borderRadius:8,background:"linear-gradient(135deg,#6366f1,#8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:700,fontSize:"0.9rem",flexShrink:0},children:"</>"}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"0.93rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.itemTitle||`Submission #${i.id}`}),e.jsxs("div",{style:{fontSize:"0.78rem",opacity:.55,marginTop:2},children:[i.language||"Code"," Â· ",new Date(i.submittedAt).toLocaleDateString()]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexShrink:0},children:[i.score!=null&&e.jsxs("span",{style:{fontSize:"0.8rem",fontWeight:700,color:"#fbbf24"},children:[i.score,"%"]}),e.jsx("span",{style:{fontSize:"0.72rem",padding:"2px 9px",borderRadius:20,background:p,color:m,fontWeight:600},children:(i.status||"unknown").toUpperCase()}),e.jsx(zt,{size:15,style:{opacity:.4}})]})]},i.id)})]}):e.jsxs("div",{style:{padding:40,textAlign:"center",opacity:.7},children:[e.jsx(De,{size:48,style:{marginBottom:12}}),e.jsx("p",{children:"No submissions yet. Complete a coding problem to receive code reviews."})]})}export{Ui as default};
