function TU(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Ni(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function T$(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var aE={exports:{}},Yg={};var Qz;function Cte(){if(Qz)return Yg;Qz=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:i,ref:s!==void 0?s:null,props:a}}return Yg.Fragment=e,Yg.jsx=n,Yg.jsxs=n,Yg}var Zz;function kte(){return Zz||(Zz=1,aE.exports=Cte()),aE.exports}var u=kte(),iE={exports:{}},jt={};var Jz;function Nte(){if(Jz)return jt;Jz=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),m=Symbol.iterator;function y(W){return W===null||typeof W!="object"?null:(W=m&&W[m]||W["@@iterator"],typeof W=="function"?W:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function S(W,Q,se){this.props=W,this.context=Q,this.refs=x,this.updater=se||b}S.prototype.isReactComponent={},S.prototype.setState=function(W,Q){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,Q,"setState")},S.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function C(){}C.prototype=S.prototype;function E(W,Q,se){this.props=W,this.context=Q,this.refs=x,this.updater=se||b}var k=E.prototype=new C;k.constructor=E,v(k,S.prototype),k.isPureReactComponent=!0;var I=Array.isArray;function $(){}var _={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function L(W,Q,se){var fe=se.ref;return{$$typeof:t,type:W,key:Q,ref:fe!==void 0?fe:null,props:se}}function R(W,Q){return L(W.type,Q,W.props)}function D(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function U(W){var Q={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(se){return Q[se]})}var X=/\/+/g;function V(W,Q){return typeof W=="object"&&W!==null&&W.key!=null?U(""+W.key):Q.toString(36)}function Y(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then($,$):(W.status="pending",W.then(function(Q){W.status==="pending"&&(W.status="fulfilled",W.value=Q)},function(Q){W.status==="pending"&&(W.status="rejected",W.reason=Q)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function B(W,Q,se,fe,Ne){var _e=typeof W;(_e==="undefined"||_e==="boolean")&&(W=null);var De=!1;if(W===null)De=!0;else switch(_e){case"bigint":case"string":case"number":De=!0;break;case"object":switch(W.$$typeof){case t:case e:De=!0;break;case f:return De=W._init,B(De(W._payload),Q,se,fe,Ne)}}if(De)return Ne=Ne(W),De=fe===""?"."+V(W,0):fe,I(Ne)?(se="",De!=null&&(se=De.replace(X,"$&/")+"/"),B(Ne,Q,se,"",function(Te){return Te})):Ne!=null&&(D(Ne)&&(Ne=R(Ne,se+(Ne.key==null||W&&W.key===Ne.key?"":(""+Ne.key).replace(X,"$&/")+"/")+De)),Q.push(Ne)),1;De=0;var He=fe===""?".":fe+":";if(I(W))for(var he=0;he<W.length;he++)fe=W[he],_e=He+V(fe,he),De+=B(fe,Q,se,_e,Ne);else if(he=y(W),typeof he=="function")for(W=he.call(W),he=0;!(fe=W.next()).done;)fe=fe.value,_e=He+V(fe,he++),De+=B(fe,Q,se,_e,Ne);else if(_e==="object"){if(typeof W.then=="function")return B(Y(W),Q,se,fe,Ne);throw Q=String(W),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return De}function Z(W,Q,se){if(W==null)return W;var fe=[],Ne=0;return B(W,fe,"","",function(_e){return Q.call(se,_e,Ne++)}),fe}function J(W){if(W._status===-1){var Q=W._result;Q=Q(),Q.then(function(se){(W._status===0||W._status===-1)&&(W._status=1,W._result=se)},function(se){(W._status===0||W._status===-1)&&(W._status=2,W._result=se)}),W._status===-1&&(W._status=0,W._result=Q)}if(W._status===1)return W._result.default;throw W._result}var ae=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)},ee={map:Z,forEach:function(W,Q,se){Z(W,function(){Q.apply(this,arguments)},se)},count:function(W){var Q=0;return Z(W,function(){Q++}),Q},toArray:function(W){return Z(W,function(Q){return Q})||[]},only:function(W){if(!D(W))throw Error("React.Children.only expected to receive a single React element child.");return W}};return jt.Activity=p,jt.Children=ee,jt.Component=S,jt.Fragment=n,jt.Profiler=s,jt.PureComponent=E,jt.StrictMode=r,jt.Suspense=l,jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,jt.__COMPILER_RUNTIME={__proto__:null,c:function(W){return _.H.useMemoCache(W)}},jt.cache=function(W){return function(){return W.apply(null,arguments)}},jt.cacheSignal=function(){return null},jt.cloneElement=function(W,Q,se){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var fe=v({},W.props),Ne=W.key;if(Q!=null)for(_e in Q.key!==void 0&&(Ne=""+Q.key),Q)!z.call(Q,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Q.ref===void 0||(fe[_e]=Q[_e]);var _e=arguments.length-2;if(_e===1)fe.children=se;else if(1<_e){for(var De=Array(_e),He=0;He<_e;He++)De[He]=arguments[He+2];fe.children=De}return L(W.type,Ne,fe)},jt.createContext=function(W){return W={$$typeof:i,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:a,_context:W},W},jt.createElement=function(W,Q,se){var fe,Ne={},_e=null;if(Q!=null)for(fe in Q.key!==void 0&&(_e=""+Q.key),Q)z.call(Q,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Ne[fe]=Q[fe]);var De=arguments.length-2;if(De===1)Ne.children=se;else if(1<De){for(var He=Array(De),he=0;he<De;he++)He[he]=arguments[he+2];Ne.children=He}if(W&&W.defaultProps)for(fe in De=W.defaultProps,De)Ne[fe]===void 0&&(Ne[fe]=De[fe]);return L(W,_e,Ne)},jt.createRef=function(){return{current:null}},jt.forwardRef=function(W){return{$$typeof:o,render:W}},jt.isValidElement=D,jt.lazy=function(W){return{$$typeof:f,_payload:{_status:-1,_result:W},_init:J}},jt.memo=function(W,Q){return{$$typeof:c,type:W,compare:Q===void 0?null:Q}},jt.startTransition=function(W){var Q=_.T,se={};_.T=se;try{var fe=W(),Ne=_.S;Ne!==null&&Ne(se,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then($,ae)}catch(_e){ae(_e)}finally{Q!==null&&se.types!==null&&(Q.types=se.types),_.T=Q}},jt.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},jt.use=function(W){return _.H.use(W)},jt.useActionState=function(W,Q,se){return _.H.useActionState(W,Q,se)},jt.useCallback=function(W,Q){return _.H.useCallback(W,Q)},jt.useContext=function(W){return _.H.useContext(W)},jt.useDebugValue=function(){},jt.useDeferredValue=function(W,Q){return _.H.useDeferredValue(W,Q)},jt.useEffect=function(W,Q){return _.H.useEffect(W,Q)},jt.useEffectEvent=function(W){return _.H.useEffectEvent(W)},jt.useId=function(){return _.H.useId()},jt.useImperativeHandle=function(W,Q,se){return _.H.useImperativeHandle(W,Q,se)},jt.useInsertionEffect=function(W,Q){return _.H.useInsertionEffect(W,Q)},jt.useLayoutEffect=function(W,Q){return _.H.useLayoutEffect(W,Q)},jt.useMemo=function(W,Q){return _.H.useMemo(W,Q)},jt.useOptimistic=function(W,Q){return _.H.useOptimistic(W,Q)},jt.useReducer=function(W,Q,se){return _.H.useReducer(W,Q,se)},jt.useRef=function(W){return _.H.useRef(W)},jt.useState=function(W){return _.H.useState(W)},jt.useSyncExternalStore=function(W,Q,se){return _.H.useSyncExternalStore(W,Q,se)},jt.useTransition=function(){return _.H.useTransition()},jt.version="19.2.4",jt}var eP;function Cp(){return eP||(eP=1,iE.exports=Nte()),iE.exports}var T=Cp();const xu=Ni(T),Tte=TU({__proto__:null,default:xu},[T]);var oE={exports:{}},Qg={},lE={exports:{}},cE={};var tP;function Ete(){return tP||(tP=1,(function(t){function e(B,Z){var J=B.length;B.push(Z);e:for(;0<J;){var ae=J-1>>>1,ee=B[ae];if(0<s(ee,Z))B[ae]=Z,B[J]=ee,J=ae;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Z=B[0],J=B.pop();if(J!==Z){B[0]=J;e:for(var ae=0,ee=B.length,W=ee>>>1;ae<W;){var Q=2*(ae+1)-1,se=B[Q],fe=Q+1,Ne=B[fe];if(0>s(se,J))fe<ee&&0>s(Ne,se)?(B[ae]=Ne,B[fe]=J,ae=fe):(B[ae]=se,B[Q]=J,ae=Q);else if(fe<ee&&0>s(Ne,J))B[ae]=Ne,B[fe]=J,ae=fe;else break e}}return Z}function s(B,Z){var J=B.sortIndex-Z.sortIndex;return J!==0?J:B.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],c=[],f=1,p=null,m=3,y=!1,b=!1,v=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function k(B){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=B)r(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(c)}}function I(B){if(v=!1,k(B),!b)if(n(l)!==null)b=!0,$||($=!0,U());else{var Z=n(c);Z!==null&&Y(I,Z.startTime-B)}}var $=!1,_=-1,z=5,L=-1;function R(){return x?!0:!(t.unstable_now()-L<z)}function D(){if(x=!1,$){var B=t.unstable_now();L=B;var Z=!0;try{e:{b=!1,v&&(v=!1,C(_),_=-1),y=!0;var J=m;try{t:{for(k(B),p=n(l);p!==null&&!(p.expirationTime>B&&R());){var ae=p.callback;if(typeof ae=="function"){p.callback=null,m=p.priorityLevel;var ee=ae(p.expirationTime<=B);if(B=t.unstable_now(),typeof ee=="function"){p.callback=ee,k(B),Z=!0;break t}p===n(l)&&r(l),k(B)}else r(l);p=n(l)}if(p!==null)Z=!0;else{var W=n(c);W!==null&&Y(I,W.startTime-B),Z=!1}}break e}finally{p=null,m=J,y=!1}Z=void 0}}finally{Z?U():$=!1}}}var U;if(typeof E=="function")U=function(){E(D)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,V=X.port2;X.port1.onmessage=D,U=function(){V.postMessage(null)}}else U=function(){S(D,0)};function Y(B,Z){_=S(function(){B(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var J=m;m=Z;try{return B()}finally{m=J}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(B,Z){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=m;m=B;try{return Z()}finally{m=J}},t.unstable_scheduleCallback=function(B,Z,J){var ae=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ae+J:ae):J=ae,B){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=J+ee,B={id:f++,callback:Z,priorityLevel:B,startTime:J,expirationTime:ee,sortIndex:-1},J>ae?(B.sortIndex=J,e(c,B),n(l)===null&&B===n(c)&&(v?(C(_),_=-1):v=!0,Y(I,J-ae))):(B.sortIndex=ee,e(l,B),b||y||(b=!0,$||($=!0,U()))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var Z=m;return function(){var J=m;m=Z;try{return B.apply(this,arguments)}finally{m=J}}}})(cE)),cE}var nP;function Ite(){return nP||(nP=1,lE.exports=Ete()),lE.exports}var uE={exports:{}},Hs={};var rP;function Ate(){if(rP)return Hs;rP=1;var t=Cp();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(l,c,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:l,containerInfo:c,implementation:f}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Hs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Hs.createPortal=function(l,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,f)},Hs.flushSync=function(l){var c=i.T,f=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=c,r.p=f,r.d.f()}},Hs.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Hs.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Hs.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var f=c.as,p=o(f,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,y=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:y}):f==="script"&&r.d.X(l,{crossOrigin:p,integrity:m,fetchPriority:y,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Hs.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Hs.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,p=o(f,c.crossOrigin);r.d.L(l,f,{crossOrigin:p,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Hs.preloadModule=function(l,c){if(typeof l=="string")if(c){var f=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Hs.requestFormReset=function(l){r.d.r(l)},Hs.unstable_batchedUpdates=function(l,c){return l(c)},Hs.useFormState=function(l,c,f){return i.H.useFormState(l,c,f)},Hs.useFormStatus=function(){return i.H.useHostTransitionStatus()},Hs.version="19.2.4",Hs}var sP;function EU(){if(sP)return uE.exports;sP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),uE.exports=Ate(),uE.exports}var aP;function jte(){if(aP)return Qg;aP=1;var t=Ite(),e=Cp(),n=EU();function r(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function a(d){var h=d,g=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(g=h.return),d=h.return;while(d)}return h.tag===3?g:null}function i(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function o(d){if(d.tag===31){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function l(d){if(a(d)!==d)throw Error(r(188))}function c(d){var h=d.alternate;if(!h){if(h=a(d),h===null)throw Error(r(188));return h!==d?null:d}for(var g=d,w=h;;){var N=g.return;if(N===null)break;var A=N.alternate;if(A===null){if(w=N.return,w!==null){g=w;continue}break}if(N.child===A.child){for(A=N.child;A;){if(A===g)return l(N),d;if(A===w)return l(N),h;A=A.sibling}throw Error(r(188))}if(g.return!==w.return)g=N,w=A;else{for(var M=!1,H=N.child;H;){if(H===g){M=!0,g=N,w=A;break}if(H===w){M=!0,w=N,g=A;break}H=H.sibling}if(!M){for(H=A.child;H;){if(H===g){M=!0,g=A,w=N;break}if(H===w){M=!0,w=A,g=N;break}H=H.sibling}if(!M)throw Error(r(189))}}if(g.alternate!==w)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?d:h}function f(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d;for(d=d.child;d!==null;){if(h=f(d),h!==null)return h;d=d.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),E=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function U(d){return d===null||typeof d!="object"?null:(d=D&&d[D]||d["@@iterator"],typeof d=="function"?d:null)}var X=Symbol.for("react.client.reference");function V(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===X?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case v:return"Fragment";case S:return"Profiler";case x:return"StrictMode";case I:return"Suspense";case $:return"SuspenseList";case L:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case b:return"Portal";case E:return d.displayName||"Context";case C:return(d._context.displayName||"Context")+".Consumer";case k:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case _:return h=d.displayName||null,h!==null?h:V(d.type)||"Memo";case z:h=d._payload,d=d._init;try{return V(d(h))}catch{}}return null}var Y=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ae=[],ee=-1;function W(d){return{current:d}}function Q(d){0>ee||(d.current=ae[ee],ae[ee]=null,ee--)}function se(d,h){ee++,ae[ee]=d.current,d.current=h}var fe=W(null),Ne=W(null),_e=W(null),De=W(null);function He(d,h){switch(se(_e,h),se(Ne,d),se(fe,null),h.nodeType){case 9:case 11:d=(d=h.documentElement)&&(d=d.namespaceURI)?vz(d):0;break;default:if(d=h.tagName,h=h.namespaceURI)h=vz(h),d=wz(h,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}Q(fe),se(fe,d)}function he(){Q(fe),Q(Ne),Q(_e)}function Te(d){d.memoizedState!==null&&se(De,d);var h=fe.current,g=wz(h,d.type);h!==g&&(se(Ne,d),se(fe,g))}function Me(d){Ne.current===d&&(Q(fe),Q(Ne)),De.current===d&&(Q(De),Gg._currentValue=J)}var ge,ct;function Ye(d){if(ge===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);ge=h&&h[1]||"",ct=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ge+d+ct}var ft=!1;function Ke(d,h){if(!d||ft)return"";ft=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(h){var Le=function(){throw Error()};if(Object.defineProperty(Le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Le,[])}catch(Ie){var ke=Ie}Reflect.construct(d,[],Le)}else{try{Le.call()}catch(Ie){ke=Ie}d.call(Le.prototype)}}else{try{throw Error()}catch(Ie){ke=Ie}(Le=d())&&typeof Le.catch=="function"&&Le.catch(function(){})}}catch(Ie){if(Ie&&ke&&typeof Ie.stack=="string")return[Ie.stack,ke.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=w.DetermineComponentFrameRoot(),M=A[0],H=A[1];if(M&&H){var re=M.split(`
`),Se=H.split(`
`);for(N=w=0;w<re.length&&!re[w].includes("DetermineComponentFrameRoot");)w++;for(;N<Se.length&&!Se[N].includes("DetermineComponentFrameRoot");)N++;if(w===re.length||N===Se.length)for(w=re.length-1,N=Se.length-1;1<=w&&0<=N&&re[w]!==Se[N];)N--;for(;1<=w&&0<=N;w--,N--)if(re[w]!==Se[N]){if(w!==1||N!==1)do if(w--,N--,0>N||re[w]!==Se[N]){var Re=`
`+re[w].replace(" at new "," at ");return d.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",d.displayName)),Re}while(1<=w&&0<=N);break}}}finally{ft=!1,Error.prepareStackTrace=g}return(g=d?d.displayName||d.name:"")?Ye(g):""}function Ct(d,h){switch(d.tag){case 26:case 27:case 5:return Ye(d.type);case 16:return Ye("Lazy");case 13:return d.child!==h&&h!==null?Ye("Suspense Fallback"):Ye("Suspense");case 19:return Ye("SuspenseList");case 0:case 15:return Ke(d.type,!1);case 11:return Ke(d.type.render,!1);case 1:return Ke(d.type,!0);case 31:return Ye("Activity");default:return""}}function kt(d){try{var h="",g=null;do h+=Ct(d,g),g=d,d=d.return;while(d);return h}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var Wt=Object.prototype.hasOwnProperty,Kt=t.unstable_scheduleCallback,jn=t.unstable_cancelCallback,Nt=t.unstable_shouldYield,sr=t.unstable_requestPaint,Zt=t.unstable_now,lr=t.unstable_getCurrentPriorityLevel,ar=t.unstable_ImmediatePriority,fn=t.unstable_UserBlockingPriority,cr=t.unstable_NormalPriority,qs=t.unstable_LowPriority,ia=t.unstable_IdlePriority,de=t.log,Fe=t.unstable_setDisableYieldValue,Ze=null,we=null;function Pe(d){if(typeof de=="function"&&Fe(d),we&&typeof we.setStrictMode=="function")try{we.setStrictMode(Ze,d)}catch{}}var Oe=Math.clz32?Math.clz32:nn,et=Math.log,Rt=Math.LN2;function nn(d){return d>>>=0,d===0?32:31-(et(d)/Rt|0)|0}var rn=256,Vr=262144,oa=4194304;function Gs(d){var h=d&42;if(h!==0)return h;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function qe(d,h,g){var w=d.pendingLanes;if(w===0)return 0;var N=0,A=d.suspendedLanes,M=d.pingedLanes;d=d.warmLanes;var H=w&134217727;return H!==0?(w=H&~A,w!==0?N=Gs(w):(M&=H,M!==0?N=Gs(M):g||(g=H&~d,g!==0&&(N=Gs(g))))):(H=w&~A,H!==0?N=Gs(H):M!==0?N=Gs(M):g||(g=w&~d,g!==0&&(N=Gs(g)))),N===0?0:h!==0&&h!==N&&(h&A)===0&&(A=N&-N,g=h&-h,A>=g||A===32&&(g&4194048)!==0)?h:N}function Ns(d,h){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&h)===0}function Il(d,h){switch(d){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qr(){var d=oa;return oa<<=1,(oa&62914560)===0&&(oa=4194304),d}function wr(d){for(var h=[],g=0;31>g;g++)h.push(d);return h}function Ts(d,h){d.pendingLanes|=h,h!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function zo(d,h,g,w,N,A){var M=d.pendingLanes;d.pendingLanes=g,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=g,d.entangledLanes&=g,d.errorRecoveryDisabledLanes&=g,d.shellSuspendCounter=0;var H=d.entanglements,re=d.expirationTimes,Se=d.hiddenUpdates;for(g=M&~g;0<g;){var Re=31-Oe(g),Le=1<<Re;H[Re]=0,re[Re]=-1;var ke=Se[Re];if(ke!==null)for(Se[Re]=null,Re=0;Re<ke.length;Re++){var Ie=ke[Re];Ie!==null&&(Ie.lane&=-536870913)}g&=~Le}w!==0&&la(d,w,0),A!==0&&N===0&&d.tag!==0&&(d.suspendedLanes|=A&~(M&~h))}function la(d,h,g){d.pendingLanes|=h,d.suspendedLanes&=~h;var w=31-Oe(h);d.entangledLanes|=h,d.entanglements[w]=d.entanglements[w]|1073741824|g&261930}function Dc(d,h){var g=d.entangledLanes|=h;for(d=d.entanglements;g;){var w=31-Oe(g),N=1<<w;N&h|d[w]&h&&(d[w]|=h),g&=~N}}function Es(d,h){var g=h&-h;return g=(g&42)!==0?1:Kf(g),(g&(d.suspendedLanes|h))!==0?0:g}function Kf(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function Po(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Jm(){var d=Z.p;return d!==0?d:(d=window.event,d===void 0?32:Vz(d.type))}function eg(d,h){var g=Z.p;try{return Z.p=d,h()}finally{Z.p=g}}var Za=Math.random().toString(36).slice(2),sn="__reactFiber$"+Za,Is="__reactProps$"+Za,zc="__reactContainer$"+Za,nd="__reactEvents$"+Za,Vk="__reactListeners$"+Za,tg="__reactHandles$"+Za,ng="__reactResources$"+Za,Lo="__reactMarker$"+Za;function rg(d){delete d[sn],delete d[Is],delete d[nd],delete d[Vk],delete d[tg]}function As(d){var h=d[sn];if(h)return h;for(var g=d.parentNode;g;){if(h=g[zc]||g[sn]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(d=Iz(d);d!==null;){if(g=d[sn])return g;d=Iz(d)}return h}d=g,g=d.parentNode}return null}function no(d){if(d=d[sn]||d[zc]){var h=d.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return d}return null}function Al(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d.stateNode;throw Error(r(33))}function jl(d){var h=d[ng];return h||(h=d[ng]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Sr(d){d[Lo]=!0}var Pc=new Set,sg={};function Ii(d,h){$l(d,h),$l(d+"Capture",h)}function $l(d,h){for(sg[d]=h,d=0;d<h.length;d++)Pc.add(h[d])}var Lc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xf={},ag={};function Ax(d){return Wt.call(ag,d)?!0:Wt.call(Xf,d)?!1:Lc.test(d)?ag[d]=!0:(Xf[d]=!0,!1)}function rd(d,h,g){if(Ax(h))if(g===null)d.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":d.removeAttribute(h);return;case"boolean":var w=h.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){d.removeAttribute(h);return}}d.setAttribute(h,""+g)}}function Yf(d,h,g){if(g===null)d.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(h);return}d.setAttribute(h,""+g)}}function os(d,h,g,w){if(w===null)d.removeAttribute(g);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(g);return}d.setAttributeNS(h,g,""+w)}}function Bt(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Mo(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Qf(d,h,g){var w=Object.getOwnPropertyDescriptor(d.constructor.prototype,h);if(!d.hasOwnProperty(h)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var N=w.get,A=w.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return N.call(this)},set:function(M){g=""+M,A.call(this,M)}}),Object.defineProperty(d,h,{enumerable:w.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function Mc(d){if(!d._valueTracker){var h=Mo(d)?"checked":"value";d._valueTracker=Qf(d,h,""+d[h])}}function sd(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var g=h.getValue(),w="";return d&&(w=Mo(d)?d.checked?"true":"false":d.value),d=w,d!==g?(h.setValue(d),!0):!1}function Fc(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var qk=/[\n"\\]/g;function Ea(d){return d.replace(qk,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Rl(d,h,g,w,N,A,M,H){d.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?d.type=M:d.removeAttribute("type"),h!=null?M==="number"?(h===0&&d.value===""||d.value!=h)&&(d.value=""+Bt(h)):d.value!==""+Bt(h)&&(d.value=""+Bt(h)):M!=="submit"&&M!=="reset"||d.removeAttribute("value"),h!=null?og(d,M,Bt(h)):g!=null?og(d,M,Bt(g)):w!=null&&d.removeAttribute("value"),N==null&&A!=null&&(d.defaultChecked=!!A),N!=null&&(d.checked=N&&typeof N!="function"&&typeof N!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?d.name=""+Bt(H):d.removeAttribute("name")}function ig(d,h,g,w,N,A,M,H){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(d.type=A),h!=null||g!=null){if(!(A!=="submit"&&A!=="reset"||h!=null)){Mc(d);return}g=g!=null?""+Bt(g):"",h=h!=null?""+Bt(h):g,H||h===d.value||(d.value=h),d.defaultValue=h}w=w??N,w=typeof w!="function"&&typeof w!="symbol"&&!!w,d.checked=H?d.checked:!!w,d.defaultChecked=!!w,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(d.name=M),Mc(d)}function og(d,h,g){h==="number"&&Fc(d.ownerDocument)===d||d.defaultValue===""+g||(d.defaultValue=""+g)}function Fo(d,h,g,w){if(d=d.options,h){h={};for(var N=0;N<g.length;N++)h["$"+g[N]]=!0;for(g=0;g<d.length;g++)N=h.hasOwnProperty("$"+d[g].value),d[g].selected!==N&&(d[g].selected=N),N&&w&&(d[g].defaultSelected=!0)}else{for(g=""+Bt(g),h=null,N=0;N<d.length;N++){if(d[N].value===g){d[N].selected=!0,w&&(d[N].defaultSelected=!0);return}h!==null||d[N].disabled||(h=d[N])}h!==null&&(h.selected=!0)}}function lg(d,h,g){if(h!=null&&(h=""+Bt(h),h!==d.value&&(d.value=h),g==null)){d.defaultValue!==h&&(d.defaultValue=h);return}d.defaultValue=g!=null?""+Bt(g):""}function Zf(d,h,g,w){if(h==null){if(w!=null){if(g!=null)throw Error(r(92));if(Y(w)){if(1<w.length)throw Error(r(93));w=w[0]}g=w}g==null&&(g=""),h=g}g=Bt(h),d.defaultValue=g,w=d.textContent,w===g&&w!==""&&w!==null&&(d.value=w),Mc(d)}function Bo(d,h){if(h){var g=d.firstChild;if(g&&g===d.lastChild&&g.nodeType===3){g.nodeValue=h;return}}d.textContent=h}var Gk=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ad(d,h,g){var w=h.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?w?d.setProperty(h,""):h==="float"?d.cssFloat="":d[h]="":w?d.setProperty(h,g):typeof g!="number"||g===0||Gk.has(h)?h==="float"?d.cssFloat=g:d[h]=(""+g).trim():d[h]=g+"px"}function id(d,h,g){if(h!=null&&typeof h!="object")throw Error(r(62));if(d=d.style,g!=null){for(var w in g)!g.hasOwnProperty(w)||h!=null&&h.hasOwnProperty(w)||(w.indexOf("--")===0?d.setProperty(w,""):w==="float"?d.cssFloat="":d[w]="");for(var N in h)w=h[N],h.hasOwnProperty(N)&&g[N]!==w&&ad(d,N,w)}else for(var A in h)h.hasOwnProperty(A)&&ad(d,A,h[A])}function ro(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),so=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ja(d){return so.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}function ca(){}var ug=null;function ht(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Uo=null,ao=null;function dg(d){var h=no(d);if(h&&(d=h.stateNode)){var g=d[Is]||null;e:switch(d=h.stateNode,h.type){case"input":if(Rl(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),h=g.name,g.type==="radio"&&h!=null){for(g=d;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Ea(""+h)+'"][type="radio"]'),h=0;h<g.length;h++){var w=g[h];if(w!==d&&w.form===d.form){var N=w[Is]||null;if(!N)throw Error(r(90));Rl(w,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(h=0;h<g.length;h++)w=g[h],w.form===d.form&&sd(w)}break e;case"textarea":lg(d,g.value,g.defaultValue);break e;case"select":h=g.value,h!=null&&Fo(d,!!g.multiple,h,!1)}}}var Jf=!1;function Bc(d,h,g){if(Jf)return d(h,g);Jf=!0;try{var w=d(h);return w}finally{if(Jf=!1,(Uo!==null||ao!==null)&&(xv(),Uo&&(h=Uo,d=ao,ao=Uo=null,dg(h),d)))for(h=0;h<d.length;h++)dg(d[h])}}function Ia(d,h){var g=d.stateNode;if(g===null)return null;var w=g[Is]||null;if(w===null)return null;g=w[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(d=d.type,w=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!w;break e;default:d=!1}if(d)return null;if(g&&typeof g!="function")throw Error(r(231,h,typeof g));return g}var ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),od=!1;if(ua)try{var j={};Object.defineProperty(j,"passive",{get:function(){od=!0}}),window.addEventListener("test",j,j),window.removeEventListener("test",j,j)}catch{od=!1}var O=null,F=null,K=null;function ie(){if(K)return K;var d,h=F,g=h.length,w,N="value"in O?O.value:O.textContent,A=N.length;for(d=0;d<g&&h[d]===N[d];d++);var M=g-d;for(w=1;w<=M&&h[g-w]===N[A-w];w++);return K=N.slice(d,1<w?1-w:void 0)}function xe(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function $e(){return!0}function yt(){return!1}function xt(d){function h(g,w,N,A,M){this._reactName=g,this._targetInst=N,this.type=w,this.nativeEvent=A,this.target=M,this.currentTarget=null;for(var H in d)d.hasOwnProperty(H)&&(g=d[H],this[H]=g?g(A):A[H]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?$e:yt,this.isPropagationStopped=yt,this}return p(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=$e)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=$e)},persist:function(){},isPersistent:$e}),h}var Tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$n=xt(Tt),jr=p({},Tt,{view:0,detail:0}),jx=xt(jr),fg,eh,ld,cd=p({},jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pg,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==ld&&(ld&&d.type==="mousemove"?(fg=d.screenX-ld.screenX,eh=d.screenY-ld.screenY):eh=fg=0,ld=d),fg)},movementY:function(d){return"movementY"in d?d.movementY:eh}}),$x=xt(cd),Hk=p({},cd,{dataTransfer:0}),Kk=xt(Hk),Xk=p({},jr,{relatedTarget:0}),hg=xt(Xk),Yk=p({},Tt,{animationName:0,elapsedTime:0,pseudoElement:0}),Qk=xt(Yk),Zk=p({},Tt,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Rx=xt(Zk),Jk=p({},Tt,{data:0}),Ox=xt(Jk),eN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rN(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=nN[d])?!!h[d]:!1}function pg(){return rN}var _x=p({},jr,{key:function(d){if(d.key){var h=eN[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=xe(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?tN[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pg,charCode:function(d){return d.type==="keypress"?xe(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?xe(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),sN=xt(_x),aN=p({},cd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dx=xt(aN),iN=p({},jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pg}),oN=xt(iN),lN=p({},Tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),zx=xt(lN),cN=p({},cd,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),uN=xt(cN),dN=p({},Tt,{newState:0,oldState:0}),th=xt(dN),Px=[9,13,27,32],nh=ua&&"CompositionEvent"in window,Uc=null;ua&&"documentMode"in document&&(Uc=document.documentMode);var be=ua&&"TextEvent"in window&&!Uc,Ue=ua&&(!nh||Uc&&8<Uc&&11>=Uc),ot=" ",vt=!1;function It(d,h){switch(d){case"keyup":return Px.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function on(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var ls=!1;function Aa(d,h){switch(d){case"compositionend":return on(h);case"keypress":return h.which!==32?null:(vt=!0,ot);case"textInput":return d=h.data,d===ot&&vt?null:d;default:return null}}function da(d,h){if(ls)return d==="compositionend"||!nh&&It(d,h)?(d=ie(),K=F=O=null,ls=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Ue&&h.locale!=="ko"?null:h.data;default:return null}}var ei={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rh(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!ei[d.type]:h==="textarea"}function Wo(d,h,g,w){Uo?ao?ao.push(w):ao=[w]:Uo=w,h=Tv(h,"onChange"),0<h.length&&(g=new $n("onChange","change",null,g,w),d.push({event:g,listeners:h}))}var ud=null,mg=null;function YJ(d){pz(d,0)}function Lx(d){var h=Al(d);if(sd(h))return d}function O5(d,h){if(d==="change")return h}var _5=!1;if(ua){var fN;if(ua){var hN="oninput"in document;if(!hN){var D5=document.createElement("div");D5.setAttribute("oninput","return;"),hN=typeof D5.oninput=="function"}fN=hN}else fN=!1;_5=fN&&(!document.documentMode||9<document.documentMode)}function z5(){ud&&(ud.detachEvent("onpropertychange",P5),mg=ud=null)}function P5(d){if(d.propertyName==="value"&&Lx(mg)){var h=[];Wo(h,mg,d,ht(d)),Bc(YJ,h)}}function QJ(d,h,g){d==="focusin"?(z5(),ud=h,mg=g,ud.attachEvent("onpropertychange",P5)):d==="focusout"&&z5()}function ZJ(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Lx(mg)}function JJ(d,h){if(d==="click")return Lx(h)}function eee(d,h){if(d==="input"||d==="change")return Lx(h)}function tee(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var ti=typeof Object.is=="function"?Object.is:tee;function gg(d,h){if(ti(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var g=Object.keys(d),w=Object.keys(h);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var N=g[w];if(!Wt.call(h,N)||!ti(d[N],h[N]))return!1}return!0}function L5(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function M5(d,h){var g=L5(d);d=0;for(var w;g;){if(g.nodeType===3){if(w=d+g.textContent.length,d<=h&&w>=h)return{node:g,offset:h-d};d=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=L5(g)}}function F5(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?F5(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function B5(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var h=Fc(d.document);h instanceof d.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)d=h.contentWindow;else break;h=Fc(d.document)}return h}function pN(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}var nee=ua&&"documentMode"in document&&11>=document.documentMode,sh=null,mN=null,yg=null,gN=!1;function U5(d,h,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;gN||sh==null||sh!==Fc(w)||(w=sh,"selectionStart"in w&&pN(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),yg&&gg(yg,w)||(yg=w,w=Tv(mN,"onSelect"),0<w.length&&(h=new $n("onSelect","select",null,h,g),d.push({event:h,listeners:w}),h.target=sh)))}function dd(d,h){var g={};return g[d.toLowerCase()]=h.toLowerCase(),g["Webkit"+d]="webkit"+h,g["Moz"+d]="moz"+h,g}var ah={animationend:dd("Animation","AnimationEnd"),animationiteration:dd("Animation","AnimationIteration"),animationstart:dd("Animation","AnimationStart"),transitionrun:dd("Transition","TransitionRun"),transitionstart:dd("Transition","TransitionStart"),transitioncancel:dd("Transition","TransitionCancel"),transitionend:dd("Transition","TransitionEnd")},yN={},W5={};ua&&(W5=document.createElement("div").style,"AnimationEvent"in window||(delete ah.animationend.animation,delete ah.animationiteration.animation,delete ah.animationstart.animation),"TransitionEvent"in window||delete ah.transitionend.transition);function fd(d){if(yN[d])return yN[d];if(!ah[d])return d;var h=ah[d],g;for(g in h)if(h.hasOwnProperty(g)&&g in W5)return yN[d]=h[g];return d}var V5=fd("animationend"),q5=fd("animationiteration"),G5=fd("animationstart"),ree=fd("transitionrun"),see=fd("transitionstart"),aee=fd("transitioncancel"),H5=fd("transitionend"),K5=new Map,bN="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bN.push("scrollEnd");function io(d,h){K5.set(d,h),Ii(h,[d])}var Mx=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},Ai=[],ih=0,xN=0;function Fx(){for(var d=ih,h=xN=ih=0;h<d;){var g=Ai[h];Ai[h++]=null;var w=Ai[h];Ai[h++]=null;var N=Ai[h];Ai[h++]=null;var A=Ai[h];if(Ai[h++]=null,w!==null&&N!==null){var M=w.pending;M===null?N.next=N:(N.next=M.next,M.next=N),w.pending=N}A!==0&&X5(g,N,A)}}function Bx(d,h,g,w){Ai[ih++]=d,Ai[ih++]=h,Ai[ih++]=g,Ai[ih++]=w,xN|=w,d.lanes|=w,d=d.alternate,d!==null&&(d.lanes|=w)}function vN(d,h,g,w){return Bx(d,h,g,w),Ux(d)}function hd(d,h){return Bx(d,null,null,h),Ux(d)}function X5(d,h,g){d.lanes|=g;var w=d.alternate;w!==null&&(w.lanes|=g);for(var N=!1,A=d.return;A!==null;)A.childLanes|=g,w=A.alternate,w!==null&&(w.childLanes|=g),A.tag===22&&(d=A.stateNode,d===null||d._visibility&1||(N=!0)),d=A,A=A.return;return d.tag===3?(A=d.stateNode,N&&h!==null&&(N=31-Oe(g),d=A.hiddenUpdates,w=d[N],w===null?d[N]=[h]:w.push(h),h.lane=g|536870912),A):null}function Ux(d){if(50<Mg)throw Mg=0,AT=null,Error(r(185));for(var h=d.return;h!==null;)d=h,h=d.return;return d.tag===3?d.stateNode:null}var oh={};function iee(d,h,g,w){this.tag=d,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(d,h,g,w){return new iee(d,h,g,w)}function wN(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Ol(d,h){var g=d.alternate;return g===null?(g=ni(d.tag,h,d.key,d.mode),g.elementType=d.elementType,g.type=d.type,g.stateNode=d.stateNode,g.alternate=d,d.alternate=g):(g.pendingProps=h,g.type=d.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=d.flags&65011712,g.childLanes=d.childLanes,g.lanes=d.lanes,g.child=d.child,g.memoizedProps=d.memoizedProps,g.memoizedState=d.memoizedState,g.updateQueue=d.updateQueue,h=d.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=d.sibling,g.index=d.index,g.ref=d.ref,g.refCleanup=d.refCleanup,g}function Y5(d,h){d.flags&=65011714;var g=d.alternate;return g===null?(d.childLanes=0,d.lanes=h,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,h=g.dependencies,d.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),d}function Wx(d,h,g,w,N,A){var M=0;if(w=d,typeof d=="function")wN(d)&&(M=1);else if(typeof d=="string")M=dte(d,g,fe.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case L:return d=ni(31,g,h,N),d.elementType=L,d.lanes=A,d;case v:return pd(g.children,N,A,h);case x:M=8,N|=24;break;case S:return d=ni(12,g,h,N|2),d.elementType=S,d.lanes=A,d;case I:return d=ni(13,g,h,N),d.elementType=I,d.lanes=A,d;case $:return d=ni(19,g,h,N),d.elementType=$,d.lanes=A,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case E:M=10;break e;case C:M=9;break e;case k:M=11;break e;case _:M=14;break e;case z:M=16,w=null;break e}M=29,g=Error(r(130,d===null?"null":typeof d,"")),w=null}return h=ni(M,g,h,N),h.elementType=d,h.type=w,h.lanes=A,h}function pd(d,h,g,w){return d=ni(7,d,w,h),d.lanes=g,d}function SN(d,h,g){return d=ni(6,d,null,h),d.lanes=g,d}function Q5(d){var h=ni(18,null,null,0);return h.stateNode=d,h}function CN(d,h,g){return h=ni(4,d.children!==null?d.children:[],d.key,h),h.lanes=g,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}var Z5=new WeakMap;function ji(d,h){if(typeof d=="object"&&d!==null){var g=Z5.get(d);return g!==void 0?g:(h={value:d,source:h,stack:kt(h)},Z5.set(d,h),h)}return{value:d,source:h,stack:kt(h)}}var lh=[],ch=0,Vx=null,bg=0,$i=[],Ri=0,Wc=null,Vo=1,qo="";function _l(d,h){lh[ch++]=bg,lh[ch++]=Vx,Vx=d,bg=h}function J5(d,h,g){$i[Ri++]=Vo,$i[Ri++]=qo,$i[Ri++]=Wc,Wc=d;var w=Vo;d=qo;var N=32-Oe(w)-1;w&=~(1<<N),g+=1;var A=32-Oe(h)+N;if(30<A){var M=N-N%5;A=(w&(1<<M)-1).toString(32),w>>=M,N-=M,Vo=1<<32-Oe(h)+N|g<<N|w,qo=A+d}else Vo=1<<A|g<<N|w,qo=d}function kN(d){d.return!==null&&(_l(d,1),J5(d,1,0))}function NN(d){for(;d===Vx;)Vx=lh[--ch],lh[ch]=null,bg=lh[--ch],lh[ch]=null;for(;d===Wc;)Wc=$i[--Ri],$i[Ri]=null,qo=$i[--Ri],$i[Ri]=null,Vo=$i[--Ri],$i[Ri]=null}function e3(d,h){$i[Ri++]=Vo,$i[Ri++]=qo,$i[Ri++]=Wc,Vo=h.id,qo=h.overflow,Wc=d}var js=null,Fn=null,Jt=!1,Vc=null,Oi=!1,TN=Error(r(519));function qc(d){var h=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xg(ji(h,d)),TN}function t3(d){var h=d.stateNode,g=d.type,w=d.memoizedProps;switch(h[sn]=d,h[Is]=w,g){case"dialog":qt("cancel",h),qt("close",h);break;case"iframe":case"object":case"embed":qt("load",h);break;case"video":case"audio":for(g=0;g<Bg.length;g++)qt(Bg[g],h);break;case"source":qt("error",h);break;case"img":case"image":case"link":qt("error",h),qt("load",h);break;case"details":qt("toggle",h);break;case"input":qt("invalid",h),ig(h,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":qt("invalid",h);break;case"textarea":qt("invalid",h),Zf(h,w.value,w.defaultValue,w.children)}g=w.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||h.textContent===""+g||w.suppressHydrationWarning===!0||bz(h.textContent,g)?(w.popover!=null&&(qt("beforetoggle",h),qt("toggle",h)),w.onScroll!=null&&qt("scroll",h),w.onScrollEnd!=null&&qt("scrollend",h),w.onClick!=null&&(h.onclick=ca),h=!0):h=!1,h||qc(d,!0)}function n3(d){for(js=d.return;js;)switch(js.tag){case 5:case 31:case 13:Oi=!1;return;case 27:case 3:Oi=!0;return;default:js=js.return}}function uh(d){if(d!==js)return!1;if(!Jt)return n3(d),Jt=!0,!1;var h=d.tag,g;if((g=h!==3&&h!==27)&&((g=h===5)&&(g=d.type,g=!(g!=="form"&&g!=="button")||VT(d.type,d.memoizedProps)),g=!g),g&&Fn&&qc(d),n3(d),h===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));Fn=Ez(d)}else if(h===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));Fn=Ez(d)}else h===27?(h=Fn,au(d.type)?(d=XT,XT=null,Fn=d):Fn=h):Fn=js?Di(d.stateNode.nextSibling):null;return!0}function md(){Fn=js=null,Jt=!1}function EN(){var d=Vc;return d!==null&&(Oa===null?Oa=d:Oa.push.apply(Oa,d),Vc=null),d}function xg(d){Vc===null?Vc=[d]:Vc.push(d)}var IN=W(null),gd=null,Dl=null;function Gc(d,h,g){se(IN,h._currentValue),h._currentValue=g}function zl(d){d._currentValue=IN.current,Q(IN)}function AN(d,h,g){for(;d!==null;){var w=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,w!==null&&(w.childLanes|=h)):w!==null&&(w.childLanes&h)!==h&&(w.childLanes|=h),d===g)break;d=d.return}}function jN(d,h,g,w){var N=d.child;for(N!==null&&(N.return=d);N!==null;){var A=N.dependencies;if(A!==null){var M=N.child;A=A.firstContext;e:for(;A!==null;){var H=A;A=N;for(var re=0;re<h.length;re++)if(H.context===h[re]){A.lanes|=g,H=A.alternate,H!==null&&(H.lanes|=g),AN(A.return,g,d),w||(M=null);break e}A=H.next}}else if(N.tag===18){if(M=N.return,M===null)throw Error(r(341));M.lanes|=g,A=M.alternate,A!==null&&(A.lanes|=g),AN(M,g,d),M=null}else M=N.child;if(M!==null)M.return=N;else for(M=N;M!==null;){if(M===d){M=null;break}if(N=M.sibling,N!==null){N.return=M.return,M=N;break}M=M.return}N=M}}function dh(d,h,g,w){d=null;for(var N=h,A=!1;N!==null;){if(!A){if((N.flags&524288)!==0)A=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var M=N.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var H=N.type;ti(N.pendingProps.value,M.value)||(d!==null?d.push(H):d=[H])}}else if(N===De.current){if(M=N.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(d!==null?d.push(Gg):d=[Gg])}N=N.return}d!==null&&jN(h,d,g,w),h.flags|=262144}function qx(d){for(d=d.firstContext;d!==null;){if(!ti(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function yd(d){gd=d,Dl=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function $s(d){return r3(gd,d)}function Gx(d,h){return gd===null&&yd(d),r3(d,h)}function r3(d,h){var g=h._currentValue;if(h={context:h,memoizedValue:g,next:null},Dl===null){if(d===null)throw Error(r(308));Dl=h,d.dependencies={lanes:0,firstContext:h},d.flags|=524288}else Dl=Dl.next=h;return g}var oee=typeof AbortController<"u"?AbortController:function(){var d=[],h=this.signal={aborted:!1,addEventListener:function(g,w){d.push(w)}};this.abort=function(){h.aborted=!0,d.forEach(function(g){return g()})}},lee=t.unstable_scheduleCallback,cee=t.unstable_NormalPriority,$r={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $N(){return{controller:new oee,data:new Map,refCount:0}}function vg(d){d.refCount--,d.refCount===0&&lee(cee,function(){d.controller.abort()})}var wg=null,RN=0,fh=0,hh=null;function uee(d,h){if(wg===null){var g=wg=[];RN=0,fh=DT(),hh={status:"pending",value:void 0,then:function(w){g.push(w)}}}return RN++,h.then(s3,s3),h}function s3(){if(--RN===0&&wg!==null){hh!==null&&(hh.status="fulfilled");var d=wg;wg=null,fh=0,hh=null;for(var h=0;h<d.length;h++)(0,d[h])()}}function dee(d,h){var g=[],w={status:"pending",value:null,reason:null,then:function(N){g.push(N)}};return d.then(function(){w.status="fulfilled",w.value=h;for(var N=0;N<g.length;N++)(0,g[N])(h)},function(N){for(w.status="rejected",w.reason=N,N=0;N<g.length;N++)(0,g[N])(void 0)}),w}var a3=B.S;B.S=function(d,h){U4=Zt(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&uee(d,h),a3!==null&&a3(d,h)};var bd=W(null);function ON(){var d=bd.current;return d!==null?d:Rn.pooledCache}function Hx(d,h){h===null?se(bd,bd.current):se(bd,h.pool)}function i3(){var d=ON();return d===null?null:{parent:$r._currentValue,pool:d}}var ph=Error(r(460)),_N=Error(r(474)),Kx=Error(r(542)),Xx={then:function(){}};function o3(d){return d=d.status,d==="fulfilled"||d==="rejected"}function l3(d,h,g){switch(g=d[g],g===void 0?d.push(h):g!==h&&(h.then(ca,ca),h=g),h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,u3(d),d;default:if(typeof h.status=="string")h.then(ca,ca);else{if(d=Rn,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=h,d.status="pending",d.then(function(w){if(h.status==="pending"){var N=h;N.status="fulfilled",N.value=w}},function(w){if(h.status==="pending"){var N=h;N.status="rejected",N.reason=w}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,u3(d),d}throw vd=h,ph}}function xd(d){try{var h=d._init;return h(d._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(vd=g,ph):g}}var vd=null;function c3(){if(vd===null)throw Error(r(459));var d=vd;return vd=null,d}function u3(d){if(d===ph||d===Kx)throw Error(r(483))}var mh=null,Sg=0;function Yx(d){var h=Sg;return Sg+=1,mh===null&&(mh=[]),l3(mh,d,h)}function Cg(d,h){h=h.props.ref,d.ref=h!==void 0?h:null}function Qx(d,h){throw h.$$typeof===m?Error(r(525)):(d=Object.prototype.toString.call(h),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d)))}function d3(d){function h(pe,ue){if(d){var ve=pe.deletions;ve===null?(pe.deletions=[ue],pe.flags|=16):ve.push(ue)}}function g(pe,ue){if(!d)return null;for(;ue!==null;)h(pe,ue),ue=ue.sibling;return null}function w(pe){for(var ue=new Map;pe!==null;)pe.key!==null?ue.set(pe.key,pe):ue.set(pe.index,pe),pe=pe.sibling;return ue}function N(pe,ue){return pe=Ol(pe,ue),pe.index=0,pe.sibling=null,pe}function A(pe,ue,ve){return pe.index=ve,d?(ve=pe.alternate,ve!==null?(ve=ve.index,ve<ue?(pe.flags|=67108866,ue):ve):(pe.flags|=67108866,ue)):(pe.flags|=1048576,ue)}function M(pe){return d&&pe.alternate===null&&(pe.flags|=67108866),pe}function H(pe,ue,ve,ze){return ue===null||ue.tag!==6?(ue=SN(ve,pe.mode,ze),ue.return=pe,ue):(ue=N(ue,ve),ue.return=pe,ue)}function re(pe,ue,ve,ze){var bt=ve.type;return bt===v?Re(pe,ue,ve.props.children,ze,ve.key):ue!==null&&(ue.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===z&&xd(bt)===ue.type)?(ue=N(ue,ve.props),Cg(ue,ve),ue.return=pe,ue):(ue=Wx(ve.type,ve.key,ve.props,null,pe.mode,ze),Cg(ue,ve),ue.return=pe,ue)}function Se(pe,ue,ve,ze){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==ve.containerInfo||ue.stateNode.implementation!==ve.implementation?(ue=CN(ve,pe.mode,ze),ue.return=pe,ue):(ue=N(ue,ve.children||[]),ue.return=pe,ue)}function Re(pe,ue,ve,ze,bt){return ue===null||ue.tag!==7?(ue=pd(ve,pe.mode,ze,bt),ue.return=pe,ue):(ue=N(ue,ve),ue.return=pe,ue)}function Le(pe,ue,ve){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=SN(""+ue,pe.mode,ve),ue.return=pe,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case y:return ve=Wx(ue.type,ue.key,ue.props,null,pe.mode,ve),Cg(ve,ue),ve.return=pe,ve;case b:return ue=CN(ue,pe.mode,ve),ue.return=pe,ue;case z:return ue=xd(ue),Le(pe,ue,ve)}if(Y(ue)||U(ue))return ue=pd(ue,pe.mode,ve,null),ue.return=pe,ue;if(typeof ue.then=="function")return Le(pe,Yx(ue),ve);if(ue.$$typeof===E)return Le(pe,Gx(pe,ue),ve);Qx(pe,ue)}return null}function ke(pe,ue,ve,ze){var bt=ue!==null?ue.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return bt!==null?null:H(pe,ue,""+ve,ze);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case y:return ve.key===bt?re(pe,ue,ve,ze):null;case b:return ve.key===bt?Se(pe,ue,ve,ze):null;case z:return ve=xd(ve),ke(pe,ue,ve,ze)}if(Y(ve)||U(ve))return bt!==null?null:Re(pe,ue,ve,ze,null);if(typeof ve.then=="function")return ke(pe,ue,Yx(ve),ze);if(ve.$$typeof===E)return ke(pe,ue,Gx(pe,ve),ze);Qx(pe,ve)}return null}function Ie(pe,ue,ve,ze,bt){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return pe=pe.get(ve)||null,H(ue,pe,""+ze,bt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case y:return pe=pe.get(ze.key===null?ve:ze.key)||null,re(ue,pe,ze,bt);case b:return pe=pe.get(ze.key===null?ve:ze.key)||null,Se(ue,pe,ze,bt);case z:return ze=xd(ze),Ie(pe,ue,ve,ze,bt)}if(Y(ze)||U(ze))return pe=pe.get(ve)||null,Re(ue,pe,ze,bt,null);if(typeof ze.then=="function")return Ie(pe,ue,ve,Yx(ze),bt);if(ze.$$typeof===E)return Ie(pe,ue,ve,Gx(ue,ze),bt);Qx(ue,ze)}return null}function st(pe,ue,ve,ze){for(var bt=null,ln=null,dt=ue,Dt=ue=0,Yt=null;dt!==null&&Dt<ve.length;Dt++){dt.index>Dt?(Yt=dt,dt=null):Yt=dt.sibling;var cn=ke(pe,dt,ve[Dt],ze);if(cn===null){dt===null&&(dt=Yt);break}d&&dt&&cn.alternate===null&&h(pe,dt),ue=A(cn,ue,Dt),ln===null?bt=cn:ln.sibling=cn,ln=cn,dt=Yt}if(Dt===ve.length)return g(pe,dt),Jt&&_l(pe,Dt),bt;if(dt===null){for(;Dt<ve.length;Dt++)dt=Le(pe,ve[Dt],ze),dt!==null&&(ue=A(dt,ue,Dt),ln===null?bt=dt:ln.sibling=dt,ln=dt);return Jt&&_l(pe,Dt),bt}for(dt=w(dt);Dt<ve.length;Dt++)Yt=Ie(dt,pe,Dt,ve[Dt],ze),Yt!==null&&(d&&Yt.alternate!==null&&dt.delete(Yt.key===null?Dt:Yt.key),ue=A(Yt,ue,Dt),ln===null?bt=Yt:ln.sibling=Yt,ln=Yt);return d&&dt.forEach(function(uu){return h(pe,uu)}),Jt&&_l(pe,Dt),bt}function wt(pe,ue,ve,ze){if(ve==null)throw Error(r(151));for(var bt=null,ln=null,dt=ue,Dt=ue=0,Yt=null,cn=ve.next();dt!==null&&!cn.done;Dt++,cn=ve.next()){dt.index>Dt?(Yt=dt,dt=null):Yt=dt.sibling;var uu=ke(pe,dt,cn.value,ze);if(uu===null){dt===null&&(dt=Yt);break}d&&dt&&uu.alternate===null&&h(pe,dt),ue=A(uu,ue,Dt),ln===null?bt=uu:ln.sibling=uu,ln=uu,dt=Yt}if(cn.done)return g(pe,dt),Jt&&_l(pe,Dt),bt;if(dt===null){for(;!cn.done;Dt++,cn=ve.next())cn=Le(pe,cn.value,ze),cn!==null&&(ue=A(cn,ue,Dt),ln===null?bt=cn:ln.sibling=cn,ln=cn);return Jt&&_l(pe,Dt),bt}for(dt=w(dt);!cn.done;Dt++,cn=ve.next())cn=Ie(dt,pe,Dt,cn.value,ze),cn!==null&&(d&&cn.alternate!==null&&dt.delete(cn.key===null?Dt:cn.key),ue=A(cn,ue,Dt),ln===null?bt=cn:ln.sibling=cn,ln=cn);return d&&dt.forEach(function(Ste){return h(pe,Ste)}),Jt&&_l(pe,Dt),bt}function Tn(pe,ue,ve,ze){if(typeof ve=="object"&&ve!==null&&ve.type===v&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case y:e:{for(var bt=ve.key;ue!==null;){if(ue.key===bt){if(bt=ve.type,bt===v){if(ue.tag===7){g(pe,ue.sibling),ze=N(ue,ve.props.children),ze.return=pe,pe=ze;break e}}else if(ue.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===z&&xd(bt)===ue.type){g(pe,ue.sibling),ze=N(ue,ve.props),Cg(ze,ve),ze.return=pe,pe=ze;break e}g(pe,ue);break}else h(pe,ue);ue=ue.sibling}ve.type===v?(ze=pd(ve.props.children,pe.mode,ze,ve.key),ze.return=pe,pe=ze):(ze=Wx(ve.type,ve.key,ve.props,null,pe.mode,ze),Cg(ze,ve),ze.return=pe,pe=ze)}return M(pe);case b:e:{for(bt=ve.key;ue!==null;){if(ue.key===bt)if(ue.tag===4&&ue.stateNode.containerInfo===ve.containerInfo&&ue.stateNode.implementation===ve.implementation){g(pe,ue.sibling),ze=N(ue,ve.children||[]),ze.return=pe,pe=ze;break e}else{g(pe,ue);break}else h(pe,ue);ue=ue.sibling}ze=CN(ve,pe.mode,ze),ze.return=pe,pe=ze}return M(pe);case z:return ve=xd(ve),Tn(pe,ue,ve,ze)}if(Y(ve))return st(pe,ue,ve,ze);if(U(ve)){if(bt=U(ve),typeof bt!="function")throw Error(r(150));return ve=bt.call(ve),wt(pe,ue,ve,ze)}if(typeof ve.then=="function")return Tn(pe,ue,Yx(ve),ze);if(ve.$$typeof===E)return Tn(pe,ue,Gx(pe,ve),ze);Qx(pe,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,ue!==null&&ue.tag===6?(g(pe,ue.sibling),ze=N(ue,ve),ze.return=pe,pe=ze):(g(pe,ue),ze=SN(ve,pe.mode,ze),ze.return=pe,pe=ze),M(pe)):g(pe,ue)}return function(pe,ue,ve,ze){try{Sg=0;var bt=Tn(pe,ue,ve,ze);return mh=null,bt}catch(dt){if(dt===ph||dt===Kx)throw dt;var ln=ni(29,dt,null,pe.mode);return ln.lanes=ze,ln.return=pe,ln}}}var wd=d3(!0),f3=d3(!1),Hc=!1;function DN(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zN(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function Kc(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function Xc(d,h,g){var w=d.updateQueue;if(w===null)return null;if(w=w.shared,(hn&2)!==0){var N=w.pending;return N===null?h.next=h:(h.next=N.next,N.next=h),w.pending=h,h=Ux(d),X5(d,null,g),h}return Bx(d,w,h,g),Ux(d)}function kg(d,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194048)!==0)){var w=h.lanes;w&=d.pendingLanes,g|=w,h.lanes=g,Dc(d,g)}}function PN(d,h){var g=d.updateQueue,w=d.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var N=null,A=null;if(g=g.firstBaseUpdate,g!==null){do{var M={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};A===null?N=A=M:A=A.next=M,g=g.next}while(g!==null);A===null?N=A=h:A=A.next=h}else N=A=h;g={baseState:w.baseState,firstBaseUpdate:N,lastBaseUpdate:A,shared:w.shared,callbacks:w.callbacks},d.updateQueue=g;return}d=g.lastBaseUpdate,d===null?g.firstBaseUpdate=h:d.next=h,g.lastBaseUpdate=h}var LN=!1;function Ng(){if(LN){var d=hh;if(d!==null)throw d}}function Tg(d,h,g,w){LN=!1;var N=d.updateQueue;Hc=!1;var A=N.firstBaseUpdate,M=N.lastBaseUpdate,H=N.shared.pending;if(H!==null){N.shared.pending=null;var re=H,Se=re.next;re.next=null,M===null?A=Se:M.next=Se,M=re;var Re=d.alternate;Re!==null&&(Re=Re.updateQueue,H=Re.lastBaseUpdate,H!==M&&(H===null?Re.firstBaseUpdate=Se:H.next=Se,Re.lastBaseUpdate=re))}if(A!==null){var Le=N.baseState;M=0,Re=Se=re=null,H=A;do{var ke=H.lane&-536870913,Ie=ke!==H.lane;if(Ie?(Xt&ke)===ke:(w&ke)===ke){ke!==0&&ke===fh&&(LN=!0),Re!==null&&(Re=Re.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var st=d,wt=H;ke=h;var Tn=g;switch(wt.tag){case 1:if(st=wt.payload,typeof st=="function"){Le=st.call(Tn,Le,ke);break e}Le=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=wt.payload,ke=typeof st=="function"?st.call(Tn,Le,ke):st,ke==null)break e;Le=p({},Le,ke);break e;case 2:Hc=!0}}ke=H.callback,ke!==null&&(d.flags|=64,Ie&&(d.flags|=8192),Ie=N.callbacks,Ie===null?N.callbacks=[ke]:Ie.push(ke))}else Ie={lane:ke,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Re===null?(Se=Re=Ie,re=Le):Re=Re.next=Ie,M|=ke;if(H=H.next,H===null){if(H=N.shared.pending,H===null)break;Ie=H,H=Ie.next,Ie.next=null,N.lastBaseUpdate=Ie,N.shared.pending=null}}while(!0);Re===null&&(re=Le),N.baseState=re,N.firstBaseUpdate=Se,N.lastBaseUpdate=Re,A===null&&(N.shared.lanes=0),eu|=M,d.lanes=M,d.memoizedState=Le}}function h3(d,h){if(typeof d!="function")throw Error(r(191,d));d.call(h)}function p3(d,h){var g=d.callbacks;if(g!==null)for(d.callbacks=null,d=0;d<g.length;d++)h3(g[d],h)}var gh=W(null),Zx=W(0);function m3(d,h){d=ql,se(Zx,d),se(gh,h),ql=d|h.baseLanes}function MN(){se(Zx,ql),se(gh,gh.current)}function FN(){ql=Zx.current,Q(gh),Q(Zx)}var ri=W(null),_i=null;function Yc(d){var h=d.alternate;se(Cr,Cr.current&1),se(ri,d),_i===null&&(h===null||gh.current!==null||h.memoizedState!==null)&&(_i=d)}function BN(d){se(Cr,Cr.current),se(ri,d),_i===null&&(_i=d)}function g3(d){d.tag===22?(se(Cr,Cr.current),se(ri,d),_i===null&&(_i=d)):Qc()}function Qc(){se(Cr,Cr.current),se(ri,ri.current)}function si(d){Q(ri),_i===d&&(_i=null),Q(Cr)}var Cr=W(0);function Jx(d){for(var h=d;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||HT(g)||KT(g)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Pl=0,Ot=null,kn=null,Rr=null,ev=!1,yh=!1,Sd=!1,tv=0,Eg=0,bh=null,fee=0;function ur(){throw Error(r(321))}function UN(d,h){if(h===null)return!1;for(var g=0;g<h.length&&g<d.length;g++)if(!ti(d[g],h[g]))return!1;return!0}function WN(d,h,g,w,N,A){return Pl=A,Ot=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,B.H=d===null||d.memoizedState===null?J3:sT,Sd=!1,A=g(w,N),Sd=!1,yh&&(A=b3(h,g,w,N)),y3(d),A}function y3(d){B.H=jg;var h=kn!==null&&kn.next!==null;if(Pl=0,Rr=kn=Ot=null,ev=!1,Eg=0,bh=null,h)throw Error(r(300));d===null||Or||(d=d.dependencies,d!==null&&qx(d)&&(Or=!0))}function b3(d,h,g,w){Ot=d;var N=0;do{if(yh&&(bh=null),Eg=0,yh=!1,25<=N)throw Error(r(301));if(N+=1,Rr=kn=null,d.updateQueue!=null){var A=d.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}B.H=e4,A=h(g,w)}while(yh);return A}function hee(){var d=B.H,h=d.useState()[0];return h=typeof h.then=="function"?Ig(h):h,d=d.useState()[0],(kn!==null?kn.memoizedState:null)!==d&&(Ot.flags|=1024),h}function VN(){var d=tv!==0;return tv=0,d}function qN(d,h,g){h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~g}function GN(d){if(ev){for(d=d.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}ev=!1}Pl=0,Rr=kn=Ot=null,yh=!1,Eg=tv=0,bh=null}function fa(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rr===null?Ot.memoizedState=Rr=d:Rr=Rr.next=d,Rr}function kr(){if(kn===null){var d=Ot.alternate;d=d!==null?d.memoizedState:null}else d=kn.next;var h=Rr===null?Ot.memoizedState:Rr.next;if(h!==null)Rr=h,kn=d;else{if(d===null)throw Ot.alternate===null?Error(r(467)):Error(r(310));kn=d,d={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Rr===null?Ot.memoizedState=Rr=d:Rr=Rr.next=d}return Rr}function nv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ig(d){var h=Eg;return Eg+=1,bh===null&&(bh=[]),d=l3(bh,d,h),h=Ot,(Rr===null?h.memoizedState:Rr.next)===null&&(h=h.alternate,B.H=h===null||h.memoizedState===null?J3:sT),d}function rv(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Ig(d);if(d.$$typeof===E)return $s(d)}throw Error(r(438,String(d)))}function HN(d){var h=null,g=Ot.updateQueue;if(g!==null&&(h=g.memoCache),h==null){var w=Ot.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(h={data:w.data.map(function(N){return N.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),g===null&&(g=nv(),Ot.updateQueue=g),g.memoCache=h,g=h.data[h.index],g===void 0)for(g=h.data[h.index]=Array(d),w=0;w<d;w++)g[w]=R;return h.index++,g}function Ll(d,h){return typeof h=="function"?h(d):h}function sv(d){var h=kr();return KN(h,kn,d)}function KN(d,h,g){var w=d.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=g;var N=d.baseQueue,A=w.pending;if(A!==null){if(N!==null){var M=N.next;N.next=A.next,A.next=M}h.baseQueue=N=A,w.pending=null}if(A=d.baseState,N===null)d.memoizedState=A;else{h=N.next;var H=M=null,re=null,Se=h,Re=!1;do{var Le=Se.lane&-536870913;if(Le!==Se.lane?(Xt&Le)===Le:(Pl&Le)===Le){var ke=Se.revertLane;if(ke===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),Le===fh&&(Re=!0);else if((Pl&ke)===ke){Se=Se.next,ke===fh&&(Re=!0);continue}else Le={lane:0,revertLane:Se.revertLane,gesture:null,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},re===null?(H=re=Le,M=A):re=re.next=Le,Ot.lanes|=ke,eu|=ke;Le=Se.action,Sd&&g(A,Le),A=Se.hasEagerState?Se.eagerState:g(A,Le)}else ke={lane:Le,revertLane:Se.revertLane,gesture:Se.gesture,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},re===null?(H=re=ke,M=A):re=re.next=ke,Ot.lanes|=Le,eu|=Le;Se=Se.next}while(Se!==null&&Se!==h);if(re===null?M=A:re.next=H,!ti(A,d.memoizedState)&&(Or=!0,Re&&(g=hh,g!==null)))throw g;d.memoizedState=A,d.baseState=M,d.baseQueue=re,w.lastRenderedState=A}return N===null&&(w.lanes=0),[d.memoizedState,w.dispatch]}function XN(d){var h=kr(),g=h.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=d;var w=g.dispatch,N=g.pending,A=h.memoizedState;if(N!==null){g.pending=null;var M=N=N.next;do A=d(A,M.action),M=M.next;while(M!==N);ti(A,h.memoizedState)||(Or=!0),h.memoizedState=A,h.baseQueue===null&&(h.baseState=A),g.lastRenderedState=A}return[A,w]}function x3(d,h,g){var w=Ot,N=kr(),A=Jt;if(A){if(g===void 0)throw Error(r(407));g=g()}else g=h();var M=!ti((kn||N).memoizedState,g);if(M&&(N.memoizedState=g,Or=!0),N=N.queue,ZN(S3.bind(null,w,N,d),[d]),N.getSnapshot!==h||M||Rr!==null&&Rr.memoizedState.tag&1){if(w.flags|=2048,xh(9,{destroy:void 0},w3.bind(null,w,N,g,h),null),Rn===null)throw Error(r(349));A||(Pl&127)!==0||v3(w,h,g)}return g}function v3(d,h,g){d.flags|=16384,d={getSnapshot:h,value:g},h=Ot.updateQueue,h===null?(h=nv(),Ot.updateQueue=h,h.stores=[d]):(g=h.stores,g===null?h.stores=[d]:g.push(d))}function w3(d,h,g,w){h.value=g,h.getSnapshot=w,C3(h)&&k3(d)}function S3(d,h,g){return g(function(){C3(h)&&k3(d)})}function C3(d){var h=d.getSnapshot;d=d.value;try{var g=h();return!ti(d,g)}catch{return!0}}function k3(d){var h=hd(d,2);h!==null&&_a(h,d,2)}function YN(d){var h=fa();if(typeof d=="function"){var g=d;if(d=g(),Sd){Pe(!0);try{g()}finally{Pe(!1)}}}return h.memoizedState=h.baseState=d,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:d},h}function N3(d,h,g,w){return d.baseState=g,KN(d,kn,typeof w=="function"?w:Ll)}function pee(d,h,g,w,N){if(ov(d))throw Error(r(485));if(d=h.action,d!==null){var A={payload:N,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){A.listeners.push(M)}};B.T!==null?g(!0):A.isTransition=!1,w(A),g=h.pending,g===null?(A.next=h.pending=A,T3(h,A)):(A.next=g.next,h.pending=g.next=A)}}function T3(d,h){var g=h.action,w=h.payload,N=d.state;if(h.isTransition){var A=B.T,M={};B.T=M;try{var H=g(N,w),re=B.S;re!==null&&re(M,H),E3(d,h,H)}catch(Se){QN(d,h,Se)}finally{A!==null&&M.types!==null&&(A.types=M.types),B.T=A}}else try{A=g(N,w),E3(d,h,A)}catch(Se){QN(d,h,Se)}}function E3(d,h,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(w){I3(d,h,w)},function(w){return QN(d,h,w)}):I3(d,h,g)}function I3(d,h,g){h.status="fulfilled",h.value=g,A3(h),d.state=g,h=d.pending,h!==null&&(g=h.next,g===h?d.pending=null:(g=g.next,h.next=g,T3(d,g)))}function QN(d,h,g){var w=d.pending;if(d.pending=null,w!==null){w=w.next;do h.status="rejected",h.reason=g,A3(h),h=h.next;while(h!==w)}d.action=null}function A3(d){d=d.listeners;for(var h=0;h<d.length;h++)(0,d[h])()}function j3(d,h){return h}function $3(d,h){if(Jt){var g=Rn.formState;if(g!==null){e:{var w=Ot;if(Jt){if(Fn){t:{for(var N=Fn,A=Oi;N.nodeType!==8;){if(!A){N=null;break t}if(N=Di(N.nextSibling),N===null){N=null;break t}}A=N.data,N=A==="F!"||A==="F"?N:null}if(N){Fn=Di(N.nextSibling),w=N.data==="F!";break e}}qc(w)}w=!1}w&&(h=g[0])}}return g=fa(),g.memoizedState=g.baseState=h,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:j3,lastRenderedState:h},g.queue=w,g=Y3.bind(null,Ot,w),w.dispatch=g,w=YN(!1),A=rT.bind(null,Ot,!1,w.queue),w=fa(),N={state:h,dispatch:null,action:d,pending:null},w.queue=N,g=pee.bind(null,Ot,N,A,g),N.dispatch=g,w.memoizedState=d,[h,g,!1]}function R3(d){var h=kr();return O3(h,kn,d)}function O3(d,h,g){if(h=KN(d,h,j3)[0],d=sv(Ll)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var w=Ig(h)}catch(M){throw M===ph?Kx:M}else w=h;h=kr();var N=h.queue,A=N.dispatch;return g!==h.memoizedState&&(Ot.flags|=2048,xh(9,{destroy:void 0},mee.bind(null,N,g),null)),[w,A,d]}function mee(d,h){d.action=h}function _3(d){var h=kr(),g=kn;if(g!==null)return O3(h,g,d);kr(),h=h.memoizedState,g=kr();var w=g.queue.dispatch;return g.memoizedState=d,[h,w,!1]}function xh(d,h,g,w){return d={tag:d,create:g,deps:w,inst:h,next:null},h=Ot.updateQueue,h===null&&(h=nv(),Ot.updateQueue=h),g=h.lastEffect,g===null?h.lastEffect=d.next=d:(w=g.next,g.next=d,d.next=w,h.lastEffect=d),d}function D3(){return kr().memoizedState}function av(d,h,g,w){var N=fa();Ot.flags|=d,N.memoizedState=xh(1|h,{destroy:void 0},g,w===void 0?null:w)}function iv(d,h,g,w){var N=kr();w=w===void 0?null:w;var A=N.memoizedState.inst;kn!==null&&w!==null&&UN(w,kn.memoizedState.deps)?N.memoizedState=xh(h,A,g,w):(Ot.flags|=d,N.memoizedState=xh(1|h,A,g,w))}function z3(d,h){av(8390656,8,d,h)}function ZN(d,h){iv(2048,8,d,h)}function gee(d){Ot.flags|=4;var h=Ot.updateQueue;if(h===null)h=nv(),Ot.updateQueue=h,h.events=[d];else{var g=h.events;g===null?h.events=[d]:g.push(d)}}function P3(d){var h=kr().memoizedState;return gee({ref:h,nextImpl:d}),function(){if((hn&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}function L3(d,h){return iv(4,2,d,h)}function M3(d,h){return iv(4,4,d,h)}function F3(d,h){if(typeof h=="function"){d=d();var g=h(d);return function(){typeof g=="function"?g():h(null)}}if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function B3(d,h,g){g=g!=null?g.concat([d]):null,iv(4,4,F3.bind(null,h,d),g)}function JN(){}function U3(d,h){var g=kr();h=h===void 0?null:h;var w=g.memoizedState;return h!==null&&UN(h,w[1])?w[0]:(g.memoizedState=[d,h],d)}function W3(d,h){var g=kr();h=h===void 0?null:h;var w=g.memoizedState;if(h!==null&&UN(h,w[1]))return w[0];if(w=d(),Sd){Pe(!0);try{d()}finally{Pe(!1)}}return g.memoizedState=[w,h],w}function eT(d,h,g){return g===void 0||(Pl&1073741824)!==0&&(Xt&261930)===0?d.memoizedState=h:(d.memoizedState=g,d=V4(),Ot.lanes|=d,eu|=d,g)}function V3(d,h,g,w){return ti(g,h)?g:gh.current!==null?(d=eT(d,g,w),ti(d,h)||(Or=!0),d):(Pl&42)===0||(Pl&1073741824)!==0&&(Xt&261930)===0?(Or=!0,d.memoizedState=g):(d=V4(),Ot.lanes|=d,eu|=d,h)}function q3(d,h,g,w,N){var A=Z.p;Z.p=A!==0&&8>A?A:8;var M=B.T,H={};B.T=H,rT(d,!1,h,g);try{var re=N(),Se=B.S;if(Se!==null&&Se(H,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Re=dee(re,w);Ag(d,h,Re,oi(d))}else Ag(d,h,w,oi(d))}catch(Le){Ag(d,h,{then:function(){},status:"rejected",reason:Le},oi())}finally{Z.p=A,M!==null&&H.types!==null&&(M.types=H.types),B.T=M}}function yee(){}function tT(d,h,g,w){if(d.tag!==5)throw Error(r(476));var N=G3(d).queue;q3(d,N,h,J,g===null?yee:function(){return H3(d),g(w)})}function G3(d){var h=d.memoizedState;if(h!==null)return h;h={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:J},next:null};var g={};return h.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:g},next:null},d.memoizedState=h,d=d.alternate,d!==null&&(d.memoizedState=h),h}function H3(d){var h=G3(d);h.next===null&&(h=d.alternate.memoizedState),Ag(d,h.next.queue,{},oi())}function nT(){return $s(Gg)}function K3(){return kr().memoizedState}function X3(){return kr().memoizedState}function bee(d){for(var h=d.return;h!==null;){switch(h.tag){case 24:case 3:var g=oi();d=Kc(g);var w=Xc(h,d,g);w!==null&&(_a(w,h,g),kg(w,h,g)),h={cache:$N()},d.payload=h;return}h=h.return}}function xee(d,h,g){var w=oi();g={lane:w,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},ov(d)?Q3(h,g):(g=vN(d,h,g,w),g!==null&&(_a(g,d,w),Z3(g,h,w)))}function Y3(d,h,g){var w=oi();Ag(d,h,g,w)}function Ag(d,h,g,w){var N={lane:w,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(ov(d))Q3(h,N);else{var A=d.alternate;if(d.lanes===0&&(A===null||A.lanes===0)&&(A=h.lastRenderedReducer,A!==null))try{var M=h.lastRenderedState,H=A(M,g);if(N.hasEagerState=!0,N.eagerState=H,ti(H,M))return Bx(d,h,N,0),Rn===null&&Fx(),!1}catch{}if(g=vN(d,h,N,w),g!==null)return _a(g,d,w),Z3(g,h,w),!0}return!1}function rT(d,h,g,w){if(w={lane:2,revertLane:DT(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},ov(d)){if(h)throw Error(r(479))}else h=vN(d,g,w,2),h!==null&&_a(h,d,2)}function ov(d){var h=d.alternate;return d===Ot||h!==null&&h===Ot}function Q3(d,h){yh=ev=!0;var g=d.pending;g===null?h.next=h:(h.next=g.next,g.next=h),d.pending=h}function Z3(d,h,g){if((g&4194048)!==0){var w=h.lanes;w&=d.pendingLanes,g|=w,h.lanes=g,Dc(d,g)}}var jg={readContext:$s,use:rv,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useLayoutEffect:ur,useInsertionEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useSyncExternalStore:ur,useId:ur,useHostTransitionStatus:ur,useFormState:ur,useActionState:ur,useOptimistic:ur,useMemoCache:ur,useCacheRefresh:ur};jg.useEffectEvent=ur;var J3={readContext:$s,use:rv,useCallback:function(d,h){return fa().memoizedState=[d,h===void 0?null:h],d},useContext:$s,useEffect:z3,useImperativeHandle:function(d,h,g){g=g!=null?g.concat([d]):null,av(4194308,4,F3.bind(null,h,d),g)},useLayoutEffect:function(d,h){return av(4194308,4,d,h)},useInsertionEffect:function(d,h){av(4,2,d,h)},useMemo:function(d,h){var g=fa();h=h===void 0?null:h;var w=d();if(Sd){Pe(!0);try{d()}finally{Pe(!1)}}return g.memoizedState=[w,h],w},useReducer:function(d,h,g){var w=fa();if(g!==void 0){var N=g(h);if(Sd){Pe(!0);try{g(h)}finally{Pe(!1)}}}else N=h;return w.memoizedState=w.baseState=N,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:N},w.queue=d,d=d.dispatch=xee.bind(null,Ot,d),[w.memoizedState,d]},useRef:function(d){var h=fa();return d={current:d},h.memoizedState=d},useState:function(d){d=YN(d);var h=d.queue,g=Y3.bind(null,Ot,h);return h.dispatch=g,[d.memoizedState,g]},useDebugValue:JN,useDeferredValue:function(d,h){var g=fa();return eT(g,d,h)},useTransition:function(){var d=YN(!1);return d=q3.bind(null,Ot,d.queue,!0,!1),fa().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,h,g){var w=Ot,N=fa();if(Jt){if(g===void 0)throw Error(r(407));g=g()}else{if(g=h(),Rn===null)throw Error(r(349));(Xt&127)!==0||v3(w,h,g)}N.memoizedState=g;var A={value:g,getSnapshot:h};return N.queue=A,z3(S3.bind(null,w,A,d),[d]),w.flags|=2048,xh(9,{destroy:void 0},w3.bind(null,w,A,g,h),null),g},useId:function(){var d=fa(),h=Rn.identifierPrefix;if(Jt){var g=qo,w=Vo;g=(w&~(1<<32-Oe(w)-1)).toString(32)+g,h="_"+h+"R_"+g,g=tv++,0<g&&(h+="H"+g.toString(32)),h+="_"}else g=fee++,h="_"+h+"r_"+g.toString(32)+"_";return d.memoizedState=h},useHostTransitionStatus:nT,useFormState:$3,useActionState:$3,useOptimistic:function(d){var h=fa();h.memoizedState=h.baseState=d;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=g,h=rT.bind(null,Ot,!0,g),g.dispatch=h,[d,h]},useMemoCache:HN,useCacheRefresh:function(){return fa().memoizedState=bee.bind(null,Ot)},useEffectEvent:function(d){var h=fa(),g={impl:d};return h.memoizedState=g,function(){if((hn&2)!==0)throw Error(r(440));return g.impl.apply(void 0,arguments)}}},sT={readContext:$s,use:rv,useCallback:U3,useContext:$s,useEffect:ZN,useImperativeHandle:B3,useInsertionEffect:L3,useLayoutEffect:M3,useMemo:W3,useReducer:sv,useRef:D3,useState:function(){return sv(Ll)},useDebugValue:JN,useDeferredValue:function(d,h){var g=kr();return V3(g,kn.memoizedState,d,h)},useTransition:function(){var d=sv(Ll)[0],h=kr().memoizedState;return[typeof d=="boolean"?d:Ig(d),h]},useSyncExternalStore:x3,useId:K3,useHostTransitionStatus:nT,useFormState:R3,useActionState:R3,useOptimistic:function(d,h){var g=kr();return N3(g,kn,d,h)},useMemoCache:HN,useCacheRefresh:X3};sT.useEffectEvent=P3;var e4={readContext:$s,use:rv,useCallback:U3,useContext:$s,useEffect:ZN,useImperativeHandle:B3,useInsertionEffect:L3,useLayoutEffect:M3,useMemo:W3,useReducer:XN,useRef:D3,useState:function(){return XN(Ll)},useDebugValue:JN,useDeferredValue:function(d,h){var g=kr();return kn===null?eT(g,d,h):V3(g,kn.memoizedState,d,h)},useTransition:function(){var d=XN(Ll)[0],h=kr().memoizedState;return[typeof d=="boolean"?d:Ig(d),h]},useSyncExternalStore:x3,useId:K3,useHostTransitionStatus:nT,useFormState:_3,useActionState:_3,useOptimistic:function(d,h){var g=kr();return kn!==null?N3(g,kn,d,h):(g.baseState=d,[d,g.queue.dispatch])},useMemoCache:HN,useCacheRefresh:X3};e4.useEffectEvent=P3;function aT(d,h,g,w){h=d.memoizedState,g=g(w,h),g=g==null?h:p({},h,g),d.memoizedState=g,d.lanes===0&&(d.updateQueue.baseState=g)}var iT={enqueueSetState:function(d,h,g){d=d._reactInternals;var w=oi(),N=Kc(w);N.payload=h,g!=null&&(N.callback=g),h=Xc(d,N,w),h!==null&&(_a(h,d,w),kg(h,d,w))},enqueueReplaceState:function(d,h,g){d=d._reactInternals;var w=oi(),N=Kc(w);N.tag=1,N.payload=h,g!=null&&(N.callback=g),h=Xc(d,N,w),h!==null&&(_a(h,d,w),kg(h,d,w))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var g=oi(),w=Kc(g);w.tag=2,h!=null&&(w.callback=h),h=Xc(d,w,g),h!==null&&(_a(h,d,g),kg(h,d,g))}};function t4(d,h,g,w,N,A,M){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(w,A,M):h.prototype&&h.prototype.isPureReactComponent?!gg(g,w)||!gg(N,A):!0}function n4(d,h,g,w){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,w),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,w),h.state!==d&&iT.enqueueReplaceState(h,h.state,null)}function Cd(d,h){var g=h;if("ref"in h){g={};for(var w in h)w!=="ref"&&(g[w]=h[w])}if(d=d.defaultProps){g===h&&(g=p({},g));for(var N in d)g[N]===void 0&&(g[N]=d[N])}return g}function r4(d){Mx(d)}function s4(d){console.error(d)}function a4(d){Mx(d)}function lv(d,h){try{var g=d.onUncaughtError;g(h.value,{componentStack:h.stack})}catch(w){setTimeout(function(){throw w})}}function i4(d,h,g){try{var w=d.onCaughtError;w(g.value,{componentStack:g.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function oT(d,h,g){return g=Kc(g),g.tag=3,g.payload={element:null},g.callback=function(){lv(d,h)},g}function o4(d){return d=Kc(d),d.tag=3,d}function l4(d,h,g,w){var N=g.type.getDerivedStateFromError;if(typeof N=="function"){var A=w.value;d.payload=function(){return N(A)},d.callback=function(){i4(h,g,w)}}var M=g.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(d.callback=function(){i4(h,g,w),typeof N!="function"&&(tu===null?tu=new Set([this]):tu.add(this));var H=w.stack;this.componentDidCatch(w.value,{componentStack:H!==null?H:""})})}function vee(d,h,g,w,N){if(g.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(h=g.alternate,h!==null&&dh(h,g,N,!0),g=ri.current,g!==null){switch(g.tag){case 31:case 13:return _i===null?vv():g.alternate===null&&dr===0&&(dr=3),g.flags&=-257,g.flags|=65536,g.lanes=N,w===Xx?g.flags|=16384:(h=g.updateQueue,h===null?g.updateQueue=new Set([w]):h.add(w),RT(d,w,N)),!1;case 22:return g.flags|=65536,w===Xx?g.flags|=16384:(h=g.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([w])},g.updateQueue=h):(g=h.retryQueue,g===null?h.retryQueue=new Set([w]):g.add(w)),RT(d,w,N)),!1}throw Error(r(435,g.tag))}return RT(d,w,N),vv(),!1}if(Jt)return h=ri.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=N,w!==TN&&(d=Error(r(422),{cause:w}),xg(ji(d,g)))):(w!==TN&&(h=Error(r(423),{cause:w}),xg(ji(h,g))),d=d.current.alternate,d.flags|=65536,N&=-N,d.lanes|=N,w=ji(w,g),N=oT(d.stateNode,w,N),PN(d,N),dr!==4&&(dr=2)),!1;var A=Error(r(520),{cause:w});if(A=ji(A,g),Lg===null?Lg=[A]:Lg.push(A),dr!==4&&(dr=2),h===null)return!0;w=ji(w,g),g=h;do{switch(g.tag){case 3:return g.flags|=65536,d=N&-N,g.lanes|=d,d=oT(g.stateNode,w,d),PN(g,d),!1;case 1:if(h=g.type,A=g.stateNode,(g.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(tu===null||!tu.has(A))))return g.flags|=65536,N&=-N,g.lanes|=N,N=o4(N),l4(N,d,g,w),PN(g,N),!1}g=g.return}while(g!==null);return!1}var lT=Error(r(461)),Or=!1;function Rs(d,h,g,w){h.child=d===null?f3(h,null,g,w):wd(h,d.child,g,w)}function c4(d,h,g,w,N){g=g.render;var A=h.ref;if("ref"in w){var M={};for(var H in w)H!=="ref"&&(M[H]=w[H])}else M=w;return yd(h),w=WN(d,h,g,M,A,N),H=VN(),d!==null&&!Or?(qN(d,h,N),Ml(d,h,N)):(Jt&&H&&kN(h),h.flags|=1,Rs(d,h,w,N),h.child)}function u4(d,h,g,w,N){if(d===null){var A=g.type;return typeof A=="function"&&!wN(A)&&A.defaultProps===void 0&&g.compare===null?(h.tag=15,h.type=A,d4(d,h,A,w,N)):(d=Wx(g.type,null,w,h,h.mode,N),d.ref=h.ref,d.return=h,h.child=d)}if(A=d.child,!gT(d,N)){var M=A.memoizedProps;if(g=g.compare,g=g!==null?g:gg,g(M,w)&&d.ref===h.ref)return Ml(d,h,N)}return h.flags|=1,d=Ol(A,w),d.ref=h.ref,d.return=h,h.child=d}function d4(d,h,g,w,N){if(d!==null){var A=d.memoizedProps;if(gg(A,w)&&d.ref===h.ref)if(Or=!1,h.pendingProps=w=A,gT(d,N))(d.flags&131072)!==0&&(Or=!0);else return h.lanes=d.lanes,Ml(d,h,N)}return cT(d,h,g,w,N)}function f4(d,h,g,w){var N=w.children,A=d!==null?d.memoizedState:null;if(d===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((h.flags&128)!==0){if(A=A!==null?A.baseLanes|g:g,d!==null){for(w=h.child=d.child,N=0;w!==null;)N=N|w.lanes|w.childLanes,w=w.sibling;w=N&~A}else w=0,h.child=null;return h4(d,h,A,g,w)}if((g&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},d!==null&&Hx(h,A!==null?A.cachePool:null),A!==null?m3(h,A):MN(),g3(h);else return w=h.lanes=536870912,h4(d,h,A!==null?A.baseLanes|g:g,g,w)}else A!==null?(Hx(h,A.cachePool),m3(h,A),Qc(),h.memoizedState=null):(d!==null&&Hx(h,null),MN(),Qc());return Rs(d,h,N,g),h.child}function $g(d,h){return d!==null&&d.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function h4(d,h,g,w,N){var A=ON();return A=A===null?null:{parent:$r._currentValue,pool:A},h.memoizedState={baseLanes:g,cachePool:A},d!==null&&Hx(h,null),MN(),g3(h),d!==null&&dh(d,h,w,!0),h.childLanes=N,null}function cv(d,h){return h=dv({mode:h.mode,children:h.children},d.mode),h.ref=d.ref,d.child=h,h.return=d,h}function p4(d,h,g){return wd(h,d.child,null,g),d=cv(h,h.pendingProps),d.flags|=2,si(h),h.memoizedState=null,d}function wee(d,h,g){var w=h.pendingProps,N=(h.flags&128)!==0;if(h.flags&=-129,d===null){if(Jt){if(w.mode==="hidden")return d=cv(h,w),h.lanes=536870912,$g(null,d);if(BN(h),(d=Fn)?(d=Tz(d,Oi),d=d!==null&&d.data==="&"?d:null,d!==null&&(h.memoizedState={dehydrated:d,treeContext:Wc!==null?{id:Vo,overflow:qo}:null,retryLane:536870912,hydrationErrors:null},g=Q5(d),g.return=h,h.child=g,js=h,Fn=null)):d=null,d===null)throw qc(h);return h.lanes=536870912,null}return cv(h,w)}var A=d.memoizedState;if(A!==null){var M=A.dehydrated;if(BN(h),N)if(h.flags&256)h.flags&=-257,h=p4(d,h,g);else if(h.memoizedState!==null)h.child=d.child,h.flags|=128,h=null;else throw Error(r(558));else if(Or||dh(d,h,g,!1),N=(g&d.childLanes)!==0,Or||N){if(w=Rn,w!==null&&(M=Es(w,g),M!==0&&M!==A.retryLane))throw A.retryLane=M,hd(d,M),_a(w,d,M),lT;vv(),h=p4(d,h,g)}else d=A.treeContext,Fn=Di(M.nextSibling),js=h,Jt=!0,Vc=null,Oi=!1,d!==null&&e3(h,d),h=cv(h,w),h.flags|=4096;return h}return d=Ol(d.child,{mode:w.mode,children:w.children}),d.ref=h.ref,h.child=d,d.return=h,d}function uv(d,h){var g=h.ref;if(g===null)d!==null&&d.ref!==null&&(h.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(d===null||d.ref!==g)&&(h.flags|=4194816)}}function cT(d,h,g,w,N){return yd(h),g=WN(d,h,g,w,void 0,N),w=VN(),d!==null&&!Or?(qN(d,h,N),Ml(d,h,N)):(Jt&&w&&kN(h),h.flags|=1,Rs(d,h,g,N),h.child)}function m4(d,h,g,w,N,A){return yd(h),h.updateQueue=null,g=b3(h,w,g,N),y3(d),w=VN(),d!==null&&!Or?(qN(d,h,A),Ml(d,h,A)):(Jt&&w&&kN(h),h.flags|=1,Rs(d,h,g,A),h.child)}function g4(d,h,g,w,N){if(yd(h),h.stateNode===null){var A=oh,M=g.contextType;typeof M=="object"&&M!==null&&(A=$s(M)),A=new g(w,A),h.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=iT,h.stateNode=A,A._reactInternals=h,A=h.stateNode,A.props=w,A.state=h.memoizedState,A.refs={},DN(h),M=g.contextType,A.context=typeof M=="object"&&M!==null?$s(M):oh,A.state=h.memoizedState,M=g.getDerivedStateFromProps,typeof M=="function"&&(aT(h,g,M,w),A.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(M=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),M!==A.state&&iT.enqueueReplaceState(A,A.state,null),Tg(h,w,A,N),Ng(),A.state=h.memoizedState),typeof A.componentDidMount=="function"&&(h.flags|=4194308),w=!0}else if(d===null){A=h.stateNode;var H=h.memoizedProps,re=Cd(g,H);A.props=re;var Se=A.context,Re=g.contextType;M=oh,typeof Re=="object"&&Re!==null&&(M=$s(Re));var Le=g.getDerivedStateFromProps;Re=typeof Le=="function"||typeof A.getSnapshotBeforeUpdate=="function",H=h.pendingProps!==H,Re||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(H||Se!==M)&&n4(h,A,w,M),Hc=!1;var ke=h.memoizedState;A.state=ke,Tg(h,w,A,N),Ng(),Se=h.memoizedState,H||ke!==Se||Hc?(typeof Le=="function"&&(aT(h,g,Le,w),Se=h.memoizedState),(re=Hc||t4(h,g,re,w,ke,Se,M))?(Re||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(h.flags|=4194308)):(typeof A.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=w,h.memoizedState=Se),A.props=w,A.state=Se,A.context=M,w=re):(typeof A.componentDidMount=="function"&&(h.flags|=4194308),w=!1)}else{A=h.stateNode,zN(d,h),M=h.memoizedProps,Re=Cd(g,M),A.props=Re,Le=h.pendingProps,ke=A.context,Se=g.contextType,re=oh,typeof Se=="object"&&Se!==null&&(re=$s(Se)),H=g.getDerivedStateFromProps,(Se=typeof H=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(M!==Le||ke!==re)&&n4(h,A,w,re),Hc=!1,ke=h.memoizedState,A.state=ke,Tg(h,w,A,N),Ng();var Ie=h.memoizedState;M!==Le||ke!==Ie||Hc||d!==null&&d.dependencies!==null&&qx(d.dependencies)?(typeof H=="function"&&(aT(h,g,H,w),Ie=h.memoizedState),(Re=Hc||t4(h,g,Re,w,ke,Ie,re)||d!==null&&d.dependencies!==null&&qx(d.dependencies))?(Se||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(w,Ie,re),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(w,Ie,re)),typeof A.componentDidUpdate=="function"&&(h.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof A.componentDidUpdate!="function"||M===d.memoizedProps&&ke===d.memoizedState||(h.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||M===d.memoizedProps&&ke===d.memoizedState||(h.flags|=1024),h.memoizedProps=w,h.memoizedState=Ie),A.props=w,A.state=Ie,A.context=re,w=Re):(typeof A.componentDidUpdate!="function"||M===d.memoizedProps&&ke===d.memoizedState||(h.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||M===d.memoizedProps&&ke===d.memoizedState||(h.flags|=1024),w=!1)}return A=w,uv(d,h),w=(h.flags&128)!==0,A||w?(A=h.stateNode,g=w&&typeof g.getDerivedStateFromError!="function"?null:A.render(),h.flags|=1,d!==null&&w?(h.child=wd(h,d.child,null,N),h.child=wd(h,null,g,N)):Rs(d,h,g,N),h.memoizedState=A.state,d=h.child):d=Ml(d,h,N),d}function y4(d,h,g,w){return md(),h.flags|=256,Rs(d,h,g,w),h.child}var uT={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dT(d){return{baseLanes:d,cachePool:i3()}}function fT(d,h,g){return d=d!==null?d.childLanes&~g:0,h&&(d|=ii),d}function b4(d,h,g){var w=h.pendingProps,N=!1,A=(h.flags&128)!==0,M;if((M=A)||(M=d!==null&&d.memoizedState===null?!1:(Cr.current&2)!==0),M&&(N=!0,h.flags&=-129),M=(h.flags&32)!==0,h.flags&=-33,d===null){if(Jt){if(N?Yc(h):Qc(),(d=Fn)?(d=Tz(d,Oi),d=d!==null&&d.data!=="&"?d:null,d!==null&&(h.memoizedState={dehydrated:d,treeContext:Wc!==null?{id:Vo,overflow:qo}:null,retryLane:536870912,hydrationErrors:null},g=Q5(d),g.return=h,h.child=g,js=h,Fn=null)):d=null,d===null)throw qc(h);return KT(d)?h.lanes=32:h.lanes=536870912,null}var H=w.children;return w=w.fallback,N?(Qc(),N=h.mode,H=dv({mode:"hidden",children:H},N),w=pd(w,N,g,null),H.return=h,w.return=h,H.sibling=w,h.child=H,w=h.child,w.memoizedState=dT(g),w.childLanes=fT(d,M,g),h.memoizedState=uT,$g(null,w)):(Yc(h),hT(h,H))}var re=d.memoizedState;if(re!==null&&(H=re.dehydrated,H!==null)){if(A)h.flags&256?(Yc(h),h.flags&=-257,h=pT(d,h,g)):h.memoizedState!==null?(Qc(),h.child=d.child,h.flags|=128,h=null):(Qc(),H=w.fallback,N=h.mode,w=dv({mode:"visible",children:w.children},N),H=pd(H,N,g,null),H.flags|=2,w.return=h,H.return=h,w.sibling=H,h.child=w,wd(h,d.child,null,g),w=h.child,w.memoizedState=dT(g),w.childLanes=fT(d,M,g),h.memoizedState=uT,h=$g(null,w));else if(Yc(h),KT(H)){if(M=H.nextSibling&&H.nextSibling.dataset,M)var Se=M.dgst;M=Se,w=Error(r(419)),w.stack="",w.digest=M,xg({value:w,source:null,stack:null}),h=pT(d,h,g)}else if(Or||dh(d,h,g,!1),M=(g&d.childLanes)!==0,Or||M){if(M=Rn,M!==null&&(w=Es(M,g),w!==0&&w!==re.retryLane))throw re.retryLane=w,hd(d,w),_a(M,d,w),lT;HT(H)||vv(),h=pT(d,h,g)}else HT(H)?(h.flags|=192,h.child=d.child,h=null):(d=re.treeContext,Fn=Di(H.nextSibling),js=h,Jt=!0,Vc=null,Oi=!1,d!==null&&e3(h,d),h=hT(h,w.children),h.flags|=4096);return h}return N?(Qc(),H=w.fallback,N=h.mode,re=d.child,Se=re.sibling,w=Ol(re,{mode:"hidden",children:w.children}),w.subtreeFlags=re.subtreeFlags&65011712,Se!==null?H=Ol(Se,H):(H=pd(H,N,g,null),H.flags|=2),H.return=h,w.return=h,w.sibling=H,h.child=w,$g(null,w),w=h.child,H=d.child.memoizedState,H===null?H=dT(g):(N=H.cachePool,N!==null?(re=$r._currentValue,N=N.parent!==re?{parent:re,pool:re}:N):N=i3(),H={baseLanes:H.baseLanes|g,cachePool:N}),w.memoizedState=H,w.childLanes=fT(d,M,g),h.memoizedState=uT,$g(d.child,w)):(Yc(h),g=d.child,d=g.sibling,g=Ol(g,{mode:"visible",children:w.children}),g.return=h,g.sibling=null,d!==null&&(M=h.deletions,M===null?(h.deletions=[d],h.flags|=16):M.push(d)),h.child=g,h.memoizedState=null,g)}function hT(d,h){return h=dv({mode:"visible",children:h},d.mode),h.return=d,d.child=h}function dv(d,h){return d=ni(22,d,null,h),d.lanes=0,d}function pT(d,h,g){return wd(h,d.child,null,g),d=hT(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function x4(d,h,g){d.lanes|=h;var w=d.alternate;w!==null&&(w.lanes|=h),AN(d.return,h,g)}function mT(d,h,g,w,N,A){var M=d.memoizedState;M===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:N,treeForkCount:A}:(M.isBackwards=h,M.rendering=null,M.renderingStartTime=0,M.last=w,M.tail=g,M.tailMode=N,M.treeForkCount=A)}function v4(d,h,g){var w=h.pendingProps,N=w.revealOrder,A=w.tail;w=w.children;var M=Cr.current,H=(M&2)!==0;if(H?(M=M&1|2,h.flags|=128):M&=1,se(Cr,M),Rs(d,h,w,g),w=Jt?bg:0,!H&&d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&x4(d,g,h);else if(d.tag===19)x4(d,g,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(N){case"forwards":for(g=h.child,N=null;g!==null;)d=g.alternate,d!==null&&Jx(d)===null&&(N=g),g=g.sibling;g=N,g===null?(N=h.child,h.child=null):(N=g.sibling,g.sibling=null),mT(h,!1,N,g,A,w);break;case"backwards":case"unstable_legacy-backwards":for(g=null,N=h.child,h.child=null;N!==null;){if(d=N.alternate,d!==null&&Jx(d)===null){h.child=N;break}d=N.sibling,N.sibling=g,g=N,N=d}mT(h,!0,g,null,A,w);break;case"together":mT(h,!1,null,null,void 0,w);break;default:h.memoizedState=null}return h.child}function Ml(d,h,g){if(d!==null&&(h.dependencies=d.dependencies),eu|=h.lanes,(g&h.childLanes)===0)if(d!==null){if(dh(d,h,g,!1),(g&h.childLanes)===0)return null}else return null;if(d!==null&&h.child!==d.child)throw Error(r(153));if(h.child!==null){for(d=h.child,g=Ol(d,d.pendingProps),h.child=g,g.return=h;d.sibling!==null;)d=d.sibling,g=g.sibling=Ol(d,d.pendingProps),g.return=h;g.sibling=null}return h.child}function gT(d,h){return(d.lanes&h)!==0?!0:(d=d.dependencies,!!(d!==null&&qx(d)))}function See(d,h,g){switch(h.tag){case 3:He(h,h.stateNode.containerInfo),Gc(h,$r,d.memoizedState.cache),md();break;case 27:case 5:Te(h);break;case 4:He(h,h.stateNode.containerInfo);break;case 10:Gc(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,BN(h),null;break;case 13:var w=h.memoizedState;if(w!==null)return w.dehydrated!==null?(Yc(h),h.flags|=128,null):(g&h.child.childLanes)!==0?b4(d,h,g):(Yc(h),d=Ml(d,h,g),d!==null?d.sibling:null);Yc(h);break;case 19:var N=(d.flags&128)!==0;if(w=(g&h.childLanes)!==0,w||(dh(d,h,g,!1),w=(g&h.childLanes)!==0),N){if(w)return v4(d,h,g);h.flags|=128}if(N=h.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),se(Cr,Cr.current),w)break;return null;case 22:return h.lanes=0,f4(d,h,g,h.pendingProps);case 24:Gc(h,$r,d.memoizedState.cache)}return Ml(d,h,g)}function w4(d,h,g){if(d!==null)if(d.memoizedProps!==h.pendingProps)Or=!0;else{if(!gT(d,g)&&(h.flags&128)===0)return Or=!1,See(d,h,g);Or=(d.flags&131072)!==0}else Or=!1,Jt&&(h.flags&1048576)!==0&&J5(h,bg,h.index);switch(h.lanes=0,h.tag){case 16:e:{var w=h.pendingProps;if(d=xd(h.elementType),h.type=d,typeof d=="function")wN(d)?(w=Cd(d,w),h.tag=1,h=g4(null,h,d,w,g)):(h.tag=0,h=cT(null,h,d,w,g));else{if(d!=null){var N=d.$$typeof;if(N===k){h.tag=11,h=c4(null,h,d,w,g);break e}else if(N===_){h.tag=14,h=u4(null,h,d,w,g);break e}}throw h=V(d)||d,Error(r(306,h,""))}}return h;case 0:return cT(d,h,h.type,h.pendingProps,g);case 1:return w=h.type,N=Cd(w,h.pendingProps),g4(d,h,w,N,g);case 3:e:{if(He(h,h.stateNode.containerInfo),d===null)throw Error(r(387));w=h.pendingProps;var A=h.memoizedState;N=A.element,zN(d,h),Tg(h,w,null,g);var M=h.memoizedState;if(w=M.cache,Gc(h,$r,w),w!==A.cache&&jN(h,[$r],g,!0),Ng(),w=M.element,A.isDehydrated)if(A={element:w,isDehydrated:!1,cache:M.cache},h.updateQueue.baseState=A,h.memoizedState=A,h.flags&256){h=y4(d,h,w,g);break e}else if(w!==N){N=ji(Error(r(424)),h),xg(N),h=y4(d,h,w,g);break e}else for(d=h.stateNode.containerInfo,d.nodeType===9?d=d.body:d=d.nodeName==="HTML"?d.ownerDocument.body:d,Fn=Di(d.firstChild),js=h,Jt=!0,Vc=null,Oi=!0,g=f3(h,null,w,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(md(),w===N){h=Ml(d,h,g);break e}Rs(d,h,w,g)}h=h.child}return h;case 26:return uv(d,h),d===null?(g=Rz(h.type,null,h.pendingProps,null))?h.memoizedState=g:Jt||(g=h.type,d=h.pendingProps,w=Ev(_e.current).createElement(g),w[sn]=h,w[Is]=d,Os(w,g,d),Sr(w),h.stateNode=w):h.memoizedState=Rz(h.type,d.memoizedProps,h.pendingProps,d.memoizedState),null;case 27:return Te(h),d===null&&Jt&&(w=h.stateNode=Az(h.type,h.pendingProps,_e.current),js=h,Oi=!0,N=Fn,au(h.type)?(XT=N,Fn=Di(w.firstChild)):Fn=N),Rs(d,h,h.pendingProps.children,g),uv(d,h),d===null&&(h.flags|=4194304),h.child;case 5:return d===null&&Jt&&((N=w=Fn)&&(w=Zee(w,h.type,h.pendingProps,Oi),w!==null?(h.stateNode=w,js=h,Fn=Di(w.firstChild),Oi=!1,N=!0):N=!1),N||qc(h)),Te(h),N=h.type,A=h.pendingProps,M=d!==null?d.memoizedProps:null,w=A.children,VT(N,A)?w=null:M!==null&&VT(N,M)&&(h.flags|=32),h.memoizedState!==null&&(N=WN(d,h,hee,null,null,g),Gg._currentValue=N),uv(d,h),Rs(d,h,w,g),h.child;case 6:return d===null&&Jt&&((d=g=Fn)&&(g=Jee(g,h.pendingProps,Oi),g!==null?(h.stateNode=g,js=h,Fn=null,d=!0):d=!1),d||qc(h)),null;case 13:return b4(d,h,g);case 4:return He(h,h.stateNode.containerInfo),w=h.pendingProps,d===null?h.child=wd(h,null,w,g):Rs(d,h,w,g),h.child;case 11:return c4(d,h,h.type,h.pendingProps,g);case 7:return Rs(d,h,h.pendingProps,g),h.child;case 8:return Rs(d,h,h.pendingProps.children,g),h.child;case 12:return Rs(d,h,h.pendingProps.children,g),h.child;case 10:return w=h.pendingProps,Gc(h,h.type,w.value),Rs(d,h,w.children,g),h.child;case 9:return N=h.type._context,w=h.pendingProps.children,yd(h),N=$s(N),w=w(N),h.flags|=1,Rs(d,h,w,g),h.child;case 14:return u4(d,h,h.type,h.pendingProps,g);case 15:return d4(d,h,h.type,h.pendingProps,g);case 19:return v4(d,h,g);case 31:return wee(d,h,g);case 22:return f4(d,h,g,h.pendingProps);case 24:return yd(h),w=$s($r),d===null?(N=ON(),N===null&&(N=Rn,A=$N(),N.pooledCache=A,A.refCount++,A!==null&&(N.pooledCacheLanes|=g),N=A),h.memoizedState={parent:w,cache:N},DN(h),Gc(h,$r,N)):((d.lanes&g)!==0&&(zN(d,h),Tg(h,null,null,g),Ng()),N=d.memoizedState,A=h.memoizedState,N.parent!==w?(N={parent:w,cache:w},h.memoizedState=N,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=N),Gc(h,$r,w)):(w=A.cache,Gc(h,$r,w),w!==N.cache&&jN(h,[$r],g,!0))),Rs(d,h,h.pendingProps.children,g),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function Fl(d){d.flags|=4}function yT(d,h,g,w,N){if((h=(d.mode&32)!==0)&&(h=!1),h){if(d.flags|=16777216,(N&335544128)===N)if(d.stateNode.complete)d.flags|=8192;else if(K4())d.flags|=8192;else throw vd=Xx,_N}else d.flags&=-16777217}function S4(d,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!Pz(h))if(K4())d.flags|=8192;else throw vd=Xx,_N}function fv(d,h){h!==null&&(d.flags|=4),d.flags&16384&&(h=d.tag!==22?qr():536870912,d.lanes|=h,Ch|=h)}function Rg(d,h){if(!Jt)switch(d.tailMode){case"hidden":h=d.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?d.tail=null:g.sibling=null;break;case"collapsed":g=d.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:w.sibling=null}}function Bn(d){var h=d.alternate!==null&&d.alternate.child===d.child,g=0,w=0;if(h)for(var N=d.child;N!==null;)g|=N.lanes|N.childLanes,w|=N.subtreeFlags&65011712,w|=N.flags&65011712,N.return=d,N=N.sibling;else for(N=d.child;N!==null;)g|=N.lanes|N.childLanes,w|=N.subtreeFlags,w|=N.flags,N.return=d,N=N.sibling;return d.subtreeFlags|=w,d.childLanes=g,h}function Cee(d,h,g){var w=h.pendingProps;switch(NN(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(h),null;case 1:return Bn(h),null;case 3:return g=h.stateNode,w=null,d!==null&&(w=d.memoizedState.cache),h.memoizedState.cache!==w&&(h.flags|=2048),zl($r),he(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(d===null||d.child===null)&&(uh(h)?Fl(h):d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,EN())),Bn(h),null;case 26:var N=h.type,A=h.memoizedState;return d===null?(Fl(h),A!==null?(Bn(h),S4(h,A)):(Bn(h),yT(h,N,null,w,g))):A?A!==d.memoizedState?(Fl(h),Bn(h),S4(h,A)):(Bn(h),h.flags&=-16777217):(d=d.memoizedProps,d!==w&&Fl(h),Bn(h),yT(h,N,d,w,g)),null;case 27:if(Me(h),g=_e.current,N=h.type,d!==null&&h.stateNode!=null)d.memoizedProps!==w&&Fl(h);else{if(!w){if(h.stateNode===null)throw Error(r(166));return Bn(h),null}d=fe.current,uh(h)?t3(h):(d=Az(N,w,g),h.stateNode=d,Fl(h))}return Bn(h),null;case 5:if(Me(h),N=h.type,d!==null&&h.stateNode!=null)d.memoizedProps!==w&&Fl(h);else{if(!w){if(h.stateNode===null)throw Error(r(166));return Bn(h),null}if(A=fe.current,uh(h))t3(h);else{var M=Ev(_e.current);switch(A){case 1:A=M.createElementNS("http://www.w3.org/2000/svg",N);break;case 2:A=M.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;default:switch(N){case"svg":A=M.createElementNS("http://www.w3.org/2000/svg",N);break;case"math":A=M.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;case"script":A=M.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof w.is=="string"?M.createElement("select",{is:w.is}):M.createElement("select"),w.multiple?A.multiple=!0:w.size&&(A.size=w.size);break;default:A=typeof w.is=="string"?M.createElement(N,{is:w.is}):M.createElement(N)}}A[sn]=h,A[Is]=w;e:for(M=h.child;M!==null;){if(M.tag===5||M.tag===6)A.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===h)break e;for(;M.sibling===null;){if(M.return===null||M.return===h)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}h.stateNode=A;e:switch(Os(A,N,w),N){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Fl(h)}}return Bn(h),yT(h,h.type,d===null?null:d.memoizedProps,h.pendingProps,g),null;case 6:if(d&&h.stateNode!=null)d.memoizedProps!==w&&Fl(h);else{if(typeof w!="string"&&h.stateNode===null)throw Error(r(166));if(d=_e.current,uh(h)){if(d=h.stateNode,g=h.memoizedProps,w=null,N=js,N!==null)switch(N.tag){case 27:case 5:w=N.memoizedProps}d[sn]=h,d=!!(d.nodeValue===g||w!==null&&w.suppressHydrationWarning===!0||bz(d.nodeValue,g)),d||qc(h,!0)}else d=Ev(d).createTextNode(w),d[sn]=h,h.stateNode=d}return Bn(h),null;case 31:if(g=h.memoizedState,d===null||d.memoizedState!==null){if(w=uh(h),g!==null){if(d===null){if(!w)throw Error(r(318));if(d=h.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(557));d[sn]=h}else md(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Bn(h),d=!1}else g=EN(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=g),d=!0;if(!d)return h.flags&256?(si(h),h):(si(h),null);if((h.flags&128)!==0)throw Error(r(558))}return Bn(h),null;case 13:if(w=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(N=uh(h),w!==null&&w.dehydrated!==null){if(d===null){if(!N)throw Error(r(318));if(N=h.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[sn]=h}else md(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Bn(h),N=!1}else N=EN(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=N),N=!0;if(!N)return h.flags&256?(si(h),h):(si(h),null)}return si(h),(h.flags&128)!==0?(h.lanes=g,h):(g=w!==null,d=d!==null&&d.memoizedState!==null,g&&(w=h.child,N=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(N=w.alternate.memoizedState.cachePool.pool),A=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(A=w.memoizedState.cachePool.pool),A!==N&&(w.flags|=2048)),g!==d&&g&&(h.child.flags|=8192),fv(h,h.updateQueue),Bn(h),null);case 4:return he(),d===null&&MT(h.stateNode.containerInfo),Bn(h),null;case 10:return zl(h.type),Bn(h),null;case 19:if(Q(Cr),w=h.memoizedState,w===null)return Bn(h),null;if(N=(h.flags&128)!==0,A=w.rendering,A===null)if(N)Rg(w,!1);else{if(dr!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(A=Jx(d),A!==null){for(h.flags|=128,Rg(w,!1),d=A.updateQueue,h.updateQueue=d,fv(h,d),h.subtreeFlags=0,d=g,g=h.child;g!==null;)Y5(g,d),g=g.sibling;return se(Cr,Cr.current&1|2),Jt&&_l(h,w.treeForkCount),h.child}d=d.sibling}w.tail!==null&&Zt()>yv&&(h.flags|=128,N=!0,Rg(w,!1),h.lanes=4194304)}else{if(!N)if(d=Jx(A),d!==null){if(h.flags|=128,N=!0,d=d.updateQueue,h.updateQueue=d,fv(h,d),Rg(w,!0),w.tail===null&&w.tailMode==="hidden"&&!A.alternate&&!Jt)return Bn(h),null}else 2*Zt()-w.renderingStartTime>yv&&g!==536870912&&(h.flags|=128,N=!0,Rg(w,!1),h.lanes=4194304);w.isBackwards?(A.sibling=h.child,h.child=A):(d=w.last,d!==null?d.sibling=A:h.child=A,w.last=A)}return w.tail!==null?(d=w.tail,w.rendering=d,w.tail=d.sibling,w.renderingStartTime=Zt(),d.sibling=null,g=Cr.current,se(Cr,N?g&1|2:g&1),Jt&&_l(h,w.treeForkCount),d):(Bn(h),null);case 22:case 23:return si(h),FN(),w=h.memoizedState!==null,d!==null?d.memoizedState!==null!==w&&(h.flags|=8192):w&&(h.flags|=8192),w?(g&536870912)!==0&&(h.flags&128)===0&&(Bn(h),h.subtreeFlags&6&&(h.flags|=8192)):Bn(h),g=h.updateQueue,g!==null&&fv(h,g.retryQueue),g=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==g&&(h.flags|=2048),d!==null&&Q(bd),null;case 24:return g=null,d!==null&&(g=d.memoizedState.cache),h.memoizedState.cache!==g&&(h.flags|=2048),zl($r),Bn(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function kee(d,h){switch(NN(h),h.tag){case 1:return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return zl($r),he(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 26:case 27:case 5:return Me(h),null;case 31:if(h.memoizedState!==null){if(si(h),h.alternate===null)throw Error(r(340));md()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 13:if(si(h),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(r(340));md()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return Q(Cr),null;case 4:return he(),null;case 10:return zl(h.type),null;case 22:case 23:return si(h),FN(),d!==null&&Q(bd),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 24:return zl($r),null;case 25:return null;default:return null}}function C4(d,h){switch(NN(h),h.tag){case 3:zl($r),he();break;case 26:case 27:case 5:Me(h);break;case 4:he();break;case 31:h.memoizedState!==null&&si(h);break;case 13:si(h);break;case 19:Q(Cr);break;case 10:zl(h.type);break;case 22:case 23:si(h),FN(),d!==null&&Q(bd);break;case 24:zl($r)}}function Og(d,h){try{var g=h.updateQueue,w=g!==null?g.lastEffect:null;if(w!==null){var N=w.next;g=N;do{if((g.tag&d)===d){w=void 0;var A=g.create,M=g.inst;w=A(),M.destroy=w}g=g.next}while(g!==N)}}catch(H){xn(h,h.return,H)}}function Zc(d,h,g){try{var w=h.updateQueue,N=w!==null?w.lastEffect:null;if(N!==null){var A=N.next;w=A;do{if((w.tag&d)===d){var M=w.inst,H=M.destroy;if(H!==void 0){M.destroy=void 0,N=h;var re=g,Se=H;try{Se()}catch(Re){xn(N,re,Re)}}}w=w.next}while(w!==A)}}catch(Re){xn(h,h.return,Re)}}function k4(d){var h=d.updateQueue;if(h!==null){var g=d.stateNode;try{p3(h,g)}catch(w){xn(d,d.return,w)}}}function N4(d,h,g){g.props=Cd(d.type,d.memoizedProps),g.state=d.memoizedState;try{g.componentWillUnmount()}catch(w){xn(d,h,w)}}function _g(d,h){try{var g=d.ref;if(g!==null){switch(d.tag){case 26:case 27:case 5:var w=d.stateNode;break;case 30:w=d.stateNode;break;default:w=d.stateNode}typeof g=="function"?d.refCleanup=g(w):g.current=w}}catch(N){xn(d,h,N)}}function Go(d,h){var g=d.ref,w=d.refCleanup;if(g!==null)if(typeof w=="function")try{w()}catch(N){xn(d,h,N)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(N){xn(d,h,N)}else g.current=null}function T4(d){var h=d.type,g=d.memoizedProps,w=d.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":g.autoFocus&&w.focus();break e;case"img":g.src?w.src=g.src:g.srcSet&&(w.srcset=g.srcSet)}}catch(N){xn(d,d.return,N)}}function bT(d,h,g){try{var w=d.stateNode;Gee(w,d.type,g,h),w[Is]=h}catch(N){xn(d,d.return,N)}}function E4(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&au(d.type)||d.tag===4}function xT(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||E4(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&au(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function vT(d,h,g){var w=d.tag;if(w===5||w===6)d=d.stateNode,h?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(d,h):(h=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,h.appendChild(d),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=ca));else if(w!==4&&(w===27&&au(d.type)&&(g=d.stateNode,h=null),d=d.child,d!==null))for(vT(d,h,g),d=d.sibling;d!==null;)vT(d,h,g),d=d.sibling}function hv(d,h,g){var w=d.tag;if(w===5||w===6)d=d.stateNode,h?g.insertBefore(d,h):g.appendChild(d);else if(w!==4&&(w===27&&au(d.type)&&(g=d.stateNode),d=d.child,d!==null))for(hv(d,h,g),d=d.sibling;d!==null;)hv(d,h,g),d=d.sibling}function I4(d){var h=d.stateNode,g=d.memoizedProps;try{for(var w=d.type,N=h.attributes;N.length;)h.removeAttributeNode(N[0]);Os(h,w,g),h[sn]=d,h[Is]=g}catch(A){xn(d,d.return,A)}}var Bl=!1,_r=!1,wT=!1,A4=typeof WeakSet=="function"?WeakSet:Set,cs=null;function Nee(d,h){if(d=d.containerInfo,UT=_v,d=B5(d),pN(d)){if("selectionStart"in d)var g={start:d.selectionStart,end:d.selectionEnd};else e:{g=(g=d.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var N=w.anchorOffset,A=w.focusNode;w=w.focusOffset;try{g.nodeType,A.nodeType}catch{g=null;break e}var M=0,H=-1,re=-1,Se=0,Re=0,Le=d,ke=null;t:for(;;){for(var Ie;Le!==g||N!==0&&Le.nodeType!==3||(H=M+N),Le!==A||w!==0&&Le.nodeType!==3||(re=M+w),Le.nodeType===3&&(M+=Le.nodeValue.length),(Ie=Le.firstChild)!==null;)ke=Le,Le=Ie;for(;;){if(Le===d)break t;if(ke===g&&++Se===N&&(H=M),ke===A&&++Re===w&&(re=M),(Ie=Le.nextSibling)!==null)break;Le=ke,ke=Le.parentNode}Le=Ie}g=H===-1||re===-1?null:{start:H,end:re}}else g=null}g=g||{start:0,end:0}}else g=null;for(WT={focusedElem:d,selectionRange:g},_v=!1,cs=h;cs!==null;)if(h=cs,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,cs=d;else for(;cs!==null;){switch(h=cs,A=h.alternate,d=h.flags,h.tag){case 0:if((d&4)!==0&&(d=h.updateQueue,d=d!==null?d.events:null,d!==null))for(g=0;g<d.length;g++)N=d[g],N.ref.impl=N.nextImpl;break;case 11:case 15:break;case 1:if((d&1024)!==0&&A!==null){d=void 0,g=h,N=A.memoizedProps,A=A.memoizedState,w=g.stateNode;try{var st=Cd(g.type,N);d=w.getSnapshotBeforeUpdate(st,A),w.__reactInternalSnapshotBeforeUpdate=d}catch(wt){xn(g,g.return,wt)}}break;case 3:if((d&1024)!==0){if(d=h.stateNode.containerInfo,g=d.nodeType,g===9)GT(d);else if(g===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":GT(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=h.sibling,d!==null){d.return=h.return,cs=d;break}cs=h.return}}function j4(d,h,g){var w=g.flags;switch(g.tag){case 0:case 11:case 15:Wl(d,g),w&4&&Og(5,g);break;case 1:if(Wl(d,g),w&4)if(d=g.stateNode,h===null)try{d.componentDidMount()}catch(M){xn(g,g.return,M)}else{var N=Cd(g.type,h.memoizedProps);h=h.memoizedState;try{d.componentDidUpdate(N,h,d.__reactInternalSnapshotBeforeUpdate)}catch(M){xn(g,g.return,M)}}w&64&&k4(g),w&512&&_g(g,g.return);break;case 3:if(Wl(d,g),w&64&&(d=g.updateQueue,d!==null)){if(h=null,g.child!==null)switch(g.child.tag){case 27:case 5:h=g.child.stateNode;break;case 1:h=g.child.stateNode}try{p3(d,h)}catch(M){xn(g,g.return,M)}}break;case 27:h===null&&w&4&&I4(g);case 26:case 5:Wl(d,g),h===null&&w&4&&T4(g),w&512&&_g(g,g.return);break;case 12:Wl(d,g);break;case 31:Wl(d,g),w&4&&O4(d,g);break;case 13:Wl(d,g),w&4&&_4(d,g),w&64&&(d=g.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(g=_ee.bind(null,g),ete(d,g))));break;case 22:if(w=g.memoizedState!==null||Bl,!w){h=h!==null&&h.memoizedState!==null||_r,N=Bl;var A=_r;Bl=w,(_r=h)&&!A?Vl(d,g,(g.subtreeFlags&8772)!==0):Wl(d,g),Bl=N,_r=A}break;case 30:break;default:Wl(d,g)}}function $4(d){var h=d.alternate;h!==null&&(d.alternate=null,$4(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&rg(h)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Gn=null,ja=!1;function Ul(d,h,g){for(g=g.child;g!==null;)R4(d,h,g),g=g.sibling}function R4(d,h,g){if(we&&typeof we.onCommitFiberUnmount=="function")try{we.onCommitFiberUnmount(Ze,g)}catch{}switch(g.tag){case 26:_r||Go(g,h),Ul(d,h,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:_r||Go(g,h);var w=Gn,N=ja;au(g.type)&&(Gn=g.stateNode,ja=!1),Ul(d,h,g),Wg(g.stateNode),Gn=w,ja=N;break;case 5:_r||Go(g,h);case 6:if(w=Gn,N=ja,Gn=null,Ul(d,h,g),Gn=w,ja=N,Gn!==null)if(ja)try{(Gn.nodeType===9?Gn.body:Gn.nodeName==="HTML"?Gn.ownerDocument.body:Gn).removeChild(g.stateNode)}catch(A){xn(g,h,A)}else try{Gn.removeChild(g.stateNode)}catch(A){xn(g,h,A)}break;case 18:Gn!==null&&(ja?(d=Gn,kz(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,g.stateNode),$h(d)):kz(Gn,g.stateNode));break;case 4:w=Gn,N=ja,Gn=g.stateNode.containerInfo,ja=!0,Ul(d,h,g),Gn=w,ja=N;break;case 0:case 11:case 14:case 15:Zc(2,g,h),_r||Zc(4,g,h),Ul(d,h,g);break;case 1:_r||(Go(g,h),w=g.stateNode,typeof w.componentWillUnmount=="function"&&N4(g,h,w)),Ul(d,h,g);break;case 21:Ul(d,h,g);break;case 22:_r=(w=_r)||g.memoizedState!==null,Ul(d,h,g),_r=w;break;default:Ul(d,h,g)}}function O4(d,h){if(h.memoizedState===null&&(d=h.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{$h(d)}catch(g){xn(h,h.return,g)}}}function _4(d,h){if(h.memoizedState===null&&(d=h.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{$h(d)}catch(g){xn(h,h.return,g)}}function Tee(d){switch(d.tag){case 31:case 13:case 19:var h=d.stateNode;return h===null&&(h=d.stateNode=new A4),h;case 22:return d=d.stateNode,h=d._retryCache,h===null&&(h=d._retryCache=new A4),h;default:throw Error(r(435,d.tag))}}function pv(d,h){var g=Tee(d);h.forEach(function(w){if(!g.has(w)){g.add(w);var N=Dee.bind(null,d,w);w.then(N,N)}})}function $a(d,h){var g=h.deletions;if(g!==null)for(var w=0;w<g.length;w++){var N=g[w],A=d,M=h,H=M;e:for(;H!==null;){switch(H.tag){case 27:if(au(H.type)){Gn=H.stateNode,ja=!1;break e}break;case 5:Gn=H.stateNode,ja=!1;break e;case 3:case 4:Gn=H.stateNode.containerInfo,ja=!0;break e}H=H.return}if(Gn===null)throw Error(r(160));R4(A,M,N),Gn=null,ja=!1,A=N.alternate,A!==null&&(A.return=null),N.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)D4(h,d),h=h.sibling}var oo=null;function D4(d,h){var g=d.alternate,w=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:$a(h,d),Ra(d),w&4&&(Zc(3,d,d.return),Og(3,d),Zc(5,d,d.return));break;case 1:$a(h,d),Ra(d),w&512&&(_r||g===null||Go(g,g.return)),w&64&&Bl&&(d=d.updateQueue,d!==null&&(w=d.callbacks,w!==null&&(g=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=g===null?w:g.concat(w))));break;case 26:var N=oo;if($a(h,d),Ra(d),w&512&&(_r||g===null||Go(g,g.return)),w&4){var A=g!==null?g.memoizedState:null;if(w=d.memoizedState,g===null)if(w===null)if(d.stateNode===null){e:{w=d.type,g=d.memoizedProps,N=N.ownerDocument||N;t:switch(w){case"title":A=N.getElementsByTagName("title")[0],(!A||A[Lo]||A[sn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=N.createElement(w),N.head.insertBefore(A,N.querySelector("head > title"))),Os(A,w,g),A[sn]=d,Sr(A),w=A;break e;case"link":var M=Dz("link","href",N).get(w+(g.href||""));if(M){for(var H=0;H<M.length;H++)if(A=M[H],A.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&A.getAttribute("rel")===(g.rel==null?null:g.rel)&&A.getAttribute("title")===(g.title==null?null:g.title)&&A.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){M.splice(H,1);break t}}A=N.createElement(w),Os(A,w,g),N.head.appendChild(A);break;case"meta":if(M=Dz("meta","content",N).get(w+(g.content||""))){for(H=0;H<M.length;H++)if(A=M[H],A.getAttribute("content")===(g.content==null?null:""+g.content)&&A.getAttribute("name")===(g.name==null?null:g.name)&&A.getAttribute("property")===(g.property==null?null:g.property)&&A.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&A.getAttribute("charset")===(g.charSet==null?null:g.charSet)){M.splice(H,1);break t}}A=N.createElement(w),Os(A,w,g),N.head.appendChild(A);break;default:throw Error(r(468,w))}A[sn]=d,Sr(A),w=A}d.stateNode=w}else zz(N,d.type,d.stateNode);else d.stateNode=_z(N,w,d.memoizedProps);else A!==w?(A===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):A.count--,w===null?zz(N,d.type,d.stateNode):_z(N,w,d.memoizedProps)):w===null&&d.stateNode!==null&&bT(d,d.memoizedProps,g.memoizedProps)}break;case 27:$a(h,d),Ra(d),w&512&&(_r||g===null||Go(g,g.return)),g!==null&&w&4&&bT(d,d.memoizedProps,g.memoizedProps);break;case 5:if($a(h,d),Ra(d),w&512&&(_r||g===null||Go(g,g.return)),d.flags&32){N=d.stateNode;try{Bo(N,"")}catch(st){xn(d,d.return,st)}}w&4&&d.stateNode!=null&&(N=d.memoizedProps,bT(d,N,g!==null?g.memoizedProps:N)),w&1024&&(wT=!0);break;case 6:if($a(h,d),Ra(d),w&4){if(d.stateNode===null)throw Error(r(162));w=d.memoizedProps,g=d.stateNode;try{g.nodeValue=w}catch(st){xn(d,d.return,st)}}break;case 3:if(jv=null,N=oo,oo=Iv(h.containerInfo),$a(h,d),oo=N,Ra(d),w&4&&g!==null&&g.memoizedState.isDehydrated)try{$h(h.containerInfo)}catch(st){xn(d,d.return,st)}wT&&(wT=!1,z4(d));break;case 4:w=oo,oo=Iv(d.stateNode.containerInfo),$a(h,d),Ra(d),oo=w;break;case 12:$a(h,d),Ra(d);break;case 31:$a(h,d),Ra(d),w&4&&(w=d.updateQueue,w!==null&&(d.updateQueue=null,pv(d,w)));break;case 13:$a(h,d),Ra(d),d.child.flags&8192&&d.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(gv=Zt()),w&4&&(w=d.updateQueue,w!==null&&(d.updateQueue=null,pv(d,w)));break;case 22:N=d.memoizedState!==null;var re=g!==null&&g.memoizedState!==null,Se=Bl,Re=_r;if(Bl=Se||N,_r=Re||re,$a(h,d),_r=Re,Bl=Se,Ra(d),w&8192)e:for(h=d.stateNode,h._visibility=N?h._visibility&-2:h._visibility|1,N&&(g===null||re||Bl||_r||kd(d)),g=null,h=d;;){if(h.tag===5||h.tag===26){if(g===null){re=g=h;try{if(A=re.stateNode,N)M=A.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{H=re.stateNode;var Le=re.memoizedProps.style,ke=Le!=null&&Le.hasOwnProperty("display")?Le.display:null;H.style.display=ke==null||typeof ke=="boolean"?"":(""+ke).trim()}}catch(st){xn(re,re.return,st)}}}else if(h.tag===6){if(g===null){re=h;try{re.stateNode.nodeValue=N?"":re.memoizedProps}catch(st){xn(re,re.return,st)}}}else if(h.tag===18){if(g===null){re=h;try{var Ie=re.stateNode;N?Nz(Ie,!0):Nz(re.stateNode,!1)}catch(st){xn(re,re.return,st)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===d)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}w&4&&(w=d.updateQueue,w!==null&&(g=w.retryQueue,g!==null&&(w.retryQueue=null,pv(d,g))));break;case 19:$a(h,d),Ra(d),w&4&&(w=d.updateQueue,w!==null&&(d.updateQueue=null,pv(d,w)));break;case 30:break;case 21:break;default:$a(h,d),Ra(d)}}function Ra(d){var h=d.flags;if(h&2){try{for(var g,w=d.return;w!==null;){if(E4(w)){g=w;break}w=w.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var N=g.stateNode,A=xT(d);hv(d,A,N);break;case 5:var M=g.stateNode;g.flags&32&&(Bo(M,""),g.flags&=-33);var H=xT(d);hv(d,H,M);break;case 3:case 4:var re=g.stateNode.containerInfo,Se=xT(d);vT(d,Se,re);break;default:throw Error(r(161))}}catch(Re){xn(d,d.return,Re)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function z4(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var h=d;z4(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),d=d.sibling}}function Wl(d,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)j4(d,h.alternate,h),h=h.sibling}function kd(d){for(d=d.child;d!==null;){var h=d;switch(h.tag){case 0:case 11:case 14:case 15:Zc(4,h,h.return),kd(h);break;case 1:Go(h,h.return);var g=h.stateNode;typeof g.componentWillUnmount=="function"&&N4(h,h.return,g),kd(h);break;case 27:Wg(h.stateNode);case 26:case 5:Go(h,h.return),kd(h);break;case 22:h.memoizedState===null&&kd(h);break;case 30:kd(h);break;default:kd(h)}d=d.sibling}}function Vl(d,h,g){for(g=g&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var w=h.alternate,N=d,A=h,M=A.flags;switch(A.tag){case 0:case 11:case 15:Vl(N,A,g),Og(4,A);break;case 1:if(Vl(N,A,g),w=A,N=w.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(Se){xn(w,w.return,Se)}if(w=A,N=w.updateQueue,N!==null){var H=w.stateNode;try{var re=N.shared.hiddenCallbacks;if(re!==null)for(N.shared.hiddenCallbacks=null,N=0;N<re.length;N++)h3(re[N],H)}catch(Se){xn(w,w.return,Se)}}g&&M&64&&k4(A),_g(A,A.return);break;case 27:I4(A);case 26:case 5:Vl(N,A,g),g&&w===null&&M&4&&T4(A),_g(A,A.return);break;case 12:Vl(N,A,g);break;case 31:Vl(N,A,g),g&&M&4&&O4(N,A);break;case 13:Vl(N,A,g),g&&M&4&&_4(N,A);break;case 22:A.memoizedState===null&&Vl(N,A,g),_g(A,A.return);break;case 30:break;default:Vl(N,A,g)}h=h.sibling}}function ST(d,h){var g=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),d=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(d=h.memoizedState.cachePool.pool),d!==g&&(d!=null&&d.refCount++,g!=null&&vg(g))}function CT(d,h){d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&vg(d))}function lo(d,h,g,w){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)P4(d,h,g,w),h=h.sibling}function P4(d,h,g,w){var N=h.flags;switch(h.tag){case 0:case 11:case 15:lo(d,h,g,w),N&2048&&Og(9,h);break;case 1:lo(d,h,g,w);break;case 3:lo(d,h,g,w),N&2048&&(d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&vg(d)));break;case 12:if(N&2048){lo(d,h,g,w),d=h.stateNode;try{var A=h.memoizedProps,M=A.id,H=A.onPostCommit;typeof H=="function"&&H(M,h.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(re){xn(h,h.return,re)}}else lo(d,h,g,w);break;case 31:lo(d,h,g,w);break;case 13:lo(d,h,g,w);break;case 23:break;case 22:A=h.stateNode,M=h.alternate,h.memoizedState!==null?A._visibility&2?lo(d,h,g,w):Dg(d,h):A._visibility&2?lo(d,h,g,w):(A._visibility|=2,vh(d,h,g,w,(h.subtreeFlags&10256)!==0||!1)),N&2048&&ST(M,h);break;case 24:lo(d,h,g,w),N&2048&&CT(h.alternate,h);break;default:lo(d,h,g,w)}}function vh(d,h,g,w,N){for(N=N&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var A=d,M=h,H=g,re=w,Se=M.flags;switch(M.tag){case 0:case 11:case 15:vh(A,M,H,re,N),Og(8,M);break;case 23:break;case 22:var Re=M.stateNode;M.memoizedState!==null?Re._visibility&2?vh(A,M,H,re,N):Dg(A,M):(Re._visibility|=2,vh(A,M,H,re,N)),N&&Se&2048&&ST(M.alternate,M);break;case 24:vh(A,M,H,re,N),N&&Se&2048&&CT(M.alternate,M);break;default:vh(A,M,H,re,N)}h=h.sibling}}function Dg(d,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var g=d,w=h,N=w.flags;switch(w.tag){case 22:Dg(g,w),N&2048&&ST(w.alternate,w);break;case 24:Dg(g,w),N&2048&&CT(w.alternate,w);break;default:Dg(g,w)}h=h.sibling}}var zg=8192;function wh(d,h,g){if(d.subtreeFlags&zg)for(d=d.child;d!==null;)L4(d,h,g),d=d.sibling}function L4(d,h,g){switch(d.tag){case 26:wh(d,h,g),d.flags&zg&&d.memoizedState!==null&&fte(g,oo,d.memoizedState,d.memoizedProps);break;case 5:wh(d,h,g);break;case 3:case 4:var w=oo;oo=Iv(d.stateNode.containerInfo),wh(d,h,g),oo=w;break;case 22:d.memoizedState===null&&(w=d.alternate,w!==null&&w.memoizedState!==null?(w=zg,zg=16777216,wh(d,h,g),zg=w):wh(d,h,g));break;default:wh(d,h,g)}}function M4(d){var h=d.alternate;if(h!==null&&(d=h.child,d!==null)){h.child=null;do h=d.sibling,d.sibling=null,d=h;while(d!==null)}}function Pg(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var w=h[g];cs=w,B4(w,d)}M4(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)F4(d),d=d.sibling}function F4(d){switch(d.tag){case 0:case 11:case 15:Pg(d),d.flags&2048&&Zc(9,d,d.return);break;case 3:Pg(d);break;case 12:Pg(d);break;case 22:var h=d.stateNode;d.memoizedState!==null&&h._visibility&2&&(d.return===null||d.return.tag!==13)?(h._visibility&=-3,mv(d)):Pg(d);break;default:Pg(d)}}function mv(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var w=h[g];cs=w,B4(w,d)}M4(d)}for(d=d.child;d!==null;){switch(h=d,h.tag){case 0:case 11:case 15:Zc(8,h,h.return),mv(h);break;case 22:g=h.stateNode,g._visibility&2&&(g._visibility&=-3,mv(h));break;default:mv(h)}d=d.sibling}}function B4(d,h){for(;cs!==null;){var g=cs;switch(g.tag){case 0:case 11:case 15:Zc(8,g,h);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var w=g.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:vg(g.memoizedState.cache)}if(w=g.child,w!==null)w.return=g,cs=w;else e:for(g=d;cs!==null;){w=cs;var N=w.sibling,A=w.return;if($4(w),w===g){cs=null;break e}if(N!==null){N.return=A,cs=N;break e}cs=A}}}var Eee={getCacheForType:function(d){var h=$s($r),g=h.data.get(d);return g===void 0&&(g=d(),h.data.set(d,g)),g},cacheSignal:function(){return $s($r).controller.signal}},Iee=typeof WeakMap=="function"?WeakMap:Map,hn=0,Rn=null,Vt=null,Xt=0,bn=0,ai=null,Jc=!1,Sh=!1,kT=!1,ql=0,dr=0,eu=0,Nd=0,NT=0,ii=0,Ch=0,Lg=null,Oa=null,TT=!1,gv=0,U4=0,yv=1/0,bv=null,tu=null,Gr=0,nu=null,kh=null,Gl=0,ET=0,IT=null,W4=null,Mg=0,AT=null;function oi(){return(hn&2)!==0&&Xt!==0?Xt&-Xt:B.T!==null?DT():Jm()}function V4(){if(ii===0)if((Xt&536870912)===0||Jt){var d=Vr;Vr<<=1,(Vr&3932160)===0&&(Vr=262144),ii=d}else ii=536870912;return d=ri.current,d!==null&&(d.flags|=32),ii}function _a(d,h,g){(d===Rn&&(bn===2||bn===9)||d.cancelPendingCommit!==null)&&(Nh(d,0),ru(d,Xt,ii,!1)),Ts(d,g),((hn&2)===0||d!==Rn)&&(d===Rn&&((hn&2)===0&&(Nd|=g),dr===4&&ru(d,Xt,ii,!1)),Ho(d))}function q4(d,h,g){if((hn&6)!==0)throw Error(r(327));var w=!g&&(h&127)===0&&(h&d.expiredLanes)===0||Ns(d,h),N=w?$ee(d,h):$T(d,h,!0),A=w;do{if(N===0){Sh&&!w&&ru(d,h,0,!1);break}else{if(g=d.current.alternate,A&&!Aee(g)){N=$T(d,h,!1),A=!1;continue}if(N===2){if(A=h,d.errorRecoveryDisabledLanes&A)var M=0;else M=d.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){h=M;e:{var H=d;N=Lg;var re=H.current.memoizedState.isDehydrated;if(re&&(Nh(H,M).flags|=256),M=$T(H,M,!1),M!==2){if(kT&&!re){H.errorRecoveryDisabledLanes|=A,Nd|=A,N=4;break e}A=Oa,Oa=N,A!==null&&(Oa===null?Oa=A:Oa.push.apply(Oa,A))}N=M}if(A=!1,N!==2)continue}}if(N===1){Nh(d,0),ru(d,h,0,!0);break}e:{switch(w=d,A=N,A){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:ru(w,h,ii,!Jc);break e;case 2:Oa=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(N=gv+300-Zt(),10<N)){if(ru(w,h,ii,!Jc),qe(w,0,!0)!==0)break e;Gl=h,w.timeoutHandle=Sz(G4.bind(null,w,g,Oa,bv,TT,h,ii,Nd,Ch,Jc,A,"Throttled",-0,0),N);break e}G4(w,g,Oa,bv,TT,h,ii,Nd,Ch,Jc,A,null,-0,0)}}break}while(!0);Ho(d)}function G4(d,h,g,w,N,A,M,H,re,Se,Re,Le,ke,Ie){if(d.timeoutHandle=-1,Le=h.subtreeFlags,Le&8192||(Le&16785408)===16785408){Le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ca},L4(h,A,Le);var st=(A&62914560)===A?gv-Zt():(A&4194048)===A?U4-Zt():0;if(st=hte(Le,st),st!==null){Gl=A,d.cancelPendingCommit=st(ez.bind(null,d,h,A,g,w,N,M,H,re,Re,Le,null,ke,Ie)),ru(d,A,M,!Se);return}}ez(d,h,A,g,w,N,M,H,re)}function Aee(d){for(var h=d;;){var g=h.tag;if((g===0||g===11||g===15)&&h.flags&16384&&(g=h.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var w=0;w<g.length;w++){var N=g[w],A=N.getSnapshot;N=N.value;try{if(!ti(A(),N))return!1}catch{return!1}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ru(d,h,g,w){h&=~NT,h&=~Nd,d.suspendedLanes|=h,d.pingedLanes&=~h,w&&(d.warmLanes|=h),w=d.expirationTimes;for(var N=h;0<N;){var A=31-Oe(N),M=1<<A;w[A]=-1,N&=~M}g!==0&&la(d,g,h)}function xv(){return(hn&6)===0?(Fg(0),!1):!0}function jT(){if(Vt!==null){if(bn===0)var d=Vt.return;else d=Vt,Dl=gd=null,GN(d),mh=null,Sg=0,d=Vt;for(;d!==null;)C4(d.alternate,d),d=d.return;Vt=null}}function Nh(d,h){var g=d.timeoutHandle;g!==-1&&(d.timeoutHandle=-1,Xee(g)),g=d.cancelPendingCommit,g!==null&&(d.cancelPendingCommit=null,g()),Gl=0,jT(),Rn=d,Vt=g=Ol(d.current,null),Xt=h,bn=0,ai=null,Jc=!1,Sh=Ns(d,h),kT=!1,Ch=ii=NT=Nd=eu=dr=0,Oa=Lg=null,TT=!1,(h&8)!==0&&(h|=h&32);var w=d.entangledLanes;if(w!==0)for(d=d.entanglements,w&=h;0<w;){var N=31-Oe(w),A=1<<N;h|=d[N],w&=~A}return ql=h,Fx(),g}function H4(d,h){Ot=null,B.H=jg,h===ph||h===Kx?(h=c3(),bn=3):h===_N?(h=c3(),bn=4):bn=h===lT?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,ai=h,Vt===null&&(dr=1,lv(d,ji(h,d.current)))}function K4(){var d=ri.current;return d===null?!0:(Xt&4194048)===Xt?_i===null:(Xt&62914560)===Xt||(Xt&536870912)!==0?d===_i:!1}function X4(){var d=B.H;return B.H=jg,d===null?jg:d}function Y4(){var d=B.A;return B.A=Eee,d}function vv(){dr=4,Jc||(Xt&4194048)!==Xt&&ri.current!==null||(Sh=!0),(eu&134217727)===0&&(Nd&134217727)===0||Rn===null||ru(Rn,Xt,ii,!1)}function $T(d,h,g){var w=hn;hn|=2;var N=X4(),A=Y4();(Rn!==d||Xt!==h)&&(bv=null,Nh(d,h)),h=!1;var M=dr;e:do try{if(bn!==0&&Vt!==null){var H=Vt,re=ai;switch(bn){case 8:jT(),M=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(h=!0);var Se=bn;if(bn=0,ai=null,Th(d,H,re,Se),g&&Sh){M=0;break e}break;default:Se=bn,bn=0,ai=null,Th(d,H,re,Se)}}jee(),M=dr;break}catch(Re){H4(d,Re)}while(!0);return h&&d.shellSuspendCounter++,Dl=gd=null,hn=w,B.H=N,B.A=A,Vt===null&&(Rn=null,Xt=0,Fx()),M}function jee(){for(;Vt!==null;)Q4(Vt)}function $ee(d,h){var g=hn;hn|=2;var w=X4(),N=Y4();Rn!==d||Xt!==h?(bv=null,yv=Zt()+500,Nh(d,h)):Sh=Ns(d,h);e:do try{if(bn!==0&&Vt!==null){h=Vt;var A=ai;t:switch(bn){case 1:bn=0,ai=null,Th(d,h,A,1);break;case 2:case 9:if(o3(A)){bn=0,ai=null,Z4(h);break}h=function(){bn!==2&&bn!==9||Rn!==d||(bn=7),Ho(d)},A.then(h,h);break e;case 3:bn=7;break e;case 4:bn=5;break e;case 7:o3(A)?(bn=0,ai=null,Z4(h)):(bn=0,ai=null,Th(d,h,A,7));break;case 5:var M=null;switch(Vt.tag){case 26:M=Vt.memoizedState;case 5:case 27:var H=Vt;if(M?Pz(M):H.stateNode.complete){bn=0,ai=null;var re=H.sibling;if(re!==null)Vt=re;else{var Se=H.return;Se!==null?(Vt=Se,wv(Se)):Vt=null}break t}}bn=0,ai=null,Th(d,h,A,5);break;case 6:bn=0,ai=null,Th(d,h,A,6);break;case 8:jT(),dr=6;break e;default:throw Error(r(462))}}Ree();break}catch(Re){H4(d,Re)}while(!0);return Dl=gd=null,B.H=w,B.A=N,hn=g,Vt!==null?0:(Rn=null,Xt=0,Fx(),dr)}function Ree(){for(;Vt!==null&&!Nt();)Q4(Vt)}function Q4(d){var h=w4(d.alternate,d,ql);d.memoizedProps=d.pendingProps,h===null?wv(d):Vt=h}function Z4(d){var h=d,g=h.alternate;switch(h.tag){case 15:case 0:h=m4(g,h,h.pendingProps,h.type,void 0,Xt);break;case 11:h=m4(g,h,h.pendingProps,h.type.render,h.ref,Xt);break;case 5:GN(h);default:C4(g,h),h=Vt=Y5(h,ql),h=w4(g,h,ql)}d.memoizedProps=d.pendingProps,h===null?wv(d):Vt=h}function Th(d,h,g,w){Dl=gd=null,GN(h),mh=null,Sg=0;var N=h.return;try{if(vee(d,N,h,g,Xt)){dr=1,lv(d,ji(g,d.current)),Vt=null;return}}catch(A){if(N!==null)throw Vt=N,A;dr=1,lv(d,ji(g,d.current)),Vt=null;return}h.flags&32768?(Jt||w===1?d=!0:Sh||(Xt&536870912)!==0?d=!1:(Jc=d=!0,(w===2||w===9||w===3||w===6)&&(w=ri.current,w!==null&&w.tag===13&&(w.flags|=16384))),J4(h,d)):wv(h)}function wv(d){var h=d;do{if((h.flags&32768)!==0){J4(h,Jc);return}d=h.return;var g=Cee(h.alternate,h,ql);if(g!==null){Vt=g;return}if(h=h.sibling,h!==null){Vt=h;return}Vt=h=d}while(h!==null);dr===0&&(dr=5)}function J4(d,h){do{var g=kee(d.alternate,d);if(g!==null){g.flags&=32767,Vt=g;return}if(g=d.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!h&&(d=d.sibling,d!==null)){Vt=d;return}Vt=d=g}while(d!==null);dr=6,Vt=null}function ez(d,h,g,w,N,A,M,H,re){d.cancelPendingCommit=null;do Sv();while(Gr!==0);if((hn&6)!==0)throw Error(r(327));if(h!==null){if(h===d.current)throw Error(r(177));if(A=h.lanes|h.childLanes,A|=xN,zo(d,g,A,M,H,re),d===Rn&&(Vt=Rn=null,Xt=0),kh=h,nu=d,Gl=g,ET=A,IT=N,W4=w,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,zee(cr,function(){return az(),null})):(d.callbackNode=null,d.callbackPriority=0),w=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||w){w=B.T,B.T=null,N=Z.p,Z.p=2,M=hn,hn|=4;try{Nee(d,h,g)}finally{hn=M,Z.p=N,B.T=w}}Gr=1,tz(),nz(),rz()}}function tz(){if(Gr===1){Gr=0;var d=nu,h=kh,g=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||g){g=B.T,B.T=null;var w=Z.p;Z.p=2;var N=hn;hn|=4;try{D4(h,d);var A=WT,M=B5(d.containerInfo),H=A.focusedElem,re=A.selectionRange;if(M!==H&&H&&H.ownerDocument&&F5(H.ownerDocument.documentElement,H)){if(re!==null&&pN(H)){var Se=re.start,Re=re.end;if(Re===void 0&&(Re=Se),"selectionStart"in H)H.selectionStart=Se,H.selectionEnd=Math.min(Re,H.value.length);else{var Le=H.ownerDocument||document,ke=Le&&Le.defaultView||window;if(ke.getSelection){var Ie=ke.getSelection(),st=H.textContent.length,wt=Math.min(re.start,st),Tn=re.end===void 0?wt:Math.min(re.end,st);!Ie.extend&&wt>Tn&&(M=Tn,Tn=wt,wt=M);var pe=M5(H,wt),ue=M5(H,Tn);if(pe&&ue&&(Ie.rangeCount!==1||Ie.anchorNode!==pe.node||Ie.anchorOffset!==pe.offset||Ie.focusNode!==ue.node||Ie.focusOffset!==ue.offset)){var ve=Le.createRange();ve.setStart(pe.node,pe.offset),Ie.removeAllRanges(),wt>Tn?(Ie.addRange(ve),Ie.extend(ue.node,ue.offset)):(ve.setEnd(ue.node,ue.offset),Ie.addRange(ve))}}}}for(Le=[],Ie=H;Ie=Ie.parentNode;)Ie.nodeType===1&&Le.push({element:Ie,left:Ie.scrollLeft,top:Ie.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Le.length;H++){var ze=Le[H];ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}_v=!!UT,WT=UT=null}finally{hn=N,Z.p=w,B.T=g}}d.current=h,Gr=2}}function nz(){if(Gr===2){Gr=0;var d=nu,h=kh,g=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||g){g=B.T,B.T=null;var w=Z.p;Z.p=2;var N=hn;hn|=4;try{j4(d,h.alternate,h)}finally{hn=N,Z.p=w,B.T=g}}Gr=3}}function rz(){if(Gr===4||Gr===3){Gr=0,sr();var d=nu,h=kh,g=Gl,w=W4;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Gr=5:(Gr=0,kh=nu=null,sz(d,d.pendingLanes));var N=d.pendingLanes;if(N===0&&(tu=null),Po(g),h=h.stateNode,we&&typeof we.onCommitFiberRoot=="function")try{we.onCommitFiberRoot(Ze,h,void 0,(h.current.flags&128)===128)}catch{}if(w!==null){h=B.T,N=Z.p,Z.p=2,B.T=null;try{for(var A=d.onRecoverableError,M=0;M<w.length;M++){var H=w[M];A(H.value,{componentStack:H.stack})}}finally{B.T=h,Z.p=N}}(Gl&3)!==0&&Sv(),Ho(d),N=d.pendingLanes,(g&261930)!==0&&(N&42)!==0?d===AT?Mg++:(Mg=0,AT=d):Mg=0,Fg(0)}}function sz(d,h){(d.pooledCacheLanes&=h)===0&&(h=d.pooledCache,h!=null&&(d.pooledCache=null,vg(h)))}function Sv(){return tz(),nz(),rz(),az()}function az(){if(Gr!==5)return!1;var d=nu,h=ET;ET=0;var g=Po(Gl),w=B.T,N=Z.p;try{Z.p=32>g?32:g,B.T=null,g=IT,IT=null;var A=nu,M=Gl;if(Gr=0,kh=nu=null,Gl=0,(hn&6)!==0)throw Error(r(331));var H=hn;if(hn|=4,F4(A.current),P4(A,A.current,M,g),hn=H,Fg(0,!1),we&&typeof we.onPostCommitFiberRoot=="function")try{we.onPostCommitFiberRoot(Ze,A)}catch{}return!0}finally{Z.p=N,B.T=w,sz(d,h)}}function iz(d,h,g){h=ji(g,h),h=oT(d.stateNode,h,2),d=Xc(d,h,2),d!==null&&(Ts(d,2),Ho(d))}function xn(d,h,g){if(d.tag===3)iz(d,d,g);else for(;h!==null;){if(h.tag===3){iz(h,d,g);break}else if(h.tag===1){var w=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(tu===null||!tu.has(w))){d=ji(g,d),g=o4(2),w=Xc(h,g,2),w!==null&&(l4(g,w,h,d),Ts(w,2),Ho(w));break}}h=h.return}}function RT(d,h,g){var w=d.pingCache;if(w===null){w=d.pingCache=new Iee;var N=new Set;w.set(h,N)}else N=w.get(h),N===void 0&&(N=new Set,w.set(h,N));N.has(g)||(kT=!0,N.add(g),d=Oee.bind(null,d,h,g),h.then(d,d))}function Oee(d,h,g){var w=d.pingCache;w!==null&&w.delete(h),d.pingedLanes|=d.suspendedLanes&g,d.warmLanes&=~g,Rn===d&&(Xt&g)===g&&(dr===4||dr===3&&(Xt&62914560)===Xt&&300>Zt()-gv?(hn&2)===0&&Nh(d,0):NT|=g,Ch===Xt&&(Ch=0)),Ho(d)}function oz(d,h){h===0&&(h=qr()),d=hd(d,h),d!==null&&(Ts(d,h),Ho(d))}function _ee(d){var h=d.memoizedState,g=0;h!==null&&(g=h.retryLane),oz(d,g)}function Dee(d,h){var g=0;switch(d.tag){case 31:case 13:var w=d.stateNode,N=d.memoizedState;N!==null&&(g=N.retryLane);break;case 19:w=d.stateNode;break;case 22:w=d.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(h),oz(d,g)}function zee(d,h){return Kt(d,h)}var Cv=null,Eh=null,OT=!1,kv=!1,_T=!1,su=0;function Ho(d){d!==Eh&&d.next===null&&(Eh===null?Cv=Eh=d:Eh=Eh.next=d),kv=!0,OT||(OT=!0,Lee())}function Fg(d,h){if(!_T&&kv){_T=!0;do for(var g=!1,w=Cv;w!==null;){if(d!==0){var N=w.pendingLanes;if(N===0)var A=0;else{var M=w.suspendedLanes,H=w.pingedLanes;A=(1<<31-Oe(42|d)+1)-1,A&=N&~(M&~H),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(g=!0,dz(w,A))}else A=Xt,A=qe(w,w===Rn?A:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(A&3)===0||Ns(w,A)||(g=!0,dz(w,A));w=w.next}while(g);_T=!1}}function Pee(){lz()}function lz(){kv=OT=!1;var d=0;su!==0&&Kee()&&(d=su);for(var h=Zt(),g=null,w=Cv;w!==null;){var N=w.next,A=cz(w,h);A===0?(w.next=null,g===null?Cv=N:g.next=N,N===null&&(Eh=g)):(g=w,(d!==0||(A&3)!==0)&&(kv=!0)),w=N}Gr!==0&&Gr!==5||Fg(d),su!==0&&(su=0)}function cz(d,h){for(var g=d.suspendedLanes,w=d.pingedLanes,N=d.expirationTimes,A=d.pendingLanes&-62914561;0<A;){var M=31-Oe(A),H=1<<M,re=N[M];re===-1?((H&g)===0||(H&w)!==0)&&(N[M]=Il(H,h)):re<=h&&(d.expiredLanes|=H),A&=~H}if(h=Rn,g=Xt,g=qe(d,d===h?g:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),w=d.callbackNode,g===0||d===h&&(bn===2||bn===9)||d.cancelPendingCommit!==null)return w!==null&&w!==null&&jn(w),d.callbackNode=null,d.callbackPriority=0;if((g&3)===0||Ns(d,g)){if(h=g&-g,h===d.callbackPriority)return h;switch(w!==null&&jn(w),Po(g)){case 2:case 8:g=fn;break;case 32:g=cr;break;case 268435456:g=ia;break;default:g=cr}return w=uz.bind(null,d),g=Kt(g,w),d.callbackPriority=h,d.callbackNode=g,h}return w!==null&&w!==null&&jn(w),d.callbackPriority=2,d.callbackNode=null,2}function uz(d,h){if(Gr!==0&&Gr!==5)return d.callbackNode=null,d.callbackPriority=0,null;var g=d.callbackNode;if(Sv()&&d.callbackNode!==g)return null;var w=Xt;return w=qe(d,d===Rn?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),w===0?null:(q4(d,w,h),cz(d,Zt()),d.callbackNode!=null&&d.callbackNode===g?uz.bind(null,d):null)}function dz(d,h){if(Sv())return null;q4(d,h,!0)}function Lee(){Yee(function(){(hn&6)!==0?Kt(ar,Pee):lz()})}function DT(){if(su===0){var d=fh;d===0&&(d=rn,rn<<=1,(rn&261888)===0&&(rn=256)),su=d}return su}function fz(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Ja(""+d)}function hz(d,h){var g=h.ownerDocument.createElement("input");return g.name=h.name,g.value=h.value,d.id&&g.setAttribute("form",d.id),h.parentNode.insertBefore(g,h),d=new FormData(d),g.parentNode.removeChild(g),d}function Mee(d,h,g,w,N){if(h==="submit"&&g&&g.stateNode===N){var A=fz((N[Is]||null).action),M=w.submitter;M&&(h=(h=M[Is]||null)?fz(h.formAction):M.getAttribute("formAction"),h!==null&&(A=h,M=null));var H=new $n("action","action",null,w,N);d.push({event:H,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(su!==0){var re=M?hz(N,M):new FormData(N);tT(g,{pending:!0,data:re,method:N.method,action:A},null,re)}}else typeof A=="function"&&(H.preventDefault(),re=M?hz(N,M):new FormData(N),tT(g,{pending:!0,data:re,method:N.method,action:A},A,re))},currentTarget:N}]})}}for(var zT=0;zT<bN.length;zT++){var PT=bN[zT],Fee=PT.toLowerCase(),Bee=PT[0].toUpperCase()+PT.slice(1);io(Fee,"on"+Bee)}io(V5,"onAnimationEnd"),io(q5,"onAnimationIteration"),io(G5,"onAnimationStart"),io("dblclick","onDoubleClick"),io("focusin","onFocus"),io("focusout","onBlur"),io(ree,"onTransitionRun"),io(see,"onTransitionStart"),io(aee,"onTransitionCancel"),io(H5,"onTransitionEnd"),$l("onMouseEnter",["mouseout","mouseover"]),$l("onMouseLeave",["mouseout","mouseover"]),$l("onPointerEnter",["pointerout","pointerover"]),$l("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uee=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bg));function pz(d,h){h=(h&4)!==0;for(var g=0;g<d.length;g++){var w=d[g],N=w.event;w=w.listeners;e:{var A=void 0;if(h)for(var M=w.length-1;0<=M;M--){var H=w[M],re=H.instance,Se=H.currentTarget;if(H=H.listener,re!==A&&N.isPropagationStopped())break e;A=H,N.currentTarget=Se;try{A(N)}catch(Re){Mx(Re)}N.currentTarget=null,A=re}else for(M=0;M<w.length;M++){if(H=w[M],re=H.instance,Se=H.currentTarget,H=H.listener,re!==A&&N.isPropagationStopped())break e;A=H,N.currentTarget=Se;try{A(N)}catch(Re){Mx(Re)}N.currentTarget=null,A=re}}}}function qt(d,h){var g=h[nd];g===void 0&&(g=h[nd]=new Set);var w=d+"__bubble";g.has(w)||(mz(h,d,2,!1),g.add(w))}function LT(d,h,g){var w=0;h&&(w|=4),mz(g,d,w,h)}var Nv="_reactListening"+Math.random().toString(36).slice(2);function MT(d){if(!d[Nv]){d[Nv]=!0,Pc.forEach(function(g){g!=="selectionchange"&&(Uee.has(g)||LT(g,!1,d),LT(g,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[Nv]||(h[Nv]=!0,LT("selectionchange",!1,h))}}function mz(d,h,g,w){switch(Vz(h)){case 2:var N=gte;break;case 8:N=yte;break;default:N=eE}g=N.bind(null,h,g,d),N=void 0,!od||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(N=!0),w?N!==void 0?d.addEventListener(h,g,{capture:!0,passive:N}):d.addEventListener(h,g,!0):N!==void 0?d.addEventListener(h,g,{passive:N}):d.addEventListener(h,g,!1)}function FT(d,h,g,w,N){var A=w;if((h&1)===0&&(h&2)===0&&w!==null)e:for(;;){if(w===null)return;var M=w.tag;if(M===3||M===4){var H=w.stateNode.containerInfo;if(H===N)break;if(M===4)for(M=w.return;M!==null;){var re=M.tag;if((re===3||re===4)&&M.stateNode.containerInfo===N)return;M=M.return}for(;H!==null;){if(M=As(H),M===null)return;if(re=M.tag,re===5||re===6||re===26||re===27){w=A=M;continue e}H=H.parentNode}}w=w.return}Bc(function(){var Se=A,Re=ht(g),Le=[];e:{var ke=K5.get(d);if(ke!==void 0){var Ie=$n,st=d;switch(d){case"keypress":if(xe(g)===0)break e;case"keydown":case"keyup":Ie=sN;break;case"focusin":st="focus",Ie=hg;break;case"focusout":st="blur",Ie=hg;break;case"beforeblur":case"afterblur":Ie=hg;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=$x;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=Kk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=oN;break;case V5:case q5:case G5:Ie=Qk;break;case H5:Ie=zx;break;case"scroll":case"scrollend":Ie=jx;break;case"wheel":Ie=uN;break;case"copy":case"cut":case"paste":Ie=Rx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Dx;break;case"toggle":case"beforetoggle":Ie=th}var wt=(h&4)!==0,Tn=!wt&&(d==="scroll"||d==="scrollend"),pe=wt?ke!==null?ke+"Capture":null:ke;wt=[];for(var ue=Se,ve;ue!==null;){var ze=ue;if(ve=ze.stateNode,ze=ze.tag,ze!==5&&ze!==26&&ze!==27||ve===null||pe===null||(ze=Ia(ue,pe),ze!=null&&wt.push(Ug(ue,ze,ve))),Tn)break;ue=ue.return}0<wt.length&&(ke=new Ie(ke,st,null,g,Re),Le.push({event:ke,listeners:wt}))}}if((h&7)===0){e:{if(ke=d==="mouseover"||d==="pointerover",Ie=d==="mouseout"||d==="pointerout",ke&&g!==ug&&(st=g.relatedTarget||g.fromElement)&&(As(st)||st[zc]))break e;if((Ie||ke)&&(ke=Re.window===Re?Re:(ke=Re.ownerDocument)?ke.defaultView||ke.parentWindow:window,Ie?(st=g.relatedTarget||g.toElement,Ie=Se,st=st?As(st):null,st!==null&&(Tn=a(st),wt=st.tag,st!==Tn||wt!==5&&wt!==27&&wt!==6)&&(st=null)):(Ie=null,st=Se),Ie!==st)){if(wt=$x,ze="onMouseLeave",pe="onMouseEnter",ue="mouse",(d==="pointerout"||d==="pointerover")&&(wt=Dx,ze="onPointerLeave",pe="onPointerEnter",ue="pointer"),Tn=Ie==null?ke:Al(Ie),ve=st==null?ke:Al(st),ke=new wt(ze,ue+"leave",Ie,g,Re),ke.target=Tn,ke.relatedTarget=ve,ze=null,As(Re)===Se&&(wt=new wt(pe,ue+"enter",st,g,Re),wt.target=ve,wt.relatedTarget=Tn,ze=wt),Tn=ze,Ie&&st)t:{for(wt=Wee,pe=Ie,ue=st,ve=0,ze=pe;ze;ze=wt(ze))ve++;ze=0;for(var bt=ue;bt;bt=wt(bt))ze++;for(;0<ve-ze;)pe=wt(pe),ve--;for(;0<ze-ve;)ue=wt(ue),ze--;for(;ve--;){if(pe===ue||ue!==null&&pe===ue.alternate){wt=pe;break t}pe=wt(pe),ue=wt(ue)}wt=null}else wt=null;Ie!==null&&gz(Le,ke,Ie,wt,!1),st!==null&&Tn!==null&&gz(Le,Tn,st,wt,!0)}}e:{if(ke=Se?Al(Se):window,Ie=ke.nodeName&&ke.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&ke.type==="file")var ln=O5;else if(rh(ke))if(_5)ln=eee;else{ln=ZJ;var dt=QJ}else Ie=ke.nodeName,!Ie||Ie.toLowerCase()!=="input"||ke.type!=="checkbox"&&ke.type!=="radio"?Se&&ro(Se.elementType)&&(ln=O5):ln=JJ;if(ln&&(ln=ln(d,Se))){Wo(Le,ln,g,Re);break e}dt&&dt(d,ke,Se),d==="focusout"&&Se&&ke.type==="number"&&Se.memoizedProps.value!=null&&og(ke,"number",ke.value)}switch(dt=Se?Al(Se):window,d){case"focusin":(rh(dt)||dt.contentEditable==="true")&&(sh=dt,mN=Se,yg=null);break;case"focusout":yg=mN=sh=null;break;case"mousedown":gN=!0;break;case"contextmenu":case"mouseup":case"dragend":gN=!1,U5(Le,g,Re);break;case"selectionchange":if(nee)break;case"keydown":case"keyup":U5(Le,g,Re)}var Dt;if(nh)e:{switch(d){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else ls?It(d,g)&&(Yt="onCompositionEnd"):d==="keydown"&&g.keyCode===229&&(Yt="onCompositionStart");Yt&&(Ue&&g.locale!=="ko"&&(ls||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&ls&&(Dt=ie()):(O=Re,F="value"in O?O.value:O.textContent,ls=!0)),dt=Tv(Se,Yt),0<dt.length&&(Yt=new Ox(Yt,d,null,g,Re),Le.push({event:Yt,listeners:dt}),Dt?Yt.data=Dt:(Dt=on(g),Dt!==null&&(Yt.data=Dt)))),(Dt=be?Aa(d,g):da(d,g))&&(Yt=Tv(Se,"onBeforeInput"),0<Yt.length&&(dt=new Ox("onBeforeInput","beforeinput",null,g,Re),Le.push({event:dt,listeners:Yt}),dt.data=Dt)),Mee(Le,d,Se,g,Re)}pz(Le,h)})}function Ug(d,h,g){return{instance:d,listener:h,currentTarget:g}}function Tv(d,h){for(var g=h+"Capture",w=[];d!==null;){var N=d,A=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||A===null||(N=Ia(d,g),N!=null&&w.unshift(Ug(d,N,A)),N=Ia(d,h),N!=null&&w.push(Ug(d,N,A))),d.tag===3)return w;d=d.return}return[]}function Wee(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function gz(d,h,g,w,N){for(var A=h._reactName,M=[];g!==null&&g!==w;){var H=g,re=H.alternate,Se=H.stateNode;if(H=H.tag,re!==null&&re===w)break;H!==5&&H!==26&&H!==27||Se===null||(re=Se,N?(Se=Ia(g,A),Se!=null&&M.unshift(Ug(g,Se,re))):N||(Se=Ia(g,A),Se!=null&&M.push(Ug(g,Se,re)))),g=g.return}M.length!==0&&d.push({event:h,listeners:M})}var Vee=/\r\n?/g,qee=/\u0000|\uFFFD/g;function yz(d){return(typeof d=="string"?d:""+d).replace(Vee,`
`).replace(qee,"")}function bz(d,h){return h=yz(h),yz(d)===h}function Nn(d,h,g,w,N,A){switch(g){case"children":typeof w=="string"?h==="body"||h==="textarea"&&w===""||Bo(d,w):(typeof w=="number"||typeof w=="bigint")&&h!=="body"&&Bo(d,""+w);break;case"className":Yf(d,"class",w);break;case"tabIndex":Yf(d,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Yf(d,g,w);break;case"style":id(d,w,A);break;case"data":if(h!=="object"){Yf(d,"data",w);break}case"src":case"href":if(w===""&&(h!=="a"||g!=="href")){d.removeAttribute(g);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){d.removeAttribute(g);break}w=Ja(""+w),d.setAttribute(g,w);break;case"action":case"formAction":if(typeof w=="function"){d.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(g==="formAction"?(h!=="input"&&Nn(d,h,"name",N.name,N,null),Nn(d,h,"formEncType",N.formEncType,N,null),Nn(d,h,"formMethod",N.formMethod,N,null),Nn(d,h,"formTarget",N.formTarget,N,null)):(Nn(d,h,"encType",N.encType,N,null),Nn(d,h,"method",N.method,N,null),Nn(d,h,"target",N.target,N,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){d.removeAttribute(g);break}w=Ja(""+w),d.setAttribute(g,w);break;case"onClick":w!=null&&(d.onclick=ca);break;case"onScroll":w!=null&&qt("scroll",d);break;case"onScrollEnd":w!=null&&qt("scrollend",d);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(g=w.__html,g!=null){if(N.children!=null)throw Error(r(60));d.innerHTML=g}}break;case"multiple":d.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":d.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){d.removeAttribute("xlink:href");break}g=Ja(""+w),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?d.setAttribute(g,""+w):d.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?d.setAttribute(g,""):d.removeAttribute(g);break;case"capture":case"download":w===!0?d.setAttribute(g,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?d.setAttribute(g,w):d.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?d.setAttribute(g,w):d.removeAttribute(g);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?d.removeAttribute(g):d.setAttribute(g,w);break;case"popover":qt("beforetoggle",d),qt("toggle",d),rd(d,"popover",w);break;case"xlinkActuate":os(d,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":os(d,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":os(d,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":os(d,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":os(d,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":os(d,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":os(d,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":os(d,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":os(d,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":rd(d,"is",w);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=cg.get(g)||g,rd(d,g,w))}}function BT(d,h,g,w,N,A){switch(g){case"style":id(d,w,A);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(g=w.__html,g!=null){if(N.children!=null)throw Error(r(60));d.innerHTML=g}}break;case"children":typeof w=="string"?Bo(d,w):(typeof w=="number"||typeof w=="bigint")&&Bo(d,""+w);break;case"onScroll":w!=null&&qt("scroll",d);break;case"onScrollEnd":w!=null&&qt("scrollend",d);break;case"onClick":w!=null&&(d.onclick=ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sg.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(N=g.endsWith("Capture"),h=g.slice(2,N?g.length-7:void 0),A=d[Is]||null,A=A!=null?A[g]:null,typeof A=="function"&&d.removeEventListener(h,A,N),typeof w=="function")){typeof A!="function"&&A!==null&&(g in d?d[g]=null:d.hasAttribute(g)&&d.removeAttribute(g)),d.addEventListener(h,w,N);break e}g in d?d[g]=w:w===!0?d.setAttribute(g,""):rd(d,g,w)}}}function Os(d,h,g){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qt("error",d),qt("load",d);var w=!1,N=!1,A;for(A in g)if(g.hasOwnProperty(A)){var M=g[A];if(M!=null)switch(A){case"src":w=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:Nn(d,h,A,M,g,null)}}N&&Nn(d,h,"srcSet",g.srcSet,g,null),w&&Nn(d,h,"src",g.src,g,null);return;case"input":qt("invalid",d);var H=A=M=N=null,re=null,Se=null;for(w in g)if(g.hasOwnProperty(w)){var Re=g[w];if(Re!=null)switch(w){case"name":N=Re;break;case"type":M=Re;break;case"checked":re=Re;break;case"defaultChecked":Se=Re;break;case"value":A=Re;break;case"defaultValue":H=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(r(137,h));break;default:Nn(d,h,w,Re,g,null)}}ig(d,A,H,re,Se,M,N,!1);return;case"select":qt("invalid",d),w=M=A=null;for(N in g)if(g.hasOwnProperty(N)&&(H=g[N],H!=null))switch(N){case"value":A=H;break;case"defaultValue":M=H;break;case"multiple":w=H;default:Nn(d,h,N,H,g,null)}h=A,g=M,d.multiple=!!w,h!=null?Fo(d,!!w,h,!1):g!=null&&Fo(d,!!w,g,!0);return;case"textarea":qt("invalid",d),A=N=w=null;for(M in g)if(g.hasOwnProperty(M)&&(H=g[M],H!=null))switch(M){case"value":w=H;break;case"defaultValue":N=H;break;case"children":A=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(91));break;default:Nn(d,h,M,H,g,null)}Zf(d,w,N,A);return;case"option":for(re in g)g.hasOwnProperty(re)&&(w=g[re],w!=null)&&(re==="selected"?d.selected=w&&typeof w!="function"&&typeof w!="symbol":Nn(d,h,re,w,g,null));return;case"dialog":qt("beforetoggle",d),qt("toggle",d),qt("cancel",d),qt("close",d);break;case"iframe":case"object":qt("load",d);break;case"video":case"audio":for(w=0;w<Bg.length;w++)qt(Bg[w],d);break;case"image":qt("error",d),qt("load",d);break;case"details":qt("toggle",d);break;case"embed":case"source":case"link":qt("error",d),qt("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Se in g)if(g.hasOwnProperty(Se)&&(w=g[Se],w!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:Nn(d,h,Se,w,g,null)}return;default:if(ro(h)){for(Re in g)g.hasOwnProperty(Re)&&(w=g[Re],w!==void 0&&BT(d,h,Re,w,g,void 0));return}}for(H in g)g.hasOwnProperty(H)&&(w=g[H],w!=null&&Nn(d,h,H,w,g,null))}function Gee(d,h,g,w){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,A=null,M=null,H=null,re=null,Se=null,Re=null;for(Ie in g){var Le=g[Ie];if(g.hasOwnProperty(Ie)&&Le!=null)switch(Ie){case"checked":break;case"value":break;case"defaultValue":re=Le;default:w.hasOwnProperty(Ie)||Nn(d,h,Ie,null,w,Le)}}for(var ke in w){var Ie=w[ke];if(Le=g[ke],w.hasOwnProperty(ke)&&(Ie!=null||Le!=null))switch(ke){case"type":A=Ie;break;case"name":N=Ie;break;case"checked":Se=Ie;break;case"defaultChecked":Re=Ie;break;case"value":M=Ie;break;case"defaultValue":H=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(r(137,h));break;default:Ie!==Le&&Nn(d,h,ke,Ie,w,Le)}}Rl(d,M,H,re,Se,Re,A,N);return;case"select":Ie=M=H=ke=null;for(A in g)if(re=g[A],g.hasOwnProperty(A)&&re!=null)switch(A){case"value":break;case"multiple":Ie=re;default:w.hasOwnProperty(A)||Nn(d,h,A,null,w,re)}for(N in w)if(A=w[N],re=g[N],w.hasOwnProperty(N)&&(A!=null||re!=null))switch(N){case"value":ke=A;break;case"defaultValue":H=A;break;case"multiple":M=A;default:A!==re&&Nn(d,h,N,A,w,re)}h=H,g=M,w=Ie,ke!=null?Fo(d,!!g,ke,!1):!!w!=!!g&&(h!=null?Fo(d,!!g,h,!0):Fo(d,!!g,g?[]:"",!1));return;case"textarea":Ie=ke=null;for(H in g)if(N=g[H],g.hasOwnProperty(H)&&N!=null&&!w.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:Nn(d,h,H,null,w,N)}for(M in w)if(N=w[M],A=g[M],w.hasOwnProperty(M)&&(N!=null||A!=null))switch(M){case"value":ke=N;break;case"defaultValue":Ie=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:N!==A&&Nn(d,h,M,N,w,A)}lg(d,ke,Ie);return;case"option":for(var st in g)ke=g[st],g.hasOwnProperty(st)&&ke!=null&&!w.hasOwnProperty(st)&&(st==="selected"?d.selected=!1:Nn(d,h,st,null,w,ke));for(re in w)ke=w[re],Ie=g[re],w.hasOwnProperty(re)&&ke!==Ie&&(ke!=null||Ie!=null)&&(re==="selected"?d.selected=ke&&typeof ke!="function"&&typeof ke!="symbol":Nn(d,h,re,ke,w,Ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in g)ke=g[wt],g.hasOwnProperty(wt)&&ke!=null&&!w.hasOwnProperty(wt)&&Nn(d,h,wt,null,w,ke);for(Se in w)if(ke=w[Se],Ie=g[Se],w.hasOwnProperty(Se)&&ke!==Ie&&(ke!=null||Ie!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(r(137,h));break;default:Nn(d,h,Se,ke,w,Ie)}return;default:if(ro(h)){for(var Tn in g)ke=g[Tn],g.hasOwnProperty(Tn)&&ke!==void 0&&!w.hasOwnProperty(Tn)&&BT(d,h,Tn,void 0,w,ke);for(Re in w)ke=w[Re],Ie=g[Re],!w.hasOwnProperty(Re)||ke===Ie||ke===void 0&&Ie===void 0||BT(d,h,Re,ke,w,Ie);return}}for(var pe in g)ke=g[pe],g.hasOwnProperty(pe)&&ke!=null&&!w.hasOwnProperty(pe)&&Nn(d,h,pe,null,w,ke);for(Le in w)ke=w[Le],Ie=g[Le],!w.hasOwnProperty(Le)||ke===Ie||ke==null&&Ie==null||Nn(d,h,Le,ke,w,Ie)}function xz(d){switch(d){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Hee(){if(typeof performance.getEntriesByType=="function"){for(var d=0,h=0,g=performance.getEntriesByType("resource"),w=0;w<g.length;w++){var N=g[w],A=N.transferSize,M=N.initiatorType,H=N.duration;if(A&&H&&xz(M)){for(M=0,H=N.responseEnd,w+=1;w<g.length;w++){var re=g[w],Se=re.startTime;if(Se>H)break;var Re=re.transferSize,Le=re.initiatorType;Re&&xz(Le)&&(re=re.responseEnd,M+=Re*(re<H?1:(H-Se)/(re-Se)))}if(--w,h+=8*(A+M)/(N.duration/1e3),d++,10<d)break}}if(0<d)return h/d/1e6}return navigator.connection&&(d=navigator.connection.downlink,typeof d=="number")?d:5}var UT=null,WT=null;function Ev(d){return d.nodeType===9?d:d.ownerDocument}function vz(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wz(d,h){if(d===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&h==="foreignObject"?0:d}function VT(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var qT=null;function Kee(){var d=window.event;return d&&d.type==="popstate"?d===qT?!1:(qT=d,!0):(qT=null,!1)}var Sz=typeof setTimeout=="function"?setTimeout:void 0,Xee=typeof clearTimeout=="function"?clearTimeout:void 0,Cz=typeof Promise=="function"?Promise:void 0,Yee=typeof queueMicrotask=="function"?queueMicrotask:typeof Cz<"u"?function(d){return Cz.resolve(null).then(d).catch(Qee)}:Sz;function Qee(d){setTimeout(function(){throw d})}function au(d){return d==="head"}function kz(d,h){var g=h,w=0;do{var N=g.nextSibling;if(d.removeChild(g),N&&N.nodeType===8)if(g=N.data,g==="/$"||g==="/&"){if(w===0){d.removeChild(N),$h(h);return}w--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")w++;else if(g==="html")Wg(d.ownerDocument.documentElement);else if(g==="head"){g=d.ownerDocument.head,Wg(g);for(var A=g.firstChild;A;){var M=A.nextSibling,H=A.nodeName;A[Lo]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&A.rel.toLowerCase()==="stylesheet"||g.removeChild(A),A=M}}else g==="body"&&Wg(d.ownerDocument.body);g=N}while(g);$h(h)}function Nz(d,h){var g=d;d=0;do{var w=g.nextSibling;if(g.nodeType===1?h?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(h?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),w&&w.nodeType===8)if(g=w.data,g==="/$"){if(d===0)break;d--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||d++;g=w}while(g)}function GT(d){var h=d.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var g=h;switch(h=h.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":GT(g),rg(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}d.removeChild(g)}}function Zee(d,h,g,w){for(;d.nodeType===1;){var N=g;if(d.nodeName.toLowerCase()!==h.toLowerCase()){if(!w&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(w){if(!d[Lo])switch(h){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(A=d.getAttribute("rel"),A==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(A!==N.rel||d.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||d.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||d.getAttribute("title")!==(N.title==null?null:N.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(A=d.getAttribute("src"),(A!==(N.src==null?null:N.src)||d.getAttribute("type")!==(N.type==null?null:N.type)||d.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&A&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(h==="input"&&d.type==="hidden"){var A=N.name==null?null:""+N.name;if(N.type==="hidden"&&d.getAttribute("name")===A)return d}else return d;if(d=Di(d.nextSibling),d===null)break}return null}function Jee(d,h,g){if(h==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!g||(d=Di(d.nextSibling),d===null))return null;return d}function Tz(d,h){for(;d.nodeType!==8;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!h||(d=Di(d.nextSibling),d===null))return null;return d}function HT(d){return d.data==="$?"||d.data==="$~"}function KT(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState!=="loading"}function ete(d,h){var g=d.ownerDocument;if(d.data==="$~")d._reactRetry=h;else if(d.data!=="$?"||g.readyState!=="loading")h();else{var w=function(){h(),g.removeEventListener("DOMContentLoaded",w)};g.addEventListener("DOMContentLoaded",w),d._reactRetry=w}}function Di(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return d}var XT=null;function Ez(d){d=d.nextSibling;for(var h=0;d;){if(d.nodeType===8){var g=d.data;if(g==="/$"||g==="/&"){if(h===0)return Di(d.nextSibling);h--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||h++}d=d.nextSibling}return null}function Iz(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var g=d.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(h===0)return d;h--}else g!=="/$"&&g!=="/&"||h++}d=d.previousSibling}return null}function Az(d,h,g){switch(h=Ev(g),d){case"html":if(d=h.documentElement,!d)throw Error(r(452));return d;case"head":if(d=h.head,!d)throw Error(r(453));return d;case"body":if(d=h.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function Wg(d){for(var h=d.attributes;h.length;)d.removeAttributeNode(h[0]);rg(d)}var zi=new Map,jz=new Set;function Iv(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var Hl=Z.d;Z.d={f:tte,r:nte,D:rte,C:ste,L:ate,m:ite,X:lte,S:ote,M:cte};function tte(){var d=Hl.f(),h=xv();return d||h}function nte(d){var h=no(d);h!==null&&h.tag===5&&h.type==="form"?H3(h):Hl.r(d)}var Ih=typeof document>"u"?null:document;function $z(d,h,g){var w=Ih;if(w&&typeof h=="string"&&h){var N=Ea(h);N='link[rel="'+d+'"][href="'+N+'"]',typeof g=="string"&&(N+='[crossorigin="'+g+'"]'),jz.has(N)||(jz.add(N),d={rel:d,crossOrigin:g,href:h},w.querySelector(N)===null&&(h=w.createElement("link"),Os(h,"link",d),Sr(h),w.head.appendChild(h)))}}function rte(d){Hl.D(d),$z("dns-prefetch",d,null)}function ste(d,h){Hl.C(d,h),$z("preconnect",d,h)}function ate(d,h,g){Hl.L(d,h,g);var w=Ih;if(w&&d&&h){var N='link[rel="preload"][as="'+Ea(h)+'"]';h==="image"&&g&&g.imageSrcSet?(N+='[imagesrcset="'+Ea(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(N+='[imagesizes="'+Ea(g.imageSizes)+'"]')):N+='[href="'+Ea(d)+'"]';var A=N;switch(h){case"style":A=Ah(d);break;case"script":A=jh(d)}zi.has(A)||(d=p({rel:"preload",href:h==="image"&&g&&g.imageSrcSet?void 0:d,as:h},g),zi.set(A,d),w.querySelector(N)!==null||h==="style"&&w.querySelector(Vg(A))||h==="script"&&w.querySelector(qg(A))||(h=w.createElement("link"),Os(h,"link",d),Sr(h),w.head.appendChild(h)))}}function ite(d,h){Hl.m(d,h);var g=Ih;if(g&&d){var w=h&&typeof h.as=="string"?h.as:"script",N='link[rel="modulepreload"][as="'+Ea(w)+'"][href="'+Ea(d)+'"]',A=N;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=jh(d)}if(!zi.has(A)&&(d=p({rel:"modulepreload",href:d},h),zi.set(A,d),g.querySelector(N)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(qg(A)))return}w=g.createElement("link"),Os(w,"link",d),Sr(w),g.head.appendChild(w)}}}function ote(d,h,g){Hl.S(d,h,g);var w=Ih;if(w&&d){var N=jl(w).hoistableStyles,A=Ah(d);h=h||"default";var M=N.get(A);if(!M){var H={loading:0,preload:null};if(M=w.querySelector(Vg(A)))H.loading=5;else{d=p({rel:"stylesheet",href:d,"data-precedence":h},g),(g=zi.get(A))&&YT(d,g);var re=M=w.createElement("link");Sr(re),Os(re,"link",d),re._p=new Promise(function(Se,Re){re.onload=Se,re.onerror=Re}),re.addEventListener("load",function(){H.loading|=1}),re.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Av(M,h,w)}M={type:"stylesheet",instance:M,count:1,state:H},N.set(A,M)}}}function lte(d,h){Hl.X(d,h);var g=Ih;if(g&&d){var w=jl(g).hoistableScripts,N=jh(d),A=w.get(N);A||(A=g.querySelector(qg(N)),A||(d=p({src:d,async:!0},h),(h=zi.get(N))&&QT(d,h),A=g.createElement("script"),Sr(A),Os(A,"link",d),g.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},w.set(N,A))}}function cte(d,h){Hl.M(d,h);var g=Ih;if(g&&d){var w=jl(g).hoistableScripts,N=jh(d),A=w.get(N);A||(A=g.querySelector(qg(N)),A||(d=p({src:d,async:!0,type:"module"},h),(h=zi.get(N))&&QT(d,h),A=g.createElement("script"),Sr(A),Os(A,"link",d),g.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},w.set(N,A))}}function Rz(d,h,g,w){var N=(N=_e.current)?Iv(N):null;if(!N)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(h=Ah(g.href),g=jl(N).hoistableStyles,w=g.get(h),w||(w={type:"style",instance:null,count:0,state:null},g.set(h,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){d=Ah(g.href);var A=jl(N).hoistableStyles,M=A.get(d);if(M||(N=N.ownerDocument||N,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(d,M),(A=N.querySelector(Vg(d)))&&!A._p&&(M.instance=A,M.state.loading=5),zi.has(d)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},zi.set(d,g),A||ute(N,d,g,M.state))),h&&w===null)throw Error(r(528,""));return M}if(h&&w!==null)throw Error(r(529,""));return null;case"script":return h=g.async,g=g.src,typeof g=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=jh(g),g=jl(N).hoistableScripts,w=g.get(h),w||(w={type:"script",instance:null,count:0,state:null},g.set(h,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function Ah(d){return'href="'+Ea(d)+'"'}function Vg(d){return'link[rel="stylesheet"]['+d+"]"}function Oz(d){return p({},d,{"data-precedence":d.precedence,precedence:null})}function ute(d,h,g,w){d.querySelector('link[rel="preload"][as="style"]['+h+"]")?w.loading=1:(h=d.createElement("link"),w.preload=h,h.addEventListener("load",function(){return w.loading|=1}),h.addEventListener("error",function(){return w.loading|=2}),Os(h,"link",g),Sr(h),d.head.appendChild(h))}function jh(d){return'[src="'+Ea(d)+'"]'}function qg(d){return"script[async]"+d}function _z(d,h,g){if(h.count++,h.instance===null)switch(h.type){case"style":var w=d.querySelector('style[data-href~="'+Ea(g.href)+'"]');if(w)return h.instance=w,Sr(w),w;var N=p({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return w=(d.ownerDocument||d).createElement("style"),Sr(w),Os(w,"style",N),Av(w,g.precedence,d),h.instance=w;case"stylesheet":N=Ah(g.href);var A=d.querySelector(Vg(N));if(A)return h.state.loading|=4,h.instance=A,Sr(A),A;w=Oz(g),(N=zi.get(N))&&YT(w,N),A=(d.ownerDocument||d).createElement("link"),Sr(A);var M=A;return M._p=new Promise(function(H,re){M.onload=H,M.onerror=re}),Os(A,"link",w),h.state.loading|=4,Av(A,g.precedence,d),h.instance=A;case"script":return A=jh(g.src),(N=d.querySelector(qg(A)))?(h.instance=N,Sr(N),N):(w=g,(N=zi.get(A))&&(w=p({},g),QT(w,N)),d=d.ownerDocument||d,N=d.createElement("script"),Sr(N),Os(N,"link",w),d.head.appendChild(N),h.instance=N);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(w=h.instance,h.state.loading|=4,Av(w,g.precedence,d));return h.instance}function Av(d,h,g){for(var w=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=w.length?w[w.length-1]:null,A=N,M=0;M<w.length;M++){var H=w[M];if(H.dataset.precedence===h)A=H;else if(A!==N)break}A?A.parentNode.insertBefore(d,A.nextSibling):(h=g.nodeType===9?g.head:g,h.insertBefore(d,h.firstChild))}function YT(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.title==null&&(d.title=h.title)}function QT(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.integrity==null&&(d.integrity=h.integrity)}var jv=null;function Dz(d,h,g){if(jv===null){var w=new Map,N=jv=new Map;N.set(g,w)}else N=jv,w=N.get(g),w||(w=new Map,N.set(g,w));if(w.has(d))return w;for(w.set(d,null),g=g.getElementsByTagName(d),N=0;N<g.length;N++){var A=g[N];if(!(A[Lo]||A[sn]||d==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var M=A.getAttribute(h)||"";M=d+M;var H=w.get(M);H?H.push(A):w.set(M,[A])}}return w}function zz(d,h,g){d=d.ownerDocument||d,d.head.insertBefore(g,h==="title"?d.querySelector("head > title"):null)}function dte(d,h,g){if(g===1||h.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;return h.rel==="stylesheet"?(d=h.disabled,typeof h.precedence=="string"&&d==null):!0;case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function Pz(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}function fte(d,h,g,w){if(g.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var N=Ah(w.href),A=h.querySelector(Vg(N));if(A){h=A._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(d.count++,d=$v.bind(d),h.then(d,d)),g.state.loading|=4,g.instance=A,Sr(A);return}A=h.ownerDocument||h,w=Oz(w),(N=zi.get(N))&&YT(w,N),A=A.createElement("link"),Sr(A);var M=A;M._p=new Promise(function(H,re){M.onload=H,M.onerror=re}),Os(A,"link",w),g.instance=A}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(g,h),(h=g.state.preload)&&(g.state.loading&3)===0&&(d.count++,g=$v.bind(d),h.addEventListener("load",g),h.addEventListener("error",g))}}var ZT=0;function hte(d,h){return d.stylesheets&&d.count===0&&Ov(d,d.stylesheets),0<d.count||0<d.imgCount?function(g){var w=setTimeout(function(){if(d.stylesheets&&Ov(d,d.stylesheets),d.unsuspend){var A=d.unsuspend;d.unsuspend=null,A()}},6e4+h);0<d.imgBytes&&ZT===0&&(ZT=62500*Hee());var N=setTimeout(function(){if(d.waitingForImages=!1,d.count===0&&(d.stylesheets&&Ov(d,d.stylesheets),d.unsuspend)){var A=d.unsuspend;d.unsuspend=null,A()}},(d.imgBytes>ZT?50:800)+h);return d.unsuspend=g,function(){d.unsuspend=null,clearTimeout(w),clearTimeout(N)}}:null}function $v(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ov(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var Rv=null;function Ov(d,h){d.stylesheets=null,d.unsuspend!==null&&(d.count++,Rv=new Map,h.forEach(pte,d),Rv=null,$v.call(d))}function pte(d,h){if(!(h.state.loading&4)){var g=Rv.get(d);if(g)var w=g.get(null);else{g=new Map,Rv.set(d,g);for(var N=d.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<N.length;A++){var M=N[A];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(g.set(M.dataset.precedence,M),w=M)}w&&g.set(null,w)}N=h.instance,M=N.getAttribute("data-precedence"),A=g.get(M)||w,A===w&&g.set(null,N),g.set(M,N),this.count++,w=$v.bind(this),N.addEventListener("load",w),N.addEventListener("error",w),A?A.parentNode.insertBefore(N,A.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(N,d.firstChild)),h.state.loading|=4}}var Gg={$$typeof:E,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function mte(d,h,g,w,N,A,M,H,re){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wr(0),this.hiddenUpdates=wr(null),this.identifierPrefix=w,this.onUncaughtError=N,this.onCaughtError=A,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function Lz(d,h,g,w,N,A,M,H,re,Se,Re,Le){return d=new mte(d,h,g,M,re,Se,Re,Le,H),h=1,A===!0&&(h|=24),A=ni(3,null,null,h),d.current=A,A.stateNode=d,h=$N(),h.refCount++,d.pooledCache=h,h.refCount++,A.memoizedState={element:w,isDehydrated:g,cache:h},DN(A),d}function Mz(d){return d?(d=oh,d):oh}function Fz(d,h,g,w,N,A){N=Mz(N),w.context===null?w.context=N:w.pendingContext=N,w=Kc(h),w.payload={element:g},A=A===void 0?null:A,A!==null&&(w.callback=A),g=Xc(d,w,h),g!==null&&(_a(g,d,h),kg(g,d,h))}function Bz(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var g=d.retryLane;d.retryLane=g!==0&&g<h?g:h}}function JT(d,h){Bz(d,h),(d=d.alternate)&&Bz(d,h)}function Uz(d){if(d.tag===13||d.tag===31){var h=hd(d,67108864);h!==null&&_a(h,d,67108864),JT(d,67108864)}}function Wz(d){if(d.tag===13||d.tag===31){var h=oi();h=Kf(h);var g=hd(d,h);g!==null&&_a(g,d,h),JT(d,h)}}var _v=!0;function gte(d,h,g,w){var N=B.T;B.T=null;var A=Z.p;try{Z.p=2,eE(d,h,g,w)}finally{Z.p=A,B.T=N}}function yte(d,h,g,w){var N=B.T;B.T=null;var A=Z.p;try{Z.p=8,eE(d,h,g,w)}finally{Z.p=A,B.T=N}}function eE(d,h,g,w){if(_v){var N=tE(w);if(N===null)FT(d,h,w,Dv,g),qz(d,w);else if(xte(N,d,h,g,w))w.stopPropagation();else if(qz(d,w),h&4&&-1<bte.indexOf(d)){for(;N!==null;){var A=no(N);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var M=Gs(A.pendingLanes);if(M!==0){var H=A;for(H.pendingLanes|=2,H.entangledLanes|=2;M;){var re=1<<31-Oe(M);H.entanglements[1]|=re,M&=~re}Ho(A),(hn&6)===0&&(yv=Zt()+500,Fg(0))}}break;case 31:case 13:H=hd(A,2),H!==null&&_a(H,A,2),xv(),JT(A,2)}if(A=tE(w),A===null&&FT(d,h,w,Dv,g),A===N)break;N=A}N!==null&&w.stopPropagation()}else FT(d,h,w,null,g)}}function tE(d){return d=ht(d),nE(d)}var Dv=null;function nE(d){if(Dv=null,d=As(d),d!==null){var h=a(d);if(h===null)d=null;else{var g=h.tag;if(g===13){if(d=i(h),d!==null)return d;d=null}else if(g===31){if(d=o(h),d!==null)return d;d=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null)}}return Dv=d,null}function Vz(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lr()){case ar:return 2;case fn:return 8;case cr:case qs:return 32;case ia:return 268435456;default:return 32}default:return 32}}var rE=!1,iu=null,ou=null,lu=null,Hg=new Map,Kg=new Map,cu=[],bte="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qz(d,h){switch(d){case"focusin":case"focusout":iu=null;break;case"dragenter":case"dragleave":ou=null;break;case"mouseover":case"mouseout":lu=null;break;case"pointerover":case"pointerout":Hg.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kg.delete(h.pointerId)}}function Xg(d,h,g,w,N,A){return d===null||d.nativeEvent!==A?(d={blockedOn:h,domEventName:g,eventSystemFlags:w,nativeEvent:A,targetContainers:[N]},h!==null&&(h=no(h),h!==null&&Uz(h)),d):(d.eventSystemFlags|=w,h=d.targetContainers,N!==null&&h.indexOf(N)===-1&&h.push(N),d)}function xte(d,h,g,w,N){switch(h){case"focusin":return iu=Xg(iu,d,h,g,w,N),!0;case"dragenter":return ou=Xg(ou,d,h,g,w,N),!0;case"mouseover":return lu=Xg(lu,d,h,g,w,N),!0;case"pointerover":var A=N.pointerId;return Hg.set(A,Xg(Hg.get(A)||null,d,h,g,w,N)),!0;case"gotpointercapture":return A=N.pointerId,Kg.set(A,Xg(Kg.get(A)||null,d,h,g,w,N)),!0}return!1}function Gz(d){var h=As(d.target);if(h!==null){var g=a(h);if(g!==null){if(h=g.tag,h===13){if(h=i(g),h!==null){d.blockedOn=h,eg(d.priority,function(){Wz(g)});return}}else if(h===31){if(h=o(g),h!==null){d.blockedOn=h,eg(d.priority,function(){Wz(g)});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){d.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}d.blockedOn=null}function zv(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var g=tE(d.nativeEvent);if(g===null){g=d.nativeEvent;var w=new g.constructor(g.type,g);ug=w,g.target.dispatchEvent(w),ug=null}else return h=no(g),h!==null&&Uz(h),d.blockedOn=g,!1;h.shift()}return!0}function Hz(d,h,g){zv(d)&&g.delete(h)}function vte(){rE=!1,iu!==null&&zv(iu)&&(iu=null),ou!==null&&zv(ou)&&(ou=null),lu!==null&&zv(lu)&&(lu=null),Hg.forEach(Hz),Kg.forEach(Hz)}function Pv(d,h){d.blockedOn===h&&(d.blockedOn=null,rE||(rE=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,vte)))}var Lv=null;function Kz(d){Lv!==d&&(Lv=d,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Lv===d&&(Lv=null);for(var h=0;h<d.length;h+=3){var g=d[h],w=d[h+1],N=d[h+2];if(typeof w!="function"){if(nE(w||g)===null)continue;break}var A=no(g);A!==null&&(d.splice(h,3),h-=3,tT(A,{pending:!0,data:N,method:g.method,action:w},w,N))}}))}function $h(d){function h(re){return Pv(re,d)}iu!==null&&Pv(iu,d),ou!==null&&Pv(ou,d),lu!==null&&Pv(lu,d),Hg.forEach(h),Kg.forEach(h);for(var g=0;g<cu.length;g++){var w=cu[g];w.blockedOn===d&&(w.blockedOn=null)}for(;0<cu.length&&(g=cu[0],g.blockedOn===null);)Gz(g),g.blockedOn===null&&cu.shift();if(g=(d.ownerDocument||d).$$reactFormReplay,g!=null)for(w=0;w<g.length;w+=3){var N=g[w],A=g[w+1],M=N[Is]||null;if(typeof A=="function")M||Kz(g);else if(M){var H=null;if(A&&A.hasAttribute("formAction")){if(N=A,M=A[Is]||null)H=M.formAction;else if(nE(N)!==null)continue}else H=M.action;typeof H=="function"?g[w+1]=H:(g.splice(w,3),w-=3),Kz(g)}}}function Xz(){function d(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(M){return N=M})},focusReset:"manual",scroll:"manual"})}function h(){N!==null&&(N(),N=null),w||setTimeout(g,20)}function g(){if(!w&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,N=null;return navigation.addEventListener("navigate",d),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(g,100),function(){w=!0,navigation.removeEventListener("navigate",d),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),N!==null&&(N(),N=null)}}}function sE(d){this._internalRoot=d}Mv.prototype.render=sE.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(r(409));var g=h.current,w=oi();Fz(g,w,d,h,null,null)},Mv.prototype.unmount=sE.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;Fz(d.current,2,null,d,null,null),xv(),h[zc]=null}};function Mv(d){this._internalRoot=d}Mv.prototype.unstable_scheduleHydration=function(d){if(d){var h=Jm();d={blockedOn:null,target:d,priority:h};for(var g=0;g<cu.length&&h!==0&&h<cu[g].priority;g++);cu.splice(g,0,d),g===0&&Gz(d)}};var Yz=e.version;if(Yz!=="19.2.4")throw Error(r(527,Yz,"19.2.4"));Z.findDOMNode=function(d){var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=c(h),d=d!==null?f(d):null,d=d===null?null:d.stateNode,d};var wte={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fv.isDisabled&&Fv.supportsFiber)try{Ze=Fv.inject(wte),we=Fv}catch{}}return Qg.createRoot=function(d,h){if(!s(d))throw Error(r(299));var g=!1,w="",N=r4,A=s4,M=a4;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(N=h.onUncaughtError),h.onCaughtError!==void 0&&(A=h.onCaughtError),h.onRecoverableError!==void 0&&(M=h.onRecoverableError)),h=Lz(d,1,!1,null,null,g,w,null,N,A,M,Xz),d[zc]=h.current,MT(d),new sE(h)},Qg.hydrateRoot=function(d,h,g){if(!s(d))throw Error(r(299));var w=!1,N="",A=r4,M=s4,H=a4,re=null;return g!=null&&(g.unstable_strictMode===!0&&(w=!0),g.identifierPrefix!==void 0&&(N=g.identifierPrefix),g.onUncaughtError!==void 0&&(A=g.onUncaughtError),g.onCaughtError!==void 0&&(M=g.onCaughtError),g.onRecoverableError!==void 0&&(H=g.onRecoverableError),g.formState!==void 0&&(re=g.formState)),h=Lz(d,1,!0,h,g??null,w,N,re,A,M,H,Xz),h.context=Mz(null),g=h.current,w=oi(),w=Kf(w),N=Kc(w),N.callback=null,Xc(g,N,w),g=w,h.current.lanes=g,Ts(h,g),Ho(h),d[zc]=h.current,MT(d),new Mv(h)},Qg.version="19.2.4",Qg}var iP;function $te(){if(iP)return oE.exports;iP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),oE.exports=jte(),oE.exports}var Rte=$te();const Ote=Ni(Rte);var oP="popstate";function _te(t={}){function e(r,s){let{pathname:a,search:i,hash:o}=r.location;return TA("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ay(s)}return zte(e,n,null,t)}function er(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Co(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Dte(){return Math.random().toString(36).substring(2,10)}function lP(t,e){return{usr:t.state,key:t.key,idx:e}}function TA(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?kp(e):e,state:n,key:e&&e.key||r||Dte()}}function Ay({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function kp(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function zte(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o="POP",l=null,c=f();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function f(){return(i.state||{idx:null}).idx}function p(){o="POP";let x=f(),S=x==null?null:x-c;c=x,l&&l({action:o,location:v.location,delta:S})}function m(x,S){o="PUSH";let C=TA(v.location,x,S);c=f()+1;let E=lP(C,c),k=v.createHref(C);try{i.pushState(E,"",k)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(k)}a&&l&&l({action:o,location:v.location,delta:1})}function y(x,S){o="REPLACE";let C=TA(v.location,x,S);c=f();let E=lP(C,c),k=v.createHref(C);i.replaceState(E,"",k),a&&l&&l({action:o,location:v.location,delta:0})}function b(x){return Pte(x)}let v={get action(){return o},get location(){return t(s,i)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(oP,p),l=x,()=>{s.removeEventListener(oP,p),l=null}},createHref(x){return e(s,x)},createURL:b,encodeLocation(x){let S=b(x);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:y,go(x){return i.go(x)}};return v}function Pte(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),er(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ay(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function IU(t,e,n="/"){return Lte(t,e,n,!1)}function Lte(t,e,n,r){let s=typeof e=="string"?kp(e):e,a=oc(s.pathname||"/",n);if(a==null)return null;let i=AU(t);Mte(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let c=Yte(a);o=Kte(i[l],c,r)}return o}function AU(t,e=[],n=[],r="",s=!1){let a=(i,o,l=s,c)=>{let f={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&l)return;er(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let p=rc([r,f.relativePath]),m=n.concat(f);i.children&&i.children.length>0&&(er(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),AU(i.children,e,m,p,l)),!(i.path==null&&!i.index)&&e.push({path:p,score:Gte(p,i.index),routesMeta:m})};return t.forEach((i,o)=>{if(i.path===""||!i.path?.includes("?"))a(i,o);else for(let l of jU(i.path))a(i,o,!0,l)}),e}function jU(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let i=jU(r.join("/")),o=[];return o.push(...i.map(l=>l===""?a:[a,l].join("/"))),s&&o.push(...i),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Mte(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Hte(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Fte=/^:[\w-]+$/,Bte=3,Ute=2,Wte=1,Vte=10,qte=-2,cP=t=>t==="*";function Gte(t,e){let n=t.split("/"),r=n.length;return n.some(cP)&&(r+=qte),e&&(r+=Ute),n.filter(s=>!cP(s)).reduce((s,a)=>s+(Fte.test(a)?Bte:a===""?Wte:Vte),r)}function Hte(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Kte(t,e,n=!1){let{routesMeta:r}=t,s={},a="/",i=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",p=Y1({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),m=l.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=Y1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),i.push({params:s,pathname:rc([a,p.pathname]),pathnameBase:ene(rc([a,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(a=rc([a,p.pathnameBase]))}return i}function Y1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Xte(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((c,{paramName:f,isOptional:p},m)=>{if(f==="*"){let b=o[m]||"";i=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const y=o[m];return p&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:i,pattern:t}}function Xte(t,e=!1,n=!0){Co(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Yte(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Co(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function oc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var Qte=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Zte(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?kp(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=uP(n.substring(1),"/"):a=uP(n,e)):a=e,{pathname:a,search:tne(r),hash:nne(s)}}function uP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dE(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Jte(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function E$(t){let e=Jte(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function I$(t,e,n,r=!1){let s;typeof t=="string"?s=kp(t):(s={...t},er(!s.pathname||!s.pathname.includes("?"),dE("?","pathname","search",s)),er(!s.pathname||!s.pathname.includes("#"),dE("#","pathname","hash",s)),er(!s.search||!s.search.includes("#"),dE("#","search","hash",s)));let a=t===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=n;else{let p=e.length-1;if(!r&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}o=p>=0?e[p]:"/"}let l=Zte(s,o),c=i&&i!=="/"&&i.endsWith("/"),f=(a||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}var rc=t=>t.join("/").replace(/\/\/+/g,"/"),ene=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),tne=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nne=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,rne=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function sne(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function ane(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var $U=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function RU(t,e){let n=t;if(typeof n!="string"||!Qte.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if($U)try{let a=new URL(window.location.href),i=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=oc(i.pathname,e);i.origin===a.origin&&o!=null?n=o+i.search+i.hash:s=!0}catch{Co(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var OU=["POST","PUT","PATCH","DELETE"];new Set(OU);var ine=["GET",...OU];new Set(ine);var Np=T.createContext(null);Np.displayName="DataRouter";var IS=T.createContext(null);IS.displayName="DataRouterState";var one=T.createContext(!1),_U=T.createContext({isTransitioning:!1});_U.displayName="ViewTransition";var lne=T.createContext(new Map);lne.displayName="Fetchers";var cne=T.createContext(null);cne.displayName="Await";var Ti=T.createContext(null);Ti.displayName="Navigation";var g0=T.createContext(null);g0.displayName="Location";var Cl=T.createContext({outlet:null,matches:[],isDataRoute:!1});Cl.displayName="Route";var A$=T.createContext(null);A$.displayName="RouteError";var DU="REACT_ROUTER_ERROR",une="REDIRECT",dne="ROUTE_ERROR_RESPONSE";function fne(t){if(t.startsWith(`${DU}:${une}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function hne(t){if(t.startsWith(`${DU}:${dne}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new rne(e.status,e.statusText,e.data)}catch{}}function pne(t,{relative:e}={}){er(Tp(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=T.useContext(Ti),{hash:s,pathname:a,search:i}=y0(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:rc([n,a])),r.createHref({pathname:o,search:i,hash:s})}function Tp(){return T.useContext(g0)!=null}function Ao(){return er(Tp(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(g0).location}var zU="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function PU(t){T.useContext(Ti).static||T.useLayoutEffect(t)}function j$(){let{isDataRoute:t}=T.useContext(Cl);return t?Ene():mne()}function mne(){er(Tp(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(Np),{basename:e,navigator:n}=T.useContext(Ti),{matches:r}=T.useContext(Cl),{pathname:s}=Ao(),a=JSON.stringify(E$(r)),i=T.useRef(!1);return PU(()=>{i.current=!0}),T.useCallback((l,c={})=>{if(Co(i.current,zU),!i.current)return;if(typeof l=="number"){n.go(l);return}let f=I$(l,JSON.parse(a),s,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:rc([e,f.pathname])),(c.replace?n.replace:n.push)(f,c.state,c)},[e,n,a,s,t])}T.createContext(null);function y0(t,{relative:e}={}){let{matches:n}=T.useContext(Cl),{pathname:r}=Ao(),s=JSON.stringify(E$(n));return T.useMemo(()=>I$(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function gne(t,e){return LU(t,e)}function LU(t,e,n,r,s){er(Tp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=T.useContext(Ti),{matches:i}=T.useContext(Cl),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",f=o?o.pathnameBase:"/",p=o&&o.route;{let C=p&&p.path||"";FU(c,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=Ao(),y;if(e){let C=typeof e=="string"?kp(e):e;er(f==="/"||C.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),y=C}else y=m;let b=y.pathname||"/",v=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let x=IU(t,{pathname:v});Co(p||x!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Co(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=wne(x&&x.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:rc([f,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:rc([f,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),i,n,r,s);return e&&S?T.createElement(g0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},S):S}function yne(){let t=Tne(),e=sne(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:a},"ErrorBoundary")," or"," ",T.createElement("code",{style:a},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:s},n):null,i)}var bne=T.createElement(yne,null),MU=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=hne(t.digest);n&&(t=n)}let e=t!==void 0?T.createElement(Cl.Provider,{value:this.props.routeContext},T.createElement(A$.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?T.createElement(xne,{error:t},e):e}};MU.contextType=one;var fE=new WeakMap;function xne({children:t,error:e}){let{basename:n}=T.useContext(Ti);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=fne(e.digest);if(r){let s=fE.get(e);if(s)throw s;let a=RU(r.location,n);if($U&&!fE.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const i=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw fE.set(e,i),i}return T.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function vne({routeContext:t,match:e,children:n}){let r=T.useContext(Np);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(Cl.Provider,{value:t},n)}function wne(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,i=n?.errors;if(i!=null){let f=a.findIndex(p=>p.route.id&&i?.[p.route.id]!==void 0);er(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,l=-1;if(n)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(l=f),p.route.id){let{loaderData:m,errors:y}=n,b=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}let c=n&&r?(f,p)=>{r(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:ane(n.matches),errorInfo:p})}:void 0;return a.reduceRight((f,p,m)=>{let y,b=!1,v=null,x=null;n&&(y=i&&p.route.id?i[p.route.id]:void 0,v=p.route.errorElement||bne,o&&(l<0&&m===0?(FU("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,x=null):l===m&&(b=!0,x=p.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,m+1)),C=()=>{let E;return y?E=v:b?E=x:p.route.Component?E=T.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,T.createElement(vne,{match:p,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?T.createElement(MU,{location:n.location,revalidation:n.revalidation,component:v,error:y,children:C(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:c}):C()},null)}function $$(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sne(t){let e=T.useContext(Np);return er(e,$$(t)),e}function Cne(t){let e=T.useContext(IS);return er(e,$$(t)),e}function kne(t){let e=T.useContext(Cl);return er(e,$$(t)),e}function R$(t){let e=kne(t),n=e.matches[e.matches.length-1];return er(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Nne(){return R$("useRouteId")}function Tne(){let t=T.useContext(A$),e=Cne("useRouteError"),n=R$("useRouteError");return t!==void 0?t:e.errors?.[n]}function Ene(){let{router:t}=Sne("useNavigate"),e=R$("useNavigate"),n=T.useRef(!1);return PU(()=>{n.current=!0}),T.useCallback(async(s,a={})=>{Co(n.current,zU),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var dP={};function FU(t,e,n){!e&&!dP[t]&&(dP[t]=!0,Co(!1,n))}T.memo(Ine);function Ine({routes:t,future:e,state:n,onError:r}){return LU(t,void 0,n,r,e)}function Bh({to:t,replace:e,state:n,relative:r}){er(Tp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=T.useContext(Ti);Co(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=T.useContext(Cl),{pathname:i}=Ao(),o=j$(),l=I$(t,E$(a),i,r==="path"),c=JSON.stringify(l);return T.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:r})},[o,c,r,e,n]),null}function On(t){er(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ane({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:i}){er(!Tp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=T.useMemo(()=>({basename:o,navigator:s,static:a,unstable_useTransitions:i,future:{}}),[o,s,a,i]);typeof n=="string"&&(n=kp(n));let{pathname:c="/",search:f="",hash:p="",state:m=null,key:y="default"}=n,b=T.useMemo(()=>{let v=oc(c,o);return v==null?null:{location:{pathname:v,search:f,hash:p,state:m,key:y},navigationType:r}},[o,c,f,p,m,y,r]);return Co(b!=null,`<Router basename="${o}"> is not able to match the URL "${c}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:T.createElement(Ti.Provider,{value:l},T.createElement(g0.Provider,{children:e,value:b}))}function AS({children:t,location:e}){return gne(EA(t),e)}function EA(t,e=[]){let n=[];return T.Children.forEach(t,(r,s)=>{if(!T.isValidElement(r))return;let a=[...e,s];if(r.type===T.Fragment){n.push.apply(n,EA(r.props.children,a));return}er(r.type===On,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),er(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=EA(r.props.children,a)),n.push(i)}),n}var E1="get",I1="application/x-www-form-urlencoded";function jS(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function jne(t){return jS(t)&&t.tagName.toLowerCase()==="button"}function $ne(t){return jS(t)&&t.tagName.toLowerCase()==="form"}function Rne(t){return jS(t)&&t.tagName.toLowerCase()==="input"}function One(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _ne(t,e){return t.button===0&&(!e||e==="_self")&&!One(t)}var Bv=null;function Dne(){if(Bv===null)try{new FormData(document.createElement("form"),0),Bv=!1}catch{Bv=!0}return Bv}var zne=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hE(t){return t!=null&&!zne.has(t)?(Co(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${I1}"`),null):t}function Pne(t,e){let n,r,s,a,i;if($ne(t)){let o=t.getAttribute("action");r=o?oc(o,e):null,n=t.getAttribute("method")||E1,s=hE(t.getAttribute("enctype"))||I1,a=new FormData(t)}else if(jne(t)||Rne(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?oc(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||E1,s=hE(t.getAttribute("formenctype"))||hE(o.getAttribute("enctype"))||I1,a=new FormData(o,t),!Dne()){let{name:c,type:f,value:p}=t;if(f==="image"){let m=c?`${c}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else c&&a.append(c,p)}}else{if(jS(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=E1,r=null,s=I1,i=t}return a&&s==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function O$(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Lne(t,e,n,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&oc(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function Mne(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Fne(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Bne(t,e,n){let r=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let i=await Mne(a,n);return i.links?i.links():[]}return[]}));return qne(r.flat(1).filter(Fne).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function fP(t,e,n,r,s,a){let i=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>n[c].pathname!==l.pathname||n[c].route.path?.endsWith("*")&&n[c].params["*"]!==l.params["*"];return a==="assets"?e.filter((l,c)=>i(l,c)||o(l,c)):a==="data"?e.filter((l,c)=>{let f=r.routes[l.route.id];if(!f||!f.hasLoader)return!1;if(i(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Une(t,e,{includeHydrateFallback:n}={}){return Wne(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function Wne(t){return[...new Set(t)]}function Vne(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function qne(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let a=JSON.stringify(Vne(s));return n.has(a)||(n.add(a),r.push({key:a,link:s})),r},[])}function BU(){let t=T.useContext(Np);return O$(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Gne(){let t=T.useContext(IS);return O$(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var _$=T.createContext(void 0);_$.displayName="FrameworkContext";function UU(){let t=T.useContext(_$);return O$(t,"You must render this element inside a <HydratedRouter> element"),t}function Hne(t,e){let n=T.useContext(_$),[r,s]=T.useState(!1),[a,i]=T.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:f,onTouchStart:p}=e,m=T.useRef(null);T.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let v=S=>{S.forEach(C=>{i(C.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return m.current&&x.observe(m.current),()=>{x.disconnect()}}},[t]),T.useEffect(()=>{if(r){let v=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(v)}}},[r]);let y=()=>{s(!0)},b=()=>{s(!1),i(!1)};return n?t!=="intent"?[a,m,{}]:[a,m,{onFocus:Zg(o,y),onBlur:Zg(l,b),onMouseEnter:Zg(c,y),onMouseLeave:Zg(f,b),onTouchStart:Zg(p,y)}]:[!1,m,{}]}function Zg(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Kne({page:t,...e}){let{router:n}=BU(),r=T.useMemo(()=>IU(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?T.createElement(Yne,{page:t,matches:r,...e}):null}function Xne(t){let{manifest:e,routeModules:n}=UU(),[r,s]=T.useState([]);return T.useEffect(()=>{let a=!1;return Bne(t,e,n).then(i=>{a||s(i)}),()=>{a=!0}},[t,e,n]),r}function Yne({page:t,matches:e,...n}){let r=Ao(),{future:s,manifest:a,routeModules:i}=UU(),{basename:o}=BU(),{loaderData:l,matches:c}=Gne(),f=T.useMemo(()=>fP(t,e,c,a,r,"data"),[t,e,c,a,r]),p=T.useMemo(()=>fP(t,e,c,a,r,"assets"),[t,e,c,a,r]),m=T.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,x=!1;if(e.forEach(C=>{let E=a.routes[C.route.id];!E||!E.hasLoader||(!f.some(k=>k.route.id===C.route.id)&&C.route.id in l&&i[C.route.id]?.shouldRevalidate||E.hasClientLoader?x=!0:v.add(C.route.id))}),v.size===0)return[];let S=Lne(t,o,s.unstable_trailingSlashAwareDataRequests,"data");return x&&v.size>0&&S.searchParams.set("_routes",e.filter(C=>v.has(C.route.id)).map(C=>C.route.id).join(",")),[S.pathname+S.search]},[o,s.unstable_trailingSlashAwareDataRequests,l,r,a,f,e,t,i]),y=T.useMemo(()=>Une(p,a),[p,a]),b=Xne(p);return T.createElement(T.Fragment,null,m.map(v=>T.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),y.map(v=>T.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),b.map(({key:v,link:x})=>T.createElement("link",{key:v,nonce:n.nonce,...x,crossOrigin:x.crossOrigin??n.crossOrigin})))}function Qne(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Zne=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zne&&(window.__reactRouterVersion="7.13.0")}catch{}function Jne({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=T.useRef();s.current==null&&(s.current=_te({window:r,v5Compat:!0}));let a=s.current,[i,o]=T.useState({action:a.action,location:a.location}),l=T.useCallback(c=>{n===!1?o(c):T.startTransition(()=>o(c))},[n]);return T.useLayoutEffect(()=>a.listen(l),[a,l]),T.createElement(Ane,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:a,unstable_useTransitions:n})}var WU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VU=T.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:a,replace:i,state:o,target:l,to:c,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:m,...y},b){let{basename:v,unstable_useTransitions:x}=T.useContext(Ti),S=typeof c=="string"&&WU.test(c),C=RU(c,v);c=C.to;let E=pne(c,{relative:s}),[k,I,$]=Hne(r,y),_=nre(c,{replace:i,state:o,target:l,preventScrollReset:f,relative:s,viewTransition:p,unstable_defaultShouldRevalidate:m,unstable_useTransitions:x});function z(R){e&&e(R),R.defaultPrevented||_(R)}let L=T.createElement("a",{...y,...$,href:C.absoluteURL||E,onClick:C.isExternal||a?e:z,ref:Qne(b,I),target:l,"data-discover":!S&&n==="render"?"true":void 0});return k&&!S?T.createElement(T.Fragment,null,L,T.createElement(Kne,{page:E})):L});VU.displayName="Link";var qU=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:a,to:i,viewTransition:o,children:l,...c},f){let p=y0(i,{relative:c.relative}),m=Ao(),y=T.useContext(IS),{navigator:b,basename:v}=T.useContext(Ti),x=y!=null&&ore(p)&&o===!0,S=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,C=m.pathname,E=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(C=C.toLowerCase(),E=E?E.toLowerCase():null,S=S.toLowerCase()),E&&v&&(E=oc(E,v)||E);const k=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let I=C===S||!s&&C.startsWith(S)&&C.charAt(k)==="/",$=E!=null&&(E===S||!s&&E.startsWith(S)&&E.charAt(S.length)==="/"),_={isActive:I,isPending:$,isTransitioning:x},z=I?e:void 0,L;typeof r=="function"?L=r(_):L=[r,I?"active":null,$?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(_):a;return T.createElement(VU,{...c,"aria-current":z,className:L,ref:f,style:R,to:i,viewTransition:o},typeof l=="function"?l(_):l)});qU.displayName="NavLink";var ere=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:a,method:i=E1,action:o,onSubmit:l,relative:c,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:m,...y},b)=>{let{unstable_useTransitions:v}=T.useContext(Ti),x=are(),S=ire(o,{relative:c}),C=i.toLowerCase()==="get"?"get":"post",E=typeof o=="string"&&WU.test(o),k=I=>{if(l&&l(I),I.defaultPrevented)return;I.preventDefault();let $=I.nativeEvent.submitter,_=$?.getAttribute("formmethod")||i,z=()=>x($||I.currentTarget,{fetcherKey:e,method:_,navigate:n,replace:s,state:a,relative:c,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:m});v&&n!==!1?T.startTransition(()=>z()):z()};return T.createElement("form",{ref:b,method:C,action:S,onSubmit:r?l:k,...y,"data-discover":!E&&t==="render"?"true":void 0})});ere.displayName="Form";function tre(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GU(t){let e=T.useContext(Np);return er(e,tre(t)),e}function nre(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:i,unstable_defaultShouldRevalidate:o,unstable_useTransitions:l}={}){let c=j$(),f=Ao(),p=y0(t,{relative:a});return T.useCallback(m=>{if(_ne(m,e)){m.preventDefault();let y=n!==void 0?n:Ay(f)===Ay(p),b=()=>c(t,{replace:y,state:r,preventScrollReset:s,relative:a,viewTransition:i,unstable_defaultShouldRevalidate:o});l?T.startTransition(()=>b()):b()}},[f,c,p,n,r,e,t,s,a,i,o,l])}var rre=0,sre=()=>`__${String(++rre)}__`;function are(){let{router:t}=GU("useSubmit"),{basename:e}=T.useContext(Ti),n=Nne(),r=t.fetch,s=t.navigate;return T.useCallback(async(a,i={})=>{let{action:o,method:l,encType:c,formData:f,body:p}=Pne(a,e);if(i.navigate===!1){let m=i.fetcherKey||sre();await r(m,n,i.action||o,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:f,body:p,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else await s(i.action||o,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:f,body:p,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,s,e,n])}function ire(t,{relative:e}={}){let{basename:n}=T.useContext(Ti),r=T.useContext(Cl);er(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...y0(t||".",{relative:e})},i=Ao();if(t==null){a.search=i.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(f=>f==="")){o.delete("index"),l.filter(p=>p).forEach(p=>o.append("index",p));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:rc([n,a.pathname])),Ay(a)}function ore(t,{relative:e}={}){let n=T.useContext(_U);er(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=GU("useViewTransitionState"),s=y0(t,{relative:e});if(!n.isTransitioning)return!1;let a=oc(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=oc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Y1(s.pathname,i)!=null||Y1(s.pathname,a)!=null}var D$=EU();const lre=Ni(D$);const HU=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();const cre=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const ure=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());const hP=t=>{const e=ure(t);return e.charAt(0).toUpperCase()+e.slice(1)};var dre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fre=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const hre=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},l)=>T.createElement("svg",{ref:l,...dre,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:HU("lucide",s),...!a&&!fre(o)&&{"aria-hidden":"true"},...o},[...i.map(([c,f])=>T.createElement(c,f)),...Array.isArray(a)?a:[a]]));const Qe=(t,e)=>{const n=T.forwardRef(({className:r,...s},a)=>T.createElement(hre,{ref:a,iconNode:e,className:HU(`lucide-${cre(hP(t))}`,`lucide-${t}`,r),...s}));return n.displayName=hP(t),n};const pre=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Tu=Qe("activity",pre);const mre=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],pE=Qe("arrow-right",mre);const gre=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],mi=Qe("award",gre);const yre=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],KU=Qe("book-open",yre);const bre=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Q1=Qe("bot",bre);const xre=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Zr=Qe("brain",xre);const vre=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],IA=Qe("calendar",vre);const wre=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],z$=Qe("chart-column",wre);const Sre=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],P$=Qe("chart-no-axes-column",Sre);const Cre=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],kre=Qe("chart-pie",Cre);const Nre=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],XU=Qe("check",Nre);const Tre=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],YU=Qe("chevron-down",Tre);const Ere=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],QU=Qe("chevron-left",Ere);const Ire=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],L$=Qe("chevron-right",Ire);const Are=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ZU=Qe("chevron-up",Are);const jre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pP=Qe("circle-alert",jre);const $re=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],an=Qe("circle-check-big",$re);const Rre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ore=Qe("circle-check",Rre);const _re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],JU=Qe("circle-question-mark",_re);const Dre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Kr=Qe("circle-x",Dre);const zre=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],al=Qe("clipboard-list",zre);const Pre=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vi=Qe("clock",Pre);const Lre=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],eW=Qe("code-xml",Lre);const Mre=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Yn=Qe("code",Mre);const Fre=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],tW=Qe("copy",Fre);const Bre=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Ure=Qe("cpu",Bre);const Wre=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Eu=Qe("database",Wre);const Vre=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],nW=Qe("download",Vre);const qre=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Z1=Qe("eye-off",qre);const Gre=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],An=Qe("eye",Gre);const Hre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],Ep=Qe("file-code",Hre);const Kre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Wa=Qe("file-text",Kre);const Xre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],zd=Qe("globe",Xre);const Yre=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],mP=Qe("hash",Yre);const Qre=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Zre=Qe("key",Qre);const Jre=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],af=Qe("layers",Jre);const ese=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],M$=Qe("layout-dashboard",ese);const tse=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],jy=Qe("lightbulb",tse);const nse=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],rse=Qe("link",nse);const sse=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],F$=Qe("list",sse);const ase=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],ise=Qe("loader",ase);const ose=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],lse=Qe("lock",ose);const cse=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],use=Qe("log-out",cse);const dse=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],fse=Qe("mail",dse);const hse=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],gP=Qe("medal",hse);const pse=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],mse=Qe("menu",pse);const gse=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],yse=Qe("mic-off",gse);const bse=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],xse=Qe("mic",bse);const vse=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],wse=Qe("moon",vse);const Sse=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Cse=Qe("network",Sse);const kse=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ip=Qe("play",kse);const Nse=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pa=Qe("plus",Nse);const Tse=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],J1=Qe("refresh-cw",Tse);const Ese=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],rW=Qe("save",Ese);const Ise=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],B$=Qe("search",Ise);const Ase=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],kl=Qe("send",Ase);const jse=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],of=Qe("shield",jse);const $se=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Va=Qe("sparkles",$se);const Rse=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ose=Qe("star",Rse);const _se=[["path",{d:"M10.029 4.285A2 2 0 0 0 7 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"1ystz2"}],["path",{d:"M3 4v16",key:"1ph11n"}]],Dse=Qe("step-forward",_se);const zse=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Pse=Qe("sun",zse);const Lse=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],sW=Qe("table",Lse);const Mse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xr=Qe("target",Mse);const Fse=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],yP=Qe("terminal",Fse);const Bse=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Use=Qe("toggle-left",Bse);const Wse=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Iu=Qe("trash-2",Wse);const Vse=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],U$=Qe("trending-up",Vse);const qse=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],un=Qe("triangle-alert",qse);const Gse=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],es=Qe("trophy",Gse);const Hse=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Kse=Qe("type",Hse);const Xse=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],$y=Qe("upload",Xse);const Yse=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],aW=Qe("user",Yse);const Qse=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Gh=Qe("users",Qse);const Zse=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],A1=Qe("video-off",Zse);const Jse=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],iW=Qe("video",Jse);const eae=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],AA=Qe("wand-sparkles",eae);const tae=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Mr=Qe("x",tae);const nae=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],il=Qe("zap",nae);function rae(){const t=T.useRef(null);return T.useEffect(()=>{const e=t.current,n=e.getContext("2d");let r,s=[];const a=()=>{e.width=window.innerWidth,e.height=window.innerHeight,i()},i=()=>{s=[];const c=Math.floor(e.width*e.height/18e3);for(let f=0;f<c;f++)s.push({x:Math.random()*e.width,y:Math.random()*e.height,vx:(Math.random()-.5)*.4,vy:(Math.random()-.5)*.4,radius:Math.random()*2+1,pulsePhase:Math.random()*Math.PI*2})},o=()=>{const c=document.documentElement.getAttribute("data-theme")==="light";n.fillStyle=c?"rgba(248, 250, 252, 0.08)":"rgba(8, 12, 24, 0.08)",n.fillRect(0,0,e.width,e.height),s.forEach((f,p)=>{f.x+=f.vx,f.y+=f.vy,f.pulsePhase+=.015,(f.x<0||f.x>e.width)&&(f.vx*=-1),(f.y<0||f.y>e.height)&&(f.vy*=-1),s.forEach((b,v)=>{if(p>=v)return;const x=b.x-f.x,S=b.y-f.y,C=Math.sqrt(x*x+S*S);if(C<120){const E=(1-C/120)*.25;n.beginPath(),n.strokeStyle=c?`rgba(59, 130, 246, ${E*1.5})`:`rgba(59, 130, 246, ${E})`,n.lineWidth=.5,n.moveTo(f.x,f.y),n.lineTo(b.x,b.y),n.stroke()}});const m=Math.sin(f.pulsePhase)*.3+.7,y=n.createRadialGradient(f.x,f.y,0,f.x,f.y,f.radius*3);y.addColorStop(0,`rgba(59, 130, 246, ${m})`),y.addColorStop(.5,`rgba(59, 130, 246, ${m*.3})`),y.addColorStop(1,"rgba(59, 130, 246, 0)"),n.beginPath(),n.fillStyle=y,n.arc(f.x,f.y,f.radius*3,0,Math.PI*2),n.fill(),n.beginPath(),n.fillStyle=c?`rgba(37, 99, 235, ${m})`:`rgba(147, 197, 253, ${m})`,n.arc(f.x,f.y,f.radius,0,Math.PI*2),n.fill()}),r=requestAnimationFrame(o)};a();const l=document.documentElement.getAttribute("data-theme")==="light";return n.fillStyle=l?"#f8fafc":"#080c18",n.fillRect(0,0,e.width,e.height),o(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a),cancelAnimationFrame(r)}},[]),u.jsx("canvas",{ref:t,className:"neural-canvas"})}function sae(){return u.jsxs("div",{className:"ai-illustration",children:[u.jsxs("div",{className:"illustration-container",children:[u.jsxs("div",{className:"central-brain",children:[u.jsx(Zr,{size:80}),u.jsx("div",{className:"brain-pulse"}),u.jsx("div",{className:"brain-pulse delay-1"}),u.jsx("div",{className:"brain-pulse delay-2"})]}),u.jsx("div",{className:"floating-icon icon-1",children:u.jsx(Eu,{size:28})}),u.jsx("div",{className:"floating-icon icon-2",children:u.jsx(z$,{size:28})}),u.jsx("div",{className:"floating-icon icon-3",children:u.jsx(eW,{size:28})}),u.jsx("div",{className:"floating-icon icon-4",children:u.jsx(Ure,{size:28})}),u.jsx("div",{className:"floating-icon icon-5",children:u.jsx(Cse,{size:28})}),u.jsx("div",{className:"floating-icon icon-6",children:u.jsx(Va,{size:28})}),u.jsxs("svg",{className:"connection-lines",viewBox:"0 0 400 400",children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[u.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.6"}),u.jsx("stop",{offset:"100%",stopColor:"#06b6d4",stopOpacity:"0.1"})]})}),u.jsx("circle",{cx:"200",cy:"200",r:"80",fill:"none",stroke:"url(#lineGradient)",strokeWidth:"1",strokeDasharray:"5,5",className:"rotating-circle"}),u.jsx("circle",{cx:"200",cy:"200",r:"130",fill:"none",stroke:"url(#lineGradient)",strokeWidth:"0.5",strokeDasharray:"3,3",className:"rotating-circle reverse"}),u.jsx("circle",{cx:"200",cy:"200",r:"170",fill:"none",stroke:"url(#lineGradient)",strokeWidth:"0.5",strokeDasharray:"2,4",className:"rotating-circle"})]})]}),u.jsxs("h3",{className:"illustration-title",children:[u.jsx(Va,{size:20}),"AI-Powered Learning"]}),u.jsx("p",{className:"illustration-desc",children:"Experience intelligent code evaluation and personalized feedback"})]})}function aae(){const[t,e]=T.useState(""),[n,r]=T.useState(""),[s,a]=T.useState(""),[i,o]=T.useState(!1),[l,c]=T.useState(!1),{login:f}=Zm(),p=async m=>{m.preventDefault(),a(""),o(!0);const y=await f(t,n);y.success||a(y.error),o(!1)};return u.jsxs("div",{className:"login-page",children:[u.jsx(rae,{}),u.jsxs("nav",{className:"login-nav",children:[u.jsxs("div",{className:"nav-logo",children:[u.jsx(Zr,{className:"logo-icon-svg",size:28}),u.jsx("span",{className:"logo-text",children:"Mentor Hub"})]}),u.jsxs("button",{className:"nav-login-btn",onClick:()=>c(!0),children:["Login ",u.jsx(pE,{size:16})]})]}),u.jsxs("div",{className:"login-content",children:[u.jsxs("div",{className:"hero-section",children:[u.jsxs("div",{className:"hero-badge",children:[u.jsx(Zr,{size:16}),u.jsx("span",{children:"AI & Data Science Learning Platform"})]}),u.jsx("h1",{className:"hero-title",children:"Learn with Mentors"}),u.jsx("p",{className:"hero-subtitle",children:"Learn Machine Learning, Deep Learning, and Data Analytics with personalized mentorship, hands-on projects, and AI-powered code evaluation."}),u.jsxs("button",{className:"cta-button",onClick:()=>c(!0),children:["Get Started - It's Free ",u.jsx(pE,{size:18})]})]}),u.jsx("div",{className:"dynamic-container",children:l?u.jsxs("div",{className:"login-card-inline animate-slideIn",children:[u.jsx("button",{className:"panel-back",onClick:()=>c(!1),children:u.jsx(Mr,{size:20})}),u.jsxs("div",{className:"card-header",children:[u.jsx("div",{className:"header-icon",children:u.jsx(Zr,{size:32})}),u.jsx("h2",{children:"Welcome Back"}),u.jsx("p",{children:"Sign in to continue your AI learning journey"})]}),u.jsxs("form",{onSubmit:p,className:"login-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"email",children:"Email Address"}),u.jsxs("div",{className:"input-field",children:[u.jsx(fse,{className:"field-icon",size:18}),u.jsx("input",{type:"email",id:"email",value:t,onChange:m=>e(m.target.value),placeholder:"Enter your email",required:!0})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"password",children:"Password"}),u.jsxs("div",{className:"input-field",children:[u.jsx(lse,{className:"field-icon",size:18}),u.jsx("input",{type:"password",id:"password",value:n,onChange:m=>r(m.target.value),placeholder:"Enter your password",required:!0})]})]}),s&&u.jsx("div",{className:"error-message",children:s}),u.jsx("button",{type:"submit",className:"submit-btn",disabled:i,children:i?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"btn-spinner"}),"Signing in..."]}):u.jsxs(u.Fragment,{children:["Sign In",u.jsx(pE,{size:18})]})})]})]}):u.jsx(sae,{})})]})]})}function W$({children:t,navItems:e,title:n,subtitle:r,mentorInfo:s}){const{user:a,logout:i}=Zm(),{theme:o,toggleTheme:l}=mXe(),[c,f]=T.useState(!1);return u.jsxs("div",{className:"dashboard-layout",children:[c&&u.jsx("div",{className:"sidebar-overlay",onClick:()=>f(!1)}),u.jsxs("aside",{className:`sidebar ${c?"open":""}`,children:[u.jsxs("div",{className:"sidebar-header",children:[u.jsxs("div",{className:"logo",children:[u.jsx("div",{className:"logo-icon",children:u.jsx(Zr,{size:18})}),u.jsx("span",{className:"logo-text",children:"AI Mentor Hub"})]}),u.jsx("button",{className:"close-sidebar",onClick:()=>f(!1),children:u.jsx(Mr,{size:24})})]}),u.jsx("nav",{className:"sidebar-nav",children:e.map(p=>u.jsxs(qU,{to:p.path,className:({isActive:m})=>`nav-item ${m?"active":""}`,onClick:()=>f(!1),children:[p.icon,u.jsx("span",{children:p.label})]},p.path))}),u.jsxs("div",{className:"sidebar-footer",children:[u.jsxs("button",{className:"theme-btn",onClick:l,children:[o==="light"?u.jsx(wse,{size:20}):u.jsx(Pse,{size:20}),u.jsx("span",{children:o==="light"?"Dark Mode":"Light Mode"})]}),u.jsxs("div",{className:"user-info",children:[u.jsx("div",{className:"user-avatar",children:u.jsx(aW,{size:18})}),u.jsxs("div",{className:"user-details",children:[u.jsx("span",{className:"user-name",children:a?.name}),u.jsx("span",{className:"user-role",children:a?.role})]}),u.jsx("button",{className:"logout-btn",onClick:i,title:"Logout",children:u.jsx(use,{size:18})})]})]})]}),u.jsxs("main",{className:"main-content",children:[u.jsxs("header",{className:"content-header",children:[u.jsxs("div",{className:"header-left",children:[u.jsx("button",{className:"menu-toggle",onClick:()=>f(!0),children:u.jsx(mse,{size:24})}),u.jsxs("div",{className:"page-title",children:[u.jsx("h1",{children:n}),u.jsx("p",{children:r})]})]}),u.jsx("div",{className:"header-right",children:s&&u.jsxs("div",{className:"mentor-badge-nav",children:[u.jsx("div",{className:"mentor-avatar-nav",children:s.name.charAt(0).toUpperCase()}),u.jsxs("div",{className:"mentor-details-nav",children:[u.jsx("span",{className:"mentor-label-nav",children:"My Mentor"}),u.jsx("span",{className:"mentor-name-nav",children:s.name})]})]})})]}),u.jsx("div",{className:"content-body",children:t})]})]})}function oW(t,e){return function(){return t.apply(e,arguments)}}const{toString:iae}=Object.prototype,{getPrototypeOf:V$}=Object,{iterator:$S,toStringTag:lW}=Symbol,RS=(t=>e=>{const n=iae.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),jo=t=>(t=t.toLowerCase(),e=>RS(e)===t),OS=t=>e=>typeof e===t,{isArray:Ap}=Array,tp=OS("undefined");function b0(t){return t!==null&&!tp(t)&&t.constructor!==null&&!tp(t.constructor)&&Ba(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const cW=jo("ArrayBuffer");function oae(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&cW(t.buffer),e}const lae=OS("string"),Ba=OS("function"),uW=OS("number"),x0=t=>t!==null&&typeof t=="object",cae=t=>t===!0||t===!1,j1=t=>{if(RS(t)!=="object")return!1;const e=V$(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(lW in t)&&!($S in t)},uae=t=>{if(!x0(t)||b0(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},dae=jo("Date"),fae=jo("File"),hae=jo("Blob"),pae=jo("FileList"),mae=t=>x0(t)&&Ba(t.pipe),gae=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ba(t.append)&&((e=RS(t))==="formdata"||e==="object"&&Ba(t.toString)&&t.toString()==="[object FormData]"))},yae=jo("URLSearchParams"),[bae,xae,vae,wae]=["ReadableStream","Request","Response","Headers"].map(jo),Sae=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function v0(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Ap(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(b0(t))return;const a=n?Object.getOwnPropertyNames(t):Object.keys(t),i=a.length;let o;for(r=0;r<i;r++)o=a[r],e.call(null,t[o],o,t)}}function dW(t,e){if(b0(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Ud=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fW=t=>!tp(t)&&t!==Ud;function jA(){const{caseless:t,skipUndefined:e}=fW(this)&&this||{},n={},r=(s,a)=>{const i=t&&dW(n,a)||a;j1(n[i])&&j1(s)?n[i]=jA(n[i],s):j1(s)?n[i]=jA({},s):Ap(s)?n[i]=s.slice():(!e||!tp(s))&&(n[i]=s)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&v0(arguments[s],r);return n}const Cae=(t,e,n,{allOwnKeys:r}={})=>(v0(e,(s,a)=>{n&&Ba(s)?Object.defineProperty(t,a,{value:oW(s,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,a,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),t),kae=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Nae=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Tae=(t,e,n,r)=>{let s,a,i;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),a=s.length;a-- >0;)i=s[a],(!r||r(i,t,e))&&!o[i]&&(e[i]=t[i],o[i]=!0);t=n!==!1&&V$(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Eae=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Iae=t=>{if(!t)return null;if(Ap(t))return t;let e=t.length;if(!uW(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Aae=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&V$(Uint8Array)),jae=(t,e)=>{const r=(t&&t[$S]).call(t);let s;for(;(s=r.next())&&!s.done;){const a=s.value;e.call(t,a[0],a[1])}},$ae=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Rae=jo("HTMLFormElement"),Oae=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),bP=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),_ae=jo("RegExp"),hW=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};v0(n,(s,a)=>{let i;(i=e(s,a,t))!==!1&&(r[a]=i||s)}),Object.defineProperties(t,r)},Dae=t=>{hW(t,(e,n)=>{if(Ba(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ba(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},zae=(t,e)=>{const n={},r=s=>{s.forEach(a=>{n[a]=!0})};return Ap(t)?r(t):r(String(t).split(e)),n},Pae=()=>{},Lae=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Mae(t){return!!(t&&Ba(t.append)&&t[lW]==="FormData"&&t[$S])}const Fae=t=>{const e=new Array(10),n=(r,s)=>{if(x0(r)){if(e.indexOf(r)>=0)return;if(b0(r))return r;if(!("toJSON"in r)){e[s]=r;const a=Ap(r)?[]:{};return v0(r,(i,o)=>{const l=n(i,s+1);!tp(l)&&(a[o]=l)}),e[s]=void 0,a}}return r};return n(t,0)},Bae=jo("AsyncFunction"),Uae=t=>t&&(x0(t)||Ba(t))&&Ba(t.then)&&Ba(t.catch),pW=((t,e)=>t?setImmediate:e?((n,r)=>(Ud.addEventListener("message",({source:s,data:a})=>{s===Ud&&a===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Ud.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ba(Ud.postMessage)),Wae=typeof queueMicrotask<"u"?queueMicrotask.bind(Ud):typeof process<"u"&&process.nextTick||pW,Vae=t=>t!=null&&Ba(t[$S]),Ae={isArray:Ap,isArrayBuffer:cW,isBuffer:b0,isFormData:gae,isArrayBufferView:oae,isString:lae,isNumber:uW,isBoolean:cae,isObject:x0,isPlainObject:j1,isEmptyObject:uae,isReadableStream:bae,isRequest:xae,isResponse:vae,isHeaders:wae,isUndefined:tp,isDate:dae,isFile:fae,isBlob:hae,isRegExp:_ae,isFunction:Ba,isStream:mae,isURLSearchParams:yae,isTypedArray:Aae,isFileList:pae,forEach:v0,merge:jA,extend:Cae,trim:Sae,stripBOM:kae,inherits:Nae,toFlatObject:Tae,kindOf:RS,kindOfTest:jo,endsWith:Eae,toArray:Iae,forEachEntry:jae,matchAll:$ae,isHTMLForm:Rae,hasOwnProperty:bP,hasOwnProp:bP,reduceDescriptors:hW,freezeMethods:Dae,toObjectSet:zae,toCamelCase:Oae,noop:Pae,toFiniteNumber:Lae,findKey:dW,global:Ud,isContextDefined:fW,isSpecCompliantForm:Mae,toJSONObject:Fae,isAsyncFn:Bae,isThenable:Uae,setImmediate:pW,asap:Wae,isIterable:Vae};let Et=class mW extends Error{static from(e,n,r,s,a,i){const o=new mW(e.message,n||e.code,r,s,a);return o.cause=e,o.name=e.name,i&&Object.assign(o,i),o}constructor(e,n,r,s,a){super(e),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ae.toJSONObject(this.config),code:this.code,status:this.status}}};Et.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Et.ERR_BAD_OPTION="ERR_BAD_OPTION";Et.ECONNABORTED="ECONNABORTED";Et.ETIMEDOUT="ETIMEDOUT";Et.ERR_NETWORK="ERR_NETWORK";Et.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Et.ERR_DEPRECATED="ERR_DEPRECATED";Et.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Et.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Et.ERR_CANCELED="ERR_CANCELED";Et.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Et.ERR_INVALID_URL="ERR_INVALID_URL";const qae=null;function $A(t){return Ae.isPlainObject(t)||Ae.isArray(t)}function gW(t){return Ae.endsWith(t,"[]")?t.slice(0,-2):t}function xP(t,e,n){return t?t.concat(e).map(function(s,a){return s=gW(s),!n&&a?"["+s+"]":s}).join(n?".":""):e}function Gae(t){return Ae.isArray(t)&&!t.some($A)}const Hae=Ae.toFlatObject(Ae,{},null,function(e){return/^is[A-Z]/.test(e)});function _S(t,e,n){if(!Ae.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ae.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,x){return!Ae.isUndefined(x[v])});const r=n.metaTokens,s=n.visitor||f,a=n.dots,i=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Ae.isSpecCompliantForm(e);if(!Ae.isFunction(s))throw new TypeError("visitor must be a function");function c(b){if(b===null)return"";if(Ae.isDate(b))return b.toISOString();if(Ae.isBoolean(b))return b.toString();if(!l&&Ae.isBlob(b))throw new Et("Blob is not supported. Use a Buffer instead.");return Ae.isArrayBuffer(b)||Ae.isTypedArray(b)?l&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function f(b,v,x){let S=b;if(b&&!x&&typeof b=="object"){if(Ae.endsWith(v,"{}"))v=r?v:v.slice(0,-2),b=JSON.stringify(b);else if(Ae.isArray(b)&&Gae(b)||(Ae.isFileList(b)||Ae.endsWith(v,"[]"))&&(S=Ae.toArray(b)))return v=gW(v),S.forEach(function(E,k){!(Ae.isUndefined(E)||E===null)&&e.append(i===!0?xP([v],k,a):i===null?v:v+"[]",c(E))}),!1}return $A(b)?!0:(e.append(xP(x,v,a),c(b)),!1)}const p=[],m=Object.assign(Hae,{defaultVisitor:f,convertValue:c,isVisitable:$A});function y(b,v){if(!Ae.isUndefined(b)){if(p.indexOf(b)!==-1)throw Error("Circular reference detected in "+v.join("."));p.push(b),Ae.forEach(b,function(S,C){(!(Ae.isUndefined(S)||S===null)&&s.call(e,S,Ae.isString(C)?C.trim():C,v,m))===!0&&y(S,v?v.concat(C):[C])}),p.pop()}}if(!Ae.isObject(t))throw new TypeError("data must be an object");return y(t),e}function vP(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function q$(t,e){this._pairs=[],t&&_S(t,this,e)}const yW=q$.prototype;yW.append=function(e,n){this._pairs.push([e,n])};yW.toString=function(e){const n=e?function(r){return e.call(this,r,vP)}:vP;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Kae(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function bW(t,e,n){if(!e)return t;const r=n&&n.encode||Kae,s=Ae.isFunction(n)?{serialize:n}:n,a=s&&s.serialize;let i;if(a?i=a(e,s):i=Ae.isURLSearchParams(e)?e.toString():new q$(e,s).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class wP{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ae.forEach(this.handlers,function(r){r!==null&&e(r)})}}const xW={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xae=typeof URLSearchParams<"u"?URLSearchParams:q$,Yae=typeof FormData<"u"?FormData:null,Qae=typeof Blob<"u"?Blob:null,Zae={isBrowser:!0,classes:{URLSearchParams:Xae,FormData:Yae,Blob:Qae},protocols:["http","https","file","blob","url","data"]},G$=typeof window<"u"&&typeof document<"u",RA=typeof navigator=="object"&&navigator||void 0,Jae=G$&&(!RA||["ReactNative","NativeScript","NS"].indexOf(RA.product)<0),eie=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tie=G$&&window.location.href||"http://localhost",nie=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:G$,hasStandardBrowserEnv:Jae,hasStandardBrowserWebWorkerEnv:eie,navigator:RA,origin:tie},Symbol.toStringTag,{value:"Module"})),Js={...nie,...Zae};function rie(t,e){return _S(t,new Js.classes.URLSearchParams,{visitor:function(n,r,s,a){return Js.isNode&&Ae.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function sie(t){return Ae.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function aie(t){const e={},n=Object.keys(t);let r;const s=n.length;let a;for(r=0;r<s;r++)a=n[r],e[a]=t[a];return e}function vW(t){function e(n,r,s,a){let i=n[a++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),l=a>=n.length;return i=!i&&Ae.isArray(s)?s.length:i,l?(Ae.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!o):((!s[i]||!Ae.isObject(s[i]))&&(s[i]=[]),e(n,r,s[i],a)&&Ae.isArray(s[i])&&(s[i]=aie(s[i])),!o)}if(Ae.isFormData(t)&&Ae.isFunction(t.entries)){const n={};return Ae.forEachEntry(t,(r,s)=>{e(sie(r),s,n,0)}),n}return null}function iie(t,e,n){if(Ae.isString(t))try{return(e||JSON.parse)(t),Ae.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const w0={transitional:xW,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,a=Ae.isObject(e);if(a&&Ae.isHTMLForm(e)&&(e=new FormData(e)),Ae.isFormData(e))return s?JSON.stringify(vW(e)):e;if(Ae.isArrayBuffer(e)||Ae.isBuffer(e)||Ae.isStream(e)||Ae.isFile(e)||Ae.isBlob(e)||Ae.isReadableStream(e))return e;if(Ae.isArrayBufferView(e))return e.buffer;if(Ae.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return rie(e,this.formSerializer).toString();if((o=Ae.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return _S(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return a||s?(n.setContentType("application/json",!1),iie(e)):e}],transformResponse:[function(e){const n=this.transitional||w0.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(Ae.isResponse(e)||Ae.isReadableStream(e))return e;if(e&&Ae.isString(e)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(o){if(i)throw o.name==="SyntaxError"?Et.from(o,Et.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Js.classes.FormData,Blob:Js.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ae.forEach(["delete","get","head","post","put","patch"],t=>{w0.headers[t]={}});const oie=Ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lie=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||e[n]&&oie[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},SP=Symbol("internals");function Jg(t){return t&&String(t).trim().toLowerCase()}function $1(t){return t===!1||t==null?t:Ae.isArray(t)?t.map($1):String(t)}function cie(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const uie=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function mE(t,e,n,r,s){if(Ae.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!Ae.isString(e)){if(Ae.isString(r))return e.indexOf(r)!==-1;if(Ae.isRegExp(r))return r.test(e)}}function die(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function fie(t,e){const n=Ae.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,a,i){return this[r].call(this,e,s,a,i)},configurable:!0})})}let Ua=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function a(o,l,c){const f=Jg(l);if(!f)throw new Error("header name must be a non-empty string");const p=Ae.findKey(s,f);(!p||s[p]===void 0||c===!0||c===void 0&&s[p]!==!1)&&(s[p||l]=$1(o))}const i=(o,l)=>Ae.forEach(o,(c,f)=>a(c,f,l));if(Ae.isPlainObject(e)||e instanceof this.constructor)i(e,n);else if(Ae.isString(e)&&(e=e.trim())&&!uie(e))i(lie(e),n);else if(Ae.isObject(e)&&Ae.isIterable(e)){let o={},l,c;for(const f of e){if(!Ae.isArray(f))throw TypeError("Object iterator must return a key-value pair");o[c=f[0]]=(l=o[c])?Ae.isArray(l)?[...l,f[1]]:[l,f[1]]:f[1]}i(o,n)}else e!=null&&a(n,e,r);return this}get(e,n){if(e=Jg(e),e){const r=Ae.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return cie(s);if(Ae.isFunction(n))return n.call(this,s,r);if(Ae.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Jg(e),e){const r=Ae.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||mE(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function a(i){if(i=Jg(i),i){const o=Ae.findKey(r,i);o&&(!n||mE(r,r[o],o,n))&&(delete r[o],s=!0)}}return Ae.isArray(e)?e.forEach(a):a(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const a=n[r];(!e||mE(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const n=this,r={};return Ae.forEach(this,(s,a)=>{const i=Ae.findKey(r,a);if(i){n[i]=$1(s),delete n[a];return}const o=e?die(a):String(a).trim();o!==a&&delete n[a],n[o]=$1(s),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ae.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&Ae.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[SP]=this[SP]={accessors:{}}).accessors,s=this.prototype;function a(i){const o=Jg(i);r[o]||(fie(s,i),r[o]=!0)}return Ae.isArray(e)?e.forEach(a):a(e),this}};Ua.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ae.reduceDescriptors(Ua.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ae.freezeMethods(Ua);function gE(t,e){const n=this||w0,r=e||n,s=Ua.from(r.headers);let a=r.data;return Ae.forEach(t,function(o){a=o.call(n,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function wW(t){return!!(t&&t.__CANCEL__)}let S0=class extends Et{constructor(e,n,r){super(e??"canceled",Et.ERR_CANCELED,n,r),this.name="CanceledError",this.__CANCEL__=!0}};function SW(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Et("Request failed with status code "+n.status,[Et.ERR_BAD_REQUEST,Et.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function hie(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function pie(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,a=0,i;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),f=r[a];i||(i=c),n[s]=l,r[s]=c;let p=a,m=0;for(;p!==s;)m+=n[p++],p=p%t;if(s=(s+1)%t,s===a&&(a=(a+1)%t),c-i<e)return;const y=f&&c-f;return y?Math.round(m*1e3/y):void 0}}function mie(t,e){let n=0,r=1e3/e,s,a;const i=(c,f=Date.now())=>{n=f,s=null,a&&(clearTimeout(a),a=null),t(...c)};return[(...c)=>{const f=Date.now(),p=f-n;p>=r?i(c,f):(s=c,a||(a=setTimeout(()=>{a=null,i(s)},r-p)))},()=>s&&i(s)]}const ew=(t,e,n=3)=>{let r=0;const s=pie(50,250);return mie(a=>{const i=a.loaded,o=a.lengthComputable?a.total:void 0,l=i-r,c=s(l),f=i<=o;r=i;const p={loaded:i,total:o,progress:o?i/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&f?(o-i)/c:void 0,event:a,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(p)},n)},CP=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},kP=t=>(...e)=>Ae.asap(()=>t(...e)),gie=Js.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Js.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Js.origin),Js.navigator&&/(msie|trident)/i.test(Js.navigator.userAgent)):()=>!0,yie=Js.hasStandardBrowserEnv?{write(t,e,n,r,s,a,i){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(e)}`];Ae.isNumber(n)&&o.push(`expires=${new Date(n).toUTCString()}`),Ae.isString(r)&&o.push(`path=${r}`),Ae.isString(s)&&o.push(`domain=${s}`),a===!0&&o.push("secure"),Ae.isString(i)&&o.push(`SameSite=${i}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function bie(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function xie(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function CW(t,e,n){let r=!bie(e);return t&&(r||n==!1)?xie(t,e):e}const NP=t=>t instanceof Ua?{...t}:t;function lf(t,e){e=e||{};const n={};function r(c,f,p,m){return Ae.isPlainObject(c)&&Ae.isPlainObject(f)?Ae.merge.call({caseless:m},c,f):Ae.isPlainObject(f)?Ae.merge({},f):Ae.isArray(f)?f.slice():f}function s(c,f,p,m){if(Ae.isUndefined(f)){if(!Ae.isUndefined(c))return r(void 0,c,p,m)}else return r(c,f,p,m)}function a(c,f){if(!Ae.isUndefined(f))return r(void 0,f)}function i(c,f){if(Ae.isUndefined(f)){if(!Ae.isUndefined(c))return r(void 0,c)}else return r(void 0,f)}function o(c,f,p){if(p in e)return r(c,f);if(p in t)return r(void 0,c)}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(c,f,p)=>s(NP(c),NP(f),p,!0)};return Ae.forEach(Object.keys({...t,...e}),function(f){const p=l[f]||s,m=p(t[f],e[f],f);Ae.isUndefined(m)&&p!==o||(n[f]=m)}),n}const kW=t=>{const e=lf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:i,auth:o}=e;if(e.headers=i=Ua.from(i),e.url=bW(CW(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Ae.isFormData(n)){if(Js.hasStandardBrowserEnv||Js.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Ae.isFunction(n.getHeaders)){const l=n.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([f,p])=>{c.includes(f.toLowerCase())&&i.set(f,p)})}}if(Js.hasStandardBrowserEnv&&(r&&Ae.isFunction(r)&&(r=r(e)),r||r!==!1&&gie(e.url))){const l=s&&a&&yie.read(a);l&&i.set(s,l)}return e},vie=typeof XMLHttpRequest<"u",wie=vie&&function(t){return new Promise(function(n,r){const s=kW(t);let a=s.data;const i=Ua.from(s.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=s,f,p,m,y,b;function v(){y&&y(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function S(){if(!x)return;const E=Ua.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),I={data:!o||o==="text"||o==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:E,config:t,request:x};SW(function(_){n(_),v()},function(_){r(_),v()},I),x=null}"onloadend"in x?x.onloadend=S:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(S)},x.onabort=function(){x&&(r(new Et("Request aborted",Et.ECONNABORTED,t,x)),x=null)},x.onerror=function(k){const I=k&&k.message?k.message:"Network Error",$=new Et(I,Et.ERR_NETWORK,t,x);$.event=k||null,r($),x=null},x.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const I=s.transitional||xW;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),r(new Et(k,I.clarifyTimeoutError?Et.ETIMEDOUT:Et.ECONNABORTED,t,x)),x=null},a===void 0&&i.setContentType(null),"setRequestHeader"in x&&Ae.forEach(i.toJSON(),function(k,I){x.setRequestHeader(I,k)}),Ae.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),o&&o!=="json"&&(x.responseType=s.responseType),c&&([m,b]=ew(c,!0),x.addEventListener("progress",m)),l&&x.upload&&([p,y]=ew(l),x.upload.addEventListener("progress",p),x.upload.addEventListener("loadend",y)),(s.cancelToken||s.signal)&&(f=E=>{x&&(r(!E||E.type?new S0(null,t,x):E),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const C=hie(s.url);if(C&&Js.protocols.indexOf(C)===-1){r(new Et("Unsupported protocol "+C+":",Et.ERR_BAD_REQUEST,t));return}x.send(a||null)})},Sie=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const a=function(c){if(!s){s=!0,o();const f=c instanceof Error?c:this.reason;r.abort(f instanceof Et?f:new S0(f instanceof Error?f.message:f))}};let i=e&&setTimeout(()=>{i=null,a(new Et(`timeout of ${e}ms exceeded`,Et.ETIMEDOUT))},e);const o=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),t=null)};t.forEach(c=>c.addEventListener("abort",a));const{signal:l}=r;return l.unsubscribe=()=>Ae.asap(o),l}},Cie=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},kie=async function*(t,e){for await(const n of Nie(t))yield*Cie(n,e)},Nie=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},TP=(t,e,n,r)=>{const s=kie(t,e);let a=0,i,o=l=>{i||(i=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:f}=await s.next();if(c){o(),l.close();return}let p=f.byteLength;if(n){let m=a+=p;n(m)}l.enqueue(new Uint8Array(f))}catch(c){throw o(c),c}},cancel(l){return o(l),s.return()}},{highWaterMark:2})},EP=64*1024,{isFunction:Uv}=Ae,Tie=(({Request:t,Response:e})=>({Request:t,Response:e}))(Ae.global),{ReadableStream:IP,TextEncoder:AP}=Ae.global,jP=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Eie=t=>{t=Ae.merge.call({skipUndefined:!0},Tie,t);const{fetch:e,Request:n,Response:r}=t,s=e?Uv(e):typeof fetch=="function",a=Uv(n),i=Uv(r);if(!s)return!1;const o=s&&Uv(IP),l=s&&(typeof AP=="function"?(b=>v=>b.encode(v))(new AP):async b=>new Uint8Array(await new n(b).arrayBuffer())),c=a&&o&&jP(()=>{let b=!1;const v=new n(Js.origin,{body:new IP,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!v}),f=i&&o&&jP(()=>Ae.isReadableStream(new r("").body)),p={stream:f&&(b=>b.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!p[b]&&(p[b]=(v,x)=>{let S=v&&v[b];if(S)return S.call(v);throw new Et(`Response type '${b}' is not supported`,Et.ERR_NOT_SUPPORT,x)})});const m=async b=>{if(b==null)return 0;if(Ae.isBlob(b))return b.size;if(Ae.isSpecCompliantForm(b))return(await new n(Js.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(Ae.isArrayBufferView(b)||Ae.isArrayBuffer(b))return b.byteLength;if(Ae.isURLSearchParams(b)&&(b=b+""),Ae.isString(b))return(await l(b)).byteLength},y=async(b,v)=>{const x=Ae.toFiniteNumber(b.getContentLength());return x??m(v)};return async b=>{let{url:v,method:x,data:S,signal:C,cancelToken:E,timeout:k,onDownloadProgress:I,onUploadProgress:$,responseType:_,headers:z,withCredentials:L="same-origin",fetchOptions:R}=kW(b),D=e||fetch;_=_?(_+"").toLowerCase():"text";let U=Sie([C,E&&E.toAbortSignal()],k),X=null;const V=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let Y;try{if($&&c&&x!=="get"&&x!=="head"&&(Y=await y(z,S))!==0){let W=new n(v,{method:"POST",body:S,duplex:"half"}),Q;if(Ae.isFormData(S)&&(Q=W.headers.get("content-type"))&&z.setContentType(Q),W.body){const[se,fe]=CP(Y,ew(kP($)));S=TP(W.body,EP,se,fe)}}Ae.isString(L)||(L=L?"include":"omit");const B=a&&"credentials"in n.prototype,Z={...R,signal:U,method:x.toUpperCase(),headers:z.normalize().toJSON(),body:S,duplex:"half",credentials:B?L:void 0};X=a&&new n(v,Z);let J=await(a?D(X,R):D(v,Z));const ae=f&&(_==="stream"||_==="response");if(f&&(I||ae&&V)){const W={};["status","statusText","headers"].forEach(Ne=>{W[Ne]=J[Ne]});const Q=Ae.toFiniteNumber(J.headers.get("content-length")),[se,fe]=I&&CP(Q,ew(kP(I),!0))||[];J=new r(TP(J.body,EP,se,()=>{fe&&fe(),V&&V()}),W)}_=_||"text";let ee=await p[Ae.findKey(p,_)||"text"](J,b);return!ae&&V&&V(),await new Promise((W,Q)=>{SW(W,Q,{data:ee,headers:Ua.from(J.headers),status:J.status,statusText:J.statusText,config:b,request:X})})}catch(B){throw V&&V(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new Et("Network Error",Et.ERR_NETWORK,b,X),{cause:B.cause||B}):Et.from(B,B&&B.code,b,X)}}},Iie=new Map,NW=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,a=[r,s,n];let i=a.length,o=i,l,c,f=Iie;for(;o--;)l=a[o],c=f.get(l),c===void 0&&f.set(l,c=o?new Map:Eie(e)),f=c;return c};NW();const H$={http:qae,xhr:wie,fetch:{get:NW}};Ae.forEach(H$,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const $P=t=>`- ${t}`,Aie=t=>Ae.isFunction(t)||t===null||t===!1;function jie(t,e){t=Ae.isArray(t)?t:[t];const{length:n}=t;let r,s;const a={};for(let i=0;i<n;i++){r=t[i];let o;if(s=r,!Aie(r)&&(s=H$[(o=String(r)).toLowerCase()],s===void 0))throw new Et(`Unknown adapter '${o}'`);if(s&&(Ae.isFunction(s)||(s=s.get(e))))break;a[o||"#"+i]=s}if(!s){const i=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=n?i.length>1?`since :
`+i.map($P).join(`
`):" "+$P(i[0]):"as no adapter specified";throw new Et("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s}const TW={getAdapter:jie,adapters:H$};function yE(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new S0(null,t)}function RP(t){return yE(t),t.headers=Ua.from(t.headers),t.data=gE.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),TW.getAdapter(t.adapter||w0.adapter,t)(t).then(function(r){return yE(t),r.data=gE.call(t,t.transformResponse,r),r.headers=Ua.from(r.headers),r},function(r){return wW(r)||(yE(t),r&&r.response&&(r.response.data=gE.call(t,t.transformResponse,r.response),r.response.headers=Ua.from(r.response.headers))),Promise.reject(r)})}const EW="1.13.4",DS={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{DS[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const OP={};DS.transitional=function(e,n,r){function s(a,i){return"[Axios v"+EW+"] Transitional option '"+a+"'"+i+(r?". "+r:"")}return(a,i,o)=>{if(e===!1)throw new Et(s(i," has been removed"+(n?" in "+n:"")),Et.ERR_DEPRECATED);return n&&!OP[i]&&(OP[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,i,o):!0}};DS.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function $ie(t,e,n){if(typeof t!="object")throw new Et("options must be an object",Et.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const a=r[s],i=e[a];if(i){const o=t[a],l=o===void 0||i(o,a,t);if(l!==!0)throw new Et("option "+a+" must be "+l,Et.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Et("Unknown option "+a,Et.ERR_BAD_OPTION)}}const R1={assertOptions:$ie,validators:DS},Ko=R1.validators;let Xd=class{constructor(e){this.defaults=e||{},this.interceptors={request:new wP,response:new wP}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=lf(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:a}=n;r!==void 0&&R1.assertOptions(r,{silentJSONParsing:Ko.transitional(Ko.boolean),forcedJSONParsing:Ko.transitional(Ko.boolean),clarifyTimeoutError:Ko.transitional(Ko.boolean)},!1),s!=null&&(Ae.isFunction(s)?n.paramsSerializer={serialize:s}:R1.assertOptions(s,{encode:Ko.function,serialize:Ko.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),R1.assertOptions(n,{baseUrl:Ko.spelling("baseURL"),withXsrfToken:Ko.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=a&&Ae.merge(a.common,a[n.method]);a&&Ae.forEach(["delete","get","head","post","put","patch","common"],b=>{delete a[b]}),n.headers=Ua.concat(i,a);const o=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let f,p=0,m;if(!l){const b=[RP.bind(this),void 0];for(b.unshift(...o),b.push(...c),m=b.length,f=Promise.resolve(n);p<m;)f=f.then(b[p++],b[p++]);return f}m=o.length;let y=n;for(;p<m;){const b=o[p++],v=o[p++];try{y=b(y)}catch(x){v.call(this,x);break}}try{f=RP.call(this,y)}catch(b){return Promise.reject(b)}for(p=0,m=c.length;p<m;)f=f.then(c[p++],c[p++]);return f}getUri(e){e=lf(this.defaults,e);const n=CW(e.baseURL,e.url,e.allowAbsoluteUrls);return bW(n,e.params,e.paramsSerializer)}};Ae.forEach(["delete","get","head","options"],function(e){Xd.prototype[e]=function(n,r){return this.request(lf(r||{},{method:e,url:n,data:(r||{}).data}))}});Ae.forEach(["post","put","patch"],function(e){function n(r){return function(a,i,o){return this.request(lf(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}Xd.prototype[e]=n(),Xd.prototype[e+"Form"]=n(!0)});let Rie=class IW{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(s=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](s);r._listeners=null}),this.promise.then=s=>{let a;const i=new Promise(o=>{r.subscribe(o),a=o}).then(s);return i.cancel=function(){r.unsubscribe(a)},i},e(function(a,i,o){r.reason||(r.reason=new S0(a,i,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new IW(function(s){e=s}),cancel:e}}};function Oie(t){return function(n){return t.apply(null,n)}}function _ie(t){return Ae.isObject(t)&&t.isAxiosError===!0}const OA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(OA).forEach(([t,e])=>{OA[e]=t});function AW(t){const e=new Xd(t),n=oW(Xd.prototype.request,e);return Ae.extend(n,Xd.prototype,e,{allOwnKeys:!0}),Ae.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return AW(lf(t,s))},n}const Ve=AW(w0);Ve.Axios=Xd;Ve.CanceledError=S0;Ve.CancelToken=Rie;Ve.isCancel=wW;Ve.VERSION=EW;Ve.toFormData=_S;Ve.AxiosError=Et;Ve.Cancel=Ve.CanceledError;Ve.all=function(e){return Promise.all(e)};Ve.spread=Oie;Ve.isAxiosError=_ie;Ve.mergeConfig=lf;Ve.AxiosHeaders=Ua;Ve.formToJSON=t=>vW(Ae.isHTMLForm(t)?new FormData(t):t);Ve.getAdapter=TW.getAdapter;Ve.HttpStatusCode=OA;Ve.default=Ve;const{Axios:wXe,AxiosError:SXe,CanceledError:CXe,isCancel:kXe,CancelToken:NXe,VERSION:TXe,all:EXe,Cancel:IXe,isAxiosError:AXe,spread:jXe,toFormData:$Xe,AxiosHeaders:RXe,HttpStatusCode:OXe,formToJSON:_Xe,getAdapter:DXe,mergeConfig:zXe}=Ve,Die="https://mentor-hub-backend-tkil.onrender.com/api";function zie(t,e){const n=[...t];let r=n.length;const s=()=>(e=(e*9301+49297)%233280,e/233280);for(;r>0;){const a=Math.floor(s()*r);r--,[n[r],n[a]]=[n[a],n[r]]}return n}function Pie(t,e){const n=`${t}-${e}`;let r=0;for(let s=0;s<n.length;s++){const a=n.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return Math.abs(r)}function Lie({test:t,user:e,onClose:n,onComplete:r}){const[s,a]=T.useState(0),[i,o]=T.useState({}),[l,c]=T.useState(t.duration*60),[f,p]=T.useState(0),[m,y]=T.useState(!1),[b,v]=T.useState(""),[x,S]=T.useState(!1),[C,E]=T.useState(!1),[k,I]=T.useState(null),[$,_]=T.useState(!1),z=t.questions||[],L=T.useMemo(()=>{const ee=Pie(e.id,t.id);return zie(z,ee)},[z,e.id,t.id]),R=T.useRef(null),D=T.useRef(i),U=T.useRef(f),X=T.useRef(l);T.useEffect(()=>{D.current=i},[i]),T.useEffect(()=>{U.current=f},[f]),T.useEffect(()=>{X.current=l},[l]),T.useEffect(()=>((async()=>{try{await document.documentElement.requestFullscreen()}catch(W){console.log("Fullscreen request failed:",W)}})(),()=>{document.fullscreenElement&&document.exitFullscreen().catch(()=>{})}),[]),T.useEffect(()=>{if(!(k||C))return R.current=setInterval(()=>{c(ee=>ee<=1?(clearInterval(R.current),Z(),0):ee-1)},1e3),()=>clearInterval(R.current)},[k,C]);const V=t.maxTabSwitches||3;T.useEffect(()=>{const ee=()=>{document.hidden&&!k&&!C&&p(W=>{const Q=W+1;return Q>=V?(v(` DISQUALIFIED! You have exceeded the maximum allowed tab switches (${Q}/${V}). Test terminated.`),y(!0),E(!0),setTimeout(()=>{Z(!0)},3e3)):(v(` Tab switch detected! (${Q}/${V} violations) ${V-Q} more will disqualify you!`),y(!0),setTimeout(()=>y(!1),4e3)),Q})};return document.addEventListener("visibilitychange",ee),()=>document.removeEventListener("visibilitychange",ee)},[k,C]),T.useEffect(()=>{const ee=Q=>Q.preventDefault(),W=Q=>{(Q.ctrlKey||Q.altKey||Q.metaKey)&&["c","v","u","p","s","a"].includes(Q.key.toLowerCase())&&Q.preventDefault(),(Q.key==="F12"||Q.key==="Escape")&&Q.preventDefault()};return document.addEventListener("contextmenu",ee),document.addEventListener("keydown",W),()=>{document.removeEventListener("contextmenu",ee),document.removeEventListener("keydown",W)}},[]);const Y=ee=>{const W=Math.floor(ee/60),Q=ee%60;return`${W.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}`},B=(ee,W)=>{o(Q=>({...Q,[ee]:W}))},Z=async(ee=!1)=>{S(!0);try{const W=D.current,Q=U.current,se=X.current,fe=await Ve.post(`${Die}/aptitude/${t.id}/submit`,{studentId:e.id,answers:ee?{}:W,timeSpent:t.duration*60-se,tabSwitches:Q});I(fe.data.submission),_(!0)}catch(W){console.error("Submit failed:",W)}finally{S(!1)}},J=async()=>{if(Object.keys(i).length<L.length){const ee=L.length-Object.keys(i).length;if(!window.confirm(`You have ${ee} unanswered question(s). Submit anyway?`))return}await Z()},ae=Object.keys(i).length;return $&&k?u.jsx("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflowY:"auto"},children:u.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(139, 92, 246, 0.3)",maxWidth:"900px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[u.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(15, 23, 42, 0.5)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:k.status==="passed"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Zr,{size:24,color:"white"})}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700,color:"white"},children:"Aptitude Test Report"}),u.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.5)",fontSize:"0.9rem"},children:t.title})]})]}),u.jsx("button",{onClick:()=>{document.fullscreenElement&&document.exitFullscreen(),n(),r&&r(k)},style:{background:"rgba(71, 85, 105, 0.5)",border:"none",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},children:u.jsx(Kr,{size:20})})]}),u.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"2rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:k.status==="passed"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"16px",border:`1px solid ${k.status==="passed"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[u.jsxs("div",{style:{textAlign:"center"},children:[u.jsxs("div",{style:{fontSize:"4rem",fontWeight:800,color:k.status==="passed"?"#10b981":"#ef4444",lineHeight:1},children:[k.score,"%"]}),u.jsx("div",{style:{color:"rgba(255,255,255,0.5)",marginTop:"0.5rem"},children:"Overall Score"})]}),u.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"12px",background:k.status==="passed"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",border:`1px solid ${k.status==="passed"?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,display:"flex",alignItems:"center",gap:"0.75rem"},children:[k.status==="passed"?u.jsx(an,{size:28,color:"#10b981"}):u.jsx(Kr,{size:28,color:"#ef4444"}),u.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:k.status==="passed"?"#10b981":"#ef4444"},children:k.status==="passed"?"PASSED":"FAILED"})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(59, 130, 246, 0.2)",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#3b82f6"},children:k.totalQuestions}),u.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:"Total Questions"})]}),u.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(16, 185, 129, 0.2)",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#10b981"},children:k.correctCount}),u.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:"Correct"})]}),u.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(239, 68, 68, 0.2)",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#ef4444"},children:k.totalQuestions-k.correctCount}),u.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:"Incorrect"})]}),u.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(245, 158, 11, 0.2)",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:(k.tabSwitches||f||0)>0?"#f59e0b":"#10b981"},children:k.tabSwitches||f||0}),u.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[u.jsx(un,{size:12}),"Violations"]})]}),u.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(139, 92, 246, 0.2)",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#8b5cf6"},children:k.timeSpent?`${Math.floor(k.timeSpent/60)}m`:`${Math.round((t.duration*60-l)/60)}m`}),u.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[u.jsx(vi,{size:12}),"Time Spent"]})]})]}),(k.tabSwitches||f||0)>0&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem 1.5rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",border:"1px solid rgba(245, 158, 11, 0.3)",marginBottom:"2rem"},children:[u.jsx(un,{size:24,color:"#f59e0b"}),u.jsxs("div",{children:[u.jsx("strong",{style:{color:"#f59e0b"},children:"Tab Switch Violations Detected"}),u.jsxs("p",{style:{margin:"0.25rem 0 0",color:"rgba(255,255,255,0.6)",fontSize:"0.9rem"},children:["You switched tabs/windows ",k.tabSwitches||f||0," time(s) during the test."]})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h3",{style:{margin:"0 0 1rem",fontSize:"1.1rem",fontWeight:600,color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Xr,{size:18,color:"#8b5cf6"}),"Detailed Question Breakdown"]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:k.questionResults?.map((ee,W)=>u.jsxs("div",{style:{padding:"1.25rem",background:ee.isCorrect?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",border:`1px solid ${ee.isCorrect?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,borderRadius:"12px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"1rem"},children:[u.jsx("span",{style:{minWidth:"28px",height:"28px",borderRadius:"50%",background:ee.isCorrect?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:700,flexShrink:0},children:ee.isCorrect?"":""}),u.jsxs("div",{style:{flex:1},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[u.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#8b5cf6",textTransform:"uppercase",letterSpacing:"0.05em"},children:["Question ",W+1]}),ee.category&&u.jsx("span",{style:{fontSize:"0.7rem",padding:"0.2rem 0.6rem",background:"rgba(139, 92, 246, 0.2)",borderRadius:"20px",color:"#a78bfa"},children:ee.category})]}),u.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:500,color:"white",lineHeight:1.5},children:ee.question})]})]}),u.jsxs("div",{style:{marginLeft:"2.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem 1rem",background:ee.isCorrect?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:`1px solid ${ee.isCorrect?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"rgba(255,255,255,0.5)",minWidth:"100px"},children:"Your Answer:"}),u.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:ee.isCorrect?"#10b981":"#ef4444"},children:ee.userAnswer||"(Not answered)"})]}),!ee.isCorrect&&u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"rgba(255,255,255,0.5)",minWidth:"100px"},children:"Correct Answer:"}),u.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:"#10b981"},children:ee.correctAnswer})]}),ee.explanation&&u.jsxs("div",{style:{padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.05)",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.15)"},children:[u.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#a78bfa",display:"block",marginBottom:"0.25rem"},children:" Explanation"}),u.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"rgba(255,255,255,0.7)",lineHeight:1.5},children:ee.explanation})]})]})]},W))})]})]}),u.jsx("div",{style:{padding:"1.5rem 2rem",borderTop:"1px solid rgba(139, 92, 246, 0.2)",background:"rgba(15, 23, 42, 0.5)",display:"flex",justifyContent:"flex-end"},children:u.jsx("button",{onClick:()=>{document.fullscreenElement&&document.exitFullscreen(),n(),r&&r(k)},style:{padding:"0.875rem 2rem",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",border:"none",borderRadius:"10px",color:"white",fontSize:"1rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:"Close & Return"})})]})}):u.jsxs("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 2rem",background:"rgba(15, 23, 42, 0.8)",borderBottom:"1px solid rgba(139, 92, 246, 0.2)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx(Zr,{size:28,color:"#8b5cf6"}),u.jsx("div",{children:u.jsxs("h1",{style:{margin:0,fontSize:"1.25rem",fontWeight:700,color:"white"},children:["Aptitude Test  ",t.title]})})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:l<60?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)",padding:"0.5rem 1rem",borderRadius:"8px",border:`1px solid ${l<60?"#ef4444":"#10b981"}`},children:[u.jsx(vi,{size:20,color:l<60?"#ef4444":"#10b981"}),u.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"monospace",color:l<60?"#ef4444":"#10b981"},children:Y(l)})]})]}),m&&u.jsxs("div",{style:{background:f>=3?"linear-gradient(135deg, #dc2626, #b91c1c)":"linear-gradient(135deg, #f59e0b, #d97706)",padding:"1rem 2rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",animation:"pulse 1s infinite"},children:[u.jsx(un,{size:24,color:"white"}),u.jsx("span",{style:{color:"white",fontWeight:600},children:b})]}),u.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[u.jsxs("div",{style:{width:"200px",background:"rgba(30, 41, 59, 0.5)",borderRight:"1px solid rgba(139, 92, 246, 0.2)",padding:"1.5rem",display:"flex",flexDirection:"column"},children:[u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsxs("h3",{style:{margin:0,fontSize:"0.9rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Xr,{size:16})," Question Palette"]}),u.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:[ae,"/",L.length," Answered"]})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginBottom:"1.5rem"},children:L.map((ee,W)=>u.jsx("button",{onClick:()=>a(W),style:{width:"36px",height:"36px",borderRadius:"8px",border:s===W?"2px solid #3b82f6":"none",background:i[ee.id]?"linear-gradient(135deg, #10b981, #06b6d4)":s===W?"rgba(59, 130, 246, 0.3)":"rgba(71, 85, 105, 0.5)",color:"white",fontWeight:600,fontSize:"0.85rem",cursor:"pointer",transition:"all 0.2s"},children:W+1},ee.id))}),u.jsxs("div",{style:{marginTop:"auto"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[u.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"4px",background:"linear-gradient(135deg, #10b981, #06b6d4)"}}),u.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Answered"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"4px",background:"rgba(71, 85, 105, 0.5)"}}),u.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"Unanswered"})]})]}),u.jsxs("button",{onClick:J,disabled:x,style:{marginTop:"1.5rem",width:"100%",padding:"1rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"12px",color:"white",fontSize:"0.95rem",fontWeight:600,cursor:x?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",opacity:x?.7:1},children:[u.jsx(kl,{size:18}),x?"Submitting...":"Submit Test"]})]}),u.jsx("div",{style:{flex:1,padding:"2rem 4rem",overflowY:"auto"},children:L[s]&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsxs("span",{style:{color:"#8b5cf6",fontSize:"0.9rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:["Question ",s+1," of ",L.length]}),u.jsx("h2",{style:{margin:"1rem 0",fontSize:"1.5rem",fontWeight:600,color:"white",lineHeight:1.5},children:L[s].question}),L[s].category&&u.jsx("span",{style:{display:"inline-block",padding:"0.25rem 0.75rem",background:"rgba(139, 92, 246, 0.2)",borderRadius:"20px",fontSize:"0.8rem",color:"#a78bfa"},children:L[s].category})]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:L[s].options.map((ee,W)=>{const Q=["A","B","C","D"][W],se=i[L[s].id]===ee;return u.jsxs("button",{onClick:()=>B(L[s].id,ee),style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1.25rem 1.5rem",background:se?"rgba(59, 130, 246, 0.15)":"rgba(30, 41, 59, 0.8)",border:se?"2px solid #3b82f6":"1px solid rgba(71, 85, 105, 0.5)",borderRadius:"12px",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[u.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:se?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"rgba(71, 85, 105, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:700,fontSize:"0.9rem"},children:Q}),u.jsx("span",{style:{color:se?"#3b82f6":"rgba(255,255,255,0.9)",fontSize:"1.05rem",fontWeight:se?600:400},children:ee})]},W)})}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"3rem"},children:[u.jsxs("button",{onClick:()=>a(ee=>Math.max(0,ee-1)),disabled:s===0,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:"rgba(71, 85, 105, 0.5)",border:"none",borderRadius:"8px",color:s===0?"rgba(255,255,255,0.3)":"white",cursor:s===0?"not-allowed":"pointer",fontSize:"0.95rem",fontWeight:500},children:[u.jsx(QU,{size:20})," Previous"]}),u.jsxs("button",{onClick:()=>a(ee=>Math.min(L.length-1,ee+1)),disabled:s===L.length-1,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:s===L.length-1?"rgba(71, 85, 105, 0.5)":"linear-gradient(135deg, #3b82f6, #8b5cf6)",border:"none",borderRadius:"8px",color:s===L.length-1?"rgba(255,255,255,0.3)":"white",cursor:s===L.length-1?"not-allowed":"pointer",fontSize:"0.95rem",fontWeight:500},children:["Next ",u.jsx(L$,{size:20})]})]})]})})]})]})}function _P(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Mie(t){if(Array.isArray(t))return t}function Fie(t,e,n){return(e=Hie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,s=f}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}function Uie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function zP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DP(Object(n),!0).forEach(function(r){Fie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wie(t,e){if(t==null)return{};var n,r,s=Vie(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Vie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function qie(t,e){return Mie(t)||Bie(t,e)||Kie(t,e)||Uie()}function Gie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hie(t){var e=Gie(t,"string");return typeof e=="symbol"?e:e+""}function Kie(t,e){if(t){if(typeof t=="string")return _P(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_P(t,e):void 0}}function Xie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function LP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PP(Object(n),!0).forEach(function(r){Xie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yie(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(s,a){return a(s)},r)}}function my(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.length>=t.length?t.apply(this,s):function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e.apply(n,[].concat(s,o))}}}function tw(t){return{}.toString.call(t).includes("Object")}function Qie(t){return!Object.keys(t).length}function Ry(t){return typeof t=="function"}function Zie(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jie(t,e){return tw(e)||vu("changeType"),Object.keys(e).some(function(n){return!Zie(t,n)})&&vu("changeField"),e}function eoe(t){Ry(t)||vu("selectorType")}function toe(t){Ry(t)||tw(t)||vu("handlerType"),tw(t)&&Object.values(t).some(function(e){return!Ry(e)})&&vu("handlersType")}function noe(t){t||vu("initialIsRequired"),tw(t)||vu("initialType"),Qie(t)&&vu("initialContent")}function roe(t,e){throw new Error(t[e]||t.default)}var soe={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},vu=my(roe)(soe),Wv={changes:Jie,selector:eoe,handler:toe,initial:noe};function aoe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wv.initial(t),Wv.handler(e);var n={current:t},r=my(loe)(n,e),s=my(ooe)(n),a=my(Wv.changes)(t),i=my(ioe)(n);function o(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(f){return f};return Wv.selector(c),c(n.current)}function l(c){Yie(r,s,a,i)(c)}return[o,l]}function ioe(t,e){return Ry(e)?e(t.current):e}function ooe(t,e){return t.current=LP(LP({},t.current),e),e}function loe(t,e,n){return Ry(e)?e(t.current):Object.keys(n).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,t.current[r])}),n}var coe={create:aoe},uoe={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function doe(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.length>=t.length?t.apply(this,s):function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e.apply(n,[].concat(s,o))}}}function foe(t){return{}.toString.call(t).includes("Object")}function hoe(t){return t||MP("configIsRequired"),foe(t)||MP("configType"),t.urls?(poe(),{paths:{vs:t.urls.monacoBase}}):t}function poe(){console.warn(jW.deprecation)}function moe(t,e){throw new Error(t[e]||t.default)}var jW={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},MP=doe(moe)(jW),goe={config:hoe},yoe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(s){return n.reduceRight(function(a,i){return i(a)},s)}};function $W(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],$W(t[n],e[n]))}),zP(zP({},t),e)}var boe={type:"cancelation",msg:"operation is manually canceled"};function bE(t){var e=!1,n=new Promise(function(r,s){t.then(function(a){return e?s(boe):r(a)}),t.catch(s)});return n.cancel=function(){return e=!0},n}var xoe=["monaco"],voe=coe.create({config:uoe,isInitialized:!1,resolve:null,reject:null,monaco:null}),RW=qie(voe,2),C0=RW[0],zS=RW[1];function woe(t){var e=goe.config(t),n=e.monaco,r=Wie(e,xoe);zS(function(s){return{config:$W(s.config,r),monaco:n}})}function Soe(){var t=C0(function(e){var n=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:n,isInitialized:r,resolve:s}});if(!t.isInitialized){if(zS({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),bE(xE);if(window.monaco&&window.monaco.editor)return OW(window.monaco),t.resolve(window.monaco),bE(xE);yoe(Coe,Noe)(Toe)}return bE(xE)}function Coe(t){return document.body.appendChild(t)}function koe(t){var e=document.createElement("script");return t&&(e.src=t),e}function Noe(t){var e=C0(function(r){var s=r.config,a=r.reject;return{config:s,reject:a}}),n=koe("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function Toe(){var t=C0(function(n){var r=n.config,s=n.resolve,a=n.reject;return{config:r,resolve:s,reject:a}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var r=n.m||n;OW(r),t.resolve(r)},function(n){t.reject(n)})}function OW(t){C0().monaco||zS({monaco:t})}function Eoe(){return C0(function(t){var e=t.monaco;return e})}var xE=new Promise(function(t,e){return zS({resolve:t,reject:e})}),_W={config:woe,init:Soe,__getMonacoInstance:Eoe},Ioe={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},vE=Ioe,Aoe={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},joe=Aoe;function $oe({children:t}){return xu.createElement("div",{style:joe.container},t)}var Roe=$oe,Ooe=Roe;function _oe({width:t,height:e,isEditorReady:n,loading:r,_ref:s,className:a,wrapperProps:i}){return xu.createElement("section",{style:{...vE.wrapper,width:t,height:e},...i},!n&&xu.createElement(Ooe,null,r),xu.createElement("div",{ref:s,style:{...vE.fullWidth,...!n&&vE.hide},className:a}))}var Doe=_oe,DW=T.memo(Doe);function zoe(t){T.useEffect(t,[])}var zW=zoe;function Poe(t,e,n=!0){let r=T.useRef(!0);T.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var li=Poe;function Ty(){}function Uh(t,e,n,r){return Loe(t,r)||Moe(t,e,n,r)}function Loe(t,e){return t.editor.getModel(PW(t,e))}function Moe(t,e,n,r){return t.editor.createModel(e,n,r?PW(t,r):void 0)}function PW(t,e){return t.Uri.parse(e)}function Foe({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:s,originalModelPath:a,modifiedModelPath:i,keepCurrentOriginalModel:o=!1,keepCurrentModifiedModel:l=!1,theme:c="light",loading:f="Loading...",options:p={},height:m="100%",width:y="100%",className:b,wrapperProps:v={},beforeMount:x=Ty,onMount:S=Ty}){let[C,E]=T.useState(!1),[k,I]=T.useState(!0),$=T.useRef(null),_=T.useRef(null),z=T.useRef(null),L=T.useRef(S),R=T.useRef(x),D=T.useRef(!1);zW(()=>{let Y=_W.init();return Y.then(B=>(_.current=B)&&I(!1)).catch(B=>B?.type!=="cancelation"&&console.error("Monaco initialization: error:",B)),()=>$.current?V():Y.cancel()}),li(()=>{if($.current&&_.current){let Y=$.current.getOriginalEditor(),B=Uh(_.current,t||"",r||n||"text",a||"");B!==Y.getModel()&&Y.setModel(B)}},[a],C),li(()=>{if($.current&&_.current){let Y=$.current.getModifiedEditor(),B=Uh(_.current,e||"",s||n||"text",i||"");B!==Y.getModel()&&Y.setModel(B)}},[i],C),li(()=>{let Y=$.current.getModifiedEditor();Y.getOption(_.current.editor.EditorOption.readOnly)?Y.setValue(e||""):e!==Y.getValue()&&(Y.executeEdits("",[{range:Y.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),Y.pushUndoStop())},[e],C),li(()=>{$.current?.getModel()?.original.setValue(t||"")},[t],C),li(()=>{let{original:Y,modified:B}=$.current.getModel();_.current.editor.setModelLanguage(Y,r||n||"text"),_.current.editor.setModelLanguage(B,s||n||"text")},[n,r,s],C),li(()=>{_.current?.editor.setTheme(c)},[c],C),li(()=>{$.current?.updateOptions(p)},[p],C);let U=T.useCallback(()=>{if(!_.current)return;R.current(_.current);let Y=Uh(_.current,t||"",r||n||"text",a||""),B=Uh(_.current,e||"",s||n||"text",i||"");$.current?.setModel({original:Y,modified:B})},[n,e,s,t,r,a,i]),X=T.useCallback(()=>{!D.current&&z.current&&($.current=_.current.editor.createDiffEditor(z.current,{automaticLayout:!0,...p}),U(),_.current?.editor.setTheme(c),E(!0),D.current=!0)},[p,c,U]);T.useEffect(()=>{C&&L.current($.current,_.current)},[C]),T.useEffect(()=>{!k&&!C&&X()},[k,C,X]);function V(){let Y=$.current?.getModel();o||Y?.original?.dispose(),l||Y?.modified?.dispose(),$.current?.dispose()}return xu.createElement(DW,{width:y,height:m,isEditorReady:C,loading:f,_ref:z,className:b,wrapperProps:v})}var Boe=Foe;T.memo(Boe);function Uoe(t){let e=T.useRef();return T.useEffect(()=>{e.current=t},[t]),e.current}var Woe=Uoe,Vv=new Map;function Voe({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:s,path:a,theme:i="light",line:o,loading:l="Loading...",options:c={},overrideServices:f={},saveViewState:p=!0,keepCurrentModel:m=!1,width:y="100%",height:b="100%",className:v,wrapperProps:x={},beforeMount:S=Ty,onMount:C=Ty,onChange:E,onValidate:k=Ty}){let[I,$]=T.useState(!1),[_,z]=T.useState(!0),L=T.useRef(null),R=T.useRef(null),D=T.useRef(null),U=T.useRef(C),X=T.useRef(S),V=T.useRef(),Y=T.useRef(r),B=Woe(a),Z=T.useRef(!1),J=T.useRef(!1);zW(()=>{let W=_W.init();return W.then(Q=>(L.current=Q)&&z(!1)).catch(Q=>Q?.type!=="cancelation"&&console.error("Monaco initialization: error:",Q)),()=>R.current?ee():W.cancel()}),li(()=>{let W=Uh(L.current,t||r||"",e||s||"",a||n||"");W!==R.current?.getModel()&&(p&&Vv.set(B,R.current?.saveViewState()),R.current?.setModel(W),p&&R.current?.restoreViewState(Vv.get(a)))},[a],I),li(()=>{R.current?.updateOptions(c)},[c],I),li(()=>{!R.current||r===void 0||(R.current.getOption(L.current.editor.EditorOption.readOnly)?R.current.setValue(r):r!==R.current.getValue()&&(J.current=!0,R.current.executeEdits("",[{range:R.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),R.current.pushUndoStop(),J.current=!1))},[r],I),li(()=>{let W=R.current?.getModel();W&&s&&L.current?.editor.setModelLanguage(W,s)},[s],I),li(()=>{o!==void 0&&R.current?.revealLine(o)},[o],I),li(()=>{L.current?.editor.setTheme(i)},[i],I);let ae=T.useCallback(()=>{if(!(!D.current||!L.current)&&!Z.current){X.current(L.current);let W=a||n,Q=Uh(L.current,r||t||"",e||s||"",W||"");R.current=L.current?.editor.create(D.current,{model:Q,automaticLayout:!0,...c},f),p&&R.current.restoreViewState(Vv.get(W)),L.current.editor.setTheme(i),o!==void 0&&R.current.revealLine(o),$(!0),Z.current=!0}},[t,e,n,r,s,a,c,f,p,i,o]);T.useEffect(()=>{I&&U.current(R.current,L.current)},[I]),T.useEffect(()=>{!_&&!I&&ae()},[_,I,ae]),Y.current=r,T.useEffect(()=>{I&&E&&(V.current?.dispose(),V.current=R.current?.onDidChangeModelContent(W=>{J.current||E(R.current.getValue(),W)}))},[I,E]),T.useEffect(()=>{if(I){let W=L.current.editor.onDidChangeMarkers(Q=>{let se=R.current.getModel()?.uri;if(se&&Q.find(fe=>fe.path===se.path)){let fe=L.current.editor.getModelMarkers({resource:se});k?.(fe)}});return()=>{W?.dispose()}}return()=>{}},[I,k]);function ee(){V.current?.dispose(),m?p&&Vv.set(a,R.current.saveViewState()):R.current.getModel()?.dispose(),R.current.dispose()}return xu.createElement(DW,{width:y,height:b,isEditorReady:I,loading:l,_ref:D,className:v,wrapperProps:x})}var qoe=Voe,Goe=T.memo(qoe),Oy=Goe;const FP="https://mentor-hub-backend-tkil.onrender.com/api",Hoe={Python:"python",JavaScript:"javascript",Java:"java","C++":"cpp",SQL:"sql"},Koe={aptitude:{label:"Aptitude",icon:Zr},verbal:{label:"Verbal",icon:Wa},logical:{label:"Logical",icon:af},coding:{label:"Coding",icon:Yn},sql:{label:"SQL",icon:Eu}};function Xoe(t,e){const n=[...t];let r=n.length;const s=()=>(e=(e*9301+49297)%233280,e/233280);for(;r--;){const a=Math.floor(s()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function Yoe(t,e){let n=0;const r=`${t}-${e}`;for(let s=0;s<r.length;s++)n=(n<<5)-n+r.charCodeAt(s)|0;return Math.abs(n)}function Qoe({test:t,user:e,onClose:n,onComplete:r}){const[s,a]=T.useState(0),[i,o]=T.useState(0),[l,c]=T.useState({}),[f,p]=T.useState((t.duration||180)*60),[m,y]=T.useState(0),[b,v]=T.useState(!1),[x,S]=T.useState(""),[C,E]=T.useState(!1),[k,I]=T.useState(null),[$,_]=T.useState(!1),[z,L]=T.useState(null),R=T.useRef(null),D=T.useRef(l),U=T.useRef(m),X=T.useRef(f),V=t.proctoring||{},[Y,B]=T.useState(!1),[Z,J]=T.useState(!1),[ae,ee]=T.useState(null),[W,Q]=T.useState(!1),[se,fe]=T.useState(0),[Ne,_e]=T.useState(!1),[De,He]=T.useState(0),[he,Te]=T.useState(0),Me=T.useRef(null),ge=T.useRef(null),ct=T.useRef(null);T.useRef(null);const Ye=T.useRef(null),ft=T.useRef(0),Ke=T.useRef(0),Ct=T.useRef(0),kt=T.useMemo(()=>{const Pe=t.questionsBySection||{};return["aptitude","verbal","logical","coding","sql"].filter(Oe=>(Pe[Oe]&&Pe[Oe].length)>0)},[t.questionsBySection]),Wt=T.useMemo(()=>{const Pe=t.questionsBySection||{},Oe=Yoe(e.id,t.id),et=[];return kt.forEach(Rt=>{const nn=(Pe[Rt]||[]).map(rn=>({...rn,section:Rt}));et.push(...Xoe(nn,Oe+Rt.length))}),et},[t.questionsBySection,kt,e.id,t.id]),Kt=kt[s]||kt[0],jn=Wt.filter(Pe=>Pe.section===Kt),Nt=jn[i],sr=Wt.length;T.useEffect(()=>{D.current=l},[l]),T.useEffect(()=>{U.current=m},[m]),T.useEffect(()=>{X.current=f},[f]),T.useEffect(()=>((async()=>{try{await document.documentElement.requestFullscreen()}catch{}})(),()=>{document.fullscreenElement&&document.exitFullscreen().catch(()=>{})}),[]),T.useEffect(()=>{if(!(k||!sr))return R.current=setInterval(()=>{p(Pe=>Pe<=1?(clearInterval(R.current),fn(!0),0):Pe-1)},1e3),()=>clearInterval(R.current)},[k,sr]);const Zt=t.maxTabSwitches??3;T.useEffect(()=>{const Pe=()=>{document.hidden&&!k&&y(Oe=>{const et=Oe+1;return et>=Zt?(S(`Disqualified: max tab switches (${et}) exceeded.`),v(!0),setTimeout(()=>fn(!0),2e3)):(S(`Tab switch detected (${et}/${Zt}).`),v(!0),setTimeout(()=>v(!1),3e3)),et})};return document.addEventListener("visibilitychange",Pe),()=>document.removeEventListener("visibilitychange",Pe)},[k,Zt]),T.useEffect(()=>(V.enabled&&V.enableVideoAudio&&(async()=>{try{const Oe=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:320,height:240},audio:!0});ee(Oe),B(!0),J(!0),Me.current&&(Me.current.srcObject=Oe,Me.current.play().catch(()=>{})),V.detectCameraBlocking&&(ct.current=setInterval(lr,2e3))}catch(Oe){console.warn("Media access denied:",Oe),S("Camera/microphone access required for proctoring"),v(!0),setTimeout(()=>v(!1),5e3)}})(),()=>{ct.current&&clearInterval(ct.current),Ye.current&&clearInterval(Ye.current),ae&&ae.getTracks().forEach(Pe=>Pe.stop())}),[V.enabled,V.enableVideoAudio]);const lr=T.useCallback(()=>{if(!Me.current||!ge.current)return;const Pe=Me.current,Oe=ge.current,et=Oe.getContext("2d");Oe.width=Pe.videoWidth||320,Oe.height=Pe.videoHeight||240,et.drawImage(Pe,0,0,Oe.width,Oe.height);const nn=et.getImageData(0,0,Oe.width,Oe.height).data;let rn=0,Vr=Oe.width*Oe.height;for(let qe=0;qe<nn.length;qe+=4){const Ns=(nn[qe]+nn[qe+1]+nn[qe+2])/3;rn+=Ns}const Gs=rn/Vr<20;Gs&&!W?(Q(!0),fe(qe=>{const Ns=qe+1;return ft.current=Ns,S(` Camera blocked detected! (${Ns})`),v(!0),setTimeout(()=>v(!1),3e3),Ns})):!Gs&&W&&Q(!1)},[W]);T.useEffect(()=>{if(!V.enabled||!V.disableCopyPaste)return;const Pe=Rt=>{Rt.preventDefault(),Te(nn=>{const rn=nn+1;return Ct.current=rn,S(` Copy attempt blocked! (${rn})`),v(!0),setTimeout(()=>v(!1),2e3),rn})},Oe=Rt=>{Rt.preventDefault(),Te(nn=>{const rn=nn+1;return Ct.current=rn,S(` Paste attempt blocked! (${rn})`),v(!0),setTimeout(()=>v(!1),2e3),rn})},et=Rt=>Rt.preventDefault();return document.addEventListener("copy",Pe),document.addEventListener("paste",Oe),document.addEventListener("contextmenu",et),()=>{document.removeEventListener("copy",Pe),document.removeEventListener("paste",Oe),document.removeEventListener("contextmenu",et)}},[V.enabled,V.disableCopyPaste]),T.useEffect(()=>{ft.current=se},[se]),T.useEffect(()=>{Ke.current=De},[De]),T.useEffect(()=>{Ct.current=he},[he]);const ar=(Pe,Oe)=>{c(et=>({...et,[Pe]:Oe}))};T.useEffect(()=>{Nt&&(Nt.questionType==="coding"||Nt.questionType==="sql")&&l[Nt.id]===void 0&&Nt.starterCode&&c(Pe=>({...Pe,[Nt.id]:Nt.starterCode}))},[Nt?.id,Nt?.questionType,Nt?.starterCode]);const fn=async(Pe=!1)=>{if(!C&&!(!Pe&&sr>0&&Object.keys(l).length<sr&&!window.confirm(`You have ${sr-Object.keys(l).length} unanswered. Submit anyway?`))){E(!0),ae&&ae.getTracks().forEach(Oe=>Oe.stop()),ct.current&&clearInterval(ct.current),Ye.current&&clearInterval(Ye.current);try{const Oe=(t.duration||120)*60-X.current,et=await Ve.post(`${FP}/global-tests/${t.id}/submit`,{studentId:e.id,answers:D.current,timeSpent:Oe,tabSwitches:U.current,copyPasteAttempts:Ct.current,cameraBlockedCount:ft.current,phoneDetectionCount:Ke.current,proctoringEnabled:V.enabled||!1});I(et.data.submission),_(!0)}catch(Oe){alert(Oe.response?.data?.error||"Submit failed")}finally{E(!1)}}},cr=Pe=>{const Oe=Math.floor(Pe/60),et=Pe%60;return`${String(Oe).padStart(2,"0")}:${String(et).padStart(2,"0")}`},qs=Object.keys(l).length;if($&&k){const Pe=k.sectionScores||{};return u.jsx("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"auto"},children:u.jsxs("div",{style:{background:"rgba(30,41,59,0.95)",borderRadius:"24px",border:"1px solid rgba(139,92,246,0.3)",maxWidth:800,width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[u.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid rgba(139,92,246,0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("h2",{style:{margin:0,color:"white"},children:["Global Test Report  ",t.title]}),u.jsx("button",{type:"button",onClick:()=>{document.fullscreenElement&&document.exitFullscreen(),n(),r&&r(k)},style:{background:"rgba(71,85,105,0.5)",border:"none",borderRadius:8,padding:8,cursor:"pointer",color:"white"},children:u.jsx(Mr,{size:20})})]}),u.jsxs("div",{style:{padding:"2rem",overflowY:"auto"},children:[u.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap",justifyContent:"center"},children:[u.jsxs("div",{style:{padding:"1.25rem",background:k.status==="passed"?"rgba(16,185,129,0.1)":"rgba(239,68,68,0.1)",borderRadius:12,border:`1px solid ${k.status==="passed"?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`,textAlign:"center"},children:[u.jsxs("div",{style:{fontSize:"2rem",fontWeight:800,color:k.status==="passed"?"#10b981":"#ef4444"},children:[k.score??k.overallPercentage,"%"]}),u.jsx("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.6)"},children:k.status})]}),u.jsxs("div",{style:{padding:"1.25rem",background:"rgba(139,92,246,0.1)",borderRadius:12,border:"1px solid rgba(139,92,246,0.2)",textAlign:"center"},children:[u.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#8b5cf6"},children:[k.correctCount??0,"/",k.totalQuestions??0]}),u.jsx("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.6)"},children:"Correct"})]})]}),u.jsx("h3",{style:{margin:"0 0 1rem",color:"white"},children:"Section-wise"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.75rem"},children:Object.entries(Pe).map(([Oe,et])=>u.jsxs("div",{style:{padding:"1rem",background:"var(--bg-tertiary)",borderRadius:12,border:"1px solid var(--border-color)",textAlign:"center"},children:[u.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text)"},children:[et,"%"]}),u.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textTransform:"capitalize"},children:Oe})]},Oe))})]}),z&&u.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(15,23,42,0.5)",borderRadius:12,border:"1px solid rgba(139,92,246,0.2)"},children:[u.jsx("h4",{style:{margin:"0 0 0.5rem",color:"white"},children:"Recommendations"}),u.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"rgba(255,255,255,0.8)",fontSize:"0.9rem"},children:(z.recommendations||[]).map((Oe,et)=>u.jsx("li",{children:Oe},et))}),z.weaknesses?.length>0&&u.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.85rem",color:"rgba(255,255,255,0.6)"},children:["Focus on: ",z.weaknesses.join(", ")]})]}),u.jsxs("div",{style:{padding:"1rem 2rem",borderTop:"1px solid rgba(139,92,246,0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[!z&&u.jsx("button",{type:"button",onClick:()=>Ve.get(`${FP}/global-test-submissions/${k.id}/report`).then(Oe=>L(Oe.data)).catch(()=>{}),style:{padding:"0.5rem 1rem",borderRadius:8,border:"1px solid rgba(139,92,246,0.3)",background:"transparent",color:"#a78bfa",cursor:"pointer",fontSize:"0.9rem"},children:"View personalized report"}),u.jsx("button",{type:"button",className:"btn-create-new",onClick:()=>{n(),r&&r(k)},children:"Close"})]})]})})}if(Wt.length===0)return u.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[u.jsx("p",{children:"No questions in this test."}),u.jsx("button",{type:"button",className:"btn-create-new",onClick:n,children:"Close"})]});const ia=Nt?.options||[],de=Nt?l[Nt.id]:null,Fe=Nt?.questionType==="coding",Ze=Nt?.questionType==="sql",we=Fe||Ze?l[Nt?.id]??Nt?.starterCode??"":"";return u.jsxs("div",{style:{position:"fixed",inset:0,background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[b&&u.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,padding:"1rem 2rem",background:"#f59e0b",color:"#1f2937",textAlign:"center",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(un,{size:20}),u.jsx("span",{children:x})]}),u.jsxs("header",{style:{padding:"1rem 2rem",borderBottom:"1px solid rgba(139,92,246,0.2)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:u.jsx("div",{style:{display:"flex",gap:"0.25rem"},children:kt.map((Pe,Oe)=>u.jsx("button",{type:"button",onClick:()=>{a(Oe),o(0)},style:{padding:"0.5rem 0.75rem",borderRadius:8,border:"1px solid rgba(139,92,246,0.3)",background:s===Oe?"rgba(139,92,246,0.2)":"transparent",color:"white",cursor:"pointer",fontSize:"0.85rem"},children:Koe[Pe]?.label||Pe},Pe))})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[V.enabled&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[V.enableVideoAudio&&u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",background:Y?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",borderRadius:6},children:Y?u.jsx(iW,{size:14,color:"#10b981"}):u.jsx(A1,{size:14,color:"#ef4444"})}),V.trackTabSwitches&&m>0&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",background:"rgba(251,191,36,0.2)",borderRadius:6},children:[u.jsx(An,{size:14,color:"#fbbf24"}),u.jsx("span",{style:{fontSize:"0.75rem",color:"#fbbf24"},children:m})]}),W&&u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",background:"rgba(239,68,68,0.2)",borderRadius:6,animation:"pulse 1s infinite"},children:u.jsx(of,{size:14,color:"#ef4444"})})]}),u.jsxs("span",{style:{color:"rgba(255,255,255,0.8)",fontSize:"0.9rem"},children:[qs,"/",sr," answered"]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(139,92,246,0.2)",borderRadius:8},children:[u.jsx(vi,{size:18,color:"#a78bfa"}),u.jsx("span",{style:{fontVariantNumeric:"tabular-nums",color:"white",fontWeight:600},children:cr(f)})]}),V.enabled&&V.enableVideoAudio&&Y&&u.jsxs("div",{style:{position:"relative"},children:[u.jsx("video",{ref:Me,autoPlay:!0,muted:!0,playsInline:!0,style:{width:60,height:45,borderRadius:8,objectFit:"cover",border:W?"2px solid #ef4444":"2px solid #10b981"}}),W&&u.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(239,68,68,0.5)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(of,{size:16,color:"white"})})]})]}),u.jsx("canvas",{ref:ge,style:{display:"none"}})]}),u.jsx("main",{style:{flex:1,overflow:"auto",padding:"2rem"},children:u.jsxs("div",{style:{maxWidth:Fe||Ze?900:700,margin:"0 auto"},children:[u.jsxs("div",{style:{marginBottom:"1rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.5)",textTransform:"capitalize"},children:[Kt,"  Question ",i+1," of ",jn.length]}),u.jsx("div",{style:{marginBottom:"1.5rem",fontSize:"1.1rem",color:"white",lineHeight:1.6},children:Nt?.question}),Fe&&u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.7)",display:"block",marginBottom:"0.5rem"},children:"Write your code (run tests before submit)"}),u.jsx("div",{style:{border:"1px solid rgba(139,92,246,0.3)",borderRadius:12,overflow:"hidden",background:"rgba(15,23,42,0.8)"},children:u.jsx(Oy,{height:"320px",language:Hoe[Nt.testCases&&Nt.testCases.language?Nt.testCases.language:"Python"]||"python",value:we,onChange:Pe=>c(Oe=>({...Oe,[Nt.id]:Pe||""})),options:{minimap:!1,fontSize:14,scrollBeyondLastLine:!1},theme:"vs-dark"})})]}),Ze&&u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.7)",display:"block",marginBottom:"0.5rem"},children:"Write your SQL query"}),Nt.starterCode&&u.jsxs("details",{style:{marginBottom:"0.75rem"},children:[u.jsx("summary",{style:{cursor:"pointer",color:"rgba(255,255,255,0.6)",fontSize:"0.9rem"},children:"Schema"}),u.jsx("pre",{style:{background:"rgba(0,0,0,0.3)",padding:"1rem",borderRadius:8,fontSize:"0.8rem",overflow:"auto",maxHeight:180,color:"rgba(255,255,255,0.9)"},children:Nt.starterCode})]}),u.jsx("div",{style:{border:"1px solid rgba(139,92,246,0.3)",borderRadius:12,overflow:"hidden",background:"rgba(15,23,42,0.8)"},children:u.jsx(Oy,{height:"220px",language:"sql",value:we,onChange:Pe=>c(Oe=>({...Oe,[Nt.id]:Pe||""})),options:{minimap:!1,fontSize:14,scrollBeyondLastLine:!1},theme:"vs-dark"})})]}),!Fe&&!Ze&&u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:ia.map((Pe,Oe)=>u.jsx("button",{type:"button",onClick:()=>ar(Nt.id,Pe),style:{padding:"1rem 1.25rem",textAlign:"left",borderRadius:12,border:`2px solid ${de===Pe?"rgba(139,92,246,0.6)":"rgba(255,255,255,0.1)"}`,background:de===Pe?"rgba(139,92,246,0.15)":"rgba(255,255,255,0.03)",color:"white",cursor:"pointer",fontSize:"1rem"},children:Pe},Oe))})]})}),u.jsxs("footer",{style:{padding:"1rem 2rem",borderTop:"1px solid rgba(139,92,246,0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("button",{type:"button",onClick:()=>{if(i>0)o(Pe=>Pe-1);else if(s>0){const Pe=kt[s-1],Oe=Wt.filter(et=>et.section===Pe).length;a(s-1),o(Oe-1)}},style:{padding:"0.75rem 1.5rem",borderRadius:10,border:"1px solid rgba(139,92,246,0.3)",background:"transparent",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(QU,{size:20})," Previous"]}),u.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:jn.map((Pe,Oe)=>u.jsx("button",{type:"button",onClick:()=>o(Oe),style:{width:36,height:36,borderRadius:8,border:"1px solid rgba(139,92,246,0.3)",background:l[jn[Oe].id]?"rgba(139,92,246,0.3)":"transparent",color:"white",cursor:"pointer",fontSize:"0.85rem"},children:Oe+1},Oe))}),u.jsxs("button",{type:"button",onClick:()=>{i<jn.length-1?o(Pe=>Pe+1):s<kt.length-1&&(a(s+1),o(0))},style:{padding:"0.75rem 1.5rem",borderRadius:10,border:"1px solid rgba(139,92,246,0.3)",background:"transparent",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Next ",u.jsx(L$,{size:20})]})]}),u.jsx("div",{style:{padding:"1rem 2rem",background:"rgba(15,23,42,0.8)",borderTop:"1px solid rgba(139,92,246,0.2)",display:"flex",justifyContent:"center"},children:u.jsxs("button",{type:"button",onClick:()=>fn(!1),disabled:C,style:{padding:"1rem 2rem",borderRadius:12,border:"none",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",color:"white",fontWeight:600,cursor:C?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(kl,{size:20})," ",C?"Submitting...":"Submit Test"]})})]})}const Zoe="https://mentor-hub-backend-tkil.onrender.com/api";function K$({submission:t,onClose:e,isStudentView:n=!1}){const[r,s]=T.useState(!0),[a,i]=T.useState(null),[o,l]=T.useState(null);if(T.useEffect(()=>{t?.id&&Ve.get(`${Zoe}/aptitude-submissions/${t.id}`).then(f=>{i(f.data),s(!1)}).catch(f=>{console.error("Failed to load submission details:",f),l("Failed to load submission details"),s(!1)})},[t?.id]),!t)return null;const c=a||t;return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content",onClick:f=>f.stopPropagation(),style:{maxWidth:"950px",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[u.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid rgba(139, 92, 246, 0.2)"},children:[u.jsxs("div",{className:"modal-title-with-icon",children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:c.status==="passed"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Zr,{size:24,color:"white"})}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0},children:"Aptitude Test Report"}),u.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.9rem"},children:n?"Your Results":c.studentName})]})]}),u.jsx("button",{onClick:e,className:"modal-close",children:u.jsx(Mr,{size:20})})]}),u.jsx("div",{className:"modal-body",style:{flex:1,overflowY:"auto"},children:r?u.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{style:{color:"var(--text-muted)",marginTop:"1rem"},children:"Loading report details..."})]}):o?u.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[u.jsx(un,{size:48,color:"#ef4444",style:{marginBottom:"1rem"}}),u.jsx("p",{style:{color:"#ef4444"},children:o})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[u.jsx("h3",{style:{margin:0,color:"var(--primary)"},children:c.testTitle}),u.jsxs("p",{style:{color:"var(--text-muted)",margin:"0.5rem 0 0"},children:["Submitted: ",new Date(c.submittedAt).toLocaleString()]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:c.status==="passed"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"16px",border:`1px solid ${c.status==="passed"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[u.jsxs("div",{style:{textAlign:"center"},children:[u.jsxs("div",{style:{fontSize:"4rem",fontWeight:800,color:c.status==="passed"?"#10b981":"#ef4444",lineHeight:1},children:[c.score,"%"]}),u.jsx("div",{style:{color:"var(--text-muted)",marginTop:"0.5rem"},children:"Overall Score"})]}),u.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"12px",background:c.status==="passed"?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",border:`1px solid ${c.status==="passed"?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.status==="passed"?u.jsx(an,{size:28,color:"#10b981"}):u.jsx(Kr,{size:28,color:"#ef4444"}),u.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:c.status==="passed"?"#10b981":"#ef4444"},children:c.status==="passed"?"PASSED":"FAILED"})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(59, 130, 246, 0.2)",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#3b82f6"},children:c.totalQuestions||0}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Total Questions"})]}),u.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(16, 185, 129, 0.2)",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#10b981"},children:c.correctCount||0}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Correct"})]}),u.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(239, 68, 68, 0.2)",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#ef4444"},children:(c.totalQuestions||0)-(c.correctCount||0)}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Incorrect"})]}),u.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(245, 158, 11, 0.2)",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:(c.tabSwitches||0)>0?"#f59e0b":"#10b981"},children:c.tabSwitches||0}),u.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[u.jsx(un,{size:12,style:{marginRight:"4px",verticalAlign:"middle"}}),"Violations"]})]}),u.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(139, 92, 246, 0.2)",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#8b5cf6"},children:c.timeSpent?`${Math.floor(c.timeSpent/60)}m ${c.timeSpent%60}s`:"N/A"}),u.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[u.jsx(vi,{size:12,style:{marginRight:"4px",verticalAlign:"middle"}}),"Time Spent"]})]})]}),(c.tabSwitches||0)>0&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem 1.5rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"12px",border:"1px solid rgba(245, 158, 11, 0.3)",marginBottom:"2rem"},children:[u.jsx(un,{size:24,color:"#f59e0b"}),u.jsxs("div",{children:[u.jsx("strong",{style:{color:"#f59e0b"},children:"Tab Switch Violations Detected"}),u.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)",fontSize:"0.9rem"},children:["The student switched tabs/windows ",c.tabSwitches," time(s) during the test."]})]})]}),u.jsxs("div",{children:[u.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Xr,{size:18,color:"#8b5cf6"}),"Detailed Question Breakdown"]}),c.questionResults&&c.questionResults.length>0?u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:c.questionResults.map((f,p)=>u.jsxs("div",{style:{padding:"1.25rem",background:f.isCorrect?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",border:`1px solid ${f.isCorrect?"rgba(16, 185, 129, 0.25)":"rgba(239, 68, 68, 0.25)"}`,borderRadius:"12px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"1rem"},children:[u.jsx("span",{style:{minWidth:"28px",height:"28px",borderRadius:"50%",background:f.isCorrect?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:700,flexShrink:0},children:f.isCorrect?"":""}),u.jsxs("div",{style:{flex:1},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[u.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#8b5cf6",textTransform:"uppercase",letterSpacing:"0.05em"},children:["Question ",p+1]}),f.category&&u.jsx("span",{style:{fontSize:"0.7rem",padding:"0.2rem 0.6rem",background:"rgba(139, 92, 246, 0.2)",borderRadius:"20px",color:"#a78bfa"},children:f.category})]}),u.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:500,lineHeight:1.5},children:f.question})]})]}),u.jsxs("div",{style:{marginLeft:"2.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem 1rem",background:f.isCorrect?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:`1px solid ${f.isCorrect?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)",minWidth:"120px"},children:n?"Your Answer:":"Student Answer:"}),u.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:f.isCorrect?"#10b981":"#ef4444"},children:f.userAnswer||"(Not answered)"})]}),!f.isCorrect&&u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[u.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"var(--text-muted)",minWidth:"120px"},children:"Correct Answer:"}),u.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600,color:"#10b981"},children:f.correctAnswer})]}),f.explanation&&u.jsxs("div",{style:{padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.05)",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.15)"},children:[u.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#a78bfa",display:"block",marginBottom:"0.25rem"},children:" Explanation"}),u.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-muted)",lineHeight:1.5},children:f.explanation})]})]})]},p))}):u.jsxs("div",{style:{textAlign:"center",padding:"2rem",background:"rgba(71, 85, 105, 0.1)",borderRadius:"12px",color:"var(--text-muted)"},children:[u.jsx(Xr,{size:32,style:{opacity:.5,marginBottom:"0.5rem"}}),u.jsx("p",{style:{margin:0},children:"No question details available"})]})]})]})})]})})}const Joe=1e-7,ele=1e-4;class X${constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class PS{refCount(e){return Da("refCount")}incRef(e){return Da("incRef")}timerAvailable(){return!0}time(e){return Da("time")}read(e){return Da("read")}readSync(e){return Da("readSync")}readToGPU(e,n){return Da("readToGPU")}numDataIds(){return Da("numDataIds")}disposeData(e,n){return Da("disposeData")}write(e,n,r){return Da("write")}move(e,n,r,s,a){return Da("move")}createTensorFromGPUData(e,n,r){return Da("createTensorFromGPUData")}memory(){return Da("memory")}floatPrecision(){return Da("floatPrecision")}epsilon(){return this.floatPrecision()===32?Joe:ele}dispose(){return Da("dispose")}}function Da(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function Y$(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Zl(t,e,n)}function tle(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,Zl(t,n,r),Zl(e,n,r)}function Au(t,e,n){return Math.max(t,Math.min(e,n))}function LS(t){return t%2===0?t:t+1}function Zl(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function LW(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function nle(t,e){const n=Math.random();return e*n+(1-n)*t}function rle(t,e){let n=0;for(let r=0;r<t.length;r++){const s=Number(t[r])-Number(e[r]);n+=s*s}return n}function q(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function ys(t,e,n=""){q(Ft(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Rf(t){q(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Ee(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function sle(t){return t.length===0}function MW(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function Ft(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function cf(t){return t%1===0}function ale(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function nw(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function ile(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return Y$(e),e}function Yd(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function _A(t,e=s=>0,n,r){return new Promise((s,a)=>{let i=0;const o=()=>{if(t()){s();return}i++;const l=e(i);if(n!=null&&i>=n){a();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function Q$(t,e){let n=1,r=-1;for(let a=0;a<t.length;++a)if(t[a]>=0)n*=t[a];else if(t[a]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(t[a]<0)throw Error(`Shapes can not be < 0. Found ${t[a]} at dim ${a}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function Lt(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),q(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),q(t.every(r=>cf(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function xc(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||s?null:Lt(e,t).sort();let i=0;for(let o=0;o<t.length;++o){if(a!=null){if(a[i]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(a[i]==null||a[i]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),a[i]<=o&&i++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function ts(t,e){return ir(t,e)}function ir(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function FW(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function BW(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function Z$(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function _y(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function UW(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function tl(t){return typeof t=="string"||t instanceof String}function WW(t){return typeof t=="boolean"}function rw(t){return typeof t=="number"}function Of(t){return Array.isArray(t)?Of(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":rw(t)?"float32":tl(t)?"string":WW(t)?"bool":"float32"}function ju(t){return!!(t&&t.constructor&&t.call&&t.apply)}function sw(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function pt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function VW(t,e,n,r=!1){const s=new Array;if(e.length===1){const a=e[0]*(r?2:1);for(let i=0;i<a;i++)s[i]=n[t+i]}else{const a=e[0],i=e.slice(1),o=i.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<a;l++)s[l]=VW(t+l*o,i,n,r)}return s}function gi(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,a)=>s*a)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return VW(0,t,e,n)}function qW(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function MS(t,e){const n=gs(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function gs(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function J$(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return gi(t,new Float32Array(n));if(e==="int32")return gi(t,new Int32Array(n));if(e==="bool")return gi(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Xa(t){t.forEach(e=>{q(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function xo(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function _f(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function $u(t){return t&&t.then&&typeof t.then=="function"}const BP="tfjsflags";class GW{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ole,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(ye().getBool("IS_TEST")||ye().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];ye().getBool("IS_TEST")||ye().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if($u(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);BP in e&&e[BP].split(",").forEach(r=>{const[s,a]=r.split(":");this.urlFlags[s]=cle(s,a)})}}function ole(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(lle(e,r[0],r[1]),r.join("="))),e}function lle(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function cle(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function ye(){return eR}let eR=null;function ule(t){eR=t}let wE;function HW(){if(wE==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");wE=t}return wE}function dle(){const t=HW();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function tR(t,e){const n=dle();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const k0="Abs",jp="Acos",$p="Acosh",Df="Add",N0="AddN",FS="All",BS="Any",T0="ArgMax",E0="ArgMin",Rp="Asin",Op="Asinh",_p="Atan",Dp="Atanh",zp="Atan2",I0="AvgPool",US="AvgPoolGrad",A0="AvgPool3D",WS="AvgPool3DGrad",j0="BatchMatMul",$0="BatchToSpaceND",VS="Bincount",R0="BitwiseAnd",KW="BroadcastTo",qS="BroadcastArgs",Pp="Cast",Lp="Ceil",Mp="ClipByValue",GS="Complex",O0="ComplexAbs",_0="Concat",D0="Conv2D",HS="Conv2DBackpropFilter",z0="Conv2DBackpropInput",P0="Conv3D",KS="Conv3DBackpropFilterV2",XS="Conv3DBackpropInputV2",Fp="Cos",Bp="Cosh",YS="Cumprod",L0="Cumsum",QS="CropAndResize",ZS="DenseBincount",JS="DepthToSpace",M0="DepthwiseConv2dNative",e2="DepthwiseConv2dNativeBackpropFilter",t2="DepthwiseConv2dNativeBackpropInput",n2="Diag",F0="Dilation2D",aw="Dilation2DBackpropInput",iw="Dilation2DBackpropFilter",r2="Draw",Up="RealDiv",s2="Einsum",Wp="Elu",a2="EluGrad",Vp="Erf",B0="Equal",qp="Exp",U0="ExpandDims",Gp="Expm1",i2="FFT",o2="Fill",l2="FlipLeftRight",Hp="Floor",Kp="FloorDiv",W0="FusedBatchNorm",V0="GatherV2",c2="GatherNd",q0="Greater",Xp="GreaterEqual",Yp="Identity",u2="IFFT",d2="Imag",Qp="IsFinite",Zp="IsInf",Jp="IsNan",G0="LeakyRelu",H0="Less",K0="LessEqual",f2="LinSpace",em="Log",tm="Log1p",X0="LogicalAnd",Y0="LogicalNot",Q0="LogicalOr",fle="LogicalXor",XW="LogSoftmax",hle="LowerBound",Z0="LRN",h2="LRNGrad",ple="MatrixBandPart",J0="Max",nm="Maximum",eb="MaxPool",p2="MaxPoolGrad",tb="MaxPool3D",m2="MaxPool3DGrad",g2="MaxPoolWithArgmax",nb="Mean",rb="Min",rm="Minimum",sb="MirrorPad",sm="Mod",y2="Multinomial",am="Multiply",ab="Neg",ib="NotEqual",b2="NonMaxSuppressionV3",x2="NonMaxSuppressionV4",v2="NonMaxSuppressionV5",ob="OnesLike",lb="OneHot",cb="Pack",ub="PadV2",mle="Pool",im="Pow",db="Prelu",fb="Prod",w2="RaggedGather",S2="RaggedRange",C2="RaggedTensorToTensor",k2="Range",N2="Real",om="Reciprocal",lm="Relu",hb="Reshape",pb="ResizeNearestNeighbor",T2="ResizeNearestNeighborGrad",mb="ResizeBilinear",E2="ResizeBilinearGrad",cm="Relu6",gb="Reverse",um="Round",dm="Rsqrt",I2="ScatterNd",A2="TensorScatterUpdate",j2="SearchSorted",yb="Select",fm="Selu",bb="Slice",hm="Sin",pm="Sinh",mm="Sign",gm="Sigmoid",ym="Softplus",bm="Sqrt",xb="Sum",vb="SpaceToBatchND",wb="SplitV",Sb="Softmax",$2="SparseFillEmptyRows",R2="SparseReshape",O2="SparseSegmentMean",_2="SparseSegmentSum",D2="SparseToDense",xm="SquaredDifference",z2="Square",Cb="StaticRegexReplace",P2="StridedSlice",L2="StringNGrams",M2="StringSplit",F2="StringToHashBucketFast",vm="Sub",wm="Tan",Sm="Tanh",Cm="Tile",B2="TopK",U2="Transform",Qd="Transpose",W2="Unique",kb="Unpack",Nb="UnsortedSegmentSum",gle="UpperBound",Tb="ZerosLike",km="Step",ow="FromPixels",V2="RotateWithOffset",Dy="_FusedMatMul",zy="FusedConv2D",Py="FusedDepthwiseConv2D";function ci(...t){ye().getBool("IS_TEST")||ye().getBool("PROD")||console.warn(...t)}function yle(...t){ye().getBool("IS_TEST")||ye().getBool("PROD")||console.log(...t)}const np=tR("kernelRegistry",()=>new Map),Ly=tR("gradRegistry",()=>new Map);function My(t,e){const n=nR(t,e);return np.get(n)}function DA(t){return Ly.get(t)}function lw(t){const e=np.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[a,i]=s,[o]=a.split("_");o===t&&n.push(i)}return n}function q2(t){const{kernelName:e,backendName:n}=t,r=nR(e,n);np.has(r)&&ci(`The kernel '${e}' for backend '${n}' is already registered`),np.set(r,t)}function YW(t){const{kernelName:e}=t;Ly.has(e)&&ye().getBool("DEBUG")&&ci(`Overriding the gradient for '${e}'`),Ly.set(e,t)}function ble(t,e){const n=nR(t,e);if(!np.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);np.delete(n)}function xle(t){if(!Ly.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);Ly.delete(t)}function vle(t,e){lw(t).forEach(r=>{const s=Object.assign({},r,{backendName:e});q2(s)})}function nR(t,e){return`${e}_${t}`}function QW(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var SE,UP;function wle(){if(UP)return SE;UP=1,SE=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(R,D,U){this.low=R|0,this.high=D|0,this.unsigned=!!U}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(R){return(R&&R.__isLong__)===!0}e.isLong=n;var r={},s={};function a(R,D){var U,X,V;return D?(R>>>=0,(V=0<=R&&R<256)&&(X=s[R],X)?X:(U=o(R,(R|0)<0?-1:0,!0),V&&(s[R]=U),U)):(R|=0,(V=-128<=R&&R<128)&&(X=r[R],X)?X:(U=o(R,R<0?-1:0,!1),V&&(r[R]=U),U))}e.fromInt=a;function i(R,D){if(isNaN(R))return D?C:S;if(D){if(R<0)return C;if(R>=b)return _}else{if(R<=-v)return z;if(R+1>=v)return $}return R<0?i(-R,D).neg():o(R%y|0,R/y|0,D)}e.fromNumber=i;function o(R,D,U){return new e(R,D,U)}e.fromBits=o;var l=Math.pow;function c(R,D,U){if(R.length===0)throw Error("empty string");if(R==="NaN"||R==="Infinity"||R==="+Infinity"||R==="-Infinity")return S;if(typeof D=="number"?(U=D,D=!1):D=!!D,U=U||10,U<2||36<U)throw RangeError("radix");var X;if((X=R.indexOf("-"))>0)throw Error("interior hyphen");if(X===0)return c(R.substring(1),D,U).neg();for(var V=i(l(U,8)),Y=S,B=0;B<R.length;B+=8){var Z=Math.min(8,R.length-B),J=parseInt(R.substring(B,B+Z),U);if(Z<8){var ae=i(l(U,Z));Y=Y.mul(ae).add(i(J))}else Y=Y.mul(V),Y=Y.add(i(J))}return Y.unsigned=D,Y}e.fromString=c;function f(R,D){return typeof R=="number"?i(R,D):typeof R=="string"?c(R,D):o(R.low,R.high,typeof D=="boolean"?D:R.unsigned)}e.fromValue=f;var p=65536,m=1<<24,y=p*p,b=y*y,v=b/2,x=a(m),S=a(0);e.ZERO=S;var C=a(0,!0);e.UZERO=C;var E=a(1);e.ONE=E;var k=a(1,!0);e.UONE=k;var I=a(-1);e.NEG_ONE=I;var $=o(-1,2147483647,!1);e.MAX_VALUE=$;var _=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=_;var z=o(0,-2147483648,!1);e.MIN_VALUE=z;var L=e.prototype;return L.toInt=function(){return this.unsigned?this.low>>>0:this.low},L.toNumber=function(){return this.unsigned?(this.high>>>0)*y+(this.low>>>0):this.high*y+(this.low>>>0)},L.toString=function(D){if(D=D||10,D<2||36<D)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(z)){var U=i(D),X=this.div(U),V=X.mul(U).sub(this);return X.toString(D)+V.toInt().toString(D)}else return"-"+this.neg().toString(D);for(var Y=i(l(D,6),this.unsigned),B=this,Z="";;){var J=B.div(Y),ae=B.sub(J.mul(Y)).toInt()>>>0,ee=ae.toString(D);if(B=J,B.isZero())return ee+Z;for(;ee.length<6;)ee="0"+ee;Z=""+ee+Z}},L.getHighBits=function(){return this.high},L.getHighBitsUnsigned=function(){return this.high>>>0},L.getLowBits=function(){return this.low},L.getLowBitsUnsigned=function(){return this.low>>>0},L.getNumBitsAbs=function(){if(this.isNegative())return this.eq(z)?64:this.neg().getNumBitsAbs();for(var D=this.high!=0?this.high:this.low,U=31;U>0&&(D&1<<U)==0;U--);return this.high!=0?U+33:U+1},L.isZero=function(){return this.high===0&&this.low===0},L.eqz=L.isZero,L.isNegative=function(){return!this.unsigned&&this.high<0},L.isPositive=function(){return this.unsigned||this.high>=0},L.isOdd=function(){return(this.low&1)===1},L.isEven=function(){return(this.low&1)===0},L.equals=function(D){return n(D)||(D=f(D)),this.unsigned!==D.unsigned&&this.high>>>31===1&&D.high>>>31===1?!1:this.high===D.high&&this.low===D.low},L.eq=L.equals,L.notEquals=function(D){return!this.eq(D)},L.neq=L.notEquals,L.ne=L.notEquals,L.lessThan=function(D){return this.comp(D)<0},L.lt=L.lessThan,L.lessThanOrEqual=function(D){return this.comp(D)<=0},L.lte=L.lessThanOrEqual,L.le=L.lessThanOrEqual,L.greaterThan=function(D){return this.comp(D)>0},L.gt=L.greaterThan,L.greaterThanOrEqual=function(D){return this.comp(D)>=0},L.gte=L.greaterThanOrEqual,L.ge=L.greaterThanOrEqual,L.compare=function(D){if(n(D)||(D=f(D)),this.eq(D))return 0;var U=this.isNegative(),X=D.isNegative();return U&&!X?-1:!U&&X?1:this.unsigned?D.high>>>0>this.high>>>0||D.high===this.high&&D.low>>>0>this.low>>>0?-1:1:this.sub(D).isNegative()?-1:1},L.comp=L.compare,L.negate=function(){return!this.unsigned&&this.eq(z)?z:this.not().add(E)},L.neg=L.negate,L.add=function(D){n(D)||(D=f(D));var U=this.high>>>16,X=this.high&65535,V=this.low>>>16,Y=this.low&65535,B=D.high>>>16,Z=D.high&65535,J=D.low>>>16,ae=D.low&65535,ee=0,W=0,Q=0,se=0;return se+=Y+ae,Q+=se>>>16,se&=65535,Q+=V+J,W+=Q>>>16,Q&=65535,W+=X+Z,ee+=W>>>16,W&=65535,ee+=U+B,ee&=65535,o(Q<<16|se,ee<<16|W,this.unsigned)},L.subtract=function(D){return n(D)||(D=f(D)),this.add(D.neg())},L.sub=L.subtract,L.multiply=function(D){if(this.isZero())return S;if(n(D)||(D=f(D)),t){var U=t.mul(this.low,this.high,D.low,D.high);return o(U,t.get_high(),this.unsigned)}if(D.isZero())return S;if(this.eq(z))return D.isOdd()?z:S;if(D.eq(z))return this.isOdd()?z:S;if(this.isNegative())return D.isNegative()?this.neg().mul(D.neg()):this.neg().mul(D).neg();if(D.isNegative())return this.mul(D.neg()).neg();if(this.lt(x)&&D.lt(x))return i(this.toNumber()*D.toNumber(),this.unsigned);var X=this.high>>>16,V=this.high&65535,Y=this.low>>>16,B=this.low&65535,Z=D.high>>>16,J=D.high&65535,ae=D.low>>>16,ee=D.low&65535,W=0,Q=0,se=0,fe=0;return fe+=B*ee,se+=fe>>>16,fe&=65535,se+=Y*ee,Q+=se>>>16,se&=65535,se+=B*ae,Q+=se>>>16,se&=65535,Q+=V*ee,W+=Q>>>16,Q&=65535,Q+=Y*ae,W+=Q>>>16,Q&=65535,Q+=B*J,W+=Q>>>16,Q&=65535,W+=X*ee+V*ae+Y*J+B*Z,W&=65535,o(se<<16|fe,W<<16|Q,this.unsigned)},L.mul=L.multiply,L.divide=function(D){if(n(D)||(D=f(D)),D.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&D.low===-1&&D.high===-1)return this;var U=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,D.low,D.high);return o(U,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?C:S;var X,V,Y;if(this.unsigned){if(D.unsigned||(D=D.toUnsigned()),D.gt(this))return C;if(D.gt(this.shru(1)))return k;Y=C}else{if(this.eq(z)){if(D.eq(E)||D.eq(I))return z;if(D.eq(z))return E;var B=this.shr(1);return X=B.div(D).shl(1),X.eq(S)?D.isNegative()?E:I:(V=this.sub(D.mul(X)),Y=X.add(V.div(D)),Y)}else if(D.eq(z))return this.unsigned?C:S;if(this.isNegative())return D.isNegative()?this.neg().div(D.neg()):this.neg().div(D).neg();if(D.isNegative())return this.div(D.neg()).neg();Y=S}for(V=this;V.gte(D);){X=Math.max(1,Math.floor(V.toNumber()/D.toNumber()));for(var Z=Math.ceil(Math.log(X)/Math.LN2),J=Z<=48?1:l(2,Z-48),ae=i(X),ee=ae.mul(D);ee.isNegative()||ee.gt(V);)X-=J,ae=i(X,this.unsigned),ee=ae.mul(D);ae.isZero()&&(ae=E),Y=Y.add(ae),V=V.sub(ee)}return Y},L.div=L.divide,L.modulo=function(D){if(n(D)||(D=f(D)),t){var U=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,D.low,D.high);return o(U,t.get_high(),this.unsigned)}return this.sub(this.div(D).mul(D))},L.mod=L.modulo,L.rem=L.modulo,L.not=function(){return o(~this.low,~this.high,this.unsigned)},L.and=function(D){return n(D)||(D=f(D)),o(this.low&D.low,this.high&D.high,this.unsigned)},L.or=function(D){return n(D)||(D=f(D)),o(this.low|D.low,this.high|D.high,this.unsigned)},L.xor=function(D){return n(D)||(D=f(D)),o(this.low^D.low,this.high^D.high,this.unsigned)},L.shiftLeft=function(D){return n(D)&&(D=D.toInt()),(D&=63)===0?this:D<32?o(this.low<<D,this.high<<D|this.low>>>32-D,this.unsigned):o(0,this.low<<D-32,this.unsigned)},L.shl=L.shiftLeft,L.shiftRight=function(D){return n(D)&&(D=D.toInt()),(D&=63)===0?this:D<32?o(this.low>>>D|this.high<<32-D,this.high>>D,this.unsigned):o(this.high>>D-32,this.high>=0?0:-1,this.unsigned)},L.shr=L.shiftRight,L.shiftRightUnsigned=function(D){if(n(D)&&(D=D.toInt()),D&=63,D===0)return this;var U=this.high;if(D<32){var X=this.low;return o(X>>>D|U<<32-D,U>>>D,this.unsigned)}else return D===32?o(U,0,this.unsigned):o(U>>>D-32,0,this.unsigned)},L.shru=L.shiftRightUnsigned,L.shr_u=L.shiftRightUnsigned,L.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},L.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},L.toBytes=function(D){return D?this.toBytesLE():this.toBytesBE()},L.toBytesLE=function(){var D=this.high,U=this.low;return[U&255,U>>>8&255,U>>>16&255,U>>>24,D&255,D>>>8&255,D>>>16&255,D>>>24]},L.toBytesBE=function(){var D=this.high,U=this.low;return[D>>>24,D>>>16&255,D>>>8&255,D&255,U>>>24,U>>>16&255,U>>>8&255,U&255]},e.fromBytes=function(D,U,X){return X?e.fromBytesLE(D,U):e.fromBytesBE(D,U)},e.fromBytesLE=function(D,U){return new e(D[0]|D[1]<<8|D[2]<<16|D[3]<<24,D[4]|D[5]<<8|D[6]<<16|D[7]<<24,U)},e.fromBytesBE=function(D,U){return new e(D[4]<<24|D[5]<<16|D[6]<<8|D[7],D[0]<<24|D[1]<<16|D[2]<<8|D[3],U)},SE}var ZW=wle();const JW=Ni(ZW),Sle=TU({__proto__:null,default:JW},[ZW]);const Pd=JW||Sle;function Eb(t){return Pd.fromString(t,!0,16)}const eV=Eb("c3a5c85c97cb3127"),$d=Eb("b492b66fbe98f273"),Qs=Eb("9ae16a3b2f90404f");function zA(t){return t.xor(t.shru(47))}function tV(t,e,n){const r=t.slice(e,e+n);return Pd.fromBytes(Array.from(r),!0,!0)}function _n(t,e){return tV(t,e,8)}function WP(t,e){return tV(t,e,4)}function Yr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function wu(t,e,n=Eb("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function Cle(t,e,n,r,s,a){s=s.add(t),a=Yr(a.add(s).add(r),21);const i=s;return s=s.add(e),s=s.add(n),a=a.add(Yr(s,44)),[s.add(r),a.add(i)]}function qv(t,e,n,r){return Cle(_n(t,e),_n(t,e+8),_n(t,e+16),_n(t,e+24),n,r)}function kle(t,e=t.length){if(e>=8){const n=Qs.add(e*2),r=_n(t,0).add(Qs),s=_n(t,e-8),a=Yr(s,37).mul(n).add(r),i=Yr(r,25).add(s).mul(n);return wu(a,i,n)}if(e>=4){const n=Qs.add(e*2),r=WP(t,0);return wu(r.shl(3).add(e),WP(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],a=n+(r<<8),i=e+(s<<2);return zA(Qs.mul(a).xor(eV.mul(i))).mul(Qs)}return Qs}function Nle(t,e=t.length){const n=Qs.add(e*2),r=_n(t,0).mul($d),s=_n(t,8),a=_n(t,e-8).mul(n),i=_n(t,e-16).mul(Qs);return wu(Yr(r.add(s),43).add(Yr(a,30)).add(i),r.add(Yr(s.add(Qs),18)).add(a),n)}function Tle(t,e=t.length){const n=Qs.add(e*2),r=_n(t,0).mul(Qs),s=_n(t,8),a=_n(t,e-8).mul(n),i=_n(t,e-16).mul(Qs),o=Yr(r.add(s),43).add(Yr(a,30)).add(i),l=wu(o,r.add(Yr(s.add(Qs),18)).add(a),n),c=_n(t,16).mul(n),f=_n(t,24),p=o.add(_n(t,e-32)).mul(n),m=l.add(_n(t,e-24)).mul(n);return wu(Yr(c.add(f),43).add(Yr(p,30)).add(m),c.add(Yr(f.add(r),18)).add(p),n)}function nV(t,e=t.length){const n=Pd.fromNumber(81,!0);if(e<=32)return e<=16?kle(t,e):Nle(t,e);if(e<=64)return Tle(t,e);let r=n,s=n.mul($d).add(113),a=zA(s.mul(Qs).add(113)).mul(Qs),i=[Pd.UZERO,Pd.UZERO],o=[Pd.UZERO,Pd.UZERO];r=r.mul(Qs).add(_n(t,0));let l=0;const c=(e-1>>6)*64,f=c+(e-1&63)-63;do r=Yr(r.add(s).add(i[0]).add(_n(t,l+8)),37).mul($d),s=Yr(s.add(i[1]).add(_n(t,l+48)),42).mul($d),r=r.xor(o[1]),s=s.add(i[0]).add(_n(t,l+40)),a=Yr(a.add(o[0]),33).mul($d),i=qv(t,l,i[1].mul($d),r.add(o[0])),o=qv(t,l+32,a.add(o[1]),s.add(_n(t,l+16))),[a,r]=[r,a],l+=64;while(l!==c);const p=$d.add(a.and(255).shl(1));return l=f,o[0]=o[0].add(e-1&63),i[0]=i[0].add(o[0]),o[0]=o[0].add(i[0]),r=Yr(r.add(s).add(i[0]).add(_n(t,l+8)),37).mul(p),s=Yr(s.add(i[1]).add(_n(t,l+48)),42).mul(p),r=r.xor(o[1].mul(9)),s=s.add(i[0].mul(9).add(_n(t,l+40))),a=Yr(a.add(o[0]),33).mul(p),i=qv(t,l,i[1].mul(p),r.add(o[0])),o=qv(t,l+32,a.add(o[1]),s.add(_n(t,l+16))),[a,r]=[r,a],wu(wu(i[0],o[0],p).add(zA(s).mul(eV)).add(a),wu(i[1],o[1],p).add(r),p)}function vc(t,e){return e==="string"?ol(t):Uu([t],e)}function Ele(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Uu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=hl(t)),ye().getBool("DEBUG")&&FW(t,e),Ele(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Xs(){return ye().platform.now()}function Ile(t,e){return ye().platform.fetch(t,e)}function ol(t,e="utf-8"){return e=e||"utf-8",ye().platform.encode(t,e)}function lc(t,e="utf-8"){return e=e||"utf-8",ye().platform.decode(t,e)}function Qr(t){return ye().platform.isTypedArray!=null?ye().platform.isTypedArray(t):QW(t)}function hl(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||$u(t)||t==null||Qr(t)&&n)e.push(t);else if(Array.isArray(t)||Qr(t))for(let r=0;r<t.length;++r)hl(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)hl(t[s],e,n)}return e}const Ale=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:Ft,arraysEqualWithNull:MW,assert:q,assertNonNegativeIntegerDimensions:Xa,assertNonNull:Rf,assertShapesMatch:ys,bytesFromStringArray:UW,bytesPerElement:_y,checkConversionForErrors:FW,clamp:Au,computeStrides:pt,convertBackendValuesAndArrayBuffer:qW,createScalarValue:vc,createShuffledIndices:ile,decodeString:lc,distSquared:rle,encodeString:ol,fetch:Ile,fingerPrint64:nV,flatten:hl,getArrayFromDType:ir,getTypedArrayFromDType:ts,hasEncodingLoss:Z$,hexToLong:Eb,indexToLoc:_f,inferDtype:Of,inferFromImplicitShape:Q$,isBoolean:WW,isFunction:ju,isInt:cf,isNumber:rw,isPromise:$u,isScalarShape:sle,isString:tl,isTypedArray:Qr,isValidDtype:BW,locToIndex:xo,makeOnesTypedArray:MS,makeZerosNestedTypedArray:J$,makeZerosTypedArray:gs,nearestDivisor:sw,nearestLargerEven:LS,now:Xs,parseAxisParam:Lt,randUniform:nle,repeatedTry:_A,rightPad:Yd,shuffle:Y$,shuffleCombo:tle,sizeFromShape:Ee,sizeToSquarishShape:nw,squeezeShape:xc,sum:LW,swap:Zl,tanh:ale,toNestedArray:gi,toTypedArray:Uu},Symbol.toStringTag,{value:"Module"}));class jle{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Rle)}profileKernel(e,n,r){let s;const a=()=>{s=r()};let i;const o=Xs();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(a);else{a();for(const c of s)c.dataSync();i=Promise.resolve({kernelMs:Xs()-o})}if(ye().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const f=s[c];f.data().then(p=>{$le(p,f.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:i.then(c=>c.kernelMs),extraInfo:i.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:a,extraInfo:i}=e;r.forEach(o=>{Promise.all([o.data(),s,i]).then(l=>{this.logger.logKernelProfile(n,o,l[0],l[1],a,l[2])})})}}function $le(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class Rle{logKernelProfile(e,n,r,s,a,i){const o=typeof s=="number"?Yd(`${s}ms`,9):s.error,l=Yd(e,25),c=n.rank,f=n.size,p=Yd(n.shape.toString(),14);let m="";for(const y in a){const b=a[y];if(b!=null){const v=b.shape||n.shape,x=v.length;m+=`${y}: ${x}D ${x>0?v:""} `}}console.log(`%c${l}	%c${o}	%c${c}D ${p}	%c${f}	%c${m}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function Ole(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],f=c.inputs;for(const p in f){const m=f[p];let y=!1;for(let b=0;b<e.length;b++)if(r[m.id]){c.outputs.forEach(v=>r[v.id]=!0),y=!0,s[c.id]=!0;break}if(y)break}}const a={};a[n.id]=!0;const i={};for(let l=t.length-1;l>=0;l--){const c=t[l],f=c.inputs;for(let p=0;p<c.outputs.length;p++)if(a[c.outputs[p].id]){for(const m in f)a[f[m].id]=!0,i[c.id]=!0;break}}const o=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&i[c.id]){const f={};for(const m in c.inputs){const y=c.inputs[m];r[y.id]&&(f[m]=y)}const p=Object.assign({},c);p.inputs=f,p.outputs=c.outputs,o.push(p)}}return o}function _le(t,e,n,r){for(let s=e.length-1;s>=0;s--){const a=e[s],i=[];if(a.outputs.forEach(l=>{const c=t[l.id];c!=null?i.push(c):i.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const o=a.gradient(i);for(const l in a.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const c=n(()=>o[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const f=a.inputs[l];if(!Ft(c.shape,f.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${f.shape}'`);if(t[f.id]==null)t[f.id]=c;else{const p=t[f.id];t[f.id]=r(p,c),p.dispose()}}}}const VP=20,ey=3,CE=7;function Dle(t,e,n,r){const s=pt(e),a=zle(t,e,n,s),i=e.length,o=O1(t,e,n,s,a),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(c=>"    "+c).join(`
`)),l.join(`
`)}function zle(t,e,n,r){const s=Ee(e),a=r[r.length-1],i=new Array(a).fill(0),o=e.length,l=n==="complex64"?yy(t):t;if(o>1)for(let c=0;c<s/a;c++){const f=c*a;for(let p=0;p<a;p++)i[p]=Math.max(i[p],gy(l[f+p],0,n).length)}return i}function gy(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(CE))} + ${parseFloat(t[1].toFixed(CE))}j`:tl(t)?r=`'${t}'`:n==="bool"?r=rV(t):r=parseFloat(t.toFixed(CE)).toString(),Yd(r,e)}function rV(t){return t===0?"false":"true"}function O1(t,e,n,r,s,a=!0){const i=n==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(n==="complex64"){const v=yy(t);return[gy(v[0],0,n)]}return n==="bool"?[rV(t[0])]:[t[0].toString()]}if(l===1){if(o>VP){const x=ey*i;let S=Array.from(t.slice(0,x)),C=Array.from(t.slice((o-ey)*i,o*i));return n==="complex64"&&(S=yy(S),C=yy(C)),["["+S.map((E,k)=>gy(E,s[k],n)).join(", ")+", ..., "+C.map((E,k)=>gy(E,s[o-ey+k],n)).join(", ")+"]"]}return["["+(n==="complex64"?yy(t):Array.from(t)).map((x,S)=>gy(x,s[S],n)).join(", ")+"]"]}const c=e.slice(1),f=r.slice(1),p=r[0]*i,m=[];if(o>VP){for(let v=0;v<ey;v++){const x=v*p,S=x+p;m.push(...O1(t.slice(x,S),c,n,f,s,!1))}m.push("...");for(let v=o-ey;v<o;v++){const x=v*p,S=x+p;m.push(...O1(t.slice(x,S),c,n,f,s,v===o-1))}}else for(let v=0;v<o;v++){const x=v*p,S=x+p;m.push(...O1(t.slice(x,S),c,n,f,s,v===o-1))}const y=l===2?",":"";m[0]="["+(o>0?m[0]+y:"");for(let v=1;v<m.length-1;v++)m[v]=" "+m[v]+y;let b=`,
`;for(let v=2;v<l;v++)b+=`
`;return m[m.length-1]=" "+m[m.length-1]+"]"+(a?"":b),m}function yy(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}class Ir{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Ee(e),r!=null){const s=r.length;q(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||ir(n,this.size),this.strides=pt(e)}set(e,...n){n.length===0&&(n=[0]),q(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const a=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(a)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return ho().makeTensor(this.values,this.shape,this.dtype)}}let ho=null,Lh=null;function Ple(t){ho=t}function Lle(t){Lh=t}class pn{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Ee(e),this.strides=pt(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Lh.buffer(this.shape,this.dtype,e)}bufferSync(){return Lh.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return gi(this.shape,e,this.dtype==="complex64")}arraySync(){return gi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=ho().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>lc(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ho().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ho().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>lc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ho().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ho().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Lh.print(this,e)}clone(){return this.throwIfDisposed(),Lh.clone(this)}toString(e=!1){const n=this.dataSync();return Dle(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Lh.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),ho().makeVariable(this,e,n,r)}}Object.defineProperty(pn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function je(){return tR("Tensor",()=>pn)}je();class Fy extends pn{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Ft(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);ho().disposeTensor(this),this.dataId=e.dataId,ho().incRef(this,null)}dispose(){ho().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Fy,Symbol.hasInstance,{value:t=>t instanceof pn&&t.assign!=null&&t.assign instanceof Function});var PA;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(PA||(PA={}));var LA;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(LA||(LA={}));var MA;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(MA||(MA={}));var FA;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(FA||(FA={}));var BA;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(BA||(BA={}));const Mle={float32:FA,int32:LA,bool:MA,complex64:BA};function ba(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Mle[t][e]}function G2(t){return ba(t,"int32")}function sV(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function aV(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}function tr(t,e){if(t.dtype===e.dtype)return[t,e];const n=ba(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function iV(t,e){q(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function Fle(t,e){return e.some(n=>n.id===t.id)}function rR(t){const e=[];return oV(t,e,new Set),e}function oV(t,e,n){if(t==null)return;if(t instanceof pn){e.push(t);return}if(!Ble(t))return;const r=t;for(const s in r){const a=r[s];n.has(a)||(n.add(a),oV(a,e,n))}}function Ble(t){return Array.isArray(t)||typeof t=="object"}const Ule=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:iV,getTensorsInContainer:rR,isTensorInList:Fle,makeTypesMatch:tr},Symbol.toStringTag,{value:"Module"}));function kE(t){return t.kernelName!=null}class qP{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class rp{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new qP}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(ci(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new jle(this.backendInstance),!0}setupRegisteredKernels(){lw(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){lw(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof PS)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,a=r.then(i=>s<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,ci(`Initialization of backend ${e} failed`),ci(i.stack||i.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return ci(`Initialization of backend ${e} failed`),ci(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:a}=this.initializeBackend(r);if(a||s)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,a=this.readSync(n),i=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,a,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return rp.nextTensorId++}nextVariableId(){return rp.nextVariableId++}clone(e){const n=te.runKernel(Yp,{x:e}),r={x:e},s=i=>({x:()=>{const o="float32",l={x:i},c={dtype:o};return te.runKernel(Pp,l,c)}}),a=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,a,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(My(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let a=0;r.forEach(l=>{a+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=s-n-a-i;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),a=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const c=kE(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(kE(e)){const{kernelName:b,inputs:v,attrs:x}=e;this.backendName==null&&this.backend;const S=My(b,this.backendName);q(S!=null,()=>`Cannot find registered kernel '${b}' for backend '${this.backendName}'`),o=()=>{const C=this.backend.numDataIds();l=S.kernelFunc({inputs:v,attrs:x,backend:this.backend});const E=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(b,C,E);const k=E.map(I=>I.rank!=null?I:this.makeTensorFromTensorInfo(I));if(s){const I=this.getTensorsForGradient(b,v,k);r=this.saveTensorsForBackwardMode(I)}return k}}else{const{forwardFunc:b}=e,v=x=>{s&&(r=x.map(S=>this.keep(this.clone(S))))};o=()=>{const x=this.backend.numDataIds();l=this.tidy(()=>b(this.backend,v));const S=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,x,S),S}}const{inputs:f,attrs:p}=e,m=kE(e)?null:e.backwardsFunc;let y;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(y=this.profiler.profileKernel(c,f,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(y),n=y.outputs)}),s&&this.addTapeNode(c,f,n,m,r,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(f).map(b=>f[b]!=null?f[b].shape:null),outputShapes:n.map(b=>b.shape),kernelTimeMs:y.timeMs,extraInfo:y.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=DA(e);if(s!=null){const a=s.inputsToSave||[],i=s.outputsToSave||[];let o;s.saveAllInputs?(q(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(c=>n[c])):o=a.map(c=>n[c]);const l=r.filter((c,f)=>i[f]);return o.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let a=e;r==="string"&&tl(e[0])&&(a=e.map(l=>ol(l)));const i=s.write(a,n,r),o=new pn(n,r,i,this.nextTensorId());if(this.trackTensor(o,s),r==="string"){const l=this.state.tensorInfo.get(i),c=UW(a);this.state.numBytes+=c-l.bytes,l.bytes=c}return o}makeTensorFromDataId(e,n,r,s){r=r||"float32";const a={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(a,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:a}=e,i=new pn(s,a,r,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const a=new Fy(e,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*_y(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Fy||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*_y(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,a,i){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:a},l=DA(e);l!=null&&(s=l.gradFunc),s!=null&&(o.gradient=c=>(c=c.map((f,p)=>{if(f==null){const m=r[p],y=gs(m.size,m.dtype);return this.makeTensor(y,m.shape,m.dtype)}return f}),s(c.length>1?c:c[0],a,i))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=rR(e),r=new Set(n.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const i=this.state.activeScope.track[a];!i.kept&&!r.has(i.id)&&i.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(a=>{!a.kept&&a.scopeId===s.id&&this.track(a)})}gradients(e,n,r,s=!1){if(q(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));q(a instanceof pn,()=>"The result y returned by f() must be a tensor.");const i=Ole(this.state.activeTape,n,a);if(!s&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[a.id]=r??Wle(a.shape),_le(o,i,c=>this.tidy(c),Vle);const l=n.map(c=>o[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const f of c.saved)f.dispose()}),this.state.activeTape=null),{value:a,grads:l}})}customGrad(e){return q(ju(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{q(n.every(o=>o instanceof pn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((o,l)=>{s[l]=o});const a=(o,l)=>(r=e(...n,l),q(r.value instanceof pn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),q(ju(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(o,l)=>{const c=r.gradFunc(o,l),f=Array.isArray(c)?c:[c];q(f.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),q(f.every(m=>m instanceof pn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const p={};return f.forEach((m,y)=>{p[y]=()=>m}),p};return this.runKernelFunc({forwardFunc:a,backwardsFunc:i,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Xs(),r=await this.backend.time(e);return r.wallMs=Xs()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new qP;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}rp.nextTensorId=0;rp.nextVariableId=0;function Wle(t){const e=MS(Ee(t),"float32");return te.makeTensor(e,t,"float32")}function lV(){const t=HW();if(t._tfengine==null){const e=new GW(t);t._tfengine=new rp(e)}return ule(t._tfengine.ENV),Ple(()=>t._tfengine),t._tfengine}const te=lV();function Vle(t,e){const n={a:t,b:e};return te.runKernel(Df,n)}function qle(){return typeof navigator<"u"&&navigator!=null}let UA;function Gle(t){UA=t}function sR(t){if(UA!==void 0)return UA;if(t||qle()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function aR(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const Hle=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:aR,isMobile:sR,mockIsMobile:Gle},Symbol.toStringTag,{value:"Module"}));const xa=ye();xa.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});xa.registerFlag("IS_BROWSER",()=>aR());xa.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");xa.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));xa.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));xa.registerFlag("PROD",()=>!1);xa.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>xa.getBool("DEBUG"));xa.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);xa.registerFlag("IS_TEST",()=>!1);xa.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>xa.getBool("DEBUG"));xa.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);xa.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);xa.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function pl(t,e){let n=t;if(Qr(t))return e==="string"?[]:[t.length];if(sV(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(aV(t))return[t.buffer.size/(e==null?4:_y(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Qr(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&ye().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&cV(t,r,[]),r}function cV(t,e,n){if(n=n||[],!Array.isArray(t)&&!Qr(t)){q(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}q(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),q(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)cV(t[s],r,n.concat(s))}function GP(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function G(t,e,n,r="numeric"){if(t instanceof je())return GP(r,t.dtype,e,n),t;let s=Of(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),GP(r,s,e,n),t==null||!Qr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const a=pl(t,s);!Qr(t)&&!Array.isArray(t)&&(t=[t]);const o=s!=="string"?Uu(t,s):hl(t,[],!0);return te.makeTensor(o,a,s)}function By(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((a,i)=>G(a,`${e}[${i}]`,n,r))}const iR="__op";function ne(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+iR;const s=(...a)=>{te.startScope(n);try{const i=r(...a);return $u(i)&&console.error("Cannot return a Promise inside of tidy."),te.endScope(i),i}catch(i){throw te.endScope(null),i}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}function Kle(t,e){const n=G(t,"real","complex"),r=G(e,"imag","complex");ys(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return te.runKernel(GS,s)}const cc=ne({complex_:Kle});function Wu(t,e,n,r){if(r==null)r=Of(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(aV(t)||sV(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return te.backend.createTensorFromGPUData(t,e||n,r)}if(!Qr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Xa(e);const s=Ee(e),a=Ee(n);q(s===a,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${a}`);for(let i=0;i<n.length;++i){const o=n[i],l=i===n.length-1?o!==Ee(e.slice(i)):!0;q(n[i]===e[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Qr(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Uu(t,r):hl(t,[],!0),te.makeTensor(t,e,r)}function Ki(t,e,n){const r=pl(t,n);return Wu(t,e,r,n)}const uf={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class $o{static join(e){return new $o(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Qr(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=n+s.byteLength;this.shards.push({buffer:s,start:n,end:a}),n=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,a=new ArrayBuffer(s),i=new Uint8Array(a);let o=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],p=e+o-c.start,m=o,b=Math.min(n,c.end)-c.start,v=new Uint8Array(c.buffer,p,b-p);if(i.set(v,m),o+=v.length,n<c.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Xle(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Xle(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,a=e(t[s]);if(a===0)return s;a<0?r=s:n=s+1}return-1}function Yle(){ye().set("PROD",!0)}function Qle(){ye().set("DEBUG",!0)}function Zle(){ye().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Jle(t){ye().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function ece(){te.disposeVariables()}function fo(){return te}function WA(){return te.memory()}function tce(t){return te.profile(t)}function me(t,e){return te.tidy(t,e)}function Pt(t){rR(t).forEach(n=>n.dispose())}function Dr(t){return te.keep(t)}function nce(t){return te.time(t)}function rce(t){return te.setBackend(t)}function uV(){return te.ready()}function dV(){return te.backendName}function sce(t){te.removeBackend(t)}function ace(t){return te.findBackend(t)}function ice(t){return te.findBackendFactory(t)}function oR(t,e,n=1){return te.registerBackend(t,e,n)}function lR(){return te.backend}function oce(t,e){ye().setPlatform(t,e)}const Ru=4;async function VA(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<s.length;++i){const o=s[i],l=Array.isArray(t)?t[i].tensor:t[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const c={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const f=new Promise(async p=>{const m=await l.bytes(),y=m.reduce((x,S)=>x+S.length,0)+Ru*m.length,b=new Uint8Array(y);let v=0;for(let x=0;x<m.length;x++){const S=m[x],C=new Uint8Array(new Uint32Array([S.length]).buffer);b.set(C,v),v+=Ru,b.set(S,v),v+=S.length}p(b)});r.push(f)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const a=await Promise.all(r);return{data:uce(a),specs:n}}function fV(t,e){const n=new $o(t),r={};let s=0;for(const a of e){const i=lce(a,(o,l)=>n.slice(s+o,s+l));r[a.name]=hV(a,n.slice(s,s+i)),s+=i}return r}function lce(t,e){const n=Ee(t.shape);let r;if("quantization"in t){const s=t.quantization;r=uf[s.dtype]}else if(t.dtype==="string"){let s=0;for(let a=0;a<n;a++)s+=Ru+new Uint32Array(e(s,s+Ru))[0];return s}else r=uf[t.dtype];return n*r}async function cce(t,e){const n=Ee(t.shape);let r;if("quantization"in t){const s=t.quantization;r=uf[s.dtype]}else if(t.dtype==="string"){let s=0;for(let a=0;a<n;a++)s+=Ru+new Uint32Array(await e(s,s+Ru))[0];return s}else r=uf[t.dtype];return n*r}function hV(t,e){const n=t.name,r=t.dtype,s=t.shape,a=Ee(s);let i,o=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=uf[l.dtype],f=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){i=new Float32Array(f.length);for(let p=0;p<f.length;p++){const m=f[p];i[p]=m*l.scale+l.min}}else if(l.dtype==="float16")i=gce()(f);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);i=new Int32Array(f.length);for(let p=0;p<f.length;p++){const m=f[p];i[p]=Math.round(m*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=a*c}else if(r==="string"){const l=Ee(t.shape);i=[];for(let c=0;c<l;c++){const f=new Uint32Array(e.slice(o,o+Ru))[0];o+=Ru;const p=new Uint8Array(e.slice(o,o+f));i.push(p),o+=f}}else{const l=uf[r];if(r==="float32")i=new Float32Array(e);else if(r==="int32")i=new Int32Array(e);else if(r==="bool")i=new Uint8Array(e);else if(r==="complex64"){i=new Float32Array(e);const c=new Float32Array(i.length/2),f=new Float32Array(i.length/2);for(let b=0;b<c.length;b++)c[b]=i[b*2],f[b]=i[b*2+1];const p=Ki(c,s,"float32"),m=Ki(f,s,"float32"),y=cc(p,m);return p.dispose(),m.dispose(),y}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=a*l}return Ki(i,s,r)}async function HP(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:a}=await t.read();if(s&&a==null){const o=n-r.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}const i=new Uint8Array(r.length+a.byteLength);i.set(r,0),i.set(new Uint8Array(a),r.length),r=i}return r.buffer}async function pV(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const a of e){const i=await cce(a,async(c,f)=>(s=await HP(r,s,f),s.slice(c,f)));s=await HP(r,s,i);const o=s.slice(0,i);s=s.slice(i);const l=hV(a,o);if(n[a.name]=l,dV()==="webgpu"){const c=lR();"uploadToGPU"in c&&Ee(l.shape)>=ye().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return n}function uce(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(a=>{if(e+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(a=>{r.set(new Uint8Array(a.buffer),s),s+=a.byteLength}),r.buffer}const cR=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function KP(t){return cR?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function dce(t){if(cR)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function fce(t){if(cR){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function mV(t){return $o.join(t)}function XP(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);const n=t.split("/");return n[n.length-1]}function gV(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function uR(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function dR(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),uR(t,n,r)}function Ib(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:KP(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:KP(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new $o(t.weightData).byteLength}}function cw(t){const e=[];for(const n of t)e.push(...n.weights);return e}function hce(){const t=n=>{let r=n<<13,s=0;for(;(r&8388608)===0;)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function pce(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function mce(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function gce(){const t=hce(),e=pce(),n=mce();return r=>{const s=new ArrayBuffer(4*r.length),a=new Uint32Array(s);for(let i=0;i<r.length;i++){const o=r[i],l=t[n[o>>10]+(o&1023)]+e[o>>10];a[i]=l}return new Float32Array(s)}}class Kn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Kn.instance==null&&(Kn.instance=new Kn),Kn.instance}static registerSaveRouter(e){Kn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Kn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Kn.getHandlers(e,"save")}static getLoadHandlers(e,n){return Kn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?Kn.getInstance().loadRouters:Kn.getInstance().saveRouters).forEach(i=>{const o=i(e,r);o!==null&&s.push(o)}),s}}const yce=t=>Kn.registerSaveRouter(t),bce=t=>Kn.registerLoadRouter(t),yV=t=>Kn.getSaveHandlers(t),xce=(t,e)=>Kn.getLoadHandlers(t,e);const qA="tensorflowjs",GA=1,Wd="models_store",mu="model_info_store";function bV(){if(!ye().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function HA(t){const e=t.result;e.createObjectStore(Wd,{keyPath:"modelPath"}),e.createObjectStore(mu,{keyPath:"modelPath"})}class df{constructor(e){if(this.indexedDB=bV(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const a=this.indexedDB.open(qA,GA);a.onupgradeneeded=()=>HA(a),a.onsuccess=()=>{const i=a.result;if(n==null){const o=i.transaction(Wd,"readonly"),c=o.objectStore(Wd).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return i.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=f=>(i.close(),s(c.error)),o.oncomplete=()=>i.close()}else{n.weightData=$o.join(n.weightData);const o=Ib(n),l=i.transaction(mu,"readwrite");let c=l.objectStore(mu),f;try{f=c.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(m){return s(m)}let p;f.onsuccess=()=>{p=i.transaction(Wd,"readwrite");const m=p.objectStore(Wd);let y;try{y=m.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(b){return s(b)}y.onsuccess=()=>r({modelArtifactsInfo:o}),y.onerror=b=>{c=l.objectStore(mu);const v=c.delete(this.modelPath);v.onsuccess=()=>(i.close(),s(y.error)),v.onerror=x=>(i.close(),s(y.error))}},f.onerror=m=>(i.close(),s(f.error)),l.oncomplete=()=>{p==null?i.close():p.oncomplete=()=>i.close()}}},a.onerror=i=>s(a.error)})}}df.URL_SCHEME="indexeddb://";const xV=t=>ye().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(df.URL_SCHEME)?vce(t.slice(df.URL_SCHEME.length)):null;Kn.registerSaveRouter(xV);Kn.registerLoadRouter(xV);function vce(t){return new df(t)}function wce(t){return t.startsWith(df.URL_SCHEME)?t.slice(df.URL_SCHEME.length):t}class Sce{constructor(){this.indexedDB=bV()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(qA,GA);r.onupgradeneeded=()=>HA(r),r.onsuccess=()=>{const s=r.result,a=s.transaction(mu,"readonly"),o=a.objectStore(mu).getAll();o.onsuccess=()=>{const l={};for(const c of o.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},o.onerror=l=>(s.close(),n(o.error)),a.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=wce(e),new Promise((n,r)=>{const s=this.indexedDB.open(qA,GA);s.onupgradeneeded=()=>HA(s),s.onsuccess=()=>{const a=s.result,i=a.transaction(mu,"readwrite"),o=i.objectStore(mu),l=o.get(e);let c;l.onsuccess=()=>{if(l.result==null)return a.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const f=o.delete(e),p=()=>{c=a.transaction(Wd,"readwrite");const y=c.objectStore(Wd).delete(e);y.onsuccess=()=>n(l.result.modelArtifactsInfo),y.onerror=b=>r(l.error)};f.onsuccess=p,f.onerror=m=>(p(),a.close(),r(l.error))}},l.onerror=f=>(a.close(),r(l.error)),i.oncomplete=()=>{c==null?a.close():c.oncomplete=()=>a.close()}},s.onerror=a=>r(s.error)})}}const Jl="/",Mh="tensorflowjs_models",vV="info",Cce="model_topology",kce="weight_specs",Nce="weight_data",Tce="model_metadata";function wV(t){return{info:[Mh,t,vV].join(Jl),topology:[Mh,t,Cce].join(Jl),weightSpecs:[Mh,t,kce].join(Jl),weightData:[Mh,t,Nce].join(Jl),modelMetadata:[Mh,t,Tce].join(Jl)}}function SV(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function Ece(t){const e=t.split(Jl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Jl)}function Ice(t){return t.startsWith(ff.URL_SCHEME)?t.slice(ff.URL_SCHEME.length):t}class ff{constructor(e){if(!ye().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=wV(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=Ib(e),a=$o.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,dce(a));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:s}}catch{throw SV(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const o=JSON.parse(a);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=fce(i),n}}ff.URL_SCHEME="localstorage://";const CV=t=>ye().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ff.URL_SCHEME)?Ace(t.slice(ff.URL_SCHEME.length)):null;Kn.registerSaveRouter(CV);Kn.registerLoadRouter(CV);function Ace(t){return new ff(t)}class jce{constructor(){q(ye().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),q(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Mh+Jl,r=Jl+vV;for(let s=0;s<this.LS.length;++s){const a=this.LS.key(s);if(a.startsWith(n)&&a.endsWith(r)){const i=Ece(a);e[i]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=Ice(e);const n=wV(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return SV(n),r}}const Hh="://";class Ys{constructor(){this.managers={}}static getInstance(){return Ys.instance==null&&(Ys.instance=new Ys),Ys.instance}static registerManager(e,n){q(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Hh)&&(e=e.slice(0,e.indexOf(Hh))),q(e.length>0,()=>"scheme must not be an empty string.");const r=Ys.getInstance();q(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ys.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ys.getInstance().managers)}}function _1(t){if(t.indexOf(Hh)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ys.getSchemes().join(",")}`);return{scheme:t.split(Hh)[0],path:t.split(Hh)[1]}}async function kV(t,e,n=!1){q(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Kn.getLoadHandlers(t);q(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),q(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],a=Kn.getSaveHandlers(e);q(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),q(a.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const i=a[0],o=_1(t).scheme,l=_1(t).path,c=o===_1(t).scheme,f=await s.load();n&&c&&await Ys.getManager(o).removeModel(l);const p=await i.save(f);return n&&!c&&await Ys.getManager(o).removeModel(l),p.modelArtifactsInfo}async function $ce(){const t=Ys.getSchemes(),e={};for(const n of t){const r=await Ys.getManager(n).listModels();for(const s in r){const a=n+Hh+s;e[a]=r[s]}}return e}async function Rce(t){const e=_1(t);return Ys.getManager(e.scheme).removeModel(e.path)}async function Oce(t,e){return kV(t,e,!1)}async function _ce(t,e){return kV(t,e,!0)}class Dce{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!ye().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return QW(e)}}if(ye().get("IS_BROWSER")){ye().setPlatform("browser",new Dce);try{Ys.registerManager(ff.URL_SCHEME,new jce)}catch{}try{Ys.registerManager(df.URL_SCHEME,new Sce)}catch{}}const zce={importFetch:()=>require("node-fetch")};let NE;class Pce{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return ye().global.fetch!=null?ye().global.fetch(e,n):(NE==null&&(NE=zce.importFetch()),NE(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}ye().get("IS_NODE")&&!ye().get("IS_BROWSER")&&ye().setPlatform("node",new Pce);function $t(t,e="float32",n){return e=e||"float32",Xa(t),new Ir(t,e,n)}function Lce(t,e){const n=G(t,"x","cast");if(!BW(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return te.runKernel(Pp,r,s)}const Ge=ne({cast_:Lce});function Mce(t){const n={x:G(t,"x","clone","string_or_numeric")};return te.runKernel(Yp,n)}const ll=ne({clone_:Mce});function fR(t,e=!1){console.log(t.toString(e))}lV();const Fce={buffer:$t,cast:Ge,clone:ll,print:fR};Lle(Fce);function Bce(t,e){let n=G(t,"a","add"),r=G(e,"b","add");[n,r]=tr(n,r);const s={a:n,b:r};return te.runKernel(Df,s)}const Be=ne({add_:Bce});function Uce(t,e){let n=G(t,"a","floorDiv"),r=G(e,"b","floorDiv");[n,r]=tr(n,r);const s={a:n,b:r};return te.runKernel(Kp,s)}const H2=ne({floorDiv_:Uce});function Wce(t,e){let n=G(t,"a","div"),r=G(e,"b","div");if([n,r]=tr(n,r),n.dtype==="int32"&&r.dtype==="int32")return H2(n,r);const s={a:n,b:r},a={};return te.runKernel(Up,s,a)}const ut=ne({div_:Wce});function Vce(t,e){let n=G(t,"a","mul"),r=G(e,"b","mul");[n,r]=tr(n,r);const s={a:n,b:r};return te.runKernel(am,s)}const oe=ne({mul_:Vce});function qce(t){const e=G(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return te.runKernel(O0,n)}else{const n={x:e};return te.runKernel(k0,n)}}const Nr=ne({abs_:qce});function Gce(t){const n={x:G(t,"x","acos")};return te.runKernel(jp,n)}const hR=ne({acos_:Gce});function Hce(t){const n={x:G(t,"x","acosh")};return te.runKernel($p,n)}const pR=ne({acosh_:Hce});function Kce(t){q(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),q(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,a)=>G(s,`tensors${a}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!Ft(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return te.runKernel(N0,r)}const NV=ne({addN_:Kce});function Xce(t,e=null,n=!1){const s={x:G(t,"x","all","bool")},a={axis:e,keepDims:n};return te.runKernel(FS,s,a)}const K2=ne({all_:Xce});function Yce(t,e=null,n=!1){const s={x:G(t,"x","any","bool")},a={axis:e,keepDims:n};return te.runKernel(BS,s,a)}const Uy=ne({any_:Yce});function Qce(t,e=0){const r={x:G(t,"x","argMax")},s={axis:e};return te.runKernel(T0,r,s)}const hf=ne({argMax_:Qce});function Zce(t,e=0){const r={x:G(t,"x","argMin")},s={axis:e};return te.runKernel(E0,r,s)}const mR=ne({argMin_:Zce});function Jce(t){const n={x:G(t,"x","asin")};return te.runKernel(Rp,n)}const gR=ne({asin_:Jce});function eue(t){const n={x:G(t,"x","asinh")};return te.runKernel(Op,n)}const yR=ne({asinh_:eue});function tue(t){const n={x:G(t,"x","atan")};return te.runKernel(_p,n)}const bR=ne({atan_:tue});function nue(t,e){let n=G(t,"a","atan2"),r=G(e,"b","atan2");[n,r]=tr(n,r);const s={a:n,b:r};return te.runKernel(zp,s)}const xR=ne({atan2_:nue});function rue(t){const n={x:G(t,"x","atanh")};return te.runKernel(Dp,n)}const vR=ne({atanh_:rue});function Ab(t,e,n,r,s="NHWC",a){const i=t[3],o=[...e,i],l=Sc(s);return rs(t,o,n,a,r,null,null,l)}function Zi(t,e,n,r,s,a,i="channelsLast"){const[o,l]=Wy(e);let c;if(i==="channelsLast")c=[o,l,t[3],t[3]];else if(i==="channelsFirst")c=[o,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return rs(t,c,n,r,s,a,!1,i)}function wc(t,e,n,r,s,a,i="NDHWC"){const[o,l,c]=KA(e);let f,p;if(i==="NDHWC")p="channelsLast",f=[o,l,c,t[4],t[4]];else if(i==="NCDHW")p="channelsFirst",f=[o,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return Vu(t,f,n,r,s,!1,p,a)}function rs(t,e,n,r,s,a,i=!1,o="channelsLast"){let[l,c,f,p]=[-1,-1,-1,-1];if(o==="channelsLast")[l,c,f,p]=t;else if(o==="channelsFirst")[l,p,c,f]=t;else throw new Error(`Unknown dataFormat ${o}`);const[m,y,,b]=e,[v,x]=Wy(n),[S,C]=Wy(r),E=Kh(m,S),k=Kh(y,C),{padInfo:I,outHeight:$,outWidth:_}=iue(s,c,f,v,x,E,k,a,o),z=i?b*p:b;let L;return o==="channelsFirst"?L=[l,z,$,_]:o==="channelsLast"&&(L=[l,$,_,z]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:f,inChannels:p,outHeight:$,outWidth:_,outChannels:z,padInfo:I,strideHeight:v,strideWidth:x,filterHeight:m,filterWidth:y,effectiveFilterHeight:E,effectiveFilterWidth:k,dilationHeight:S,dilationWidth:C,inShape:t,outShape:L,filterShape:e}}function Vu(t,e,n,r,s,a=!1,i="channelsLast",o){let[l,c,f,p,m]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,c,f,p,m]=t;else if(i==="channelsFirst")[l,m,c,f,p]=t;else throw new Error(`Unknown dataFormat ${i}`);const[y,b,v,,x]=e,[S,C,E]=KA(n),[k,I,$]=KA(r),_=Kh(y,k),z=Kh(b,I),L=Kh(v,$),{padInfo:R,outDepth:D,outHeight:U,outWidth:X}=oue(s,c,f,p,S,C,E,_,z,L,o),V=a?x*m:x;let Y;return i==="channelsFirst"?Y=[l,V,D,U,X]:i==="channelsLast"&&(Y=[l,D,U,X,V]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:f,inWidth:p,inChannels:m,outDepth:D,outHeight:U,outWidth:X,outChannels:V,padInfo:R,strideDepth:S,strideHeight:C,strideWidth:E,filterDepth:y,filterHeight:b,filterWidth:v,effectiveFilterDepth:_,effectiveFilterHeight:z,effectiveFilterWidth:L,dilationDepth:k,dilationHeight:I,dilationWidth:$,inShape:t,outShape:Y,filterShape:e}}function sue(t,e,n,r,s){r==null&&(r=wR(t,e,n));const a=t[0],i=t[1],o=Vy((a-e+2*r)/n+1,s),l=Vy((i-e+2*r)/n+1,s);return[o,l]}function aue(t,e,n,r,s,a){s==null&&(s=wR(t,e[0],r[0]));const i=[0,0,0,n];for(let o=0;o<3;o++)t[o]+2*s>=e[o]&&(i[o]=Vy((t[o]-e[o]+2*s)/r[o]+1,a));return i}function wR(t,e,n,r=1){const s=Kh(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function Wy(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function KA(t){return typeof t=="number"?[t,t,t]:t}function Kh(t,e){return e<=1?t:t+(t-1)*(e-1)}function iue(t,e,n,r,s,a,i,o,l){let c,f,p;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const y=sue([e,n],a,r,t,o);f=y[0],p=y[1]}else if(t==="same"){f=Math.ceil(e/r),p=Math.ceil(n/s);const m=Math.max(0,(f-1)*r+a-e),y=Math.max(0,(p-1)*s+i-n),b=Math.floor(m/2),v=m-b,x=Math.floor(y/2),S=y-x;c={top:b,bottom:v,left:x,right:S,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((e-a+1)/r),p=Math.ceil((n-i+1)/s);else if(typeof t=="object"){const m=l==="channelsLast"?t[1][0]:t[2][0],y=l==="channelsLast"?t[1][1]:t[2][1],b=l==="channelsLast"?t[2][0]:t[3][0],v=l==="channelsLast"?t[2][1]:t[3][1];c={top:m,bottom:y,left:b,right:v,type:m===0&&y===0&&b===0&&v===0?"VALID":"EXPLICIT"},f=Vy((e-a+m+y)/r+1,o),p=Vy((n-i+b+v)/s+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:f,outWidth:p}}function oue(t,e,n,r,s,a,i,o,l,c,f){let p,m,y,b;if(t==="valid"&&(t=0),typeof t=="number"){p={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const x=aue([e,n,r,1],[o,l,c],1,[s,a,i],t,f);m=x[0],y=x[1],b=x[2]}else if(t==="same"){m=Math.ceil(e/s),y=Math.ceil(n/a),b=Math.ceil(r/i);const v=(m-1)*s+o-e,x=(y-1)*a+l-n,S=(b-1)*i+c-r,C=Math.floor(v/2),E=v-C,k=Math.floor(x/2),I=x-k,$=Math.floor(S/2),_=S-$;p={top:k,bottom:I,left:$,right:_,front:C,back:E,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:p,outDepth:m,outHeight:y,outWidth:b}}function Vy(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Ou(t){const[e,n,r]=Wy(t);return e===1&&n===1&&r===1}function bs(t,e){return Ou(t)||Ou(e)}function pf(t){return Wy(t).every(e=>e>0)}function Sc(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function sa(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")q(cf(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{q(cf(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}function lue(t,e){const r={x:G(t,"x","reshape","string_or_numeric")},s={shape:e};return te.runKernel(hb,r,s)}const le=ne({reshape_:lue});function cue(t,e,n,r,s){const a=G(t,"x","avgPool","float32"),i=1;q(bs(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let o=a,l=!1;a.rank===3&&(l=!0,o=le(a,[1,a.shape[0],a.shape[1],a.shape[2]])),q(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),sa("avgPool",r,s);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let p=te.runKernel(I0,c,f);return p=Ge(p,a.dtype),l?le(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const jb=ne({avgPool_:cue});function uue(t,e,n,r,s,a="NDHWC"){const i=G(t,"x","avgPool3d","float32");let o=i,l=!1;i.rank===4&&(l=!0,o=le(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),q(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),q(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),q(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),sa("avgPool3d",r,s);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:a};let p=te.runKernel(A0,c,f);return p=Ge(p,o.dtype),l?le(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const SR=ne({avgPool3d_:uue});function due(t,e=0){q(t.length>=1,()=>"Pass at least one tensor to concat");const n=By(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),n.length===1)return ll(n[0]);const r=n,s={axis:e};return te.runKernel(_0,r,s)}const mr=ne({concat_:due});function fue(t,e,n=!1,r=!1){let s=G(t,"a","matMul"),a=G(e,"b","matMul");[s,a]=tr(s,a);const i={a:s,b:a},o={transposeA:n,transposeB:r};return te.runKernel(j0,i,o)}const zt=ne({matMul_:fue});function hue(t){const n={x:G(t,"x","sigmoid","float32")};return te.runKernel(gm,n)}const vo=ne({sigmoid_:hue});function pue(t,e,n){const r=G(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},a={begin:e,size:n};return te.runKernel(bb,s,a)}const Gt=ne({slice_:pue});function mue(t){const n={x:G(t,"x","tanh","float32")};return te.runKernel(Sm,n)}const _u=ne({tanh_:mue});function gue(t,e,n,r,s,a){const i=G(t,"forgetBias","basicLSTMCell"),o=G(e,"lstmKernel","basicLSTMCell"),l=G(n,"lstmBias","basicLSTMCell"),c=G(r,"data","basicLSTMCell"),f=G(s,"c","basicLSTMCell"),p=G(a,"h","basicLSTMCell"),m=mr([c,p],1),y=zt(m,o),b=Be(y,l),v=b.shape[0],x=b.shape[1]/4,S=[v,x],C=Gt(b,[0,0],S),E=Gt(b,[0,x],S),k=Gt(b,[0,x*2],S),I=Gt(b,[0,x*3],S),$=Be(oe(vo(C),_u(E)),oe(f,vo(Be(i,k)))),_=oe(_u($),vo(I));return[$,_]}const TV=ne({basicLSTMCell_:gue});function yue(t,e,n){const r=G(t,"x","batchToSpaceND"),s=e.reduce((o,l)=>o*l);q(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),q(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),q(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const a={x:r},i={blockShape:e,crops:n};return te.runKernel($0,a,i)}const $b=ne({batchToSpaceND_:yue});function bue(t){let e;return t.rank===0||t.rank===1?e=le(t,[1,1,1,t.size]):t.rank===2?e=le(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=le(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}function xue(t,e,n,r,s,a){a==null&&(a=.001);const i=G(t,"x","batchNorm"),o=G(e,"mean","batchNorm"),l=G(n,"variance","batchNorm");let c;s!=null&&(c=G(s,"scale","batchNorm"));let f;r!=null&&(f=G(r,"offset","batchNorm")),q(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(f==null||o.rank===f.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const m={x:bue(i),scale:c,offset:f,mean:o,variance:l},y={varianceEpsilon:a},b=te.runKernel(W0,m,y);return le(b,i.shape)}const Nm=ne({batchNorm_:xue});function vue(t,e,n,r,s,a){const i=G(t,"x","batchNorm"),o=G(e,"mean","batchNorm"),l=G(n,"variance","batchNorm");let c;s!=null&&(c=G(s,"scale","batchNorm"));let f;return r!=null&&(f=G(r,"offset","batchNorm")),q(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),q(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),q(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&q(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),f!=null&&q(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${f.rank}.`),Nm(i,o,l,f,c,a)}const CR=ne({batchNorm2d_:vue});function wue(t,e,n,r,s,a){const i=G(t,"x","batchNorm"),o=G(e,"mean","batchNorm"),l=G(n,"variance","batchNorm");let c;s!=null&&(c=G(s,"scale","batchNorm"));let f;return r!=null&&(f=G(r,"offset","batchNorm")),q(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),q(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),q(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&q(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),f!=null&&q(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${f.rank}.`),Nm(i,o,l,f,c,a)}const kR=ne({batchNorm3d_:wue});function Sue(t,e,n,r,s,a){const i=G(t,"x","batchNorm"),o=G(e,"mean","batchNorm"),l=G(n,"variance","batchNorm");let c;s!=null&&(c=G(s,"scale","batchNorm"));let f;return r!=null&&(f=G(r,"offset","batchNorm")),q(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),q(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),q(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&q(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),f!=null&&q(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${f.rank}.`),Nm(i,o,l,f,c,a)}const NR=ne({batchNorm4d_:Sue});function Cue(t,e,n){const r=G(t,"x","bincount"),s=G(e,"weights","bincount");q(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),q(n>=0,()=>`size must be non-negative, but got ${n}.`),q(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const a={x:r,weights:s},i={size:n};return te.runKernel(VS,a,i)}const TR=ne({bincount_:Cue});function kue(t,e){const n=G(t,"x","bitwiseAnd"),r=G(e,"y","bitwiseAnd");if(!Ft(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return te.runKernel(R0,s)}const EV=ne({bitwiseAnd_:kue});function Nue(t,e){const n=G(t,"s0","broadcastArgs","int32"),r=G(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return te.runKernel(qS,s)}const IV=ne({broadcastArgs_:Nue});function Tue(t,e){let n=G(t,"broadcastTo","x");const r=n.shape;if(Xa(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=le(n,c)}const s=n.shape,a=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])a[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(a.map((c,f)=>c>1?f:-1).filter(c=>c>=0).length===0)return ll(n);const o={x:n},l={reps:a};return te.runKernel(Cm,o,l)}const Zd=ne({broadcastTo_:Tue});function Eue(t){const n={x:G(t,"x","ceil","float32")};return te.runKernel(Lp,n)}const ER=ne({ceil_:Eue});function zf(t,e,n){Xa(t),n=n||Of(e);const r={shape:t,value:e,dtype:n};return te.runKernel(o2,{},r)}function Iue(t,e,n){const r=G(t,"x","clipByValue");if(q(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return zf(r.shape,e,r.dtype);const s={x:r},a={clipValueMin:e,clipValueMax:n};return te.runKernel(Mp,s,a)}const va=ne({clipByValue_:Iue});function Aue(t){return mr(t,0)}const IR=ne({concat1d_:Aue});function jue(t,e){return mr(t,e)}const AR=ne({concat2d_:jue});function $ue(t,e){return mr(t,e)}const jR=ne({concat3d_:$ue});function Rue(t,e){return mr(t,e)}const $R=ne({concat4d_:Rue});function Oue(t,e,n,r,s="NHWC",a=[1,1],i){const o=G(t,"x","conv2d","float32"),l=G(e,"filter","conv2d","float32");let c=o,f=!1;o.rank===3&&(f=!0,c=le(o,[1,o.shape[0],o.shape[1],o.shape[2]])),q(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),q(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),sa("conv2d",r,i);const p=s==="NHWC"?c.shape[3]:c.shape[1];q(p===l.shape[2],()=>`Error in conv2d: depth of input (${p}) must match input depth for filter ${l.shape[2]}.`),q(bs(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),q(pf(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),q(pf(n),()=>"Error in conv2D: Strides should be larger than 0.");const m={x:c,filter:l},y={strides:n,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i},b=te.runKernel(D0,m,y);return f?le(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const uc=ne({conv2d_:Oue});function _ue(t,e,n,r,s="NWC",a=1,i){const o=G(t,"x","conv1d"),l=G(e,"filter","conv1d");let c=o,f=!1;o.rank===2&&(f=!0,c=le(o,[1,o.shape[0],o.shape[1]])),q(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),q(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),sa("conv1d",r,i),q(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),q(bs(n,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${a}'`),q(pf(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),q(pf(n),()=>"Error in conv1D: Stride should be larger than 0."),q(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const p=le(l,[1,l.shape[0],l.shape[1],l.shape[2]]),m=le(c,[c.shape[0],1,c.shape[1],c.shape[2]]),x=uc(m,p,[1,n],r,"NHWC",[1,a],i);return f?le(x,[x.shape[2],x.shape[3]]):le(x,[x.shape[0],x.shape[2],x.shape[3]])}const X2=ne({conv1d_:_ue});function Due(t,e,n,r,s,a="NHWC",i){q(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,l=e,c=!1;e.rank===3&&(c=!0,l=le(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),q(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),q(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),q(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const f=a==="NHWC"?o[3]:o[1],p=a==="NHWC"?l.shape[3]:l.shape[1];q(f===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`),q(p===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${p}) must match output depth for filter ${n.shape[3]}.`),sa("conv2dDerInput",s,i);const m={dy:l,filter:n},y={strides:r,pad:s,dataFormat:a,dimRoundingMode:i,inputShape:o},b=te.runKernel(z0,m,y);return c?le(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const RR=ne({conv2DBackpropInput_:Due});function zue(t,e,n,r,s,a){const i=G(t,"x","conv2dTranspose"),o=G(e,"filter","conv2dTranspose");return RR(n,i,o,r,s,"NHWC",a)}const Y2=ne({conv2dTranspose_:zue});function Pue(t,e,n,r,s="NDHWC",a=[1,1,1]){const i=G(t,"x","conv3d"),o=G(e,"filter","conv3d");let l=i,c=!1;i.rank===4&&(c=!0,l=le(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),q(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),q(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),q(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),q(bs(n,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),q(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),q(pf(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),q(pf(n),()=>"Error in conv3D: Strides should be larger than 0.");const f={x:l,filter:o},p={strides:n,pad:r,dataFormat:s,dilations:a},m=te.runKernel(P0,f,p);return c?le(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const OR=ne({conv3d_:Pue});function Lue(t,e,n,r,s){q(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,i=e,o=!1;e.rank===4&&(o=!0,i=le(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),a=[1,t[0],t[1],t[2],t[3]]);const l=a[4],c=i.shape[4];q(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),q(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),q(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),q(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),q(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const f={dy:i,filter:n},p={pad:s,strides:r,inputShape:a},m=te.runKernel(XS,f,p);return o?le(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const AV=ne({conv3DBackpropInput_:Lue});function Mue(t,e,n,r,s){const a=G(t,"x","conv3dTranspose"),i=G(e,"filter","conv3dTranspose");return AV(n,a,i,r,s)}const _R=ne({conv3dTranspose_:Mue});function Fue(t){const n={x:G(t,"x","cos","float32")};return te.runKernel(Fp,n)}const Rb=ne({cos_:Fue});function Bue(t){const n={x:G(t,"x","cosh","float32")};return te.runKernel(Bp,n)}const Q2=ne({cosh_:Bue});function Uue(t,e=0,n=!1,r=!1){const a={x:G(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return te.runKernel(YS,a,i)}const qy=ne({cumprod_:Uue});function Wue(t,e=0,n=!1,r=!1){const a={x:G(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return te.runKernel(L0,a,i)}const Z2=ne({cumsum_:Wue});function Vue(t,e,n,r=!1){const s=G(t,"x","denseBincount"),a=G(e,"weights","denseBincount");q(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),q(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),q(n>=0,()=>`size must be non-negative, but got ${n}.`),q(a.size===s.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${a.shape}.`);const i={x:s,weights:a},o={size:n,binaryOutput:r};return te.runKernel(ZS,i,o)}const uw=ne({denseBincount_:Vue});function que(t,e,n="NHWC"){const r=G(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];q(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),q(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),q(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e} for depthToSpace with input shape
        ${r.shape}`),q(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:n};return te.runKernel(JS,o,l)}const DR=ne({depthToSpace_:que});function Gue(t,e,n,r,s="NHWC",a=[1,1],i){const o=G(t,"x","depthwiseConv2d","float32"),l=G(e,"filter","depthwiseConv2d","float32");let c=o,f=!1;o.rank===3&&(f=!0,c=le(o,[1,o.shape[0],o.shape[1],o.shape[2]])),q(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),q(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const p=s==="NHWC"?c.shape[3]:c.shape[1];q(p===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${p}) must match the inChannels dimension in filter ${l.shape[2]}.`),sa("depthwiseConv2d",r,i);const m={x:c,filter:l},y={strides:n,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i},b=te.runKernel(M0,m,y);return f?le(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const Tm=ne({depthwiseConv2d_:Gue});function Hue(t){const n={x:G(t,"x","diag")};return te.runKernel(n2,n)}const jV=ne({diag_:Hue});function Kue(t,e,n,r,s=[1,1],a="NHWC"){const i=G(t,"x","dilation2d"),o=G(e,"filter","dilation2d");q(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),q(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),q(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let l=i,c=!1;i.rank===3&&(l=le(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),q(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const f={x:l,filter:o},p={strides:n,pad:r,dilations:s},m=te.runKernel(F0,f,p);return c?le(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const zR=ne({dilation2d_:Kue});function mf(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const a=n-1-s,i=t[a]||1;(e[e.length-1-s]||1)>1&&i===1&&r.unshift(a)}return r}function Ar(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],a=e.length-r-1,i=e[a];(s==null||s===1&&i>1)&&n.unshift(a)}return n}function At(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let a=t[t.length-s-1];a==null&&(a=1);let i=e[e.length-s-1];if(i==null&&(i=1),a===1)r[n-s-1]=i;else if(i===1)r[n-s-1]=a;else if(a!==i){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else r[n-s-1]=a}return r}const Xue=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:At,getBroadcastDims:mf,getReductionAxes:Ar},Symbol.toStringTag,{value:"Module"}));function Yue(t,e){let n=G(t,"a","equal","string_or_numeric"),r=G(e,"b","equal","string_or_numeric");[n,r]=tr(n,r),At(n.shape,r.shape);const s={a:n,b:r};return te.runKernel(B0,s)}const Xi=ne({equal_:Yue});function Que(t,e,n){const r=G(e,"a","where"),s=G(n,"b","where"),a=G(t,"condition","where","bool"),i=At(At(a.shape,r.shape),s.shape),o=Zd(a,i),l=Zd(r,i),c=Zd(s,i),f={condition:o,t:l,e:c};return te.runKernel(yb,f)}const ms=ne({where_:Que});function Zue(t){const n={x:G(t,"x","zerosLike")};return te.runKernel(Tb,n)}const Ht=ne({zerosLike_:Zue});function Jue(t,e){let n=G(t,"a","div"),r=G(e,"b","div");[n,r]=tr(n,r);const s=ut(n,r),a=Ht(s),i=Xi(r,a);return ms(i,a,s)}const PR=ne({divNoNan_:Jue});function ede(t,e){const n=G(t,"t1","dot"),r=G(e,"t2","dot");q((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];if(q(s===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${a}.`),n.rank===1&&r.rank===1){const i=le(n,[1,-1]),o=le(r,[-1,1]),l=zt(i,o);return le(l,[])}else if(n.rank===1&&r.rank===2){const i=le(n,[1,-1]),o=le(r,[r.shape[0],r.shape[1]]),l=zt(i,o);return le(l,[l.size])}else if(n.rank===2&&r.rank===1){const i=le(r,[-1,1]),o=zt(n,i);return le(o,[o.size])}else{const i=le(r,[r.shape[0],r.shape[1]]);return zt(n,i)}}const LR=ne({dot_:ede});function tde(t,...e){const n=e.map((s,a)=>G(s,`tensors${a}`,"einsum")),r={equation:t};return te.runKernel(s2,n,r)}const Ld=ne({einsum_:tde});function nde(t){const n={x:G(t,"x","elu","float32")};return te.runKernel(Wp,n)}const Em=ne({elu_:nde});function rde(t,e){const n=G(t,"x","ensureShape","string_or_numeric");if(!MW(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const $V=ne({ensureShape_:rde});function sde(t){let e=G(t,"x","erf");q(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Ge(e,"float32"));const n={x:e};return te.runKernel(Vp,n)}const J2=ne({erf_:sde});function MR(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function RV(t,e,n){const r=t.length+e.length,s=[];let a=0,i=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?s.push(t[a++]):s.push(e[i++]);return s}function ss(t,e){const n=[],r=t.length;for(let a=0;a<r;a++)e.indexOf(a)===-1&&n.push(t[a]);const s=e.map(a=>t[a]);return[n,s]}function gr(t,e){const n=e.map(r=>1);return RV(t,n,e)}function xs(t,e,n){q(MR(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function nr(t,e){if(MR(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function qu(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function yr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}function ade(t,e=null,n=!1){const s={x:G(t,"x","max")},a={reductionIndices:e,keepDims:n};return te.runKernel(J0,s,a)}const yi=ne({max_:ade});function ide(t,e=null,n=!1){const s={x:G(t,"x","min")},a={axis:e,keepDims:n};return te.runKernel(rb,s,a)}const sp=ne({min_:ide});function ode(t,e){let n=G(t,"base","pow"),r=G(e,"exp","pow");[n,r]=tr(n,r);const s={a:n,b:r};return te.runKernel(im,s)}const ml=ne({pow_:ode});function gt(t,e){if((Qr(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Qr(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Wu(t,[],[],e)}function lde(t){const n={x:G(t,"x","sqrt","float32")};return te.runKernel(bm,n)}const ns=ne({sqrt_:lde});function cde(t){const e=G(t,"x","square"),n={};return te.runKernel("Square",{x:e},n)}const Sn=ne({square_:cde});function ude(t,e=null,n=!1){let r=G(t,"x","sum");r.dtype==="bool"&&(r=Ge(r,"int32"));const s={x:r},a={axis:e,keepDims:n};return te.runKernel(xb,s,a)}const nt=ne({sum_:ude});function dde(t,e="euclidean",n=null,r=!1){t=G(t,"x","norm");const s=OV(t,e,n);let a=s.shape;if(r){const i=Lt(n,t.shape);a=gr(s.shape,i)}return le(s,a)}function OV(t,e,n=null){if(t.rank===0)return Nr(t);if(t.rank!==1&&n===null)return OV(le(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return nt(Nr(t),n);if(e===1/0)return yi(Nr(t),n);if(e===-1/0)return sp(Nr(t),n);if(e==="euclidean"||e===2)return ns(nt(ml(Nr(t),gt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return yi(nt(Nr(t),n[0]),n[1]-1);if(e===1/0)return yi(nt(Nr(t),n[1]),n[0]);if(e===-1/0)return sp(nt(Nr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return ns(nt(Sn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Im=ne({norm_:dde});function fde(t,e=null,n=!1){return Im(t,"euclidean",e,n)}const FR=ne({euclideanNorm_:fde});function hde(t){const n={x:G(t,"x","exp")};return te.runKernel(qp,n)}const wa=ne({exp_:hde});function pde(t,e=0){const n=G(t,"x","expandDims","string_or_numeric");q(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return te.runKernel(U0,r,s)}const zs=ne({expandDims_:pde});function mde(t){const n={x:G(t,"x","expm1")};return te.runKernel(Gp,n)}const BR=ne({expm1_:mde});function gde(t,e){const n=G(t,"x","tile","string_or_numeric");q(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return te.runKernel(Cm,r,s)}const fi=ne({tile_:gde});function yde(t,e,n,r="float32"){e==null&&(e=t);const s=$t([t,e],r),a=t<=e?t:e;for(let o=0;o<a;++o)s.set(1,o,o);const i=le(s.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return fi(zs(i,0),[n[0],1,1]);if(n.length===2)return fi(zs(zs(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return fi(zs(zs(zs(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const eC=ne({eye_:yde});function bde(t){const n={x:G(t,"x","floor","float32")};return te.runKernel(Hp,n)}const Am=ne({floor_:bde});function xde(t,e,n=0,r=0){const s=G(t,"x","gather"),a=G(e,"indices","gather","int32"),i={x:s,indices:a},o={axis:n,batchDims:r};return te.runKernel(V0,i,o)}const jm=ne({gather_:xde});function vde(t,e){let n=G(t,"a","greater","string_or_numeric"),r=G(e,"b","greater","string_or_numeric");[n,r]=tr(n,r),At(n.shape,r.shape);const s={a:n,b:r};return te.runKernel(q0,s)}const Ta=ne({greater_:vde});function wde(t,e){let n=G(t,"a","greaterEqual","string_or_numeric"),r=G(e,"b","greaterEqual","string_or_numeric");[n,r]=tr(n,r),At(n.shape,r.shape);const s={a:n,b:r};return te.runKernel(Xp,s)}const Cc=ne({greaterEqual_:wde});function Sde(t){const n={input:G(t,"input","imag")};return te.runKernel(d2,n)}const Ob=ne({imag_:Sde});function Cde(t){const n={x:G(t,"x","isFinite")};return te.runKernel(Qp,n)}const UR=ne({isFinite_:Cde});function kde(t){const n={x:G(t,"x","isInf")};return te.runKernel(Zp,n)}const WR=ne({isInf_:kde});function Nde(t){const n={x:G(t,"x","isNaN")};return te.runKernel(Jp,n)}const VR=ne({isNaN_:Nde});function Tde(t,e=.2){const r={x:G(t,"x","leakyRelu")},s={alpha:e};return te.runKernel(G0,r,s)}const _b=ne({leakyRelu_:Tde});function Ede(t,e){let n=G(t,"a","less","string_or_numeric"),r=G(e,"b","less","string_or_numeric");[n,r]=tr(n,r),At(n.shape,r.shape);const s={a:n,b:r};return te.runKernel(H0,s)}const ap=ne({less_:Ede});function Ide(t,e){let n=G(t,"a","lessEqual","string_or_numeric"),r=G(e,"b","lessEqual","string_or_numeric");[n,r]=tr(n,r),At(n.shape,r.shape);const s={a:n,b:r};return te.runKernel(K0,s)}const Gu=ne({lessEqual_:Ide});function _V(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return te.runKernel(f2,{},r)}function Ade(t,e=5,n=1,r=1,s=.5){const a=G(t,"x","localResponseNormalization");q(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),q(cf(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=a,o=!1;a.rank===3&&(o=!0,i=le(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:i},c={depthRadius:e,bias:n,alpha:r,beta:s},f=te.runKernel(Z0,l,c);return o?le(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const qR=ne({localResponseNormalization_:Ade});function jde(t){const n={x:G(t,"x","log","float32")};return te.runKernel(em,n)}const qa=ne({log_:jde});function $de(t){const n={x:G(t,"x","log1p")};return te.runKernel(tm,n)}const Db=ne({log1p_:$de});function Rde(t){return q(ju(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=G(e,"x","tf.grad","string_or_numeric"),s=n!=null?G(n,"dy","tf.grad"):null;return te.tidy(()=>{const{value:a,grads:i}=te.gradients(()=>t(r),[r],s);return s!=null&&ys(a.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),tC(i),i[0]})}}function Ode(t){return q(ju(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{q(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=By(e,"args","tf.grads","string_or_numeric"),s=n!=null?G(n,"dy","tf.grads"):null;return te.tidy(()=>{const{value:a,grads:i}=te.gradients(()=>t(...r),r,s);return s!=null&&ys(a.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),tC(i),i})}}function _de(t){return q(ju(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{q(e instanceof pn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),q(n==null||n instanceof pn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:s}=te.gradients(()=>t(e),[e],n);return tC(r),{grad:r[0],value:s}}}function Dde(t){return q(ju(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{q(Array.isArray(e)&&e.every(s=>s instanceof pn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),q(n==null||n instanceof pn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=te.gradients(()=>t(...e),e,n);return n!=null&&ys(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),tC(r.grads),r}}function DV(t,e){q(ju(t),()=>"The f passed in variableGrads(f) must be a function"),q(e==null||Array.isArray(e)&&e.every(c=>c instanceof Fy),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in te.registeredVariables)e.push(te.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),q(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const a=!0,{value:i,grads:o}=te.gradients(t,e,null,a);q(o.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),q(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return e.forEach((c,f)=>{o[f]!=null&&(l[c.name]=o[f])}),r?.forEach(c=>l[c.name]=null),{value:i,grads:l}}function gl(t){return te.customGrad(t)}function tC(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function zde(t){const n={x:G(t,"x","neg")};return te.runKernel(ab,n)}const zn=ne({neg_:zde});function Pde(t){const n={x:G(t,"x","softplus")};return te.runKernel(ym,n)}const Pf=ne({softplus_:Pde});function Lde(t){const e=G(t,"x","logSigmoid");return gl(r=>({value:zn(Pf(zn(r))),gradFunc:i=>oe(i,vo(zn(r)))}))(e)}const GR=ne({logSigmoid_:Lde});function Mde(t,e){let n=G(t,"a","sub"),r=G(e,"b","sub");[n,r]=tr(n,r);const s={a:n,b:r};return te.runKernel(vm,s)}const tt=ne({sub_:Mde});function Fde(t,e=-1){const n=G(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return gl((s,a)=>{const o=yi(s,e,!0),l=tt(s,o),c=tt(Ge(l,"float32"),qa(nt(wa(l),e,!0)));return a([c]),{value:c,gradFunc:(p,m)=>{const[y]=m,b=!0,v=wa(y);return tt(p,oe(nt(p,e,b),v))}}})(n)}const nC=ne({logSoftmax_:Fde});function Bde(t,e=null,n=!1){const r=G(t,"x","logSumExp"),s=Lt(e,r.shape),a=yi(r,s,!0),i=tt(r,a),o=wa(i),l=nt(o,s),c=qa(l),f=Be(le(a,c.shape),c);if(n){const p=gr(f.shape,s);return le(f,p)}return f}const zb=ne({logSumExp_:Bde});function Ude(t,e){const n=G(t,"a","logicalAnd","bool"),r=G(e,"b","logicalAnd","bool");At(n.shape,r.shape);const s={a:n,b:r};return te.runKernel(X0,s)}const ko=ne({logicalAnd_:Ude});function Wde(t){const n={x:G(t,"x","logicalNot","bool")};return te.runKernel(Y0,n)}const Pb=ne({logicalNot_:Wde});function Vde(t,e){const n=G(t,"a","logicalOr","bool"),r=G(e,"b","logicalOr","bool");At(n.shape,r.shape);const s={a:n,b:r};return te.runKernel(Q0,s)}const rC=ne({logicalOr_:Vde});function qde(t,e){const n=G(t,"a","logicalXor","bool"),r=G(e,"b","logicalXor","bool");return At(n.shape,r.shape),ko(rC(t,e),Pb(ko(t,e)))}const HR=ne({logicalXor_:qde});const Gv=2147483648;function Gde(t,e,n="left"){const r=G(t,"sortedSequence","searchSorted"),s=G(e,"values","searchSorted"),a=r.shape[r.shape.length-1],i=s.shape[s.shape.length-1],o=le(r,[-1,a]),l=le(s,[-1,i]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Ee(l.shape)>=Gv)throw new Error(`values tensor size must less than ${Gv}`);if(o.shape[1]>=Gv)throw new Error(`trailing dim_size must less than ${Gv} for int32 output type, was ${o.shape[1]}`);const c={sortedSequence:o,values:l},f={side:n};return te.runKernel(j2,c,f)}const sC=ne({searchSorted_:Gde});function zV(t,e){return sC(t,e,"left")}function Hde(t,e,n,r,s){const a=G(t,"x","maxPool"),i=1;let o=a,l=!1;a.rank===3&&(l=!0,o=le(a,[1,a.shape[0],a.shape[1],a.shape[2]])),q(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),q(bs(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),sa("maxPool",r,s);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:s},p=te.runKernel(eb,c,f);return l?le(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Lb=ne({maxPool_:Hde});function Kde(t,e=[1,1,1],n,r,s,a="NDHWC"){const i=G(t,"x","maxPool3d");let o=i,l=!1;i.rank===4&&(l=!0,o=le(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),q(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),q(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),sa("maxPool3d",r,s);const c={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:a},p=te.runKernel(tb,c,f);return l?le(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const KR=ne({maxPool3d_:Kde});function Xde(t,e,n,r,s=!1){const i={x:G(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},l=te.runKernel(g2,i,o);return{result:l[0],indexes:l[1]}}const PV=ne({maxPoolWithArgmax_:Xde});function Yde(t,e){let n=G(t,"a","maximum"),r=G(e,"b","maximum");[n,r]=tr(n,r),n.dtype==="bool"&&(n=Ge(n,"int32"),r=Ge(r,"int32")),At(n.shape,r.shape);const s={a:n,b:r};return te.runKernel(nm,s)}const Nl=ne({maximum_:Yde});function Qde(t,e=null,n=!1){const s={x:G(t,"x","mean")},a={axis:e,keepDims:n};return te.runKernel(nb,s,a)}const Qn=ne({mean_:Qde});function Tr(t,e="float32"){if(Xa(t),e==="complex64"){const r=Tr(t,"float32"),s=Tr(t,"float32");return cc(r,s)}const n=gs(Ee(t),e);return te.makeTensor(n,t,e)}function ma(t,e="float32"){if(Xa(t),e==="complex64"){const r=ma(t,"float32"),s=Tr(t,"float32");return cc(r,s)}const n=MS(Ee(t),e);return te.makeTensor(n,t,e)}function LV(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=G(t,"x","meshgrid",t instanceof pn?t.dtype:"float32");if(e===void 0)return[r];let s=G(e,"y","meshgrid",e instanceof pn?e.dtype:"float32");const a=Ee(r.shape),i=Ee(s.shape);return n==="xy"?(r=le(r,[1,-1]),s=le(s,[-1,1]),[zt(ma([i,1],r.dtype),r),zt(s,ma([1,a],s.dtype))]):(r=le(r,[-1,1]),s=le(s,[1,-1]),[zt(r,ma([1,i],r.dtype)),zt(ma([a,1],s.dtype),s)])}function Zde(t,e){let n=G(t,"a","minimum"),r=G(e,"b","minimum");[n,r]=tr(n,r),n.dtype==="bool"&&(n=Ge(n,"int32"),r=Ge(r,"int32")),At(n.shape,r.shape);const s={a:n,b:r};return te.runKernel(rm,s)}const Du=ne({minimum_:Zde});function Jde(t,e,n){q(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=G(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");q(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)q(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),q(e[o][0]>=0&&e[o][0]<=r.shape[o]-s&&e[o][1]>=0&&e[o][1]<=r.shape[o]-s,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-s} or less than 0 for input of shape ${r.shape}`);const a={paddings:e,mode:n},i={x:r};return te.runKernel(sb,i,a)}const XR=ne({mirrorPad_:Jde});function efe(t,e){let n=G(t,"a","mod"),r=G(e,"b","mod");[n,r]=tr(n,r);const s={a:n,b:r};return te.runKernel(sm,s)}const YR=ne({mod_:efe});function tfe(t,e=null,n=!1){t=G(t,"x","moments");const r=Lt(e,t.shape),s=Qn(t,r,n);let a=s.shape;n||(a=gr(s.shape,r));const i=Sn(tt(Ge(t,"float32"),le(s,a))),o=Qn(i,r,n);return{mean:s,variance:o}}const Mb=ne({moments_:tfe});function nfe(t,e,n,r){const s=G(e,"data","multiRNNCell"),a=By(n,"c","multiRNNCell"),i=By(r,"h","multiRNNCell");let o=s;const l=[];for(let p=0;p<t.length;p++){const m=t[p](o,a[p],i[p]);l.push(m[0]),l.push(m[1]),o=m[1]}const c=[],f=[];for(let p=0;p<l.length;p+=2)c.push(l[p]),f.push(l[p+1]);return[c,f]}const MV=ne({multiRNNCell_:nfe});function rfe(t,e,n,r=!1){const s=G(t,"logits","multinomial"),a=s.size,i=s.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);n=n||Math.random();const l={logits:i===1?le(s,[1,-1]):s},c={numSamples:e,seed:n,normalized:r},f=te.runKernel(y2,l,c);return i===1?le(f,[f.size]):f}const FV=ne({multinomial_:rfe});function sfe(t,e){let n=G(t,"a","notEqual","string_or_numeric"),r=G(e,"b","notEqual","string_or_numeric");[n,r]=tr(n,r),At(n.shape,r.shape);const s={a:n,b:r};return te.runKernel(ib,s)}const gf=ne({notEqual_:sfe});function afe(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:G(t,"indices","oneHot","int32")},o={dtype:s,depth:e,onValue:n,offValue:r};return te.runKernel(lb,i,o)}const ip=ne({oneHot_:afe});function ife(t){const n={x:G(t,"x","onesLike")};return te.runKernel(ob,n)}const Ga=ne({onesLike_:ife});function ofe(t,e){const n=G(t,"v1","outerProduct"),r=G(e,"v2","outerProduct");q(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=le(n,[-1,1]),a=le(r,[1,-1]);return zt(s,a)}const BV=ne({outerProduct_:ofe});function lfe(t,e,n=0){const r=G(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},a={x:r};return te.runKernel(ub,a,s)}const kc=ne({pad_:lfe});function cfe(t,e,n=0){return q(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),kc(t,[e],n)}const UV=ne({pad1d_:cfe});function ufe(t,e,n=0){return q(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),kc(t,e,n)}const WV=ne({pad2d_:ufe});function dfe(t,e,n=0){return q(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),kc(t,e,n)}const VV=ne({pad3d_:dfe});function ffe(t,e,n=0){return q(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),kc(t,e,n)}const qV=ne({pad4d_:ffe});function hfe(t,e,n){const r=G(t,"x","spaceToBatchND");q(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),q(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),q(r.shape.reduce((i,o,l)=>l>0&&l<=e.length?i&&(o+n[l-1][0]+n[l-1][1])%e[l-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},a={blockShape:e,paddings:n};return te.runKernel(vb,s,a)}const Fb=ne({spaceToBatchND_:hfe});function pfe(t,e,n,r,s,a,i){s==null&&(s=[1,1]),a==null&&(a=1),r===0&&(r="valid");const o=G(t,"x","maxPool");let l=o,c=!1;o.rank===3&&(c=!0,l=le(o,[1,o.shape[0],o.shape[1],o.shape[2]])),q(bs(a,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${s}'`);const f=Zi(l.shape,e,a,s,r),p=[f.dilationHeight,f.dilationWidth];let m;r==="same"?m=gfe([f.filterHeight,f.filterWidth],p):m=[[0,0],[0,0]];const y=p[0]===1&&p[1]===1,[b,v]=mfe([f.inHeight,f.inWidth],p,m),x=y?r:"valid",S=y?l:Fb(l,p,b),E=(n==="avg"?()=>jb(S,e,a,x,i):()=>Lb(S,e,a,x,i))(),k=y?E:$b(E,p,v);return c?le(k,[k.shape[1],k.shape[2],k.shape[3]]):k}function mfe(t,e,n){const r=n.map(f=>f[0]),s=n.map(f=>f[1]),a=t.concat(r,s),i=e.map((f,p)=>(f-a[p]%f)%f),o=s.map((f,p)=>f+i[p]),l=e.map((f,p)=>[r[p],o[p]]),c=e.map((f,p)=>[0,i[p]]);return[l,c]}function gfe(t,e){const r=t.map((i,o)=>i+(i-1)*(e[o]-1)).map(i=>i-1),s=r.map(i=>Math.floor(i/2)),a=r.map((i,o)=>i-s[o]);return r.map((i,o)=>[s[o],a[o]])}const QR=ne({pool_:pfe});function yfe(t,e){const n=G(t,"x","prelu"),r=G(e,"alpha","prelu"),s={x:n,alpha:r};return te.runKernel(db,s)}const Bb=ne({prelu_:yfe});function bfe(t,e=null,n=!1){let r=G(t,"x","prod");r.dtype==="bool"&&(r=Ge(r,"int32"));const s={x:r},a={axis:e,keepDims:n};return te.runKernel(fb,s,a)}const ZR=ne({prod_:bfe});function xfe(t,e,n,r){const s=t.map((f,p)=>G(f,`tensors${p}`,"raggedGather","int32")),a=G(e,"paramsDenseValues","raggedGather"),i=G(n,"indices","raggedGather","int32"),o={paramsNestedSplits:s,paramsDenseValues:a,indices:i},l={outputRaggedRank:r},c=te.runKernel(w2,o,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const GV=ne({raggedGather_:xfe});function vfe(t,e,n){const r=G(t,"starts","raggedRange"),s=G(e,"limits","raggedRange",r.dtype),a=G(n,"deltas","raggedRange",r.dtype),i={starts:r,limits:s,deltas:a},o=te.runKernel(S2,i);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const HV=ne({raggedRange_:vfe});function wfe(t,e,n,r,s){const a=G(t,"shape","raggedTensorToTensor","int32"),i=G(e,"values","raggedTensorToTensor"),o=G(n,"defaultValue","raggedTensorToTensor",i.dtype),l=r.map((p,m)=>G(p,`tensors${m}`,"raggedTensorToTensor","int32")),c={shape:a,values:i,defaultValue:o,rowPartitionTensors:l},f={rowPartitionTypes:s};return te.runKernel(C2,c,f)}const KV=ne({raggedTensorToTensor_:wfe});function Sfe(t,e,n){Xa(t);const r=Ee(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let a=0;a<r;a++)s[a]=e();return te.makeTensor(s,t,n)}const XV=ne({rand_:Sfe});var D1={exports:{}},Cfe=D1.exports,YP;function kfe(){return YP||(YP=1,(function(t){(function(e,n,r){function s(l){var c=this,f=o();c.next=function(){var p=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=p-(c.c=p|0)},c.c=1,c.s0=f(" "),c.s1=f(" "),c.s2=f(" "),c.s0-=f(l),c.s0<0&&(c.s0+=1),c.s1-=f(l),c.s1<0&&(c.s1+=1),c.s2-=f(l),c.s2<0&&(c.s2+=1),f=null}function a(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function i(l,c){var f=new s(l),p=c&&c.state,m=f.next;return m.int32=function(){return f.next()*4294967296|0},m.double=function(){return m()+(m()*2097152|0)*11102230246251565e-32},m.quick=m,p&&(typeof p=="object"&&a(p,f),m.state=function(){return a(f,{})}),m}function o(){var l=4022871197,c=function(f){f=String(f);for(var p=0;p<f.length;p++){l+=f.charCodeAt(p);var m=.02519603282416938*l;l=m>>>0,m-=l,m*=l,l=m>>>0,m-=l,l+=m*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=i:this.alea=i})(Cfe,t)})(D1)),D1.exports}var z1={exports:{}},Nfe=z1.exports,QP;function Tfe(){return QP||(QP=1,(function(t){(function(e,n,r){function s(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var p=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^p^p>>>8},o===(o|0)?l.x=o:c+=o;for(var f=0;f<c.length+64;f++)l.x^=c.charCodeAt(f)|0,l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function i(o,l){var c=new s(o),f=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var m=c.next()>>>11,y=(c.next()>>>0)/4294967296,b=(m+y)/(1<<21);while(b===0);return b},p.int32=c.next,p.quick=p,f&&(typeof f=="object"&&a(f,c),p.state=function(){return a(c,{})}),p}n&&n.exports?n.exports=i:this.xor128=i})(Nfe,t)})(z1)),z1.exports}var P1={exports:{}},Efe=P1.exports,ZP;function Ife(){return ZP||(ZP=1,(function(t){(function(e,n,r){function s(o){var l=this,c="";l.next=function(){var p=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(p^p<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var f=0;f<c.length+64;f++)l.x^=c.charCodeAt(f)|0,f==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function i(o,l){var c=new s(o),f=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var m=c.next()>>>11,y=(c.next()>>>0)/4294967296,b=(m+y)/(1<<21);while(b===0);return b},p.int32=c.next,p.quick=p,f&&(typeof f=="object"&&a(f,c),p.state=function(){return a(c,{})}),p}n&&n.exports?n.exports=i:this.xorwow=i})(Efe,t)})(P1)),P1.exports}var L1={exports:{}},Afe=L1.exports,JP;function jfe(){return JP||(JP=1,(function(t){(function(e,n,r){function s(o){var l=this;l.next=function(){var f=l.x,p=l.i,m,y;return m=f[p],m^=m>>>7,y=m^m<<24,m=f[p+1&7],y^=m^m>>>10,m=f[p+3&7],y^=m^m>>>3,m=f[p+4&7],y^=m^m<<7,m=f[p+7&7],m=m^m<<13,y^=m^m<<9,f[p]=y,l.i=p+1&7,y};function c(f,p){var m,y=[];if(p===(p|0))y[0]=p;else for(p=""+p,m=0;m<p.length;++m)y[m&7]=y[m&7]<<15^p.charCodeAt(m)+y[m+1&7]<<13;for(;y.length<8;)y.push(0);for(m=0;m<8&&y[m]===0;++m);for(m==8?y[7]=-1:y[m],f.x=y,f.i=0,m=256;m>0;--m)f.next()}c(l,o)}function a(o,l){return l.x=o.x.slice(),l.i=o.i,l}function i(o,l){o==null&&(o=+new Date);var c=new s(o),f=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var m=c.next()>>>11,y=(c.next()>>>0)/4294967296,b=(m+y)/(1<<21);while(b===0);return b},p.int32=c.next,p.quick=p,f&&(f.x&&a(f,c),p.state=function(){return a(c,{})}),p}n&&n.exports?n.exports=i:this.xorshift7=i})(Afe,t)})(L1)),L1.exports}var M1={exports:{}},$fe=M1.exports,eL;function Rfe(){return eL||(eL=1,(function(t){(function(e,n,r){function s(o){var l=this;l.next=function(){var f=l.w,p=l.X,m=l.i,y,b;return l.w=f=f+1640531527|0,b=p[m+34&127],y=p[m=m+1&127],b^=b<<13,y^=y<<17,b^=b>>>15,y^=y>>>12,b=p[m]=b^y,l.i=m,b+(f^f>>>16)|0};function c(f,p){var m,y,b,v,x,S=[],C=128;for(p===(p|0)?(y=p,p=null):(p=p+"\0",y=0,C=Math.max(C,p.length)),b=0,v=-32;v<C;++v)p&&(y^=p.charCodeAt((v+32)%p.length)),v===0&&(x=y),y^=y<<10,y^=y>>>15,y^=y<<4,y^=y>>>13,v>=0&&(x=x+1640531527|0,m=S[v&127]^=y+x,b=m==0?b+1:0);for(b>=128&&(S[(p&&p.length||0)&127]=-1),b=127,v=512;v>0;--v)y=S[b+34&127],m=S[b=b+1&127],y^=y<<13,m^=m<<17,y^=y>>>15,m^=m>>>12,S[b]=y^m;f.w=x,f.X=S,f.i=b}c(l,o)}function a(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function i(o,l){o==null&&(o=+new Date);var c=new s(o),f=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var m=c.next()>>>11,y=(c.next()>>>0)/4294967296,b=(m+y)/(1<<21);while(b===0);return b},p.int32=c.next,p.quick=p,f&&(f.X&&a(f,c),p.state=function(){return a(c,{})}),p}n&&n.exports?n.exports=i:this.xor4096=i})($fe,t)})(M1)),M1.exports}var F1={exports:{}},Ofe=F1.exports,tL;function _fe(){return tL||(tL=1,(function(t){(function(e,n,r){function s(o){var l=this,c="";l.next=function(){var p=l.b,m=l.c,y=l.d,b=l.a;return p=p<<25^p>>>7^m,m=m-y|0,y=y<<24^y>>>8^b,b=b-p|0,l.b=p=p<<20^p>>>12^m,l.c=m=m-y|0,l.d=y<<16^m>>>16^b,l.a=b-p|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var f=0;f<c.length+20;f++)l.b^=c.charCodeAt(f)|0,l.next()}function a(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function i(o,l){var c=new s(o),f=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var m=c.next()>>>11,y=(c.next()>>>0)/4294967296,b=(m+y)/(1<<21);while(b===0);return b},p.int32=c.next,p.quick=p,f&&(typeof f=="object"&&a(f,c),p.state=function(){return a(c,{})}),p}n&&n.exports?n.exports=i:this.tychei=i})(Ofe,t)})(F1)),F1.exports}var B1={exports:{}};const Dfe={},zfe=Object.freeze(Object.defineProperty({__proto__:null,default:Dfe},Symbol.toStringTag,{value:"Module"})),XA=T$(zfe);var Pfe=B1.exports,nL;function Lfe(){return nL||(nL=1,(function(t){(function(e,n,r){var s=256,a=6,i=52,o="random",l=r.pow(s,a),c=r.pow(2,i),f=c*2,p=s-1,m;function y(k,I,$){var _=[];I=I==!0?{entropy:!0}:I||{};var z=S(x(I.entropy?[k,E(n)]:k??C(),3),_),L=new b(_),R=function(){for(var D=L.g(a),U=l,X=0;D<c;)D=(D+X)*s,U*=s,X=L.g(1);for(;D>=f;)D/=2,U/=2,X>>>=1;return(D+X)/U};return R.int32=function(){return L.g(4)|0},R.quick=function(){return L.g(4)/4294967296},R.double=R,S(E(L.S),n),(I.pass||$||function(D,U,X,V){return V&&(V.S&&v(V,L),D.state=function(){return v(L,{})}),X?(r[o]=D,U):D})(R,z,"global"in I?I.global:this==r,I.state)}function b(k){var I,$=k.length,_=this,z=0,L=_.i=_.j=0,R=_.S=[];for($||(k=[$++]);z<s;)R[z]=z++;for(z=0;z<s;z++)R[z]=R[L=p&L+k[z%$]+(I=R[z])],R[L]=I;(_.g=function(D){for(var U,X=0,V=_.i,Y=_.j,B=_.S;D--;)U=B[V=p&V+1],X=X*s+B[p&(B[V]=B[Y=p&Y+U])+(B[Y]=U)];return _.i=V,_.j=Y,X})(s)}function v(k,I){return I.i=k.i,I.j=k.j,I.S=k.S.slice(),I}function x(k,I){var $=[],_=typeof k,z;if(I&&_=="object")for(z in k)try{$.push(x(k[z],I-1))}catch{}return $.length?$:_=="string"?k:k+"\0"}function S(k,I){for(var $=k+"",_,z=0;z<$.length;)I[p&z]=p&(_^=I[p&z]*19)+$.charCodeAt(z++);return E(I)}function C(){try{var k;return m&&(k=m.randomBytes)?k=k(s):(k=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(k)),E(k)}catch{var I=e.navigator,$=I&&I.plugins;return[+new Date,e,$,e.screen,E(n)]}}function E(k){return String.fromCharCode.apply(0,k)}if(S(r.random(),n),t.exports){t.exports=y;try{m=XA}catch{}}else r["seed"+o]=y})(typeof self<"u"?self:Pfe,[],Math)})(B1)),B1.exports}var TE,rL;function Mfe(){if(rL)return TE;rL=1;var t=kfe(),e=Tfe(),n=Ife(),r=jfe(),s=Rfe(),a=_fe(),i=Lfe();return i.alea=t,i.xor128=e,i.xorwow=n,i.xorshift7=r,i.xor4096=s,i.tychei=a,TE=i,TE}var aC=Mfe();const Ffe=.001,YV=.1;function Bfe(t,e,n){return n==null&&(n=JR()),YA(t,e,(r,s)=>eO(r,s,n))}function JR(){return te.backend.floatPrecision()===32?Ffe:YV}function YA(t,e,n){let r=!0;if((Qr(t)||Qr(e))&&(r=!1),Qr(t)&&Qr(e)&&(r=!0),r){const i=t.constructor.name,o=e.constructor.name;if(i!==o)throw new Error(`Arrays are of different type. Actual: ${i}. Expected: ${o}`)}if(Array.isArray(t)&&Array.isArray(e)){const i=pl(t),o=pl(e);if(!Ft(i,o))throw new Error(`Arrays have different shapes. Actual: [${i}]. Expected: [${o}]`)}const s=Qr(t)?t:hl(t),a=Qr(e)?e:hl(e);if(s.length!==a.length)throw new Error(`Arrays have different lengths actual: ${s.length} vs expected: ${a.length}.
Actual:   ${s}.
Expected: ${a}.`);for(let i=0;i<a.length;++i){const o=s[i],l=a[i];if(!n(o,l))throw new Error(`Arrays differ: actual[${i}] = ${o}, expected[${i}] = ${l}.
Actual:   ${s}.
Expected: ${a}.`)}typeof expect<"u"&&expect().nothing()}function Ufe(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function Wfe(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return tl(t)||tl(t[0])||tl(e)||tl(e[0])?YA(t,n,(r,s)=>r==s):YA(t,e,(r,s)=>eO(r,s,0))}function Vfe(t,e,n){if(n==null&&(n=JR()),!eO(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function eO(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function qfe(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function Gfe(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let s=0;s<r.length;s++)if(n[s]!==r[s])throw new Error(`Expected ArrayBuffer value at ${s} to be ${r[s]} but got ${n[s]} instead`)}function QV(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?QV(n):t[e]=ol(n)}return t}function Hfe(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function Kfe(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const Xfe=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:YV,createVideoElement:Hfe,encodeStrings:QV,expectArrayBuffersEqual:Gfe,expectArraysClose:Bfe,expectArraysEqual:Wfe,expectNumbersClose:Vfe,expectPromiseToFail:Ufe,expectValuesInRange:qfe,play:Kfe,testEpsilon:JR},Symbol.toStringTag,{value:"Module"}));class tO{constructor(e,n,r,s,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=a||Math.random();this.random=aC.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,a,i;do s=2*this.random()-1,a=2*this.random()-1,i=s*s+a*a;while(i>=1||i===0);const o=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*s*o,n=this.mean+this.stdDev*a*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Yfe{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const a=s||Math.random();this.randu=aC.alea(a.toString()),this.randn=new tO(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,a,i;for(;;){do s=this.randn.nextValue(),i=1+this.c*s;while(i<=0);if(i*=i*i,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-i+Math.log(i)),a=this.randu(),a<n||Math.log(a)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class Qfe{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=aC.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}function Zfe(t,e,n=1,r="float32",s){if(Xa(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const a=new Yfe(e,n,r,s),i=$t(t,r);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const ZV=ne({randomGamma_:Zfe});function Jfe(t,e=0,n=1,r,s){if(Xa(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const a=new tO(e,n,r,!1,s),i=$t(t,r);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const iC=ne({randomNormal_:Jfe});function ehe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return iC(t,0,1,e,n)}const JV=ne({randomStandardNormal_:ehe});function the(t,e=0,n=1,r="float32",s){Xa(t);const a=$t(t,r),i=new Qfe(e,n,null,s);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const Hu=ne({randomUniform_:the});function nhe(t,e,n,r){return Hu(t,e,n,"int32",r)}const e9=ne({randomUniformInt_:nhe});function yf(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return te.runKernel(k2,{},s)}function rhe(t){const n={input:G(t,"input","real")};return te.runKernel(N2,n)}const op=ne({real_:rhe});function she(t){const n={x:G(t,"x","reciprocal")};return te.runKernel(om,n)}const nO=ne({reciprocal_:she});function ahe(t){const n={x:G(t,"x","relu")};return te.runKernel(lm,n)}const Ro=ne({relu_:ahe});function ihe(t){const n={x:G(t,"x","relu6")};return te.runKernel(cm,n)}const oC=ne({relu6_:ihe});function ohe(t,e){const r={x:G(t,"x","reverse")},s={dims:e};return te.runKernel(gb,r,s)}const wi=ne({reverse_:ohe});function lhe(t){const e=G(t,"x","reverse");return q(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),wi(e,0)}const t9=ne({reverse1d_:lhe});function che(t,e){const n=G(t,"x","reverse");return q(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),wi(n,e)}const n9=ne({reverse2d_:che});function uhe(t,e){const n=G(t,"x","reverse");return q(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),wi(n,e)}const r9=ne({reverse3d_:uhe});function dhe(t,e){const n=G(t,"x","reverse");return q(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),wi(n,e)}const s9=ne({reverse4d_:dhe});function fhe(t){const n={x:G(t,"x","round")};return te.runKernel(um,n)}const lC=ne({round_:fhe});function hhe(t){const n={x:G(t,"x","rsqrt","float32")};return te.runKernel(dm,n)}const cC=ne({rsqrt_:hhe});function phe(t){const n={x:G(t,"x","selu")};return te.runKernel(fm,n)}const uC=ne({selu_:phe});function mhe(t,e,n,r,s,a=[1,1],i="NHWC"){const o=G(t,"x","separableConv2d"),l=G(e,"depthwiseFilter","separableConv2d"),c=G(n,"pointwiseFilter","separableConv2d");let f=o,p=!1;if(o.rank===3&&(p=!0,f=le(o,[1,o.shape[0],o.shape[1],o.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");q(f.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${f.rank}.`),q(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),q(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),q(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),q(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const m=l.shape[2],y=l.shape[3];q(c.shape[2]===m*y,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${m*y}, but got ${c.shape[2]}.`);const b=Tm(f,l,r,s,i,a),x=uc(b,c,1,"valid",i);return p?le(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const dC=ne({separableConv2d_:mhe});async function ghe(t,e){const n=G(t,"x","setdiff1d"),r=G(e,"y","setdiff1d");q(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),q(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),q(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),a=await r.data(),i=new Set(a);let o=0;for(let f=0;f<s.length;f++)i.has(s[f])||o++;const l=new Ir([o],n.dtype),c=new Ir([o],"int32");for(let f=0,p=0;f<s.length;f++)i.has(s[f])||(l.values[p]=s[f],c.values[p]=f,p++);return[l.toTensor(),c.toTensor()]}const a9=ghe;function yhe(t){const n={x:G(t,"x","sign")};return te.runKernel(mm,n)}const rO=ne({sign_:yhe});function bhe(t){const n={x:G(t,"x","sin","float32")};return te.runKernel(hm,n)}const fC=ne({sin_:bhe});function xhe(t){const n={x:G(t,"x","sinh")};return te.runKernel(pm,n)}const hC=ne({sinh_:xhe});function vhe(t,e,n){const r=G(t,"x","slice1d");return q(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Gt(r,[e],[n])}const Ub=ne({slice1d_:vhe});function whe(t,e,n){const r=G(t,"x","slice2d");return q(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Gt(r,e,n)}const pC=ne({slice2d_:whe});function She(t,e,n){const r=G(t,"x","slice3d");return q(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Gt(r,e,n)}const Wb=ne({slice3d_:She});function Che(t,e,n){const r=G(t,"x","slice4d");return q(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Gt(r,e,n)}const lp=ne({slice4d_:Che});function khe(t,e=-1){const n=G(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return te.runKernel(Sb,r,s)}const Vb=ne({softmax_:khe});function Nhe(t){q(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return te.runKernel(i2,e)}const qb=ne({fft_:Nhe});function The(t){q(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return te.runKernel(u2,e)}const cp=ne({ifft_:The});function Ehe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=le(t,[n,e]);r=cp(s)}else{const s=[n,2*(e-1)],a=le(op(t),[n,e]),i=le(Ob(t),[n,e]),o=wi(Gt(a,[0,1],[n,e-2]),1),l=oe(wi(Gt(i,[0,1],[n,e-2]),1),gt(-1)),c=mr([a,o],1),f=mr([i,l],1),p=le(cc(c,f),[s[0],s[1]]);r=cp(p)}if(r=op(r),t.rank===3&&t.shape[0]!==0){const s=r,a=t.shape[0];r=le(r,[a,r.shape[0]/a,r.shape[1]]),s.dispose()}return r}const mC=ne({irfft_:Ehe});function Ihe(t,e,n=0){const s={x:G(t,"x","split")},a={numOrSizeSplits:e,axis:n};return te.runKernel(wb,s,a)}const ya=ne({split_:Ihe});function Ahe(t,e){q(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const b=t.shape.map(x=>0),v=t.shape.map(x=>x);v[t.shape.length-1]=e,s=Gt(t,b,v),n=e}else if(e!=null&&e>n){const b=t.shape.map(v=>v);b[t.shape.length-1]=e-n,s=mr([t,Tr(b)],t.shape.length-1),n=e}else s=t;const a=Ht(s),i=le(cc(s,a),[r,n]),o=qb(i),l=Math.floor(n/2)+1,c=op(o),f=Ob(o),p=ya(c,[l,n-l],c.shape.length-1),m=ya(f,[l,n-l],f.shape.length-1),y=s.shape.slice();return y[s.shape.length-1]=l,le(cc(p[0],m[0]),y)}const Gb=ne({rfft_:Ahe});function jhe(t,e){let n=G(t,"a","squaredDifference"),r=G(e,"b","squaredDifference");[n,r]=tr(n,r),At(n.shape,r.shape);const s={a:n,b:r},a={};return te.runKernel(xm,s,a)}const gC=ne({squaredDifference_:jhe});function $he(t,e){const n=G(t,"x","squeeze","string_or_numeric");return le(n,xc(n.shape,e).newShape)}const Ku=ne({squeeze_:$he});function Rhe(t,e=0){const n=By(t,"tensors","stack","string_or_numeric");q(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&q(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return te.runKernel(cb,r,s)}const Sa=ne({stack_:Rhe});function Ohe(t,e=0){const r={x:G(t,"x","step")},s={alpha:e};return te.runKernel(km,r,s)}const Lf=ne({step_:Ohe});function _he(t,e,n,r,s=0,a=0,i=0,o=0,l=0){const f={x:G(t,"x","stridedSlice","string_or_numeric")},p={begin:e,end:n,strides:r,beginMask:s,endMask:a,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};return te.runKernel(P2,f,p)}const sO=ne({stridedSlice_:_he});function Dhe(t){const n={x:G(t,"x","tan","float32")};return te.runKernel(wm,n)}const aO=ne({tan_:Dhe});function Ls(t,e){Rf(t);const n=pl(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Wu(t,null,n,e)}function Xh(t,e,n){if(Rf(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=pl(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Wu(t,e,r,n)}function iO(t,e,n){if(Rf(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=pl(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Wu(t,e,r,n)}function i9(t,e,n){if(Rf(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=pl(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Wu(t,e,r,n)}function o9(t,e,n){if(Rf(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=pl(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Wu(t,e,r,n)}function l9(t,e,n){if(Rf(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=pl(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Wu(t,e,r,n)}function oO(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(a+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(a+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(a+` update.rank != ${s+t.length-r}`);for(let i=0;i<s;++i)if(n.shape[i]!==e.shape[i])throw new Error(a+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-s;++i)if(n.shape[i+s]!==t[i+r])throw new Error(a+` updates.shape[${i+s}] (${n.shape[i+s]}) != shape[${i+s}] (${t[i+s]})`)}function yC(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}oO(n,e,t)}function Xu(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,a=n.length;let i=1;for(let p=s;p<a;++p)i*=n[p];const o=s<1?1:s,l=Ee(e.shape)/o,c=[...pt(n.slice(0,s)),1],f=Ee(n);return{sliceRank:s,numUpdates:l,sliceSize:i,strides:c,outputSize:f}}const zhe=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Xu,validateInput:yC,validateUpdateShape:oO},Symbol.toStringTag,{value:"Module"}));function Phe(t,e,n){const r=G(t,"tensor","tensorScatterupdate"),s=G(e,"indices","tensorScatterupdate","int32"),a=G(n,"updates","tensorScatterupdate");if(yC(a,s,r.shape),r.dtype!==a.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${a.dtype}.`);const i={tensor:r,indices:s,updates:a},o={};return te.runKernel(A2,i,o)}const c9=ne({tensorScatterUpdate_:Phe});function Lhe(t,e=1,n=!0){const r=G(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const a={x:r},i={k:e,sorted:n},[o,l]=te.runKernel(B2,a,i);return{values:o,indices:l}}const lO=ne({topk_:Lhe});function Mhe(t,e=0,n=1,r,s){if(Xa(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new tO(e,n,r,!0,s),i=$t(t,r);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const bC=ne({truncatedNormal_:Mhe});function Fhe(t,e=0){const n=G(t,"x","unique","string_or_numeric");q(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[a,i]=te.runKernel(W2,r,s);return{values:a,indices:i}}const cO=ne({unique_:Fhe});function Bhe(t,e,n){const r=G(t,"x","unsortedSegmentSum"),s=G(e,"segmentIds","unsortedSegmentSum","int32");q(cf(n),()=>"numSegments must be of dtype int");const a={x:r,segmentIds:s},i={numSegments:n};return te.runKernel(Nb,a,i)}const xC=ne({unsortedSegmentSum_:Bhe});function Uhe(t,e=0){const n=G(t,"x","unstack","string_or_numeric");q(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return te.runKernel(kb,r,s)}const Si=ne({unstack_:Uhe});function u9(t,e){return sC(t,e,"right")}function uO(t,e=!0,n,r){return te.makeVariable(t,e,n,r)}function vC(t,e){const n=[];for(let a=0;a<e.length;a++)e[a]&&n.push(a);const r=$t(t,"int32"),s=$t([n.length,t.length],"int32");for(let a=0;a<n.length;a++){const i=r.indexToLoc(n[a]),o=a*t.length;s.values.set(i,o)}return s.toTensor()}async function Whe(t){const e=G(t,"condition","whereAsync","bool"),n=await e.data(),r=vC(e.shape,n);return t!==e&&e.dispose(),r}const dO=Whe;async function Vhe(t,e,n){const r=G(t,"tensor","boolMask"),s=G(e,"mask","boolMask","bool"),a=n??0,i=s.rank,o=r.shape;q(i>0,()=>"mask cannot be scalar"),ys(o.slice(a,a+i),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let v=a;v<a+i;v++)l*=o[v];const c=o.slice(0,a).concat([l],o.slice(a+i)),f=le(r,c),p=le(s,[-1]),m=await dO(p),y=Ku(m,[1]),b=jm(f,y,a);return t!==r&&r.dispose(),e!==s&&s.dispose(),y.dispose(),f.dispose(),p.dispose(),m.dispose(),b}const d9=Vhe;function qhe(t,e,n){const r=G(t,"x","transpose");if(e==null&&(e=r.shape.map((i,o)=>o).reverse()),q(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(i=>{q(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},a={perm:e};return r.dtype==="complex64"?me(()=>{let i=op(r),o=Ob(r);return i=te.runKernel(Qd,{x:i},a),o=te.runKernel(Qd,{x:o},a),n&&(o=zn(o)),cc(i,o)}):te.runKernel(Qd,s,a)}const Ut=ne({transpose_:qhe});function Ghe(t,e,n,r,s=!0){const a=G(t,"v","movingAverage"),i=G(e,"x","movingAverage"),o=G(n,"decay","movingAverage");iV(a,i),q(Ft(a.shape,i.shape),()=>"Shape mismatch in v and x");const l=gt(1),c=tt(l,o);let f=oe(tt(i,a),c);if(s){q(r!=null,()=>"When using zeroDebias: true, step is required.");const p=G(r,"step","movingAverage");f=ut(f,tt(l,ml(o,p)))}return Be(a,f)}const f9=ne({movingAverage_:Ghe});function Hhe(t,e,n){Xa(n);const r=G(t,"indices","scatterND","int32"),s=G(e,"updates","scatterND");yC(s,r,n);const a={indices:r,updates:s},i={shape:n};return te.runKernel(I2,a,i)}const h9=ne({scatterND_:Hhe});function Khe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,a=t.rank>1?t.shape[1]:1;if(n.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${a}.`);const i=e.size;if(!(e.rank===0||e.rank===1&&i===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function Xhe(t,e,n,r=0){Xa(n);const s=G(t,"sparseIndices","sparseToDense","int32"),a=G(e,"sparseValues","sparseToDense","string_or_numeric"),i=G(r,"defaultValue","sparseToDense",a.dtype);Khe(s,a,n,i);const o={sparseIndices:s,sparseValues:a,defaultValue:i},l={outputShape:n};return te.runKernel(D2,o,l)}const p9=ne({sparseToDense_:Xhe});function Yhe(t,e){const n=G(e,"indices","gatherND","int32"),s={params:G(t,"x","gatherND","string_or_numeric"),indices:n};return te.runKernel(c2,s)}const m9=ne({gatherND_:Yhe});function Qhe(t,e){if(e==null)return t.shape.slice();if(Ft(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}function Zhe(t,e,n,r){const s=G(t,"x","dropout");if(q(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),q(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof pn?s.clone():s;const a=Qhe(s,n),i=1-e,o=ut(Am(Be(Hu(a,0,1,"float32",r),i)),i);return oe(s,o)}const fO=ne({dropout_:Zhe});function hO(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function wC(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let a=0;a<t;++a){const i=2*Math.PI*a/(t+r-1);s[a]=e-n*Math.cos(i)}return Ls(s,"float32")}async function Jhe(t,e,n=1){const r=G(t,"predictions","inTopK"),s=G(e,"targets","inTopK");q(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),q(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),ys(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];q(n>0&&n<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${n}`);const i=await r.data(),o=await s.data(),[l,c]=[i.length/a,a],f=ts("bool",l);for(let p=0;p<l;p++){const m=p*c,y=i.subarray(m,m+c),b=[];for(let v=0;v<y.length;v++)b.push({value:y[v],index:v});b.sort((v,x)=>x.value-v.value),f[p]=0;for(let v=0;v<n;v++)if(b[v].index===o[p]){f[p]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),Ki(f,s.shape,"bool")}const g9=Jhe;function epe(t,e,n,r,s,a="NHWC",i){let o=t;t.rank===3&&(o=le(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=le(e,[1,e.shape[0],e.shape[1],e.shape[2]])),q(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),q(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),q(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=a==="NHWC"?o.shape[3]:o.shape[1],f=a==="NHWC"?l.shape[3]:l.shape[1];q(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),q(f===n[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must match output depth for filter (${n[3]}).`),sa("conv2dDerFilter",s,i);const p={x:o,dy:l},m={strides:r,pad:s,dataFormat:a,dimRoundingMode:i,filterShape:n};return te.runKernel(HS,p,m)}const pO=ne({conv2DBackpropFilter_:epe});function SC(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return oe(t,Lf(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function CC(t,e){let n=e;const r=Ar(t.shape,e.shape);return r.length>0&&(n=nt(n,r)),le(n,t.shape)}function kC(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Ro(t);if(e==="elu")return Em(t);if(e==="relu6")return oC(t);if(e==="prelu")return Bb(t,n);if(e==="leakyrelu")return _b(t,r);if(e==="sigmoid")return vo(t);throw new Error(`Unknown fused activation ${e}.`)}const NC=(t,e)=>!(t>0)||e==="linear";function tpe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(l=l||"linear",NC(te.state.gradientDepth,l)===!1){q(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let $=uc(t,e,n,r,s,a,i);return o!=null&&($=Be($,o)),kC($,l,c,f)}const p=G(t,"x","conv2d","float32"),m=G(e,"filter","conv2d","float32");let y=p,b=!1;p.rank===3&&(b=!0,y=le(p,[1,p.shape[0],p.shape[1],p.shape[2]])),q(y.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${y.rank}.`),q(m.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${m.rank}.`),sa("fused conv2d",r,i);const v=s==="NHWC"?y.shape[3]:y.shape[1];q(m.shape[2]===v,()=>`Error in conv2d: depth of input (${v}) must match input depth for filter ${m.shape[2]}.`),q(bs(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);const x=rs(y.shape,m.shape,n,a,r,i);let S;o!=null&&(S=G(o,"bias","fused conv2d"),[S]=tr(S,p),s==="NHWC"?At(x.outShape,S.shape):(q(S.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${S.shape.length}.`),q(S.shape.length===0||S.shape[0]===x.outChannels||S.shape[0]===1,()=>`Error in fused conv2d: bias shape (${S.shape}) is not compatible with the number of output channels (${x.outChannels})`)));let C;if(c!=null){const $=c.shape;if(q($.length<=1||$.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${$.length}.`),$.length===1)q($[0]===1||$[0]===x.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${$}) is not compatible with the number of output channels (${x.outChannels}).`);else if($.length===3)try{At($,x.outShape)}catch{const z=`Error in fused conv2d: PReLU activation weights (${$}) is not compatible with the output shape of the conv2d (${x.outShape}).`;throw Error(z)}C=G(c,"prelu weights","fused conv2d")}const E=($,_)=>{q(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[z,L,R,D]=_,U=SC($,R,l);q(Ou(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const X=RR(L.shape,U,z,n,r),V=pO(L,U,z.shape,n,r),Y=[X,V];if(D!=null){const B=CC(D,U);Y.push(B)}return Y},k={x:y,filter:m,bias:S,preluActivationWeights:C},I={strides:n,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i,activation:l,leakyreluAlpha:f};return o==null?gl((_,z,L)=>{let R=te.runKernel(zy,k,I);return L([z,_,R]),b&&(R=le(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:E}})(y,m):gl((_,z,L,R)=>{let D=te.runKernel(zy,k,I);return R([z,_,D,L]),b&&(D=le(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:E}})(y,m,S)}const y9=ne({fusedConv2d_:tpe});function npe(t,e,n,r,s,a=[1,1],i){let o=t;t.rank===3&&(o=le(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=le(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:o,dy:l},f={strides:r,pad:s,dimRoundingMode:i,dilations:a,filterShape:n};return te.runKernel(e2,c,f)}const b9=ne({depthwiseConv2dNativeBackpropFilter_:npe});function rpe(t,e,n,r,s,a=[1,1],i){let o=e,l=!1;e.rank===3&&(l=!0,o=le(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:o,filter:n},f={strides:r,pad:s,dimRoundingMode:i,dilations:a,inputShape:t},p=te.runKernel(t2,c,f);return l?le(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const x9=ne({depthwiseConv2dNativeBackpropInput_:rpe});function spe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(NC(te.state.gradientDepth,l)===!1){let I=Tm(t,e,n,r,s,a,i);return o!=null&&(I=Be(I,o)),kC(I,l,c,f)}const p=G(t,"x","depthwiseConv2d","float32"),m=G(e,"filter","depthwiseConv2d","float32");let y=p,b=!1;p.rank===3&&(b=!0,y=le(p,[1,p.shape[0],p.shape[1],p.shape[2]])),q(y.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${y.rank}.`),q(m.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${m.rank}.`),q(y.shape[3]===m.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${y.shape[3]}) must match the inChannels dimension in filter ${m.shape[2]}.`),a==null&&(a=[1,1]),q(bs(n,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),sa("fused depthwiseConv2d",r,i);const v=rs(y.shape,m.shape,n,a,r,i,!0);let x;o!=null&&(x=G(o,"bias","fused conv2d"),[x]=tr(x,p),At(v.outShape,x.shape));let S;c!=null&&(S=G(c,"prelu weights","fused depthwiseConv2d"));const C=(I,$)=>{q(Ou(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[_,z,L,R]=$,D=SC(I,L,l),U=x9(z.shape,D,_,n,r,a,i),X=b9(z,D,_.shape,n,r,a,i);if(R!=null){const V=CC(x,D);return[U,X,V]}return[U,X]},E={x:y,filter:m,bias:x,preluActivationWeights:S},k={strides:n,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i,activation:l,leakyreluAlpha:f};return o==null?gl(($,_,z)=>{let L=te.runKernel(Py,E,k);return z([_,$,L]),b&&(L=le(L,[L.shape[1],L.shape[2],L.shape[3]])),{value:L,gradFunc:C}})(y,m):gl(($,_,z,L)=>{let R=te.runKernel(Py,E,k);return L([_,$,R,z]),b&&(R=le(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:C}})(y,m,x)}const ape=ne({fusedDepthwiseConv2d_:spe});function ipe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:a="linear",preluActivationWeights:i,leakyreluAlpha:o=.2}){if(NC(te.state.gradientDepth,a)===!1){let D=zt(t,e,n,r);return s!=null&&(D=Be(D,s)),kC(D,a,i,o)}let l=G(t,"a","fused matMul"),c=G(e,"b","fused matMul");[l,c]=tr(l,c);const f=n?l.shape[l.rank-2]:l.shape[l.rank-1],p=r?c.shape[c.rank-1]:c.shape[c.rank-2],m=n?l.shape[l.rank-1]:l.shape[l.rank-2],y=r?c.shape[c.rank-2]:c.shape[c.rank-1],b=l.shape.slice(0,-2),v=c.shape.slice(0,-2),x=Ee(b),S=Ee(v);q(f===p,()=>`Error in fused matMul: inner shapes (${f}) and (${p}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const E=At(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([m,y]),k=n?le(l,[x,f,m]):le(l,[x,m,f]),I=r?le(c,[S,y,p]):le(c,[S,p,y]);let $;s!=null&&($=G(s,"bias","fused matMul"),[$]=tr($,l),At(E,$.shape));let _;i!=null&&(_=G(i,"prelu weights","fused matMul"));const z=(D,U)=>{const[X,V,Y,B]=U,Z=SC(le(D,Y.shape),Y,a);let J,ae;if(!n&&!r?(J=zt(Z,V,!1,!0),ae=zt(X,Z,!0,!1)):!n&&r?(J=zt(Z,V,!1,!1),ae=zt(Z,X,!0,!1)):n&&!r?(J=zt(V,Z,!1,!0),ae=zt(X,Z,!1,!1)):(J=zt(V,Z,!0,!0),ae=zt(Z,X,!0,!0)),s!=null){const ee=CC(B,Z);return[J,ae,ee]}else return[J,ae]},L={a:k,b:I,bias:$,preluActivationWeights:_},R={transposeA:n,transposeB:r,activation:a,leakyreluAlpha:o};return s==null?gl((U,X,V)=>{const Y=te.runKernel(Dy,L,R);return V([U,X,Y]),{value:le(Y,E),gradFunc:z}})(k,I):gl((U,X,V,Y)=>{const B=te.runKernel(Dy,L,R);return Y([U,X,B,V]),{value:le(B,E),gradFunc:z}})(k,I,$)}const QA=ne({fusedMatMul_:ipe});const v9=Object.freeze(Object.defineProperty({__proto__:null,conv2d:y9,depthwiseConv2d:ape,matMul:QA},Symbol.toStringTag,{value:"Module"}));function ope(t){return wC(t,.54,.46)}const lpe=ne({hammingWindow_:ope});function cpe(t){return wC(t,.5,.5)}const w9=ne({hannWindow_:cpe});function upe(t,e,n,r=!1,s=0){let a=0;const i=[];for(;a+e<=t.size;)i.push(Gt(t,a,e)),a+=n;if(r)for(;a<t.size;){const o=a+e-t.size,l=mr([Gt(t,a,e-o),zf([o],s)]);i.push(l),a+=n}return i.length===0?Xh([],[0,e]):le(mr(i),[i.length,e])}const S9=ne({frame_:upe});function dpe(t,e,n,r,s=w9){r==null&&(r=hO(e));const a=S9(t,e,n),i=oe(a,s(e));return Gb(i,r)}const fpe=ne({stft_:dpe});function hpe(t,e,n,r,s="bilinear",a=0){const i=G(t,"image","cropAndResize"),o=G(e,"boxes","cropAndResize","float32"),l=G(n,"boxInd","cropAndResize","int32"),c=o.shape[0];q(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),q(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`),q(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`),q(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),q(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),q(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const f={image:i,boxes:o,boxInd:l},p={method:s,extrapolationValue:a,cropSize:r};return te.runKernel(QS,f,p)}const ppe=ne({cropAndResize_:hpe});function mpe(t){const e=G(t,"image","flipLeftRight","float32");q(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return te.runKernel(l2,n,{})}const gpe=ne({flipLeftRight_:mpe});function ype(t){const e=G(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];q(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),q(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,fi(e,s)}const bpe=ne({grayscaleToRGB_:ype});function xpe(t){const e=G(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];q(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),q(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,a=Ge(e,"float32"),i=Ls([.2989,.587,.114]);let o;switch(e.rank){case 2:o=Ld("ij,j->i",a,i);break;case 3:o=Ld("ijk,k->ij",a,i);break;case 4:o=Ld("ijkl,l->ijk",a,i);break;case 5:o=Ld("ijklm,m->ijkl",a,i);break;case 6:o=Ld("ijklmn,n->ijklm",a,i);break;default:throw new Error("Not a valid tensor rank.")}return o=zs(o,-1),Ge(o,s)}const vpe=ne({rgbToGrayscale_:xpe});function wpe(t,e,n=0,r=.5){const s=G(t,"image","rotateWithOffset","float32");q(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const a={image:s},i={radians:e,fillValue:n,center:r};return te.runKernel(V2,a,i)}const Spe=ne({rotateWithOffset_:wpe});function $m(t,e,n,r,s,a){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),a==null&&(a=0);const i=t.shape[0];return n=Math.min(n,i),q(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),q(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),q(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),q(e.rank===1,()=>"scores must be a 1D tensor"),q(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),q(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:a}}function Cpe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const a=G(t,"boxes","nonMaxSuppression","float32"),i=G(e,"scores","nonMaxSuppression","float32"),o=$m(a,i,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return te.runKernel(b2,{boxes:a,scores:i},l)}const kpe=ne({nonMaxSuppression_:Cpe});function Npe(t,e,n){const r=Tpe(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function Tpe(t,e,n){return Ipe(t,e,n||Epe)}function Epe(t,e){return t>e?1:t<e?-1:0}function Ipe(t,e,n){let r=0,s=t.length,a=0,i=!1;for(;r<s;){a=r+(s-r>>>1);const o=n(e,t[a]);o>0?r=a+1:(s=a,i=!o)}return i?r:-r-1}function TC(t,e,n,r,s){return mO(t,e,n,r,s,0)}function EC(t,e,n,r,s,a){return mO(t,e,n,r,s,0,!1,a,!0)}function IC(t,e,n,r,s,a){return mO(t,e,n,r,s,a,!0)}function mO(t,e,n,r,s,a,i=!1,o=!1,l=!1){const c=[];for(let x=0;x<e.length;x++)e[x]>s&&c.push({score:e[x],boxIndex:x,suppressBeginIndex:0});c.sort(sL);const f=a>0?-.5/a:0,p=[],m=[];for(;p.length<n&&c.length>0;){const x=c.pop(),{score:S,boxIndex:C,suppressBeginIndex:E}=x;if(S<s)break;let k=!1;for(let I=p.length-1;I>=E;--I){const $=Ape(t,C,p[I]);if($>=r){k=!0;break}if(x.score=x.score*jpe(r,f,$),x.score<=s)break}x.suppressBeginIndex=p.length,k||(x.score===S?(p.push(C),m.push(x.score)):x.score>s&&Npe(c,x,sL))}const y=p.length,b=n-y;o&&b>0&&(p.push(...new Array(b).fill(0)),m.push(...new Array(b).fill(0)));const v={selectedIndices:p};return i&&(v.selectedScores=m),l&&(v.validOutputs=y),v}function Ape(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),f=Math.min(s[1],s[3]),p=Math.max(s[0],s[2]),m=Math.max(s[1],s[3]),y=(o-a)*(l-i),b=(p-c)*(m-f);if(y<=0||b<=0)return 0;const v=Math.max(a,c),x=Math.max(i,f),S=Math.min(o,p),C=Math.min(l,m),E=Math.max(S-v,0)*Math.max(C-x,0);return E/(y+b-E)}function jpe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function sL(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}async function $pe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const a=G(t,"boxes","nonMaxSuppressionAsync"),i=G(e,"scores","nonMaxSuppressionAsync"),o=$m(a,i,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l=await Promise.all([a.data(),i.data()]),c=l[0],f=l[1],{selectedIndices:p}=TC(c,f,n,r,s);return a!==t&&a.dispose(),i!==e&&i.dispose(),Ls(p,"int32")}const Rpe=$pe;function Ope(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,a=0){const i=G(t,"boxes","nonMaxSuppression"),o=G(e,"scores","nonMaxSuppression"),l=$m(i,o,n,r,s,a);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,a=l.softNmsSigma;const c={boxes:i,scores:o},f={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:a},p=te.runKernel(v2,c,f);return{selectedIndices:p[0],selectedScores:p[1]}}const _pe=ne({nonMaxSuppressionWithScore_:Ope});async function Dpe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,a=0){const i=G(t,"boxes","nonMaxSuppressionAsync"),o=G(e,"scores","nonMaxSuppressionAsync"),l=$m(i,o,n,r,s,a);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,a=l.softNmsSigma;const c=await Promise.all([i.data(),o.data()]),f=c[0],p=c[1],{selectedIndices:m,selectedScores:y}=IC(f,p,n,r,s,a);return i!==t&&i.dispose(),o!==e&&o.dispose(),{selectedIndices:Ls(m,"int32"),selectedScores:Ls(y)}}const zpe=Dpe;function Ppe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,a=!1){const i=G(t,"boxes","nonMaxSuppression"),o=G(e,"scores","nonMaxSuppression"),l=$m(i,o,n,r,s,null),c=l.maxOutputSize,f=l.iouThreshold,p=l.scoreThreshold,m={boxes:i,scores:o},y={maxOutputSize:c,iouThreshold:f,scoreThreshold:p,padToMaxOutputSize:a},b=te.runKernel(x2,m,y);return{selectedIndices:b[0],validOutputs:b[1]}}const Lpe=ne({nonMaxSuppressionPadded_:Ppe});async function Mpe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,a=!1){const i=G(t,"boxes","nonMaxSuppressionAsync"),o=G(e,"scores","nonMaxSuppressionAsync"),l=$m(i,o,n,r,s,null),c=l.maxOutputSize,f=l.iouThreshold,p=l.scoreThreshold,[m,y]=await Promise.all([i.data(),o.data()]),{selectedIndices:b,validOutputs:v}=EC(m,y,c,f,p,a);return i!==t&&i.dispose(),o!==e&&o.dispose(),{selectedIndices:Ls(b,"int32"),validOutputs:gt(v,"int32")}}const Fpe=Mpe;function Bpe(t,e,n=!1,r=!1){const s=G(t,"images","resizeBilinear");q(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),q(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),q(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=s,i=!1;s.rank===3&&(i=!0,a=le(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:a},l={alignCorners:n,halfPixelCenters:r,size:e},c=te.runKernel(mb,o,l);return i?le(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const C9=ne({resizeBilinear_:Bpe});function Upe(t,e,n=!1,r=!1){const s=G(t,"images","resizeNearestNeighbor");q(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),q(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),q(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),q(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=s,i=!1;s.rank===3&&(i=!0,a=le(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:a},l={alignCorners:n,halfPixelCenters:r,size:e},c=te.runKernel(pb,o,l);return i?le(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const k9=ne({resizeNearestNeighbor_:Upe});function Wpe(t,e="binary",n=!1,r=.5){const s=G(t,"image","threshold"),a=.2989,i=.587,o=.114,l=s.shape[0]*s.shape[1];let c=oe(Ls([r]),255),f,p,m,y;if(q(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),q(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),q(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),q(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[f,p,m]=ya(s,[1,1,1],-1);const x=oe(f,a),S=oe(p,i),C=oe(m,o);y=Be(Be(x,S),C)}else y=t;if(e==="otsu"){const x=TR(Ge(lC(y),"int32"),Ki([]),256);c=Vpe(x,l)}const b=n?Gu(y,c):Ta(y,c);return Ge(oe(b,255),"int32")}function Vpe(t,e){let n=Ls([-1]),r=Ls([0]),s=Ls([0]),a,i,o,l,c,f;for(let p=0;p<t.size-1;p++){a=Gt(t,0,p+1),i=Gt(t,p+1),c=ut(nt(a),e),f=ut(nt(i),e);const m=nt(oe(a,yf(0,a.size)));o=ut(m,nt(a));const y=zf(i.shape,a.size),b=Be(yf(0,i.size),y),v=oe(i,b);l=ut(nt(v),nt(i));const x=tt(o,l),S=tt(o,l),C=oe(c,f);s=oe(oe(C,x),S);const E=Ta(s,r);r=ms(E,s,r),n=ms(E,Ls([p]),n)}return n}const qpe=ne({threshold_:Wpe});function Gpe(t,e,n="nearest",r="constant",s=0,a){const i=G(t,"image","transform","float32"),o=G(e,"transforms","transform","float32");q(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),q(o.rank===2&&(o.shape[0]===i.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),q(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const l={image:i,transforms:o},c={interpolation:n,fillMode:r,fillValue:s,outputShape:a};return te.runKernel(U2,l,c)}const Hpe=ne({transform_:Gpe});function Kpe(t,e,n){const r=G(t,"a","bandPart");q(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[a,i]=r.shape.slice(-2);let o,l;typeof e=="number"?(q(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),q(e<=a,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`),o=G(e<0?a:e,"numLower","bandPart")):(q(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=ms(ap(e,0),a,Du(e,a))),typeof n=="number"?(q(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),q(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),l=G(n<0?i:n,"numUpper","bandPart")):(q(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=ms(ap(n,0),i,Du(n,i)));const c=le(yf(0,a,1,"int32"),[-1,1]),f=yf(0,i,1,"int32"),p=tt(c,f),m=ko(Gu(p,o),Cc(p,zn(l))),y=Tr([a,i],r.dtype);return le(Sa(Si(le(r,[-1,a,i])).map(b=>ms(m,b,y))),s)}const Xpe=ne({bandPart_:Kpe});function Ype(t){let e;if(Array.isArray(t)){e=!1,q(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let a=1;a<t.length;++a)q(t[a].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[a].shape[0]} vs. ${s})`)}else e=!0,t=ya(t,t.shape[0],0).map(s=>Ku(s,[0]));q(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(te.tidy(()=>{let a=r[s];if(s>0)for(let i=0;i<s;++i){const o=oe(nt(oe(n[i],a)),n[i]);a=tt(a,o)}return ut(a,Im(a,"euclidean"))}));return e?Sa(n,0):n}const Qpe=ne({gramSchmidt_:Ype});function Zpe(t,e=!1){if(q(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return aL(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Si(le(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],a=[];r.forEach(l=>{const[c,f]=aL(l,e);s.push(c),a.push(f)});const i=le(Sa(s,0),t.shape),o=le(Sa(a,0),t.shape);return[i,o]}}function aL(t,e=!1){return te.tidy(()=>{q(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=eC(n),a=ll(t);const i=Xh([[1]],[1,1]);let o=ll(i);const l=n>=r?r:n;for(let c=0;c<l;++c){const f=a,p=o,m=s;[o,a,s]=te.tidy(()=>{const y=Gt(a,[c,c],[n-c,1]),b=Im(y),v=Gt(a,[c,c],[1,1]),x=ms(Ta(v,0),Xh([[-1]]),Xh([[1]])),S=tt(v,oe(x,b)),C=ut(y,S);C.shape[0]===1?o=ll(i):o=mr([i,Gt(C,[1,0],[C.shape[0]-1,C.shape[1]])],0);const E=zn(ut(zt(x,S),b)),k=Gt(a,[c,0],[n-c,r]),I=oe(E,o),$=Ut(o);if(c===0)a=tt(k,zt(I,zt($,k)));else{const L=tt(k,zt(I,zt($,k)));a=mr([Gt(a,[0,0],[c,r]),L],0)}const _=Ut(I),z=Gt(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=tt(z,zt(zt(z,o),_));else{const L=tt(z,zt(zt(z,o),_));s=mr([Gt(s,[0,0],[n,c]),L],1)}return[o,a,s]}),Pt([f,p,m])}return!e&&n>r&&(s=Gt(s,[0,0],[n,r]),a=Gt(a,[0,0],[r,r])),[s,a]})}const Jpe=ne({qr_:Zpe});var ea;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ea||(ea={}));function eme(t,e,n=ea.SUM_BY_NONZERO_WEIGHTS){const r=G(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=G(e,"weights","computeWeightedLoss"));const a=s==null?r:oe(r,s);if(n===ea.NONE)return a;if(n===ea.SUM)return nt(a);if(n===ea.MEAN){if(s==null)return Qn(a);{const i=r.size/s.size,o=ut(nt(a),nt(s));return i>1?ut(o,gt(i)):o}}if(n===ea.SUM_BY_NONZERO_WEIGHTS){if(s==null)return ut(nt(a),gt(r.size));{const i=oe(s,ma(r.shape)),o=Ge(nt(gf(i,gt(0))),"float32");return ut(nt(a),o)}}throw Error(`Unknown reduction: ${n}`)}const Nc=ne({computeWeightedLoss_:eme});function tme(t,e,n,r=ea.SUM_BY_NONZERO_WEIGHTS){const s=G(t,"labels","absoluteDifference"),a=G(e,"predictions","absoluteDifference");let i=null;n!=null&&(i=G(n,"weights","absoluteDifference")),ys(s.shape,a.shape,"Error in absoluteDifference: ");const o=Nr(tt(s,a));return Nc(o,i,r)}const nme=ne({absoluteDifference_:tme});function rme(t,e,n,r,s=ea.SUM_BY_NONZERO_WEIGHTS){const a=G(t,"labels","cosineDistance"),i=G(e,"predictions","cosineDistance");let o=null;r!=null&&(o=G(r,"weights","cosineDistance")),ys(a.shape,i.shape,"Error in cosineDistance: ");const l=gt(1),c=tt(l,nt(oe(a,i),n,!0));return Nc(c,o,s)}const sme=ne({cosineDistance_:rme});function ame(t,e,n,r=ea.SUM_BY_NONZERO_WEIGHTS){let s=G(t,"labels","hingeLoss");const a=G(e,"predictions","hingeLoss");let i=null;n!=null&&(i=G(n,"weights","hingeLoss")),ys(s.shape,a.shape,"Error in hingeLoss: ");const o=gt(1);s=tt(oe(gt(2),s),o);const l=Ro(tt(o,oe(s,a)));return Nc(l,i,r)}const ime=ne({hingeLoss_:ame});function ome(t,e,n,r=1,s=ea.SUM_BY_NONZERO_WEIGHTS){const a=G(t,"labels","huberLoss"),i=G(e,"predictions","huberLoss");let o=null;n!=null&&(o=G(n,"weights","huberLoss")),ys(a.shape,i.shape,"Error in huberLoss: ");const l=gt(r),c=Nr(tt(i,a)),f=Du(c,l),p=tt(c,f),m=Be(oe(gt(.5),Sn(f)),oe(l,p));return Nc(m,o,s)}const lme=ne({huberLoss_:ome});function cme(t,e,n,r=1e-7,s=ea.SUM_BY_NONZERO_WEIGHTS){const a=G(t,"labels","logLoss"),i=G(e,"predictions","logLoss");let o=null;n!=null&&(o=G(n,"weights","logLoss")),ys(a.shape,i.shape,"Error in logLoss: ");const l=gt(1),c=gt(r),f=zn(oe(a,qa(Be(i,c)))),p=oe(tt(l,a),qa(Be(tt(l,i),c))),m=tt(f,p);return Nc(m,o,s)}const ume=ne({logLoss_:cme});function dme(t,e,n,r=ea.SUM_BY_NONZERO_WEIGHTS){const s=G(t,"labels","meanSquaredError"),a=G(e,"predictions","meanSquaredError");let i=null;n!=null&&(i=G(n,"weights","meanSquaredError")),ys(s.shape,a.shape,"Error in meanSquaredError: ");const o=gC(s,a);return Nc(o,i,r)}const fme=ne({meanSquaredError_:dme});function hme(t,e){const n=G(t,"labels","sigmoidCrossEntropyWithLogits"),r=G(e,"logits","sigmoidCrossEntropyWithLogits");ys(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=Ro(r),a=oe(r,n),i=Db(wa(zn(Nr(r))));return Be(tt(s,a),i)}function pme(t,e,n,r=0,s=ea.SUM_BY_NONZERO_WEIGHTS){let a=G(t,"multiClassLabels","sigmoidCrossEntropy");const i=G(e,"logits","sigmoidCrossEntropy");let o=null;if(n!=null&&(o=G(n,"weights","sigmoidCrossEntropy")),ys(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=gt(r),f=gt(1),p=gt(.5);a=Be(oe(a,tt(f,c)),oe(p,c))}const l=hme(a,i);return Nc(l,o,s)}const mme=ne({sigmoidCrossEntropy_:pme});function gme(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return gl((s,a,i)=>{const l=zb(a,[n],!0),c=tt(Ge(a,"float32"),l);i([s,c]);const f=zn(oe(c,s));return{value:nt(f,[n]),gradFunc:(y,b)=>{const[v,x]=b,S=gr(y.shape,[n]);return[oe(le(y,S),tt(Ge(v,"float32"),wa(x))),oe(le(y,S),tt(wa(x),Ge(v,"float32")))]}}})(t,e)}function yme(t,e,n,r=0,s=ea.SUM_BY_NONZERO_WEIGHTS){let a=G(t,"onehotLabels","softmaxCrossEntropy");const i=G(e,"logits","softmaxCrossEntropy");let o=null;if(n!=null&&(o=G(n,"weights","softmaxCrossEntropy")),ys(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const c=gt(r),f=gt(1),p=gt(a.shape[1]);a=Be(oe(a,tt(f,c)),ut(c,p))}const l=gme(a,i);return Nc(l,o,s)}const bme=ne({softmaxCrossEntropy_:yme});function xme(t,e,n,r){const s=G(t,"indices","sparseFillEmptyRows","int32"),a=G(e,"values","sparseFillEmptyRows"),i=G(n,"denseShape","sparseFillEmptyRows","int32"),o=G(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(a.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const l={indices:s,values:a,denseShape:i,defaultValue:o},c=te.runKernel($2,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const vme=ne({sparseFillEmptyRows_:xme});function wme(t,e,n){const r=G(t,"inputIndices","sparseReshape","int32"),s=G(e,"inputShape","sparseReshape","int32"),a=G(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const i={inputIndices:r,inputShape:s,newShape:a},o=te.runKernel(R2,i);return{outputIndices:o[0],outputShape:o[1]}}const Sme=ne({sparseReshape_:wme});function Cme(t,e,n){const r=G(t,"data","sparseSegmentMean"),s=G(e,"indices","sparseSegmentMean","int32"),a=G(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${a.shape}`);const i={data:r,indices:s,segmentIds:a};return te.runKernel(O2,i)}const kme=ne({sparseSegmentMean_:Cme});function Nme(t,e,n){const r=G(t,"data","sparseSegmentSum"),s=G(e,"indices","sparseSegmentSum","int32"),a=G(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${a.shape}`);const i={data:r,indices:s,segmentIds:a};return te.runKernel(_2,i)}const Tme=ne({sparseSegmentSum_:Nme});function Eme(t,e,n,r,s,a,i,o){const l=G(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=G(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const f={separator:n,nGramWidths:r,leftPad:s,rightPad:a,padWidth:i,preserveShortSequences:o},p={data:l,dataSplits:c},m=te.runKernel(L2,p,f);return{nGrams:m[0],nGramsSplits:m[1]}}const Ime=ne({stringNGrams_:Eme});function Ame(t,e,n=!0){const r=G(t,"input","stringSplit","string"),s=G(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const a={skipEmpty:n},i={input:r,delimiter:s},o=te.runKernel(M2,i,a);return{indices:o[0],values:o[1],shape:o[2]}}const jme=ne({stringSplit_:Ame});function $me(t,e){const n=G(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return te.runKernel(F2,s,r)}const Rme=ne({stringToHashBucketFast_:$me});function Ome(t,e,n,r=!0){const s=G(t,"input","staticRegexReplace","string"),a={pattern:e,rewrite:n,replaceGlobal:r};return te.runKernel(Cb,{x:s},a)}const _me=ne({staticRegexReplace_:Ome});const N9={fft:qb,ifft:cp,rfft:Gb,irfft:mC},T9={hammingWindow:lpe,hannWindow:w9,frame:S9,stft:fpe},bo={flipLeftRight:gpe,grayscaleToRGB:bpe,resizeNearestNeighbor:k9,resizeBilinear:C9,rgbToGrayscale:vpe,rotateWithOffset:Spe,cropAndResize:ppe,nonMaxSuppression:kpe,nonMaxSuppressionAsync:Rpe,nonMaxSuppressionWithScore:_pe,nonMaxSuppressionWithScoreAsync:zpe,nonMaxSuppressionPadded:Lpe,nonMaxSuppressionPaddedAsync:Fpe,threshold:qpe,transform:Hpe},gO={bandPart:Xpe,gramSchmidt:Qpe,qr:Jpe},E9={absoluteDifference:nme,computeWeightedLoss:Nc,cosineDistance:sme,hingeLoss:ime,huberLoss:lme,logLoss:ume,meanSquaredError:fme,sigmoidCrossEntropy:mme,softmaxCrossEntropy:bme},I9={sparseFillEmptyRows:vme,sparseReshape:Sme,sparseSegmentMean:kme,sparseSegmentSum:Tme},A9={stringNGrams:Ime,stringSplit:jme,stringToHashBucketFast:Rme,staticRegexReplace:_me};const Dme=new Map,ZA=new Map;class Mf{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class ui{constructor(){this.classNameMap={}}static getMap(){return ui.instance==null&&(ui.instance=new ui),ui.instance}static register(e){ui.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function We(t,e,n){q(t.className!=null,()=>"Class being registered does not have the static className property defined."),q(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),q(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return ui.register(t),Dme.set(s,t),ZA.set(t,s),t}function zme(t){return ZA.has(t)?ZA.get(t):t.className}const Pme=Object.freeze(Object.defineProperty({__proto__:null,Serializable:Mf,SerializationMap:ui,getRegisteredName:zme,registerClass:We},Symbol.toStringTag,{value:"Module"}));class Tc extends Mf{minimize(e,n=!1,r){const{value:s,grads:a}=this.computeGradients(e,r);if(r!=null){const i=r.map(o=>({name:o.name,tensor:a[o.name]}));this.applyGradients(i)}else this.applyGradients(a);return Pt(a),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return DV(e,n)}dispose(){this.iterations_!=null&&Pt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:gt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Tc,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});class yO extends Tc{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=te.registeredVariables[r],i=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:me(()=>Ht(a).variable(i))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:me(()=>Ht(a).variable(i))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;me(()=>{const f=Be(oe(l,this.rho),oe(Sn(o),1-this.rho)),p=oe(ut(ns(Be(c,this.epsilon)),ns(Be(l,this.epsilon))),o),m=Be(oe(c,this.rho),oe(Sn(p),1-this.rho));l.assign(f),c.assign(m);const y=Be(oe(p,-this.learningRate),a);a.assign(y)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Pt(this.accumulatedGrads.map(e=>e.variable)),Pt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}class bO extends Tc{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=te.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:me(()=>zf(a.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=this.accumulatedGrads[s].variable;me(()=>{const l=Be(o,Sn(i));o.assign(l);const c=Be(oe(ut(i,ns(Be(l,te.backend.epsilon()))),-this.learningRate),a);a.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Pt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}class xO extends Tc{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],me(()=>{this.accBeta1=gt(n).variable(),this.accBeta2=gt(r).variable()}),s==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);me(()=>{const r=tt(1,this.accBeta1),s=tt(1,this.accBeta2);n.forEach((a,i)=>{const o=te.registeredVariables[a],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${a}/m`,variable:me(()=>Ht(o).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${a}/v`,variable:me(()=>Ht(o).variable(l))});const c=Array.isArray(e)?e[i].tensor:e[a];if(c==null)return;const f=this.accumulatedFirstMoment[i].variable,p=this.accumulatedSecondMoment[i].variable,m=Be(oe(f,this.beta1),oe(c,1-this.beta1)),y=Be(oe(p,this.beta2),oe(Sn(c),1-this.beta2)),b=ut(m,r),v=ut(y,s);f.assign(m),p.assign(y);const x=Be(oe(ut(b,Be(ns(v),this.epsilon)),-this.learningRate),o);o.assign(x)}),this.accBeta1.assign(oe(this.accBeta1,this.beta1)),this.accBeta2.assign(oe(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Pt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Pt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),me(()=>{this.accBeta1.assign(ml(this.beta1,this.iterations_+1)),this.accBeta2.assign(ml(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}class vO extends Tc{static get className(){return"Adamax"}constructor(e,n,r,s=null,a=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],me(()=>{this.iteration=gt(0).variable(),this.accBeta1=gt(n).variable()}),s==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);me(()=>{const r=tt(1,this.accBeta1),s=ut(-this.learningRate,Be(oe(this.iteration,this.decay),1));n.forEach((a,i)=>{const o=te.registeredVariables[a],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${a}/m`,variable:Ht(o).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${a}/v`,variable:Ht(o).variable(l)});const c=Array.isArray(e)?e[i].tensor:e[a];if(c==null)return;const f=this.accumulatedFirstMoment[i].variable,p=this.accumulatedWeightedInfNorm[i].variable,m=Be(oe(f,this.beta1),oe(c,1-this.beta1)),y=oe(p,this.beta2),b=Nr(c),v=Nl(y,b);f.assign(m),p.assign(v);const x=Be(oe(ut(s,r),ut(m,Be(v,this.epsilon))),o);o.assign(x)}),this.iteration.assign(Be(this.iteration,1)),this.accBeta1.assign(oe(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Pt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Pt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}class AC extends Tc{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const i=te.registeredVariables[r];me(()=>{const o=Be(oe(this.c,a),i);i.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Dr(gt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}class wO extends AC{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=gt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=te.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:me(()=>Ht(a).variable(!1))});const i=this.accumulations[s].variable,o=Array.isArray(e)?e[s].tensor:e[r];o!=null&&me(()=>{let l;const c=Be(oe(this.m,i),o);this.useNesterov?l=Be(oe(this.c,Be(o,oe(c,this.m))),a):l=Be(oe(this.c,c),a),i.assign(c),a.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Pt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}class SO extends Tc{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,a=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,s==null&&(this.epsilon=te.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=te.registeredVariables[r],i=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:me(()=>Ht(a).variable(i))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:me(()=>Ht(a).variable(i))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:me(()=>Ht(a).variable(i))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;me(()=>{const f=Be(oe(l,this.decay),oe(Sn(o),1-this.decay));if(this.centered){const p=this.accumulatedMeanGrads[s].variable,m=Be(oe(p,this.decay),oe(o,1-this.decay)),y=ut(oe(o,this.learningRate),ns(tt(f,Be(Sn(m),this.epsilon)))),b=Be(oe(c,this.momentum),y);l.assign(f),p.assign(m),c.assign(b);const v=tt(a,b);a.assign(v)}else{const p=Be(oe(l,this.decay),oe(Sn(o),1-this.decay)),m=Be(oe(c,this.momentum),ut(oe(o,this.learningRate),ns(Be(p,this.epsilon))));l.assign(p),c.assign(m);const y=tt(a,m);a.assign(y)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Pt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Pt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Pt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}const Lme=[yO,bO,xO,vO,wO,SO,AC];function Mme(){for(const t of Lme)We(t)}const Fme="model",Bme=".json",Ume=".weights.bin";function iL(t){return new Promise(e=>setTimeout(e)).then(t)}class bf{constructor(e){if(!ye().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(bf.URL_SCHEME)&&(e=e.slice(bf.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Fme),this.modelJsonFileName=e+Bme,this.weightDataFileName=e+Ume}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=$o.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=gV(e,s),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await iL(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await iL(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Ib(e)}}}}bf.URL_SCHEME="downloads://";class Wme{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const a=JSON.parse(s.target.result),i=a.modelTopology;if(i==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(a.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:i});return}const l=dR(a,c=>this.loadWeights(c));e(l)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const i of e)n.push(...i.weights),r.push(...i.paths);const s=this.checkManifestAndWeightFiles(e),a=r.map(i=>this.loadWeightsFile(i,s[i]));return Promise.all(a).then(i=>[n,i])}loadWeightsFile(e,n){return new Promise((r,s)=>{const a=new FileReader;a.onload=i=>{const o=i.target.result;r(o)},a.onerror=i=>s(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(a=>XP(a.name)),s={};for(const a of e)a.paths.forEach(i=>{const o=XP(i);if(n.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(n.push(o),r.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);s[i]=this.weightsFiles[r.indexOf(o)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const Vme=t=>ye().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(bf.URL_SCHEME)?qme(t.slice(bf.URL_SCHEME.length)):null;Kn.registerSaveRouter(Vme);function qme(t="model"){return new bf(t)}function Gme(t){return new Wme(t)}function oL(t,e,n,r){i(t),n=n??0,r=r??1,o(n,r);let s=0;const a=l=>(l.then(c=>{const f=n+ ++s/t.length*(r-n);return e(f),c}),l);function i(l){q(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,c){q(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),q(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),q(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(a))}async function j9(t,e){e==null&&(e={});const n=e.fetchFunc==null?ye().platform.fetch:e.fetchFunc,r=t.map(p=>n(p,e.requestInit,{isBinary:!0})),o=(e.onProgress==null?await Promise.all(r):await oL(r,e.onProgress,0,.5)).map(p=>p.arrayBuffer());return e.onProgress==null?await Promise.all(o):await oL(o,e.onProgress,.5,1)}function Hme(t,e){var n;const r=e.fetchFunc==null?ye().platform.fetch:e.fetchFunc;let s=0,a;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async i=>{for(var o;s<t.length;){a||(a=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await a.read();if(l){s++,a=void 0,(o=e.onProgress)===null||o===void 0||o.call(e,s/t.length);continue}i.enqueue(c);return}i.close()}})}async function Kme(t,e="",n,r){return $9(i=>j9(i,{requestInit:r}))(t,e,n)}function $9(t){return async(e,n="",r)=>{const s=e.map(()=>!1),a={},i=r!=null?r.map(()=>!1):[],o=[];if(e.forEach((y,b)=>{let v=0;y.weights.forEach(x=>{const S="quantization"in x?x.quantization.dtype:x.dtype,C=uf[S]*Ee(x.shape),E=()=>{s[b]=!0,a[b]==null&&(a[b]=[]),a[b].push({manifestEntry:x,groupOffset:v,sizeBytes:C})};r!=null?r.forEach((k,I)=>{k===x.name&&(E(),i[I]=!0)}):E(),o.push(x.name),v+=C})}),!i.every(y=>y)){const y=r.filter((b,v)=>!i[v]);throw new Error(`Could not find weights in manifest with names: ${y.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const l=s.reduce((y,b,v)=>(b&&y.push(v),y),[]),c=[];l.forEach(y=>{e[y].paths.forEach(b=>{const v=n+(n.endsWith("/")?"":"/")+b;c.push(v)})});const f=await t(c),p={};let m=0;return l.forEach(y=>{const b=e[y].paths.length,v=new $o(f.slice(m,m+b));a[y].forEach(S=>{const C=v.slice(S.groupOffset,S.groupOffset+S.sizeBytes),E=fV(C,[S.manifestEntry]);for(const k in E)p[k]=E[k]}),m+=b}),p}}const Xme="application/octet-stream",Yme="application/json";class CO{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(q(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=ye().platform.fetch,q(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&q(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=gV(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:Yme}),"model.json"),e.weightData!=null){const i=$o.join(e.weightData);n.body.append("model.weights.bin",new Blob([i],{type:Xme}),"model.weights.bin")}const a=await this.fetch(this.path,n);if(a.ok)return{modelArtifactsInfo:Ib(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return dR(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=cw(e.weightsManifest),s=()=>Hme(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=Qme(n),a=this.weightPathPrefix||r,i=[],o=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(c)):i.push(a+c+s);return this.weightUrlConverter&&i.push(...await Promise.all(o)),i}async loadWeights(e){const n=await this.getWeightUrls(e),r=cw(e),s=await j9(n,this.loadOptions);return[r,s]}}CO.URL_SCHEME_REGEX=/^https?:\/\//;function Qme(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function JA(t){return t.match(CO.URL_SCHEME_REGEX)!=null}const R9=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>JA(r)):n=JA(t),n)return kO(t,e)}return null};Kn.registerSaveRouter(R9);Kn.registerLoadRouter(R9);function kO(t,e){return new CO(t,e)}function Zme(t,e){return kO(t,e)}class EE{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class O9{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Jme{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function ege(t,e,n,r){const s=arguments;return new Jme(dw(...s))}function dw(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new EE(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new EE({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new EE({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function tge(t){return new O9(t)}function nge(t){return new O9(t)}const NO=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:$o,browserFiles:Gme,browserHTTPRequest:Zme,concatenateArrayBuffers:mV,copyModel:Oce,decodeWeights:fV,decodeWeightsStream:pV,encodeWeights:VA,fromMemory:ege,fromMemorySync:dw,getLoadHandlers:xce,getModelArtifactsForJSON:dR,getModelArtifactsForJSONSync:uR,getModelArtifactsInfoForJSON:Ib,getSaveHandlers:yV,getWeightSpecs:cw,http:kO,isHTTPScheme:JA,listModels:$ce,loadWeights:Kme,moveModel:_ce,registerLoadRouter:bce,registerSaveRouter:yce,removeModel:Rce,weightsLoaderFactory:$9,withSaveHandler:tge,withSaveHandlerSync:nge},Symbol.toStringTag,{value:"Module"}));function rge(t,e,n){const r=G(t,"labels","confusionMatrix"),s=G(e,"predictions","confusionMatrix");q(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),q(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),q(s.rank===1,()=>`Expected the rank of predictions to be 1, but got ${s.rank}`),q(r.shape[0]===s.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${s.shape[0]}. Labels and predictions should have the same number of elements.`),q(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const a=ip(Ge(r,"int32"),n),i=ip(Ge(s,"int32"),n),o=Ut(a),l=zt(o,i);return Ge(l,"int32")}const sge=ne({confusionMatrix_:rge});const age=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:sge},Symbol.toStringTag,{value:"Module"}));let Td,lL=!1;function _9(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,a=!1,i=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)a=!0;else if(t.getContext!=null)i=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(My(ow,te.backendName)!=null){const b={pixels:t},v={numChannels:e};return te.runKernel(ow,b,v)}const[c,f]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let p;if(i)p=t.getContext("2d").getImageData(0,0,c,f).data;else if(r||n)p=t.data;else if(a||s||o){if(Td==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Td=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Td=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Td.canvas.width=c,Td.canvas.height=f,Td.drawImage(t,0,0,c,f),p=Td.getImageData(0,0,c,f).data}let m;if(e===4)m=new Int32Array(p);else{const b=c*f;m=new Int32Array(b*e);for(let v=0;v<b;v++)for(let x=0;x<e;++x)m[v*e+x]=p[v*4+x]}return iO(m,[f,c,e],"int32")}function ige(t){return t!=null&&t.data instanceof Uint8Array}function oge(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function lge(t){return t!=null&&t.width!==0&&t.height!==0}function cge(t){return oge()&&!(t instanceof ImageBitmap)&&lge(t)&&!ige(t)}async function uge(t,e=3){let n=null;if(ye().getBool("WRAP_TO_IMAGEBITMAP")&&cge(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return _9(n,e)}function D9(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function dge(t){const e=t?.alpha||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function fge(t,e){let n=G(t,"img","toPixels");if(!(t instanceof pn)){const c=n;n=Ge(c,"int32"),c.dispose()}D9(n);const[r,s]=n.shape.slice(0,2),a=n.rank===2?1:n.shape[2],i=await n.data(),o=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(s*r*4);for(let c=0;c<r*s;++c){const f=[0,0,0,255];for(let m=0;m<a;m++){const y=i[c*a+m];if(n.dtype==="float32"){if(y<0||y>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${y}.`)}else if(n.dtype==="int32"&&(y<0||y>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${y}.`);a===1?(f[0]=y*o,f[1]=y*o,f[2]=y*o):f[m]=y*o}const p=c*4;l[p+0]=Math.round(f[0]),l[p+1]=Math.round(f[1]),l[p+2]=Math.round(f[2]),l[p+3]=Math.round(f[3])}if(e!=null){lL||My(r2,te.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),lL=!0),e.width=s,e.height=r;const c=e.getContext("2d"),f=new ImageData(l,s,r);c.putImageData(f,0,0)}return n!==t&&n.dispose(),l}function hge(t,e,n){let r=G(t,"img","draw");if(!(t instanceof pn)){const i=r;r=Ge(i,"int32"),i.dispose()}D9(r),dge(n?.imageOptions);const s={image:r},a={canvas:e,options:n};te.runKernel(r2,s,a)}const pge=ne({fromPixels_:_9}),mge=Object.freeze(Object.defineProperty({__proto__:null,draw:hge,fromPixels:pge,fromPixelsAsync:uge,toPixels:fge},Symbol.toStringTag,{value:"Module"}));function jC(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Ee(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,a=s[s.length-1];let i=1;for(let p=0;p<s.length-1;++p)i*=s[p];const o=t.shape,l=s.slice();l.pop();let c=1;for(let p=a;p<n;++p)c*=o[p],l.push(o[p]);const f=[...pt(t.shape).map(p=>p/c),1].slice(0,a);return[l,i,c,f]}const gge=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:jC},Symbol.toStringTag,{value:"Module"}));const ej=-2,yge=-1;function TO(t,e,n){const r=t.shape.length;q(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),q(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)q(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function bge(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function EO(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function z9(t,e,n,r){const s=[...t];for(let a=s.length;a<r.length;a++)s.push(1);for(let a=0;a<n;a++)a===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function P9(t,e,n){return n<=t?n:n-(e-1)}function L9(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function xge(t,e,n,r,s,a,i,o,l){const c=t.length;let f=new Array(c),p=new Array(c),m=new Array(c);if(e.length&&n>0){const y=e[0],b=n+1;f=M9(i,y,b,r,t),p=F9(o,y,b,s,t),m=z9(a,y,b,t)}else for(let y=0;y<c;y++)f[y]=U9(i,r,a,t,y,l),p[y]=W9(o,s,a,t,y,l),m[y]=B9(a,y,l);return{begin:f,end:p,strides:m}}function M9(t,e,n,r,s){const a=[...s],i=L9(n,e);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=0;else{const l=P9(e,n,o);let c=r[l];t&1<<l&&(c=0),a[o]=c}return a}function F9(t,e,n,r,s){const a=[...s],i=L9(n,e);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=Number.MAX_SAFE_INTEGER;else{const l=P9(e,n,o);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),a[o]=c}for(let o=0;o<a.length;o++){const l=s[o];a[o]<0&&(a[o]+=l),a[o]=Au(0,a[o],s[o])}return a}function B9(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function U9(t,e,n,r,s,a){let i=e[s];const o=n[s]||1;(t&1<<s||a&1<<s||i==null)&&(o>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=r[s];return i<0&&(i+=l),i=Au(0,i,l-1),i}function W9(t,e,n,r,s,a){let i=e[s];const o=n[s]||1;(t&1<<s||a&1<<s||i==null)&&(o>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=r[s];return i<0&&(i+=l),o>0?i=Au(0,i,l):i=Au(-1,i,l-1),i}function IO(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function AO(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function $C(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(i=>{q(i!==-1,()=>"slice() does not support negative begin indexing.")});let a;return n==null?a=new Array(s).fill(-1):typeof n=="number"?a=[n,...new Array(s-1).fill(-1)]:n.length<s?a=n.concat(new Array(s-n.length).fill(-1)):a=n,a=a.map((i,o)=>i>=0?i:(q(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,a]}function jO(t,e,n,r,s,a,i,o,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,i!=null&&(i&i-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let f=!1;const p={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:a,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};for(let E=0;E<p.dims;E++)f&&(1<<E&o)!==0&&p.numAddAxisAfterEllipsis++,1<<E&i&&(f=!0);f||(p.ellipsisMask|=1<<p.dims,p.dims++);const m={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};vge(p,m);let y=!0,b=!0,v=!0;const x=[],S=[];for(let E=0;E<t.length;++E){if(m.strides[E]===0)throw Error(`strides[${E}] must be non-zero`);const k=!!(m.shrinkAxisMask&1<<E),I=t[E];if(I===-1){x.push(k?1:-1);continue}const $=[m.beginMask&1<<E,m.endMask&1<<E],_=[m.strides[E]>0?0:-1,m.strides[E]>0?I:I-1];if(k&&m.strides[E]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&m.strides[E]===1;const z=!!(m.beginMask&1<<E&&m.endMask&1<<E);if(m.beginValid&&m.endValid){if(k){const U=m.begin[E]<0?I+m.begin[E]:m.begin[E];if(m.begin[E]=U,m.end[E]=m.begin[E]+1,U<0||U>=I)throw Error(`slice index ${m.begin[E]} of dimension ${E} out of bounds.`)}else m.begin[E]=cL(m.begin[E],0,m.strides[E],I,$,_),m.end[E]=cL(m.end[E],1,m.strides[E],I,$,_);const D=m.strides[E]===1&&m.begin[E]===0&&m.end[E]===I;y=y&&D,b=b&&(E===0&&m.strides[E]===1||D)}else y=y&&m.strides[E]===1&&z,b=b&&(E===0&&m.strides[E]===1||z);let L,R=!1;if(m.beginValid&&m.endValid?(L=m.end[E]-m.begin[E],R=!0):k?(L=1,R=!0):z&&I>=0&&(m.strides[E]<0?L=-I:L=I,R=!0),R){let D;L===0||L<0!=m.strides[E]<0?D=0:D=Math.trunc(L/m.strides[E])+(L%m.strides[E]!==0?1:0),x.push(D)}else x.push(-1)}for(let E=0;E<m.finalShapeGatherIndices.length;++E){const k=m.finalShapeGatherIndices[E];k>=0?S.push(x[k]):k===ej&&S.push(1)}return{finalShapeSparse:S.filter((E,k)=>m.finalShapeGatherIndices[k]!==ej),finalShape:S,isIdentity:y,sliceDim0:b,isSimpleSlice:v,begin:m.begin,end:m.end,strides:m.strides}}function vge(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(ej),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(yge),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function cL(t,e,n,r,s,a){if(s[e])return n>0?a[e]:a[e+1&1];{const i=t<0?r+t:t;return i<a[0]?a[0]:i>a[1]?a[1]:i}}const V9=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:TO,computeFlatOffset:AO,computeOutShape:EO,getNormalizedAxes:xge,isSliceContinous:IO,maskToAxes:bge,parseSliceParams:$C,sliceInfo:jO,startForAxis:U9,startIndicesWithElidedDims:M9,stopForAxis:W9,stopIndicesWithElidedDims:F9,stridesForAxis:B9,stridesWithElidedDims:z9},Symbol.toStringTag,{value:"Module"}));const wge="4.22.0";class q9{static sgd(e){return new AC(e)}static momentum(e,n,r=!1){return new wO(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,a=!1){return new SO(e,n,r,s,a)}static adam(e=.001,n=.9,r=.999,s=null){return new xO(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new yO(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,a=0){return new vO(e,n,r,s,a)}static adagrad(e,n=.1){return new bO(e,n)}}const Rd=q9;const Sge=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function $O(){return new Promise(t=>Sge(()=>t()))}function RO(t,e){const n=t[0].length;t.forEach((s,a)=>{q(s.length===n,()=>`Error in concat${n}D: rank of tensors[${a}] must be the same as the rank of the rest (${n})`)}),q(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,a)=>{for(let i=0;i<n;i++)q(i===e||s[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${a}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function cl(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}var po;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(po||(po={}));function G9(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const a=n[s],i=r[r.length-n.length+s],o=r[i];if(a>=0)if(o>=0){if(o!==a)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${a} but shape[${s+t}] = ${o}`)}else r[i]=a}return r}function H9(t){const e={FIRST_DIM_SIZE:po.FIRST_DIM_SIZE,VALUE_ROWIDS:po.VALUE_ROWIDS,ROW_LENGTHS:po.ROW_LENGTHS,ROW_SPLITS:po.ROW_SPLITS,ROW_LIMITS:po.ROW_LIMITS,ROW_STARTS:po.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function K9(t){return t.length===0?0:t[0]===po.FIRST_DIM_SIZE?t.length-1:t.length}function X9(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const a=t[s],i=e[s+1];if(a>=0&&i>=0&&a!==1&&a!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${a} but ragged tensor input.flatValues.shape[${s-t.length}] = ${i}`)}}const OO=30;function RC(t){return t<=OO?t:sw(t,Math.floor(Math.sqrt(t)))}function _O(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}function Hb(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const a=e.length;for(let i=0;i<a;++i)s=s.concat([t[i+1]/e[i],e[i]]);s=s.concat(t.slice(a+1))}return s}function Kb(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],a=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?a.push(i):s.push(i);r.push(...s),r.push(0),r.push(...a)}return r}function Xb(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let a=1;a<t.length;++a)a<=e.length?r?s.push(e[a-1]*t[a]):s.push(t[a]/e[a-1]):s.push(t[a]);return s}function DO(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function zO(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}const OC=1.7580993408473768,_C=1.0507009873554805;const PO=.3275911,LO=.254829592,MO=-.284496736,FO=1.421413741,BO=-1.453152027,UO=1.061405429;function dc(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Y9(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Q9(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function Z9(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function WO(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function J9(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function e7(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const a=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(a),r[s]=Math.sin(a)}return{real:n,imag:r}}function t7(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),a=Math.sin(r);return{real:s,imag:a}}const IE="->",Cge=/->/g,uL=",",dL="...";function VO(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(Cge,"").length)/IE.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${IE}").`);const[r,s]=t.split(IE);q(r.indexOf(dL)===-1,()=>`The ellipsis notation ("${dL}") is not supported yet.`);const a=r.split(uL),i=a.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let m=0;m<s.length;++m){const y=s[m];if(!a.some(b=>b.indexOf(y)!==-1))throw new Error(`Output subscripts contain the label ${y} not present in the input subscripts.`);o.indexOf(y)===-1&&o.push(y)}for(let m=0;m<r.length;++m){const y=r[m];o.indexOf(y)===-1&&y!==uL&&o.push(y)}const l=new Array(a.length);for(let m=0;m<i;++m){if(new Set(a[m].split("")).size!==a[m].length)throw new Error(`Found duplicate axes in input component ${a[m]}. Support for duplicate axes in input is not implemented yet.`);l[m]=[];for(let y=0;y<a[m].length;++y)l[m].push(o.indexOf(a[m][y]))}const c=o.length,f=s.length,p=[];for(let m=f;m<c;++m)p.push(m);return{allDims:o,summedDims:p,idDims:l}}function qO(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function GO(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const a=n[s].shape;for(let i=0;i<e[s].length;++i)r[e[s][i]]===void 0?r[e[s][i]]=a[i]:q(r[e[s][i]]===a[i],()=>`Expected dimension ${r[e[s][i]]} at axis ${i} of input shaped ${JSON.stringify(a)}, but got dimension ${a[i]}`)}}function HO(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let i=0;i<s;++i)r.push([]);const a=[];for(let i=0;i<n.length;++i){const o=n[i],l=kge(e,o);for(const c of l)a.indexOf(c)===-1&&(r[i].push(c),a.push(c))}return{path:n,steps:r}}function KO(t){return t.every((e,n)=>e===n)}function kge(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function XO(t,e,n=0){let r=[];if(typeof e=="number")q(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((i,o)=>(o===-1&&(i+=1),i),0);q(s<=1,()=>"There should be only one negative value in split array.");const a=e.indexOf(-1);if(a!==-1){const i=e.reduce((o,l)=>l>0?o+l:o);e[a]=t.shape[n]-i}q(t.shape[n]===e.reduce((i,o)=>i+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}function n7(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function r7(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function s7(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}function a7(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function i7(t,e){return`size ${t} must be non-negative, not ${e}`}function o7(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function l7(t,e){const n=Ee(t),r=Ee(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function c7(t,e){const n=Ee(t),r=Ee(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}function tj(){return"segment ids must be >= 0"}function u7(){return"segment ids are not increasing"}function d7(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function f7(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}function h7(t,e){let n=!1,r;for(t<=OO?(r=t,n=!0):r=sw(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=sw(t,r+1);return r}function p7(t,e,n){const r=[],s=t.length;for(let a=0;a<s;a++)a!==e?r.push(t[a]):r.push(n);return r}function YO(t,e,n,r){const s=e.shape.length,a=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let p=0;p<r;++p)if(t.shape[p]!==e.shape[p])throw new Error(`x.shape[${p}]: ${t.shape[p]} should be equal to indices.shape[${p}]: ${e.shape[p]}.`);const i=t.shape[n],o=[];let l=1,c=1,f=1;for(let p=0;p<r;++p)o.push(t.shape[p]),l*=t.shape[p];for(let p=r;p<n;p++)o.push(t.shape[p]),c*=t.shape[p];for(let p=r;p<s;p++)o.push(e.shape[p]);for(let p=n+1;p<a;p++)o.push(t.shape[p]),f*=t.shape[p];return{batchSize:l,sliceSize:f,outerSize:c,dimSize:i,outputShape:o}}const Nge=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:YO,computeOutShape:p7,segOpComputeOptimalWindowSize:h7},Symbol.toStringTag,{value:"Module"}));function fc(t){try{return t.map(e=>lc(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function m7(t){return t.map(e=>ol(e))}const g7=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:LO,ERF_A2:MO,ERF_A3:FO,ERF_A4:BO,ERF_A5:UO,ERF_P:PO,PARALLELIZE_THRESHOLD:OO,get RowPartitionType(){return po},SELU_SCALE:_C,SELU_SCALEALPHA:OC,applyActivation:kC,assertAndGetBroadcastShape:At,assertAxesAreInnerMostDims:xs,assertParamsConsistent:RO,assignToTypedArray:J9,axesAreInnerMostDims:MR,calculateShapes:Xu,checkEinsumDimSizes:GO,checkPadOnDimRoundingMode:sa,combineLocations:RV,combineRaggedTensorToTensorShapes:G9,complexWithEvenIndex:Q9,complexWithOddIndex:Z9,computeConv2DInfo:rs,computeConv3DInfo:Vu,computeDefaultPad:wR,computeDilation2DInfo:Ab,computeOptimalWindowSize:RC,computeOutAndReduceShapes:ss,computeOutShape:cl,computePool2DInfo:Zi,computePool3DInfo:wc,convertConv2DDataFormat:Sc,decodeEinsumEquation:VO,eitherStridesOrDilationsAreOne:bs,expandShapeToKeepDim:gr,exponent:t7,exponents:e7,fromStringArrayToUint8:m7,fromUint8ToStringArray:fc,getAxesPermutation:nr,getBroadcastDims:mf,getComplexWithIndex:WO,getEinsumComputePath:HO,getEinsumPermutation:qO,getFusedBiasGradient:CC,getFusedDyActivation:SC,getImageCenter:_O,getInnerMostAxes:yr,getPermuted:Kb,getRaggedRank:K9,getReductionAxes:Ar,getReshaped:Hb,getReshapedPermuted:Xb,getRowPartitionTypesHelper:H9,getSliceBeginCoords:DO,getSliceSize:zO,getSparseFillEmptyRowsIndicesDenseShapeMismatch:n7,getSparseFillEmptyRowsNegativeIndexErrorMessage:r7,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:s7,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:o7,getSparseReshapeInputOutputMismatchErrorMessage:c7,getSparseReshapeInputOutputMultipleErrorMessage:l7,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:a7,getSparseReshapeNegativeOutputDimErrorMessage:i7,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:f7,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:tj,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:u7,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:d7,getUndoAxesPermutation:qu,isIdentityPermutation:KO,log:yle,mergeRealAndImagArrays:dc,prepareAndValidate:jC,prepareSplitSize:XO,segment_util:Nge,shouldFuse:NC,slice_util:V9,splitRealAndImagArrays:Y9,stridesOrDilationsArePositive:pf,tupleValuesAreOne:Ou,upcastType:ba,validateDefaultValueShape:X9,validateInput:yC,validateUpdateShape:oO,warn:ci},Symbol.toStringTag,{value:"Module"}));const Tge=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:TC,nonMaxSuppressionV4Impl:EC,nonMaxSuppressionV5Impl:IC,whereImpl:vC},Symbol.toStringTag,{value:"Module"}));Mme();const Ege=Object.freeze(Object.defineProperty({__proto__:null,Abs:k0,Acos:jp,Acosh:$p,AdadeltaOptimizer:yO,AdagradOptimizer:bO,AdamOptimizer:xO,AdamaxOptimizer:vO,Add:Df,AddN:N0,All:FS,Any:BS,ArgMax:T0,ArgMin:E0,Asin:Rp,Asinh:Op,Atan:_p,Atan2:zp,Atanh:Dp,AvgPool:I0,AvgPool3D:A0,AvgPool3DGrad:WS,AvgPoolGrad:US,BatchMatMul:j0,BatchToSpaceND:$0,Bincount:VS,BitwiseAnd:R0,BroadcastArgs:qS,BroadcastTo:KW,Cast:Pp,Ceil:Lp,ClipByValue:Mp,Complex:GS,ComplexAbs:O0,Concat:_0,Conv2D:D0,Conv2DBackpropFilter:HS,Conv2DBackpropInput:z0,Conv3D:P0,Conv3DBackpropFilterV2:KS,Conv3DBackpropInputV2:XS,Cos:Fp,Cosh:Bp,CropAndResize:QS,Cumprod:YS,Cumsum:L0,DataStorage:X$,DenseBincount:ZS,DepthToSpace:JS,DepthwiseConv2dNative:M0,DepthwiseConv2dNativeBackpropFilter:e2,DepthwiseConv2dNativeBackpropInput:t2,Diag:n2,Dilation2D:F0,Dilation2DBackpropFilter:iw,Dilation2DBackpropInput:aw,Draw:r2,get ENV(){return eR},Einsum:s2,Elu:Wp,EluGrad:a2,Environment:GW,Equal:B0,Erf:Vp,Exp:qp,ExpandDims:U0,Expm1:Gp,FFT:i2,Fill:o2,FlipLeftRight:l2,Floor:Hp,FloorDiv:Kp,FromPixels:ow,FusedBatchNorm:W0,FusedConv2D:zy,FusedDepthwiseConv2D:Py,GatherNd:c2,GatherV2:V0,Greater:q0,GreaterEqual:Xp,IFFT:u2,Identity:Yp,Imag:d2,IsFinite:Qp,IsInf:Zp,IsNan:Jp,KernelBackend:PS,LRN:Z0,LRNGrad:h2,LeakyRelu:G0,Less:H0,LessEqual:K0,LinSpace:f2,Log:em,Log1p:tm,LogSoftmax:XW,LogicalAnd:X0,LogicalNot:Y0,LogicalOr:Q0,LogicalXor:fle,LowerBound:hle,MatrixBandPart:ple,Max:J0,MaxPool:eb,MaxPool3D:tb,MaxPool3DGrad:m2,MaxPoolGrad:p2,MaxPoolWithArgmax:g2,Maximum:nm,Mean:nb,Min:rb,Minimum:rm,MirrorPad:sb,Mod:sm,MomentumOptimizer:wO,Multinomial:y2,Multiply:am,Neg:ab,NonMaxSuppressionV3:b2,NonMaxSuppressionV4:x2,NonMaxSuppressionV5:v2,NotEqual:ib,OP_SCOPE_SUFFIX:iR,OneHot:lb,OnesLike:ob,Optimizer:Tc,OptimizerConstructors:q9,Pack:cb,PadV2:ub,Pool:mle,Pow:im,Prelu:db,Prod:fb,RMSPropOptimizer:SO,RaggedGather:w2,RaggedRange:S2,RaggedTensorToTensor:C2,Range:k2,get Rank(){return PA},Real:N2,RealDiv:Up,Reciprocal:om,get Reduction(){return ea},Relu:lm,Relu6:cm,Reshape:hb,ResizeBilinear:mb,ResizeBilinearGrad:E2,ResizeNearestNeighbor:pb,ResizeNearestNeighborGrad:T2,Reverse:gb,RotateWithOffset:V2,Round:um,Rsqrt:dm,SGDOptimizer:AC,ScatterNd:I2,SearchSorted:j2,Select:yb,Selu:fm,Sigmoid:gm,Sign:mm,Sin:hm,Sinh:pm,Slice:bb,Softmax:Sb,Softplus:ym,SpaceToBatchND:vb,SparseFillEmptyRows:$2,SparseReshape:R2,SparseSegmentMean:O2,SparseSegmentSum:_2,SparseToDense:D2,SplitV:wb,Sqrt:bm,Square:z2,SquaredDifference:xm,StaticRegexReplace:Cb,Step:km,StridedSlice:P2,StringNGrams:L2,StringSplit:M2,StringToHashBucketFast:F2,Sub:vm,Sum:xb,Tan:wm,Tanh:Sm,Tensor:pn,TensorBuffer:Ir,TensorScatterUpdate:A2,Tile:Cm,TopK:B2,Transform:U2,Transpose:Qd,Unique:W2,Unpack:kb,UnsortedSegmentSum:Nb,UpperBound:gle,Variable:Fy,ZerosLike:Tb,_FusedMatMul:Dy,abs:Nr,acos:hR,acosh:pR,add:Be,addN:NV,all:K2,any:Uy,argMax:hf,argMin:mR,asin:gR,asinh:yR,atan:bR,atan2:xR,atanh:vR,avgPool:jb,avgPool3d:SR,backend:lR,backend_util:g7,basicLSTMCell:TV,batchNorm:Nm,batchNorm2d:CR,batchNorm3d:kR,batchNorm4d:NR,batchToSpaceND:$b,bincount:TR,bitwiseAnd:EV,booleanMaskAsync:d9,broadcastArgs:IV,broadcastTo:Zd,broadcast_util:Xue,browser:mge,buffer:$t,cast:Ge,ceil:ER,clipByValue:va,clone:ll,complex:cc,concat:mr,concat1d:IR,concat2d:AR,concat3d:jR,concat4d:$R,conv1d:X2,conv2d:uc,conv2dTranspose:Y2,conv3d:OR,conv3dTranspose:_R,copyRegisteredKernels:vle,cos:Rb,cosh:Q2,cosineWindow:wC,cumprod:qy,cumsum:Z2,customGrad:gl,denseBincount:uw,deprecationWarn:Jle,depthToSpace:DR,depthwiseConv2d:Tm,device_util:Hle,diag:jV,dilation2d:zR,disableDeprecationWarnings:Zle,dispose:Pt,disposeVariables:ece,div:ut,divNoNan:PR,dot:LR,dropout:fO,einsum:Ld,elu:Em,enableDebugMode:Qle,enableProdMode:Yle,enclosingPowerOfTwo:hO,engine:fo,ensureShape:$V,env:ye,equal:Xi,erf:J2,euclideanNorm:FR,exp:wa,expandDims:zs,expm1:BR,eye:eC,fft:qb,fill:zf,findBackend:ace,findBackendFactory:ice,floor:Am,floorDiv:H2,fused:v9,gather:jm,gatherND:m9,gather_util:gge,getBackend:dV,getGradient:DA,getKernel:My,getKernelsForBackend:lw,grad:Rde,grads:Ode,greater:Ta,greaterEqual:Cc,ifft:cp,imag:Ob,image:bo,inTopKAsync:g9,io:NO,irfft:mC,isFinite:UR,isInf:WR,isNaN:VR,keep:Dr,kernel_impls:Tge,leakyRelu:_b,less:ap,lessEqual:Gu,linalg:gO,linspace:_V,localResponseNormalization:qR,log:qa,log1p:Db,logSigmoid:GR,logSoftmax:nC,logSumExp:zb,logicalAnd:ko,logicalNot:Pb,logicalOr:rC,logicalXor:HR,losses:E9,lowerBound:zV,matMul:zt,math:age,max:yi,maxPool:Lb,maxPool3d:KR,maxPoolWithArgmax:PV,maximum:Nl,mean:Qn,memory:WA,meshgrid:LV,min:sp,minimum:Du,mirrorPad:XR,mod:YR,moments:Mb,movingAverage:f9,mul:oe,multiRNNCell:MV,multinomial:FV,neg:zn,nextFrame:$O,norm:Im,notEqual:gf,oneHot:ip,ones:ma,onesLike:Ga,op:ne,outerProduct:BV,pad:kc,pad1d:UV,pad2d:WV,pad3d:VV,pad4d:qV,pool:QR,pow:ml,prelu:Bb,print:fR,prod:ZR,profile:tce,raggedGather:GV,raggedRange:HV,raggedTensorToTensor:KV,rand:XV,randomGamma:ZV,randomNormal:iC,randomStandardNormal:JV,randomUniform:Hu,randomUniformInt:e9,range:yf,ready:uV,real:op,reciprocal:nO,registerBackend:oR,registerGradient:YW,registerKernel:q2,relu:Ro,relu6:oC,removeBackend:sce,reshape:le,reverse:wi,reverse1d:t9,reverse2d:n9,reverse3d:r9,reverse4d:s9,rfft:Gb,round:lC,rsqrt:cC,scalar:gt,scatterND:h9,scatter_util:zhe,searchSorted:sC,selu:uC,separableConv2d:dC,serialization:Pme,setBackend:rce,setPlatform:oce,setdiff1dAsync:a9,sigmoid:vo,sign:rO,signal:T9,sin:fC,sinh:hC,slice:Gt,slice1d:Ub,slice2d:pC,slice3d:Wb,slice4d:lp,slice_util:V9,softmax:Vb,softplus:Pf,spaceToBatchND:Fb,sparse:I9,sparseToDense:p9,spectral:N9,split:ya,sqrt:ns,square:Sn,squaredDifference:gC,squeeze:Ku,stack:Sa,step:Lf,stridedSlice:sO,string:A9,sub:tt,sum:nt,sumOutType:G2,tan:aO,tanh:_u,tensor:Ki,tensor1d:Ls,tensor2d:Xh,tensor3d:iO,tensor4d:i9,tensor5d:o9,tensor6d:l9,tensorScatterUpdate:c9,tensor_util:Ule,test_util:Xfe,tidy:me,tile:fi,time:nce,topk:lO,train:Rd,transpose:Ut,truncatedNormal:bC,unique:cO,unregisterGradient:xle,unregisterKernel:ble,unsortedSegmentSum:xC,unstack:Si,upcastType:ba,upperBound:u9,util:Ale,valueAndGrad:_de,valueAndGrads:Dde,variable:uO,variableGrads:DV,version_core:wge,where:ms,whereAsync:dO,zeros:Tr,zerosLike:Ht},Symbol.toStringTag,{value:"Module"}));const y7={kernelName:k0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(t,Lf(Ge(n,"float32"),-1))}}};const Ige={kernelName:jp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Sn(Ge(n,"float32")),s=ns(tt(gt(1),r));return zn(ut(t,s))}}}};const Age={kernelName:$p,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ns(tt(Sn(Ge(n,"float32")),1));return ut(t,r)}}}};const jge={kernelName:Df,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=At(n.shape,r.shape);return{a:()=>{let o=t;const l=Ar(n.shape,s);return l.length>0&&(o=nt(o,l)),le(o,n.shape)},b:()=>{let o=t;const l=Ar(r.shape,s);return l.length>0&&(o=nt(o,l)),le(o,r.shape)}}}};const $ge={kernelName:N0,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};const Rge={kernelName:T0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ht(n)}}};const Oge={kernelName:E0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ht(n)}}};const _ge={kernelName:Rp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,ns(tt(gt(1),Sn(Ge(n,"float32")))))}}};const Dge={kernelName:Op,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ns(Be(gt(1),Sn(Ge(n,"float32"))));return ut(t,r)}}}};const zge={kernelName:zp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=At(n.shape,r.shape);return{a:()=>{const o=Be(Sn(n),Sn(r));let l=oe(t,ut(r,o));const c=Ar(n.shape,s);return c.length>0&&(l=nt(l,c)),le(l,n.shape)},b:()=>{const o=Be(Sn(n),Sn(r));let l=zn(oe(t,ut(n,o)));const c=Ar(r.shape,s);return c.length>0&&(l=nt(l,c)),le(l,r.shape)}}}};const Pge={kernelName:_p,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,Be(Sn(Ge(n,"float32")),1))}}};const Lge={kernelName:Dp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,tt(gt(1),Sn(Ge(n,"float32"))))}}};function Mge(t,e,n,r,s,a){const i=G(t,"dy","avgPool3dGrad"),o=G(e,"input","avgPool3dGrad");let l=i,c=o,f=!1;o.rank===4&&(f=!0,l=le(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=le(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),q(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),q(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),sa("avgPool3dGrad",s,a);const p={dy:l,input:c},m={filterSize:n,strides:r,pad:s,dimRoundingMode:a},y=te.runKernel(WS,p,m);return f?le(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const Fge=ne({avgPool3dGrad_:Mge});const Bge={kernelName:A0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:a,pad:i,dimRoundingMode:o}=n;return{x:()=>Fge(t,r,s,a,i,o)}}};function Uge(t,e,n,r,s){const a=G(t,"dy","avgPoolGrad"),i=G(e,"input","avgPoolGrad");q(i.rank===a.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${a.rank})`);let o=i,l=a,c=!1;i.rank===3&&(c=!0,o=le(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=le(a,[1,a.shape[0],a.shape[1],a.shape[2]])),q(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),q(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const f={dy:l,input:o},p={filterSize:n,strides:r,pad:s},m=te.runKernel(US,f,p);return c?le(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const Wge=ne({avgPoolGrad_:Uge});const Vge={kernelName:I0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:a,pad:i}=n;return{x:()=>Wge(t,r,s,a,i)}}};const qge={kernelName:j0,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:a,transposeB:i}=n;return!a&&!i?{a:()=>zt(t,s,!1,!0),b:()=>zt(r,t,!0,!1)}:!a&&i?{a:()=>zt(t,s,!1,!1),b:()=>zt(t,r,!0,!1)}:a&&!i?{a:()=>zt(s,t,!1,!0),b:()=>zt(r,t,!1,!1)}:{a:()=>zt(s,t,!0,!0),b:()=>zt(t,r,!0,!0)}}};const Gge={kernelName:$0,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>Fb(t,r,s)}}};const Hge={kernelName:KW,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,a=r.shape,i=Array.from(a);for(let l=s.length-1;l>=0;l--)if(s[l]===a[l])i[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${a}].`);const o=[];for(let l=0;l<i.length;l++)i[l]>1&&o.push(l);return{x:()=>nt(t,o,!0)}}};const Kge={kernelName:Pp,gradFunc:t=>({x:()=>t.clone()})};const Xge={kernelName:Lp,gradFunc:t=>({x:()=>Ht(t)})};const Yge={kernelName:Mp,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:a}=n;return{x:()=>ms(ko(Cc(r,s),Gu(r,a)),t,Ht(t))}}};const Qge={kernelName:O0,inputsToSave:["x"],gradFunc:y7.gradFunc};const Zge={kernelName:_0,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,a=Lt(s,e[0].shape)[0],i=r.map(l=>l[a]);return ya(t,i,a).map(l=>()=>l)}};const Jge={kernelName:D0,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:a,strides:i,pad:o,dataFormat:l}=n;return q(Ou(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>RR(r.shape,t,s,i,o,l),filter:()=>pO(r,t,s.shape,i,o,l)}}};const eye={kernelName:z0,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:a,pad:i,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>uc(t,s,a,i,o,1,l),filter:()=>pO(t,r,s.shape,a,i,o,l)}}};function tye(t,e,n,r,s){let a=t;t.rank===4&&(a=le(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=le(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),q(a.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),q(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),q(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),q(a.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`),q(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:a,dy:i},l={strides:r,pad:s,filterShape:n};return te.runKernel(KS,o,l)}const nye=ne({conv3DBackpropFilter_:tye});const rye={kernelName:P0,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:a}=n;q(Ou(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,o]=e;return{x:()=>AV(i.shape,t,o,s,a),filter:()=>nye(i,t,o.shape,s,a)}}};const sye={kernelName:Fp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(zn(fC(Ge(n,"float32"))),t)}}};const aye={kernelName:Bp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(hC(Ge(n,"float32")),t)}}};const iye={kernelName:L0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:a,reverse:i}=n;return{x:()=>{const o=nr([s],r.rank);let l=Z2(t,s,a,!i);return o!=null&&(l=Ut(l,o)),l}}}};const oye={kernelName:M0,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:a,dimRoundingMode:i}=n,o=r??[1,1];q(Ou(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,c]=e;return q(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),q(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),q(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),q(bs(s,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${o}'.`),sa("depthwiseConv2d",a,i),{x:()=>x9(l.shape,t,c,s,a,o,i),filter:()=>b9(l,t,c.shape,s,a,o,i)}}};const lye={kernelName:F0,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,a={x:r,filter:s,dy:t},i={x:r,filter:s,dy:t};return{x:()=>te.runKernel(aw,a,n),filter:()=>te.runKernel(iw,i,n)}}};const cye={kernelName:Wp,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>te.runKernel(a2,r)}}};const uye={kernelName:Vp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=oe(wa(zn(Sn(n))),2/Math.sqrt(Math.PI));return{x:()=>oe(t,r)}}};const dye={kernelName:qp,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(t,n)}}};const fye={kernelName:U0,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>le(t,n.shape)}}};const hye={kernelName:Gp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(t,wa(n))}}};const pye={kernelName:Hp,gradFunc:t=>({x:()=>Ht(t)})};const mye={kernelName:Kp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=At(n.shape,r.shape);return{a:()=>{const o=ut(t,Ge(r,"float32")),l=Ar(n.shape,s);return l.length>0?le(nt(o,l),n.shape):o},b:()=>{let o=oe(t,Ge(n,"float32"));const l=Ar(r.shape,s);l.length>0&&(o=le(nt(o,l),r.shape));const c=Sn(r);return zn(ut(o,Ge(c,"float32")))}}}};const gye={kernelName:W0,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,a,i,o]=e,l=o??gt(1),c=Ar(a.shape,s.shape),f=[];if(a.rank===1){for(let k=0;k<s.shape.length-1;++k)f.push(s.shape[k]);f.push(1)}const p=tt(s,a),m=oe(t,l),y=cC(Be(i,gt(r))),b=oe(oe(oe(y,y),y),gt(-.5));return{x:()=>a.rank===1?le(oe(oe(t,fi(le(y,[1,1,1,a.shape[0]]),f)),l),s.shape):le(oe(oe(t,y),l),s.shape),mean:()=>{let k=oe(oe(y,gt(-1)),m);return a.rank===1&&(k=nt(k,c)),le(k,a.shape)},variance:()=>{let k=oe(oe(b,p),m);return a.rank===1&&(k=nt(k,c)),le(k,a.shape)},scale:()=>{const k=oe(p,y);let I=oe(t,k);return a.rank===1&&(I=nt(I,c)),le(I,a.shape)},offset:()=>{let k=t;return a.rank===1&&(k=nt(k,c)),le(k,a.shape)}}}};const yye={kernelName:V0,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:a,batchDims:i}=n,o=Lt(a,r.shape)[0],l=(c,f,p)=>()=>{const m=c.shape,y=f.size,b=m.slice(0,o),v=b.length,x=m.slice(a,m.length).slice(1),S=x.length,C=fL(0,v),E=fL(v+1,v+1+S),k=hL([b,[y],x]),I=le(p,k),$=le(f,[y]),_=hL([[v],C,E]),z=Ut(I,_);let L=xC(z,$,c.shape[o]);const R=qu(_);return L=Ut(L,R),L};if(i===1){const c=r.shape[0],f=r.split(c,0);return{x:()=>Sa(f.map((y,b)=>l(y,s.slice(b,1),t.slice(b,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function fL(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function hL(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}const bye={kernelName:Xp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Ht(n),b:()=>Ht(r)}}};const xye={kernelName:Yp,gradFunc:t=>({x:()=>Ge(t,"float32")})};const vye={kernelName:Qp,gradFunc:t=>({x:()=>Ht(t)})};const wye={kernelName:Zp,gradFunc:t=>({x:()=>Ht(t)})};const Sye={kernelName:Jp,gradFunc:t=>({x:()=>Ht(t)})};const Cye={kernelName:G0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,a=Ta(r,0);return{x:()=>ms(a,t,oe(t,s))}}};const kye={kernelName:tm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,Be(n,1))}}};const Nye={kernelName:em,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,Ge(n,"float32"))}}};const Tye={kernelName:XW,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const i=wa(r);return tt(t,oe(nt(t,s,!0),i))}}}};function Eye(t,e,n,r=5,s=1,a=1,i=.5){const o={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:a,beta:i};return te.runKernel(h2,o,l)}const Iye=ne({localResponseNormalizationBackprop_:Eye});const Aye={kernelName:Z0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:a,bias:i,alpha:o,beta:l}=n;return{x:()=>Iye(r,s,t,a,i,o,l)}}};function b7(t,e,n,r){return e.rank<n.rank&&(e=le(e,gr(e.shape,r))),t.rank<n.rank&&(t=le(t,gr(t.shape,r))),{x:()=>oe(t,Ge(Xi(n,e),t.dtype))}}const pL={kernelName:J0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,a=e[0],i=e[1],o=Lt(s,a.shape),l=b7(t,i,a,o);return{x:()=>l.x()}}};const jye={kernelName:nm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>oe(t,Ge(Cc(n,r),"float32")),b:()=>oe(t,Ge(ap(n,r),"float32"))}}};function $ye(t,e,n,r,s,a,i){const o=G(t,"dy","maxPool3dGrad"),l=G(e,"input","maxPool3dGrad"),c=G(n,"output","maxPool3dGrad");let f=o,p=l,m=c,y=!1;l.rank===4&&(y=!0,f=le(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),p=le(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),m=le(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),q(f.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${f.rank}.`),q(p.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${p.rank}.`),q(m.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${m.rank}.`),sa("maxPool3dGrad",a,i);const b={dy:f,input:p,output:m},v={filterSize:r,strides:s,pad:a,dimRoundingMode:i},x=te.runKernel(m2,b,v);return y?le(x,[x.shape[1],x.shape[2],x.shape[3],x.shape[4]]):x}const Rye=ne({maxPool3dGrad_:$ye});const Oye={kernelName:tb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=n;return{x:()=>Rye(t,r,s,a,i,o,l)}}};function _ye(t,e,n,r,s,a,i){const o=G(t,"dy","maxPoolGrad"),l=G(e,"input","maxPoolGrad"),c=G(n,"output","maxPoolGrad");q(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),q(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),q(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),sa("maxPoolGrad",a,i);const f={dy:o,input:l,output:c},p={filterSize:r,strides:s,pad:a,dimRoundingMode:i};return te.runKernel(p2,f,p)}const Dye=ne({maxPoolGrad_:_ye});const zye={kernelName:eb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:a,strides:i,pad:o}=n;return{x:()=>Dye(t,r,s,a,i,o)}}};const Pye={kernelName:nb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,a=Lt(s,r.shape),o=ss(r.shape,a)[1],l=Ee(o);return{x:()=>{const f=r.shape.slice();a.forEach(y=>{f[y]=1});const p=le(t,f);return ut(oe(p,ma(r.shape,"float32")),l)}}}};const Lye={kernelName:rb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[a,i]=e,o=Lt(s,a.shape),l=b7(t,i,a,o);return{x:()=>l.x()}}};const Mye={kernelName:rm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>oe(t,Ge(Gu(n,r),"float32")),b:()=>oe(t,Ge(Ta(n,r),"float32"))}}};const Fye={kernelName:sb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,a=s.map(i=>i[0]);return{x:()=>Gt(t,a,r.shape)}}};const Bye={kernelName:sm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=At(n.shape,r.shape);return{a:()=>{const o=Ar(n.shape,s);return o.length>0?le(nt(t,o),n.shape):t},b:()=>{const o=oe(t,zn(Am(ut(n,r)))),l=Ar(r.shape,s);return l.length>0?le(nt(o,l),r.shape):o}}}};const Uye={kernelName:am,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=At(n.shape,r.shape);return{a:()=>{const o=oe(t,Ge(r,"float32")),l=Ar(n.shape,s);return l.length>0?le(nt(o,l),n.shape):o},b:()=>{const o=oe(t,Ge(n,"float32")),l=Ar(r.shape,s);return l.length>0?le(nt(o,l),r.shape):o}}}};const Wye={kernelName:ab,gradFunc:t=>({x:()=>zn(t)})};const Vye={kernelName:lb,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Tr(n.shape,"float32")}}};const qye={kernelName:ob,gradFunc:t=>({x:()=>Ht(t)})};const Gye={kernelName:cb,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Si(t,r).map(a=>()=>a)}};const mL={kernelName:ub,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,a=s.map(i=>i[0]);return{x:()=>Gt(t,a,r.shape)}}};const Hye={kernelName:im,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,a=n,i=r,o=At(a.shape,i.shape);return{a:()=>{const f=Ge(i,"float32");let p=oe(t,oe(f,ml(a,tt(f,gt(1)))));const m=Ar(a.shape,o);return m.length>0&&(p=nt(p,m)),le(p,a.shape)},b:()=>{const f=Ta(a,0),p=ms(f,qa(a),Ht(a));let m=oe(t,oe(s,p));const y=Ar(i.shape,o);return y.length>0&&(m=nt(m,y)),le(m,i.shape)}}}};const Kye={kernelName:db,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=Ta(n,0);return{x:()=>ms(s,t,oe(t,r)),alpha:()=>{let a=ms(s,Ht(t),oe(t,n));const i=Ar(r.shape,t.shape);return i.length>0&&(a=nt(a,i)),le(a,r.shape)}}}};function Xye(t,e,n){const r=t.shape.slice();r[n]=1;const s=le(e,r),a=qy(t,n,!0,!1),i=qy(t,n,!0,!0),o=oe(a,i);return oe(s,o)}function Yye(t,e,n){const r=t.shape.length,s=r-n.length,a=nr(n,r);let i=t;a!=null&&(i=Ut(t,a));const o=i.shape.slice(),c=o.splice(r-n.length,n.length).reduce((m,y)=>m*y,1);o.push(c);const f=i.reshape(o);let p=Xye(f,e,s);if(p=p.reshape(i.shape),a!=null){const m=qu(a);p=Ut(p,m)}return p}const Qye={kernelName:fb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let a=[];return s==null?a=r.shape.map((i,o)=>o):typeof s=="number"?a=[s]:a=s,{x:()=>Yye(r,t,a)}}};const Zye={kernelName:Up,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=At(n.shape,r.shape);return{a:()=>{const o=ut(t,Ge(r,"float32")),l=Ar(n.shape,s);return l.length>0?le(nt(o,l),n.shape):o},b:()=>{let o=oe(t,Ge(n,"float32"));const l=Ar(r.shape,s);l.length>0&&(o=le(nt(o,l),r.shape));const c=Sn(r);return zn(ut(o,Ge(c,"float32")))}}}};const Jye={kernelName:om,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,zn(Sn(n)))}}};const e0e={kernelName:cm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=oe(Gu(n,6),Lf(n));return{x:()=>oe(t,Ge(r,"float32"))}}};const t0e={kernelName:lm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(t,Ge(Lf(n),"float32"))}}};const n0e={kernelName:hb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>le(t,n.shape)}}};const r0e={kernelName:mb,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>te.runKernel(E2,s,n)}}};const s0e={kernelName:pb,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>te.runKernel(T2,s,n)}}};const a0e={kernelName:gb,gradFunc:(t,e,n)=>{const{dims:r}=n,s=Lt(r,t.shape);return{x:()=>wi(t,s)}}};const i0e={kernelName:um,gradFunc:t=>({x:()=>Ht(t)})};const o0e={kernelName:dm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zn(ut(t,oe(ml(n,1.5),2)))}}};const l0e={kernelName:yb,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Ge(Ht(n),"float32"),t:()=>oe(t,Ge(n,t.dtype)),e:()=>oe(t,Ge(Pb(n),t.dtype))}}};const c0e={kernelName:fm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ta(n,gt(0)),s=gt(OC),a=gt(_C),i=oe(t,a),o=oe(oe(t,s),wa(Ge(n,"float32")));return ms(r,i,o)}}}};const u0e={kernelName:gm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(t,oe(n,tt(gt(1),n)))}}};const d0e={kernelName:mm,gradFunc:t=>({x:()=>Ht(t)})};const f0e={kernelName:hm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(Rb(Ge(n,"float32")),t)}}};const h0e={kernelName:pm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(Q2(Ge(n,"float32")),t)}}};const p0e={kernelName:bb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:a}=n,i=r.shape,[o,l]=$C(r,s,a),c=[];for(let f=0;f<t.rank;f++)c.push([o[f],i[f]-o[f]-l[f]]);return{x:()=>kc(t,c)}}};const m0e={kernelName:Sb,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,a=!0,i=oe(t,r);return{logits:()=>tt(i,oe(nt(i,[s],a),r))}}};const g0e={kernelName:ym,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(t,vo(n))}}};const gL={kernelName:vb,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>$b(t,r,s)}}};const yL={kernelName:wb,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>mr(t,r)}}};const y0e={kernelName:bm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,oe(ns(Ge(n,"float32")),2))}}};const b0e={kernelName:z2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(t,oe(Ge(n,"float32"),2))}}};const x0e={kernelName:xm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=gt(2);return{a:()=>oe(t,oe(s,tt(n,r))),b:()=>oe(t,oe(s,tt(r,n)))}}};const v0e={kernelName:km,gradFunc:t=>({x:()=>Ht(t)})};const w0e={kernelName:vm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=At(n.shape,r.shape);return{a:()=>{let o=t;const l=Ar(n.shape,s);return l.length>0&&(o=nt(o,l)),le(o,n.shape)},b:()=>{let o=t;const l=Ar(r.shape,s);return l.length>0&&(o=nt(o,l)),le(zn(o),r.shape)}}}};const S0e={kernelName:xb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:a}=n;Lt(a,r.shape).forEach(c=>{s[c]=1});const o=le(t,s),l=oe(o,ma(r.shape,"float32"));return{x:()=>l}}};const C0e={kernelName:wm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,Sn(Rb(n)))}}};const k0e={kernelName:Sm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(tt(gt(1),Sn(n)),t)}}};const N0e={kernelName:Cm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let i=Ht(r);if(r.rank===1)for(let o=0;o<s[0];++o)i=Be(i,Gt(t,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)i=Be(i,Gt(t,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)i=Be(i,Gt(t,[o*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let f=0;f<s[3];++f)i=Be(i,Gt(t,[o*r.shape[0],l*r.shape[1],c*r.shape[2],f*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};const T0e={kernelName:Qd,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,a=qu(s);return{x:()=>Ut(t,a)}}};const E0e={kernelName:kb,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>Sa(t,s)}}};const I0e={kernelName:Nb,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>A0e(t,n)}}};function A0e(t,e){const n=Nl(e,Ht(e)),r=jm(t,n);let s=Cc(e,gt(0,"int32"));const a=r.rank-s.rank;for(let o=0;o<a;++o)s=zs(s,o+1);s=ko(s,ma(r.shape,"bool"));const i=Ht(r);return ms(s,r,i)}const j0e={kernelName:Tb,gradFunc:t=>({x:()=>Ht(t)})};const $0e=[y7,Ige,Age,jge,$ge,Rge,Oge,_ge,Dge,zge,Pge,Lge,Bge,Vge,qge,Gge,Hge,Kge,Xge,Yge,Qge,Zge,eye,Jge,rye,sye,aye,iye,oye,lye,Zye,cye,uye,dye,fye,hye,mye,pye,gye,yye,bye,xye,vye,wye,Sye,Cye,kye,Nye,Tye,Aye,pL,pL,jye,Oye,zye,Pye,Lye,Mye,Fye,Bye,Uye,Wye,Vye,qye,Gye,mL,mL,Hye,Kye,Qye,Jye,e0e,t0e,n0e,r0e,s0e,a0e,i0e,o0e,l0e,c0e,u0e,d0e,f0e,h0e,p0e,m0e,g0e,gL,gL,yL,yL,y0e,x0e,b0e,v0e,w0e,S0e,C0e,k0e,N0e,T0e,E0e,I0e,j0e];for(const t of $0e)YW(t);je().prototype.abs=function(){return this.throwIfDisposed(),Nr(this)};je().prototype.acos=function(){return this.throwIfDisposed(),hR(this)};je().prototype.acosh=function(){return this.throwIfDisposed(),pR(this)};je().prototype.add=function(t){return this.throwIfDisposed(),Be(this,t)};je().prototype.all=function(t,e){return this.throwIfDisposed(),K2(this,t,e)};je().prototype.any=function(t,e){return this.throwIfDisposed(),Uy(this,t,e)};je().prototype.argMax=function(t){return this.throwIfDisposed(),hf(this,t)};je().prototype.argMin=function(t){return this.throwIfDisposed(),mR(this,t)};je().prototype.asScalar=function(){return this.throwIfDisposed(),q(this.size===1,()=>"The array must have only 1 element."),le(this,[])};je().prototype.asType=function(t){return this.throwIfDisposed(),Ge(this,t)};je().prototype.as1D=function(){return this.throwIfDisposed(),le(this,[this.size])};je().prototype.as2D=function(t,e){return this.throwIfDisposed(),le(this,[t,e])};je().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),le(this,[t,e,n])};je().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),le(this,[t,e,n,r])};je().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),le(this,[t,e,n,r,s])};je().prototype.asin=function(){return this.throwIfDisposed(),gR(this)};je().prototype.asinh=function(){return this.throwIfDisposed(),yR(this)};je().prototype.atan=function(){return this.throwIfDisposed(),bR(this)};je().prototype.atan2=function(t){return this.throwIfDisposed(),xR(this,t)};je().prototype.atanh=function(){return this.throwIfDisposed(),vR(this)};je().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),jb(this,t,e,n,r)};je().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),$b(this,t,e)};je().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),Nm(this,t,e,n,r,s)};je().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Zd(this,t)};je().prototype.cast=function(t){return this.throwIfDisposed(),Ge(this,t)};je().prototype.ceil=function(){return this.throwIfDisposed(),ER(this)};je().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),va(this,t,e)};je().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof pn&&(t=[t]),mr([this,...t],e)};je().prototype.conv1d=function(t,e,n,r,s,a){return this.throwIfDisposed(),X2(this,t,e,n,r,s,a)};je().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),Y2(this,t,e,n,r,s)};je().prototype.conv2d=function(t,e,n,r,s,a){return this.throwIfDisposed(),uc(this,t,e,n,r,s,a)};je().prototype.cos=function(){return this.throwIfDisposed(),Rb(this)};je().prototype.cosh=function(){return this.throwIfDisposed(),Q2(this)};je().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),qy(this,t,e,n)};je().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),Z2(this,t,e,n)};je().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),DR(this,t,e)};je().prototype.depthwiseConv2d=function(t,e,n,r,s,a){return this.throwIfDisposed(),Tm(this,t,e,n,r,s,a)};je().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),zR(this,t,e,n,r,s)};je().prototype.divNoNan=function(t){return this.throwIfDisposed(),PR(this,t)};je().prototype.div=function(t){return this.throwIfDisposed(),ut(this,t)};je().prototype.dot=function(t){return this.throwIfDisposed(),LR(this,t)};je().prototype.elu=function(){return this.throwIfDisposed(),Em(this)};je().prototype.equal=function(t){return this.throwIfDisposed(),Xi(this,t)};je().prototype.erf=function(){return this.throwIfDisposed(),J2(this)};je().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),FR(this,t,e)};je().prototype.exp=function(){return this.throwIfDisposed(),wa(this)};je().prototype.expandDims=function(t){return this.throwIfDisposed(),zs(this,t)};je().prototype.expm1=function(){return this.throwIfDisposed(),BR(this)};je().prototype.fft=function(){return this.throwIfDisposed(),qb(this)};je().prototype.flatten=function(){return this.throwIfDisposed(),le(this,[this.size])};je().prototype.floor=function(){return this.throwIfDisposed(),Am(this)};je().prototype.floorDiv=function(t){return this.throwIfDisposed(),H2(this,t)};je().prototype.gather=function(t,e,n){return this.throwIfDisposed(),jm(this,t,e,n)};je().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Cc(this,t)};je().prototype.greater=function(t){return this.throwIfDisposed(),Ta(this,t)};je().prototype.ifft=function(){return this.throwIfDisposed(),cp(this)};je().prototype.irfft=function(){return this.throwIfDisposed(),mC(this)};je().prototype.isFinite=function(){return this.throwIfDisposed(),UR(this)};je().prototype.isInf=function(){return this.throwIfDisposed(),WR(this)};je().prototype.isNaN=function(){return this.throwIfDisposed(),VR(this)};je().prototype.leakyRelu=function(t){return this.throwIfDisposed(),_b(this,t)};je().prototype.lessEqual=function(t){return this.throwIfDisposed(),Gu(this,t)};je().prototype.less=function(t){return this.throwIfDisposed(),ap(this,t)};je().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),qR(this,t,e,n,r)};je().prototype.logSigmoid=function(){return this.throwIfDisposed(),GR(this)};je().prototype.logSoftmax=function(t){return this.throwIfDisposed(),nC(this,t)};je().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),zb(this,t,e)};je().prototype.log=function(){return this.throwIfDisposed(),qa(this)};je().prototype.log1p=function(){return this.throwIfDisposed(),Db(this)};je().prototype.logicalAnd=function(t){return this.throwIfDisposed(),ko(this,t)};je().prototype.logicalNot=function(){return this.throwIfDisposed(),Pb(this)};je().prototype.logicalOr=function(t){return this.throwIfDisposed(),rC(this,t)};je().prototype.logicalXor=function(t){return this.throwIfDisposed(),HR(this,t)};je().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),zt(this,t,e,n)};je().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Lb(this,t,e,n,r)};je().prototype.max=function(t,e){return this.throwIfDisposed(),yi(this,t,e)};je().prototype.maximum=function(t){return this.throwIfDisposed(),Nl(this,t)};je().prototype.mean=function(t,e){return this.throwIfDisposed(),Qn(this,t,e)};je().prototype.min=function(t,e){return this.throwIfDisposed(),sp(this,t,e)};je().prototype.minimum=function(t){return this.throwIfDisposed(),Du(this,t)};je().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),XR(this,t,e)};je().prototype.mod=function(t){return this.throwIfDisposed(),YR(this,t)};je().prototype.mul=function(t){return this.throwIfDisposed(),oe(this,t)};je().prototype.neg=function(){return this.throwIfDisposed(),zn(this)};je().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Im(this,t,e,n)};je().prototype.notEqual=function(t){return this.throwIfDisposed(),gf(this,t)};je().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),ip(this,t,e,n)};je().prototype.onesLike=function(){return this.throwIfDisposed(),Ga(this)};je().prototype.pad=function(t,e){return this.throwIfDisposed(),kc(this,t,e)};je().prototype.pool=function(t,e,n,r,s,a){return this.throwIfDisposed(),QR(this,t,e,n,r,s,a)};je().prototype.pow=function(t){return this.throwIfDisposed(),ml(this,t)};je().prototype.prelu=function(t){return this.throwIfDisposed(),Bb(this,t)};je().prototype.prod=function(t,e){return this.throwIfDisposed(),ZR(this,t,e)};je().prototype.reciprocal=function(){return this.throwIfDisposed(),nO(this)};je().prototype.relu=function(){return this.throwIfDisposed(),Ro(this)};je().prototype.relu6=function(){return this.throwIfDisposed(),oC(this)};je().prototype.reshapeAs=function(t){return this.throwIfDisposed(),le(this,t.shape)};je().prototype.reshape=function(t){return this.throwIfDisposed(),le(this,t)};je().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),C9(this,t,e,n)};je().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),k9(this,t,e,n)};je().prototype.reverse=function(t){return this.throwIfDisposed(),wi(this,t)};je().prototype.rfft=function(){return this.throwIfDisposed(),Gb(this)};je().prototype.round=function(){return this.throwIfDisposed(),lC(this)};je().prototype.rsqrt=function(){return this.throwIfDisposed(),cC(this)};je().prototype.selu=function(){return this.throwIfDisposed(),uC(this)};je().prototype.separableConv2d=function(t,e,n,r,s,a){return this.throwIfDisposed(),dC(this,t,e,n,r,s,a)};je().prototype.sigmoid=function(){return this.throwIfDisposed(),vo(this)};je().prototype.sign=function(){return this.throwIfDisposed(),rO(this)};je().prototype.sin=function(){return this.throwIfDisposed(),fC(this)};je().prototype.sinh=function(){return this.throwIfDisposed(),hC(this)};je().prototype.slice=function(t,e){return this.throwIfDisposed(),Gt(this,t,e)};je().prototype.softmax=function(t){return this.throwIfDisposed(),Vb(this,t)};je().prototype.softplus=function(){return this.throwIfDisposed(),Pf(this)};je().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Fb(this,t,e)};je().prototype.split=function(t,e){return this.throwIfDisposed(),ya(this,t,e)};je().prototype.sqrt=function(){return this.throwIfDisposed(),ns(this)};je().prototype.square=function(){return this.throwIfDisposed(),Sn(this)};je().prototype.squaredDifference=function(t){return this.throwIfDisposed(),gC(this,t)};je().prototype.squeeze=function(t){return this.throwIfDisposed(),Ku(this,t)};je().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof pn?[this,t]:[this,...t];return Sa(n,e)};je().prototype.step=function(t){return this.throwIfDisposed(),Lf(this,t)};je().prototype.stridedSlice=function(t,e,n,r,s,a,i,o){return this.throwIfDisposed(),sO(this,t,e,n,r,s,a,i,o)};je().prototype.sub=function(t){return this.throwIfDisposed(),tt(this,t)};je().prototype.sum=function(t,e){return this.throwIfDisposed(),nt(this,t,e)};je().prototype.tan=function(){return this.throwIfDisposed(),aO(this)};je().prototype.tanh=function(){return this.throwIfDisposed(),_u(this)};je().prototype.tile=function(t){return this.throwIfDisposed(),fi(this,t)};je().prototype.toBool=function(){return this.throwIfDisposed(),Ge(this,"bool")};je().prototype.toFloat=function(){return this.throwIfDisposed(),Ge(this,"float32")};je().prototype.toInt=function(){return this.throwIfDisposed(),Ge(this,"int32")};je().prototype.topk=function(t,e){return this.throwIfDisposed(),lO(this,t,e)};je().prototype.transpose=function(t){return this.throwIfDisposed(),Ut(this,t)};je().prototype.unique=function(t){return this.throwIfDisposed(),cO(this,t)};je().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),xC(this,t,e)};je().prototype.unstack=function(t){return this.throwIfDisposed(),Si(this,t)};je().prototype.where=function(t,e){return this.throwIfDisposed(),ms(t,this,e)};je().prototype.zerosLike=function(){return this.throwIfDisposed(),Ht(this)};class Zo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Zo.prototype)}}class Vi extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Vi.prototype)}}class ce extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ce.prototype)}}class _t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,_t.prototype)}}class QO extends Error{constructor(e){super(e),Object.setPrototypeOf(this,QO.prototype)}}class x7{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}function xf(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Jo(t,e){if(!t)throw new QO(e)}function bL(t,e){let n=0;for(const r of t)r===e&&n++;return n}function ha(t){return t.length===1?t[0]:t}function mn(t){return Array.isArray(t)?t:[t]}function Kl(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Md(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Pi={};function ZO(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function nj(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>nj(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:nj(r))}}}function Yb(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const a=t;let i;if(a in n)i=n[a];else if(a in Pi)i=Pi[a];else if(i=e[a],i==null)throw new ce(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const a=t;if(a.className==null||a.config==null)throw new ce(`${r}: Improper config format: ${JSON.stringify(a)}.
'className' and 'config' must set.`);const i=a.className;let o,l;if(i in n?[o,l]=n[i]:i in Pi?[o,l]=Pi.className:i in e&&([o,l]=e[i]),o==null)throw new ce(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const y of Object.keys(Pi))c[y]=Pi[y];for(const y of Object.keys(n))c[y]=n[y];const f=a.config;f.customObjects=c;const p=Object.assign({},Pi);for(const y of Object.keys(n))Pi[y]=n[y];nj(a.config);const m=l(o,a.config,n,s);return Pi=Object.assign({},p),m}else{const c=Object.assign({},Pi);for(const p of Object.keys(n))Pi[p]=n[p];const f=new o(a.config);return Pi=Object.assign({},c),f}}}function R0e(t,e){return t<e?-1:t>e?1:0}function Hv(t,e){return-1*R0e(t,e)}function Su(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function O0e(t){if(t==null)throw new ce(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Ff(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new ce(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function JO(t,e,n=0,r=1/0){return Jo(n>=0),Jo(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function Jr(t,e){Array.isArray(t)?(q(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Jr(n,`element ${r+1} of ${e}`))):q(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${v7(t)}.`)}function v7(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>v7(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function _0e(t,e,n){let r=n!=null?n():Xs(),s;return(...i)=>{const o=n!=null?n():Xs();return o-r<e||(r=o,s=t(...i)),s}}function w7(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}let D0e=0;function S7(){return D0e++}const Kv={};function DC(t=""){return t in Kv||(Kv[t]=0),Kv[t]+=1,t+Kv[t].toString()}const z0e=["channelsFirst","channelsLast"],P0e=["nearest","bilinear"],L0e=["valid","same","causal"],M0e=["max","avg"],F0e=["sum","mul","concat","ave"];const Rh=new Map;function br(t){Ff(z0e,"DataFormat",t)}function B0e(t){Ff(P0e,"InterpolationFormat",t)}function Ei(t){Ff(L0e,"PaddingMode",t)}function C7(t){Ff(M0e,"PoolMode",t)}const Ey=[],xL="/";function Jd(t,e){Ey.push(t);try{const n=e();return Ey.pop(),n}catch(n){throw Ey.pop(),n}}function U0e(){return Ey.length===0?"":Ey.join(xL)+xL}function k7(t){if(!T7(t))throw new Error("Not a valid tensor name: '"+t+"'");return U0e()+t}function N7(t){if(!T7(t))throw new Error("Not a valid tensor name: '"+t+"'");Rh.has(t)||Rh.set(t,0);const e=Rh.get(t);if(Rh.set(t,Rh.get(t)+1),e>0){const n=`${t}_${e}`;return Rh.set(n,1),n}else return t}const W0e=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function T7(t){return!!t.match(W0e)}function V0e(t){return t===parseInt(t.toString(),10)}function Cu(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function up(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function zu(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function No(t,e){if(e<t)throw new ce(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}let AE;function zr(){return AE==null&&(AE=lR().epsilon()),AE}function To(){return"channelsLast"}function ul(t,e){return Ge(t,e)}function Qb(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),le(t,n)}function q0e(t,e){return me(()=>{if(t.shape.length!==2)throw new ce(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Qb(t,1);return rj(n,[1,e,1])})}function G0e(t){const e=[Cu(t.shape)];return le(t,e)}function H0e(t){if(t.rank<=1)throw new ce(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Cu(t.shape,1)];return le(t,e)}function ef(t,e,n){return me(()=>{switch(t.rank){case 1:return Ub(t,e,n);case 2:return pC(t,[e,0],[n,t.shape[1]]);case 3:return Wb(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return lp(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Gt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Gt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ce(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function jE(t,e,n){return me(()=>{switch(t.rank){case 1:return Ub(t,e,n);case 2:return pC(t,[0,e],[t.shape[0],n]);case 3:return Wb(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return lp(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ce(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Xv(t,e,n,r){return me(()=>{switch(t.rank){case 1:return Ub(t,e,n);case 2:switch(r){case 1:return ef(t,e,n);case 2:return jE(t,e,n);default:throw new ce(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return ef(t,e,n);case 2:return Wb(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return jE(t,e,n);default:throw new ce(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return ef(t,e,n);case 2:return lp(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return lp(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return jE(t,e,n);default:throw new ce(`The axis is not within the rank of the tensor ${r}`)}default:throw new ce(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function e_(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),mr(t,e)}function vL(t,e){switch(t.rank){case 1:return IR([t,e]);case 2:return AR([t,e],0);case 3:return jR([t,e],0);case 4:return $R([t,e],0);default:throw new ce(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function rj(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ce(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return fi(t,e)}function zC(t,e=0,n=1,r,s){return iC(t,e,n,r,s)}function dl(t,e,n,r){if(t.rank<2||e.rank<2)throw new _t(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],a=e.shape.slice(-2)[0];if(s!==a)throw new _t(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return QA({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?sj(t.rank,r,To()):null,activation:n});{const s=t.shape.slice(),a=s.pop();t=le(t,[-1,a]);const i=e.shape.slice(),o=i.pop(),l=i.pop(),c=[...i,o],f=Array.from({length:e.rank},(b,v)=>v===0?e.rank-2:v<=e.rank-2?v-1:v);e=le(Ut(e,f),[l,-1]);const p=[...s,...c];return le(QA({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?sj(t.rank,r,To()):null,activation:n}),p)}}function E7(t,e,n){return me(()=>(Array.isArray(e)?e=Ls(e,"int32"):e=Ge(e,"int32"),jm(t,e,n)))}function Zb(t){return oe(t,t)}function sj(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new ce(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?le(e,[1,r[0],1,1,1]):le(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?le(e,[1,1,1,1,r[0]]):le(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?le(e,[1,r[0],1,1]):le(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?le(e,[1,1,1,r[0]]):le(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?le(e,[1,r[0],1]):le(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?le(e,[1,1,r[0]]):le(e,[1].concat(r))}else if(t<3)return e;throw new ce(`Unsupported input rank by biasAdd: ${e.rank}`)}function Oo(t,e,n){return me(()=>(n==null&&(n=To()),br(n),Be(t,sj(t.rank,e,n))))}function K0e(t,e=1){if(e!==1)throw new _t(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Em(t)}function X0e(t){return me(()=>ut(t,Be(Nr(t),1)))}function I7(t,e,n,r){return me(()=>fO(t,e,n,r))}function Y0e(t){return me(()=>{const e=Be(.5,oe(.2,t));return va(e,0,1)})}function Jb(t,e,n=!1){return n?t():e()}const Q0e=["fanIn","fanOut","fanAvg"],Z0e=["normal","uniform","truncatedNormal"];function J0e(t){Ff(Q0e,"FanMode",t)}function ebe(t){Ff(Z0e,"Distribution",t)}class Ji extends Mf{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class A7 extends Ji{apply(e,n){return Tr(e,n)}}A7.className="Zeros";We(A7);class t_ extends Ji{apply(e,n){return ma(e,n)}}t_.className="Ones";We(t_);class j7 extends Ji{constructor(e){if(super(),typeof e!="object")throw new ce(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ce(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return me(()=>oe(gt(this.value),ma(e,n)))}getConfig(){return{value:this.value}}}j7.className="Constant";We(j7);class $7 extends Ji{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Hu(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}$7.className="RandomUniform";We($7);class R7 extends Ji{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new _t(`randomNormal does not support dType ${n}.`);return zC(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}R7.className="RandomNormal";We(R7);class O7 extends Ji{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new _t(`truncatedNormal does not support dType ${n}.`);return bC(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}O7.className="TruncatedNormal";We(O7);class _7 extends Ji{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return me(()=>{if(e.length!==2||e[0]!==e[1])throw new ce("Identity matrix initializer can only be used for 2D square matrices.");return oe(this.gain,eC(e[0]))})}getConfig(){return{gain:this.gain}}}_7.className="Identity";We(_7);function tbe(t,e="channelsLast"){let n,r;if(br(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=Cu(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=Cu(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=Cu(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class Ha extends Ji{constructor(e){if(super(),e.scale<0)throw new ce(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,J0e(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,ebe(this.distribution),this.seed=e.seed}apply(e,n){const r=tbe(e),s=r[0],a=r[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,s):this.mode==="fanOut"?i/=Math.max(1,a):i/=Math.max(1,(s+a)/2),this.distribution==="normal"){const o=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new _t(`${this.getClassName()} does not support dType ${n}.`);return bC(e,0,o,n,this.seed)}else{const o=Math.sqrt(3*i);return Hu(e,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ha.className="VarianceScaling";We(Ha);class n_ extends Ha{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ha.className}}n_.className="GlorotUniform";We(n_);class r_ extends Ha{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ha.className}}r_.className="GlorotNormal";We(r_);class s_ extends Ha{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ha.className}}s_.className="HeNormal";We(s_);class a_ extends Ha{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ha.className}}a_.className="HeUniform";We(a_);class i_ extends Ha{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ha.className}}i_.className="LeCunNormal";We(i_);class o_ extends Ha{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ha.className}}o_.className="LeCunUniform";We(o_);class D7 extends Ji{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return me(()=>{if(e.length<2)throw new _t("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=Ee(e.slice(0,-1)),s=e[e.length-1],a=r*s;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);const i=[Math.max(s,r),Math.min(s,r)],o=zC(i,0,1,n,this.seed),l=gO.qr(o,!1);let c=l[0];const p=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return c=oe(c,p.sign()),r<s&&(c=c.transpose()),oe(gt(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}D7.className="Orthogonal";We(D7);const wL={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function SL(t,e={}){return Yb(t,ui.getMap().classNameMap,e,"initializer")}function Zn(t){return ZO(t)}function Wn(t){if(typeof t=="string"){const e=t in wL?wL[t]:t;if(e==="GlorotNormal")return new r_;if(e==="GlorotUniform")return new n_;if(e==="HeNormal")return new s_;if(e==="HeUniform")return new a_;if(e==="LeCunNormal")return new i_;if(e==="LeCunUniform")return new o_;{const n={};return n.className=e,n.config={},SL(n)}}else return t instanceof Ji?t:SL(t)}function aj(t){return Array.isArray(t)&&Array.isArray(t[0])}function fw(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function St(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ce(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function tn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ce(`Expected exactly 1 Shape; got ${t.length}`)}else return t}function hw(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}const CL="Variable";class nbe{constructor(e,n="float32",r=CL,s=!0,a=null){this.dtype=n??"float32",this.shape=e.shape,this.id=S7(),r=r??CL,this.originalName=k7(r),this.name=N7(this.originalName),this.trainable_=s,this.constraint=a,this.val=uO(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),rbe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function rbe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function ij(t){return t.map(e=>e.read())}function l_(t){t.forEach(e=>{e[0].write(e[1])})}class Pr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class yl{constructor(e,n,r,s,a,i,o){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=a,this.outputTensorIndex=o,this.id=S7(),i!=null&&(this.originalName=k7(i),this.name=N7(this.originalName)),this.rank=n.length}}let sbe=0;class PC{constructor(e,n){this.callArgs=n,this.id=sbe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r?.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let abe=0,Mt=class extends Mf{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=abe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Kl(r)+"_"+DC(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let a=null;e.batchSize!=null&&(a=e.batchSize),r=[a].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Vi(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new ce(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return ha(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return ha(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Zo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Zo(`Layer ${this.name} is not connected, no input to return.`);return ha(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Zo(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Zo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return ha(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=mn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=mn(this.inputSpec);if(n.length!==r.length)throw new ce(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const a=n[s],i=r[s];if(i==null)continue;const o=a.rank;if(i.ndim!=null&&o!==i.ndim)throw new ce(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${o}`);if(i.maxNDim!=null&&o>i.maxNDim)throw new ce(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${o}`);if(i.minNDim!=null&&o<i.minNDim)throw new ce(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${o}.`);if(i.dtype!=null&&a.dtype!==i.dtype)throw new ce(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${a.dtype}.`);if(i.axes){const l=a.shape;for(const c in i.axes){const f=Number(c),p=i.axes[c],m=f>=0?l[f]:l[l.length+f];if(p!=null&&[p,null].indexOf(m)===-1)throw new ce(`Input ${s} is incompatible with layer ${this.name}: expected axis ${f} of input shape to have value ${p} but got shape ${l}.`)}}if(i.shape!=null)for(let l=0;l<i.shape.length;++l){const c=i.shape[l],f=a.shape[l];if(c!=null&&f!=null&&c!==f)throw new ce(`Input ${s} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${a.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=mn(e),s=lbe(e),a=cbe(e);if(s===a)throw new ce("Arguments to apply() must be all SymbolicTensors or all Tensors");return Jd(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const o of mn(e))i.push(o.shape);this.build(ha(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const o=mn(i),l=[];for(let c of o)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(i=ha(l),this.activityRegularizer!=null)throw new _t("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=ibe(e),o=this.computeOutputShape(i);let l;const c=obe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((f,p)=>new yl(c,f,this,mn(e),n,this.name,p)):l=new yl(c,o,this,mn(e),n,this.name),this.addInboundNode(e,l,null,null,i,o,n),this._refCount++,this.activityRegularizer!=null)throw new _t("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Zo(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Zo(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Vi(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return hw(this.weights)}build(e){this.built=!0}getWeights(e=!1){return ij(e?this.trainableWeights:this.weights)}setWeights(e){me(()=>{const n=this.weights;if(n.length!==e.length)throw new ce(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=ij(n);for(let a=0;a<s.length;++a){const i=s[a],o=n[a],l=e[a];if(!Ft(i.shape,l.shape))throw new ce(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}l_(r)})}addWeight(e,n,r,s,a,i,o,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new ce(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():Wn("zeros"));const c=s.apply(n,r),f=new nbe(c,r,e,i,o);return c.dispose(),a!=null&&this.addLoss(()=>a.apply(f.read())),i==null&&(i=!0),i?this._trainableWeights.push(f):this._nonTrainableWeights.push(f),f}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=mn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),a=mn(n),i=mn(s);if(a.length!==i.length)throw new Error(`${this.name} outputs ${a.length} tensors but ${a.length} masks for those tensors`);for(let o=0;o<a.length;o++)a[o].kerasMask=i[o]}addInboundNode(e,n,r,s,a,i,o=null){const l=mn(e);n=mn(n),r=mn(r),s=mn(s),a=fw(a),i=fw(i);const c=[],f=[],p=[];for(const m of l)c.push(m.sourceLayer),f.push(m.nodeIndex),p.push(m.tensorIndex);new PC({outboundLayer:this,inboundLayers:c,nodeIndices:f,tensorIndices:p,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:a,outputShapes:i},o);for(let m=0;m<n.length;m++)n[m].sourceLayer=this,n[m].nodeIndex=this.inboundNodes.length-1,n[m].tensorIndex=m}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function ibe(t){t=mn(t);const e=[];for(const n of t)e.push(n.shape);return ha(e)}function obe(t){return"float32"}function z7(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let a=0;a<r.inboundLayers.length;a++){const i=r.inputTensors[a],o=r.inboundLayers[a],l=r.nodeIndices[a],c=z7(i,o,l);for(const f of c)s.indexOf(f)===-1&&s.push(f)}return s}}}function lbe(t){let e=!0;for(const n of mn(t))if(!(n instanceof yl)){e=!1;break}return e}function cbe(t){let e=!0;for(const n of mn(t))if(n instanceof yl){e=!1;break}return e}class ex extends Mt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:DC("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ce("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new ce("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ce("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new yl(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new PC({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new ce(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}ex.className="InputLayer";We(ex);function ube(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ce("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new ex({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function dbe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Ge(e,t.dtype)}catch{throw new ce(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class gu{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof gu)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=dbe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ce(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof yl){if(this.id2Value[e.id]==null)throw new ce(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ce(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof yl){if(this.id2Value[e.id]==null)throw new ce(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ce(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Pt(this.id2Mask)}}const pw=new x7,mw=new x7;function fbe(t){pw?.setMaxEntries(t),mw?.setMaxEntries(t)}function by(t,e,n,r){const s=n==null?!1:n.training,a=Array.isArray(t),i=a?t:[t],o=i.map(b=>b.name),l=[],c=e.names();for(const b of o)c.indexOf(b)!==-1?l.push(e.getValue(b)):l.push(null);const f=o.join(",")+"|"+e.names().sort().join(",");let p=pw.get(f),m;if(p==null){const b=hbe(i,e);p=b.sorted,m=b.recipientCounts,pw.put(f,p),mw.put(f,m)}m={},s||Object.assign(m,mw.get(f));const y=new gu(e);for(let b=0;b<p.length;++b){const v=p[b],x=v.sourceLayer;if(x instanceof ex)continue;const S=[],C=[],E=[];let k=!1;for(const L of v.inputs){const R=y.getValue(L),D=y.getMask(L);S.push(R),C.push(D),D!=null&&(k=!0),s||(m[L.name]--,m[L.name]===0&&!e.hasKey(L)&&o.indexOf(L.name)===-1&&!R.isDisposed&&L.sourceLayer.stateful!==!0&&E.push(R))}k&&(n=n||{},n.mask=C[0]);const I=mn(x.apply(S,n));let $=null;x.supportsMasking&&($=x.computeMask(S,C));const _=mbe(v),z=Array.isArray(_)?_:[_];for(let L=0;L<z.length;++L){y.hasKey(z[L])||y.add(z[L],I[L],Array.isArray($)?$[0]:$);const R=o.indexOf(z[L].name);R!==-1&&(l[R]=I[L])}s||Pt(E)}return y.disposeMasks(),a?l:l[0]}function hbe(t,e){q(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=kL(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const a of t){const{sorted:i,recipientMap:o}=kL(a,e);for(const l of i)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:pbe(r)}}function pbe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function kL(t,e){const n=new Set,r=[],s={};for(const o of e.names())n.add(o);const a=[],i=[];for(a.push(t);a.length>0;){const o=a[a.length-1];if(n.has(o.name)){a.pop();continue}const l=i[i.length-1]===a.length-1;if(o.inputs.length===0||l)a.pop(),r.push(o),n.add(o.name),l&&i.pop();else{i.push(a.length-1);for(const c of o.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(o.name),!n.has(c.name)&&a.push(c)}}return{sorted:r,recipientMap:s}}function mbe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}const gbe=ye();gbe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,fbe);function c_(t,e){return me(()=>ns(nt(oe(t,t),e,!0)))}class tx extends Mf{getConfig(){return{}}}class P7 extends tx{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return me(()=>{const n=c_(e,this.axis),r=va(n,0,this.maxValue);return oe(e,ut(r,Be(zr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}P7.className="MaxNorm";We(P7);class L7 extends tx{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return me(()=>ut(e,Be(zr(),c_(e,this.axis))))}getConfig(){return{axis:this.axis}}}L7.className="UnitNorm";We(L7);class M7 extends tx{apply(e){return Ro(e)}}M7.className="NonNeg";We(M7);class F7 extends tx{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return me(()=>{const n=c_(e,this.axis),r=Be(oe(this.rate,va(n,this.minValue,this.maxValue)),oe(1-this.rate,n));return oe(e,ut(r,Be(zr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}F7.className="MinMaxNorm";We(F7);const NL={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Fr(t){return ZO(t)}function TL(t,e={}){return Yb(t,ui.getMap().classNameMap,e,"constraint")}function Br(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in NL?NL[t]:t,config:{}};return TL(n)}else return t instanceof tx?t:TL(t)}async function Ed(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const a=t[s];if(typeof a!="number"){const i=a;e.push(i.data()),n.push(s),r.push(i)}}if(e.length>0){const s=await Promise.all(e);for(let a=0;a<s.length;++a)t[n[a]]=s[a][0];Pt(r)}}function B7(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}var EL;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(EL||(EL={}));const ybe=125;class Gy{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class bbe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class xbe extends Gy{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const a=n[s];if(typeof a=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+a*r;else{let i;s in this.totals?i=this.totals[s]:this.totals[s]=0;const o=me(()=>Be(this.totals[s],oe(a,r)));this.totals[s]=o,i?.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:me(()=>{const s=oe(ut(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),Dr(n[r])}))}}class vbe extends Gy{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const a in this.history){const i=this.history[a];for(let o=0;o<i.length;++o)if(typeof i[o]!="number"){const l=i[o];e.push(l.data()),n.push(a),r.push(o)}}const s=await Promise.all(e);for(let a=0;a<s.length;++a)this.history[n[a]][r[a]].dispose(),this.history[n[a]][r[a]]=s[a][0]}}class wbe extends Gy{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||$O,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=ybe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");rw(this.yieldEvery)&&(this.maybeWait=_0e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await Ed(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Ed(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Ed(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Ed(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Ed(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):rw(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Ed(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Ed(e),await this.trainEnd(e))}}function U7(t,e){return t==null&&(t={}),t instanceof Gy?[t]:Array.isArray(t)&&t[0]instanceof Gy?t:mn(t).map(r=>new wbe(r,e))}class Ui{constructor(){}static registerCallbackConstructor(e,n){q(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Ui.checkForDuplicate(n),Ui.constructors[e]==null&&(Ui.constructors[e]=[]),Ui.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Ui.constructors)Ui.constructors[+n].forEach(s=>{if(s===e)throw new ce("Duplicate callback constructor.")})}static clear(){Ui.constructors={}}static createCallbacks(e){const n=[];for(const r in Ui.constructors){const s=+r;e>=s&&n.push(...Ui.constructors[s])}return n.map(r=>new r)}}Ui.constructors={};function W7(t,e,n,r,s,a,i,o,l){const c=new vbe,f=[new xbe,...Ui.createCallbacks(e)];t!=null&&f.push(...t),f.push(c);const p=new bbe(f);return p.setParams({epochs:n,initialEpoch:r,samples:s,steps:a,batchSize:i,verbose:e,doValidation:o,metrics:l}),{callbackList:p,history:c}}function sc(t,e={},n=!1){return Yb(t,ui.getMap().classNameMap,e,"layer",n)}function gw(t,e){return me(()=>{t.dtype!=="float32"&&(t=Ge(t,"float32"));const n=nt(Zb(t),e,!0),r=zf(n.shape,zr()),s=ns(Nl(n,r));return ut(t,s)})}function LC(t,e){return me(()=>Qn(Zb(tt(e,t)),-1))}function u_(t,e){return me(()=>Qn(Nr(tt(e,t)),-1))}function d_(t,e){return me(()=>{const n=tt(t,e),r=va(Nr(t),zr(),Number.MAX_VALUE),s=Nr(ut(n,r));return oe(100,Qn(s,-1))})}function Sbe(t,e){return me(()=>{const n=va(e,zr(),Number.MAX_VALUE),r=qa(Be(1,n)),s=va(t,zr(),Number.MAX_VALUE),a=qa(Be(1,s));return Qn(Zb(tt(r,a)),-1)})}function Cbe(t,e){return me(()=>{const n=Nl(0,tt(1,oe(t,e)));return Qn(Zb(n),-1)})}function kbe(t,e){return me(()=>{const n=Nl(0,tt(1,oe(t,e)));return Qn(n,-1)})}function Nbe(t,e){return me(()=>{const n=nt(oe(t,e),-1),r=yi(oe(tt(1,t),e),-1);return Nl(0,Be(1,tt(r,n)))})}function Tbe(t,e){return me(()=>{const n=Math.log(2),r=tt(e,t),s=tt(Be(r,Pf(oe(-2,r))),n);return Qn(s,-1)})}function Hy(t,e,n=!1){return me(()=>{if(n)e=Vb(e);else{const r=nt(e,e.shape.length-1,!0);e=ut(e,r)}return e=va(e,zr(),1-zr()),zn(nt(oe(Ge(t,"float32"),qa(e)),e.shape.length-1))})}function yw(t,e,n=!1){return me(()=>{const r=Ge(Am(G0e(t)),"int32");e=va(e,zr(),1-zr());const s=e.shape,a=le(ip(r,s[s.length-1]),s);return Hy(a,e,n)})}function Ebe(t,e){if(!Ft(t.shape,e.shape))throw new ce(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return me(()=>{const n=Ro(e),r=zn(Nr(e));return Be(tt(n,oe(e,t)),Db(wa(r)))})}function MC(t,e){return me(()=>{let n;return n=va(e,zr(),1-zr()),n=qa(ut(n,tt(1,n))),Qn(Ebe(t,n),-1)})}function Ibe(t,e){return me(()=>{const n=va(t,zr(),1),r=va(e,zr(),1);return nt(oe(t,qa(ut(n,r))),-1)})}function Abe(t,e){return me(()=>{const n=qa(Be(zr(),e));return Qn(tt(e,oe(t,n)),-1)})}function V7(t,e){return me(()=>{const n=gw(t,-1),r=gw(e,-1),s=oe(n,r);return zn(nt(s,-1))})}const bw={meanSquaredError:LC,meanAbsoluteError:u_,meanAbsolutePercentageError:d_,meanSquaredLogarithmicError:Sbe,squaredHinge:Cbe,hinge:kbe,categoricalHinge:Nbe,logcosh:Tbe,categoricalCrossentropy:Hy,sparseCategoricalCrossentropy:yw,binaryCrossentropy:MC,kullbackLeiblerDivergence:Ibe,poisson:Abe,cosineProximity:V7};function $E(t){if(typeof t=="string"){if(t in bw)return bw[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ce(e)}else return t}function q7(t,e){return me(()=>{const n=oe(.5,Ga(e)),r=ul(Ta(e,n),t.dtype);return Qn(Xi(t,r),-1)})}function G7(t,e){return me(()=>ul(Xi(hf(t,-1),hf(e,-1)),"float32"))}function jbe(t,e){return me(()=>Ge(nt(ko(Xi(t,1),Xi(e,1))),"float32"))}function $be(t,e){return me(()=>Ge(nt(ko(Xi(t,0),Xi(e,1))),"float32"))}function Rbe(t,e){return me(()=>{const n=jbe(t,e),r=$be(t,e),s=Be(n,r);return Ge(ms(Ta(s,0),ut(n,s),0),"float32")})}function Obe(t,e){return MC(t,e)}function _be(t,e){return t.rank===e.rank&&(t=Ku(t,[t.rank-1])),e=hf(e,-1),e.dtype!==t.dtype&&(e=Ge(e,t.dtype)),Ge(Xi(t,e),"float32")}const Dbe=LC,zbe=LC,Pbe=u_,Lbe=u_,Mbe=d_,Fbe=d_,H7=Hy,Bbe=V7,K7=yw,xw={binaryAccuracy:q7,categoricalAccuracy:G7,precision:Rbe,categoricalCrossentropy:H7,sparseCategoricalCrossentropy:K7,mse:Dbe,MSE:zbe,mae:Pbe,MAE:Lbe,mape:Mbe,MAPE:Fbe,cosine:Bbe};function Ube(t){if(typeof t=="string"&&t in xw)return xw[t];if(typeof t!="string"&&t!=null)return t;throw new ce(`Unknown metric ${t}`)}function Yv(t){if(Jo(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(bw))if(bw[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(xw))if(xw[n]===t){e=n;break}return e!==void 0?e:t.name}}function Wbe(t){const e={Adagrad:()=>Rd.adagrad(.01),Adadelta:()=>Rd.adadelta(1,.95,zr()),Adam:()=>Rd.adam(.001,.9,.999,zr()),Adamax:()=>Rd.adamax(.002,.9,.999,zr(),0),RMSProp:()=>Rd.rmsprop(.001,.9,0,zr()),SGD:()=>Rd.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ce(`Unknown Optimizer ${t}`)}const IL=1*1024*1024;function AL(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!oj(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>IL&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${IL}.`)}}function oj(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!oj(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!oj(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}function Vbe(t,e,n,r=console.log){const s=Gbe(t),a=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(f=>Math.floor(e*f)));let i;if(!s){a.push("Receives inputs"),i=[];for(const f in t.nodesByDepth)i.push(...t.nodesByDepth[f])}r("_".repeat(e)),vw(a,n,r),r("=".repeat(e));const o=t.layers;for(let f=0;f<o.length;++f)s?Hbe(o[f],n,r):Kbe(o[f],n,i,r),r((f===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=qbe(t),c=hw(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function qbe(t){let e;return t.collectedTrainableWeights!=null?e=hw(t.collectedTrainableWeights):e=hw(t.trainableWeights),e}function Gbe(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let a=!1;for(const i of s.inboundNodes)if(r.indexOf(i)!==-1)if(a){e=!1;break}else a=!0;if(!e)break}return e}function vw(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function Hbe(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const a=t.name,i=t.getClassName(),o=[`${a} (${i})`,s,r,t.countParams().toString()];vw(o,e,n)}function Kbe(t,e,n,r){let s,a;try{a=t.inboundNodes.map(p=>JSON.stringify(p.inputShapes)).join(",")}catch{a="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const i=[];for(const p of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(p)===-1))for(let m=0;m<p.inboundLayers.length;++m){const y=p.inboundLayers[m].name,b=p.nodeIndices[m],v=p.tensorIndices[m];i.push(`${y}[${b}][${v}]`)}const o=t.name,l=t.getClassName(),c=i.length===0?"":i[0],f=[`${o} (${l})`,a,s,t.countParams().toString(),c];vw(f,e,r);for(let p=1;p<i.length;++p)vw(["","","","",i[p]],e,r)}function X7(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function lj(t,e){if(t===null)return null;if(typeof t=="string")return Md(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const a=t[s];X7(e,s,a)?n.push(a):n.push(lj(a,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const a=Md(r);n[a]=lj(s,a)}}return n}}function cj(t,e){if(t==null)return null;if(typeof t=="string")return Kl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const a=t[s];X7(e,s,a)?n.push(a):n.push(cj(a,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],a=Kl(r);(r==="name"||r==="className")&&typeof s=="string"?n[a]=s:n[a]=cj(s,r)}return n}}const Y7="4.22.0";const Xbe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class uo extends Mt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const C=this.getClassName().toLowerCase();this.name=DC(C)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Su(this.inputs).length!==this.inputs.length)throw new ce(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(C=>C.name)}`);Su(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(C=>C.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const C of this.outputs){const E=C.sourceLayer,k=C.nodeIndex,I=C.tensorIndex;this.outputLayers.push(E),this.outputLayersNodeIndices.push(k),this.outputLayersTensorIndices.push(I)}for(const C of this.inputs){const E=C.sourceLayer,k=C.nodeIndex,I=C.tensorIndex;Jo(k===0,"input layer has >1 nodes"),Jo(I===0,"input layer has >1 tensors"),this.inputLayers.push(E),this.inputLayersNodeIndices.push(k),this.inputLayersTensorIndices.push(I)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let C=0;C<this.inputLayers.length;C++){const E=this.inputLayers[C];if(!(E instanceof ex))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${C} (0-based) originates from layer type ${E.getClassName()}.`);this.inputNames.push(E.name),this.feedInputShapes.push(E.batchInputShape),this.feedInputNames.push(E.name)}for(const C of this.outputLayers)this.outputNames.push(C.name);this.internalInputShapes=this.inputs.map(C=>C.shape),this.internalOutputShapes=this.outputs.map(C=>C.shape);const n={},r={},s={},a={},i={},o=[],l=(C,E,k,I,$,_)=>{(I==null||$==null||_==null)&&(I=C.sourceLayer,$=C.nodeIndex,_=C.tensorIndex);const z=I.inboundNodes[$];if(k.indexOf(z)!==-1)throw new Vi(`The tensor ${C.name} at layer "${I.name}" is part of a cycle.`);if(E.indexOf(z)!==-1)return;this.containerNodes.add(uo.nodeKey(I,$)),I.id in i||(i[I.id]=Object.keys(i).length),k.indexOf(z)===-1&&k.push(z);const L=z.inboundLayers.length;for(let R=0;R<L;R++){const D=z.inputTensors[R],U=z.inboundLayers[R],X=z.nodeIndices[R],V=z.tensorIndices[R];l(D,E,k,U,X,V)}for(E.push(z);k.indexOf(z)>=0;)k.splice(k.indexOf(z),1);o.push(z)},c=[],f=[];for(const C of this.outputs)l(C,c,f);const p=o.slice().reverse();for(const C of p){r[C.id]=C,C.id in n||(n[C.id]=0);let E=n[C.id];const k=s[C.outboundLayer.id]==null?0:s[C.outboundLayer.id];E=Math.max(E,k),s[C.outboundLayer.id]=E,a[C.outboundLayer.id]=C.outboundLayer,n[C.id]=E;for(let I=0;I<C.inboundLayers.length;I++){const $=C.inboundLayers[I],_=C.nodeIndices[I],z=$.inboundNodes[_],L=n[z.id]==null?0:n[z.id];n[z.id]=Math.max(E+1,L),r[z.id]=z}}const m={};for(const C in n){const E=n[C];E in m||(m[E]=[]),m[E].push(r[C])}const y={};for(const C in s){const E=s[C];E in y||(y[E]=[]),y[E].push(a[C])}let b=Object.keys(y).map(C=>parseInt(C,10)).sort(Hv);this.layers=[];for(const C of b){const E=y[C];E.sort((k,I)=>{const $=i[k.id],_=i[I.id];return $<_?-1:$>_?1:0});for(const k of E)k instanceof uo&&this.internalContainerRefs.push(k),this.layers.push(k)}this.layersByDepth=y,b=Object.keys(m).map(C=>parseInt(C,10)).sort(Hv);const v=this.inputs.slice(),x=[];for(const C of b)for(const E of m[C]){const k=E.outboundLayer;if(k!=null){for(const I of E.inputTensors)if(v.indexOf(I)===-1)throw new Vi(`Graph disconnected: cannot obtain value for tensor ${I} at layer "${k.name}". The following previous layers were accessed without issue: ${x}`);for(const I of E.outputTensors)v.push(I);x.push(k.name)}}this.nodesByDepth=m;const S=this.layers.map(C=>C.name);for(const C of S){const E=S.filter(k=>k===C).length;if(E!==1)throw new Vi(`The name "${C}" is used ${E} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(S))}this.outboundNodes=[],this.inboundNodes=[],new PC({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(C=>null),outputMasks:this.outputs.map(C=>null),inputShapes:this.inputs.map(C=>C.shape),outputShapes:this.outputs.map(C=>C.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ce("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const a=Xbe(e);a&&this.parseWeights(e);for(const o of this.layers)for(const[l,c]of o.weights.entries()){const f=a?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[f]!=null)throw new ce(`Duplicate weight name: ${f}`);r[f]=c,s++}const i=[];for(const o in e){let l=o;if(r[o]==null){const c=o.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)i.push([r[l],e[o]]);else if(n)throw new ce(`Provided weight data has no target variable: ${o}`);delete r[l]}if(n){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new ce(`${o.length} of ${s} weights are not set: ${o}`)}l_(i)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],a=r.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!s.includes(i)).join("/");a!==n&&(e[a]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${Y7}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=cj(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return me(()=>{e=mn(e);const r=new gu;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return by(this.outputs,r,n)})}computeMask(e,n){return me(()=>{e=mn(e);let r;return n==null?r=xf(null,e.length):r=mn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=fw(e);if(n.length!==this.inputLayers.length)throw new ce(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const l=this.inputLayers[o],c=n[o],f=l.name+"_0_0";r[f]=c}const s=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Hv);if(s.length>1)for(const o of s){const l=this.nodesByDepth[o];for(const c of l){const f=c.outboundLayer;if(this.inputLayers.map(v=>v.id).indexOf(f.id)!==-1)continue;const p=[];for(let v=0;v<c.inboundLayers.length;v++){const x=c.inboundLayers[v],S=c.nodeIndices[v],C=c.tensorIndices[v],E=`${x.name}_${S}_${C}`,k=r[E];p.push(k)}const m=f.computeOutputShape(ha(p)),y=fw(m),b=f.inboundNodes.indexOf(c);for(let v=0;v<y.length;v++){const x=`${f.name}_${b}_${v}`;r[x]=y[v]}}}const a=[],i=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],c=this.outputLayersNodeIndices[o],f=this.outputLayersTensorIndices[o],p=`${l.name}_${c}_${f}`;i.push(p)}for(let o=0;o<i.length;o++){const l=i[o];Jo(l in r),a.push(r[l])}return ha(a)}runInternalGraph(e,n){n==null&&(n=xf(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],f=e[l],p=n[l];r[c.id]=[f,p]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Hv);for(const l of s){const c=this.nodesByDepth[l];for(const f of c){const p=f.outboundLayer,m=f.inputTensors,y=f.outputTensors,b=new Array;for(const v of m)v.id in r&&b.push(r[v.id]);if(b.length===m.length){let v={},x,S,C,E;if(f.callArgs!=null&&(v=f.callArgs),b.length===1){const[k,I]=b[0];v.mask==null&&(v.mask=I),C=mn(p.call(k,v)),E=mn(p.computeMask(k,I)),x=[k],S=[I]}else x=b.map(k=>k[0]),S=b.map(k=>k[1]),v.mask==null&&(v.mask=S),C=mn(p.call(x,v)),E=mn(p.computeMask(x,S));if(p.activityRegularizer)throw new _t("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let k=0;k<y.length;++k){const I=y[k],$=C[k],_=E[k];r[I.id]=[$,_]}}}}const a=[],i=[],o=[];for(const l of this.outputs){Jo(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,f]=r[l.id];o.push(c.shape),a.push(c),i.push(f)}return[a,i,o]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof uo?1:0;for(let a=0;a<s.inboundNodes.length;a++){const i=uo.nodeKey(s,a);this.containerNodes.has(i)&&(n[i]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new ce("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new ce(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ce(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return me(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=uo.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const i of this.layers){const o=i.getClassName(),l=i.getConfig(),c=[];for(let p=0;p<i.inboundNodes.length;p++){const m=i.inboundNodes[p],y=uo.nodeKey(i,p);let b={};if(this.containerNodes.has(y)){if(m.callArgs)try{JSON.stringify(m.callArgs),b=m.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${m.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),b={}}if(m.inboundLayers.length>0){const v=[];for(let x=0;x<m.inboundLayers.length;x++){const S=m.inboundLayers[x],C=m.nodeIndices[x],E=m.tensorIndices[x],k=uo.nodeKey(S,C);let I=n[k];I==null&&(I=0),v.push([S.name,I,E,b])}c.push(v)}}}const f={};f.name=i.name,f.className=o,f.config=l,f.inboundNodes=c,r.push(f)}e.layers=r;const s=[];for(let i=0;i<this.inputLayers.length;i++){const o=this.inputLayers[i],l=this.inputLayersNodeIndices[i],c=uo.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);const p=this.inputLayersTensorIndices[i];s.push([o.name,f,p])}e.inputLayers=s;const a=[];for(let i=0;i<this.outputLayers.length;i++){const o=this.outputLayers[i],l=this.outputLayersNodeIndices[i],c=uo.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);const p=this.outputLayersTensorIndices[i];a.push([o.name,f,p])}return e.outputLayers=a,e}static fromConfig(e,n,r={},s=!1){const a={},i={};function o(x,S){x.name in i?i[x.name].push(S):i[x.name]=[S]}function l(x,S){const C=[];let E;for(const k of S){const I=k[0],$=k[1],_=k[2];if(E=k[3]==null?{}:k[3],!(I in a)){o(x,S);return}const z=a[I];if(z.inboundNodes.length<=$){o(x,S);return}const L=z.inboundNodes[$];C.push(L.outputTensors[_])}C.length>0&&x.apply(ha(C),E)}function c(x){const S=x.name,C=sc(x,n.customObjects!=null?n.customObjects:{});C.setFastWeightInitDuringBuild(s),a[S]=C,x.inboundNodes.forEach(k=>{if(!(k instanceof Array))throw new ce(`Corrupted configuration, expected array for nodeData: ${k}`);o(C,k)})}const f=n.name,p=n.layers;for(const x of p)c(x);for(;!O0e(i);)for(const x of p){const S=a[x.name];if(S.name in i){const C=i[S.name];delete i[S.name];for(const E of C)l(S,E)}}const m=[],y=[],b=n.inputLayers;for(const x of b){const S=x[0],C=x[1],E=x[2];Jo(S in a);const I=a[S].inboundNodes[C].outputTensors;m.push(I[E])}const v=n.outputLayers;for(const x of v){const S=x[0],C=x[1],E=x[2];Jo(S in a);const I=a[S].inboundNodes[C].outputTensors;y.push(I[E])}return new e({inputs:m,outputs:y,name:f})}get stateful(){if(this._stateful)throw new ce("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){me(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}function Ybe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(a=>{a in t?s.push(t[a]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function Q7(t,e){return Ybe(t,e,"classWeight")}async function Z7(t,e,n,r){if(n!=null){const s=me(()=>{if(t.shape.length===1)return ll(t);if(t.shape.length===2){if(t.shape[1]>1)return hf(t,1);if(t.shape[1]===1)return le(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await s.data());Pt(s);const i=[];return a.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);i.push(n[o])}),Ls(i,"float32")}else return null}function Qbe(t,e){return oe(t,e)}const Zbe=32;function J7(t,e){let n,r;const s=e;n=s.xs,r=s.ys,q(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const a=jL("input",t.inputNames,n),i=jL("output",t.outputNames,r),o=a[0].shape[0];q(a.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),q(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<a.length;l++)q(a[l].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let l=0;l<i.length;l++)q(i[l].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${i[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:a,ys:i}}function jL(t,e,n){if(n instanceof pn)return[n];if(Array.isArray(n))return q(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new ce(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function Jbe(t){if(t.length===3)throw new _t("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function exe(t,e,n){const r=n.batchesPerEpoch!=null;if(q(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),q(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),q(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),q(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),q(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let a,i;if(s)if($L(n.validationData))q(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const x=Jbe(n.validationData);a=x.xs,i=x.ys}const o=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(x=>"val_"+x)):c=l.slice();const f=U7(n.callbacks,n.yieldEvery),p=n.verbose==null?1:n.verbose,{callbackList:m,history:y}=W7(f,p,n.epochs,null,null,txe(e,n),null,s,c);m.setModel(t),t.history=y,await m.onTrainBegin(),t.stopTraining_=!1;let b=n.initialEpoch==null?0:n.initialEpoch,v=await e.iterator();for(;b<n.epochs;){const x={};await m.onEpochBegin(b);let S=0,C=0;for(r||(v=await e.iterator());!r||S<n.batchesPerEpoch;){const E=await v.next();if(r&&E.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${S} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(E.value!=null){const{xs:k,ys:I}=J7(t,E.value),$={};$.batch=C,$.size=k[0].shape[0],await m.onBatchBegin(C,$);const _=[];if(n.classWeight!=null){const R=Q7(n.classWeight,t.outputNames);for(let D=0;D<R.length;++D)_.push(await Z7(I[D],null,R[D]))}const z=k.concat(I).concat(_),L=o(z);Pt(z);for(let R=0;R<l.length;++R){const D=l[R],U=L[R];$[D]=U,Dr(U)}await m.onBatchEnd(C,$),B7($),C++,S++}if(r?S>=n.batchesPerEpoch:E.done){if(s){let k;$L(n.validationData)?k=mn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):k=mn(t.evaluate(a,i,{batchSize:n.validationBatchSize==null?Zbe:n.validationBatchSize,verbose:0}));for(let I=0;I<t.metricsNames.length;++I)x[`val_${t.metricsNames[I]}`]=k[I]}break}if(t.stopTraining_)break}if(await m.onEpochEnd(b,x),b++,t.stopTraining_)break}return await m.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function txe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function $L(t){return typeof t.iterator=="function"}function nxe(t){return typeof t.next=="function"}async function rxe(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let a=[];if(n.verbose>0)throw new _t("Verbose mode is not implemented yet.");q(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=nxe(e)?e:await e.iterator();let o=0,l=0;for(;!r||l<n.batches;){const c=await i.next();if(a=me(()=>{if(c.value){const{xs:f,ys:p}=J7(t,c.value),m=f.concat(p),y=me(()=>s(m));if(Pt(m),l===0)for(let v=0;v<y.length;++v)a.push(gt(0));const b=m[0].shape[0];for(let v=0;v<y.length;++v){const x=y[v],S=a[v];a[v]=me(()=>Be(a[v],oe(b,x))),l>0&&Pt(S)}Pt(y),o+=b,++l}return a}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<a.length;++c){const f=a[c];a[c]=ut(a[c],o),Pt(f)}return ha(a)}function RE(t){q(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function ty(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>ef(r,e,n-e)):ef(t,e,n-e)}function uj(t,e){return me(()=>t==null?null:Array.isArray(t)?t.map(n=>uj(n,e)):E7(t,e.dtype==="int32"?e:Ge(e,"int32")))}function OE(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function eq(t){const e=[];t instanceof pn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(Qb(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function co(t,e){if(t==null)return;const n=[];if(e instanceof pn)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const a=e[s];n.push(a.id)}const r=[];if(t instanceof pn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const a=t[s];n.indexOf(a.id)===-1&&r.push(a)}r.forEach(s=>{s.isDisposed||s.dispose()})}function sxe(t){return t instanceof pn}function dj(t){return Array.isArray(t)}function RL(t){return!sxe(t)&&!dj(t)}function OL(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(dj(t)&&t.length>0)i=!0;else if(RL(t)){for(const o in t)if(t.hasOwnProperty(o)){i=!0;break}}else i=!0;if(i)throw new ce(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let a;if(RL(t)){t=t,a=[];for(const i of e){if(t[i]==null)throw new ce(`No data provided for "${i}". Need data for each key in: ${e}`);a.push(t[i])}}else if(dj(t)){if(t=t,t.length!==e.length)throw new ce(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);a=t}else{if(t=t,e.length>1)throw new ce(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);a=[t]}if(a=eq(a),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const o=a[i];if(o.shape.length!==n[i].length)throw new ce(`Error when checking ${s}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const c=o.shape[l],f=n[i][l];if(f!=null&&f>=0&&c!==f)throw new ce(`${s} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${s} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return a}function axe(t,e,n){const r=Su(t.map(a=>a.shape[0]));r.sort();const s=Su(e.map(a=>a.shape[0]));if(s.sort(),r.length>1)throw new ce(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(a=>a.shape))}`);if(s.length>1)throw new ce(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(a=>a.shape))}`);if(r.length>0&&s.length>0&&!Ft(r,s))throw new ce(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function ixe(t,e,n){const r=[LC,MC,Hy];for(let s=0;s<t.length;++s){const a=t[s],i=e[s],o=n[s];if(i!=null){if(i===Hy&&a.shape[a.shape.length-1]===1)throw new ce(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){const l=a.shape.slice(1),c=o.slice(1);for(let f=0;f<l.length;++f){const p=l[f],m=c[f];if(m!=null&&p!==m)throw new ce(`A target Tensor with shape ${a.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function _L(t,e,n,r=!0,s=""){let a;if(Array.isArray(t)){if(t.length!==e.length)throw new ce(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);a=t}else{if(e.length>1)throw new ce(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);a=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const o=a[i];if(o.shape.length!==n[i].length)throw new ce(`Error when checking ${s}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const c=o.shape[l],f=n[i][l];if(f!=null&&f!==c)throw new ce(`Error when checking ${s}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function oxe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let a=n.hasOwnProperty(s)?n[s]:[];Array.isArray(a)||(a=[a]),r.push(a)}return r}}const lxe="layers-model";class Yh extends uo{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new ce("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Vbe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Wbe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Tc))throw new ce("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new ce(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push($E(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ce(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(o=>$E(o))}else{const i=$E(e.loss);this.outputs.forEach(o=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const o=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[i])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Jd("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const o=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([o,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const s=oxe(e.metrics,this.outputNames),a=(i,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[i]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,i])};Jd("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const o=s[i];(c=>{let p,m,y;for(const b of c){if(typeof b=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(b)!==-1){const x=this.internalOutputShapes[i];x[x.length-1]===1||this.lossFunctions[i]===MC?["accuracy","acc"].indexOf(b)!==-1?m=q7:["crossentropy","ce"].indexOf(b)!==-1&&(m=Obe):this.lossFunctions[i]===yw?["accuracy","acc"].indexOf(b)!==-1?m=_be:["crossentropy","ce"].indexOf(b)!==-1&&(m=K7):["accuracy","acc"].indexOf(b)!==-1?m=G7:["crossentropy","ce"].indexOf(b)!==-1&&(m=H7);let S;["accuracy","acc"].indexOf(b)!==-1?S="acc":["crossentropy","ce"].indexOf(b)!==-1&&(S="ce"),y=m,p=""+S}else y=Ube(b),p=""+Yv(b);let v;Jd(p,()=>{v=y}),a(i,p,v)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;RE(s);const i=this.standardizeUserDataXY(e,n,!0,s);try{const o=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,o,s,r.verbose,r.steps);return ha(c)}finally{co(i[0],e),co(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),rxe(this,e,n)}checkNumSamples(e,n,r,s="steps"){let a;if(r!=null){if(a=null,n!=null)throw new ce(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?a=e[0].shape[0]:a=e.shape[0];else throw new ce(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return a}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new ce("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],a=this.retrieveSymbolicTensors(s),i=new gu;if(e instanceof pn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ce(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new ce(`No value is provided for the model's input ${l.name}`);i.add(l,c)}const o=by(a,i);return r?o:o[0]}retrieveSymbolicTensors(e){const n=xf(null,e.length);let r=e.length;for(const s of this.layers){const a=Array.isArray(s.output)?s.output:[s.output],i=a.map(o=>o.name);for(let o=0;o<e.length;++o){const l=i.indexOf(e[o]);if(l!==-1&&(n[o]=a[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((a,i)=>{a==null&&s.push(e[i])}),new ce(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return me(()=>{const s=this.checkNumSamples(e);if(r)throw new _t("Verbose predictLoop() is not implemented yet.");const a=OE(s,n),i=this.outputs.map(o=>[]);for(let o=0;o<a.length;++o)me(()=>{const c=a[o][0],f=a[o][1],p=ty(e,c,f),m=[];if(Array.isArray(p))for(let b=0;b<p.length;++b)m.push({key:this.inputs[b],value:p[b]});else m.push({key:this.inputs[0],value:p});const y=new gu(m);return by(this.outputs,y)}).forEach((c,f)=>i[f].push(c));return ha(i.map(o=>mr(o,0)))})}predict(e,n={}){const r=eq(e);_L(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return RE(s),this.predictLoop(r,s)}finally{co(r,e)}}predictOnBatch(e){_L(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new Vi("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let i=0;i<this.feedOutputShapes.length;++i){const o=this.feedOutputShapes[i];this.feedLossFns[i]===yw?a.push(o.slice(0,o.length-1).concat([1])):a.push(o)}if(e=OL(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=OL(n,this.feedOutputNames,a,!1,"target"),axe(e,n),ixe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new ce(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,a=!0,i){const[o,l]=this.standardizeUserDataXY(e,n,a,i);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const f=Q7(s,this.outputNames);c=[];for(let p=0;p<f.length;++p)c.push(await Z7(l[p],null,f[p]))}return[o,l,c]}testLoop(e,n,r,s=0,a){return me(()=>{const i=this.checkNumSamples(n,r,a,"steps"),o=[];if(s>0)throw new _t("Verbose mode is not implemented yet.");if(a!=null)throw new _t("steps mode in testLoop() is not implemented yet");{const l=OE(i,r),c=Ls(No(0,i));for(let f=0;f<l.length;++f){const p=l[f][0],m=l[f][1],y=ef(c,p,m-p),b=uj(n,y),v=e(b);if(f===0)for(let x=0;x<v.length;++x)o.push(gt(0));for(let x=0;x<v.length;++x){const S=v[x];o[x]=Be(o[x],oe(m-p,S))}}for(let f=0;f<o.length;++f)o[f]=ut(o[f],i)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let a=s;if(bL(e,s)>1){const i=bL(e.slice(0,r),s);a+=`_${i}`}n.push(a)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],o=()=>{const p=[];for(let v=0;v<this.inputs.length;++v)p.push({key:this.inputs[v],value:r[v]});const m=new gu(p),y=by(this.outputs,m,{training:!0});let b;for(let v=0;v<this.lossFunctions.length;++v){const x=this.lossFunctions[v];let S=x(s[v],y[v]);a[v]!=null&&(S=Qbe(S,a[v]));const C=Qn(S);n.push(C),v===0?b=S:b=Be(b,S)}for(let v=0;v<this.metricsTensors.length;++v){let x;if(this.outputs.length>1&&v<this.outputs.length)x=n[v];else{const S=this.metricsTensors[v][0],C=this.metricsTensors[v][1];x=Qn(S(s[C],y[C]))}Dr(x),i.push(x)}return b=Qn(b),this.calculateLosses().forEach(v=>{b=Be(b,v)}),b},l=this.collectedTrainableWeights.map(p=>p.read());return[this.optimizer_.minimize(o,!0,l)].concat(i)}}makeTestFunction(){this.testFunction=e=>me(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let c=0;c<this.inputs.length;++c)i.push({key:this.inputs[c],value:s[c]});const o=new gu(i),l=by(this.outputs,o);for(let c=0;c<this.lossFunctions.length;++c){const f=this.lossFunctions[c],p=Qn(f(a[c],l[c]));c===0?r=p:r=Be(r,p),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const f=this.metricsTensors[c][0],p=this.metricsTensors[c][1],m=Qn(f(a[p],l[p]));n.push(m)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,a,i,o,l,c,f,p,m;try{const y=r.batchSize==null?32:r.batchSize;RE(y);const v=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,y);s=v[0],a=v[1],m=v[2];let x=!1,S;if(r.validationData!=null&&r.validationData.length>0){if(x=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new _t("validationData including sample weights is not supported yet."):new ce(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const R=await this.standardizeUserData(l,c,null,null,!0,y);f=R[0],p=R[1],S=f.concat(p)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){x=!0;const L=Math.floor(s[0].shape[0]*(1-r.validationSplit)),R=s[0].shape[0];f=ty(s,L,R),i=s,s=ty(s,0,L),p=ty(a,L,R),o=a,a=ty(a,0,L),S=f.concat(p)}else r.validationSteps!=null&&(x=!0);const C=s.concat(a).concat(m);this.checkTrainableWeightsConsistency();const E=this.makeTrainFunction(),k=this.getDedupedMetricsNames();let I,$;x?(this.makeTestFunction(),I=this.testFunction,$=k.slice().concat(k.map(L=>"val_"+L))):(I=null,S=[],$=k.slice());const _=U7(r.callbacks,r.yieldEvery);return await this.fitLoop(E,C,k,y,r.epochs,r.verbose,_,I,S,r.shuffle,$,r.initialEpoch,null,null)}finally{this.isTraining=!1,co(s,e),co(a,n),co(i,e),co(o,n),co(f,l),co(p,c),m!=null&&Pt(m)}}async fitLoop(e,n,r,s,a,i,o,l,c,f,p,m,y,b){s==null&&(s=32),a==null&&(a=1),f==null&&(f=!0),m==null&&(m=0);let v=!1;if(l!=null&&c!=null&&(v=!0),b!=null&&(v=!0,y==null))throw new ce("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const x=this.checkNumSamples(n,s,y,"steps_per_epoch");let S;x!=null&&(S=No(0,x)),i==null&&(i=1);const{callbackList:C,history:E}=W7(o,i,a,m,x,y,s,v,p);C.setModel(this),this.history=E,await C.onTrainBegin(),this.stopTraining_=!1;for(let k=m;k<a;++k){await C.onEpochBegin(k);const I={};if(y!=null)throw new _t("stepsPerEpoch mode is not implemented yet.");{if(f==="batch")throw new _t("batch shuffling is not implemneted yet");f&&Y$(S);const $=Ls(S),_=OE(x,s);for(let z=0;z<_.length;++z){const L={};if(await C.onBatchBegin(z,L),me(()=>{const R=_[z][0],D=_[z][1],U=ef($,R,D-R);L.batch=z,L.size=D-R;const X=uj(n,U),V=e(X);for(let Y=0;Y<r.length;++Y){const B=r[Y],Z=V[Y];L[B]=Z,Dr(Z)}if(z===_.length-1&&v){const Y=this.testLoop(l,c,s);for(let B=0;B<r.length;++B){const Z=r[B],J=Y[B];Dr(J),I["val_"+Z]=J}}}),await C.onBatchEnd(z,L),B7(L),this.stopTraining_)break}$.dispose()}if(await C.onEpochEnd(k,I),this.stopTraining_)break}return await C.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return exe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],a=r[1],o=this.makeTrainFunction()(s.concat(a)),l=[];for(const c of o){const f=await c.data();l.push(f[0])}return Pt(o),co(r[0],e),co(r[1],n),ha(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,a=this.getWeights(r);for(let i=0;i<s.length;++i)r&&!s[i].trainable||n.push({name:s[i].originalName,tensor:a[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=WA().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-WA().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Kl(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Kl(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=Kl(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Kl(Yv(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Kl(Yv(e)));{const e={};for(const n in this.metrics)e[n]=Kl(Yv(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=lj(e.optimizer_config),r=sc(n);let s;if(typeof e.loss=="string")s=Md(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(i=>Md(i));else if(e.loss!=null){s={};for(const i in e.loss)s[i]=Md(e.loss[i])}let a;if(Array.isArray(e.metrics))a=e.metrics.map(i=>Md(i));else if(e.metrics!=null){a={};for(const i in e.metrics)a[i]=Md(e.metrics[i])}this.compile({loss:s,metrics:a,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=yV(e);if(c.length===0)throw new ce(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new ce(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new ce("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await VA(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:lxe,generatedBy:`TensorFlow.js tfjs-layers v${Y7}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:f,specs:p}=await VA(await this.optimizer.getWeights(),c);r.specs.push(...p),r.data=mV([r.data,f])}return this.userDefinedMetadata!=null&&(AL(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){AL(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Yh.className="Model";We(Yh);class tq extends Yh{}tq.className="Functional";We(tq);class Ky extends Yh{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:DC("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ce(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Ky||e instanceof Yh;let r;if(n){if(r=e,r.outputs.length!==1)throw new ce("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ce("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ce("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=ube({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ce(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ce("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=z7(this.outputs[0])}this.inboundNodes=[],new PC({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:xf(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(tn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Yh({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Vi("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Vi("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Vi("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Vi("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let a,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ce("Legacy serialization format not supported yet.");a=n}else q(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=n.layers,delete n.layers,i=n;const o=new e(i);if(!(o instanceof Ky))throw new _t(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of a){const f=sc(l,void 0,s);s&&f.setFastWeightInitDuringBuild(!0),o.add(f)}return o}set stopTraining(e){if(this.model==null)throw new ce("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ce("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Ky.className="Sequential";We(Ky);let Us=class extends Mf{getConfig(){return{}}};class nq extends Us{apply(e,n=1){return K0e(e,n)}}nq.className="elu";We(nq);class rq extends Us{apply(e){return uC(e)}}rq.className="selu";We(rq);class sq extends Us{apply(e){return Ro(e)}}sq.className="relu";We(sq);class aq extends Us{apply(e){return me(()=>Du(6,Ro(e)))}}aq.className="relu6";We(aq);let iq=class extends Us{apply(e){return e}};iq.className="linear";We(iq);class oq extends Us{apply(e){return vo(e)}}oq.className="sigmoid";We(oq);class lq extends Us{apply(e){return Y0e(e)}}lq.className="hardSigmoid";We(lq);class cq extends Us{apply(e){return Pf(e)}}cq.className="softplus";We(cq);class uq extends Us{apply(e){return X0e(e)}}uq.className="softsign";We(uq);class dq extends Us{apply(e){return _u(e)}}dq.className="tanh";We(dq);let f_=class extends Us{apply(e,n=-1){return Vb(e,n)}};f_.className="softmax";We(f_);class fq extends Us{apply(e,n=-1){return nC(e,n)}}fq.className="logSoftmax";We(fq);class hq extends Us{apply(e){return me(()=>me(()=>{const n=Math.sqrt(2),r=oe(.5,Be(1,J2(ut(e,n))));return oe(e,r)}))}}hq.className="gelu";We(hq);class pq extends Us{apply(e){return me(()=>oe(.5,oe(e,Be(1,_u(oe(ns(ut(2,Math.PI)),Be(e,oe(.044715,ml(e,3)))))))))}}pq.className="gelu_new";We(pq);class mq extends Us{apply(e){return me(()=>oe(e,_u(Pf(e))))}}mq.className="mish";We(mq);class gq extends Us{apply(e,n=1){return me(()=>oe(vo(oe(e,n)),e))}}gq.className="swish";We(gq);function Pu(t){return t.getClassName()}function _E(t,e={}){return Yb(t,ui.getMap().classNameMap,e,"activation")}function Lu(t){if(t==null){const e={};return e.className="linear",e.config={},_E(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},_E(e)}else return t instanceof Us?t:_E(t)}function cxe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class yq extends Mf{}class bq extends yq{constructor(e){super(),cxe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return me(()=>{let n=Tr([1]);return this.hasL1&&(n=Be(n,nt(oe(this.l1,Nr(e))))),this.hasL2&&(n=Be(n,nt(oe(this.l2,Zb(e))))),le(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}bq.className="L1L2";We(bq);const DL={l1l2:"L1L2"};function In(t){return ZO(t)}function zL(t,e={}){return Yb(t,ui.getMap().classNameMap,e,"regularizer")}function qn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in DL?DL[t]:t,config:{}};return zL(n)}else return t instanceof yq?t:zL(t)}class xq extends Mt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=St(e);let r=Ro(e);return this.maxValue!=null&&(r=va(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}xq.className="ReLU";We(xq);class vq extends Mt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=St(e);return _b(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}vq.className="LeakyReLU";We(vq);class wq extends Mt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Wn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=qn(e.alphaRegularizer),this.alphaConstraint=Br(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ce(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=tn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new Pr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=St(e),Bb(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Zn(this.alphaInitializer),alphaRegularizer:In(this.alphaRegularizer),alphaConstraint:Fr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}wq.className="PReLU";We(wq);let Sq=class extends Mt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new _t(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=St(e);return Em(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};Sq.className="ELU";We(Sq);class Cq extends Mt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=St(e);return oe(r,Ge(Ta(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}Cq.className="ThresholdedReLU";We(Cq);class kq extends Mt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new f_().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return me(()=>{let r=St(e);const s=n.mask;if(s!=null){const a=oe(tt(ma(r.shape),Ge(s,r.dtype)),gt(-1e9));r=Be(r,a)}return this.axis instanceof Array?this.axis.length>1?wa(tt(r,zb(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}kq.className="Softmax";We(kq);function Qh(t,e,n){if(typeof t=="number")return xf(t,e);if(t.length!==e)throw new ce(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!V0e(s))throw new ce(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function wo(t,e,n,r,s=1){if(t==null)return t;const a=e+(e-1)*(s-1);let i;return n==="same"?i=t:i=t-a+1,Math.floor((i+r-1)/r)}function el(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+zu([n-e,0]);else if(r==="same")t=t*e;else throw new ce(`Unsupport padding mode: ${r}.`);return t}function h_(t,e){return me(()=>(br(e),e==="channelsFirst"?Ut(t,[0,2,3,1]):t))}function Nq(t,e){return me(()=>(br(e),e==="channelsFirst"?Ut(t,[0,2,3,4,1]):t))}function uxe(t,e,n,r=1,s="valid",a,i=1){return me(()=>{if(a==null&&(a=To()),br(a),t.shape.length!==3)throw new ce(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ce(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ce(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(a==="channelsFirst"&&(t=Ut(t,[0,2,1])),s==="causal")throw new _t("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=X2(t,e,r,s==="same"?"same":"valid","NWC",i);return n!=null&&(o=Oo(o,n)),o})}function PL(t,e,n,r=[1,1],s="valid",a,i,o=null){return me(()=>{if(a==null&&(a=To()),br(a),t.rank!==3&&t.rank!==4)throw new ce(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ce(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=h_(t,a);if(s==="causal")throw new _t("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=y9({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:o}),a==="channelsFirst"&&(l=Ut(l,[0,3,1,2])),l})}function dxe(t,e,n,r=[1,1,1],s="valid",a,i){return me(()=>{if(a==null&&(a=To()),br(a),t.rank!==4&&t.rank!==5)throw new ce(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ce(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let o=Nq(t,a);if(s==="causal")throw new _t("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=OR(o,e,r,s==="same"?"same":"valid","NDHWC",i),n!=null&&(o=Oo(o,n)),a==="channelsFirst"&&(o=Ut(o,[0,4,1,2,3])),o})}class FC extends Mt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",FC.verifyArgs(n),this.rank=e,Jr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new _t(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Qh(n.kernelSize,e,"kernelSize"),this.strides=Qh(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Ei(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,br(this.dataFormat),this.activation=Lu(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Wn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Br(n.biasConstraint),this.biasRegularizer=qn(n.biasRegularizer),this.activityRegularizer=qn(n.activityRegularizer),this.dilationRate=Qh(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ce(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ce(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ce(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Jo("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!JO(e.kernelSize,"number",1,3))throw new ce(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Pu(this.activation),useBias:this.useBias,biasInitializer:Zn(this.biasInitializer),biasRegularizer:In(this.biasRegularizer),activityRegularizer:In(this.activityRegularizer),biasConstraint:Fr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Rm extends FC{constructor(e,n){super(e,n),this.kernel=null,Rm.verifyArgs(n),this.filters=n.filters,Jr(this.filters,"filters"),this.kernelInitializer=Wn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Br(n.kernelConstraint),this.kernelRegularizer=qn(n.kernelRegularizer)}build(e){e=tn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ce(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return me(()=>{e=St(e);let r;const s=this.bias==null?null:this.bias.read(),a=w7(this.activation.getClassName());if(a!=null&&this.rank===2)r=PL(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)r=uxe(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=PL(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=dxe(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new _t("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=tn(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<r.length;++a){const i=wo(r[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);n.push(i)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:Zn(this.kernelInitializer),kernelRegularizer:In(this.kernelRegularizer),kernelConstraint:Fr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ce(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class nx extends Rm{constructor(e){super(2,e),nx.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!JO(e.kernelSize,"number",1,2))throw new ce(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}nx.className="Conv2D";We(nx);class rx extends Rm{constructor(e){super(3,e),rx.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ce(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}rx.className="Conv3D";We(rx);class Tq extends nx{constructor(e){if(super(e),this.inputSpec=[new Pr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ce(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=tn(e),e.length!==4)throw new ce("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ce("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Pr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return me(()=>{let r=St(e);if(r.shape.length!==4)throw new ce(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,a=s[0];let i,o;this.dataFormat==="channelsFirst"?(i=2,o=3):(i=1,o=2);const l=s[i],c=s[o],f=this.kernelSize[0],p=this.kernelSize[1],m=this.strides[0],y=this.strides[1],b=el(l,m,f,this.padding),v=el(c,y,p,this.padding),x=[a,b,v,this.filters];this.dataFormat!=="channelsLast"&&(r=Ut(r,[0,2,3,1]));let S=Y2(r,this.kernel.read(),x,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=Ut(S,[0,3,1,2])),this.bias!=null&&(S=Oo(S,this.bias.read(),this.dataFormat)),this.activation!=null&&(S=this.activation.apply(S)),S})}computeOutputShape(e){e=tn(e);const n=e.slice();let r,s,a;this.dataFormat==="channelsFirst"?(r=1,s=2,a=3):(r=3,s=1,a=2);const i=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[s]=el(n[s],l,i,this.padding),n[a]=el(n[a],c,o,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Tq.className="Conv2DTranspose";We(Tq);class Eq extends rx{constructor(e){if(super(e),this.inputSpec=[new Pr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ce(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=tn(e),e.length!==5)throw new ce("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ce("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Pr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return me(()=>{let r=St(e);if(r.shape.length!==5)throw new ce(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,a=s[0];let i,o,l;this.dataFormat==="channelsFirst"?(l=2,i=3,o=4):(l=1,i=2,o=3);const c=s[l],f=s[i],p=s[o],m=this.kernelSize[0],y=this.kernelSize[1],b=this.kernelSize[2],v=this.strides[0],x=this.strides[1],S=this.strides[2],C=el(c,v,m,this.padding),E=el(f,x,y,this.padding),k=el(p,S,b,this.padding),I=[a,C,E,k,this.filters];this.dataFormat!=="channelsLast"&&(r=Ut(r,[0,2,3,4,1]));let $=_R(r,this.kernel.read(),I,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&($=Ut($,[0,4,1,2,3])),this.bias!==null&&($=Oo($,this.bias.read(),this.dataFormat)),this.activation!==null&&($=this.activation.apply($)),$})}computeOutputShape(e){e=tn(e);const n=e.slice();let r,s,a,i;this.dataFormat==="channelsFirst"?(r=1,s=2,a=3,i=4):(r=4,s=1,a=2,i=3);const o=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],f=this.strides[0],p=this.strides[1],m=this.strides[2];return n[r]=this.filters,n[s]=el(n[s],f,o,this.padding),n[a]=el(n[a],p,l,this.padding),n[i]=el(n[i],m,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Eq.className="Conv3DTranspose";We(Eq);class Iq extends Rm{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ce("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ce("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ce(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Wn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=qn(n.depthwiseRegularizer),this.depthwiseConstraint=Br(n.depthwiseConstraint),this.pointwiseInitializer=Wn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=qn(n.pointwiseRegularizer),this.pointwiseConstraint=Br(n.pointwiseConstraint)}build(e){if(e=tn(e),e.length<this.rank+2)throw new ce(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new ce(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),a=[];for(let o=0;o<this.rank;++o)a.push(1);a.push(r*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Pr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return me(()=>{e=St(e);let r;if(this.rank===1)throw new _t("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Ut(e,[0,2,3,1])),r=dC(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Oo(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Ut(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Zn(this.depthwiseInitializer),e.pointwiseInitializer=Zn(this.pointwiseInitializer),e.depthwiseRegularizer=In(this.depthwiseRegularizer),e.pointwiseRegularizer=In(this.pointwiseRegularizer),e.depthwiseConstraint=Fr(this.depthwiseConstraint),e.pointwiseConstraint=Fr(this.pointwiseConstraint),e}}Iq.className="SeparableConv";class Aq extends Iq{constructor(e){super(2,e)}}Aq.className="SeparableConv2D";We(Aq);class BC extends Rm{constructor(e){super(1,e),BC.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!JO(e.kernelSize,"number",1,1))throw new ce(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}BC.className="Conv1D";We(BC);class jq extends Mt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return me(()=>{if(e=St(e),this.dataFormat==="channelsLast"){const r=Xv(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Xv(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Xv(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Xv(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}jq.className="Cropping2D";We(jq);class $q extends Mt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,br(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,B0e(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return me(()=>{let r=St(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=Ut(r,[0,2,3,1]);const a=this.size[0]*s[2],i=this.size[1]*s[3],o=this.interpolation==="nearest"?bo.resizeNearestNeighbor(r,[a,i]):bo.resizeBilinear(r,[a,i]);return Ut(o,[0,3,1,2])}else{const a=this.size[0]*s[1],i=this.size[1]*s[2];return this.interpolation==="nearest"?bo.resizeNearestNeighbor(r,[a,i]):bo.resizeBilinear(r,[a,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}$q.className="UpSampling2D";We($q);function fxe(t,e,n=[1,1],r="valid",s,a){return me(()=>{s==null&&(s=To()),br(s);let i=h_(t,s);if(t.rank!==4)throw new ce(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ce(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=Tm(i,e,n,r==="same"?"same":"valid","NHWC",a),s==="channelsFirst"&&(i=Ut(i,[0,3,1,2])),i})}class Rq extends FC{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Wn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Br(e.depthwiseConstraint),this.depthwiseRegularizer=qn(e.depthwiseRegularizer)}build(e){if(e=tn(e),e.length<4)throw new ce(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new ce(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return me(()=>{e=St(e);let r=fxe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Oo(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=tn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=wo(n,this.kernelSize[0],this.padding,this.strides[0]),i=wo(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,a,i]:[e[0],a,i,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Zn(this.depthwiseInitializer),e.depthwiseRegularizer=In(this.depthwiseRegularizer),e.depthwiseConstraint=Fr(this.depthwiseRegularizer),e}}Rq.className="DepthwiseConv2D";We(Rq);function Oq(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new ce("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(a){return a==null||Array.isArray(a)?a:[a]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function _q(t,e,n,r=!1,s,a,i=!1,o=!1){return me(()=>{const l=e.shape.length;if(l<3)throw new ce(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(No(2,l));e=Ut(e,c),i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=Ge(Ge(s,"bool"),"float32"),s.rank===l-1&&(s=zs(s,-1)),s=Ut(s,c)),r&&(e=wi(e,0),s!=null&&(s=wi(s,0)));const f=[];let p,m=n;const y=e.shape[0],b=Si(e);let v;s!=null&&(v=Si(s));for(let S=0;S<y;++S){const C=b[S],E=me(()=>t(C,m));if(s==null)p=E[0],m=E[1];else{const k=me(()=>{const I=v[S],$=tt(Ga(I),I),_=Be(oe(E[0],I),oe(m[0],$)),z=m.map((L,R)=>Be(oe(E[1][R],I),oe(L,$)));return{output:_,newStates:z}});p=k.output,m=k.newStates}o&&f.push(p)}let x;return o&&(x=Sa(f,1)),[p,x,m]})}class Yu extends Mt{constructor(e){super(e);let n;if(e.cell==null)throw new ce("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new g_({cells:e.cell}):n=e.cell,n.stateSize==null)throw new ce("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Pr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return No(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){aj(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const a=[];for(const i of n)a.push([e[0],i]);return[s].concat(a)}else return s}computeMask(e,n){return me(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(a=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new _t("Constants support is not implemented in RNN yet.");aj(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Pr({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!Ft(this.stateSpec.map(i=>i.shape[i.shape.length-1]),a))throw new ce(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(i=>new Pr({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){me(()=>{if(!this.stateful)throw new Zo("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ce("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Tr([r,s])):this.states_=[Tr([r,this.cell.stateSize])];else if(e==null)Pt(this.states_),this.keptStates!=null&&(Pt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Tr([r,s])):this.states_[0]=Tr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ce(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):Pt(this.states_);for(let s=0;s<this.states_.length;++s){const a=e[s],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,o=[r,i];if(!Ft(a.shape,o))throw new ce(`State ${s} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${a.shape}`);this.states_[s]=a}}this.states_=this.states_.map(s=>Dr(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const a=Oq(e,r,s,this.numConstants);e=a.inputs,r=a.initialState,s=a.constants;let i=[],o=[];if(r!=null){n.initialState=r,i=i.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Pr({shape:c.shape}));o=o.concat(this.stateSpec)}if(s!=null&&(n.constants=s,i=i.concat(s),this.numConstants=s.length),i[0]instanceof yl){const c=[e].concat(i),f=this.inputSpec.concat(o),p=this.inputSpec;this.inputSpec=f;const m=super.apply(c,n);return this.inputSpec=p,m}else return super.apply(e,n)}call(e,n){return me(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let a=n==null?null:n.initialState;e=St(e),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==i)throw new ce(`RNN Layer has ${i} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:s},c=_q((b,v)=>{const x=this.cell.call([b].concat(v),o);return[x[0],x.slice(1)]},e,a,this.goBackwards,r,null,this.unroll,this.returnSequences),f=c[0],p=c[1],m=c[2];this.stateful&&this.resetStates(m,s);const y=this.returnSequences?p:f;return this.returnState?[y].concat(m):y})}getInitialState(e){return me(()=>{let n=Tr(e.shape);return n=nt(n,[1,2]),n=Qb(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?rj(n,[1,r]):n):this.cell.stateSize>1?[rj(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Yu.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,a=sc(s,r);return new e(Object.assign(n,{cell:a}))}}Yu.className="RNN";We(Yu);class UC extends Mt{}class p_ extends UC{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Jr(this.units,"units"),this.activation=Lu(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Wn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Wn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Wn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=qn(e.kernelRegularizer),this.recurrentRegularizer=qn(e.recurrentRegularizer),this.biasRegularizer=qn(e.biasRegularizer),this.kernelConstraint=Br(e.kernelConstraint),this.recurrentConstraint=Br(e.recurrentConstraint),this.biasConstraint=Br(e.biasConstraint),this.dropout=up([1,zu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=up([1,zu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=tn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return me(()=>{if(e=e,e.length!==2)throw new ce(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Mu({ones:()=>Ga(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Mu({ones:()=>Ga(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let a;const i=this.dropoutMask,o=this.recurrentDropoutMask;i!=null?a=dl(oe(e,i),this.kernel.read()):a=dl(e,this.kernel.read()),this.bias!=null&&(a=Oo(a,this.bias.read())),o!=null&&(r=oe(r,o));let l=Be(a,dl(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Pu(this.activation),useBias:this.useBias,kernelInitializer:Zn(this.kernelInitializer),recurrentInitializer:Zn(this.recurrentInitializer),biasInitializer:Zn(this.biasInitializer),kernelRegularizer:In(this.kernelRegularizer),recurrentRegularizer:In(this.recurrentRegularizer),biasRegularizer:In(this.biasRegularizer),activityRegularizer:In(this.activityRegularizer),kernelConstraint:Fr(this.kernelConstraint),recurrentConstraint:Fr(this.recurrentConstraint),biasConstraint:Fr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}p_.className="SimpleRNNCell";We(p_);class Dq extends Yu{constructor(e){e.cell=new p_(e),super(e)}call(e,n){return me(()=>{this.cell.dropoutMask!=null&&(Pt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Pt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}static fromConfig(e,n){return new e(n)}}Dq.className="SimpleRNN";We(Dq);class m_ extends UC{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ce("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Jr(this.units,"units"),this.activation=Lu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Lu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Wn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Wn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Wn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=qn(e.kernelRegularizer),this.recurrentRegularizer=qn(e.recurrentRegularizer),this.biasRegularizer=qn(e.biasRegularizer),this.kernelConstraint=Br(e.kernelConstraint),this.recurrentConstraint=Br(e.recurrentConstraint),this.biasConstraint=Br(e.biasConstraint),this.dropout=up([1,zu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=up([1,zu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=tn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return me(()=>{if(e=e,e.length!==2)throw new ce(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Mu({ones:()=>Ga(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Mu({ones:()=>Ga(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;let o,l,c;0<this.dropout&&this.dropout<1&&(e=oe(e,a[0]));let f=dl(e,this.kernel.read());this.useBias&&(f=Oo(f,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=oe(s,i[0]));const p=this.recurrentKernel.read(),[m,y]=ya(p,[2*this.units,this.units],p.rank-1),b=dl(s,m),[v,x,S]=ya(f,3,f.rank-1),[C,E]=ya(b,2,b.rank-1);o=this.recurrentActivation.apply(Be(v,C)),l=this.recurrentActivation.apply(Be(x,E));const k=dl(oe(l,s),y);c=this.activation.apply(Be(S,k));const I=Be(oe(o,s),oe(Be(1,zn(o)),c));return[I,I]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Pu(this.activation),recurrentActivation:Pu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Zn(this.kernelInitializer),recurrentInitializer:Zn(this.recurrentInitializer),biasInitializer:Zn(this.biasInitializer),kernelRegularizer:In(this.kernelRegularizer),recurrentRegularizer:In(this.recurrentRegularizer),biasRegularizer:In(this.biasRegularizer),activityRegularizer:In(this.activityRegularizer),kernelConstraint:Fr(this.kernelConstraint),recurrentConstraint:Fr(this.recurrentConstraint),biasConstraint:Fr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}m_.className="GRUCell";We(m_);class zq extends Yu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new m_(e),super(e)}call(e,n){return me(()=>{this.cell.dropoutMask!=null&&(Pt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Pt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}zq.className="GRU";We(zq);class WC extends UC{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Jr(this.units,"units"),this.activation=Lu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Lu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Wn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Wn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Wn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=qn(e.kernelRegularizer),this.recurrentRegularizer=qn(e.recurrentRegularizer),this.biasRegularizer=qn(e.biasRegularizer),this.kernelConstraint=Br(e.kernelConstraint),this.recurrentConstraint=Br(e.recurrentConstraint),this.biasConstraint=Br(e.biasConstraint),this.dropout=up([1,zu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=up([1,zu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=tn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const a=this.biasInitializer,i=this.units;s=new(n=class extends Ji{apply(l,c){const f=a.apply([i]),p=new t_().apply([i]),m=a.apply([i*2]);return vL(vL(f,p),m)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return me(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new ce(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Mu({ones:()=>Ga(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Mu({ones:()=>Ga(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let l,c,f,p;0<this.dropout&&this.dropout<1&&(e=oe(e,i[0]));let m=dl(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=oe(s,o[0])),m=Be(m,dl(s,this.recurrentKernel.read())),this.useBias&&(m=Oo(m,this.bias.read()));const[y,b,v,x]=ya(m,4,m.rank-1);l=this.recurrentActivation.apply(y),c=this.recurrentActivation.apply(b),f=Be(oe(c,a),oe(l,this.activation.apply(v))),p=this.recurrentActivation.apply(x);const S=oe(p,this.activation.apply(f));return[S,S,f]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Pu(this.activation),recurrentActivation:Pu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Zn(this.kernelInitializer),recurrentInitializer:Zn(this.recurrentInitializer),biasInitializer:Zn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:In(this.kernelRegularizer),recurrentRegularizer:In(this.recurrentRegularizer),biasRegularizer:In(this.biasRegularizer),activityRegularizer:In(this.activityRegularizer),kernelConstraint:Fr(this.kernelConstraint),recurrentConstraint:Fr(this.recurrentConstraint),biasConstraint:Fr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}WC.className="LSTMCell";We(WC);class Pq extends Yu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new WC(e),super(e)}call(e,n){return me(()=>{this.cell.dropoutMask!=null&&(Pt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Pt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Pq.className="LSTM";We(Pq);class g_ extends UC{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return me(()=>{e=e;let r=e.slice(1);const s=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?s.push(r.splice(0,o.stateSize.length)):s.push(r.splice(0,1));s.reverse();const a=[];let i;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=s[o],o===0?i=[e[0]].concat(r):i=[i[0]].concat(r),i=l.call(i,n),a.push(i.slice(1))}r=[];for(const o of a.slice().reverse())r.push(...o);return[i[0]].concat(r)})}build(e){aj(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{Jd(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=a=>({className:a.getClassName(),config:a.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const a of n.cells)s.push(sc(a,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return ij(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,a=e.splice(s);for(let i=0;i<r.weights.length;++i)n.push([r.weights[i],a[i]])}l_(n)}}g_.className="StackedRNNCells";We(g_);function Mu(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:a}=t,i=()=>a!=null?a(e(),n):I7(e(),n),o=()=>Jb(i,e,r);return!s||s<=1?Dr(o().clone()):Array(s).fill(void 0).map(o).map(c=>Dr(c.clone()))}var hxe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Lq extends Yu{constructor(e){if(e.unroll)throw new _t("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new _t("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Pr({ndim:5})]}call(e,n){return me(()=>{if(this.cell.dropoutMask!=null&&(Pt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Pt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ce("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return me(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),a=[s[0],...s.slice(2)],i=Tr(a);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){me(()=>{if(!this.stateful)throw new Zo("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),a=[s[0],...s.slice(2)];if(r[0]==null)throw new ce("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Tr(a)):this.states_=[Tr(a)];else if(e==null)Pt(this.states_),this.keptStates!=null&&(Pt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Tr(a)):this.states_[0]=Tr(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ce(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):Pt(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],c=a;if(!Ft(l.shape,c))throw new ce(`State ${o} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>Dr(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:a,strides:i,dilationRate:o}=this.cell,l=n==="channelsFirst",c=e[l?3:2],f=e[l?4:3],p=wo(c,s[0],a,i[0],o[0]),m=wo(f,s[1],a,i[1],o[1]);return[...e.slice(0,2),...l?[r,p,m]:[p,m,r]]}}Lq.className="ConvRNN2D";class y_ extends WC{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:a,dataFormat:i,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Jr(this.filters,"filters"),this.kernelSize=Qh(r,2,"kernelSize"),this.kernelSize.forEach(l=>Jr(l,"kernelSize")),this.strides=Qh(s||1,2,"strides"),this.strides.forEach(l=>Jr(l,"strides")),this.padding=a||"valid",Ei(this.padding),this.dataFormat=i||"channelsLast",br(this.dataFormat),this.dilationRate=Qh(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>Jr(l,"dilationRate"))}build(e){var n;e=tn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ce(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],a=4,i=this.kernelSize.concat([s,this.filters*a]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,f=this.filters;l=new(n=class extends Ji{apply(m,y){const b=c.apply([f]),v=ma([f]),x=c.apply([f*2]);return e_([b,v,x])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return me(()=>{if(e.length!==3)throw new ce(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],a=e[1],i=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Mu({ones:()=>Ga(s),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(ee,W,Q)=>!W||!W[Q]?ee:oe(W[Q],ee);let f=c(s,l,0),p=c(s,l,1),m=c(s,l,2),y=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Mu({ones:()=>Ga(a),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const b=this.recurrentDropoutMask;let v=c(a,b,0),x=c(a,b,1),S=c(a,b,2),C=c(a,b,3);const E=3,[k,I,$,_]=ya(this.kernel.read(),o,E),[z,L,R,D]=this.useBias?ya(this.bias.read(),o):[null,null,null,null];f=this.inputConv(f,k,z,this.padding),p=this.inputConv(p,I,L,this.padding),m=this.inputConv(m,$,R,this.padding),y=this.inputConv(y,_,D,this.padding);const[U,X,V,Y]=ya(this.recurrentKernel.read(),o,E);v=this.recurrentConv(v,U),x=this.recurrentConv(x,X),S=this.recurrentConv(S,V),C=this.recurrentConv(C,Y);const B=this.recurrentActivation.apply(Be(f,v)),Z=this.recurrentActivation.apply(Be(p,x)),J=Be(oe(Z,i),oe(B,this.activation.apply(Be(m,S)))),ae=oe(this.recurrentActivation.apply(Be(y,C)),this.activation.apply(J));return[ae,ae,J]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=hxe(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),s)}inputConv(e,n,r,s){const a=uc(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Oo(a,r,this.dataFormat):a}recurrentConv(e,n){return uc(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}y_.className="ConvLSTM2DCell";We(y_);class Mq extends Lq{constructor(e){const n=new y_(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}Mq.className="ConvLSTM2D";We(Mq);class b_ extends Mt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return me(()=>{this.invokeCallHook(e,n);const r=St(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,a=this.getNoiseShape(r);return Jb(()=>I7(r,this.rate,a,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}b_.className="Dropout";We(b_);class Fq extends b_{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}Fq.className="SpatialDropout1D";We(Fq);class Bq extends Mt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Jr(this.units,"units"),this.activation=Lu(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Wn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Wn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Br(e.kernelConstraint),this.biasConstraint=Br(e.biasConstraint),this.kernelRegularizer=qn(e.kernelRegularizer),this.biasRegularizer=qn(e.biasRegularizer),this.activityRegularizer=qn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=tn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=tn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return me(()=>{this.invokeCallHook(e,n);const r=St(e),s=w7(this.activation.getClassName());let a;return s!=null?a=dl(r,this.kernel.read(),s,this.bias?this.bias.read():null):(a=dl(r,this.kernel.read()),this.bias!=null&&(a=Oo(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:Pu(this.activation),useBias:this.useBias,kernelInitializer:Zn(this.kernelInitializer),biasInitializer:Zn(this.biasInitializer),kernelRegularizer:In(this.kernelRegularizer),biasRegularizer:In(this.biasRegularizer),activityRegularizer:In(this.activityRegularizer),kernelConstraint:Fr(this.kernelConstraint),biasConstraint:Fr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}Bq.className="Dense";We(Bq);class Uq extends Mt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=tn(e);for(const n of e.slice(1))if(n==null)throw new ce(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Cu(e,1)]}call(e,n){return me(()=>{this.invokeCallHook(e,n);let r=St(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let a=2;a<r.rank;++a)s.push(a);s.push(1),r=Ut(r,s)}return H0e(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}Uq.className="Flatten";We(Uq);class Wq extends Mt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Lu(e.activation)}call(e,n){return me(()=>{this.invokeCallHook(e,n);const r=St(e);return this.activation.apply(r)})}getConfig(){const e={activation:Pu(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}Wq.className="Activation";We(Wq);class Vq extends Mt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return me(()=>(e=St(e),q0e(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}Vq.className="RepeatVector";We(Vq);class qq extends Mt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let a=1,i=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(i===null)i=l;else throw new ce("Can only specifiy one unknown dimension.");else a*=c}const o=Cu(e);if(i!==null){if(a===0||o%a!==0)throw new ce(r);s[i]=o/a}else if(o!==a)throw new ce(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return me(()=>{this.invokeCallHook(e,n);const r=St(e),s=r.shape,a=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return le(r,a)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}qq.className="Reshape";We(qq);class Gq extends Mt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=No(1,e.dims.length+1);if(!Ft(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Pr({ndim:this.dims.length+1})]}computeOutputShape(e){e=tn(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return Ut(St(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}Gq.className="Permute";We(Gq);class Hq extends Mt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=St(e);return Uy(gf(r,this.maskValue),-1)}call(e,n){return me(()=>{this.invokeCallHook(e,n);const r=St(e),i=Uy(gf(r,this.maskValue),-1,!0);return oe(r,Ge(i,r.dtype))})}}Hq.className="Masking";We(Hq);class Kq extends Mt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(mn(e.inputLength))}this.inputDim=e.inputDim,Jr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Jr(this.outputDim,"outputDim"),this.embeddingsInitializer=Wn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=qn(e.embeddingsRegularizer),this.activityRegularizer=qn(e.activityRegularizer),this.embeddingsConstraint=Br(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return me(()=>this.maskZero?(e=St(e),gf(e,Ht(e))):null)}computeOutputShape(e){if(e=tn(e),this.inputLength==null)return[...e,this.outputDim];const n=mn(this.inputLength);if(n.length!==e.length-1)throw new ce(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const a=n[s],i=e[s+1];if(a!=null&&i!=null&&a!==i)throw new ce(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);a==null&&(n[r]=i),r++}}return[e[0],...n,this.outputDim]}call(e,n){return me(()=>{this.invokeCallHook(e,n);let r=St(e);r.dtype!=="int32"&&(r=ul(r,"int32"));const s=E7(this.embeddings.read(),le(r,[r.size]));return le(s,tn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Zn(this.embeddingsInitializer),embeddingsRegularizer:In(this.embeddingsRegularizer),activityRegularizer:In(this.activityRegularizer),embeddingsConstraint:Fr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}Kq.className="Embedding";We(Kq);class Bf extends Mt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new _t}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const a=e[e.length-n.length+s],i=n[s];if(a==null||i==null||a<0||i<0)r.push(null);else if(a===1)r.push(i);else if(i===1)r.push(a);else{if(a!==i)throw new ce("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(a)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[tn(e)]),e=e,e.length<2)throw new ce(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const a of e)a!=null&&a[0]!==null&&n.push(a[0]);if(n=Su(n),n.length>1)throw new ce(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let a=1;a<e.length;++a){const i=e[a]==null?null:e[a].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}const s=e.map(a=>a.length);e.indexOf(null)===-1&&Su(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return me(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(a=>a.rank);if(s.indexOf(null)===-1){const a=zu(s);for(let i of e){const o=i.rank;for(let l=0;l<a-o;++l)i=Qb(i,1);r.push(i)}return this.mergeFunction(r)}else{let a=!1;for(const l of e){const c=l.rank;if(c==null){const f=l.shape,p=f[0],m=f.slice(1).concat([p]);let y=le(l,[p].concat(Cu(f.slice(1))));y=Ut(y,[1,0]),y=le(y,m),r.push(y),a=!0}else if(c>1){const f=No(1,c).concat([0]);r.push(Ut(l,f)),a=!0}else r.push(l)}let i=this.mergeFunction(r);const o=i.rank;if(a){if(o==null){const l=i.shape,c=l.length,f=l[c-1],p=[f].concat(l.slice(0,l.length-1));i=le(Ut(le(i,[-1,f]),[1,0]),p)}else if(o>1){const l=[o-1].concat(No(0,o-1));i=Ut(i,l)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const a=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,a)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Su(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return me(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ce("`mask` should be an Array");if(!Array.isArray(e))throw new ce("`inputs` should be an Array");if(n.length!==e.length)throw new ce(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:zs(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=ko(r,n[s]);return r})}}class Xq extends Bf{constructor(e){super(e)}mergeFunction(e){return me(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Be(n,e[r]);return n})}}Xq.className="Add";We(Xq);class Yq extends Bf{constructor(e){super(e)}mergeFunction(e){return me(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=oe(n,e[r]);return n})}}Yq.className="Multiply";We(Yq);class Qq extends Bf{constructor(e){super(e)}mergeFunction(e){return me(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Be(n,e[r]);return oe(1/e.length,n)})}}Qq.className="Average";We(Qq);class Zq extends Bf{constructor(e){super(e)}mergeFunction(e){return me(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Nl(n,e[r]);return n})}}Zq.className="Maximum";We(Zq);class Jq extends Bf{constructor(e){super(e)}mergeFunction(e){return me(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Du(n,e[r]);return n})}}Jq.className="Minimum";We(Jq);class eG extends Bf{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ce("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const a=e[s].slice();a.splice(this.axis,1);let i=!1;for(const o of r)if(Ft(o,a)){i=!0;break}i||r.push(a)}if(r.length>1)throw new ce("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return me(()=>e_(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ce("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const a of n.slice(1)){if(r[s]==null||a[s]==null){r[s]=null;break}r[s]+=a[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new ce("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ce("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new ce(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return me(()=>{let r=!0;if(n.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;const s=[];for(let i=0;i<e.length;++i)n[i]==null?s.push(Ge(Ga(e[i]),"bool")):n[i].rank<e[i].rank?s.push(zs(n[i],-1)):s.push(n[i]);const a=mr(s,this.axis);return K2(a,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}eG.className="Concatenate";We(eG);function ny(t,e){for(;t<0;)t+=e;return t}function pxe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new _t("batchDot is not implemented for tensors of 4D or higher rank yet");if(q(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),q(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new _t("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const a=n;return me(()=>{let i;if(r>s){i=r-s;const l=[];for(let c=0;c<i;++c)l.push(1);e=le(e,e.shape.concat(l))}else if(s>r){i=s-r;const l=[];for(let c=0;c<i;++c)l.push(1);t=le(t,t.shape.concat(l))}else i=0;let o;if(t.shape.length===2&&e.shape.length===2)a[0]===a[1]?o=nt(oe(t,e),a[0]):o=nt(oe(Ut(t,[1,0]),e),a[1]);else{const l=a[0]!==t.shape.length-1,c=a[1]===e.shape.length-1;o=zt(t,e,l,c)}if(i>0){let l;r>s?l=r+s-3:l=r-1;const c=[];for(let f=l;f<l+i;++f)c.push(f);o=Ku(o,c)}return o.shape.length===1&&(o=zs(o,1)),o})}let tG=class extends Bf{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){q(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new _t("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new ce(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ce(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((a,i)=>ny(a,e[i].shape.length)):s=[ny(this.axes,n.shape.length),ny(this.axes,r.shape.length)],this.normalize&&(n=gw(n,s[0]),r=gw(r,s[1])),pxe(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[ny(this.axes,e.length),ny(this.axes,n.length)],r}computeOutputShape(e){q(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new _t("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const a=n.concat(r);return a.length===1&&a.push(1),a}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}};tG.className="Dot";We(tG);class nG extends Mt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return me(()=>{this.invokeCallHook(e,n);const r=St(e);return Jb(()=>Be(zC(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}nG.className="GaussianNoise";We(nG);class rG extends Mt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return me(()=>{this.invokeCallHook(e,n);const r=St(e);return this.rate>0&&this.rate<1?Jb(()=>{const a=Math.sqrt(this.rate/(1-this.rate));return oe(r,zC(r.shape,1,a))},()=>r,n.training||!1):r})}}rG.className="GaussianDropout";We(rG);class sG extends Mt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||St(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return me(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Jb(()=>{const a=St(e),o=-1.6732632423543772*1.0507009873554805;let l=Cc(Hu(r),this.rate);l=ul(l,"float32");const c=((1-this.rate)*(1+this.rate*o**2))**-.5,f=-c*o*this.rate,p=Be(oe(a,l),oe(Be(l,-1),o));return Be(oe(p,c),f)},()=>St(e),n.training||!1)}return e})}}sG.className="AlphaDropout";We(sG);function Xy(t,e,n,r,s,a=.001){let i;if(t.rank===2)i=CR(t,e,n,r,s,a);else if(t.rank===3)i=kR(t,e,n,r,s,a);else if(t.rank===4)i=NR(t,e,n,r,s,a);else throw new _t(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function mxe(t,e,n,r,s=.001){return me(()=>{const a=Mb(t,r),i=a.mean,o=a.variance;return[Xy(t,i,o,n,e,s),i,o]})}function gxe(t,e,n,r,s=.001){return me(()=>{const a=Mb(t,r),i=a.mean,o=a.variance,l=[];for(const b of No(0,t.rank))r.indexOf(b)!==-1?l.push(1):l.push(t.shape[b]);const c=le(i,l),f=le(o,l),p=e==null?null:le(e,l),m=n==null?null:le(n,l);return[Xy(t,c,f,m,p,s),i,o]})}function yxe(t,e,n,r,s=.001){return Ft(r.slice().sort(),No(0,t.rank-1))?mxe(t,e,n,r,s):gxe(t,e,n,r,s)}class aG extends Mt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Wn(e.betaInitializer||"zeros"),this.gammaInitializer=Wn(e.gammaInitializer||"ones"),this.movingMeanInitializer=Wn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Wn(e.movingVarianceInitializer||"ones"),this.betaConstraint=Br(e.betaConstraint),this.gammaConstraint=Br(e.gammaConstraint),this.betaRegularizer=qn(e.betaRegularizer),this.gammaRegularizer=qn(e.gammaRegularizer)}build(e){e=tn(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new ce(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Pr({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return me(()=>{const r=n.training==null?!1:n.training,s=St(e),a=s.shape,i=a.length,o=No(0,i),l=this.axis>=0?this.axis:this.axis+i;o.splice(l,1);const c=xf(1,i);c[l]=a[l];const f=o.slice();f.sort();const p=!Ft(f,No(0,i).slice(0,i-1)),m=()=>{if(p){const C=le(this.movingMean.read(),c),E=le(this.movingVariance.read(),c),k=this.center?le(this.beta.read(),c):null,I=this.scale?le(this.gamma.read(),c):null;return Xy(s,C,E,k,I,this.epsilon)}else return Xy(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return m();const[y,b,v]=yxe(s,this.gamma.read(),this.beta.read(),o,this.epsilon),x=(C,E,k)=>{me(()=>{const I=1-k,$=C.read(),_=oe(tt($,E),I);C.write(tt($,_))})};return x(this.movingMean,b,this.momentum),x(this.movingVariance,v,this.momentum),y})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Zn(this.betaInitializer),gammaInitializer:Zn(this.gammaInitializer),movingMeanInitializer:Zn(this.movingMeanInitializer),movingVarianceInitializer:Zn(this.movingVarianceInitializer),betaRegularizer:In(this.betaRegularizer),gammaRegularizer:In(this.gammaRegularizer),betaConstraint:Fr(this.betaConstraint),gammaConstraint:Fr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}aG.className="BatchNormalization";We(aG);class iG extends Mt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Wn(e.betaInitializer||"zeros"),this.gammaInitializer=Wn(e.gammaInitializer||"ones"),this.betaRegularizer=qn(e.betaRegularizer),this.gammaRegularizer=qn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=tn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=n);for(const a of this.axis)if(a<0||a>=n)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==Su(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(a=>e[a]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=St(e),s=r.shape,a=s.length;return me(()=>{let{mean:o,variance:l}=Mb(r,this.axis,!0);const c=xf(1,a);for(const v of this.axis)c[v]=s[v];const f=v=>v!=null&&v.shape.length!==a?le(v,c):v;let p=this.scale?f(this.gamma.read()):null,m=this.center?f(this.beta.read()):null;const y=[],b=[];for(let v=0;v<a;++v)this.axis.indexOf(v)!==-1?(y.push(s[v]),b.push(1)):(y.push(1),b.push(s[v]));return o=fi(o,y),l=fi(l,y),p!=null&&(p=fi(p,b)),m!=null&&(m=fi(m,b)),Xy(r,o,l,m,p,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Zn(this.betaInitializer),gammaInitializer:Zn(this.gammaInitializer),betaRegularizer:In(this.betaRegularizer),gammaRegularizer:In(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}iG.className="LayerNormalization";We(iG);function bxe(t,e,n){return me(()=>{if(t.rank!==4)throw new ce(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ce("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=To()),n!=="channelsLast"&&n!=="channelsFirst")throw new ce(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],kc(t,r)})}class oG extends Mt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?To():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ce(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ce(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new ce(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Pr({ndim:4})]}computeOutputShape(e){e=tn(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return me(()=>bxe(St(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}oG.className="ZeroPadding2D";We(oG);function VC(t,e,n,r,s,a){return me(()=>{br(s),C7(a),Ei(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=To()),a==null&&(a="max"),t=h_(t,s);let i;const o=r==="same"?"same":"valid";return a==="max"?i=Lb(t,e,n,o):i=jb(t,e,n,o),s==="channelsFirst"&&(i=Ut(i,[0,3,1,2])),i})}function lG(t,e,n,r,s,a){return me(()=>{br(s),C7(a),Ei(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=To()),a==null&&(a="max"),t=Nq(t,s);let i;const o=r==="same"?"same":"valid";return a==="max"?i=KR(t,e,n,o):i=SR(t,e,n,o),s==="channelsFirst"&&(i=Ut(i,[0,4,1,2,3])),i})}class cG extends Mt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ce(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Jr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ce(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Jr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Ei(this.padding),this.inputSpec=[new Pr({ndim:3})]}computeOutputShape(e){e=tn(e);const n=wo(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return me(()=>{this.invokeCallHook(e,n),e=Qb(St(e),2);const r=this.poolingFunction(St(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Ku(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class uG extends cG{constructor(e){super(e)}poolingFunction(e,n,r,s,a){return br(a),Ei(s),VC(e,n,r,s,a,"max")}}uG.className="MaxPooling1D";We(uG);class dG extends cG{constructor(e){super(e)}poolingFunction(e,n,r,s,a){return br(a),Ei(s),VC(e,n,r,s,a,"avg")}}dG.className="AveragePooling1D";We(dG);class fG extends Mt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ce(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Jr(this.poolSize,"poolSize"),Jr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,br(this.dataFormat),Ei(this.padding),this.inputSpec=[new Pr({ndim:4})]}computeOutputShape(e){e=tn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=wo(n,this.poolSize[0],this.padding,this.strides[0]),r=wo(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return me(()=>(this.invokeCallHook(e,n),this.poolingFunction(St(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class hG extends fG{constructor(e){super(e)}poolingFunction(e,n,r,s,a){return br(a),Ei(s),VC(e,n,r,s,a,"max")}}hG.className="MaxPooling2D";We(hG);class pG extends fG{constructor(e){super(e)}poolingFunction(e,n,r,s,a){return br(a),Ei(s),VC(e,n,r,s,a,"avg")}}pG.className="AveragePooling2D";We(pG);class mG extends Mt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ce(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Jr(this.poolSize,"poolSize"),Jr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,br(this.dataFormat),Ei(this.padding),this.inputSpec=[new Pr({ndim:5})]}computeOutputShape(e){e=tn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=wo(n,this.poolSize[0],this.padding,this.strides[0]),r=wo(r,this.poolSize[1],this.padding,this.strides[1]),s=wo(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return me(()=>(this.invokeCallHook(e,n),this.poolingFunction(St(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class gG extends mG{constructor(e){super(e)}poolingFunction(e,n,r,s,a){return br(a),Ei(s),lG(e,n,r,s,a,"max")}}gG.className="MaxPooling3D";We(gG);class yG extends mG{constructor(e){super(e)}poolingFunction(e,n,r,s,a){return br(a),Ei(s),lG(e,n,r,s,a,"avg")}}yG.className="AveragePooling3D";We(yG);class bG extends Mt{constructor(e){super(e),this.inputSpec=[new Pr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new _t}}class xG extends bG{constructor(e){super(e||{})}call(e,n){return me(()=>{const r=St(e);return Qn(r,1)})}}xG.className="GlobalAveragePooling1D";We(xG);class vG extends bG{constructor(e){super(e||{})}call(e,n){return me(()=>{const r=St(e);return yi(r,1)})}}vG.className="GlobalMaxPooling1D";We(vG);class wG extends Mt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,br(this.dataFormat),this.inputSpec=[new Pr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new _t}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class SG extends wG{call(e,n){return me(()=>{const r=St(e);return this.dataFormat==="channelsLast"?Qn(r,[1,2]):Qn(r,[2,3])})}}SG.className="GlobalAveragePooling2D";We(SG);class CG extends wG{call(e,n){return me(()=>{const r=St(e);return this.dataFormat==="channelsLast"?yi(r,[1,2]):yi(r,[2,3])})}}CG.className="GlobalMaxPooling2D";We(CG);class kG extends Mt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,a=sc(s,r);delete n.layer;const i={layer:a};return Object.assign(i,n),new e(i)}}class NG extends kG{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=tn(e),e.length<3)throw new ce(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=tn(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return me(()=>(e=St(e),_q((i,o)=>[St(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}NG.className="TimeDistributed";We(NG);function xxe(t){Ff(F0e,"BidirectionalMergeMode",t)}const vxe="concat";class TG extends kG{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=sc(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=sc(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?vxe:e.mergeMode,xxe(this.mergeMode),e.weights)throw new _t("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,a;return this.returnState&&(a=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(a).concat(a.slice()):[r].concat(a).concat(a.slice()):ha(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const a=Oq(e,r,s,this.numConstants);if(e=a.inputs,r=a.initialState,s=a.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const i=[],o=[];if(r!=null){const c=r.length;if(c%2>0)throw new ce("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,i.push(...r);const f=r.map(p=>new Pr({shape:p.shape}));this.forwardLayer.stateSpec=f.slice(0,c/2),this.backwardLayer.stateSpec=f.slice(c/2),o.push(...f)}if(s!=null)throw new _t("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof yl;for(const c of i)if(c instanceof yl!==l)throw new ce("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(i),f=this.inputSpec.concat(o),p=this.inputSpec;this.inputSpec=f;const m=super.apply(c,n);return this.inputSpec=p,m}else return super.apply(e,n)}call(e,n){return me(()=>{const r=n.initialState;let s,a;if(r==null)s=this.forwardLayer.call(e,n),a=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),a=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let i;this.returnState&&(Array.isArray(s)&&(i=s.slice(1).concat(a.slice(1))),s=s[0],a=a[0]),this.returnSequences&&(a=wi(a,1));let o;return this.mergeMode==="concat"?o=e_([s,a]):this.mergeMode==="sum"?o=Be(s,a):this.mergeMode==="ave"?o=oe(.5,Be(s,a)):this.mergeMode==="mul"?o=oe(s,a):this.mergeMode==null&&(o=[s,a]),this.returnState?this.mergeMode==null?o.concat(i):[o].concat(i):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Jd(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Jd(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const a=this.forwardLayer.states.map(i=>null);return Array.isArray(r)?r.concat(a).concat(a):[r].concat(a).concat(a)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=sc(n.layer);if(delete n.layer,n.numConstants!=null)throw new _t("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}TG.className="Bidirectional";We(TG);class EG extends Mt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return me(()=>(e=St(e),e.dtype!=="float32"&&(e=ul(e,"float32")),Be(oe(e,this.scale),this.offset)))}}EG.className="Rescaling";We(EG);const{resizeBilinear:wxe,cropAndResize:Sxe}=bo;class IG extends Mt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,a,i,o,l){return me(()=>{let c,f=!1;const p=n/i,m=r/o,y=(s+n)/i,b=(a+r)/o,v=[p,m,y,b],x=[];e.rank===3?(f=!0,c=Sa([e])):c=e;for(let I=0;I<c.shape[0];I++)x.push(v);const S=Ki(x,[x.length,4]),C=yf(0,x.length,1,"int32"),k=Sxe(c,S,C,[s,a],"nearest");return ul(f?St(Si(k)):k,l)})}upsize(e,n,r,s){return me(()=>{const a=wxe(e,[n,r]);return ul(a,s)})}call(e,n){return me(()=>{const r=St(e),s=r.dtype,a=r.shape,i=a[a.length-3],o=a[a.length-2];let l=0;i!==this.height&&(l=Math.floor((i-this.height)/2));let c=0;return o!==this.width&&(c=Math.floor((o-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,i,o,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=tn(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}IG.className="CenterCrop";We(IG);function Cxe(t,e,n,r){let s=St(t);if(s.dtype!=="int32"&&(s=ul(s,"int32")),e==="int")return s;const a=s.shape;if(s.rank===0&&(s=zs(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=zs(s,-1)),s.rank>2)throw new ce(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${a} which would result in output rank ${s.rank}.`);const i=["multiHot","oneHot"].includes(e),o=s;let l;if(typeof r<"u"&&e==="count"?l=uw(o,r,n,i):l=uw(o,[],n,i),e!=="tfIdf")return l;if(r)return oe(l,r);throw new ce("When outputMode is 'tfIdf', weights must be provided.")}class AG extends Mt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=tn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return me(()=>{e=St(e),e.dtype!=="int32"&&(e=ul(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new ce(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=St(n.countWeights)}const s=yi(e),a=sp(e),i=Ta(this.numTokens,s).bufferSync().get(0),o=Cc(a,0).bufferSync().get(0);if(!(i&&o))throw new ce(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return Cxe(e,this.outputMode,this.numTokens,r)})}}AG.className="CategoryEncoding";We(AG);const kxe=["bilinear","nearest"],LL=new Set(kxe);class jG extends Mt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(LL.has(e.interpolation))this.interpolation=e.interpolation;else throw new ce(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=tn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return me(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return bo.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return bo.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...LL]} are supported`)})}}jG.className="Resizing";We(jG);class $G{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}$G.className="RandomSeed";class RG extends Mt{constructor(e){super(e),this.randomGenerator=new $G(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}RG.className="BaseRandomLayer";const Nxe=["bilinear","nearest"],ML=new Set(Nxe);class OG extends RG{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ce(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ce(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ce(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(ML.has(r))this.interpolation=r;else throw new ce(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=tn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return me(()=>{const r=St(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=Hu([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*s;a=Math.round(a);const i=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return bo.resizeBilinear(e,i);case"nearest":return bo.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...ML]} are supported`)}})}}OG.className="RandomWidth";We(OG);const Txe=ye();Txe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var za;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(za||(za={}));var FL;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(FL||(FL={}));const x_={};function Exe(t,e){const n={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e};x_[t]=n}function _G(t){return x_[t]}function Ixe(t){delete x_[t]}function P(t,e,n,r,s){const a=e.inputParams[t];if(a&&a.inputIndexStart!==void 0){const o=a.inputIndexStart,l=a.inputIndexEnd===0?void 0:a.inputIndexEnd===void 0?o+1:a.inputIndexEnd,c=o<0?e.inputNames.length+o:o;if(a.type==="tensor")return hs(e.inputNames[c],n,r,s);if(a.type==="tensors"){const m=e.inputs.slice(o,l);return e.inputNames.slice(o,l).filter((b,v)=>{var x;return((x=m[v])===null||x===void 0?void 0:x.op)!=="NoOp"}).map(b=>hs(b,n,r,s))}const f=hs(e.inputNames[c],n,r,s),p=f.dataSync();return a.type==="number"?p[0]:gi(f.shape,p)}const i=e.attrParams[t];return i&&i.value}function hs(t,e,n,r){const[s,a]=Pa(t,n);if(r!=null){const o=r.getHashTableHandleByName(s);if(o!=null)return o}const i=n.currentContextIds.find(o=>!!e[ww(s,o)]);return i!==void 0?e[ww(s,i)][a]:void 0}function BL(t,e,n){return e[ww(t,n.currentContextId)]}function Xl(t,e){const[n,r,s]=Pa(t,e);return[ww(n,e&&e.currentContextId),r,s]}function ww(t,e){return e?`${t}-${e}`:t}function Pa(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const a=e.parseNodeNameCache.get(t);if(a!=null)return a}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const a=r[0],i=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);s=[a,o,i]}return n&&e.parseNodeNameCache.set(t,s),s}function U1(t,e,n){let r=P("pad",t,e,n);if(r==="explicit"){r=P("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let a=0;a<4;a++)s[a][0]=r[a*2],s[a][1]=r[a*2+1];return s}return r}function Yl(t){return t.kept?t:ll(t)}const Axe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],jxe=Object.freeze(Object.defineProperty({__proto__:null,json:Axe},Symbol.toStringTag,{value:"Module"}));const $xe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Rxe=Object.freeze(Object.defineProperty({__proto__:null,json:$xe},Symbol.toStringTag,{value:"Module"}));const Oxe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],_xe=Object.freeze(Object.defineProperty({__proto__:null,json:Oxe},Symbol.toStringTag,{value:"Module"}));const Dxe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],zxe=Object.freeze(Object.defineProperty({__proto__:null,json:Dxe},Symbol.toStringTag,{value:"Module"}));const Pxe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Lxe=Object.freeze(Object.defineProperty({__proto__:null,json:Pxe},Symbol.toStringTag,{value:"Module"}));const Mxe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Fxe=Object.freeze(Object.defineProperty({__proto__:null,json:Mxe},Symbol.toStringTag,{value:"Module"}));const Bxe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Uxe=Object.freeze(Object.defineProperty({__proto__:null,json:Bxe},Symbol.toStringTag,{value:"Module"}));const Wxe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Vxe=Object.freeze(Object.defineProperty({__proto__:null,json:Wxe},Symbol.toStringTag,{value:"Module"}));const qxe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Gxe=Object.freeze(Object.defineProperty({__proto__:null,json:qxe},Symbol.toStringTag,{value:"Module"}));const Hxe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Kxe=Object.freeze(Object.defineProperty({__proto__:null,json:Hxe},Symbol.toStringTag,{value:"Module"}));const Xxe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Yxe=Object.freeze(Object.defineProperty({__proto__:null,json:Xxe},Symbol.toStringTag,{value:"Module"}));const Qxe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Zxe=Object.freeze(Object.defineProperty({__proto__:null,json:Qxe},Symbol.toStringTag,{value:"Module"}));const Jxe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],eve=Object.freeze(Object.defineProperty({__proto__:null,json:Jxe},Symbol.toStringTag,{value:"Module"}));const tve=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],nve=Object.freeze(Object.defineProperty({__proto__:null,json:tve},Symbol.toStringTag,{value:"Module"}));const rve=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],sve=Object.freeze(Object.defineProperty({__proto__:null,json:rve},Symbol.toStringTag,{value:"Module"}));const ave=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],ive=Object.freeze(Object.defineProperty({__proto__:null,json:ave},Symbol.toStringTag,{value:"Module"}));const ove=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],lve=Object.freeze(Object.defineProperty({__proto__:null,json:ove},Symbol.toStringTag,{value:"Module"}));const cve=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],uve=Object.freeze(Object.defineProperty({__proto__:null,json:cve},Symbol.toStringTag,{value:"Module"}));const dve=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],fve=Object.freeze(Object.defineProperty({__proto__:null,json:dve},Symbol.toStringTag,{value:"Module"}));class UL{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[jxe,Rxe,_xe,zxe,Lxe,Fxe,Uxe,Vxe,Gxe,Kxe,Yxe,Zxe,eve,nve,sve,ive,lve,uve,fve],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],a=[],i=[],o=r.reduce((v,x)=>(v[x.name]=this.mapNode(x),x.op.startsWith("Placeholder")?s.push(v[x.name]):x.op==="Const"?a.push(v[x.name]):(x.input==null||x.input.length===0)&&i.push(v[x.name]),v),{});let l=[];const c=[];let f={},p={};n!=null&&(f=this.mapSignatureEntries(n.inputs),p=this.mapSignatureEntries(n.outputs));const m=Object.keys(o);m.forEach(v=>{const x=o[v];x.inputNames.forEach((S,C)=>{const[E,,k]=Xl(S),I=o[E];if(I.outputs!=null){const $=I.outputs.indexOf(k);if($!==-1){const _=`${E}:${$}`;x.inputNames[C]=_}}x.inputs.push(I),I.children.push(x)})}),Object.keys(p).length===0?m.forEach(v=>{const x=o[v];x.children.length===0&&c.push(x)}):Object.keys(p).forEach(v=>{const[x]=Xl(v),S=o[x];S!=null&&(S.signatureKey=p[v],c.push(S))}),Object.keys(f).length>0?Object.keys(f).forEach(v=>{const[x]=Xl(v),S=o[x];S&&(S.signatureKey=f[v],l.push(S))}):l=s;let y={};e.library!=null&&e.library.function!=null&&(y=e.library.function.reduce((v,x)=>(v[x.signature.name]=this.mapFunction(x),v),{}));const b={nodes:o,inputs:l,outputs:c,weights:a,placeholders:s,signature:n,functions:y};return i.length>0&&(b.initNodes=i),b}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=_G(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,a)=>(s[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,a)=>{const i=a.type;let o;switch(a.type){case"string":o=fj(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=fj(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":o=xj(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=xj(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":o=pj(e.attr,a.tfName,a.defaultValue||0),o===void 0&&a.tfDeprecatedName&&(o=pj(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":o=bj(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=bj(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":o=hj(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=hj(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":o=wj(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=wj(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":o=yj(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=yj(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":o=vj(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=vj(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":o=mj(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=mj(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":o=gj(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=gj(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":o=WL(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=WL(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return s[a.name]={value:o,type:i},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let a={};n!=null&&(a=n.reduce((p,m)=>(p[m.name]=this.mapNode(m),m.op==="Const"&&s.push(p[m.name]),p),{}));const i=[],o=[];e.signature.inputArg.forEach(p=>{const[m]=Xl(p.name),y={name:m,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:v_(p.type),type:"dtype"}},children:[]};y.signatureKey=p.name,i.push(y),a[m]=y}),Object.keys(a).forEach(p=>{const m=a[p];m.inputNames.forEach((y,b)=>{const[v,,x]=Xl(y),S=a[v];if(S.outputs!=null){const C=S.outputs.indexOf(x);if(C!==-1){const E=`${v}:${C}`;m.inputNames[b]=E}}m.inputs.push(S),S.children.push(m)})});const c=e.ret;e.signature.outputArg.forEach(p=>{const[m,y]=Xl(c[p.name]),b=a[m];b!=null&&(b.defaultOutput=y,o.push(b))});const f=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:s,placeholders:r,signature:f}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function hve(t){const e=ye().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function DG(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):hve(t);return e?n:n.toLowerCase()}function fj(t,e,n,r=!1){const s=t[e];return s!=null?DG(s.s,r):n}function hj(t,e,n){const r=t[e];return r?r.b:n}function pj(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function v_(t){switch(typeof t=="string"&&(t=za[t]),t){case za.DT_FLOAT:case za.DT_HALF:return"float32";case za.DT_INT32:case za.DT_INT64:case za.DT_INT8:case za.DT_UINT8:return"int32";case za.DT_BOOL:return"bool";case za.DT_DOUBLE:return"float32";case za.DT_STRING:return"string";case za.DT_COMPLEX64:case za.DT_COMPLEX128:return"complex64";default:return null}}function WL(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function mj(t,e,n){const r=t[e];return r&&r.type?v_(r.type):n}function gj(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>v_(s)):n}function zG(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function yj(t,e,n){const r=t[e];return r&&r.shape?zG(r.shape):n}function bj(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function xj(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(a=>DG(a,r)):n}function vj(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>zG(s)):n}function wj(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}class pve{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,a)=>(s[a]=this.getAttr(a),s),{}))}getInput(e){return hs(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return hs(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return pj(this.node.rawAttrs,e,n);if(r.s!=null)return fj(this.node.rawAttrs,e,n);if(r.b!=null)return hj(this.node.rawAttrs,e,n);if(r.shape!=null)return yj(this.node.rawAttrs,e,n);if(r.type!=null)return mj(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return bj(this.node.rawAttrs,e,n);if(r.list.s!=null)return xj(this.node.rawAttrs,e,n);if(r.list.shape!=null)return vj(this.node.rawAttrs,e,n);if(r.list.b!=null)return wj(this.node.rawAttrs,e,n);if(r.list.type!=null)return gj(this.node.rawAttrs,e,n)}return n}}const vs=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:iR,abs:Nr,acos:hR,acosh:pR,add:Be,addN:NV,all:K2,any:Uy,argMax:hf,argMin:mR,asin:gR,asinh:yR,atan:bR,atan2:xR,atanh:vR,avgPool:jb,avgPool3d:SR,basicLSTMCell:TV,batchNorm:Nm,batchNorm2d:CR,batchNorm3d:kR,batchNorm4d:NR,batchToSpaceND:$b,bincount:TR,bitwiseAnd:EV,booleanMaskAsync:d9,broadcastArgs:IV,broadcastTo:Zd,buffer:$t,cast:Ge,ceil:ER,clipByValue:va,clone:ll,complex:cc,concat:mr,concat1d:IR,concat2d:AR,concat3d:jR,concat4d:$R,conv1d:X2,conv2d:uc,conv2dTranspose:Y2,conv3d:OR,conv3dTranspose:_R,cos:Rb,cosh:Q2,cosineWindow:wC,cumprod:qy,cumsum:Z2,denseBincount:uw,depthToSpace:DR,depthwiseConv2d:Tm,diag:jV,dilation2d:zR,div:ut,divNoNan:PR,dot:LR,dropout:fO,einsum:Ld,elu:Em,enclosingPowerOfTwo:hO,ensureShape:$V,equal:Xi,erf:J2,euclideanNorm:FR,exp:wa,expandDims:zs,expm1:BR,eye:eC,fft:qb,fill:zf,floor:Am,floorDiv:H2,fused:v9,gather:jm,gatherND:m9,greater:Ta,greaterEqual:Cc,ifft:cp,imag:Ob,image:bo,inTopKAsync:g9,irfft:mC,isFinite:UR,isInf:WR,isNaN:VR,leakyRelu:_b,less:ap,lessEqual:Gu,linalg:gO,linspace:_V,localResponseNormalization:qR,log:qa,log1p:Db,logSigmoid:GR,logSoftmax:nC,logSumExp:zb,logicalAnd:ko,logicalNot:Pb,logicalOr:rC,logicalXor:HR,losses:E9,lowerBound:zV,matMul:zt,max:yi,maxPool:Lb,maxPool3d:KR,maxPoolWithArgmax:PV,maximum:Nl,mean:Qn,meshgrid:LV,min:sp,minimum:Du,mirrorPad:XR,mod:YR,moments:Mb,movingAverage:f9,mul:oe,multiRNNCell:MV,multinomial:FV,neg:zn,norm:Im,notEqual:gf,oneHot:ip,ones:ma,onesLike:Ga,op:ne,outerProduct:BV,pad:kc,pad1d:UV,pad2d:WV,pad3d:VV,pad4d:qV,pool:QR,pow:ml,prelu:Bb,print:fR,prod:ZR,raggedGather:GV,raggedRange:HV,raggedTensorToTensor:KV,rand:XV,randomGamma:ZV,randomNormal:iC,randomStandardNormal:JV,randomUniform:Hu,randomUniformInt:e9,range:yf,real:op,reciprocal:nO,relu:Ro,relu6:oC,reshape:le,reverse:wi,reverse1d:t9,reverse2d:n9,reverse3d:r9,reverse4d:s9,rfft:Gb,round:lC,rsqrt:cC,scalar:gt,scatterND:h9,searchSorted:sC,selu:uC,separableConv2d:dC,setdiff1dAsync:a9,sigmoid:vo,sign:rO,signal:T9,sin:fC,sinh:hC,slice:Gt,slice1d:Ub,slice2d:pC,slice3d:Wb,slice4d:lp,softmax:Vb,softplus:Pf,spaceToBatchND:Fb,sparse:I9,sparseToDense:p9,spectral:N9,split:ya,sqrt:ns,square:Sn,squaredDifference:gC,squeeze:Ku,stack:Sa,step:Lf,stridedSlice:sO,string:A9,sub:tt,sum:nt,tan:aO,tanh:_u,tensor:Ki,tensor1d:Ls,tensor2d:Xh,tensor3d:iO,tensor4d:i9,tensor5d:o9,tensor6d:l9,tensorScatterUpdate:c9,tile:fi,topk:lO,transpose:Ut,truncatedNormal:bC,unique:cO,unsortedSegmentSum:xC,unstack:Si,upperBound:u9,variable:uO,where:ms,whereAsync:dO,zeros:Tr,zerosLike:Ht},Symbol.toStringTag,{value:"Module"}));const mve=(t,e,n,r=vs)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(P("a",t,e,n),P("b",t,e,n))];case"AddN":return[r.addN(P("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(P("a",t,e,n),P("b",t,e,n))];case"Mul":return[r.mul(P("a",t,e,n),P("b",t,e,n))];case"RealDiv":case"Div":return[r.div(P("a",t,e,n),P("b",t,e,n))];case"DivNoNan":return[r.divNoNan(P("a",t,e,n),P("b",t,e,n))];case"FloorDiv":return[r.floorDiv(P("a",t,e,n),P("b",t,e,n))];case"Sub":return[r.sub(P("a",t,e,n),P("b",t,e,n))];case"Minimum":return[r.minimum(P("a",t,e,n),P("b",t,e,n))];case"Maximum":return[r.maximum(P("a",t,e,n),P("b",t,e,n))];case"Pow":return[r.pow(P("a",t,e,n),P("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(P("a",t,e,n),P("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const gve=(t,e,n,r=vs)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(P("x",t,e,n))];case"Acos":return[r.acos(P("x",t,e,n))];case"Acosh":return[r.acosh(P("x",t,e,n))];case"Asin":return[r.asin(P("x",t,e,n))];case"Asinh":return[r.asinh(P("x",t,e,n))];case"Atan":return[r.atan(P("x",t,e,n))];case"Atan2":return[r.atan2(P("x",t,e,n),P("y",t,e,n))];case"Atanh":return[r.atanh(P("x",t,e,n))];case"Ceil":return[r.ceil(P("x",t,e,n))];case"Complex":return[r.complex(P("real",t,e,n),P("imag",t,e,n))];case"Cos":return[r.cos(P("x",t,e,n))];case"Cosh":return[r.cosh(P("x",t,e,n))];case"Elu":return[r.elu(P("x",t,e,n))];case"Erf":return[r.erf(P("x",t,e,n))];case"Exp":return[r.exp(P("x",t,e,n))];case"Expm1":return[r.expm1(P("x",t,e,n))];case"Floor":return[r.floor(P("x",t,e,n))];case"Log":return[r.log(P("x",t,e,n))];case"Log1p":return[r.log1p(P("x",t,e,n))];case"Imag":return[r.imag(P("x",t,e,n))];case"Neg":return[r.neg(P("x",t,e,n))];case"Reciprocal":return[r.reciprocal(P("x",t,e,n))];case"Real":return[r.real(P("x",t,e,n))];case"Relu":return[r.relu(P("x",t,e,n))];case"Round":return[r.round(P("x",t,e,n))];case"Selu":return[r.selu(P("x",t,e,n))];case"Sigmoid":return[r.sigmoid(P("x",t,e,n))];case"Sin":return[r.sin(P("x",t,e,n))];case"Sign":return[r.sign(P("x",t,e,n))];case"Sinh":return[r.sinh(P("x",t,e,n))];case"Softplus":return[r.softplus(P("x",t,e,n))];case"Sqrt":return[r.sqrt(P("x",t,e,n))];case"Square":return[r.square(P("x",t,e,n))];case"Tanh":return[r.tanh(P("x",t,e,n))];case"Tan":return[r.tan(P("x",t,e,n))];case"ClipByValue":return[r.clipByValue(P("x",t,e,n),P("clipValueMin",t,e,n),P("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(P("x",t,e,n))];case"Rsqrt":return[r.rsqrt(hs(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(P("x",t,e,n),P("alpha",t,e,n))];case"Prelu":return[r.prelu(P("x",t,e,n),P("alpha",t,e,n))];case"IsNan":return[r.isNaN(hs(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(hs(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(hs(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function Wi(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){q(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],a=e[r];q(s<0||a<0||s===a,()=>n+` Shapes ${t} and ${e} must match`)}}}function VL(t){return!(typeof t=="number"||t.some(e=>e<0))}function ry(t,e,n){let r=Sj(t,n);const s=!VL(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(a=>{r=Sj(a.shape,r)}),!VL(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Sj(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],a=e[r];if(s>=0&&a>=0&&s!==a)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:a}return n}class yve{constructor(e,n,r,s,a,i,o){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=a,this.dynamicSize=i,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=gt(0),Dr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Wi(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,Dr(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return Ki([],[0].concat(this.elementShape));const r=this.readMany(e);return Wi(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Sa(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Ki([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return Wi(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),mr(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Si(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const a=r===0?0:n.size/r,i=[];me(()=>{n=le(n,[1,r,a]);for(let l=0;l<e.length;++l){const f=[0,l===0?0:s[l-1],0],p=[1,e[l],a];i[l]=le(Gt(n,f,p),this.elementShape)}return i});const o=[];for(let l=0;l<e.length;l++)o[l]=l;this.writeMany(o,i)}}class vf{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(a=>{if(r!==a.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${a.dtype}`);Wi(n,a.shape,"TensorList shape mismatch: "),Dr(a)}),this.idTensor=gt(0),this.maxNumElements=s,Dr(this.idTensor)}copy(){return new vf([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Wi(e,this.elementShape,"TensorList shape mismatch: ");const s=ry(this.elementShape,this.tensors,e);return me(()=>{const a=this.tensors.map(i=>le(i,s));return Sa(a,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=ry(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,Wi(s.shape,e,"TensorList shape mismatch: "),le(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Wi(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Dr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new vf([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Wi(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=ry(this.elementShape,this.tensors,n);return le(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Wi(this.elementShape,n.shape,"TensorList shape mismatch: "),Dr(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Wi(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=ry(this.elementShape,this.tensors,r);return e.length===0?Ki([],[0].concat(s)):me(()=>{const a=e.map(i=>le(this.tensors[i],s));return Sa(a,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Wi(this.elementShape,n,"TensorList shape mismatch: ");const r=ry(this.elementShape,this.tensors,n);return this.size()===0?Ki([],[0].concat(r)):me(()=>{const s=this.tensors.map(a=>le(a,r));return mr(s,0)})}}function bve(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);Wi(s,e,"TensorList shape mismatch: ");const a=Si(t);return new vf(a,e,r)}function xve(t,e,n,r){return new vf([],t,e,r)}function vve(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const a=new vf([],n,t.dtype,r),i=Si(t,0);return e.forEach((o,l)=>{a.setItem(o,i[l])}),a}function wve(t,e,n){let r=0;const s=e.map(f=>(r+=f,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const a=t.shape.slice(1),i=Sj(a,n),o=r===0?0:t.size/r,l=me(()=>{const f=[];t=le(t,[1,r,o]);for(let p=0;p<e.length;++p){const y=[0,p===0?0:s[p-1],0],b=[1,e[p],o];f[p]=le(Gt(t,y,b),i)}return t.dispose(),f}),c=new vf([],n,t.dtype,e.length);for(let f=0;f<l.length;f++)c.setItem(f,l[f]);return c}const Sve=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=P("thenBranch",t,e,n),s=P("elseBranch",t,e,n),a=P("cond",t,e,n),i=P("args",t,e,n);return(await a.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=P("body",t,e,n),s=P("cond",t,e,n),a=P("args",t,e,n),i=await n.functionMap[s].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap),o=a.map(f=>f.id);let l=await i[0].data();i.forEach(f=>{!f.kept&&o.indexOf(f.id)===-1&&f.dispose()});let c=a;for(;l[0];){const f=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const p=c.map(y=>y.id);f.forEach(y=>{!y.kept&&o.indexOf(y.id)===-1&&p.indexOf(y.id)===-1&&y.dispose()});const m=await n.functionMap[s].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await m[0].data(),m.forEach(y=>{!y.kept&&o.indexOf(y.id)===-1&&p.indexOf(y.id)===-1&&y.dispose()})}return c}case"LoopCond":{const r=P("pred",t,e,n);return[Yl(r)]}case"Switch":{const r=P("pred",t,e,n);let s=P("data",t,e,n);return s.kept||(s=Yl(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>hs(s,e,n)!==void 0);if(r){const s=hs(r,e,n);return[Yl(s)]}return}case"Enter":{const r=P("frameName",t,e,n),s=P("tensor",t,e,n);return n.enterFrame(r),[Yl(s)]}case"Exit":{const r=P("tensor",t,e,n);return n.exitFrame(),[Yl(r)]}case"NextIteration":{const r=P("tensor",t,e,n);return n.nextIteration(),[Yl(r)]}case"TensorArrayV3":{const r=P("size",t,e,n),s=P("dtype",t,e,n),a=P("elementShape",t,e,n),i=P("dynamicSize",t,e,n),o=P("clearAfterRead",t,e,n),l=P("identicalElementShapes",t,e,n),c=P("name",t,e,n),f=new yve(c,s,r,a,l,i,o);return n.addTensorArray(f),[f.idTensor,gt(1)]}case"TensorArrayWriteV3":{const r=P("tensorArrayId",t,e,n),s=P("index",t,e,n),a=P("tensor",t,e,n),i=n.getTensorArray(r.id);return i.write(s,a),[i.idTensor]}case"TensorArrayReadV3":{const r=P("tensorArrayId",t,e,n),s=P("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=P("tensorArrayId",t,e,n),s=P("indices",t,e,n),a=P("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,a)]}case"TensorArrayScatterV3":{const r=P("tensorArrayId",t,e,n),s=P("indices",t,e,n),a=P("tensor",t,e,n),i=n.getTensorArray(r.id);return i.scatter(s,a),[i.idTensor]}case"TensorArrayConcatV3":{const r=P("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),a=P("dtype",t,e,n);return[s.concat(a)]}case"TensorArraySplitV3":{const r=P("tensorArrayId",t,e,n),s=P("tensor",t,e,n),a=P("lengths",t,e,n),i=n.getTensorArray(r.id);return i.split(a,s),[i.idTensor]}case"TensorArraySizeV3":{const r=P("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[gt(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=P("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=P("tensorListId",t,e,n),s=P("index",t,e,n),a=P("tensor",t,e,n),i=n.getTensorList(r.id);return i.setItem(s,a),[i.idTensor]}case"TensorListGetItem":{const r=P("tensorListId",t,e,n),s=P("index",t,e,n),a=P("elementShape",t,e,n),i=P("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,a,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=P("indices",t,e,n),s=P("tensor",t,e,n),a=P("elementShape",t,e,n),i=P("numElements",t,e,n),o=vve(s,r,a,i);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=P("elementShape",t,e,n),s=P("elementDType",t,e,n);let a;t.op==="TensorListReserve"?a="numElements":a="maxNumElements";const i=P(a,t,e,n),o=t.op==="TensorListReserve"?-1:i,l=xve(r,s,i,o);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=P("tensorListId",t,e,n),s=P("indices",t,e,n),a=P("elementShape",t,e,n),i=P("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,i,a)]}case"TensorListStack":{const r=P("tensorListId",t,e,n),s=P("elementShape",t,e,n),a=P("elementDType",t,e,n),i=P("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,a,i)]}case"TensorListFromTensor":{const r=P("tensor",t,e,n),s=P("elementShape",t,e,n),a=P("elementDType",t,e,n),i=bve(r,s,a);return n.addTensorList(i),[i.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=P("tensorListId",t,e,n),s=n.getTensorList(r.id),a=P("dtype",t,e,n),i=P("elementShape",t,e,n);return[s.concat(a,i)]}case"TensorListPushBack":{const r=P("tensorListId",t,e,n),s=P("tensor",t,e,n),a=n.getTensorList(r.id);return a.pushBack(s),[a.idTensor]}case"TensorListPopBack":{const r=P("tensorListId",t,e,n),s=P("elementShape",t,e,n),a=P("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,a)]}case"TensorListSplit":{const r=P("tensor",t,e,n),s=P("elementShape",t,e,n),a=P("lengths",t,e,n),i=wve(r,a,s);return n.addTensorList(i),[i.idTensor]}case"TensorListLength":{const r=P("tensorListId",t,e,n),s=n.getTensorList(r.id);return[gt(s.size(),"int32")]}case"TensorListResize":{const r=P("tensorListId",t,e,n),s=P("size",t,e,n),i=n.getTensorList(r.id).resize(s);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};function qL(t,e,n){const[r,s]=P("fusedOps",t,e,n),a=r==="biasadd",i=!a,o=s==="prelu",l=r==="fusedbatchnorm",c=P("numArgs",t,e,n);if(a){if(o&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&a&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const f=P("strides",t,e,n),p=U1(t,e,n),m=P("dataFormat",t,e,n).toUpperCase(),y=P("dilations",t,e,n);let[b,v]=P("args",t,e,n);i&&(v=b,b=void 0);const x=P("leakyreluAlpha",t,e,n);return{stride:f,pad:p,dataFormat:m,dilations:y,biasArg:b,preluArg:v,activationFunc:s,leakyreluAlpha:x}}const Cve=(t,e,n,r=vs)=>{switch(t.op){case"Conv1D":{const s=P("stride",t,e,n),a=P("pad",t,e,n),i=P("dataFormat",t,e,n).toUpperCase(),o=P("dilation",t,e,n);return[r.conv1d(P("x",t,e,n),P("filter",t,e,n),s,a,i,o)]}case"Conv2D":{const s=P("strides",t,e,n),a=U1(t,e,n),i=P("dataFormat",t,e,n).toUpperCase(),o=P("dilations",t,e,n);return[r.conv2d(P("x",t,e,n),P("filter",t,e,n),[s[1],s[2]],a,i,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:s,pad:a,dataFormat:i,dilations:o,biasArg:l,preluArg:c,activationFunc:f,leakyreluAlpha:p}=qL(t,e,n);return[r.fused.conv2d({x:P("x",t,e,n),filter:P("filter",t,e,n),strides:[s[1],s[2]],pad:a,dataFormat:i,dilations:[o[1],o[2]],bias:l,activation:f,preluActivationWeights:c,leakyreluAlpha:p})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:a,dataFormat:i,dilations:o,biasArg:l,preluArg:c,activationFunc:f,leakyreluAlpha:p}=qL(t,e,n);return[r.fused.depthwiseConv2d({x:P("x",t,e,n),filter:P("filter",t,e,n),strides:[s[1],s[2]],pad:a,dataFormat:i,dilations:[o[1],o[2]],bias:l,activation:f,preluActivationWeights:c,leakyreluAlpha:p})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=P("outputShape",t,e,n),a=P("strides",t,e,n),i=U1(t,e,n);return[r.conv2dTranspose(P("x",t,e,n),P("filter",t,e,n),s,[a[1],a[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=P("strides",t,e,n),a=U1(t,e,n),i=P("dilations",t,e,n),o=P("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(P("input",t,e,n),P("filter",t,e,n),[s[1],s[2]],a,o,[i[1],i[2]])]}case"Conv3D":{const s=P("strides",t,e,n),a=P("pad",t,e,n),i=P("dataFormat",t,e,n).toUpperCase(),o=P("dilations",t,e,n);return[r.conv3d(P("x",t,e,n),P("filter",t,e,n),[s[1],s[2],s[3]],a,i,[o[1],o[2],o[3]])]}case"AvgPool":{const s=P("strides",t,e,n),a=P("pad",t,e,n),i=P("kernelSize",t,e,n);return[r.avgPool(P("x",t,e,n),[i[1],i[2]],[s[1],s[2]],a)]}case"MaxPool":{const s=P("strides",t,e,n),a=P("pad",t,e,n),i=P("kernelSize",t,e,n);return[r.maxPool(P("x",t,e,n),[i[1],i[2]],[s[1],s[2]],a)]}case"MaxPoolWithArgmax":{const s=P("strides",t,e,n),a=P("pad",t,e,n),i=P("kernelSize",t,e,n),o=P("includeBatchInIndex",t,e,n),{result:l,indexes:c}=r.maxPoolWithArgmax(P("x",t,e,n),[i[1],i[2]],[s[1],s[2]],a,o);return[l,c]}case"AvgPool3D":{const s=P("strides",t,e,n),a=P("pad",t,e,n),i=P("kernelSize",t,e,n);return[r.avgPool3d(P("x",t,e,n),[i[1],i[2],i[3]],[s[1],s[2],s[3]],a)]}case"MaxPool3D":{const s=P("strides",t,e,n),a=P("pad",t,e,n),i=P("kernelSize",t,e,n);return[r.maxPool3d(P("x",t,e,n),[i[1],i[2],i[3]],[s[1],s[2],s[3]],a)]}case"Dilation2D":{const s=P("strides",t,e,n),a=P("pad",t,e,n),i=P("dilations",t,e,n),o=s[1],l=s[2],c=i[1],f=i[2];return[r.dilation2d(P("x",t,e,n),P("filter",t,e,n),[o,l],a,[c,f],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};const kve=(t,e,n,r=vs)=>{switch(t.op){case"Fill":{const s=P("shape",t,e,n),a=P("dtype",t,e,n),i=P("value",t,e,n);return[r.fill(s,i,a)]}case"LinSpace":{const s=P("start",t,e,n),a=P("stop",t,e,n),i=P("num",t,e,n);return[r.linspace(s,a,i)]}case"Multinomial":{const s=P("logits",t,e,n),a=P("numSamples",t,e,n),i=P("seed",t,e,n);return[r.multinomial(s,a,i)]}case"OneHot":{const s=P("indices",t,e,n),a=P("depth",t,e,n),i=P("onValue",t,e,n),o=P("offValue",t,e,n),l=P("dtype",t,e,n);return[r.oneHot(s,a,i,o,l)]}case"Ones":return[r.ones(P("shape",t,e,n),P("dtype",t,e,n))];case"OnesLike":return[r.onesLike(P("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(P("shape",t,e,n),P("dtype",t,e,n),P("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(P("shape",t,e,n),P("minval",t,e,n),P("maxval",t,e,n),P("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(P("shape",t,e,n),P("minval",t,e,n),P("maxval",t,e,n),P("seed",t,e,n))];case"Range":{const s=P("start",t,e,n),a=P("stop",t,e,n),i=P("step",t,e,n);return[r.range(s,a,i,P("dtype",t,e,n))]}case"TruncatedNormal":{const s=P("shape",t,e,n),a=P("mean",t,e,n),i=P("stdDev",t,e,n),o=P("seed",t,e,n);return[r.truncatedNormal(s,a,i,P("dtype",t,e,n),o)]}case"Zeros":return[r.zeros(P("shape",t,e,n),P("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(P("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function DE(t,e,n){const r=P("boxes",t,e,n),s=P("scores",t,e,n),a=P("maxOutputSize",t,e,n),i=P("iouThreshold",t,e,n),o=P("scoreThreshold",t,e,n),l=P("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:a,iouThreshold:i,scoreThreshold:o,softNmsSigma:l}}const Nve=async(t,e,n,r,s=vs)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:a,scores:i,maxOutputSize:o,iouThreshold:l,scoreThreshold:c,softNmsSigma:f}=DE(t,e,n),p=await s.image.nonMaxSuppressionWithScoreAsync(a,i,o,l,c,f);return[p.selectedIndices,p.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:a,scores:i,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=DE(t,e,n),f=P("padToMaxOutputSize",t,e,n),p=await s.image.nonMaxSuppressionPaddedAsync(a,i,o,l,c,f);return[p.selectedIndices,p.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:a,scores:i,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=DE(t,e,n);return[await s.image.nonMaxSuppressionAsync(a,i,o,l,c)]}case"Where":{const a=s.cast(P("condition",t,e,n),"bool"),i=[await s.whereAsync(a)];return a.dispose(),i}case"ListDiff":return s.setdiff1dAsync(P("x",t,e,n),P("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};const Tve=(t,e,n,r=vs)=>{switch(t.op){case"LowerBound":{const s=P("sortedSequence",t,e,n),a=P("values",t,e,n);return[r.lowerBound(s,a)]}case"TopKV2":{const s=P("x",t,e,n),a=P("k",t,e,n),i=P("sorted",t,e,n),o=r.topk(s,a,i);return[o.values,o.indices]}case"UpperBound":{const s=P("sortedSequence",t,e,n),a=P("values",t,e,n);return[r.upperBound(s,a)]}case"Unique":{const s=P("x",t,e,n),a=r.unique(s);return[a.values,a.indices]}case"UniqueV2":{const s=P("x",t,e,n),a=P("axis",t,e,n),i=r.unique(s,a);return[i.values,i.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};const Eve=(t,e,n,r=vs)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=P("default",t,e,n);return[hs(t.name,e,n)||s];case"Placeholder":return[hs(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const f=P("x",t,e,n);return[Yl(f)]}case"IdentityN":return P("x",t,e,n).map(f=>Yl(f));case"Snapshot":const a=P("x",t,e,n);return[Yl(a)];case"Shape":return[r.tensor1d(P("x",t,e,n).shape,"int32")];case"ShapeN":return P("x",t,e,n).map(f=>r.tensor1d(f.shape));case"Size":return[r.scalar(P("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(P("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const i=P("x",t,e,n),o=P("data",t,e,n),l=P("message",t,e,n),c=P("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let f=0;f<o.length;f++)console.log(Array.prototype.slice.call(o[f].dataSync()).slice(0,c));return[i];default:throw TypeError(`Node type ${t.op} is not implemented`)}};class Ive{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=gt(0),this.tensorMap=new Map,Dr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return gt(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),me(()=>{const s=Si(n),a=r.length,i=s.length;q(a===i,()=>`The number of elements doesn't match, keys has ${a} elements, the values has ${i} elements.`);for(let o=0;o<a;o++){const l=r[o],c=s[o];Dr(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return me(()=>{const s=[];for(let a=0;a<r.length;a++){const i=r[a],o=this.findWithDefault(i,n);s.push(o)}return Sa(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}const Ave=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const a=P("keyDType",t,e,n),i=P("valueDType",t,e,n),o=new Ive(a,i);return r.addHashTable(t.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=P("tableHandle",t,e,n,r),a=P("keys",t,e,n),i=P("values",t,e,n);return[await r.getHashTableById(s.id).import(a,i)]}case"LookupTableFind":case"LookupTableFindV2":{const s=P("tableHandle",t,e,n,r),a=P("keys",t,e,n),i=P("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(a,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=P("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};const jve=(t,e,n,r=vs)=>{switch(t.op){case"ResizeBilinear":{const s=P("images",t,e,n),a=P("size",t,e,n),i=P("alignCorners",t,e,n),o=P("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[a[0],a[1]],i,o)]}case"ResizeNearestNeighbor":{const s=P("images",t,e,n),a=P("size",t,e,n),i=P("alignCorners",t,e,n),o=P("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[a[0],a[1]],i,o)]}case"CropAndResize":{const s=P("image",t,e,n),a=P("boxes",t,e,n),i=P("boxInd",t,e,n),o=P("cropSize",t,e,n),l=P("method",t,e,n),c=P("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,a,i,o,l,c)]}case"ImageProjectiveTransformV3":{const s=P("images",t,e,n),a=P("transforms",t,e,n),i=P("outputShape",t,e,n),o=P("fillValue",t,e,n),l=P("interpolation",t,e,n),c=P("fillMode",t,e,n);return[r.image.transform(s,a,l.toLowerCase(),c.toLowerCase(),o,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};const $ve=(t,e,n,r=vs)=>{switch(t.op){case"Equal":return[r.equal(P("a",t,e,n),P("b",t,e,n))];case"NotEqual":return[r.notEqual(P("a",t,e,n),P("b",t,e,n))];case"Greater":return[r.greater(P("a",t,e,n),P("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(P("a",t,e,n),P("b",t,e,n))];case"Less":return[r.less(P("a",t,e,n),P("b",t,e,n))];case"LessEqual":return[r.lessEqual(P("a",t,e,n),P("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(P("a",t,e,n),P("b",t,e,n))];case"LogicalNot":return[r.logicalNot(P("a",t,e,n))];case"LogicalOr":return[r.logicalOr(P("a",t,e,n),P("b",t,e,n))];case"Select":case"SelectV2":return[r.where(P("condition",t,e,n),P("a",t,e,n),P("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(P("a",t,e,n),P("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const Rve=(t,e,n,r=vs)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(P("a",t,e,n),P("b",t,e,n),P("transposeA",t,e,n),P("transposeB",t,e,n))];case"Einsum":return[r.einsum(P("equation",t,e,n),...P("tensors",t,e,n))];case"Transpose":return[r.transpose(P("x",t,e,n),P("perm",t,e,n))];case"_FusedMatMul":const[s,a]=P("fusedOps",t,e,n),i=s==="biasadd",o=a==="prelu",l=P("numArgs",t,e,n),c=P("leakyreluAlpha",t,e,n);if(i){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[f,p]=P("args",t,e,n);return[r.fused.matMul({a:P("a",t,e,n),b:P("b",t,e,n),transposeA:P("transposeA",t,e,n),transposeB:P("transposeB",t,e,n),bias:f,activation:a,preluActivationWeights:p,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(P("a",t,e,n),P("numLower",t,e,n),P("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const Ove=(t,e,n,r=vs)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(P("x",t,e,n),P("axis",t,e,n),P("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(P("x",t,e,n),P("mean",t,e,n),P("variance",t,e,n),P("offset",t,e,n),P("scale",t,e,n),P("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(P("x",t,e,n),P("mean",t,e,n),P("variance",t,e,n),P("offset",t,e,n),P("scale",t,e,n),P("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(P("x",t,e,n),P("radius",t,e,n),P("bias",t,e,n),P("alpha",t,e,n),P("beta",t,e,n))];case"Softmax":return[r.softmax(P("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(P("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const _ve=(t,e,n,r=vs)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:a}=r.raggedGather(P("paramsNestedSplits",t,e,n),P("paramsDenseValues",t,e,n),P("indices",t,e,n),P("outputRaggedRank",t,e,n));return s.concat(a)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:a}=r.raggedRange(P("starts",t,e,n),P("limits",t,e,n),P("splits",t,e,n));return[s,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(P("shape",t,e,n),P("values",t,e,n),P("defaultValue",t,e,n),P("rowPartitionTensors",t,e,n),P("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const Dve=(t,e,n,r=vs)=>{switch(t.op){case"Max":{const o=P("axis",t,e,n),l=P("keepDims",t,e,n);return[r.max(P("x",t,e,n),o,l)]}case"Mean":{const o=P("axis",t,e,n),l=P("keepDims",t,e,n);return[r.mean(P("x",t,e,n),o,l)]}case"Min":{const o=P("axis",t,e,n),l=P("keepDims",t,e,n);return[r.min(P("x",t,e,n),o,l)]}case"Sum":{const o=P("axis",t,e,n),l=P("keepDims",t,e,n);return[r.sum(P("x",t,e,n),o,l)]}case"All":{const o=P("axis",t,e,n),l=P("keepDims",t,e,n);return[r.all(P("x",t,e,n),o,l)]}case"Any":{const o=P("axis",t,e,n),l=P("keepDims",t,e,n);return[r.any(P("x",t,e,n),o,l)]}case"ArgMax":{const o=P("axis",t,e,n);return[r.argMax(P("x",t,e,n),o)]}case"ArgMin":{const o=P("axis",t,e,n);return[r.argMin(P("x",t,e,n),o)]}case"Prod":{const o=P("axis",t,e,n),l=P("keepDims",t,e,n);return[r.prod(P("x",t,e,n),o,l)]}case"Cumprod":{const o=P("axis",t,e,n),l=P("exclusive",t,e,n),c=P("reverse",t,e,n);return[r.cumprod(P("x",t,e,n),o,l,c)]}case"Cumsum":{const o=P("axis",t,e,n),l=P("exclusive",t,e,n),c=P("reverse",t,e,n);return[r.cumsum(P("x",t,e,n),o,l,c)]}case"Bincount":const s=P("x",t,e,n),a=P("weights",t,e,n),i=P("size",t,e,n);return[r.bincount(s,a,i)];case"DenseBincount":{const o=P("x",t,e,n),l=P("weights",t,e,n),c=P("size",t,e,n),f=P("binaryOutput",t,e,n);return[r.denseBincount(o,l,c,f)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};const zve=(t,e,n,r=vs)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=P("n",t,e,n),a=P("axis",t,e,n);let i=P("tensors",t,e,n);return i=i.slice(0,s),[r.concat(i,a)]}case"Gather":{const s=P("x",t,e,n),a=P("indices",t,e,n);return[r.gather(s,r.cast(a,"int32"),0)]}case"GatherV2":{const s=P("axis",t,e,n),a=P("batchDims",t,e,n),i=P("x",t,e,n),o=P("indices",t,e,n);return[r.gather(i,r.cast(o,"int32"),s,a)]}case"Reverse":{const s=P("dims",t,e,n),a=[];for(let o=0;o<s.length;o++)s[o]&&a.push(o);const i=P("x",t,e,n);return[r.reverse(i,a)]}case"ReverseV2":{const s=P("axis",t,e,n),a=P("x",t,e,n);return[r.reverse(a,s)]}case"Slice":{const s=P("begin",t,e,n),a=P("size",t,e,n);return[r.slice(P("x",t,e,n),s,a)]}case"StridedSlice":{const s=P("begin",t,e,n),a=P("end",t,e,n),i=P("strides",t,e,n),o=P("beginMask",t,e,n),l=P("endMask",t,e,n),c=P("ellipsisMask",t,e,n),f=P("newAxisMask",t,e,n),p=P("shrinkAxisMask",t,e,n),m=P("x",t,e,n);return[r.stridedSlice(m,s,a,i,o,l,c,f,p)]}case"Pack":return me(()=>{const s=P("axis",t,e,n),a=P("tensors",t,e,n),i=a[0].shape,o=r.squeeze(a[0]).shape,l=a.map(c=>{const f=Ft(c.shape,i);if(!f&&!Ft(r.squeeze(c).shape,o))throw new Error("the input tensors shape does not match");return f?c:r.reshape(c,i)});return[r.stack(l,s)]});case"Unpack":{const s=P("axis",t,e,n),a=P("tensor",t,e,n);return r.unstack(a,s)}case"Tile":{const s=P("reps",t,e,n);return[r.tile(P("x",t,e,n),s)]}case"Split":case"SplitV":{const s=P("axis",t,e,n),a=P("numOrSizeSplits",t,e,n),i=P("x",t,e,n);return r.split(i,a,s)}case"ScatterNd":{const s=P("indices",t,e,n),a=P("values",t,e,n),i=P("shape",t,e,n);return[r.scatterND(s,a,i)]}case"GatherNd":{const s=P("x",t,e,n),a=P("indices",t,e,n);return[r.gatherND(s,a)]}case"SparseToDense":{const s=P("sparseIndices",t,e,n),a=P("outputShape",t,e,n),i=P("sparseValues",t,e,n),o=P("defaultValue",t,e,n);return[r.sparseToDense(s,i,a,i.dtype===o.dtype?o:r.cast(o,i.dtype))]}case"TensorScatterUpdate":{const s=P("indices",t,e,n),a=P("values",t,e,n),i=P("tensor",t,e,n);return[r.tensorScatterUpdate(i,s,a)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};const Pve=(t,e,n,r=vs)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:a,emptyRowIndicator:i,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(P("indices",t,e,n),P("values",t,e,n),P("denseShape",t,e,n),P("defaultValue",t,e,n));return[s,a,i,o]}case"SparseReshape":{const{outputIndices:s,outputShape:a}=r.sparse.sparseReshape(P("inputIndices",t,e,n),P("inputShape",t,e,n),P("newShape",t,e,n));return[s,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(P("data",t,e,n),P("indices",t,e,n),P("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(P("data",t,e,n),P("indices",t,e,n),P("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const Lve=(t,e,n,r=vs)=>{switch(t.op){case"FFT":return[r.fft(P("x",t,e,n))];case"IFFT":return[r.ifft(P("x",t,e,n))];case"RFFT":return[r.rfft(P("x",t,e,n))];case"IRFFT":return[r.irfft(P("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const Mve=(t,e,n,r=vs)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(P("input",t,e,n),P("pattern",t,e,n),P("rewrite",t,e,n),P("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:a}=r.string.stringNGrams(P("data",t,e,n),P("dataSplits",t,e,n),P("separator",t,e,n),P("nGramWidths",t,e,n),P("leftPad",t,e,n),P("rightPad",t,e,n),P("padWidth",t,e,n),P("preserveShortSequences",t,e,n));return[s,a]}case"StringSplit":{const{indices:s,values:a,shape:i}=r.string.stringSplit(P("input",t,e,n),P("delimiter",t,e,n),P("skipEmpty",t,e,n));return[s,a,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(P("input",t,e,n),P("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};const Fve=(t,e,n,r=vs)=>{switch(t.op){case"Cast":return[r.cast(P("x",t,e,n),P("dtype",t,e,n))];case"ExpandDims":{const s=P("axis",t,e,n);return[r.expandDims(P("x",t,e,n),s)]}case"Squeeze":{const s=P("axis",t,e,n);return[r.squeeze(P("x",t,e,n),s)]}case"Reshape":return[r.reshape(P("x",t,e,n),P("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(P("x",t,e,n),P("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(P("x",t,e,n),P("padding",t,e,n),P("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(P("x",t,e,n),P("padding",t,e,n),P("constantValue",t,e,n))];case"SpaceToBatchND":{const s=P("blockShape",t,e,n),a=P("paddings",t,e,n);return[r.spaceToBatchND(P("x",t,e,n),s,a)]}case"BatchToSpaceND":{const s=P("blockShape",t,e,n),a=P("crops",t,e,n);return[r.batchToSpaceND(P("x",t,e,n),s,a)]}case"DepthToSpace":{const s=P("blockSize",t,e,n),a=P("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(P("x",t,e,n),s,a)]}case"BroadcastTo":return[r.broadcastTo(P("x",t,e,n),P("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(P("s0",t,e,n),P("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function GL(t,e,n,r,s=me){const a=((i,o,l)=>{switch(i.category){case"arithmetic":return s(()=>mve(i,o,l));case"basic_math":return s(()=>gve(i,o,l));case"control":return Sve(i,o,l);case"convolution":return s(()=>Cve(i,o,l));case"creation":return s(()=>kve(i,o,l));case"dynamic":return Nve(i,o,l);case"evaluation":return s(()=>Tve(i,o,l));case"image":return s(()=>jve(i,o,l));case"graph":return s(()=>Eve(i,o,l));case"logical":return s(()=>$ve(i,o,l));case"matrices":return s(()=>Rve(i,o,l));case"normalization":return s(()=>Ove(i,o,l));case"ragged":return s(()=>_ve(i,o,l));case"reduction":return s(()=>Dve(i,o,l));case"slice_join":return s(()=>zve(i,o,l));case"sparse":return s(()=>Pve(i,o,l));case"spectral":return s(()=>Lve(i,o,l));case"string":return s(()=>Mve(i,o,l));case"transformation":return s(()=>Fve(i,o,l));case"hash_table":return Ave(i,o,l,r);case"custom":const c=_G(i.op);if(c&&c.customExecutor)return c.customExecutor(new pve(i,o,l));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return $u(a)?a.then(i=>[].concat(i)):[].concat(a)}class HL{constructor(e={},n={},r={},s={},a){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}function KL(t,e,n,r){const s=new Set,a=[];let i=null,o=null;const l=new Set,c=new Set(Object.keys(t).map(m=>Pa(m)[0]));r=r||[];const f=new Set(r.map(m=>Pa(m.name)[0])),p=[...e];for(;p.length>0;){const m=p.pop();if((Fd(m)||Kve(m)||Xve(m))&&i==null&&(i=m,o=i.children.map(y=>y.name).filter(y=>s.has(y))),s.add(m.name),n[m.name]==null&&!c.has(m.name)&&!f.has(m.name)){if(m.inputs.length===0){a.push(m.name);continue}m.inputs.forEach(y=>{l.has(y.name)||(l.add(y.name),p.push(y))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:a,dynamicNode:i,syncInputs:o}}function Bve(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(x=>Pa(x)[0]).map(x=>t.nodes[x]),a=t.initNodes||[],i=x=>n.has(typeof x=="string"?x:x.name);function o(x){return[...new Map(x.map(S=>[S.name,S])).values()]}const l=o([...s,...t.weights,...a]).filter(i),c=o([...l,...Object.values(t.nodes)]).filter(i),f=new Map(c.map(x=>[x.name,x])),p={};for(const x of c){p[x.name]=p[x.name]||0;for(const S of x.children)i(S)||(p[S.name]=Number.POSITIVE_INFINITY),p[S.name]=(p[S.name]||0)+1}const m=Object.entries(p).filter(([,x])=>x===0).map(([x])=>x),y=[...m];for(;m.length>0;){const x=m.pop(),S=f.get(x);for(const C of S.children.filter(i))--p[C.name]===0&&(y.push(C.name),m.push(C.name))}const b=y.map(x=>f.get(x)),v=Uve(b,l);return Wve(v,l),v}function Uve(t,e){const n=new Map(t.map(i=>[i.name,i])),r=e.map(i=>i.name),s=new Set(r);for(;r.length>0;){const i=r.pop(),o=n.get(i);for(const l of o.children)!n.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return t.filter(i=>s.has(i.name))}class Qv extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function Wve(t,e){const n=new Map(t.map((o,l)=>[o.name,l])),r=new Set(e.map(o=>o.name)),s=o=>r.has(typeof o=="string"?o:o.name),a=new Set(t.map(o=>o.name)),i=o=>a.has(typeof o=="string"?o:o.name);for(const o of t){for(const l of o.children.filter(i)){if(!n.has(l.name))throw new Qv(`Child ${l.name} of node ${o.name} is unreachable.`);if(n.get(o.name)>n.get(l.name))throw new Qv(`Node ${o.name} is scheduled to run after its child ${l.name}.`)}if(!s(o))for(const l of o.inputs){if(!n.has(l.name))throw new Qv(`Input ${l.name} of node ${o.name} is unreachable.`);if(n.get(l.name)>n.get(o.name))throw new Qv(`Node ${o.name} is scheduled to run before its input ${l.name}.`)}}}function Vve(t){const e=new Map(t.map((o,l)=>[o.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((o,l)=>Fd(o)?n:l),s=o=>{const l=r[e.get(o.name)];return l??-1},a=t.map((o,l)=>o.children.map(s).reduce((c,f)=>Math.max(c,f),r[l])),i=new Map;for(let o=0;o<t.length;++o){const l=a[o];if(l===n)continue;const c=t[o],f=t[l];i.has(f.name)||i.set(f.name,[]),i.get(f.name).push(c)}return i}const qve=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Gve=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Hve=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Fd(t){return qve.has(t.op)}function Kve(t){return Gve.has(t.op)}function Xve(t){return Hve.has(t.op)}class Sw{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Sw(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(a=>a.name).sort(),s=n.map(a=>a.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=KL(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:a,syncInputs:i}=r;if(a!=null)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(s.length>0){const c=n.map(p=>p.name),f=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${f}]. Missing the following inputs: [${s}]`)}const o=Bve(this.graph,r),l=Vve(o);return{orderedNodes:o,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return Dr(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(m=>this.graph.nodes[Pa(m)[0]]),a=n.map(m=>Pa(m)[0]),i=new Set(a);let o=a.map(m=>this.graph.nodes[m]);o.length===0&&(o=this._outputs);const l=this.getCompilationKey(s,o);let c=this.compiledMap.get(l);c==null&&(c=this.compile(e,o),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=ye().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(m){this.keepIntermediateTensors=!1,console.warn(m.message)}const f={},p={};return me(()=>{const m=new HL(this.weightMap,f,p,this.functionExecutorMap,this.parseNodeNameCache),y=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(S=>{const[C,E]=Pa(S,m),k=[];k[E]=e[S],y[C]=k,this.keepIntermediateTensors&&(this.clonedTensorsMap[C]=this.cloneTensorList(k))});const b=this.getFrozenTensorIds(y),{orderedNodes:v,nodeLiveUntilMap:x}=c;for(const S of v){if(y[S.name])continue;const C=GL(S,y,m,this._resourceManager);if($u(C))throw new Error(`The execution of the op '${S.op}' returned a promise. Please use model.executeAsync() instead.`);y[S.name]=C,this.keepIntermediateTensors&&(this.clonedTensorsMap[S.name]=this.cloneTensorList(C)),this.checkTensorForDisposalWithNodeLiveUntilInfo(S,y,m,b,i,x.get(S.name))}return this.parent==null&&m.dispose(b),n.map(S=>hs(S,y,m))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,a,i,o){if(!(Fd(n)||i.has(e))){for(const l of r[e])l!=null&&(o[l.id]=(o[l.id]||0)+n.children.length);for(const l of n.inputs){if(Fd(l))continue;const c=BL(l.name,r,s);if(c!=null)for(const f of c){if(!f||f.kept||a.has(f.id))continue;const p=o[f.id];p===1?(f.dispose(),delete o[f.id]):p!=null&&o[f.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,a,i){function o(l){return Fd(l)||a.has(l.name)}if(!(Fd(e)||i==null))for(const l of i){if(o(l))continue;const c=BL(l.name,n,r);for(const f of c)!f||f.kept||s.has(f.id)||f.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},a={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=ye().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(m){this.keepIntermediateTensors=!1,console.warn(m.message)}const i=new HL(this.weightMap,s,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,i,n,r),l=n.map(m=>hs(m,o,i)),c=l.map(m=>m.id),f=Object.keys(e).map(m=>e[m].id),p=new Set([...c,...f,...this.weightIds]);return Object.values(o).forEach(m=>{m.forEach(y=>{y&&!y.isDisposed&&!p.has(y.id)&&y.dispose()})}),this.parent==null&&i.dispose(p),l}async executeFunctionAsync(e,n,r){const s=e.reduce((a,i,o)=>(a[this.inputs[o].name]=i,a),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const a=Object.keys(e),i=a.map(k=>this.graph.nodes[Pa(k)[0]]),o=r.map(k=>Pa(k)[0]),l=new Set(o);let c=o.map(k=>this.graph.nodes[k]);c.length===0&&(c=this._outputs);const{usedNodes:f,missingInputs:p,dynamicNode:m,syncInputs:y}=KL(e,c,this.weightMap,this._initNodes),b=[...i,...this.graph.weights,...this._initNodes||[]].map(k=>({node:k,contexts:n.currentContext})),v=Object.assign({},this.weightMap);Object.keys(e).forEach(k=>{const[I,$]=Pa(k),_=[];_[$]=e[k],v[I]=_});const x={},S=this.getFrozenTensorIds(v),C={};for(;b.length>0;){const k=this.processStack(i,b,n,v,C,S,l,x,f);await Promise.all(k)}m==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const E=c.filter(k=>!Fd(k)&&!hs(k.name,v,n)).map(k=>k.name);if(E.length>0){let k="";throw m!=null&&(k=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${y}]`),new Error(`Cannot compute the outputs [${E}] from the provided inputs [${a}]. Consider providing the following inputs: [${p}]. ${k}`)}return v}processStack(e,n,r,s,a,i,o,l,c){const f=[];for(;n.length>0;){const p=n.pop();r.currentContext=p.contexts;let m="";if(p.node.op==="Enter"&&P("isConstant",p.node,s,r)&&([m]=Xl(p.node.name,r)),s[p.node.name]==null){const y=GL(p.node,s,r,this._resourceManager);m||([m]=Xl(p.node.name,r));const b=r.currentContext;$u(y)?f.push(y.then(v=>(s[m]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[m]=this.cloneTensorList(v)),r.currentContext=b,this.checkTensorForDisposal(m,p.node,s,r,i,o,l),this.processChildNodes(p.node,n,r,s,a,c),v))):(s[m]=y,this.keepIntermediateTensors&&(this.clonedTensorsMap[m]=this.cloneTensorList(y)),this.checkTensorForDisposal(m,p.node,s,r,i,o,l),this.processChildNodes(p.node,n,r,s,a,c))}else this.processChildNodes(p.node,n,r,s,a,c)}return f}processChildNodes(e,n,r,s,a,i){e.children.forEach(o=>{const[l]=Xl(o.name,r);a[l]||!i.has(o.name)||(o.op==="Merge"?o.inputNames.some(c=>!!hs(c,s,r))&&(a[l]=!0,n.push({contexts:r.currentContext,node:o})):o.inputNames.every(c=>!!hs(c,s,r))&&(a[l]=!0,n.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=Pa(n),a=this.graph.nodes[s];if(a.attrParams.shape&&a.attrParams.shape.value){const i=a.attrParams.shape.value,o=i.length===r.shape.length&&r.shape.every((l,c)=>i[c]===-1||i[c]===l);q(o,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${i}], but was [${r.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&q(r.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const a in e){const i=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[a];i!=null?s[i.name]=e[a]:s[a]=e[a]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=Pa(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const a=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return a!=null?a.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=Pa(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class Yve{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}const Qve="?tfjs-format=file",Zve="model.json";class w_{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=NO){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Yve}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return $u(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await pV(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const a=this.artifacts.userDefinedMetadata;a.signature!=null&&(s=a.signature),a.structuredOutputKeys!=null&&(this.structuredOutputKeys=a.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new Sw(UL.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const a=UL.Instance.transformGraph(e.modelInitializer);this.initializer=new Sw(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof pn?[e]:e,r={};return n.forEach((s,a)=>r[this.structuredOutputKeys[a]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof pn)&&!Array.isArray(e)){const a=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(a!=null)for(const i in a){const o=a[i];o.resourceId!=null&&(e[i]=this.resourceIdToCapturedInput[o.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((a,i)=>{var o,l,c;const f=(c=(l=(o=this.signature)===null||o===void 0?void 0:o.inputs)===null||l===void 0?void 0:l[i])===null||c===void 0?void 0:c.resourceId;return f!=null?a[i]=this.resourceIdToCapturedInput[f]:a[i]=e[s++],a},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const a=r[s],i=n[a];this.resourceIdToCapturedInput[i.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Pt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function Jve(t,e={},n=NO){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=t1e(t));const r=new w_(t,e,n);return await r.load(),r}function e1e(t){if(t==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let e;if(t instanceof Array){const[r,s]=t;if(!r)throw new Error("modelJSON must be the first element of the array");if(!s||!(s instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");const a=cw(r.weightsManifest),i=uR(r,a,s);e=dw(i)}else if("load"in t)e=t;else if("modelTopology"in t&&"weightSpecs"in t&&"weightData"in t)e=dw(t);else throw new Error("Unknown model format");const n=new w_(e);return n.load(),n}function t1e(t){return t.endsWith("/")||(t=t+"/"),`${t}${Zve}${Qve}`}const n1e="4.22.0";const r1e=Object.freeze(Object.defineProperty({__proto__:null,GraphModel:w_,deregisterOp:Ixe,loadGraphModel:Jve,loadGraphModelSync:e1e,registerOp:Exe,version_converter:n1e},Symbol.toStringTag,{value:"Module"}));var XL;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(XL||(XL={}));function it(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&q(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}const s1e=vC;class qC extends PS{nextDataId(){return qC.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new X$(this,fo())}write(e,n,r){this.firstUse&&(this.firstUse=!1,ye().get("IS_NODE")&&ci(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&tl(r[0])){const a=r.map(i=>ol(i));s=this.write(a,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,a){this.data.set(e,{values:n,dtype:s,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),a=this.readSync(r.imag.dataId);return dc(s,a)}return qW(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>lc(s));return $t(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return $t(e.shape,e.dtype,n)}makeOutput(e,n,r){return fo().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Xs();return e(),{kernelMs:Xs()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){it([e],"where");const n=this.readSync(e.dataId);return s1e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}qC.nextDataId=0;function PG(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const a1e=t=>{const{x:e}=t.inputs,n=t.backend;it(e,"abs");let r=new Float32Array(Ee(e.shape));const s=n.data.get(e.dataId).values;return r=PG(s),n.makeOutput(r,e.shape,e.dtype)},i1e={kernelName:k0,backendName:"cpu",kernelFunc:a1e};function xr(t){return(e,n,r,s,a)=>{const i=At(e,n),o=i.length,l=pt(i),c=Ee(i),f=ts(a,c),p=e.length,m=n.length,y=pt(e),b=pt(n),v=mf(e,i),x=mf(n,i);if(v.length+x.length===0)for(let S=0;S<f.length;++S)f[S]=t(r[S%r.length],s[S%s.length]);else for(let S=0;S<f.length;++S){const C=_f(S,o,l),E=C.slice(-p);v.forEach(_=>E[_]=0);const k=xo(E,p,y),I=C.slice(-m);x.forEach(_=>I[_]=0);const $=xo(I,m,b);f[S]=t(r[k],s[$])}return[f,i]}}function La(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,a=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(s.shape,"float32",i)},o}const o1e={kernelName:GS,backendName:"cpu",kernelFunc:La};function Cw(t,e,n="float32"){if(n==="complex64"){const s=Cw(t,e,"float32"),a=Cw(t,e,"float32");return La({inputs:{real:s,imag:a},backend:t})}const r=gs(Ee(e),n);return t.makeTensorInfo(e,n,r)}function bl(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const l1e={kernelName:Yp,backendName:"cpu",kernelFunc:bl};function wf(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,a)}const c1e={kernelName:N2,backendName:"cpu",kernelFunc:wf};function LG(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=Uu([0],n),[a,i]=xr((o,l)=>o!==l?1:0)(e,[],t,s,"bool");return[i,"bool",a]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Fu(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:a}=r;if(a==="complex64"){if(s.dtype==="complex64")return bl({inputs:{x:s},backend:n});const f=Cw(n,s.shape,s.dtype),p=Fu({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),m=La({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}if(s.dtype==="complex64"){const f=wf({inputs:{input:s},backend:n}),p=Fu({inputs:{x:f},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(f),p}if(!Z$(s.dtype,a)){const f=bl({inputs:{x:s},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:a}}const i=n.data.get(s.dataId).values,[o,l,c]=LG(i,s.shape,s.dtype,a);return n.makeTensorInfo(o,l,c)}const u1e={kernelName:Pp,backendName:"cpu",kernelFunc:Fu};function Wr(t,e,n,r){return n==null?({inputs:s,backend:a})=>{const{a:i,b:o}=s,l=a;it([i,o],t);const c=l.data.get(i.dataId).values,f=l.data.get(o.dataId).values,p=i.dtype==="string"?fc(c):c,m=i.dtype==="string"?fc(f):f,y=r||i.dtype,[b,v]=e(i.shape,o.shape,p,m,y);return l.makeTensorInfo(v,y,b)}:({inputs:s,backend:a})=>{const{a:i,b:o}=s,l=a;if(i.dtype==="complex64"||o.dtype==="complex64"){const c=Fu({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),f=l.data.get(c.dataId),p=f.complexTensorInfos.real,m=f.complexTensorInfos.imag,y=l.data.get(p.dataId).values,b=l.data.get(m.dataId).values,v=Fu({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),x=l.data.get(v.dataId),S=x.complexTensorInfos.real,C=x.complexTensorInfos.imag,E=l.data.get(S.dataId).values,k=l.data.get(C.dataId).values,[I,$,_]=n(i.shape,o.shape,y,b,E,k),z=l.makeTensorInfo(_,"float32",I),L=l.makeTensorInfo(_,"float32",$),R=La({inputs:{real:z,imag:L},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(v),l.disposeIntermediateTensorInfo(z),l.disposeIntermediateTensorInfo(L),R}else{const c=l.data.get(i.dataId).values,f=l.data.get(o.dataId).values,p=r||i.dtype,[m,y]=e(i.shape,o.shape,c,f,p);return l.makeTensorInfo(y,p,m)}}}function S_(t){return(e,n,r,s,a,i)=>{const o=At(e,n),l=Ee(o),c=o.length,f=pt(o),p=ts("float32",l),m=ts("float32",l),y=mf(e,o),b=mf(n,o),v=dc(r,s),x=dc(a,i),S=e.length,C=pt(e),E=n.length,k=pt(n);if(y.length+b.length===0)for(let I=0;I<p.length;I++){const $=I%v.length,_=I%x.length,z=t(v[$*2],v[$*2+1],x[_*2],x[_*2+1]);p[I]=z.real,m[I]=z.imag}else for(let I=0;I<p.length;I++){const $=_f(I,c,f),_=$.slice(-S);y.forEach(U=>_[U]=0);const z=xo(_,S,C),L=$.slice(-E);b.forEach(U=>L[U]=0);const R=xo(L,E,k),D=t(v[z*2],v[z*2+1],x[R*2],x[R*2+1]);p[I]=D.real,m[I]=D.imag}return[p,m,o]}}const MG=xr(((t,e)=>t+e)),d1e=S_(((t,e,n,r)=>({real:t+n,imag:e+r}))),dp=Wr(Df,MG,d1e),f1e={kernelName:Df,backendName:"cpu",kernelFunc:dp};function C_(t,e,n,r,s){const a=Ee(r),i=gs(s,n);for(let o=0;o<t.length;o++){const l=t[o];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(a>0?i[l]+=e[o]:i[l]+=1)}return i}function FG(t,e,n,r=!1){const s=t.shape[0],a=t.shape[1],i=$t([s,n],e.dtype);for(let o=0;o<s;o++)for(let l=0;l<a;l++){const c=t.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?i.set(1,o,c):e.size>0?i.set(i.get(o,c)+e.get(o,l),o,c):i.set(i.get(o,c)+1,o,c))}return i}const BG=xr(((t,e)=>t&e)),h1e=Wr(R0,BG),p1e={kernelName:R0,backendName:"cpu",kernelFunc:h1e};function Tl(t){return(e,n,r)=>{const s=ir(n,e.length);for(let a=0;a<e.length;++a)s[a]=t(e[a],r);return s}}function yn(t,e,n){const r=Tl(e);return Qu(t,r,n)}function Qu(t,e,n){return({inputs:r,attrs:s,backend:a})=>{const{x:i}=r;it(i,t);const o=a,l=o.data.get(i.dataId).values;let c;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=fc(l)}else c=l;const f=n||i.dtype,p=e(c,f,s);return o.makeTensorInfo(i.shape,f,p)}}const UG=Tl(t=>Math.ceil(t)),m1e=Qu(Lp,UG),g1e={kernelName:Lp,backendName:"cpu",kernelFunc:m1e};function WG(t,e,n,r){const s=ir(n,Ee(e));if(r&&n!=="string"){let a=0;t.forEach(i=>{const o=Ee(i.shape);s.set(i.vals,a),a+=o})}else{let a=0;t.forEach(i=>{const o=n==="string"?fc(i.vals):i.vals;let l=0;for(let c=0;c<i.shape[0];++c){const f=c*e[1]+a;for(let p=0;p<i.shape[1];++p)s[f+p]=o[l++]}a+=i.shape[1]})}return s}const VG=xr((t,e)=>t===e?1:0),qG=Wr(B0,VG,null,"bool"),y1e={kernelName:B0,backendName:"cpu",kernelFunc:qG};const GG=Tl(t=>Math.exp(t)),HG=Qu(qp,GG,"float32"),b1e={kernelName:qp,backendName:"cpu",kernelFunc:HG};const KG=Tl(t=>Math.expm1(t)),x1e=Qu(Gp,KG),v1e={kernelName:Gp,backendName:"cpu",kernelFunc:x1e};const XG=Tl(t=>Math.floor(t)),w1e=Qu(Hp,XG),S1e={kernelName:Hp,backendName:"cpu",kernelFunc:w1e};const YG=xr((t,e)=>Math.floor(t/e)),C1e=Wr(Kp,YG,null,"int32"),k1e={kernelName:Kp,backendName:"cpu",kernelFunc:C1e};function QG(t,e,n,r,s,a,i,o,l){const c=$t([r,a],n);for(let f=0;f<r;f++){const p=[];let m=0;for(let y=0;y<s;y++){const b=t[f*s+y];m+=b*i[y],p.push(b)}if(m<0||m>=l/a)throw new Error(`Invalid indices: ${p} does not index into ${o}`);for(let y=0;y<a;y++)c.values[f*a+y]=e.get(...e.indexToLoc(m*a+y))}return c}function ZG(t,e,n){const r=$t(n,t.dtype);for(let s=0;s<r.size;++s){const i=r.indexToLoc(s).slice(),o=i[0],l=i[2],c=e.locToIndex([o,l]);i[2]=e.values[c];const f=t.locToIndex(i);0<=f&&f<t.values.length&&(r.values[s]=t.values[f])}return r}const JG=xr((t,e)=>t>e?1:0),N1e=Wr(q0,JG,null,"bool"),T1e={kernelName:q0,backendName:"cpu",kernelFunc:N1e};const eH=xr((t,e)=>t>=e?1:0),E1e=Wr(Xp,eH,null,"bool"),I1e={kernelName:Xp,backendName:"cpu",kernelFunc:E1e};const tH=xr((t,e)=>t<e?1:0),A1e=Wr(H0,tH,null,"bool"),j1e={kernelName:H0,backendName:"cpu",kernelFunc:A1e};const nH=xr((t,e)=>t<=e?1:0),$1e=Wr(K0,nH,null,"bool"),R1e={kernelName:K0,backendName:"cpu",kernelFunc:$1e};function rH(t,e,n){const r=(e-t)/(n-1),s=gs(n,"float32");s[0]=t;for(let a=1;a<s.length;a++)s[a]=s[a-1]+r;return s}const sH=Tl(t=>Math.log(t)),O1e=Qu(em,sH),_1e={kernelName:em,backendName:"cpu",kernelFunc:O1e};function aH(t,e,n,r){const s=ts(r,Ee(n));for(let a=0;a<s.length;++a){const i=a*e;let o=t[i];for(let l=0;l<e;++l){const c=t[i+l];(Number.isNaN(c)||c>o)&&(o=c)}s[a]=o}return s}const iH=xr(((t,e)=>Math.max(t,e))),D1e=Wr(nm,iH),z1e={kernelName:nm,backendName:"cpu",kernelFunc:D1e};const oH=xr(((t,e)=>Math.min(t,e))),P1e=Wr(rm,oH),L1e={kernelName:rm,backendName:"cpu",kernelFunc:P1e};const k_=xr(((t,e)=>t*e)),M1e=S_(((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n}))),GC=Wr(am,k_,M1e),F1e={kernelName:am,backendName:"cpu",kernelFunc:GC};function lH(t,e,n){const r=vc(-1,n);return k_([],e,r,t,n)}function B1e(t){const{inputs:e,backend:n}=t,{x:r}=e;it(r,"neg");const s=n.data.get(r.dataId).values,[a,i]=lH(s,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,a)}const U1e={kernelName:ab,backendName:"cpu",kernelFunc:B1e};const cH=xr(((t,e)=>t!==e?1:0)),W1e=Wr(ib,cH,null,"bool"),V1e={kernelName:ib,backendName:"cpu",kernelFunc:W1e};function N_(t,e,n,r,s){const a=e.length,i=Ee(e),o=pt(e),l=pt(s),c=ts(n,Ee(s));for(let f=0;f<i;++f){const p=_f(f,a,o),m=new Array(p.length);for(let b=0;b<m.length;b++)m[b]=p[r[b]];const y=xo(m,a,l);c[y]=t[f]}return c}function Ca(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:a}=n;it(s,"transpose");const i=s.shape.length,o=new Array(i);for(let p=0;p<o.length;p++)o[p]=s.shape[a[p]];const l=r.data.get(s.dataId).values,c=N_(l,s.shape,s.dtype,a,o);return{dataId:r.write(c,o,s.dtype),shape:o,dtype:s.dtype}}const q1e={kernelName:Qd,backendName:"cpu",kernelFunc:Ca};function uH(t,e,n,r){const[s,a]=ss(t,r),i=ba(e,"int32"),o=gs(Ee(s),i),l=Ee(a);for(let c=0;c<o.length;++c){const f=c*l;let p=1;for(let m=0;m<l;++m)p*=n[f+m];o[c]=p}return{outVals:o,outShape:s,outDtype:i}}function G1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;it(s,"prod");const o=s.shape.length,l=Lt(a,s.shape),c=nr(l,o);let f=l,p=s;const m=[];c!=null&&(p=Ca({inputs:{x:s},backend:n,attrs:{perm:c}}),m.push(p),f=yr(f.length,o));const y=n.data.get(p.dataId).values,{outVals:b,outShape:v,outDtype:x}=uH(p.shape,p.dtype,y,f);let S=v;return i&&(S=gr(v,l)),m.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(S,x,b)}const H1e={kernelName:fb,backendName:"cpu",kernelFunc:G1e};function K1e(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const a=_f(s,e.length,pt(e)).join(",");throw new Error(`indices[${a}] = ${r} is not in [0, ${n})`)}})}function X1e(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let a=1;a<r.length;++a)if(r[a-1]>r[a])throw new Error("Ragged splits must be sorted in ascending order")}}function Y1e(t,e,n,r){const s=[];let a=0;const i=e.length-1+n.length,o=new Array(i).fill(null).map(()=>[0]);X1e(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const f=e[c+1];for(let p=1;p<l+1;++p)o[c].push(p*f)}for(let c=0;c<t.length;++c){let f=t[c],p=t[c]+1;for(let m=0;m<n.length;++m){const y=n[m],b=m+e.length-1;if(b>=0){const v=o[b],x=v[v.length-1]-y[f];for(let S=f;S<p;++S)o[b].push(y[S+1]+x)}f=y[f],p=y[p]}p!==f&&(s.push([f,p]),a+=p-f)}return{outSplits:o,valueSlices:s,numValues:a}}function Q1e(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=ir("int32",r);e.push(s),t[n].forEach((a,i)=>s[i]=a)}return e}function YL(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function Z1e(t,e,n,r,s,a){const i=YL(e,2)[1],o=YL(a,2)[1];let l=0;for(const c of n)for(let f=c[0];f<c[1];++f){for(let p=0;p<r;++p)s[l*o+p]=t[f*i+p];++l}}function J1e(t,e,n,r,s){const a=e.slice();a[0]=s;const i=ir(n,Ee(a)),o=t.length,l=o===0?0:o/e[0];return Z1e(t,e,r,l,i,a),[i,a]}function dH(t,e,n,r,s,a,i,o){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(K1e(a,i,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:f,valueSlices:p,numValues:m}=Y1e(a,i,t,c),y=Q1e(f),b=J1e(n,r,s,p,m);return[y,b[0],b[1]]}const QL=2147483647;function fH(t,e,n,r,s,a,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,l=s.length===0,c=i.length===0,f=[];o||f.push(e[0]),l||f.push(s[0]),c||f.push(i[0]);for(let x=1;x<f.length;++x)if(f[x]!==f[x-1])throw new Error("starts, limits, and deltas must have the same shape");const p=f.length===0?1:f[0],m=ir("int32",p+1);m[0]=0;for(let x=0;x<p;++x){const S=o?t[0]:t[x],C=l?r[0]:r[x],E=c?a[0]:a[x];if(E===0)throw new Error("Requires delta != 0");let k;if(E>0&&C<S||E<0&&C>S)k=0;else if(k=Math.ceil(Math.abs((C-S)/E)),k>QL)throw new Error(`Requires ((limit - start) / delta) <= ${QL}`);m[x+1]=m[x]+k}const y=m[p],b=ir(n,y);let v=0;for(let x=0;x<p;++x){const S=m[x+1]-m[x];let C=o?t[0]:t[x];const E=c?a[0]:a[x];for(let k=0;k<S;++k)b[v++]=C,C+=E}return[m,b]}var Li=po;class kw{constructor(e,n,r,s,a,i,o,l,c,f){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=a,this.defaultValue=i,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=H9(f),this.raggedRank=K9(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Li.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Li.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Li.VALUE_ROWIDS:return kw.getMaxWidthValueRowID(n);case Li.ROW_SPLITS:return kw.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Li[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const a=e[s+1]-e[s];a>r&&(r=a)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],a=0;for(let i=1;i<n;++i){const o=e[i];o!==s&&(s=o,a=Math.max(i-r,a),r=i)}return Math.max(n-r,a)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return JL(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;X9(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=G9(this.raggedRank,s,n);i[0]<0&&(i[0]=e);for(let o=1;o<=this.raggedRank;++o)i[o]<0&&(i[o]=this.getMaxWidth(o));return i}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),a=[];let i=0;for(let o=0;o<s;++o,i+=n)a.push(i);for(let o=s;o<e;++o)a.push(-1);return q(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,n,r,s){const a=e.length,i=[];for(let o=0;o<a-1;++o){const l=e[o+1]-e[o];let c=Math.min(s,l),f=n[o];f===-1&&(c=0);for(let p=0;p<c;++p)i.push(f),f+=r;for(let p=0;p<l-c;++p)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,r,s){const a=e.length,i=[];if(a===0)return[];let o=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];i.push(c);for(let f=1;f<a;++f){const p=e[f];if(p===l)c>=0&&(++o,o<s?c+=r:c=-1);else{if(o=0,l=p,p>=n.length)throw new Error(`Got nextValueRowId=${p} which is not less than ${n.length}`);c=n[p]}i.push(c)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,r,s){const a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Li.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,n,r,s);case Li.ROW_SPLITS:if(a.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(a,n,r,s);default:throw new Error(`Unsupported partition type: ${Li[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Li.FIRST_DIM_SIZE:return e[0];case Li.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Li.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Li[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const a=JL(r,!1),i=ir(this.valuesDType,Ee(a));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,i,a)}return[a,i]}setOutput(e,n,r,s){if(r.length===0)return;const a=this.values,i=r;let o=s.slice();o=o.slice(e+1);const l=Ee(o),c=n.length;let f=this.defaultValue;if(f.length!==l&&f.length!==1){const b=this.defaultValueShape;me(()=>{const v=le(f,b);f=Zd(v,o).dataSync()})}let p=0,m=0,y=0;for(let b=0;b<=c;++b){let v=b<c?n[b]:-1;if(v===y){++y;continue}if(m<y){const x=a.subarray(p*l),S=i.subarray(m*l),C=(y-m)*l;ZL(S,x,C)}if(b>=c){const x=r.length;v=Math.floor(x/l)}if(v>y)if(this.defaultValue.length===1)i.subarray(y*l,v*l).fill(this.defaultValue[0]),y=v;else for(;v>y;){const x=i.slice(y*l);ZL(x,f,l),++y}v<0?(p=b+1,m=y):(p=b,m=y,y=m+1)}}}function ZL(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function JL(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function hH(t,e,n,r,s,a,i,o,l,c){return new kw(t,e,n,r,s,a,i,o,l,c).compute()}function pH(t,e,n,r){const s=t===e,a=t<e&&n<0,i=e<t&&n>1;if(s||a||i)return gs(0,r);const o=Math.abs(Math.ceil((e-t)/n)),l=gs(o,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}const mH=Tl(t=>1/Math.sqrt(t)),ewe=Qu(dm,mH),twe={kernelName:dm,backendName:"cpu",kernelFunc:ewe};function Vd(t,e,n,r,s,a,i,o,l,c){const f=[r/s,s],p=t.values,m=e.values;if(r===0)return $t(n,e.dtype);const y=l instanceof Ir?l:$t(f,e.dtype);typeof l=="string"||typeof l=="number"?y.values.fill(l):typeof l=="boolean"&&y.values.fill(+l);for(let b=0;b<a;b++){const v=[];let x=0;for(let S=0;S<i;S++){const C=p[b*i+S];v.push(C),x+=C*o[S]}if(x<0||x>=r/s)throw new Error(`Invalid indices: ${v} does not index into ${n}`);for(let S=0;S<s;S++)c?y.values[x*s+S]+=m[b*s+S]:y.values[x*s+S]=e.rank===0?m[0]:m[b*s+S]}return y}const nwe=Tl(t=>1/(1+Math.exp(-t))),gH=yn(gm,t=>1/(1+Math.exp(-t))),rwe={kernelName:gm,backendName:"cpu",kernelFunc:gH};function yH(t,e,n,r,s){const a=IO(r,e,n),i=Ee(n),o=pt(r);if(a){const p=AO(e,o);return s==="string"?t.slice(p,p+i):t.subarray(p,p+i)}const l=s==="string"?fc(t):t,c=$t(r,s,l),f=$t(n,s);for(let p=0;p<f.size;++p){const m=f.indexToLoc(p),y=m.map((b,v)=>b+e[v]);f.set(c.get(...y),...m)}return s==="string"?m7(f.values):f.values}function Sf(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:a,size:i}=r;it(s,"slice");const[o,l]=$C(s,a,i);TO(s,o,l);const c=n.data.get(s.dataId).values,f=yH(c,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,f)}const swe={kernelName:bb,backendName:"cpu",kernelFunc:Sf};function bH(t,e,n,r,s,a,i){const o=e[0],l=a[0],c=new Array(l),f=new Array(o),p=e[1];if(l===0){if(o!==0)throw new Error(n7(o));const x=ir(n,0),S=ir(s,0);return[x,[0,p],S,c,f]}let m=!0,y=0;const b=new Array(l).fill(0);for(let x=0;x<o;++x){const S=t[x*p];if(S<0)throw new Error(r7(x,S));if(S>=l)throw new Error(s7(x,S,l));++b[S],m=m&&S>=y,y=S}let v=!0;for(let x=0;x<l;++x){const S=b[x]===0;c[x]=S,v=v&&!S,b[x]=Math.max(b[x],1),x>0&&(b[x]+=b[x-1])}if(v&&m){const x=t,S=r;for(let C=0;C<o;++C)f[C]=C;return[x,[o,p],S,c,f]}else{const x=b[l-1],S=ir(n,x*p),C=ir(s,x),E=new Array(l).fill(0);for(let k=0;k<o;++k){const I=t[k*p],$=E[I],_=(I===0?0:b[I-1])+$;E[I]++;for(let z=0;z<p;++z)S[_*p+z]=t[k*p+z];C[_]=r[k],f[k]=_}for(let k=0;k<l;++k)if(E[k]===0){const $=k===0?0:b[k-1];S[$*p+0]=k;for(let _=1;_<p;++_)S[$*p+_]=0;C[$]=i}return[S,[x,p],C,c,f]}}function xH(t,e,n,r,s){const a=Ee(r),i=e[0],o=s.length,l=[];let c=1,f=-1;for(let x=0;x<o;++x){const S=s[x];if(S===-1){if(f!==-1)throw new Error(a7(f,x));f=x,l.push(1)}else{if(S<0)throw new Error(i7(x,S));c*=S,l.push(S)}}if(f!==-1){if(c<=0)throw new Error(o7());const x=Math.trunc(a/c);if(c*x!==a)throw new Error(l7(r,l));l[f]=x}if(Ee(l)!==a)throw new Error(c7(r,l));const m=r.length,y=[];if(m>0){y[m-1]=1;for(let x=m-2;x>=0;--x)y[x]=y[x+1]*r[x+1]}const b=[];if(o>0){b[o-1]=1;for(let x=o-2;x>=0;--x)b[x]=b[x+1]*l[x+1]}const v=ir(n,i*o);for(let x=0;x<i;++x){let S=0;for(let C=0;C<m;++C)S+=t[x*m+C]*y[C];for(let C=0;C<o;++C)v[x*o+C]=Math.trunc(S/b[C]),S%=b[C]}return[v,[i,o],l]}function T_(t,e,n,r,s,a=!1,i=0){const o=r.length,l=[e[0],t.length/e[0]],c=l[1],p=o>0?s[o-1]+1:0;if(p<0)throw new Error(tj());const m=e.slice();m[0]=p;const y=m.reduce((E,k)=>E*k,1),b=ir(n,y);if(o===0)return p>0&&b.fill(i),[b,m];if(p<=0)throw new Error(tj());let v=0,x=1,S=0,C=s[v];for(;;){let E=0;if(x<o){if(E=s[x],C===E){++x;continue}if(C>=E)throw new Error(u7())}if(C<0||C>=p)throw new Error(d7(C,p));C>S&&b.fill(i,S*c,C*c);for(let k=v;k<x;++k){const I=r[k];if(I<0||I>=l[0])throw new Error(f7(k,r[k],l[0]));for(let $=0;$<c;$++)b[C*c+$]+=t[I*c+$]}if(a)for(let k=0;k<c;k++)b[C*c+k]/=x-v;if(v=x,++x,S=C+1,C=E,x>o)break}return S<p&&b.fill(i,S*c,p*c),[b,m]}const awe=Tl(t=>Math.sqrt(t)),iwe=yn(bm,t=>Math.sqrt(t)),owe={kernelName:bm,backendName:"cpu",kernelFunc:iwe};const vH=xr(((t,e)=>{const n=t-e;return n*n})),lwe=Wr(xm,vH),cwe={kernelName:xm,backendName:"cpu",kernelFunc:lwe};const wH=Tl((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),uwe=Qu(Cb,wH),dwe={kernelName:Cb,backendName:"cpu",kernelFunc:uwe};function SH(t,e,n,r){const s=$t(t,e.dtype);for(let a=0;a<s.size;a++){const i=s.indexToLoc(a),o=new Array(i.length);for(let l=0;l<o.length;l++)o[l]=i[l]*n[l]+r[l];s.set(e.get(...o),...i)}return s}class fwe{constructor(e,n,r,s,a,i){this.separator=ol(e),this.nGramWidths=n,this.leftPad=ol(r),this.rightPad=ol(s),this.padWidth=a,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,a,i){for(let o=0;o<a;++o){const l=this.getPadWidth(i),c=Math.max(0,l-o),f=Math.max(0,l-(a-(o+1))),p=i-(c+f),m=n+(c>0?0:o-l);let y=0;y+=c*this.leftPad.length;for(let C=0;C<p;++C)y+=e[m+C].length;y+=f*this.rightPad.length;const b=c+f+p-1;y+=b*this.separator.length,r[s+o]=new Uint8Array(y);const v=r[s+o];let x=0;const S=C=>C.forEach(E=>v[x++]=E);for(let C=0;C<c;++C)S(this.leftPad),S(this.separator);for(let C=0;C<p-1;++C)S(e[m+C]),S(this.separator);if(p>0){S(e[m+p-1]);for(let C=0;C<f;++C)S(this.separator),S(this.rightPad)}else{for(let C=0;C<f-1;++C)S(this.rightPad),S(this.separator);S(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let f=n[c]>=l;if(f=f&&n[c]<=r,!f)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const a=s-1,i=ir("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=a;++c)i[c]=0;return[l,i]}i[0]=0;for(let l=1;l<=a;++l){const c=n[l]-n[l-1];let f=0;this.nGramWidths.forEach(p=>{f+=this.getNumNGrams(c,p)}),this.preserveShort&&c>0&&f===0&&(f=1),i[l]=i[l-1]+f}const o=new Array(i[a]);for(let l=0;l<a;++l){const c=n[l];let f=i[l];if(this.nGramWidths.forEach(p=>{const m=n[l+1]-n[l],y=this.getNumNGrams(m,p);this.createNGrams(e,c,o,f,y,p),f+=y}),this.preserveShort&&f===i[l]){const p=n[l+1]-n[l];if(p===0)continue;const m=p+2*this.padWidth;this.createNGrams(e,c,o,f,1,m)}}return[o,i]}}function CH(t,e,n,r,s,a,i,o){return new fwe(n,r,s,a,i,o).compute(t,e)}function hwe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let a=0;a<t.length;++a)r.push(t.subarray(a,a+1));return}if(e.length===1){const a=e[0];let i=t.indexOf(a);for(;i!==-1;){const o=t.subarray(0,i);(!n||o.length!==0)&&r.push(o),t=t.subarray(i+1),i=t.indexOf(a)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let a=0;a<t.length+1;a++)if(a===t.length||e.indexOf(t[a])!==-1){const i=t.subarray(s,a);(!n||i.length!==0)&&r.push(i),s=a+1}}function kH(t,e,n){const r=t.length,s=[];let a=0,i=0;const o=new Array(r);for(let m=0;m<r;++m){const y=s.length;hwe(t[m],e,n,s);const b=s.length-y;o[m]=b,a+=b,i=Math.max(i,b)}const l=ir("int32",a*2),c=new Array(a),f=[r,i];let p=0;for(let m=0;m<r;++m)for(let y=0;y<o[m];++y)l[p*2]=m,l[p*2+1]=y,c[p]=s[p],++p;return[l,c,f]}function NH(t,e){const n=ir("int32",t.length);for(let r=0;r<t.length;++r)n[r]=nV(t[r]).modulo(e).getLowBitsUnsigned();return n}const TH=xr(((t,e)=>t-e)),pwe=S_(((t,e,n,r)=>({real:t-n,imag:e-r}))),E_=Wr(vm,TH,pwe),mwe={kernelName:vm,backendName:"cpu",kernelFunc:E_};function EH(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=$t(n,t.dtype);for(let s=0;s<r.values.length;++s){const a=r.indexToLoc(s),i=new Array(t.rank);for(let l=0;l<i.length;l++)i[l]=a[l]%t.shape[l];const o=t.locToIndex(i);r.values[s]=t.values[o]}return r}const xy=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function IH(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,l=e-n+1,c=Math.log(o),f=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*f*(o-f)/o)*Math.sign(l-o/2),m=Math.max(n,Math.floor(e-l*f/o+p)),y=Math.min(r,Math.floor(e+(o-l)*f/o+p));IH(t,e,m,y)}const s=t[e];let a=n,i=r;for(Zl(t,n,e),xy(t[r],s)>0&&Zl(t,n,r);a<i;){for(Zl(t,a,i),a++,i--;xy(t[a],s)<0;)a=a+1;for(;xy(t[i],s)>0;)i=i-1}xy(t[n],s)===0?Zl(t,n,i):(i=i+1,Zl(t,i,r)),i<=e&&(n=i+1),e<=i&&(r=i-1)}}function AH(t,e,n,r,s){const a=e[e.length-1],[i,o]=[t.length/a,a],l=ts(n,i*r),c=ts("int32",i*r);for(let p=0;p<i;p++){const m=p*o,y=t.subarray(m,m+o);let b=new Array(y.length);y.forEach((C,E)=>b[E]={value:C,index:E}),r<b.length&&(IH(b,r),b=b.slice(0,r)),s&&b.sort(xy);const v=p*r,x=l.subarray(v,v+r),S=c.subarray(v,v+r);for(let C=0;C<r;C++)x[C]=b[C].value,S[C]=b[C].index}const f=e.slice();return f[f.length-1]=r,[$t(f,n,l),$t(f,"int32",c)]}function jH(t,e,n,r){const s=Lt(e,n)[0],a=[1,n[0],1];for(let b=0;b<s;b++)a[0]*=n[b];a[1]=n[s];for(let b=s+1;b<n.length;b++)a[2]*=n[b];const i=new Map,o=new Int32Array(n[s]),l=new Ir(a,r,t),c=[],f=a[0]===1&&a[2]===1;for(let b=0;b<n[s];b++){let v;if(f)v=t[b].toString();else{const S=[];for(let C=0;C<a[0];C++)for(let E=0;E<a[2];E++)S.push(l.get(C,b,E));v=S.join(",")}const x=i.get(v);if(x!=null)o[b]=x;else{const S=i.size;i.set(v,S),o[b]=S,c.push(b)}}const p=a.slice();p[1]=i.size;const m=new Ir(p,r);c.forEach((b,v)=>{for(let x=0;x<a[0];x++)for(let S=0;S<a[2];S++)m.set(l.get(x,b,S),x,v,S)});const y=n.slice();return y[s]=p[1],{outputValues:m.values,outputShape:y,indices:o}}const gwe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:MG,bincountImpl:C_,bincountReduceImpl:FG,bitwiseAndImpl:BG,castImpl:LG,ceilImpl:UG,concatImpl:WG,equalImpl:VG,expImpl:GG,expm1Impl:KG,floorDivImpl:YG,floorImpl:XG,gatherNdImpl:QG,gatherV2Impl:ZG,greaterEqualImpl:eH,greaterImpl:JG,lessEqualImpl:nH,lessImpl:tH,linSpaceImpl:rH,logImpl:sH,maxImpl:aH,maximumImpl:iH,minimumImpl:oH,multiplyImpl:k_,negImpl:lH,notEqualImpl:cH,prodImpl:uH,raggedGatherImpl:dH,raggedRangeImpl:fH,raggedTensorToTensorImpl:hH,rangeImpl:pH,rsqrtImpl:mH,scatterImpl:Vd,sigmoidImpl:nwe,simpleAbsImpl:PG,sliceImpl:yH,sparseFillEmptyRowsImpl:bH,sparseReshapeImpl:xH,sparseSegmentReductionImpl:T_,sqrtImpl:awe,squaredDifferenceImpl:vH,staticRegexReplaceImpl:wH,stridedSliceImpl:SH,stringNGramsImpl:CH,stringSplitImpl:kH,stringToHashBucketFastImpl:NH,subImpl:TH,tileImpl:EH,topKImpl:AH,transposeImpl:N_,uniqueImpl:jH},Symbol.toStringTag,{value:"Module"}));oR("cpu",()=>new qC,1);const $H=yn(Wp,t=>t>=0?t:Math.exp(t)-1),ywe={kernelName:Wp,backendName:"cpu",kernelFunc:$H};function RH(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:a}=r;it([s],"leakyRelu");const i=Ee(s.shape),o=n.data.get(s.dataId).values,l=ts("float32",i);for(let c=0;c<o.length;c++)l[c]=o[c]<0?a*o[c]:o[c];return n.makeTensorInfo(s.shape,"float32",l)}const bwe={kernelName:G0,backendName:"cpu",kernelFunc:RH};const xwe=xr((t,e)=>t<0?e*t:t);function OH(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;it([r,s],"prelu");const a=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,[o,l]=xwe(r.shape,s.shape,a,i,"float32");return n.makeTensorInfo(l,"float32",o)}const vwe={kernelName:db,backendName:"cpu",kernelFunc:OH};const _H=yn(lm,t=>Math.max(0,t)),wwe={kernelName:lm,backendName:"cpu",kernelFunc:_H};const DH=yn(cm,t=>Math.min(Math.max(0,t),6)),Swe={kernelName:cm,backendName:"cpu",kernelFunc:DH};function Nw(t,e,n,r,s){if(n==="linear")return bl({inputs:{x:e},backend:t});if(n==="relu")return _H({inputs:{x:e},backend:t});if(n==="elu")return $H({inputs:{x:e},backend:t});if(n==="relu6")return DH({inputs:{x:e},backend:t});if(n==="prelu")return OH({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return RH({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return gH({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function Pn(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:a}=r,i=Ee(s.shape),o=Q$(a,i),l=Ee(o);q(i===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${s.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const f=c.complexTensorInfos.real,p=c.complexTensorInfos.imag;f.shape=o,p.shape=o}return{dataId:s.dataId,shape:o,dtype:s.dtype}}const Cwe={kernelName:hb,backendName:"cpu",kernelFunc:Pn};function zH(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:a}=e,{transposeA:i,transposeB:o}=r;it([s,a],"matMul");const l=s.shape.length,c=a.shape.length,f=i?s.shape[l-2]:s.shape[l-1],p=o?a.shape[c-1]:a.shape[c-2],m=i?s.shape[l-1]:s.shape[l-2],y=o?a.shape[c-2]:a.shape[c-1],b=s.shape.slice(0,-2),v=a.shape.slice(0,-2),x=Ee(b),S=Ee(v),E=At(s.shape.slice(0,-2),a.shape.slice(0,-2)).concat([m,y]);q(f===p,()=>`Error in matMul: inner shapes (${f}) and (${p}) of Tensors with shapes ${s.shape} and ${a.shape} and transposeA=${i} and transposeB=${o} must match.`);const k=i?[x,f,m]:[x,m,f],I=o?[S,y,p]:[S,p,y],$=Pn({inputs:{x:s},backend:n,attrs:{shape:k}}),_=Pn({inputs:{x:a},backend:n,attrs:{shape:I}}),z=i?$.shape[1]:$.shape[2],L=i?$.shape[2]:$.shape[1],R=o?_.shape[1]:_.shape[2],D=Math.max(x,S),U=n.data.get($.dataId).values,X=n.data.get(_.dataId).values,V=pt($.shape),Y=pt(_.shape),[B,Z,J]=i?[V[0],1,V[1]]:[V[0],V[1],1],[ae,ee,W]=o?[1,Y[1],Y[0]]:[Y[1],1,Y[0]],Q=L*R,se=$t([D,L,R],$.dtype),fe=se.values,Ne=n.blockSize;for(let _e=0;_e<D;_e++){const De=_e%x,He=_e%S;for(let he=0;he<L;he+=Ne){const Te=Math.min(he+Ne,L);for(let Me=0;Me<R;Me+=Ne){const ge=Math.min(Me+Ne,R);for(let ct=0;ct<z;ct+=Ne){const Ye=Math.min(ct+Ne,z);for(let ft=he;ft<Te;ft++)for(let Ke=Me;Ke<ge;Ke++){let Ct=0;for(let kt=ct;kt<Ye;kt++){const Wt=U[De*B+ft*Z+kt*J],Kt=X[kt*ae+Ke*ee+He*W];Ct+=Wt*Kt}fe[_e*Q+(ft*R+Ke)]+=Ct}}}}}return n.disposeIntermediateTensorInfo($),n.disposeIntermediateTensorInfo(_),n.makeTensorInfo(E,se.dtype,se.values)}const kwe={kernelName:j0,backendName:"cpu",kernelFunc:zH};function Nwe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:a,bias:i,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:f,leakyreluAlpha:p}=r;let m,y,b;const v=[];m=zH({inputs:{a:s,b:a},attrs:{transposeA:l,transposeB:c},backend:n}),i&&(y=dp({inputs:{a:m,b:i},backend:n}),v.push(m),m=y),f&&(b=Nw(n,m,f,o,p),v.push(m),m=b);for(const S of v)n.disposeIntermediateTensorInfo(S);return m}const Twe={kernelName:Dy,backendName:"cpu",kernelFunc:Nwe};const Ewe=yn(jp,t=>Math.acos(t)),Iwe={kernelName:jp,backendName:"cpu",kernelFunc:Ewe};const Awe=yn($p,t=>Math.acosh(t)),jwe={kernelName:$p,backendName:"cpu",kernelFunc:Awe};function $we(t){const{inputs:e,backend:n}=t,r=e;it(e,"addN");const s=r.map(o=>n.data.get(o.dataId).values),a=$t(r[0].shape,r[0].dtype),i=a.values;for(let o=0;o<r.length;o++){const l=s[o];for(let c=0;c<i.length;c++)i[c]+=l[c]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}const Rwe={kernelName:N0,backendName:"cpu",kernelFunc:$we};function Owe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;it(s,"all");const o=Lt(a,s.shape);let l=o;const c=nr(l,s.shape.length);let f=s;c!=null&&(f=Ca({inputs:{x:s},backend:n,attrs:{perm:c}}),l=yr(l.length,s.shape.length)),xs("all",l,f.shape.length);const[p,m]=ss(f.shape,l),y=Ee(m),b=gs(Ee(p),f.dtype),v=n.data.get(f.dataId).values;for(let S=0;S<b.length;++S){const C=S*y;let E=v[C];for(let k=0;k<y;++k){const I=v[C+k];E=E&&I}b[S]=E}c!=null&&n.disposeIntermediateTensorInfo(f);const x=n.makeTensorInfo(p,f.dtype,b);if(i){const S=gr(p,o),C=Pn({inputs:{x},backend:n,attrs:{shape:S}});return n.disposeIntermediateTensorInfo(x),C}return x}const _we={kernelName:FS,backendName:"cpu",kernelFunc:Owe};function Dwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;it(s,"any");const o=Lt(a,s.shape);let l=o;const c=nr(l,s.shape.length);let f=s;c!=null&&(f=Ca({inputs:{x:s},backend:n,attrs:{perm:c}}),l=yr(l.length,s.shape.length)),xs("any",l,f.shape.length);const[p,m]=ss(f.shape,l),y=Ee(m),b=gs(Ee(p),f.dtype),v=n.data.get(f.dataId).values;for(let S=0;S<b.length;++S){const C=S*y;let E=v[C];for(let k=0;k<y;++k){const I=v[C+k];E=E||I}b[S]=E}c!=null&&n.disposeIntermediateTensorInfo(f);const x=n.makeTensorInfo(p,f.dtype,b);if(i){const S=gr(p,o),C=Pn({inputs:{x},backend:n,attrs:{shape:S}});return n.disposeIntermediateTensorInfo(x),C}return x}const zwe={kernelName:BS,backendName:"cpu",kernelFunc:Dwe};function Pwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a}=r;it(s,"argMax");let i=Lt(a,s.shape);const o=nr(i,s.shape.length);let l=s;const c=[];o!=null&&(l=Ca({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),i=yr(i.length,l.shape.length)),i=[i[0]],xs("argMax",i,l.shape.length);const[f,p]=ss(l.shape,i),m=Ee(f),y=gs(m,"int32"),b=Ee(p),v=n.data.get(l.dataId).values;for(let x=0;x<y.length;++x){const S=x*b;let C=v[S],E=0;for(let k=0;k<b;++k){const I=v[S+k];I>C&&(C=I,E=k)}y[x]=E}return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(f,"int32",y)}const Lwe={kernelName:T0,backendName:"cpu",kernelFunc:Pwe};function Mwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a}=r;it(s,"argMin");let i=Lt(a,s.shape);const o=nr(i,s.shape.length);let l=s;const c=[];o!=null&&(l=Ca({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),i=yr(i.length,l.shape.length)),i=[i[0]],xs("argMin",i,l.shape.length);const[f,p]=ss(l.shape,i),m=Ee(f),y=gs(m,"int32"),b=Ee(p),v=n.data.get(l.dataId).values;for(let x=0;x<y.length;++x){const S=x*b;let C=v[S],E=0;for(let k=0;k<b;++k){const I=v[S+k];I<C&&(C=I,E=k)}y[x]=E}return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(f,"int32",y)}const Fwe={kernelName:E0,backendName:"cpu",kernelFunc:Mwe};const Bwe=yn(Rp,t=>Math.asin(t)),Uwe={kernelName:Rp,backendName:"cpu",kernelFunc:Bwe};const Wwe=yn(Op,t=>Math.asinh(t)),Vwe={kernelName:Op,backendName:"cpu",kernelFunc:Wwe};const qwe=yn(_p,t=>Math.atan(t)),Gwe={kernelName:_p,backendName:"cpu",kernelFunc:qwe};const Hwe=xr((t,e)=>Math.atan2(t,e)),Kwe=Wr(zp,Hwe),Xwe={kernelName:zp,backendName:"cpu",kernelFunc:Kwe};const Ywe=yn(Dp,t=>Math.atanh(t)),Qwe={kernelName:Dp,backendName:"cpu",kernelFunc:Ywe};function I_(t,e,n,r,s,a){const i=s.strideHeight,o=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,f=s.effectiveFilterHeight,p=s.effectiveFilterWidth,m=s.padInfo.top,y=s.padInfo.left,b=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=$t(s.outShape,n),x=v.values,S=s.outShape[1]*s.outShape[2]*s.outShape[3],C=s.outShape[2]*s.outShape[3],E=s.outShape[3];for(let k=0;k<s.batchSize;++k){const I=k*S,$=k*r[0];for(let _=0;_<s.inChannels;++_)for(let z=0;z<s.outHeight;++z){const L=z*i-m,R=Math.max(0,L),D=Math.min(s.inHeight,f+L),U=I+z*C;for(let X=0;X<s.outWidth;++X){const V=X*o-y,Y=Math.max(0,V),B=Math.min(s.inWidth,p+V);let Z=b,J=0,ae=0;for(let W=R;W<D;W+=l){const Q=$+W*r[1];for(let se=Y;se<B;se+=c){const fe=Q+se*r[2],Ne=t[fe+_];a==="max"&&Ne>Z?Z=Ne:a==="avg"&&(J+=Ne,ae++)}if(isNaN(Z))break}const ee=U+X*E+_;x[ee]=a==="avg"?J/ae:Z}}}return v}function PH(t,e,n,r,s=!1,a=!1){const i=$t(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,f=r.dilationWidth,p=r.effectiveFilterHeight,m=r.effectiveFilterWidth,y=r.padInfo.top,b=r.padInfo.left,v=$t(e,n,t);for(let x=0;x<r.batchSize;++x)for(let S=0;S<r.inChannels;++S)for(let C=0;C<r.outHeight;++C){const E=C*o-y;let k=E;for(;k<0;)k+=c;const I=Math.min(r.inHeight,p+E);for(let $=0;$<r.outWidth;++$){const _=$*l-b;let z=_;for(;z<0;)z+=f;const L=Math.min(r.inWidth,m+_);let R=Number.NEGATIVE_INFINITY,D=-1;for(let U=k;U<I;U+=c){const X=U-E;for(let V=z;V<L;V+=f){const Y=V-_,B=v.get(x,U,V,S);B>R&&(R=B,s?D=a?((x*r.inHeight+U)*r.inWidth+V)*r.inChannels+S:(U*r.inWidth+V)*r.inChannels+S:D=X*m+Y)}}i.set(D,x,C,$,S)}}return i}function LH(t,e,n,r,s,a){const i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,f=s.dilationHeight,p=s.dilationWidth,m=s.effectiveFilterDepth,y=s.effectiveFilterHeight,b=s.effectiveFilterWidth,v=s.padInfo.front,x=s.padInfo.top,S=s.padInfo.left,C=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,E=$t(s.outShape,n),k=E.values,I=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],$=s.outShape[2]*s.outShape[3]*s.outShape[4],_=s.outShape[3]*s.outShape[4],z=s.outShape[4];for(let L=0;L<s.batchSize;++L){const R=L*I,D=L*r[0];for(let U=0;U<s.inChannels;++U)for(let X=0;X<s.outDepth;++X){const V=X*i-v;let Y=V;for(;Y<0;)Y+=c;const B=Math.min(s.inDepth,m+V),Z=R+X*$;for(let J=0;J<s.outHeight;++J){const ae=J*o-x;let ee=ae;for(;ee<0;)ee+=f;const W=Math.min(s.inHeight,y+ae),Q=Z+J*_;for(let se=0;se<s.outWidth;++se){const fe=se*l-S;let Ne=fe;for(;Ne<0;)Ne+=p;const _e=Math.min(s.inWidth,b+fe),De=Q+se*z;let He=C,he=0,Te=0;for(let ge=Y;ge<B;ge+=c){const ct=D+ge*r[1];for(let Ye=ee;Ye<W;Ye+=f){const ft=ct+Ye*r[2];for(let Ke=Ne;Ke<_e;Ke+=p){const Ct=ft+Ke*r[3],kt=t[Ct+U];if(a==="max"&&kt>He?He=kt:a==="avg"&&(he+=kt,Te++),isNaN(He))break}if(isNaN(He))break}if(isNaN(He))break}const Me=De+U;k[Me]=a==="avg"?he/Math.max(Te,1):He}}}}return E}function Zwe(t,e){const n=$t(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,f=e.effectiveFilterHeight,p=e.effectiveFilterWidth,m=e.padInfo.front,y=e.padInfo.top,b=e.padInfo.left;for(let v=0;v<e.batchSize;++v)for(let x=0;x<e.inChannels;++x)for(let S=0;S<e.outDepth;++S){const C=S*r-m;let E=C;for(;E<0;)E+=i;const k=Math.min(e.inDepth,c+C);for(let I=0;I<e.outHeight;++I){const $=I*s-y;let _=$;for(;_<0;)_+=o;const z=Math.min(e.inHeight,f+$);for(let L=0;L<e.outWidth;++L){const R=L*a-b;let D=R;for(;D<0;)D+=l;const U=Math.min(e.inWidth,p+R);let X=Number.NEGATIVE_INFINITY,V=-1;for(let Y=E;Y<k;Y+=i){const B=Y-C;for(let Z=_;Z<z;Z+=o){const J=Z-$;for(let ae=D;ae<U;ae+=l){const ee=ae-R,W=t.get(v,Y,Z,ae,x);W>=X&&(X=W,V=B*f*p+J*f+ee)}}}n.set(V,v,S,I,L,x)}}}return n}function Jwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;it(s,"avgPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,c=1;q(bs(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const f=Zi(s.shape,a,i,c,o,l);let p;if(f.filterWidth===1&&f.filterHeight===1&&Ft(f.inShape,f.outShape))p=bl({inputs:{x:s},backend:n});else{const m=n.data.get(s.dataId).values,y=pt(s.shape),b=I_(m,s.shape,s.dtype,y,f,"avg");p=n.makeTensorInfo(f.outShape,s.dtype,b.values)}return p}const eSe={kernelName:I0,backendName:"cpu",kernelFunc:Jwe};function tSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:c}=r;it(s,"avgPool3d");const f=wc(s.shape,a,i,1,o,l,c),p=n.data.get(s.dataId).values,m=LH(p,s.shape,s.dtype,pt(s.shape),f,"avg");return n.makeTensorInfo(m.shape,"float32",m.values)}const nSe={kernelName:A0,backendName:"cpu",kernelFunc:tSe};function rSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,{filterSize:i,strides:o,pad:l,dimRoundingMode:c}=r;it([s,a],"avgPool3DGrad");const f=wc(a.shape,i,o,1,l,c),p=f.strideDepth,m=f.strideHeight,y=f.strideWidth,b=f.filterDepth,v=f.filterHeight,x=f.filterWidth,S=f.dilationDepth,C=f.dilationHeight,E=f.dilationWidth,k=f.effectiveFilterDepth,I=f.effectiveFilterHeight,$=f.effectiveFilterWidth,_=k-1-f.padInfo.front,z=$-1-f.padInfo.left,L=I-1-f.padInfo.top,R=$t(a.shape,"float32"),D=1/(b*v*x),U=n.bufferSync(s);for(let X=0;X<f.batchSize;++X)for(let V=0;V<f.inChannels;++V)for(let Y=0;Y<f.inDepth;++Y)for(let B=0;B<f.inHeight;++B)for(let Z=0;Z<f.inWidth;++Z){const J=Y-_,ae=B-L,ee=Z-z;let W=0;for(let Q=0;Q<k;Q+=S){const se=(J+Q)/p;if(!(se<0||se>=f.outDepth||Math.floor(se)!==se))for(let fe=0;fe<I;fe+=C){const Ne=(ae+fe)/m;if(!(Ne<0||Ne>=f.outHeight||Math.floor(Ne)!==Ne))for(let _e=0;_e<$;_e+=E){const De=(ee+_e)/y;if(De<0||De>=f.outWidth||Math.floor(De)!==De)continue;const He=U.get(X,se,Ne,De,V);W+=He}}}R.set(W*D,X,Y,B,Z,V)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const sSe={kernelName:WS,backendName:"cpu",kernelFunc:rSe};function aSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,i=a;it([s,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,f=Zi(i.shape,o,l,1,c),p=f.strideHeight,m=f.strideWidth,y=f.filterHeight,b=f.filterWidth,v=f.dilationHeight,x=f.dilationWidth,S=f.effectiveFilterHeight,C=f.effectiveFilterWidth,E=C-1-f.padInfo.left,k=S-1-f.padInfo.top,I=$t(i.shape,"float32"),$=1/(y*b),_=n.data.get(s.dataId).values,z=$t(s.shape,"float32",_);for(let L=0;L<f.batchSize;++L)for(let R=0;R<f.inChannels;++R)for(let D=0;D<f.inHeight;++D)for(let U=0;U<f.inWidth;++U){const X=D-k,V=U-E;let Y=0;for(let B=0;B<S;B+=v){const Z=(X+B)/p;if(!(Z<0||Z>=f.outHeight||Math.floor(Z)!==Z))for(let J=0;J<C;J+=x){const ae=(V+J)/m;if(ae<0||ae>=f.outWidth||Math.floor(ae)!==ae)continue;const ee=z.get(L,Z,ae,R);Y+=ee}}I.set(Y*$,L,D,U,R)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const iSe={kernelName:US,backendName:"cpu",kernelFunc:aSe};function oSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:a,offset:i,mean:o,variance:l}=e;q(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),it([s,o,l,a,i],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const f=n.data.get(s.dataId).values,p=n.data.get(o.dataId).values,m=n.data.get(l.dataId).values,y=a?n.data.get(a.dataId).values:new Float32Array([1]),b=i?n.data.get(i.dataId).values:new Float32Array([0]),v=new Float32Array(f.length),x=b.length,S=y.length,C=m.length,E=p.length;let k=0,I=0,$=0,_=0;for(let z=0;z<f.length;++z)v[z]=b[k++]+(f[z]-p[I++])*y[$++]/Math.sqrt(m[_++]+c),k>=x&&(k=0),I>=E&&(I=0),$>=S&&($=0),_>=C&&(_=0);return n.makeTensorInfo(s.shape,s.dtype,v)}const lSe={kernelName:W0,backendName:"cpu",kernelFunc:oSe};function cSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:a,crops:i}=r;it([s],"batchToSpaceND");const o=a.reduce((S,C)=>S*C),l=Hb(s.shape,a,o),c=Kb(l.length,a.length),f=Xb(s.shape,a,o),p=DO(i,a.length),m=zO(f,i,a.length),y=Pn({inputs:{x:s},backend:n,attrs:{shape:l}}),b=Ca({inputs:{x:y},backend:n,attrs:{perm:c}}),v=Pn({inputs:{x:b},backend:n,attrs:{shape:f}}),x=Sf({inputs:{x:v},backend:n,attrs:{begin:p,size:m}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v),x}const uSe={kernelName:$0,backendName:"cpu",kernelFunc:cSe};function dSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:a}=e,{size:i}=r,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,c=C_(o,l,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,c)}const fSe={kernelName:VS,backendName:"cpu",kernelFunc:dSe};function hSe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,a=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,o=At(Array.from(a),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const pSe={kernelName:qS,backendName:"cpu",kernelFunc:hSe};const mSe=yn(Mp,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),gSe={kernelName:Mp,backendName:"cpu",kernelFunc:mSe};const ySe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(Ee(e.shape)),s=n.data.get(e.dataId),a=s.complexTensorInfos.real,i=s.complexTensorInfos.imag,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values;for(let c=0;c<o.length;c++){const f=o[c],p=l[c];r[c]=Math.hypot(f,p)}return n.makeOutput(r,e.shape,"float32")},bSe={kernelName:O0,backendName:"cpu",kernelFunc:ySe};function fp(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,a)}const xSe={kernelName:d2,backendName:"cpu",kernelFunc:fp};function hp(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,a=Lt(s,e[0].shape)[0],i=e.map(v=>v.shape);RO(i,a);let o=cl(e.map(v=>v.shape),a);if(Ee(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(v=>Ee(v.shape)>0);if(l.length===1)return bl({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const v=l.map(k=>wf({inputs:{input:k},backend:n})),x=l.map(k=>fp({inputs:{input:k},backend:n})),S=hp({inputs:v,backend:n,attrs:{axis:a}}),C=hp({inputs:x,backend:n,attrs:{axis:a}}),E=La({inputs:{real:S,imag:C},backend:n});return v.forEach(k=>n.disposeIntermediateTensorInfo(k)),x.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(C),E}const c=l.map(v=>{const S=[-1,Ee(v.shape.slice(a))];return Pn({inputs:{x:v},backend:n,attrs:{shape:S}})}),f=c.map(v=>({vals:n.data.get(v.dataId).values,shape:v.shape}));o=cl(c.map(v=>v.shape),1);const p=c[0].shape[0]===1,m=WG(f,o,e[0].dtype,p),y=cl(l.map(v=>v.shape),a),b=n.makeTensorInfo(y,e[0].dtype,m);return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),b}const vSe={kernelName:_0,backendName:"cpu",kernelFunc:hp};function MH(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dataFormat:l,dilations:c,dimRoundingMode:f}=r;it([s,a],"conv2d");const p=Sc(l),m=rs(s.shape,a.shape,i,c,o,f,!1,p),y=m.filterHeight,b=m.filterWidth,v=m.dilationHeight,x=m.dilationWidth,S=m.padInfo.left,C=m.padInfo.top,E=m.dataFormat==="channelsLast",k=new Ir(m.outShape,s.dtype),I=pt(s.shape),$=pt(a.shape),_=I[0],z=E?I[1]:I[2],L=E?I[2]:1,R=E?1:I[1],D=k.strides[0],U=E?k.strides[1]:k.strides[2],X=E?k.strides[2]:1,V=E?1:k.strides[1],Y=n.data.get(s.dataId).values,B=n.data.get(a.dataId).values,Z=k.values;for(let J=0;J<m.batchSize;++J){const ae=J*_,ee=J*D;for(let W=0;W<m.outHeight;++W){const Q=ee+W*U,se=W*m.strideHeight-C;for(let fe=0;fe<y;++fe){const Ne=se+fe*v;if(Ne<0||Ne>=m.inHeight)continue;const _e=fe*$[0],De=ae+Ne*z;for(let He=0;He<m.outWidth;++He){const he=Q+He*X,Te=He*m.strideWidth-S;for(let Me=0;Me<b;++Me){const ge=Te+Me*x;if(ge<0||ge>=m.inWidth)continue;const ct=_e+Me*$[1],Ye=De+ge*L;let ft=ct;for(let Ke=0;Ke<m.inChannels;++Ke){const Ct=Y[Ye+Ke*R];for(let kt=0;kt<m.outChannels;++kt)Z[he+kt*V]+=Ct*B[ft+kt];ft+=m.outChannels}}}}}}return n.makeTensorInfo(k.shape,k.dtype,Z)}const wSe={kernelName:D0,backendName:"cpu",kernelFunc:MH};function SSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:f}=r;it([s,a],"conv2dBackpropFilter");const p=Sc(l),m=rs(s.shape,f,i,1,o,c,!1,p),{strideHeight:y,strideWidth:b,filterHeight:v,filterWidth:x}=m,S=m.dataFormat==="channelsLast",C=new Ir(m.filterShape,"float32"),E=m.padInfo.left,k=m.padInfo.top,I=n.data.get(s.dataId).values,$=n.data.get(a.dataId).values,_=new Ir(s.shape,s.dtype,I),z=new Ir(a.shape,a.dtype,$);for(let L=0;L<v;++L){const R=Math.max(0,Math.ceil((k-L)/y)),D=Math.min(m.outHeight,(m.inHeight+k-L)/y);for(let U=0;U<x;++U){const X=Math.max(0,Math.ceil((E-U)/b)),V=Math.min(m.outWidth,(m.inWidth+E-U)/b);for(let Y=0;Y<m.inChannels;++Y)for(let B=0;B<m.outChannels;++B){let Z=0;for(let J=0;J<m.batchSize;++J)for(let ae=R;ae<D;++ae){const ee=L+ae*y-k;for(let W=X;W<V;++W){const Q=U+W*b-E;S?Z+=_.get(J,ee,Q,Y)*z.get(J,ae,W,B):Z+=_.get(J,Y,ee,Q)*z.get(J,B,ae,W)}}C.set(Z,L,U,Y,B)}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const CSe={kernelName:HS,backendName:"cpu",kernelFunc:SSe};function kSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{inputShape:i,strides:o,pad:l,dataFormat:c,dimRoundingMode:f}=r;it([s,a],"conv2dBackpropInput");const p=pt(a.shape),m=pt(s.shape);let y=Sc(c);const b=rs(i,a.shape,o,1,l,f,!1,y),v=new Ir(b.inShape,"float32"),x=v.values,S=n.data.get(s.dataId).values,C=n.data.get(a.dataId).values,[E,k,I]=p,{batchSize:$,filterHeight:_,filterWidth:z,inChannels:L,inHeight:R,inWidth:D,outChannels:U,outHeight:X,outWidth:V,strideHeight:Y,strideWidth:B}=b;y=b.dataFormat;const Z=_-1-b.padInfo.top,J=z-1-b.padInfo.left,ae=y==="channelsLast",ee=v.strides[0],W=ae?v.strides[1]:v.strides[2],Q=ae?v.strides[2]:1,se=ae?1:v.strides[1],fe=m[0],Ne=ae?m[1]:m[2],_e=ae?m[2]:1,De=ae?1:m[1];for(let He=0;He<$;++He)for(let he=0;he<L;++he)for(let Te=0;Te<R;++Te){const Me=Te-Z,ge=Math.max(0,Math.ceil(Me/Y)),ct=Math.min(X,(_+Me)/Y);for(let Ye=0;Ye<D;++Ye){const ft=Ye-J,Ke=Math.max(0,Math.ceil(ft/B)),Ct=Math.min(V,(z+ft)/B);let kt=0;for(let Kt=ge;Kt<ct;++Kt){const jn=Kt*Y-Me;for(let Nt=Ke;Nt<Ct;++Nt){const sr=Nt*B-ft,Zt=fe*He+Ne*Kt+_e*Nt,lr=E*(_-1-jn)+k*(z-1-sr)+I*he;for(let ar=0;ar<U;++ar){const fn=S[Zt+De*ar],cr=C[lr+ar];kt+=fn*cr}}}const Wt=ee*He+W*Te+Q*Ye+se*he;x[Wt]=kt}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const NSe={kernelName:z0,backendName:"cpu",kernelFunc:kSe};function TSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l}=r;it([s,a],"conv3d");const c=Vu(s.shape,a.shape,i,l,o),{filterDepth:f,filterHeight:p,filterWidth:m,dilationDepth:y,dilationHeight:b,dilationWidth:v,padInfo:x}=c,S=x.front,C=x.left,E=x.top,k=new Ir(c.outShape,s.dtype),I=n.data.get(s.dataId).values,$=n.data.get(a.dataId).values,_=k.values,z=pt(s.shape),L=pt(a.shape);for(let R=0;R<c.batchSize;++R){const D=R*z[0],U=R*k.strides[0];for(let X=0;X<c.outDepth;++X){const V=U+X*k.strides[1],Y=X*c.strideDepth-S;for(let B=0;B<f;++B){const Z=Y+B*y;if(Z<0||Z>=c.inDepth)continue;const J=B*L[0],ae=D+Z*z[1];for(let ee=0;ee<c.outHeight;++ee){const W=V+ee*k.strides[2],Q=ee*c.strideHeight-E;for(let se=0;se<p;++se){const fe=Q+se*b;if(fe<0||fe>=c.inHeight)continue;const Ne=J+se*L[1],_e=ae+fe*z[2];for(let De=0;De<c.outWidth;++De){const He=W+De*c.outChannels,he=De*c.strideWidth-C;for(let Te=0;Te<m;++Te){const Me=he+Te*v;if(Me<0||Me>=c.inWidth)continue;const ge=Ne+Te*L[2],ct=_e+Me*c.inChannels;let Ye=ge;for(let ft=0;ft<c.inChannels;++ft){const Ke=I[ct+ft];for(let Ct=0;Ct<c.outChannels;++Ct)_[He+Ct]+=Ke*$[Ye+Ct];Ye+=c.outChannels}}}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const ESe={kernelName:P0,backendName:"cpu",kernelFunc:TSe};function ISe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,pad:o,filterShape:l}=r;it([s,a],"conv3dBackpropFilterV2");const c=pt(s.shape),f=pt(a.shape),p=Vu(s.shape,l,i,1,o),m=p.strideDepth,y=p.strideHeight,b=p.strideWidth,v=p.filterDepth,x=p.filterHeight,S=p.filterWidth,C=new Ir(p.filterShape,"float32"),E=C.values,[k,I,$,_]=C.strides,z=n.data.get(a.dataId).values,[L,R,D,U]=f,X=n.data.get(s.dataId).values,[V,Y,B,Z]=c,J=p.padInfo.front,ae=p.padInfo.left,ee=p.padInfo.top;for(let W=0;W<v;++W){const Q=Math.max(0,Math.ceil((J-W)/m)),se=Math.min(p.outDepth,(p.inDepth+J-W)/m),fe=W*k;for(let Ne=0;Ne<x;++Ne){const _e=Math.max(0,Math.ceil((ee-Ne)/y)),De=Math.min(p.outHeight,(p.inHeight+ee-Ne)/y),He=Ne*I+fe;for(let he=0;he<S;++he){const Te=Math.max(0,Math.ceil((ae-he)/b)),Me=Math.min(p.outWidth,(p.inWidth+ae-he)/b),ge=he*$+He;for(let ct=0;ct<p.inChannels;++ct){const Ye=ct*_+ge;for(let ft=0;ft<p.outChannels;++ft){let Ke=0;for(let Ct=0;Ct<p.batchSize;++Ct){const kt=Ct*V,Wt=Ct*L;for(let Kt=Q;Kt<se;++Kt){const Nt=(W+Kt*m-J)*Y+kt,sr=Kt*R+Wt;for(let Zt=_e;Zt<De;++Zt){const ar=(Ne+Zt*y-ee)*B+Nt,fn=Zt*D+sr;for(let cr=Te;cr<Me;++cr){const ia=(he+cr*b-ae)*Z+ar,de=cr*U+fn;Ke+=X[ia+ct]*z[de+ft]}}}}E[Ye+ft]=Ke}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const ASe={kernelName:KS,backendName:"cpu",kernelFunc:ISe};function jSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{pad:i,strides:o,inputShape:l}=r;it([s],"conv3dBackpropInputV2");const c=pt(s.shape),f=pt(a.shape),p=Vu(l,a.shape,o,1,i),m=new Ir(p.inShape,"float32"),y=m.values,[b,v,x,S]=m.strides,C=n.data.get(s.dataId).values,[E,k,I,$]=c,_=n.data.get(a.dataId).values,[z,L,R,D]=f,{batchSize:U,filterDepth:X,filterHeight:V,filterWidth:Y,inChannels:B,inDepth:Z,inHeight:J,inWidth:ae,outChannels:ee,outDepth:W,outHeight:Q,outWidth:se,strideDepth:fe,strideHeight:Ne,strideWidth:_e}=p,De=X-1-p.padInfo.front,He=V-1-p.padInfo.top,he=Y-1-p.padInfo.left;for(let Te=0;Te<U;++Te)for(let Me=0;Me<B;++Me)for(let ge=0;ge<Z;++ge){const ct=ge-De,Ye=Math.max(0,Math.ceil(ct/fe)),ft=Math.min(W,(X+ct)/fe);for(let Ke=0;Ke<J;++Ke){const Ct=Ke-He,kt=Math.max(0,Math.ceil(Ct/Ne)),Wt=Math.min(Q,(V+Ct)/Ne);for(let Kt=0;Kt<ae;++Kt){const jn=Kt-he,Nt=Math.max(0,Math.ceil(jn/_e)),sr=Math.min(se,(Y+jn)/_e);let Zt=0;for(let lr=Ye;lr<ft;++lr){const ar=lr*fe-ct;for(let fn=kt;fn<Wt;++fn){const cr=fn*Ne-Ct;for(let qs=Nt;qs<sr;++qs){const ia=qs*_e-jn,de=E*Te+k*lr+I*fn+$*qs,Fe=z*(X-1-ar)+L*(V-1-cr)+R*(Y-1-ia)+D*Me;for(let Ze=0;Ze<ee;++Ze){const we=C[de+Ze],Pe=_[Fe+Ze];Zt+=we*Pe}}}}y[b*Te+v*ge+x*Ke+S*Kt+Me]=Zt}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const $Se={kernelName:XS,backendName:"cpu",kernelFunc:jSe};const RSe=yn(Fp,t=>Math.cos(t)),OSe={kernelName:Fp,backendName:"cpu",kernelFunc:RSe};const _Se=yn(Bp,t=>Math.cosh(t)),DSe={kernelName:Bp,backendName:"cpu",kernelFunc:_Se};function zSe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:a,boxInd:i}=e,{cropSize:o,method:l,extrapolationValue:c}=r,[f,p,m,y]=s.shape,b=a.shape[0],[v,x]=o,S=$t([b,v,x,y],"float32"),C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,k=n.data.get(s.dataId).values,I=pt(s.shape),$=pt(S.shape);for(let _=0;_<b;_++){const z=_*4,L=C[z],R=C[z+1],D=C[z+2],U=C[z+3],X=E[_];if(X>=f)continue;const V=v>1?(D-L)*(p-1)/(v-1):0,Y=x>1?(U-R)*(m-1)/(x-1):0;for(let B=0;B<v;B++){const Z=v>1?L*(p-1)+B*V:.5*(L+D)*(p-1);if(Z<0||Z>p-1){for(let J=0;J<x;J++)for(let ae=0;ae<y;ae++){const ee=ae+J*$[2]+B*$[1]+_*$[0];S.values[ee]=c}continue}if(l==="bilinear"){const J=Math.floor(Z),ae=Math.ceil(Z),ee=Z-J;for(let W=0;W<x;W++){const Q=x>1?R*(m-1)+W*Y:.5*(R+U)*(m-1);if(Q<0||Q>m-1){for(let _e=0;_e<y;_e++){const De=_e+W*$[2]+B*$[1]+_*$[0];S.values[De]=c}continue}const se=Math.floor(Q),fe=Math.ceil(Q),Ne=Q-se;for(let _e=0;_e<y;_e++){let De=_e+se*I[2]+J*I[1]+X*I[0];const He=k[De];De=_e+fe*I[2]+J*I[1]+X*I[0];const he=k[De];De=_e+se*I[2]+ae*I[1]+X*I[0];const Te=k[De];De=_e+fe*I[2]+ae*I[1]+X*I[0];const Me=k[De],ge=He+(he-He)*Ne,ct=Te+(Me-Te)*Ne;De=_e+W*$[2]+B*$[1]+_*$[0],S.values[De]=ge+(ct-ge)*ee}}}else for(let J=0;J<x;++J){const ae=x>1?R*(m-1)+J*Y:.5*(R+U)*(m-1);if(ae<0||ae>m-1){for(let Q=0;Q<y;Q++){const se=Q+J*$[2]+B*$[1]+_*$[0];S.values[se]=c}continue}const ee=Math.round(ae),W=Math.round(Z);for(let Q=0;Q<y;Q++){const se=Q+ee*I[2]+W*I[1]+X*I[0],fe=Q+J*$[2]+B*$[1]+_*$[0];S.values[fe]=k[se]}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const PSe={kernelName:QS,backendName:"cpu",kernelFunc:zSe};function LSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;it(s,"cumprod");const l=nr([a],s.shape.length);let c=s;l!=null&&(c=Ca({inputs:{x:s},backend:n,attrs:{perm:l}}));const f=yr(1,s.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);const p=ba(c.dtype,"int32"),m=MS(Ee(c.shape),p),y=n.data.get(c.dataId).values,b=c.shape[c.shape.length-1],v=o?(S,C)=>S+b-C-1:(S,C)=>S+C;for(let S=0;S<y.length;S+=b)for(let C=0;C<b;C++){const E=v(S,C);if(C===0)m[E]=i?1:y[E];else{const k=v(S,C-1);m[E]=i?y[k]*m[k]:y[E]*m[k]}}const x=n.makeTensorInfo(c.shape,p,m);if(l!=null){const S=qu(l),C=Ca({inputs:{x},backend:n,attrs:{perm:S}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),C}return x}const MSe={kernelName:YS,backendName:"cpu",kernelFunc:LSe};function FSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;it(s,"cumsum");const l=nr([a],s.shape.length);let c=s;l!=null&&(c=Ca({inputs:{x:s},backend:n,attrs:{perm:l}}));const f=yr(1,s.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);const p=ba(c.dtype,"int32"),m=gs(Ee(c.shape),p),y=n.data.get(c.dataId).values,b=c.shape[c.shape.length-1],v=o?(S,C)=>S+b-C-1:(S,C)=>S+C;for(let S=0;S<y.length;S+=b)for(let C=0;C<b;C++){const E=v(S,C);if(C===0)m[E]=i?0:y[E];else{const k=v(S,C-1);m[E]=i?y[k]+m[k]:y[E]+m[k]}}const x=n.makeTensorInfo(c.shape,p,m);if(l!=null){const S=qu(l),C=Ca({inputs:{x},backend:n,attrs:{perm:S}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),C}return x}const BSe={kernelName:L0,backendName:"cpu",kernelFunc:FSe};function USe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:a}=e,{size:i,binaryOutput:o}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,c=n.data.get(a.dataId).values,f=C_(l,c,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,f)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(a),f=FG(l,c,i,o);return n.makeTensorInfo(f.shape,a.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const WSe={kernelName:ZS,backendName:"cpu",kernelFunc:USe};function VSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:a,dataFormat:i}=r;q(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const o=s.shape[0],l=s.shape[1],c=s.shape[2],f=s.shape[3],p=l*a,m=c*a,y=f/(a*a),b=n.data.get(s.dataId).values,v=new Float32Array(o*p*m*y);let x=0;for(let S=0;S<o;++S)for(let C=0;C<p;++C){const E=Math.floor(C/a),k=C%a;for(let I=0;I<m;++I){const $=Math.floor(I/a),_=I%a,z=(k*a+_)*y;for(let L=0;L<y;++L){const D=L+z+f*($+c*(E+l*S));v[x++]=b[D]}}}return n.makeTensorInfo([o,p,m,y],s.dtype,v)}const qSe={kernelName:JS,backendName:"cpu",kernelFunc:VSe};function FH(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l,dimRoundingMode:c}=r;it([s,a],"depthwiseConv2DNative");const f=pt(s.shape),p=pt(a.shape);let m=l;m==null&&(m=[1,1]),q(bs(i,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${m}'`);const y=rs(s.shape,a.shape,i,m,o,c,!0),{filterHeight:b,filterWidth:v,dilationHeight:x,dilationWidth:S,padInfo:C}=y,E=C.left,k=C.top,I=y.outChannels/y.inChannels,$=new Ir(y.outShape,s.dtype),_=n.data.get(s.dataId).values,z=n.data.get(a.dataId).values,L=$.values;for(let R=0;R<y.batchSize;++R){const D=R*f[0],U=R*$.strides[0];for(let X=0;X<y.outHeight;++X){const V=U+X*$.strides[1],Y=X*y.strideHeight-k;for(let B=0;B<b;++B){const Z=Y+B*x;if(Z<0||Z>=y.inHeight)continue;const J=B*p[0],ae=D+Z*f[1];for(let ee=0;ee<y.outWidth;++ee){const W=V+ee*$.strides[2],Q=ee*y.strideWidth-E;for(let se=0;se<v;++se){const fe=Q+se*S;if(fe<0||fe>=y.inWidth)continue;const Ne=J+se*p[1],_e=ae+fe*y.inChannels;let De=W,He=Ne;for(let he=0;he<y.inChannels;++he){const Te=_[_e+he];for(let Me=0;Me<I;++Me)L[De+Me]+=Te*z[He+Me];De+=I,He+=I}}}}}}return n.makeTensorInfo($.shape,$.dtype,$.values)}const GSe={kernelName:M0,backendName:"cpu",kernelFunc:FH};function HSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:c,filterShape:f}=r;it([s,a],"depthwiseConv2dNativeBackpropFilter");const p=rs(s.shape,f,i,o,l,c,!0),{strideHeight:m,strideWidth:y,filterHeight:b,filterWidth:v}=p,x=new Ir(p.filterShape,"float32"),S=p.padInfo.left,C=p.padInfo.top,E=p.outChannels/p.inChannels,k=n.data.get(s.dataId).values,I=new Ir(s.shape,s.dtype,k),$=n.data.get(a.dataId).values,_=new Ir(a.shape,a.dtype,$);for(let z=0;z<b;++z){const L=Math.max(0,Math.ceil((C-z)/m)),R=Math.min(p.outHeight,(p.inHeight+C-z)/m);for(let D=0;D<v;++D){const U=Math.max(0,Math.ceil((S-D)/y)),X=Math.min(p.outWidth,(p.inWidth+S-D)/y);for(let V=0;V<p.outChannels;++V){const Y=Math.trunc(V/E),B=V%E;let Z=0;for(let J=0;J<p.batchSize;++J)for(let ae=L;ae<R;++ae){const ee=z+ae*m-C;for(let W=U;W<X;++W){const Q=D+W*y-S;Z+=I.get(J,ee,Q,Y)*_.get(J,ae,W,V)}}x.set(Z,z,D,Y,B)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const KSe={kernelName:e2,backendName:"cpu",kernelFunc:HSe};function XSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:c,inputShape:f}=r;it([s,a],"depthwiseConv2DNativeBackpropInput");const p=pt(s.shape),m=pt(a.shape),y=rs(f,a.shape,i,o,l,c,!0),b=new Ir(y.inShape,"float32"),v=b.values,[x,S,C]=b.strides,E=n.data.get(s.dataId).values,[k,I,$]=p,_=n.data.get(a.dataId).values,[z,L,R]=m,{batchSize:D,filterHeight:U,filterWidth:X,inChannels:V,inHeight:Y,inWidth:B,outChannels:Z,outHeight:J,outWidth:ae,strideHeight:ee,strideWidth:W}=y,Q=U-1-y.padInfo.top,se=X-1-y.padInfo.left,fe=Z/V;for(let Ne=0;Ne<D;++Ne)for(let _e=0;_e<V;++_e)for(let De=0;De<Y;++De){const He=De-Q,he=Math.max(0,Math.ceil(He/ee)),Te=Math.min(J,(U+He)/ee);for(let Me=0;Me<B;++Me){const ge=Me-se,ct=Math.max(0,Math.ceil(ge/W)),Ye=Math.min(ae,(X+ge)/W);let ft=0;for(let Ke=he;Ke<Te;++Ke){const Ct=Ke*ee-He;for(let kt=ct;kt<Ye;++kt){const Wt=kt*W-ge,Kt=k*Ne+I*Ke+$*kt,jn=z*(U-1-Ct)+L*(X-1-Wt)+R*_e;for(let Nt=0;Nt<fe;++Nt){const sr=_e*fe+Nt,Zt=E[Kt+sr],lr=_[jn+Nt];ft+=Zt*lr}}}v[x*Ne+S*De+C*Me+_e]=ft}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const YSe={kernelName:t2,backendName:"cpu",kernelFunc:XSe};function QSe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=Ee(r.shape),a=n.data.get(r.dataId).values,i=$t([s,s],r.dtype),o=i.values;for(let c=0;c<a.length;c++)o[c*s+c]=a[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const ZSe={kernelName:n2,backendName:"cpu",kernelFunc:QSe};const JSe={kernelName:F0,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:a,pad:i,dilations:o}=n,l=e,c=l.data.get(r.dataId).values,f=r.shape.length,p=l.data.get(s.dataId).values,m=s.shape.length,{batchSize:y,inHeight:b,inWidth:v,inChannels:x,outHeight:S,outWidth:C,padInfo:E,strideHeight:k,strideWidth:I,filterHeight:$,filterWidth:_,dilationHeight:z,dilationWidth:L,outShape:R}=Ab(r.shape,s.shape,a,i,"NHWC",o),D=Ee(R),U=R.length,X=ir(r.dtype,D);for(let Y=0;Y<y;++Y)for(let B=0;B<S;++B){const Z=B*k-E.top;for(let J=0;J<C;++J){const ae=J*I-E.left;for(let ee=0;ee<x;++ee){let W=Number.MIN_SAFE_INTEGER;for(let se=0;se<$;++se){const fe=Z+se*z;if(fe>=0&&fe<b)for(let Ne=0;Ne<_;++Ne){const _e=ae+Ne*L;if(_e>=0&&_e<v){const De=xo([Y,fe,_e,ee],f,pt(r.shape)),He=xo([se,Ne,ee],m,pt(s.shape)),he=c[De]+p[He];he>W&&(W=he)}}}const Q=xo([Y,B,J,ee],U,pt(R));X[Q]=W}}}return{dataId:l.write(Uu(X,r.dtype),R,r.dtype),shape:R,dtype:r.dtype}}};const e2e={kernelName:iw,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:a}=t,{strides:i,pad:o,dilations:l}=n,c=e,f=gi(r.shape,c.data.get(r.dataId).values),p=gi(s.shape,c.data.get(s.dataId).values),{batchSize:m,inHeight:y,inWidth:b,inChannels:v,outHeight:x,outWidth:S,padInfo:C,strideHeight:E,strideWidth:k,filterHeight:I,filterWidth:$,dilationHeight:_,dilationWidth:z,outShape:L}=Ab(r.shape,s.shape,i,o,"NHWC",l);q(a.rank===L.length,()=>`Error in ${iw}, dy must have the same rank as output ${L.length}, but got ${a.rank}`);const R=gi(L,c.data.get(a.dataId).values),D=J$(s.shape,s.dtype);for(let X=0;X<m;++X)for(let V=0;V<x;++V){const Y=V*E-C.top;for(let B=0;B<S;++B){const Z=B*k-C.left;for(let J=0;J<v;++J){let ae=Number.MIN_SAFE_INTEGER,ee=0,W=0;for(let Q=0;Q<I;++Q){const se=Y+Q*_;if(se>=0&&se<y)for(let fe=0;fe<$;++fe){const Ne=Z+fe*z;if(Ne>=0&&Ne<b){const _e=f[X][se][Ne][J]+p[Q][fe][J];_e>ae&&(ae=_e,ee=Q,W=fe)}}}D[ee][W][J]+=R[X][V][B][J]}}}return{dataId:c.write(Uu(D,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};const t2e={kernelName:aw,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:a}=t,{strides:i,pad:o,dilations:l}=n,c=e,f=gi(r.shape,c.data.get(r.dataId).values),p=gi(s.shape,c.data.get(s.dataId).values),{batchSize:m,inHeight:y,inWidth:b,inChannels:v,outHeight:x,outWidth:S,padInfo:C,strideHeight:E,strideWidth:k,filterHeight:I,filterWidth:$,dilationHeight:_,dilationWidth:z,outShape:L}=Ab(r.shape,s.shape,i,o,"NHWC",l);q(a.rank===L.length,()=>`Error in ${aw}, dy must have the same rank as output ${L.length}, but got ${a.rank}`);const R=gi(L,c.data.get(a.dataId).values),D=J$(r.shape,r.dtype);for(let X=0;X<m;++X)for(let V=0;V<x;++V){const Y=V*E-C.top;for(let B=0;B<S;++B){const Z=B*k-C.left;for(let J=0;J<v;++J){let ae=Number.MIN_SAFE_INTEGER,ee=Y<0?0:Y,W=Z<0?0:Z;for(let Q=0;Q<I;++Q){const se=Y+Q*_;if(se>=0&&se<y)for(let fe=0;fe<$;++fe){const Ne=Z+fe*z;if(Ne>=0&&Ne<b){const _e=f[X][se][Ne][J]+p[Q][fe][J];_e>ae&&(ae=_e,ee=se,W=Ne)}}}D[X][ee][W][J]+=R[X][V][B][J]}}}return{dataId:c.write(Uu(D,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function n2e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:a,options:i}=r,{contextOptions:o,imageOptions:l}=i||{},c=l?.alpha||1,f=o?.contextType||"2d";if(f!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const p=a.getContext(f,o?.contextAttributes||{});if(p==null)throw new Error(`Could not get the context with ${f} type.`);const[m,y]=s.shape.slice(0,2),b=s.shape.length===2?1:s.shape[2],v=n.data.get(s.dataId).values,x=s.dtype==="float32"?255:1,S=new Uint8ClampedArray(y*m*4);for(let E=0;E<m*y;++E){const k=[0,0,0,255*c];for(let $=0;$<b;$++){const _=v[E*b+$];if(s.dtype==="float32"){if(_<0||_>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${_}.`)}else if(s.dtype==="int32"&&(_<0||_>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${_}.`);b===1?(k[0]=_*x,k[1]=_*x,k[2]=_*x):k[$]=_*x}const I=E*4;S[I+0]=Math.round(k[0]),S[I+1]=Math.round(k[1]),S[I+2]=Math.round(k[2]),S[I+3]=Math.round(k[3])}a.width=y,a.height=m;const C=new ImageData(S,y,m);return p.putImageData(C,0,0),s}const r2e={kernelName:r2,backendName:"cpu",kernelFunc:n2e};function sx(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;it(s,"sum");let o;s.dtype==="bool"?o=Fu({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):o=bl({inputs:{x:s},backend:n});const l=o.shape.length,c=Lt(a,o.shape),f=nr(c,l);let p=c,m=o;f!=null&&(m=Ca({inputs:{x:o},backend:n,attrs:{perm:f}}),p=yr(p.length,l)),xs("sum",p,m.shape.length);const[y,b]=ss(m.shape,p),v=ba(m.dtype,"int32");let x=Cw(n,y,v);const S=Ee(b),C=n.data.get(x.dataId).values,E=n.data.get(m.dataId).values;for(let k=0;k<C.length;++k){const I=k*S;let $=0;for(let _=0;_<S;++_)$+=E[I+_];C[k]=$}if(i){const k=gr(x.shape,c),I=x;x=Pn({inputs:{x},backend:n,attrs:{shape:k}}),n.disposeIntermediateTensorInfo(I)}return n.disposeIntermediateTensorInfo(o),f!=null&&n.disposeIntermediateTensorInfo(m),x}const s2e={kernelName:xb,backendName:"cpu",kernelFunc:sx};function a2e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,a=e,{allDims:i,summedDims:o,idDims:l}=VO(s,a.length);GO(i.length,l,a);const{path:c,steps:f}=HO(o,l),p=f.length;let m=null,y=i.length;const b=[];for(let v=0;v<p;++v){for(const x of f[v]){const{permutationIndices:S,expandDims:C}=qO(y,l[x]);let E;KO(S)?E=a[x]:(E=Ca({inputs:{x:a[x]},backend:n,attrs:{perm:S}}),b.push(E));const k=E.shape.slice();for(let I=0;I<C.length;++I)k.splice(C[I],0,1);Ft(E.shape,k)||(E=Pn({inputs:{x:E},backend:n,attrs:{shape:k}}),b.push(E)),m===null?m=E:(m=GC({inputs:{a:E,b:m},backend:n}),b.push(m))}v<p-1&&(c[v]>=0&&(m=sx({inputs:{x:m},backend:n,attrs:{axis:c[v]-(i.length-y),keepDims:!1}}),b.push(m)),y--)}for(const v of b)v!==m&&n.disposeIntermediateTensorInfo(v);return m}const i2e={kernelName:s2,backendName:"cpu",kernelFunc:a2e};function o2e(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;it([r,s],"eluGrad");const a=new Float32Array(Ee(s.shape)),i=n.data.get(s.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<i.length;++l){const c=i[l];c>=0?a[l]=o[l]:a[l]=o[l]*(c+1)}return n.makeTensorInfo(s.shape,"float32",a)}const l2e={kernelName:a2,backendName:"cpu",kernelFunc:o2e};const c2e=PO,u2e=LO,d2e=MO,f2e=FO,h2e=BO,p2e=UO,m2e=yn(Vp,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+c2e*n);return e*(1-((((p2e*r+h2e)*r+f2e)*r+d2e)*r+u2e)*r*Math.exp(-n*n))}),g2e={kernelName:Vp,backendName:"cpu",kernelFunc:m2e};function Tw(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:a}=r,i=s.shape.length,o=s.shape.slice();let l=a;return a<0&&(q(-(i+1)<=a,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+a+1),o.splice(l,0,1),Pn({inputs:{x:s},backend:n,attrs:{shape:o}})}const y2e={kernelName:U0,backendName:"cpu",kernelFunc:Tw};const b2e=xr((t,e)=>t/e),A_=Wr(Up,b2e),Cj={kernelName:Up,backendName:"cpu",kernelFunc:A_};function BH(t,e,n){const r=t.shape,s=r[0],a=r[1],i=n.data.get(t.dataId),o=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,c=[s,a],f=Ee(c),p=ts("float32",f),m=ts("float32",f);for(let x=0;x<s;x++){const S=Sf({inputs:{x:o},backend:n,attrs:{begin:[x,0],size:[1,a]}}),C=Sf({inputs:{x:l},backend:n,attrs:{begin:[x,0],size:[1,a]}}),E=La({inputs:{real:S,imag:C},backend:n}),{real:k,imag:I}=x2e(E,e,n),$=dc(k,I);for(let _=0;_<a;_++){const z=WO($,_);p[x*a+_]=z.real,m[x*a+_]=z.imag}n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(E)}const y=n.makeTensorInfo(c,"float32",p),b=n.makeTensorInfo(c,"float32",m),v=La({inputs:{real:y,imag:b},backend:n});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),v}function x2e(t,e,n){const r=Ee(t.shape),s=n.data.get(t.dataId),a=n.data.get(s.complexTensorInfos.real.dataId).values,i=n.data.get(s.complexTensorInfos.imag.dataId).values;if(v2e(r)){const o=kj(a,i,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",o.real),f=n.makeTensorInfo(l,"float32",o.imag),p=n.makeTensorInfo([],"float32",vc(r,"float32")),m=bl({inputs:{x:p},backend:n}),y=Cj.kernelFunc({inputs:{a:c,b:p},backend:n}),b=Cj.kernelFunc({inputs:{a:f,b:m},backend:n}),v=n.data.get(y.dataId).values,x=n.data.get(b.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),{real:v,imag:x}}return o}else{const o=dc(a,i),l=w2e(o,r,e);return Y9(l)}}function v2e(t){return(t&t-1)===0}function kj(t,e,n,r,s){if(n===1)return{real:t,imag:e};const a=dc(t,e),i=n/2,o=Q9(a),l=o.real,c=o.imag,f=[l.length],p=s.makeTensorInfo(f,"float32",l),m=s.makeTensorInfo(f,"float32",c),y=La({inputs:{real:p,imag:m},backend:s}),b=Z9(a),v=b.real,x=b.imag,S=[v.length],C=s.makeTensorInfo(S,"float32",v),E=s.makeTensorInfo(S,"float32",x),k=La({inputs:{real:C,imag:E},backend:s}),I=kj(l,c,i,r,s),$=I.real,_=I.imag,z=[$.length],L=s.makeTensorInfo(z,"float32",$),R=s.makeTensorInfo(z,"float32",_),D=La({inputs:{real:L,imag:R},backend:s}),U=kj(v,x,i,r,s),X=U.real,V=U.imag,Y=[X.length],B=s.makeTensorInfo(Y,"float32",X),Z=s.makeTensorInfo(Y,"float32",V),J=La({inputs:{real:B,imag:Z},backend:s}),ae=e7(n,r),ee=[ae.real.length],W=s.makeTensorInfo(ee,"float32",ae.real),Q=s.makeTensorInfo(ee,"float32",ae.imag),se=La({inputs:{real:W,imag:Q},backend:s}),fe=GC({inputs:{a:se,b:J},backend:s}),Ne=dp({inputs:{a:D,b:fe},backend:s}),_e=E_({inputs:{a:D,b:fe},backend:s}),De=wf({inputs:{input:Ne},backend:s}),He=wf({inputs:{input:_e},backend:s}),he=fp({inputs:{input:Ne},backend:s}),Te=fp({inputs:{input:_e},backend:s}),Me=hp({inputs:[De,He],backend:s,attrs:{axis:0}}),ge=hp({inputs:[he,Te],backend:s,attrs:{axis:0}}),ct=s.data.get(Me.dataId).values,Ye=s.data.get(ge.dataId).values;return s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(m),s.disposeIntermediateTensorInfo(y),s.disposeIntermediateTensorInfo(C),s.disposeIntermediateTensorInfo(E),s.disposeIntermediateTensorInfo(k),s.disposeIntermediateTensorInfo(L),s.disposeIntermediateTensorInfo(R),s.disposeIntermediateTensorInfo(D),s.disposeIntermediateTensorInfo(B),s.disposeIntermediateTensorInfo(Z),s.disposeIntermediateTensorInfo(J),s.disposeIntermediateTensorInfo(W),s.disposeIntermediateTensorInfo(Q),s.disposeIntermediateTensorInfo(se),s.disposeIntermediateTensorInfo(fe),s.disposeIntermediateTensorInfo(Ne),s.disposeIntermediateTensorInfo(_e),s.disposeIntermediateTensorInfo(De),s.disposeIntermediateTensorInfo(he),s.disposeIntermediateTensorInfo(He),s.disposeIntermediateTensorInfo(Te),s.disposeIntermediateTensorInfo(Me),s.disposeIntermediateTensorInfo(ge),{real:ct,imag:Ye}}function w2e(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let a=0,i=0;for(let o=0;o<e;o++){const l=t7(s*o,e,n),c=WO(t,o);a+=c.real*l.real-c.imag*l.imag,i+=c.real*l.imag+c.imag*l.real}n&&(a/=e,i/=e),J9(r,a,i,s)}return r}function S2e(t){const{inputs:e,backend:n}=t,{input:r}=e,s=Ee(r.shape),a=r.shape[r.shape.length-1],i=s/a,o=Pn({inputs:{x:r},backend:n,attrs:{shape:[i,a]}}),l=BH(o,!1,n),c=Pn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const C2e={kernelName:i2,backendName:"cpu",kernelFunc:S2e};function j_(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:a}=n,i=a||Of(s),o=ir(i,Ee(r));return N2e(o,s,i),e.makeTensorInfo(r,i,o)}const k2e={kernelName:o2,backendName:"cpu",kernelFunc:j_};function N2e(t,e,n){t.fill(e)}const T2e={kernelName:l2,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,a=ts(r.dtype,Ee(r.shape)),[i,o,l,c]=r.shape,f=s.data.get(r.dataId).values;for(let m=0;m<i;m++){const y=m*l*o*c;for(let b=0;b<o;b++){const v=b*(l*c);for(let x=0;x<l;x++){const S=x*c;for(let C=0;C<c;C++){const E=Math.round(l-x-1),k=y+v+S+C;let I=f[k];if(E>=0&&E<l){const $=E*c,_=y+v+$+C;I=f[_]}a[k]=I}}}}return{dataId:s.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function E2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:f,dilations:p,dimRoundingMode:m,activation:y,leakyreluAlpha:b}=r;let v=MH({inputs:{x:s,filter:a},backend:n,attrs:{strides:l,pad:c,dataFormat:f,dilations:p,dimRoundingMode:m}});if(i){const x=v;if(f==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const S=Pn({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});v=dp({inputs:{a:v,b:S},backend:n}),n.disposeIntermediateTensorInfo(S)}else v=dp({inputs:{a:v,b:i},backend:n});n.disposeIntermediateTensorInfo(x)}if(y){const x=v;if(f==="NCHW"&&y==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const S=Pn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=Nw(n,v,y,S,b),n.disposeIntermediateTensorInfo(S)}else v=Nw(n,v,y,o,b);n.disposeIntermediateTensorInfo(x)}return v}const I2e={kernelName:zy,backendName:"cpu",kernelFunc:E2e};function A2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:f,dilations:p,dimRoundingMode:m,activation:y,leakyreluAlpha:b}=r;let v=FH({inputs:{x:s,filter:a},backend:n,attrs:{strides:l,pad:c,dataFormat:f,dilations:p,dimRoundingMode:m}});if(i){const x=v;v=dp({inputs:{a:v,b:i},backend:n}),n.disposeIntermediateTensorInfo(x)}if(y){const x=v;v=Nw(n,v,y,o,b),n.disposeIntermediateTensorInfo(x)}return v}const j2e={kernelName:Py,backendName:"cpu",kernelFunc:A2e};function $2e(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,a=Ee(r.shape),i=s.shape,o=i[i.length-1],[l,c,f,p]=jC(r,s);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const m=n.data.get(s.dataId).values,y=n.bufferSync(r),b=QG(m,y,r.dtype,c,o,f,p,r.shape,a);return n.makeTensorInfo(l,r.dtype,b.values)}const R2e={kernelName:c2,backendName:"cpu",kernelFunc:$2e};function O2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:a}=e,{axis:i,batchDims:o}=r;it([s,a],"gatherV2");const l=Lt(i,s.shape)[0],c=n.data.get(a.dataId).values,f=s.shape[l];for(let k=0;k<c.length;++k){const I=c[k];q(I<=f-1&&I>=0,()=>`GatherV2: the index value ${I} is not in [0, ${f-1}]`)}let p=o;o==null&&(p=0);const m=Ee(a.shape),y=YO(s,a,l,p),b=Pn({inputs:{x:s},backend:n,attrs:{shape:[y.batchSize,y.outerSize,y.dimSize,y.sliceSize]}}),v=Pn({inputs:{x:a},backend:n,attrs:{shape:[y.batchSize,m/y.batchSize]}}),x=[y.batchSize,y.outerSize,m/y.batchSize,y.sliceSize],S=n.bufferSync(v),C=n.bufferSync(b),E=ZG(C,S,x);return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(y.outputShape,E.dtype,E.values)}const _2e={kernelName:V0,backendName:"cpu",kernelFunc:O2e};function D2e(t){const{inputs:e,backend:n}=t,{input:r}=e,s=Ee(r.shape),a=r.shape[r.shape.length-1],i=s/a,o=Pn({inputs:{x:r},backend:n,attrs:{shape:[i,a]}}),l=BH(o,!0,n),c=Pn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const z2e={kernelName:u2,backendName:"cpu",kernelFunc:D2e};const P2e=yn(Qp,t=>Number.isFinite(t)?1:0,"bool"),L2e={kernelName:Qp,backendName:"cpu",kernelFunc:P2e};const M2e=yn(Zp,t=>Math.abs(t)===1/0?1:0,"bool"),F2e={kernelName:Zp,backendName:"cpu",kernelFunc:M2e};const B2e=yn(Jp,t=>Number.isNaN(t)?1:0,"bool"),U2e={kernelName:Jp,backendName:"cpu",kernelFunc:B2e};function W2e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:a}=n,i=rH(r,s,a);return e.makeTensorInfo([i.length],"float32",i)}const V2e={kernelName:f2,backendName:"cpu",kernelFunc:W2e};const q2e=yn(tm,t=>Math.log1p(t)),G2e={kernelName:tm,backendName:"cpu",kernelFunc:q2e};const H2e=xr((t,e)=>t&&e),K2e=Wr(X0,H2e,null,"bool"),X2e={kernelName:X0,backendName:"cpu",kernelFunc:K2e};const Y2e=yn(Y0,t=>t?0:1,"bool"),Q2e={kernelName:Y0,backendName:"cpu",kernelFunc:Y2e};const Z2e=xr((t,e)=>t||e),J2e=Wr(Q0,Z2e,null,"bool"),eCe={kernelName:Q0,backendName:"cpu",kernelFunc:J2e};function tCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:a,bias:i,alpha:o,beta:l}=r;it(s,"LRN");const c=s.shape[3],f=c-1,p=n.data.get(s.dataId).values,m=Ee(s.shape),y=new Float32Array(m);function b(v){const x=v%c;let S=v-x+Math.max(0,x-a);const C=v-x+Math.min(x+a,f);let E=0;for(;S<=C;S++){const k=p[S];E+=k*k}return E}for(let v=0;v<m;v++){const x=b(v),S=p[v]*Math.pow(i+o*x,-l);y[v]=S}return n.makeTensorInfo(s.shape,s.dtype,y)}const nCe={kernelName:Z0,backendName:"cpu",kernelFunc:tCe};function rCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:a,dy:i}=e,{depthRadius:o,bias:l,alpha:c,beta:f}=r;it(i,"LRNGrad");const p=Ee(i.shape),m=i.shape[3],y=n.data.get(i.dataId).values,b=n.data.get(s.dataId).values,v=n.data.get(a.dataId).values,x=new Float32Array(p),S=p;for(let C=0;C<S;C++){const E=C%m,k=C-E+Math.max(0,E-o),I=C-E+Math.min(m,E+o+1);let $=0;for(let _=k;_<I;_++)$+=Math.pow(b[_],2);$=c*$+l;for(let _=k;_<I;_++){let z=-2*c*f*b[_]*v[C]/$;C===_&&(z+=Math.pow($,-f)),z*=y[C],x[_]+=z}}return n.makeTensorInfo(i.shape,s.dtype,x)}const sCe={kernelName:h2,backendName:"cpu",kernelFunc:rCe};function UH(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:a,keepDims:i}=r,o=n;let l=s.shape;const c=l.length,f=Lt(a,l);let p=f;const m=nr(p,c);let y=o.data.get(s.dataId).values;if(m!=null){const k=new Array(c);for(let I=0;I<k.length;I++)k[I]=l[m[I]];y=N_(y,l,s.dtype,m,k),p=yr(p.length,c),l=k}it(s,"max"),xs("max",p,c);const[b,v]=ss(l,p),x=Ee(v),S=aH(y,x,b,s.dtype),C=o.write(S,b,s.dtype);let E=b;return i&&(E=gr(b,f)),{dataId:C,shape:E,dtype:s.dtype}}const aCe={kernelName:J0,backendName:"cpu",kernelFunc:UH};function iCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;it(s,"maxPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,c=1;q(bs(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const f=Zi(s.shape,a,i,c,o,l);let p;if(f.filterWidth===1&&f.filterHeight===1&&Ft(f.inShape,f.outShape))p=bl({inputs:{x:s},backend:n});else{const m=n.data.get(s.dataId).values,y=pt(s.shape),b=I_(m,s.shape,s.dtype,y,f,"max");p=n.makeTensorInfo(f.outShape,s.dtype,b.values)}return p}const oCe={kernelName:eb,backendName:"cpu",kernelFunc:iCe};function lCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:c}=r;it(s,"maxPool3d");const f=wc(s.shape,a,i,1,o,l,c),p=n.data.get(s.dataId).values,m=LH(p,s.shape,s.dtype,pt(s.shape),f,"max");return n.makeTensorInfo(m.shape,"float32",m.values)}const cCe={kernelName:tb,backendName:"cpu",kernelFunc:lCe};function uCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,{filterSize:i,strides:o,pad:l,dimRoundingMode:c}=r;it([s,a],"maxPool3DGrad");const f=wc(a.shape,i,o,1,l,c),p=n.bufferSync(a),m=Zwe(p,f),y=f.strideDepth,b=f.strideHeight,v=f.strideWidth,x=f.dilationDepth,S=f.dilationHeight,C=f.dilationWidth,E=f.effectiveFilterDepth,k=f.effectiveFilterHeight,I=f.effectiveFilterWidth,$=E-1-f.padInfo.front,_=I-1-f.padInfo.left,z=k-1-f.padInfo.top,L=$t(a.shape,"float32"),R=n.bufferSync(s);for(let D=0;D<f.batchSize;++D)for(let U=0;U<f.inChannels;++U)for(let X=0;X<f.inDepth;++X)for(let V=0;V<f.inHeight;++V)for(let Y=0;Y<f.inWidth;++Y){const B=X-$,Z=V-z,J=Y-_;let ae=0;for(let ee=0;ee<E;ee+=x){const W=(B+ee)/y;if(!(W<0||W>=f.outDepth||Math.floor(W)!==W))for(let Q=0;Q<k;Q+=S){const se=(Z+Q)/b;if(!(se<0||se>=f.outHeight||Math.floor(se)!==se))for(let fe=0;fe<I;fe+=C){const Ne=(J+fe)/v;if(Ne<0||Ne>=f.outWidth||Math.floor(Ne)!==Ne)continue;const _e=E*k*I-1-m.get(D,W,se,Ne,U),De=ee*k*I+Q*I+fe,He=_e===De?1:0;if(He===0)continue;const he=R.get(D,W,se,Ne,U);ae+=he*He}}}L.set(ae,D,X,V,Y,U)}return n.makeTensorInfo(L.shape,L.dtype,L.values)}const dCe={kernelName:m2,backendName:"cpu",kernelFunc:uCe};function fCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a,output:i}=e,o=a;it([a,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:f,dimRoundingMode:p}=r,m=Zi(o.shape,l,c,1,f,p),y=n.data.get(o.dataId).values,b=$t(m.outShape,o.dtype,PH(y,o.shape,o.dtype,m).values),v=m.strideHeight,x=m.strideWidth,S=m.dilationHeight,C=m.dilationWidth,E=m.effectiveFilterHeight,k=m.effectiveFilterWidth,I=k-1-m.padInfo.left,$=E-1-m.padInfo.top,_=$t(o.shape,"float32"),z=n.data.get(s.dataId).values,L=$t(s.shape,"float32",z);for(let R=0;R<m.batchSize;++R)for(let D=0;D<m.inChannels;++D)for(let U=0;U<m.inHeight;++U)for(let X=0;X<m.inWidth;++X){const V=U-$,Y=X-I;let B=0;for(let Z=0;Z<E;Z+=S){const J=(V+Z)/v;if(!(J<0||J>=m.outHeight||Math.floor(J)!==J))for(let ae=0;ae<k;ae+=C){const ee=(Y+ae)/x;if(ee<0||ee>=m.outWidth||Math.floor(ee)!==ee)continue;const W=E*k-1-b.get(R,J,ee,D),Q=Z*k+ae,se=W===Q?1:0;if(se===0)continue;const fe=L.get(R,J,ee,D);B+=fe*se}}_.set(B,R,U,X,D)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const hCe={kernelName:p2,backendName:"cpu",kernelFunc:fCe};function pCe(t,e,n,r,s){const a=pt(e),i=I_(t,e,n,a,s,"max"),o=PH(t,e,n,s,!0,r);return[i.values,o.values]}const mCe={kernelName:g2,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:a,pad:i,includeBatchInIndex:o}=e,l=n;it(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,f=Zi(r.shape,s,a,[1,1],i),[p,m]=pCe(c,r.shape,r.dtype,o,f),y=l.write(p,f.outShape,r.dtype),b=l.write(m,f.outShape,r.dtype);return[{dataId:y,shape:f.outShape,dtype:r.dtype},{dataId:b,shape:f.outShape,dtype:"int32"}]}};function gCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r,o=Lt(a,s.shape),c=ss(s.shape,o)[1],f=Ee(c),p=[],m=n.makeTensorInfo([],"float32",new Float32Array([f]));p.push(m);const y=Fu({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});p.push(y);const b=A_({inputs:{a:y,b:m},backend:n});p.push(b);const v=sx({inputs:{x:b},backend:n,attrs:{axis:a,keepDims:i}});return p.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}const yCe={kernelName:nb,backendName:"cpu",kernelFunc:gCe};function bCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;it(s,"min");const o=Lt(a,s.shape);let l=o;const c=nr(l,s.shape.length);let f=s;c!=null&&(f=Ca({inputs:{x:s},backend:n,attrs:{perm:c}}),l=yr(l.length,s.shape.length)),xs("min",l,f.shape.length);const[p,m]=ss(f.shape,l),y=Ee(m),b=gs(Ee(p),f.dtype),v=n.data.get(f.dataId).values;for(let S=0;S<b.length;++S){const C=S*y;let E=v[C];for(let k=0;k<y;++k){const I=v[C+k];(Number.isNaN(I)||I<E)&&(E=I)}b[S]=E}c!=null&&n.disposeIntermediateTensorInfo(f);const x=n.makeTensorInfo(p,f.dtype,b);if(i){const S=gr(p,o),C=Pn({inputs:{x},backend:n,attrs:{shape:S}});return n.disposeIntermediateTensorInfo(x),C}return x}const xCe={kernelName:rb,backendName:"cpu",kernelFunc:bCe};function vCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:a,mode:i}=r;it(s,"mirrorPad");const o=a.map((E,k)=>E[0]+s.shape[k]+E[1]),l=a.map(E=>E[0]),c=a.map((E,k)=>E[0]+s.shape[k]),f=i==="reflect"?0:1,p=n.data.get(s.dataId).values,m=s.shape.length,y=pt(s.shape),b=Ee(o),v=o.length,x=pt(o),S=ts(s.dtype,b);for(let E=0;E<b;E++){let k=_f(E,v,x);for(let $=0;$<v;$++)k[$]<l[$]?k[$]=l[$]*2-k[$]-f:k[$]>=c[$]&&(k[$]=(c[$]-1)*2-k[$]+f);k=k.map(($,_)=>$-l[_]);const I=xo(k,m,y);S[E]=p[I]}return{dataId:n.write(S,o,s.dtype),shape:o,dtype:s.dtype}}const wCe={kernelName:sb,backendName:"cpu",kernelFunc:vCe};const SCe=xr(((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})),CCe=Wr(sm,SCe),kCe={kernelName:sm,backendName:"cpu",kernelFunc:CCe};function WH(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:a}=r,i=s.shape.length;let o=a;if(o===-1&&(o=i-1),o!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${o}`);const l=Lt([o],s.shape),c=UH({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),f=gr(c.shape,l),p=Pn({inputs:{x:c},backend:n,attrs:{shape:f}}),m=E_({inputs:{a:s,b:p},backend:n}),y=HG({inputs:{x:m},backend:n}),b=sx({inputs:{x:y},backend:n,attrs:{axis:l,keepDims:!1}}),v=Pn({inputs:{x:b},backend:n,attrs:{shape:f}}),x=A_({inputs:{a:y,b:v},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v),x}const NCe={kernelName:Sb,backendName:"cpu",kernelFunc:WH};function TCe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:a,seed:i,normalized:o}=r;it(s,"multinomial");const l=o?s:WH({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],f=l.shape[1],p=n.data.get(l.dataId).values,m=[c,a],y=gs(Ee(m),"int32");for(let b=0;b<c;++b){const v=b*f,x=new Float32Array(f-1);x[0]=p[v];for(let E=1;E<x.length;++E)x[E]=x[E-1]+p[v+E];const S=aC.alea(i.toString()),C=b*a;for(let E=0;E<a;++E){const k=S();y[C+E]=x.length;for(let I=0;I<x.length;I++)if(k<x[I]){y[C+E]=I;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(m,"int32",y)}const ECe={kernelName:y2,backendName:"cpu",kernelFunc:TCe};const ICe=TC;function ACe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r;it(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values,{selectedIndices:p}=ICe(c,f,i,o,l);return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}const jCe={kernelName:b2,backendName:"cpu",kernelFunc:ACe};const $Ce=EC;function RCe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;it(s,"NonMaxSuppressionPadded");const f=n.data.get(s.dataId).values,p=n.data.get(a.dataId).values,{selectedIndices:m,validOutputs:y}=$Ce(f,p,i,o,l,c);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([],"int32",new Int32Array([y]))]}const OCe={kernelName:x2,backendName:"cpu",kernelFunc:RCe};const _Ce=IC;function DCe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;it(s,"NonMaxSuppressionWithScore");const f=n.data.get(s.dataId).values,p=n.data.get(a.dataId).values,m=i,y=o,b=l,v=c,{selectedIndices:x,selectedScores:S}=_Ce(f,p,m,y,b,v);return[n.makeTensorInfo([x.length],"int32",new Int32Array(x)),n.makeTensorInfo([S.length],"float32",new Float32Array(S))]}const zCe={kernelName:v2,backendName:"cpu",kernelFunc:DCe};function PCe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:a,depth:i,onValue:o,offValue:l}=r;it(s,"oneHot");const c=Ee(s.shape),f=new Float32Array(c*i);f.fill(l);const p=n.data.get(s.dataId).values;for(let m=0;m<c;++m)p[m]>=0&&p[m]<i&&(f[m*i+p[m]]=o);return n.makeTensorInfo([...s.shape,i],a,f)}const LCe={kernelName:lb,backendName:"cpu",kernelFunc:PCe};function Ew(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=wf({inputs:{input:r},backend:n}),a=Ew({inputs:{x:s},backend:n}),i=fp({inputs:{input:r},backend:n}),o=Ew({inputs:{x:i},backend:n}),l=La({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}else return j_({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const MCe={kernelName:Tb,backendName:"cpu",kernelFunc:Ew};function VH(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=wf({inputs:{input:r},backend:n}),a=VH({inputs:{x:s},backend:n}),i=fp({inputs:{input:r},backend:n}),o=Ew({inputs:{x:i},backend:n}),l=La({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}else return j_({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const FCe={kernelName:ob,backendName:"cpu",kernelFunc:VH};function qH(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return Tw({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const a=e[0].shape,i=e[0].dtype;e.forEach(f=>{ys(a,f.shape,"All tensors passed to stack must have matching shapes"),q(i===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(f=>{const p=Tw({inputs:{input:f},backend:n,attrs:{dim:s}});return o.push(p),p}),c=hp({inputs:l,backend:n,attrs:{axis:s}});return o.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const BCe={kernelName:cb,backendName:"cpu",kernelFunc:qH};function UCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:a,constantValue:i}=r;it(s,"pad");const o=a.map((C,E)=>C[0]+s.shape[E]+C[1]),l=a.map(C=>C[0]),c=n.data.get(s.dataId).values,f=Ee(s.shape),p=s.shape.length,m=pt(s.shape),y=Ee(o),b=o.length,v=pt(o),x=ts(s.dtype,y);i!==0&&x.fill(i);for(let C=0;C<f;C++){const k=_f(C,p,m).map(($,_)=>$+l[_]),I=xo(k,b,v);x[I]=c[C]}return{dataId:n.write(x,o,s.dtype),shape:o,dtype:s.dtype}}const GH={kernelName:ub,backendName:"cpu",kernelFunc:UCe};const WCe=xr((t,e)=>Math.pow(t,e)),VCe=Wr(im,WCe),qCe={kernelName:im,backendName:"cpu",kernelFunc:VCe};function GCe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:a,indices:i}=e,{outputRaggedRank:o}=r,l=s.map(S=>n.data.get(S.dataId).values),c=s.map(S=>S.shape),f=n.data.get(a.dataId).values,p=n.data.get(i.dataId).values,[m,y,b]=dH(l,c,f,a.shape,a.dtype,p,i.shape),v=m.map(S=>n.makeTensorInfo([S.length],"int32",S)),x=n.makeTensorInfo(b,a.dtype,y);return v.concat([x])}const HCe={kernelName:w2,backendName:"cpu",kernelFunc:GCe};function KCe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,[c,f]=fH(i,r.shape,r.dtype,o,s.shape,l,a.shape),p=n.makeTensorInfo([c.length],"int32",c),m=n.makeTensorInfo([f.length],r.dtype,f);return[p,m]}const XCe={kernelName:S2,backendName:"cpu",kernelFunc:KCe};function YCe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:a,defaultValue:i,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values,p=n.data.get(i.dataId).values,m=o.map(x=>n.data.get(x.dataId).values),y=o.map(x=>x.shape),[b,v]=hH(c,s.shape,f,a.shape,a.dtype,p,i.shape,m,y,l);return n.makeTensorInfo(b,a.dtype,v)}const QCe={kernelName:C2,backendName:"cpu",kernelFunc:YCe};function ZCe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:a,step:i}=n,o=pH(r,s,i,a);return e.makeTensorInfo([o.length],a,o)}const JCe={kernelName:k2,backendName:"cpu",kernelFunc:ZCe};const eke=yn(om,t=>1/t),tke={kernelName:om,backendName:"cpu",kernelFunc:eke};function nke(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r;it(s,"resizeBilinear");const l=pt(s.shape),[c,f]=o,[p,m,y,b]=s.shape,v=n.data.get(s.dataId).values,x=new Float32Array(Ee([p,c,f,b])),S=[a&&c>1?m-1:m,a&&f>1?y-1:y],C=[a&&c>1?c-1:c,a&&f>1?f-1:f];let E=0;const k=S[0]/C[0],I=S[1]/C[1];for(let $=0;$<p;$++)for(let _=0;_<c;_++){let z;i?z=k*(_+.5)-.5:z=k*_;const L=Math.max(0,Math.floor(z)),R=z-L,D=Math.min(m-1,Math.ceil(z)),U=$*l[0]+L*l[1],X=$*l[0]+D*l[1];for(let V=0;V<f;V++){let Y;i?Y=I*(V+.5)-.5:Y=I*V;const B=Math.max(0,Math.floor(Y)),Z=Y-B,J=Math.min(y-1,Math.ceil(Y)),ae=U+B*l[2],ee=X+B*l[2],W=U+J*l[2],Q=X+J*l[2];for(let se=0;se<b;se++){const fe=v[ae+se],Ne=v[ee+se],_e=v[W+se],De=v[Q+se],He=fe+(_e-fe)*Z,he=Ne+(De-Ne)*Z,Te=He+(he-He)*R;x[E++]=Te}}}return n.makeTensorInfo([p,c,f,b],"float32",x)}const rke={kernelName:mb,backendName:"cpu",kernelFunc:nke};function ske(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:a}=e,{alignCorners:i}=r;it([a,s],"resizeBilinearGrad");const o=pt(s.shape),[l,c,f,p]=s.shape,[,m,y]=a.shape,b=new Float32Array(l*c*f*p),v=[i&&m>1?c-1:c,i&&y>1?f-1:f],x=[i&&m>1?m-1:m,i&&y>1?y-1:y],S=v[0]/x[0],C=v[1]/x[1],E=n.data.get(a.dataId).values;let k=0;for(let I=0;I<l;I++){const $=I*o[0];for(let _=0;_<m;_++){const z=_*S,L=Math.floor(z),R=Math.min(Math.ceil(z),c-1),D=$+L*o[1],U=$+R*o[1],X=z-L,V=1-X;for(let Y=0;Y<y;Y++){const B=Y*C,Z=Math.floor(B),J=Math.min(Math.ceil(B),f-1),ae=B-Z,ee=1-ae,W=D+Z*o[2],Q=D+J*o[2],se=U+Z*o[2],fe=U+J*o[2],Ne=V*ee,_e=V*ae,De=X*ee,He=X*ae;for(let he=0;he<p;he++){const Te=E[k++];b[W+he]+=Te*Ne,b[Q+he]+=Te*_e,b[se+he]+=Te*De,b[fe+he]+=Te*He}}}}return n.makeTensorInfo([l,f,c,p],"float32",b)}const ake={kernelName:E2,backendName:"cpu",kernelFunc:ske};function ike(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r;it(s,"resizeNearestNeighbor");const l=pt(s.shape),[c,f]=o,[p,m,y,b]=s.shape,v=n.data.get(s.dataId).values,x=new Float32Array(p*c*f*b),S=[a&&c>1?m-1:m,a&&f>1?y-1:y],C=[a&&c>1?c-1:c,a&&f>1?f-1:f],E=S[0]/C[0],k=S[1]/C[1];let I=0;for(let $=0;$<p;$++){const _=$*l[0];for(let z=0;z<c;z++){const L=i?E*(z+.5):E*z;let R=Math.min(m-1,a?Math.round(L):Math.floor(L));i&&(R=Math.max(0,R));const D=_+R*l[1];for(let U=0;U<f;U++){const X=i?k*(U+.5):k*U;let V=Math.min(y-1,a?Math.round(X):Math.floor(X));i&&(V=Math.max(0,V));const Y=D+V*l[2];for(let B=0;B<b;B++){const Z=v[Y+B];x[I++]=Z}}}}return n.makeTensorInfo([p,c,f,b],s.dtype,x)}const oke={kernelName:pb,backendName:"cpu",kernelFunc:ike};function lke(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:a}=e,{alignCorners:i}=r;it([a,s],"resizeNearestNeighborGrad");const o=pt(s.shape),l=pt(a.shape),[c,f,p,m]=s.shape,[,y,b]=a.shape,v=new Float32Array(c*f*p*m),x=n.data.get(a.dataId).values,S=[i&&y>1?f-1:f,i&&b>1?p-1:p],C=[i&&y>1?y-1:y,i&&b>1?b-1:b],E=S[0]/C[0],k=S[1]/C[1],I=1/E,$=1/k,_=Math.ceil(I)*2+2,z=Math.ceil($)*2+2;for(let L=0;L<c;L++){const R=L*o[0];for(let D=0;D<f;D++){const U=R+D*o[1],X=Math.floor(D*I),V=Math.floor(X-_/2);for(let Y=0;Y<p;Y++){const B=U+Y*o[2],Z=Math.floor(Y*$),J=Math.floor(Z-z/2);for(let ae=0;ae<m;ae++){let ee=0;for(let W=0;W<_;W++){const Q=W+V;if(Q<0||Q>=y)continue;const se=R+Q*l[1],fe=Q*E,Ne=Math.min(f-1,i?Math.round(fe):Math.floor(fe));if(D===Ne)for(let _e=0;_e<z;_e++){const De=_e+J;if(De<0||De>=b)continue;const He=se+De*l[2],he=De*k,Te=Math.min(p-1,i?Math.round(he):Math.floor(he));Y===Te&&(ee+=x[He+ae])}}v[B+ae]=ee}}}}return n.makeTensorInfo(s.shape,s.dtype,v)}const cke={kernelName:T2,backendName:"cpu",kernelFunc:lke};function uke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:a}=r;it(s,"reverse");const i=s.shape.length,o=Lt(a,s.shape);if(i===0)return bl({inputs:{x:s},backend:n});const l=new Ir(s.shape,s.dtype),c=n.bufferSync(s);for(let f=0;f<l.size;f++){const p=l.indexToLoc(f),m=p.slice();o.forEach(y=>m[y]=s.shape[y]-1-m[y]),l.set(c.get(...m),...p)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const dke={kernelName:gb,backendName:"cpu",kernelFunc:uke};const fke={kernelName:V2,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:a,center:i}=e,o=n,l=ts(r.dtype,Ee(r.shape)),[c,f,p,m]=r.shape,[y,b]=_O(i,f,p),v=255,x=Math.sin(s),S=Math.cos(s),C=o.data.get(r.dataId).values;for(let k=0;k<c;k++){const I=k*p*f*m;for(let $=0;$<f;$++){const _=$*(p*m);for(let z=0;z<p;z++){const L=z*m;for(let R=0;R<m;R++){const D=[c,$,z,R],U=D[2],X=D[1];let V=(U-y)*S-(X-b)*x,Y=(U-y)*x+(X-b)*S;V=Math.round(V+y),Y=Math.round(Y+b);let B=a;if(typeof a!="number"&&(R===3?B=v:B=a[R]),V>=0&&V<p&&Y>=0&&Y<f){const J=Y*(p*m),ae=V*m,ee=I+J+ae+R;B=C[ee]}const Z=I+_+L+R;l[Z]=B}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};const hke=yn(um,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),pke={kernelName:um,backendName:"cpu",kernelFunc:hke};function mke(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:a}=e,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:f,outputSize:p}=Xu(a,s,i),m=!0,y=n.bufferSync(s),b=n.bufferSync(a),v=Vd(y,b,i,p,c,l,o,f,0,m);return n.makeTensorInfo(i,v.dtype,v.values)}const gke={kernelName:I2,backendName:"cpu",kernelFunc:mke};function yke(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function bke(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function xke(t,e,n,r,s,a){const i=ir("int32",n*s);for(let o=0;o<n;++o){const l=t.slice(o*r,(o+1)*r),c=o*s;for(let f=0;f<s;++f)i[c+f]=a==="left"?yke(l,e[f+c]):bke(l,e[f+c])}return i}function vke(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:a}=e,{side:i}=r,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,c=xke(o,l,s.shape[0],s.shape[1],a.shape[1],i);return n.makeTensorInfo(a.shape,"int32",c)}const wke={kernelName:j2,backendName:"cpu",kernelFunc:vke};function Ske(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:a}=e;it([r,s,a],"select");const i=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(a.dataId).values,f=ba(s.dtype,a.dtype),p=gs(Ee(s.shape),f);let m=0;const y=i===0||i>1||s.shape.length===1?1:Ee(s.shape.slice(1));for(let b=0;b<o.length;b++)for(let v=0;v<y;v++)o[b]===1?p[m++]=l[b]:p[m++]=c[b];return n.makeTensorInfo(s.shape,f,p)}const Cke={kernelName:yb,backendName:"cpu",kernelFunc:Ske};const kke=OC,Nke=_C,Tke=yn(fm,t=>t>=0?Nke*t:kke*(Math.exp(t)-1)),Eke={kernelName:fm,backendName:"cpu",kernelFunc:Tke};const Ike=yn(mm,t=>t<0?-1:t>0?1:0),Ake={kernelName:mm,backendName:"cpu",kernelFunc:Ike};const jke=yn(hm,t=>Math.sin(t)),$ke={kernelName:hm,backendName:"cpu",kernelFunc:jke};const Rke=yn(pm,t=>Math.sinh(t)),Oke={kernelName:pm,backendName:"cpu",kernelFunc:Rke};const _ke=11920928955078125e-23,eM=Math.log(_ke)+2,Dke=yn(ym,t=>{const e=t>-eM,n=t<eM,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),zke={kernelName:ym,backendName:"cpu",kernelFunc:Dke};function Pke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:a,paddings:i}=r;it([s],"spaceToBatchND");const o=Ee(a),l=[[0,0]];l.push(...i);for(let $=1+a.length;$<s.shape.length;++$)l.push([0,0]);const c=GH.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),f=Hb(c.shape,a,o,!1),p=Kb(f.length,a.length,!1),m=Xb(c.shape,a,o,!1),v=Pn({inputs:{x:c},backend:n,attrs:{shape:f}}),C=Ca({inputs:{x:v},backend:n,attrs:{perm:p}}),I=Pn({inputs:{x:C},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(C),I}const Lke={kernelName:vb,backendName:"cpu",kernelFunc:Pke};function Mke(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:a,defaultValue:i}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values[0],[p,m,y,b,v]=bH(o,r.shape,r.dtype,l,s.dtype,c,f);return[n.makeTensorInfo(m,r.dtype,p),n.makeTensorInfo([m[0]],s.dtype,y),n.makeTensorInfo([b.length],"bool",new Uint8Array(b.map(x=>Number(x)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const Fke={kernelName:$2,backendName:"cpu",kernelFunc:Mke};function Bke(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(n.data.get(s.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(a.dataId).values),[c,f,p]=xH(o,r.shape,r.dtype,i,l);return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([p.length],a.dtype,new Int32Array(p))]}const Uke={kernelName:R2,backendName:"cpu",kernelFunc:Bke};function Wke(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${a.shape}`);if(s.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,[c,f]=T_(i,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(f,r.dtype,c)}const Vke={kernelName:O2,backendName:"cpu",kernelFunc:Wke};function qke(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${a.shape}`);if(s.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,[c,f]=T_(i,r.shape,r.dtype,o,l);return n.makeTensorInfo(f,r.dtype,c)}const Gke={kernelName:_2,backendName:"cpu",kernelFunc:qke};function Hke(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:a,defaultValue:i}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:f,strides:p,outputSize:m}=Xu(a,s,o),y=!1,b=n.bufferSync(s);let v;switch(a.dtype){case"bool":{const x=n.bufferSync(a),S=!!n.data.get(i.dataId).values[0];v=Vd(b,x,o,m,f,c,l,p,S,y);break}case"float32":{const x=n.bufferSync(a),S=n.data.get(i.dataId).values[0];v=Vd(b,x,o,m,f,c,l,p,S,y);break}case"int32":{const x=n.bufferSync(a),S=n.data.get(i.dataId).values[0];v=Vd(b,x,o,m,f,c,l,p,S,y);break}case"string":{const x=n.bufferSync(a),S=lc(n.data.get(i.dataId).values[0]);v=Vd(b,x,o,m,f,c,l,p,S,y);break}default:throw new Error(`Unsupported type ${a.dtype}`)}return n.makeTensorInfo(o,v.dtype,v.values)}const Kke={kernelName:D2,backendName:"cpu",kernelFunc:Hke};function Xke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:a,axis:i}=r,o=Lt(i,s.shape)[0],l=XO(s,a,o),c=new Array(s.shape.length).fill(0),f=s.shape.slice();return l.map(p=>{const m=[...f];m[o]=p;const y=Sf({inputs:{x:s},backend:n,attrs:{begin:c,size:m}});return c[o]+=p,y})}const Yke={kernelName:wb,backendName:"cpu",kernelFunc:Xke};const Qke={kernelName:z2,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;it(n,"square");const s=r.data.get(n.dataId).values,a=new Float32Array(s.length);for(let o=0;o<s.length;++o){const l=s[o];a[o]=l*l}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};const Zke=yn(km,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),Jke={kernelName:km,backendName:"cpu",kernelFunc:Zke};function eNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:a,end:i,strides:o,beginMask:l,endMask:c,ellipsisMask:f,newAxisMask:p,shrinkAxisMask:m}=r;it(s,"stridedSlice");const{finalShapeSparse:y,finalShape:b,isIdentity:v,sliceDim0:x,isSimpleSlice:S,begin:C,end:E,strides:k}=jO(s.shape,a,i,o,l,c,f,p,m);let I;if(v)I=Pn({inputs:{x:s},backend:n,attrs:{shape:b}});else if(x||S){q(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const $=EO(C,E,k),_=Sf({inputs:{x:s},backend:n,attrs:{begin:C,size:$}});I=Pn({inputs:{x:_},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(_)}else{const $=n.bufferSync(s),_=SH(y,$,k,C);I=n.makeTensorInfo(b,_.dtype,_.values)}return I}const tNe={kernelName:P2,backendName:"cpu",kernelFunc:eNe};function nNe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:a,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:f,dataSplits:p}=e,m=n.data.get(f.dataId).values,y=n.data.get(p.dataId).values,[b,v]=CH(m,y,s,a,i,o,l,c);return[n.makeTensorInfo([b.length],"string",b),n.makeTensorInfo(p.shape,"int32",v)]}const rNe={kernelName:L2,backendName:"cpu",kernelFunc:nNe};function sNe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:a,delimiter:i}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values[0],[c,f,p]=kH(o,l,s),m=f.length;return[n.makeTensorInfo([m,2],"int32",c),n.makeTensorInfo([m],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(p))]}const aNe={kernelName:M2,backendName:"cpu",kernelFunc:sNe};function iNe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(a.dataId).values,o=NH(i,s);return n.makeTensorInfo(a.shape,"int32",o)}const oNe={kernelName:F2,backendName:"cpu",kernelFunc:iNe};const lNe=yn(wm,t=>Math.tan(t)),cNe={kernelName:wm,backendName:"cpu",kernelFunc:lNe};const uNe=yn(Sm,t=>Math.tanh(t)),dNe={kernelName:Sm,backendName:"cpu",kernelFunc:uNe};function fNe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:a}=e,{sliceRank:i,numUpdates:o,sliceSize:l,strides:c,outputSize:f}=Xu(a,s,r.shape),p=!1,m=n.bufferSync(s),y=n.bufferSync(a),b=n.bufferSync(r),v=Vd(m,y,r.shape,f,l,o,i,c,b,p);return n.makeTensorInfo(r.shape,v.dtype,v.values)}const hNe={kernelName:A2,backendName:"cpu",kernelFunc:fNe};function pNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:a}=r;it(s,"tile");const i=EH(n.bufferSync(s),a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const mNe={kernelName:Cm,backendName:"cpu",kernelFunc:pNe};function gNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:a,sorted:i}=r;it(s,"topk");const o=n.data.get(s.dataId).values,[l,c]=AH(o,s.shape,s.dtype,a,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const yNe={kernelName:B2,backendName:"cpu",kernelFunc:gNe};function bNe(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:a}=e,{interpolation:i,fillMode:o,fillValue:l,outputShape:c}=n,[f,p,m,y]=s.shape,[b,v]=c??[p,m],x=[f,b,v,y],S=pt(s.shape),C=S[0],E=S[1],k=S[2],I=pt(x),$=I[0],_=I[1],z=I[2],L=ts(s.dtype,Ee(x));L.fill(l);const R=r.data.get(s.dataId).values,D=r.data.get(a.dataId).values;for(let X=0;X<f;++X){const V=a.shape[0]===1?D:D.subarray(X*8,X*8+8);for(let Y=0;Y<b;++Y)for(let B=0;B<v;++B)for(let Z=0;Z<y;++Z){let J;const ae=V[6]*B+V[7]*Y+1;if(ae===0)continue;const ee=(V[0]*B+V[1]*Y+V[2])/ae,W=(V[3]*B+V[4]*Y+V[5])/ae,Q=tM(ee,m,o),se=tM(W,p,o);switch(i){case"nearest":J=kNe(R,p,m,C,E,k,X,se,Q,Z,l);break;case"bilinear":J=NNe(R,p,m,C,E,k,X,se,Q,Z,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const fe=X*$+Y*_+B*z+Z;L[fe]=J}return r.makeTensorInfo(x,s.dtype,L)}return{dataId:r.write(L,x,s.dtype),shape:s.shape,dtype:s.dtype}}const xNe={kernelName:U2,backendName:"cpu",kernelFunc:bNe};function tM(t,e,n){switch(n){case"reflect":return vNe(t,e);case"wrap":return wNe(t,e);case"nearest":return CNe(t,e);default:return SNe(t)}}function vNe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Au(0,n,e-1)}function wNe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Au(0,n,e-1)}function SNe(t,e){return t}function CNe(t,e){return Au(0,t,e-1)}function vy(t,e,n,r,s,a,i,o,l,c,f){const p=i*r+o*s+l*a+c;return 0<=o&&o<e&&0<=l&&l<n?t[p]:f}function kNe(t,e,n,r,s,a,i,o,l,c,f){const p=Math.round(o),m=Math.round(l);return vy(t,e,n,r,s,a,i,p,m,c,f)}function NNe(t,e,n,r,s,a,i,o,l,c,f){const p=Math.floor(o),m=Math.floor(l),y=p+1,b=m+1,v=(b-l)*vy(t,e,n,r,s,a,i,p,m,c,f)+(l-m)*vy(t,e,n,r,s,a,i,p,b,c,f),x=(b-l)*vy(t,e,n,r,s,a,i,y,m,c,f)+(l-m)*vy(t,e,n,r,s,a,i,y,b,c,f);return(y-o)*v+(o-p)*x}function TNe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:a}=e;it(a,"unique");const i=r.data.get(a.dataId).values,{outputValues:o,outputShape:l,indices:c}=jH(i,s,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const ENe={kernelName:W2,backendName:"cpu",kernelFunc:TNe};function INe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:a}=r;a<0&&(a+=s.shape.length);const i=s.shape.length,o=s.shape[a],l=new Array(i-1);let c=0;for(let y=0;y<i;y++)y!==a&&(l[c++]=s.shape[y]);const f=new Array(i).fill(0),p=s.shape.slice();p[a]=1;const m=new Array(o);for(let y=0;y<m.length;y++){f[a]=y;const b=Sf({inputs:{x:s},backend:n,attrs:{begin:f,size:p}});m[y]=Pn({inputs:{x:b},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(b)}return m}const ANe={kernelName:kb,backendName:"cpu",kernelFunc:INe};function jNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:a}=e,{numSegments:i}=r;it(s,"unsortedSegmentSum");const o=s.shape.length,l=a.shape.length,c=[],f=[],p=o-l;let m=a;for(let b=0;b<p;++b){const v=Tw({inputs:{input:m},backend:n,attrs:{dim:b+1}});m=v,f.push(v)}for(let b=0;b<i;++b){const v=vc(b,"int32"),x=n.makeTensorInfo([],"int32",v),S=qG({inputs:{a:x,b:m},backend:n}),C=Fu({inputs:{x:S},backend:n,attrs:{dtype:"float32"}}),E=GC({inputs:{a:C,b:s},backend:n}),k=sx({inputs:{x:E},backend:n,attrs:{axis:0,keepDims:!1}});c.push(k),f.push(x),f.push(S),f.push(C),f.push(E),f.push(k)}const y=qH({inputs:c,backend:n,attrs:{axis:0}});return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),y}const $Ne={kernelName:Nb,backendName:"cpu",kernelFunc:jNe};const RNe=[Twe,i1e,Iwe,jwe,f1e,Rwe,_we,zwe,Lwe,Fwe,Uwe,Vwe,Gwe,Xwe,Qwe,eSe,nSe,sSe,iSe,kwe,lSe,uSe,fSe,p1e,pSe,u1e,g1e,gSe,o1e,bSe,vSe,wSe,CSe,NSe,ESe,ASe,$Se,OSe,DSe,PSe,MSe,BSe,WSe,qSe,GSe,KSe,YSe,ZSe,JSe,e2e,t2e,r2e,i2e,ywe,l2e,y1e,g2e,b1e,y2e,v1e,C2e,k2e,T2e,S1e,k1e,I2e,j2e,R2e,_2e,T1e,I1e,l1e,z2e,xSe,L2e,F2e,U2e,bwe,j1e,R1e,V2e,_1e,G2e,X2e,Q2e,eCe,nCe,sCe,aCe,z1e,oCe,cCe,dCe,hCe,mCe,yCe,xCe,L1e,wCe,kCe,ECe,F1e,U1e,jCe,OCe,zCe,V1e,LCe,FCe,BCe,GH,qCe,vwe,H1e,HCe,XCe,QCe,JCe,c1e,Cj,tke,wwe,Swe,Cwe,rke,ake,oke,cke,dke,fke,pke,twe,gke,wke,Cke,Eke,rwe,Ake,$ke,Oke,swe,NCe,zke,Lke,Fke,Uke,Vke,Gke,Kke,Yke,owe,Qke,cwe,dwe,Jke,tNe,rNe,aNe,oNe,mwe,s2e,cNe,dNe,hNe,mNe,yNe,xNe,q1e,ENe,ANe,$Ne,MCe];for(const t of RNe)q2(t);const Bd={},Zv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function ONe(t,e){Bd[t]=e}function Eo(t,e){if(!(t in Bd)||e!=null){const r=DNe(t,e);if(r!==null)Bd[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Bd[t];return n==null||n.isContextLost()?(delete Bd[t],Eo(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Bd[t])}function _Ne(t){if(!ye().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function DNe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??_Ne(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Bd[t]},!1),ye().getBool("SOFTWARE_WEBGL_ENABLED")&&(Zv.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Zv)||n.getContext("experimental-webgl",Zv):n.getContext("webgl2",Zv)}var Yy;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Yy||(Yy={}));var hi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(hi||(hi={}));var ps;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(ps||(ps={}));function ax(t,e){return[e,t]}function zNe(t,e){return t*e}function Jv(t){const e=Ee(t),n=Math.ceil(e/4);return nw(n)}function Om(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function PNe(t,e){const[n,r]=Om(t,e);return n*r*4}function $_(t,e){const n=t;let r,s,a,i,o,l,c,f,p,m;return ye().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,a=n.RGBA16F,i=n.RGBA32F,o=n.RED,c=4,f=1,p=n.HALF_FLOAT,m=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,a=t.RGBA,i=n.RGBA,o=t.RGBA,c=4,f=4,p=e!=null?e.HALF_FLOAT_OES:null,m=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:f,textureTypeHalfFloat:p,textureTypeFloat:m}}function Je(t,e){const n=e();return ye().getBool("DEBUG")&&LNe(t),n}function LNe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+UNe(t,e))}const MNe=596e-10,FNe=65504;function BNe(t){return!!(ye().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||MNe<Math.abs(t)&&Math.abs(t)<FNe)}function UNe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function e1(t,e){return Ec(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function WNe(t,e){const n=Ec(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Je(t,()=>t.shaderSource(n,e)),Je(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function VNe(t,e){const n=Ec(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Je(t,()=>t.shaderSource(n,e)),Je(t,()=>t.compileShader(n)),ye().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw HH(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const qNe=/ERROR: [0-9]+:([0-9]+):/g;function HH(t,e){const n=qNe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),a=s.length.toString().length+2,i=s.map((p,m)=>Yd((m+1).toString(),a)+p);let o=0;for(let p=0;p<i.length;p++)o=Math.max(i[p].length,o);const l=i.slice(0,r-1),c=i.slice(r-1,r),f=i.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Yd(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join(`
`))}function GNe(t){return Ec(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function HNe(t,e){if(Je(t,()=>t.linkProgram(e)),!ye().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function zE(t,e){if(Je(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function KNe(t,e){const n=Ec(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Je(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Je(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function XNe(t,e){const n=Ec(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Je(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Je(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function YNe(t){return Ec(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function QNe(t,e){const n=ye().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function ZNe(t){return Ec(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function nM(t,e,n,r,s,a,i){const o=t.getAttribLocation(e,n);return o===-1?!1:(Je(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Je(t,()=>t.vertexAttribPointer(o,s,t.FLOAT,!1,a,i)),Je(t,()=>t.enableVertexAttribArray(o)),!0)}function JNe(t,e,n){sTe(t,n),Je(t,()=>t.activeTexture(t.TEXTURE0+n)),Je(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function eTe(t,e,n){return Ec(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function tTe(t,e,n){return t.getUniformLocation(e,n)}function nTe(t,e,n,r){Je(t,()=>JNe(t,e,r)),Je(t,()=>t.uniform1i(n,r))}function PE(t,e,n){Je(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Je(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function rM(t,e){Je(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Je(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function t1(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+rTe(t,e))}function rTe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Ec(t,e,n){const r=Je(t,()=>e());if(r==null)throw new Error(n);return r}function sTe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function pp(t,e=2){return Ee(t.slice(0,t.length-e))}function mp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function n1(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[pp(t),...mp(t)]),e}function aTe(t,e=!1){let n=ye().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ye().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&ye().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((o,l)=>l>=t.length-2?LS(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=xc(t).newShape);let s=Ee(t),a=null;t.length<=1&&s<=n?a=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?a=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?a=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?a=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?a=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(a=[t[0],t[1]*t[2]*t[3]]);const i=a!=null&&Math.max(...a)>r&&Math.min(...a)<=(e?2:1)&&Math.min(...a)>0;if(a==null||i)if(e){const o=pp(t);let l=2,c=2;t.length&&([l,c]=mp(t)),s=o*(l/2)*(c/2),a=nw(s).map(f=>f*2)}else a=nw(s);return a}function r1(t){return t%2===0}function Iw(t,e){if(t=t.slice(-2),e=e.slice(-2),Ft(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||r1(n)&&r1(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&r1(t[0])&&r1(e[0])}let LE,ME;function iTe(t){if(LE==null){const e=Eo(t);LE=e.getParameter(e.MAX_TEXTURE_SIZE)}return LE}function oTe(t){if(ME==null){const e=Eo(t);ME=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ME)}function lTe(t){if(t===0)return 0;let e;const n=Eo(t);return qi(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:qi(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function qi(t,e){return t.getExtension(e)!=null}function sM(t){try{if(Eo(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function cTe(t){if(t===0)return!1;const e=Eo(t);if(t===1){if(!qi(e,"OES_texture_float"))return!1}else if(!qi(e,"EXT_color_buffer_float"))return!1;return Nj(e)}function uTe(t){if(t===0)return!1;const e=Eo(t);if(t===1){if(!qi(e,"OES_texture_float")||!qi(e,"WEBGL_color_buffer_float"))return!1}else{if(qi(e,"EXT_color_buffer_float"))return Nj(e);const r="EXT_color_buffer_half_float";if(qi(e,r)){const s=e.getExtension(r);return dTe(e,s)}return!1}return Nj(e)}function Nj(t){const e=$_(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(a),i}function dTe(t,e){const n=$_(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),o}function fTe(t){return t!==2?!1:Eo(t).fenceSync!=null}function ix(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&q(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}const lt=ye();lt.registerFlag("HAS_WEBGL",()=>lt.getNumber("WEBGL_VERSION")>0);lt.registerFlag("WEBGL_VERSION",()=>sM(2)?2:sM(1)?1:0);lt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);lt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>lt.get("WEBGL_VERSION")===2);lt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);lt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);lt.registerFlag("WEBGL_PACK",()=>lt.getBool("HAS_WEBGL"));lt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>lt.getBool("WEBGL_PACK"));lt.registerFlag("WEBGL_PACK_CLIP",()=>lt.getBool("WEBGL_PACK"));lt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>lt.getBool("WEBGL_PACK"));lt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>lt.getBool("WEBGL_PACK"));lt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>lt.getBool("WEBGL_PACK"));lt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>lt.getBool("WEBGL_PACK"));lt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>lt.getBool("WEBGL_PACK"));lt.registerFlag("WEBGL_PACK_REDUCE",()=>lt.getBool("WEBGL_PACK"));lt.registerFlag("WEBGL_LAZILY_UNPACK",()=>lt.getBool("WEBGL_PACK"));lt.registerFlag("WEBGL_CONV_IM2COL",()=>lt.getBool("WEBGL_PACK"));lt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>lt.getBool("WEBGL_PACK"));lt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>iTe(lt.getNumber("WEBGL_VERSION")));lt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>oTe(lt.getNumber("WEBGL_VERSION")));lt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=lt.getNumber("WEBGL_VERSION");return t===0?0:lTe(t)});lt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>lt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!sR());lt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>cTe(lt.getNumber("WEBGL_VERSION")));lt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>lt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:lt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));lt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>uTe(lt.getNumber("WEBGL_VERSION")));lt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>fTe(lt.getNumber("WEBGL_VERSION")));lt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>lt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);lt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});lt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>sR()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});lt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);lt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);lt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);lt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);lt.registerFlag("WEBGL_EXP_CONV",()=>!1);lt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>lt.getBool("IS_TEST"));lt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);lt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);lt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);lt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function aa(){let t,e,n,r,s,a,i,o,l,c;return ye().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",a="outputColor",i="out vec4 outputColor;",o=ye().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",a="gl_FragColor",i="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:a,defineOutput:i,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}function Uf(t,e,n="index"){const r=pt(e);return r.map((s,a)=>{const i=`int ${t[a]} = ${n} / ${s}`,o=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${s}`:`index -= ${t[a]} * ${s}`;return`${i}; ${o};`}).join("")}function HC(t,e,n="index"){const r=pt(e);return r.map((s,a)=>{const i=`int ${t[a]} = ${n} / outShapeStrides[${a}]`,o=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * outShapeStrides[${a}]`:`index -= ${t[a]} * outShapeStrides[${a}]`;return`${i}; ${o};`}).join("")}function hTe(t,e){const n=t.length,r=t.map(a=>`${e}[${a}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let a=n-3;a>=0;--a)s[a]=`(${s[a+1]} * ${r[a+1]})`;return s}function pTe(t,e,n="index"){const r=t.map((a,i)=>i),s=hTe(r,e);return s.map((a,i)=>{const o=`int ${t[i]} = ${n} / ${s[i]}`,l=i===s.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s[i]}`:`index -= ${t[i]} * ${s[i]}`;return`${o}; ${l};`}).join("")}function R_(t){const e=pt(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function O_(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const KH=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;const{getBroadcastDims:XH}=g7;function mTe(t,e,n){const r=[];if(t.forEach(y=>{const b=Ee(y.shapeInfo.logicalShape);if(y.shapeInfo.isUniform?r.push(`uniform float ${y.name}${b>1?`[${b}]`:""};`):(r.push(`uniform sampler2D ${y.name};`),r.push(`uniform int offset${y.name};`)),n.enableShapeUniforms){const{uniformShape:v}=__(n.packedInputs,y.shapeInfo.logicalShape,y.shapeInfo.texShape);switch(v.length){case 1:r.push(`uniform int ${y.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${y.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${y.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${y.name}Shape;`);break}r.push(`uniform ivec2 ${y.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(y=>{r.push(`uniform ${y.type} ${y.name}${y.arrayIndex?`[${y.arrayIndex}]`:""};`)});const s=r.join(`
`),a=t.map(y=>gTe(y,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,o=aa(),l=xTe(o);let c,f,p=STe(o);return e.isPacked?(c=yTe(e.logicalShape,i,n.enableShapeUniforms),f=wTe(o)):(c=bTe(e.logicalShape,i,n.enableShapeUniforms),f=vTe(o)),n.packedInputs&&(p+=TTe),[p,l,f,s,c,a,n.userCode].join(`
`)}function _m(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return LTe(t,e);case 1:return FTe(t,e);case 2:return UTe(t,e);case 3:return VTe(t,e);case 4:return GTe(t,e);case 5:return HTe(t);case 6:return KTe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function YH(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return PTe(t);case 1:return MTe(t,e);case 2:return BTe(t,e);case 3:return WTe(t,e);default:return qTe(t,e)}}function gTe(t,e,n=!1,r){let s="";n?s+=YH(t,r):s+=_m(t,r);const a=t.shapeInfo.logicalShape,i=e.logicalShape;return a.length<=i.length&&(n?s+=XTe(t,e):s+=YTe(t,e)),s}function yTe(t,e,n){switch(t.length){case 0:return QH();case 1:return ETe(t,e,n);case 2:return DTe(t,e,n);case 3:return ATe(t,e,n);default:return $Te(t,e,n)}}function bTe(t,e,n){switch(t.length){case 0:return QH();case 1:return ITe(t,e,n);case 2:return zTe(t,e,n);case 3:return jTe(t,e,n);case 4:return RTe(t,e,n);case 5:return OTe(t,e);case 6:return _Te(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function xTe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function vTe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function wTe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function STe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${CTe}
    ${kTe}
    ${NTe}
  `}const CTe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,kTe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,NTe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,TTe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function QH(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function ETe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function ITe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function ATe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),a=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function jTe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${HC(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Uf(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function $Te(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),a=s*Math.ceil(t[t.length-2]/2);let i=a,o="",l="b, r, c";for(let c=2;c<t.length-1;c++)i*=t[t.length-c-1],o=`
      int b${c} = index / ${i};
      index -= b${c} * ${i};
    `+o,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function RTe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${HC(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Uf(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function OTe(t,e){const n=Uf(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function _Te(t,e){const n=Uf(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function DTe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Ft(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function zTe(t,e,n){return Ft(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Wf(t){return`offset${t}`}function PTe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=aa();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function LTe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,a]=t.shapeInfo.texShape;if(s===1&&a===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=Wf(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[o,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function MTe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,a=aa();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${a.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${a.texture2D}(${n}, uv);
    }
  `}function FTe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Dm(t)}
      }
    `;const s=t.shapeInfo.texShape,a=s[0],i=s[1];if(i===1&&a===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Wf(n);return i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${a}.0);
        return sampleTexture(${n}, uv);
      }
    `:a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${a}, ${i}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function BTe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,i=a[0],o=a[1],l=aa();if(a!=null&&Ft(n,a))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${i}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],f=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${f}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function UTe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape;if(a!=null&&Ft(n,a)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const m=a[0],y=a[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${y}.0, ${m}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:i,keptDims:o}=xc(n),l=i;if(l.length<n.length){const m=zm(t,l),y=["row","col"];return`
      ${_m(m,e)}
      float ${s}(int row, int col) {
        return ${s}(${Pm(y,o)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Dm(t)}
      }
    `;const c=a[0],f=a[1],p=Wf(r);return f===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${f}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${p};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${p};
    vec2 uv = uvFromFlat(${c}, ${f}, index);
    return sampleTexture(${r}, uv);
  }
`}function WTe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(n[0]===1){const m=n.slice(1),y=[1,2],b=zm(t,m),v=["b","row","col"];return`
        ${YH(b,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${Pm(v,y)});
        }
      `}const o=aa();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=i[0],c=i[1],f=Math.ceil(n[2]/2),p=f*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${p}, ${f}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function VTe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],i=n[2],{newShape:o,keptDims:l}=xc(n),c=o;if(c.length<n.length){const v=zm(t,c),x=["row","col","depth"];return`
        ${_m(v,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${Pm(x,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${i}, 1)));
        ${Dm(t)}
      }
    `;const f=t.shapeInfo.texShape,p=f[0],m=f[1],y=t.shapeInfo.flatOffset;if(m===a&&y==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${m}.0, ${p}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(m===i&&y==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${m}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `;const b=Wf(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${b};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${i} + depth + ${b};
        vec2 uv = uvFromFlat(${p}, ${m}, index);
        return sampleTexture(${r}, uv);
      }
  `}function qTe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=aa();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const a=t.shapeInfo.logicalShape,i=a.length,o=t.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],f=l[1],p=Math.ceil(a[i-1]/2);let m=p*Math.ceil(a[i-2]/2),y="int b, int row, int col",b=`b * ${m} + (row / 2) * ${p} + (col / 2)`;for(let v=2;v<i-1;v++)y=`int b${v}, `+y,m*=a[i-v-1],b=`b${v} * ${m} + `+b;return`
    vec4 ${r}(${y}) {
      int index = ${b};
      int texR = index / ${f};
      int texC = index - texR * ${f};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function GTe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],i=n[2]*a,o=n[1]*i,{newShape:l,keptDims:c}=xc(n);if(l.length<n.length){const C=zm(t,l),E=["row","col","depth","depth2"];return`
      ${_m(C,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${Pm(E,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${i}, ${a}, 1)));
        ${Dm(t)}
      }
    `;const f=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,m=p[0],y=p[1],b=`int stride2 = ${r}Shape[3];`,v=`int stride1 = ${r}Shape[2] * stride2;`,x=`int stride0 = ${r}Shape[1] * stride1;`;if(y===o&&f==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${b}
        ${v}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${y}.0, ${m}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(y===a&&f==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${y}.0, ${m}.0);
        return sampleTexture(${r}, uv);
      }
    `;const S=Wf(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${b}
      ${v}
      ${x}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${S});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${i} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${m}, ${y}, index + ${S});
      return sampleTexture(${r}, uv);
    }
  `}function HTe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],a=e[3]*s,i=e[2]*a,o=e[1]*i,{newShape:l,keptDims:c}=xc(e);if(l.length<e.length){const v=zm(t,l),x=["row","col","depth","depth2","depth3"];return`
      ${_m(v)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Pm(x,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${i}, ${a}, ${s})) +
          depth3;
        ${Dm(t)}
      }
    `;const f=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,m=p[0],y=p[1];if(y===o&&f==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${y}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(y===s&&f==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${y}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;const b=Wf(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${i} + depth * ${a} +
          depth2 * ${s} + depth3 + ${b};
      vec2 uv = uvFromFlat(${m}, ${y}, index);
      return sampleTexture(${n}, uv);
    }
  `}function KTe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:a}=xc(e);if(s.length<e.length){const x=zm(t,s),S=["row","col","depth","depth2","depth3","depth4"];return`
      ${_m(x)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Pm(S,a)});
      }
    `}const i=e[5],o=e[4]*i,l=e[3]*o,c=e[2]*l,f=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${f}, ${c}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${Dm(t)}
      }
    `;const p=t.shapeInfo.flatOffset,m=t.shapeInfo.texShape,y=m[0],b=m[1];if(b===f&&p==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${o}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${b}.0, ${y}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(b===i&&p==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${b}.0, ${y}.0);
        return sampleTexture(${n}, uv);
      }
    `;const v=Wf(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${f} + col * ${c} + depth * ${l} +
          depth2 * ${o} + depth3 * ${i} + depth4 + ${v};
      vec2 uv = uvFromFlat(${y}, ${b}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Dm(t){const e=t.name,n=Ee(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function XTe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",a=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,o=XH(t.shapeInfo.logicalShape,e.logicalShape),l=Cn(i),c=i-a;let f;const p=["x","y","z","w","u","v"];a===0?f="":i<2&&o.length>=1?f="coords = 0;":f=o.map(C=>`coords.${p[C+c]} = 0;`).join(`
`);let m="";i<2&&a>0?m="coords":m=t.shapeInfo.logicalShape.map((C,E)=>`coords.${p[E+c]}`).join(", ");let y="return outputValue;";const v=Ee(t.shapeInfo.logicalShape)===1,S=Ee(e.logicalShape)===1;if(a===1&&!v&&!S)y=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(v&&!S)i===1?y=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:y=`
        return vec4(outputValue.x);
      `;else if(o.length){const C=a-2,E=a-1;o.indexOf(C)>-1&&o.indexOf(E)>-1?y="return vec4(outputValue.x);":o.indexOf(C)>-1?y="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(E)>-1&&(y="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${f}
      vec4 outputValue = get${r}(${m});
      ${y}
    }
  `}function YTe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",a=e.texShape,i=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===l&&t.shapeInfo.flatOffset==null&&Ft(i,a))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Cn(l),f=XH(t.shapeInfo.logicalShape,e.logicalShape),p=l-o;let m;const y=["x","y","z","w","u","v"];o===0?m="":l<2&&f.length>=1?m="coords = 0;":m=f.map(v=>`coords.${y[v+p]} = 0;`).join(`
`);let b="";return l<2&&o>0?b="coords":b=t.shapeInfo.logicalShape.map((v,x)=>`coords.${y[x+p]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${m}
      return get${r}(${b});
    }
  `}function Cn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function __(t,e,n){const{newShape:r,keptDims:s}=xc(e),a=e.length,i=t&&a===3&&e[0]===1,o=i?e.slice(1):r,l=!t&&a>1&&!Ft(e,n)&&r.length<a||i;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:s}}function zm(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Pm(t,e){return e.map(n=>t[n]).join(", ")}function QTe(t,e,n,r){const s=n.map((f,p)=>{const m={logicalShape:f.shape,texShape:f.isUniform?null:f.texData.texShape,isUniform:f.isUniform,isPacked:f.isUniform?!1:f.texData.isPacked,flatOffset:null};return f.texData!=null&&f.texData.slice!=null&&f.texData.slice.flatOffset>0&&(m.flatOffset=f.texData.slice.flatOffset),{name:e.variableNames[p],shapeInfo:m}}),a=s.map(f=>f.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=mTe(s,i,e),l=VNe(t.gl,o),c=t.createProgram(l);return ye().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:a,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:a,outShapeInfo:i},ZH(t,e,c)))}function ZH(t,e,n){const r=[],s=[];let a,i,o,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),ye().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const f=!1;for(const p of e.variableNames){const m={name:p,uniform:t.getUniformLocation(n,p,f),offset:t.getUniformLocation(n,`offset${p}`,f)};e.enableShapeUniforms&&(m.shape=t.getUniformLocation(n,`${p}Shape`,f),m.texShape=t.getUniformLocation(n,`${p}TexShape`,f)),r.push(m)}if(e.enableShapeUniforms&&(a=t.getUniformLocation(n,"outShape",f),o=t.getUniformLocation(n,"outShapeStrides",f),i=t.getUniformLocation(n,"outTexShape",f)),e.customUniforms)for(const p of e.customUniforms)s.push(t.getUniformLocation(n,p.name,f));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:i}}function aM(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,a=e[r],i=a.shape;if(!Ft(s,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${i} must match`);if(n.isUniform&&a.isUniform)return;const o=n.texShape,l=a.isUniform?null:a.texData.texShape;if(!Ft(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function ZTe(t,e,n,r,s){e.program.enableShapeUniforms||(aM(e.inShapeInfos,n),aM([e.outShapeInfo],[r]));const a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a.texture,i[0],i[1]):t.setOutputMatrixTexture(a.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),ye().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:f,offset:p,shape:m,texShape:y}=e.variablesLocations[l];if(m){const{uniformShape:b}=__(e.program.packedInputs,c.shape,c.texData.texShape);switch(b.length){case 1:t.gl.uniform1iv(m,new Int32Array(b));break;case 2:t.gl.uniform2iv(m,new Int32Array(b));break;case 3:t.gl.uniform3iv(m,new Int32Array(b));break;case 4:t.gl.uniform4iv(m,new Int32Array(b));break}}if(y&&t.gl.uniform2i(y,c.texData.texShape[0],c.texData.texShape[1]),f!=null){if(c.isUniform){if(Ee(c.shape)<2)t.gl.uniform1f(f,c.uniformValues[0]);else{let b=c.uniformValues;b instanceof Float32Array||(b=new Float32Array(b)),t.gl.uniform1fv(f,b)}continue}c.texData.slice!=null&&p!=null&&t.gl.uniform1i(p,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,f,l)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=pt(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],f=e.customUniformLocations[l],p=s[l];if(c.type==="float")t.gl.uniform1fv(f,p);else if(c.type==="vec2")t.gl.uniform2fv(f,p);else if(c.type==="vec3")t.gl.uniform3fv(f,p);else if(c.type==="vec4")t.gl.uniform4fv(f,p);else if(c.type==="int")t.gl.uniform1iv(f,p);else if(c.type==="ivec2")t.gl.uniform2iv(f,p);else if(c.type==="ivec3")t.gl.uniform3iv(f,p);else if(c.type==="ivec4")t.gl.uniform4iv(f,p);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function JTe(t,e,n){let r="";e.concat(n).forEach(i=>{const o=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:c,uniformShape:f,keptDims:p}=__(t.packedInputs,i.shape,l);let m="",y="",b="";if(f.length===1&&t.packedInputs){const I=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];m=`${I[0]>1}_${I[1]>1}`}else if(f.length===2&&!t.packedInputs)y=`${f[0]>1}_${f[1]>1}`;else if(f.length>2&&!t.packedInputs){const I=pt(f);b=`${I[0]===l[1]}_${I[I.length-1]===l[1]}`}const v=i.shape.length,x=f.length===2&&Ft(i.shape,l),S=Ee(i.shape)===1,C=mf(i.shape,n.shape),E=!t.packedInputs&&v===n.shape.length&&Ft(l,n.texData.texShape),k=t.packedInputs||f.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${v}_${E}_${c?p:""}_${f.length}_${S}_${C}_${x}_${m}_${y}_${b}_${k}_${o}`}else{const l=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${l}_${o}`}});const s=t.userCode;let a=t.constructor.name;return a+="_"+r+"_"+s+`${ye().getNumber("WEBGL_VERSION")}`,a}function Ws(t){return ye().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}class eEe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Yy.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=aa();this.outputShape=e,this.enableShapeUniforms=Ws(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?HC(["r","c","d"],e):Uf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}class tEe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Yy.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=aa();this.outputShape=e,this.enableShapeUniforms=Ws(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?HC(["r","c","d"],e):Uf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}class nEe{constructor(e){this.variableNames=["A"],this.outTexUsage=hi.DOWNLOAD;const n=aa();this.outputShape=e,this.userCode=`
      ${KH}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}class rEe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=hi.DOWNLOAD;const n=aa();this.outputShape=e,this.userCode=`
      ${KH}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}const sEe={R:0,G:1,B:2,A:3};class iM{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=aa();this.outputShape=e,this.enableShapeUniforms=Ws(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)");let i="";for(let o=0;o<r.length;o++){const l=r[o];i+=`
          if(offset == ${o}) {
            result = values[${sEe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?O_():R_(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${i}
        }
        ${s.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}class aEe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=aa();this.outputShape=e,this.enableShapeUniforms=Ws(this.outputShape.length);let s="",a="result";n&&(a="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){const l=i*2+o;s+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?O_():R_(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${a};
        }
    `}}function iEe(t){const e=aa(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return WNe(t,n)}function oEe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return KNe(t,e)}function lEe(t){const e=new Uint16Array([0,1,2,2,1,3]);return XNe(t,e)}function ox(t,e,n,r,s,a){QNe(e,n);const i=YNe(t),o=t.TEXTURE_2D;return Je(t,()=>t.bindTexture(o,i)),Je(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Je(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Je(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),Je(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),ye().getNumber("WEBGL_VERSION")===1?Je(t,()=>t.texImage2D(o,0,r,e,n,0,s,a,null)):Je(t,()=>t.texStorage2D(o,1,r,e,n)),Je(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function JH(t){return t.internalFormatFloat}function cEe(t,e,n,r){const[s,a]=ax(e,n);return ox(t,s,a,JH(r),r.textureFormatFloat,t.FLOAT)}function eK(t){return t.internalFormatHalfFloat}function uEe(t,e,n,r){const[s,a]=ax(e,n);return ox(t,s,a,eK(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function tK(t){return t.downloadTextureFormat}function dEe(t,e,n,r){const[s,a]=ax(e,n);return ox(t,s,a,tK(r),t.RGBA,t.UNSIGNED_BYTE)}function nK(t){return t.internalFormatPackedFloat}function fEe(t,e,n,r){const[s,a]=Om(e,n);return ox(t,s,a,nK(r),t.RGBA,t.FLOAT)}function rK(t){return t.internalFormatPackedHalfFloat}function hEe(t,e,n,r){const[s,a]=Om(e,n);return ox(t,s,a,rK(r),t.RGBA,r.textureTypeHalfFloat)}function pEe(t,e,n){return Je(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),nM(t,e,"clipSpacePos",n,3,20,0)&&nM(t,e,"uv",n,2,20,12)}function mEe(t,e,n,r,s,a){Je(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,o,l;s instanceof Uint8Array?(i=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,l=t.RGBA):(i=new Float32Array(n*r*4),o=t.FLOAT,l=a.internalFormatPackedFloat),i.set(s),ye().getNumber("WEBGL_VERSION")===2?Je(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,i)):Je(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,o,i)),Je(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function gEe(t,e,n){Je(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?ye().getNumber("WEBGL_VERSION")===2?Je(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Je(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):ye().getNumber("WEBGL_VERSION")===2?Je(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Je(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Je(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function yEe(t,e,n,r){const s=t.createBuffer();Je(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const o=4*4*e*n;return Je(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),Je(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Je(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function bEe(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function xEe(t,e,n,r){const[s,a]=ax(e,n),i=4,o=new Uint8Array(zNe(e*n,i));return Je(t,()=>t.readPixels(0,0,s,a,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function vEe(t,e,n,r,s,a,i,o){const l=t,c=new Float32Array(PNe(a,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function wEe(t,e,n){const r=new Float32Array(e*n*4);return Je(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}class FE{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=ye().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,ONe(n,e)):this.gl=Eo(n),e=this.gl,ye().getNumber("WEBGL_VERSION")===2){const a=e;this.createVertexArray=()=>Je(a,()=>a.createVertexArray()),this.bindVertexArray=i=>Je(a,()=>a.bindVertexArray(i)),this.deleteVertexArray=i=>Je(a,()=>a.deleteVertexArray(i)),this.getVertexArray=()=>Je(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(e!=null){const a=e.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Je(e,()=>a.createVertexArrayOES()),this.bindVertexArray=i=>Je(e,()=>a.bindVertexArrayOES(i)),this.deleteVertexArray=i=>Je(e,()=>a.deleteVertexArrayOES(i)),this.getVertexArray=()=>Je(e,()=>e.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ye().getNumber("WEBGL_VERSION")===1){const a="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=e1(this.gl,a),qi(this.gl,i))this.textureHalfFloatExtension=e1(this.gl,i);else if(ye().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),qi(this.gl,s))this.colorBufferHalfFloatExtension=e1(this.gl,s);else if(ye().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",qi(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(qi(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=oEe(this.gl),this.indexBuffer=lEe(this.gl),this.framebuffer=ZNe(this.gl),this.textureConfig=$_(this.gl,this.textureHalfFloatExtension)}get debug(){return ye().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Je(e,()=>e.finish()),Je(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Je(e,()=>e.deleteFramebuffer(this.framebuffer)),Je(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Je(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Je(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),cEe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),uEe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),dEe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),gEe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),mEe(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),hEe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),fEe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(rM(this.gl,this.framebuffer),this.outputTexture=null),Je(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>xEe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,a,i){return vEe(this.gl,e,n,r,s,a,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return bEe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=yEe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(ye().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,a=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const i=s.clientWaitSync(a,0,0);return i===s.ALREADY_SIGNALED||i===s.CONDITION_SATISFIED},n=a}else ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>wEe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=iEe(n));const r=GNe(n);Je(n,()=>n.attachShader(r,this.vertexShader)),Je(n,()=>n.attachShader(r,e)),HNe(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&zE(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Je(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),pEe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Je(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&zE(this.gl,this.program),Je(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?eTe(this.gl,e,n):tTe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Je(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),nTe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,a]=Om(n,r);this.setOutputMatrixTextureDriver(e,s,a)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&zE(this.gl,this.program),t1(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Je(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Je(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=e1(this.gl,ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),a=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,a),a}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await _A(()=>this.disposed||this.isQueryAvailable(e,ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=SEe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in ye().platform&&(r=ye().platform.setTimeoutCustom.bind(ye().platform)),_A(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),PE(this.gl,e,this.framebuffer),this.debug&&t1(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(PE(this.gl,this.outputTexture,this.framebuffer),this.debug&&t1(this.gl)):rM(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;PE(s,e,this.framebuffer),this.debug&&t1(s),this.outputTexture=e,Je(s,()=>s.viewport(0,0,n,r)),Je(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),Je(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function SEe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}const{addImpl:CEe,bincountImpl:sK,bincountReduceImpl:kEe,bitwiseAndImpl:NEe,castImpl:TEe,ceilImpl:EEe,concatImpl:IEe,equalImpl:AEe,expImpl:jEe,expm1Impl:$Ee,floorImpl:REe,gatherNdImpl:OEe,gatherV2Impl:_Ee,greaterImpl:DEe,greaterEqualImpl:zEe,lessImpl:PEe,lessEqualImpl:LEe,linSpaceImpl:MEe,logImpl:FEe,maxImpl:BEe,maximumImpl:UEe,minimumImpl:WEe,multiplyImpl:VEe,negImpl:qEe,notEqualImpl:GEe,prodImpl:HEe,raggedGatherImpl:KEe,raggedRangeImpl:XEe,raggedTensorToTensorImpl:YEe,rangeImpl:QEe,rsqrtImpl:ZEe,scatterImpl:JEe,sigmoidImpl:eIe,simpleAbsImpl:aK,sliceImpl:tIe,sparseFillEmptyRowsImpl:nIe,sparseReshapeImpl:rIe,sparseSegmentReductionImpl:iK,sqrtImpl:sIe,staticRegexReplaceImpl:aIe,stridedSliceImpl:iIe,stringNGramsImpl:oIe,stringSplitImpl:lIe,stringToHashBucketFastImpl:cIe,subImpl:uIe,tileImpl:dIe,topKImpl:fIe,transposeImpl:D_,uniqueImpl:hIe}=gwe;function oK(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function ta(t,e){return e===1?[t]:oK(t,e)}function pIe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}class mIe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Ws(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=ta("rc",this.rank),r=Cn(this.rank),s=this.getOutOfBoundsCondition(n),a=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${a}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let a=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)a=`${e[e.length-1-i]},`+a;n.push(a)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}class lK{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Ws(this.outputShape.length);let r="";for(let s=0;s<4;s++){let a="thisRC = rc;";s%2===1&&(a+="thisRC.z += 1;"),s>1&&(a+="thisRC.y += 1;"),r+=`
        ${a}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${gIe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?O_():R_(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function gIe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?pTe(["r","c","d"],"inputShape"):Uf(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}class yIe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=lM(n,r),a=cM(e,s,r);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const i=oM(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[a].pop();return this.usedTextures[a].push(l),l}let o;return s===ps.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===ps.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===ps.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===ps.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===ps.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const a=lM(r,s),i=cM(n,a,s);i in this.freeTextures||(this.freeTextures[i]=[]);const o=oM(n,a,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=ye().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const c=this.usedTextures[i],f=c&&c.indexOf(e);if(f==null||f<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[f]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function bIe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function oM(t,e,n,r,s){const a=xIe(e,r);let i;if(s){const[l,c]=Om(t[0],t[1]);i=l*c}else{const[l,c]=ax(t[0],t[1]);i=l*c}const o=bIe(n,a);return i*o}function xIe(t,e){switch(t){case ps.PACKED_2X2_FLOAT32:return nK(e);case ps.PACKED_2X2_FLOAT16:return rK(e);case ps.UNPACKED_FLOAT32:return JH(e);case ps.UNPACKED_FLOAT16:return eK(e);case ps.PACKED_4X1_UNSIGNED_BYTE:return tK(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function vIe(t){return ye().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?ps.PACKED_2X2_FLOAT32:ps.UNPACKED_FLOAT32:t?ps.PACKED_2X2_FLOAT16:ps.UNPACKED_FLOAT16}function lM(t,e){if(t===hi.UPLOAD)return ps.PACKED_2X2_FLOAT32;if(t===hi.RENDER||t==null)return vIe(e);if(t===hi.DOWNLOAD||t===hi.PIXELS)return ps.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function cM(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}class nl{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Ws(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const eo="if (isnan(x)) return x;",wIe="return x;",uM="return abs(x);",SIe="return (x >= 0.0) ? x : (exp(x) - 1.0);",CIe=eo+`
  return (x < 0.0) ? 0.0 : x;
`,kIe=eo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,du="return x;",NIe="return 1.0 / (1.0 + exp(-1.0 * x));";const TIe="return x;",EIe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,IIe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,AIe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,jIe="return 1.0 / (1.0 + exp(-1.0 * x));";class yu{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Ws(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}class $Ie{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Ws(this.outputShape.length);const n=e.length,r=ta("rc",n),s=Cn(n),a=pIe(n,r),i=r.slice(-2),o=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}const RIe=vC,OIe=1e-7,_Ie=1e-4,s1={};function DIe(t){return t in s1||(s1[t]={}),s1[t]}const zIe=ye().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),PIe=600;function LIe(){return ye().global.screen==null?1024:ye().global.screen.height*ye().global.screen.width*window.devicePixelRatio*PIe/1024/1024}class KC extends PS{nextDataId(){return KC.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ye().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof FE)n=e;else{const r=Eo(ye().getNumber("WEBGL_VERSION"),e);n=new FE(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Eo(ye().getNumber("WEBGL_VERSION"));n=new FE(r),this.binaryCache=DIe(ye().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new yIe(this.gpgpu),this.numMBBeforeWarning=LIe(),this.texData=new X$(this,fo())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,a,i){const o=this.makeTensorInfo(n,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,a]},l.texShape=[s,a];const c=n1(n),f=new iM(c,!1,i),p=this.runWebGLProgram(f,[o],r,[[s,a]]);return p.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(o),p.dataId}write(e,n,r){if((ye().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ye().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:hi.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,a){if(ye().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:hi.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:a,slice:i,shape:o,isPacked:l}=n;if(i!=null){let m;l?m=new yu(o,du):m=new nl(o,du);const y=this.runWebGLProgram(m,[{dataId:e,shape:o,dtype:s}],s),b=this.readSync(y.dataId);return this.disposeIntermediateTensorInfo(y),b}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let f;c&&(f=Xs());let p;if(s==="complex64"){const m=this.readSync(a.real.dataId),y=this.readSync(a.imag.dataId);p=dc(m,y)}else p=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Xs()-f),this.convertAndCacheOnCPU(e,p)}async read(e){if(this.pendingRead.has(e)){const b=this.pendingRead.get(e);return new Promise(v=>b.push(v))}const n=this.texData.get(e),{values:r,shape:s,slice:a,dtype:i,complexTensorInfos:o,isPacked:l}=n;if(a!=null){let b;l?b=new yu(s,du):b=new nl(s,du);const v=this.runWebGLProgram(b,[{dataId:e,shape:s,dtype:i}],i),x=this.read(v.dataId);return this.disposeIntermediateTensorInfo(v),x}if(r!=null)return this.convertAndCacheOnCPU(e);if(ye().getBool("DEBUG")&&!ye().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ye().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,f;if(i!=="complex64"&&ye().get("WEBGL_BUFFER_SUPPORTED")){f=this.decode(e);const b=this.texData.get(f.dataId);c=this.gpgpu.createBufferFromTexture(b.texture.texture,...Jv(s))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let p;if(i==="complex64"){const b=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),v=b[0],x=b[1];p=dc(v,x)}else if(c==null)p=this.getValuesFromTexture(e);else{const b=Ee(s);p=this.gpgpu.downloadFloat32MatrixFromBuffer(c,b)}if(f!=null&&this.disposeIntermediateTensorInfo(f),c!=null){const b=this.gpgpu.gl;Je(b,()=>b.deleteBuffer(c))}const m=this.convertAndCacheOnCPU(e,p),y=this.pendingRead.get(e);return this.pendingRead.delete(e),y.forEach(b=>b(m)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&fo().removeDataId(e,this),this.pendingDeletes--),m}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:a,slice:i,dtype:o,isPacked:l,texture:c}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let y;l?y=new yu(a,du):y=new nl(a,du);const b=this.runWebGLProgram(y,[{dataId:e,shape:a,dtype:o}],o),v=this.readToGPU(b,n);return this.disposeIntermediateTensorInfo(b),v}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const f=this.decode(e,n.customTexShape),p=fo().makeTensorFromTensorInfo(f),m=this.texData.get(f.dataId);return Object.assign({tensorRef:p},m.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>lc(s));return $t(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return $t(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!BNe(r))throw ye().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),a=Ee(n);if(ye().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const m=this.decode(e),y=this.texData.get(m.dataId),b=this.gpgpu.downloadMatrixFromPackedTexture(y.texture.texture,...Jv(n)).subarray(0,a);return this.disposeIntermediateTensorInfo(m),b}const i=ye().getBool("WEBGL_PACK")&&s===!0,o=i?n1(n):n,l=i?new rEe(o):new nEe(o),c=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),f=this.texData.get(c.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(f.texture.texture,f.texShape[0],f.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(c),p}timerAvailable(){return ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const a=hl(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=hl(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(a);o.kernelMs=LW(l),o.getExtraProfileInfo=()=>l.map((c,f)=>({name:i[f],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Xs(),endMs:null}}endTimer(e){return ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Xs(),e)}async getQueryTime(e){if(ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:a,isPacked:i,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,a,i)));const f=this.texData.get(e);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=zIe){return ye().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Ee(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){ci("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return RIe(e.shape,n)}packedUnaryOp(e,n,r){const s=new yu(e.shape,n),a=this.compileAndRun(s,[e],r);return fo().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=aK(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(ye().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,uM,e.dtype);const n=new nl(e.shape,uM),r=this.compileAndRun(n,[e]);return fo().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&tl(r[0])){const a=r.map(i=>ol(i));s=this.write(a,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return fo().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new $Ie(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new mIe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[pp(e.shape),...mp(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},a=[pp(n),...mp(n)],i=new lK(a,r),o=!0,l=[r],c=this.runWebGLProgram(i,[s],e.dtype,l,o);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:a,dtype:i}=r;if(n!=null){const m=Ee(a),y=n[0]*n[1]*4;q(m<=y,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=n1(a);let l;s?l=new tEe(o):l=new eEe(o);const c=!0,f=[n??Jv(o)],p=this.runWebGLProgram(l,[{shape:o,dtype:i,dataId:e}],i,f,c,n);return{dtype:i,shape:a,dataId:p.dataId}}runWebGLProgram(e,n,r,s,a=!1,i){const o=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Yy.DENSE){const S=i??Jv(e.outputShape);l.texShape=S.map(C=>C*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),Ee(o.shape)===0)return l.values=ts(o.dtype,0),o;const c=[],f=n.map(S=>{if(S.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let C=this.texData.get(S.dataId);if(C.texture==null){if(!e.packedInputs&&Ee(S.shape)<=ye().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:S.shape,texData:null,isUniform:!0,uniformValues:C.values};e.packedInputs&&(C.isPacked=!0,C.shape=S.shape)}if(this.uploadToGPU(S.dataId),!!C.isPacked!=!!e.packedInputs)S=C.isPacked?this.unpackTensor(S):this.packTensor(S),c.push(S),C=this.texData.get(S.dataId);else if(C.isPacked&&!Iw(C.shape,S.shape)){const E=S,k=S.shape;S.shape=C.shape,S=this.packedReshape(S,k),c.push(S),C=this.texData.get(S.dataId),E.shape=k}return{shape:S.shape,texData:C,isUniform:!1}});this.uploadToGPU(o.dataId);const p={shape:o.shape,texData:l,isUniform:!1},m=JTe(e,f,p),y=this.getAndSaveBinary(m,()=>QTe(this.gpgpu,e,f,p)),b=this.activeTimers!=null;let v;b&&(v=this.startTimer()),ye().get("ENGINE_COMPILE_ONLY")||ZTe(this.gpgpu,y,f,p,s),c.forEach(S=>this.disposeIntermediateTensorInfo(S)),b&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const x=ye().getNumber("WEBGL_FLUSH_THRESHOLD");if(x>0){const S=Xs();S-this.lastGlFlushTime>x&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=S)}if(!ye().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){const S=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),S}return o}compileAndRun(e,n,r,s,a=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,a)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ye().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=me(()=>{if(!ye().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=ye().getBool("DEBUG");ye().set("DEBUG",!1);const n=this.abs(gt(1e-8)).dataSync()[0];if(ye().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?OIe:_Ie}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:a,texture:i,usage:o,isPacked:l}=n;if(i!=null)return;const c=this.activeTimers!=null;let f;c&&(f=Xs());let p=n.texShape;if(p==null&&(p=aTe(r,l),n.texShape=p),a!=null){const m=n1(r);let y,b=p[1],v=p[0];const x=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(l||!x)&&([b,v]=Om(p[0],p[1])),l?y=new aEe(m,x):y=new iM(m,x);const S=x?[v,b]:p,C=this.makeTensorInfo(S,s),E=this.texData.get(C.dataId);x?E.usage=hi.PIXELS:E.usage=hi.UPLOAD,E.texShape=S,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(C.dataId),b,v,a);const k=[[v,b]],$=this.runWebGLProgram(y,[C],s,k,!0),_=this.texData.get($.dataId);n.texShape=_.texShape,n.isPacked=_.isPacked,n.usage=_.usage,ye().get("ENGINE_COMPILE_ONLY")?this.disposeData($.dataId):(n.texture=_.texture,n.values=null,this.texData.delete($.dataId)),this.disposeIntermediateTensorInfo(C),c&&(this.uploadWaitMs+=Xs()-f)}else{const m=this.acquireTexture(p,o,s,l);n.texture=m}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=MIe(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*_y(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(a){throw a}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await $O(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(HH(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:a,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:l}=ZH(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=a,e.outShapeLocation=i,e.outShapeStridesLocation=o,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:a,width:i,channels:o}=e,l=fo().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,r,a,i,o);return fo().makeTensorFromDataId(c,n,r,l)}}KC.nextDataId=0;function MIe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}aR()&&oR("webgl",()=>new KC,2);const z_=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Cf{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=At(n,r),this.enableShapeUniforms=Ws(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}const Vf=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Lm{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=At(n,r);const a=this.outputShape.length;this.enableShapeUniforms=Ws(a);let i="";if(s)if(a===0||Ee(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Cn(a)} coords = getOutputCoords();
        `,a===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=ta("coords",a);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= outShape[${a} - 2];
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= outShape[${a} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}function Ka(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const FIe={kernelName:Yp,backendName:"webgl",kernelFunc:Ka};function Zu(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,a=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(a.dataId),o=Ka({inputs:{x:r},backend:n}),l=Ka({inputs:{x:s},backend:n});return i.complexTensorInfos={real:o,imag:l},a}const BIe={kernelName:GS,backendName:"webgl",kernelFunc:Zu};const cK="return (a < 0.) ? b * a : a;",uK=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function UIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:a}=r,i=n.makeTensorInfo([],"float32",vc(a,"float32")),o=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lm(uK,s.shape,i.shape):new Cf(cK,s.shape,i.shape),l=n.runWebGLProgram(o,[s,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const WIe={kernelName:G0,backendName:"webgl",kernelFunc:UIe};const dK="return (a < 0.) ? b * a : a;",fK=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function VIe(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,a=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lm(fK,r.shape,s.shape):new Cf(dK,r.shape,s.shape);return n.runWebGLProgram(a,[r,s],"float32")}const qIe={kernelName:db,backendName:"webgl",kernelFunc:VIe};const Mm="if (isnan(x)) return x;";function en({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:a})=>{const{x:i}=s,o=a,l=r||i.dtype;if(o.shouldExecuteOnCPU([i])&&n!=null){const p=o.texData.get(i.dataId),m=n(p.values,l);return o.makeTensorInfo(i.shape,l,m)}const c=ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let f;return c?f=new yu(i.shape,e):f=new nl(i.shape,t),o.runWebGLProgram(f,[i],l)}}function ws({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:a}){return({inputs:i,backend:o})=>{const{a:l,b:c}=i,f=o;if(r&&l.dtype==="complex64"){const b=f.texData.get(l.dataId),v=f.texData.get(c.dataId),[x,S]=[[b.complexTensorInfos.real,v.complexTensorInfos.real],[b.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(E=>{const[k,I]=E,$={dataId:k.dataId,dtype:k.dtype,shape:l.shape},_={dataId:I.dataId,dtype:I.dtype,shape:c.shape},z=new Cf(t,l.shape,c.shape);return f.runWebGLProgram(z,[$,_],ba(k.dtype,I.dtype))}),C=Zu({inputs:{real:x,imag:S},backend:f});return f.disposeIntermediateTensorInfo(x),f.disposeIntermediateTensorInfo(S),C}const p=a||ba(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||f.shouldExecuteOnCPU([l,c]))&&s!=null){const b=f.texData.get(l.dataId).values,v=f.texData.get(c.dataId).values,x=l.dtype==="string"?fc(b):b,S=l.dtype==="string"?fc(v):v,[C,E]=s(l.shape,c.shape,x,S,p),k=f.makeTensorInfo(E,p),I=f.texData.get(k.dataId);return I.values=C,k}const m=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let y;return m?y=new Lm(e,l.shape,c.shape,n):y=new Cf(t,l.shape,c.shape),f.runWebGLProgram(y,[l,c],p)}}function Qy(t,e=!1){if(t==="linear")return e?TIe:wIe;if(t==="relu")return e?IIe:CIe;if(t==="elu")return e?EIe:SIe;if(t==="relu6")return e?AIe:kIe;if(t==="prelu")return e?fK:dK;if(t==="leakyrelu")return e?uK:cK;if(t==="sigmoid")return e?jIe:NIe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}class hK{constructor(e,n,r,s=!1,a=!1,i=!1,o=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Ws(this.outputShape.length);const f=s?e[1]:e[2],p=Math.ceil(f/2),m=s?"i * 2, rc.y":"rc.y, i * 2",y=a?"rc.z, i * 2":"i * 2, rc.z",b=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let x="",S="";o&&(l?x=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:c?x=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:x=`vec4 activation(vec4 x) {
          ${o}
        }`,S="result = activation(result);");const C=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let E="rc.x",k="rc.x";e[0]<n[0]?E=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(k=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${x}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${p}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${E};
        int batchB = ${k};
        for (int i = 0; i < ${p}; i++) {
          vec4 a = getMatrixA(batchA, ${m});
          vec4 b = getMatrixB(batchB, ${y});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${b[0]} * ${v[0]});
          result += (${b[1]} * ${v[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${C}

        ${S}

        setOutput(result);
      }
    `}}const dM={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class fM{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=At(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}const hM="return a * b;";function P_(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,a=ba(r.dtype,s.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),l=n.texData.get(s.dataId),c=new fM(dM.REAL,r.shape,s.shape),f=new fM(dM.IMAG,r.shape,s.shape),p=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],m=n.runWebGLProgram(c,p,"float32"),y=n.runWebGLProgram(f,p,"float32"),b=Zu({inputs:{real:m,imag:y},backend:n});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}if(n.shouldExecuteOnCPU([r,s])){const o=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[c,f]=VEe(r.shape,s.shape,o.values,l.values,a),p=n.makeTensorInfo(f,a),m=n.texData.get(p.dataId);return m.values=c,p}let i;return ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new Lm(hM,r.shape,s.shape):i=new Cf(hM,r.shape,s.shape),n.runWebGLProgram(i,[r,s],a)}const GIe={kernelName:am,backendName:"webgl",kernelFunc:P_};function HIe(t,e,n){const r=[pp(t.shape),...mp(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},a=[pp(e),...mp(e)],i=new lK(a,r),o=!0,l=[r],c=n.runWebGLProgram(i,[s],t.dtype,l,o);return{dataId:c.dataId,shape:e,dtype:c.dtype}}function Xe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:a}=r,i=n,o=Ee(s.shape),l=Q$(a,o),c=Ee(l);q(o===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const f=i.texData.get(s.dataId);return f.isPacked&&!Iw(s.shape,l)&&!(f.texture!==null&&Iw(f.shape,l))?HIe(s,l,i):(i.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const KIe={kernelName:hb,backendName:"webgl",kernelFunc:Xe};class pM{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:a,outSize:i}=e;this.outputShape=[s,i];const o=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const p=1/n;c=`sumValue += dot(values * ${cf(p)?p.toPrecision(2):p}, ones);`}let f="";a%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}class XIe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:a,outSize:i}=e;this.outputShape=[s,i];let o="0.0",l="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",l="min"):n==="max"&&(o="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const f=Math.floor(r/4)*4,p=r%4;let m=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,y="vec4";n==="all"?(o="1.0",m=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,y="bvec4"):n==="any"&&(o="0.0",m=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,y="bvec4");let b="";a%r>0&&(b=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${b}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          ${y} values = ${y}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${m}
        }

        int inIdx = inOffset + ${f};
        if (${p===1}) {
          ${y} values = ${y}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${m}
        } else if (${p===2}) {
          ${y} values = ${y}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${m}
        } else if (${p===3}) {
          ${y} values = ${y}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${m}
        }
        setOutput(${c});
      }
    `}}function YIe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=RC(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function qf(t,e,n,r){const s=YIe(t.shape);let a=t;for(let i=0;i<s.length;i++){const{inSize:o,windowSize:l,outSize:c}=s[i];let f,p;n==="mean"?f=i===0?new pM({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},o):new pM({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c}):f=new XIe({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},n),p=a,a=r.runWebGLProgram(f,[a],e),p.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(p)}return a}class QIe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[n[i]];this.outputShape=r,this.rank=r.length;const s=Cn(this.rank),a=ZIe(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}function ZIe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}class JIe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let f=0;f<r.length;f++)r[f]=e[n[f]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Cn(this.rank),a=oK("rc",this.rank),i=new Array(this.rank);for(let f=0;f<n.length;f++)i[n[f]]=a[f];const o=`vec2(${i.slice(-2).join()})`,l=`++${a[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${i.join()}), ${o})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}function XC(t,e,n){const r=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JIe(t.shape,e):new QIe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}function eAe(t,e,n,r){const s=e,a=t.shape.length,i=Lt(s,t.shape);let o=i;const l=nr(o,a),c=l!=null;let f=t;c&&(f=XC(t,l,r),o=yr(o.length,a)),xs("sum",o,a);const[p,m]=ss(f.shape,o);let y=p;n&&(y=gr(p,i));const b=Ee(m),x=Ee(t.shape)/b,S=Xe({inputs:{x:f},attrs:{shape:[x,b]},backend:r}),C=G2(t.dtype),E=qf(S,C,"sum",r),k=Xe({inputs:{x:E},attrs:{shape:y},backend:r});return r.disposeIntermediateTensorInfo(S),r.disposeIntermediateTensorInfo(E),c&&r.disposeIntermediateTensorInfo(f),k}function YC(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;return eAe(s,a,i,n)}const tAe={kernelName:xb,backendName:"webgl",kernelFunc:YC};function ra(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:a}=r,i=n,o=s.shape.length,l=new Array(o);for(let f=0;f<l.length;f++)l[f]=s.shape[a[f]];let c;if(i.shouldExecuteOnCPU([s])){const p=i.texData.get(s.dataId).values,m=D_(p,s.shape,s.dtype,a,l);c=i.makeTensorInfo(l,s.dtype);const y=i.texData.get(c.dataId);y.values=m}else c=XC(s,a,i);return c}const nAe={kernelName:Qd,backendName:"webgl",kernelFunc:ra};const pK=1e3;function Aw({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:l=null}){const c=t.shape.length,f=e.shape.length,p=n?t.shape[c-2]:t.shape[c-1],m=r?e.shape[f-1]:e.shape[f-2],y=n?t.shape[c-1]:t.shape[c-2],b=r?e.shape[f-2]:e.shape[f-1],v=t.shape.slice(0,-2),x=e.shape.slice(0,-2),S=Ee(v),C=Ee(x),k=At(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([y,b]);q(p===m,()=>`Error in matMul: inner shapes (${p}) and (${m}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const I=n?[S,p,y]:[S,y,p],$=r?[C,b,m]:[C,m,b],_=Xe({inputs:{x:t},backend:s,attrs:{shape:I}}),z=Xe({inputs:{x:e},backend:s,attrs:{shape:$}}),L=[_,z],R=Math.max(S,C),D=n?_.shape[1]:_.shape[2],U=a!=null,X=i!=null,V=l==="leakyrelu",Y=l!=null?Qy(l,!0):null,B=U||X||V||Y!=null;let Z;if((y===1||b===1)&&D>pK&&B===!1){let ae=_,ee=z;n&&(ae=ra({inputs:{x:_},backend:s,attrs:{perm:[0,2,1]}}),L.push(ae)),r&&(ee=ra({inputs:{x:z},backend:s,attrs:{perm:[0,2,1]}}),L.push(ee));const W=b!==1,Q=b===1;let se=ae;W&&(se=Xe({inputs:{x:ae},backend:s,attrs:{shape:[R,D,1]}}),L.push(se));const fe=b===1?2:1;let Ne=ee;Q&&(Ne=Xe({inputs:{x:ee},backend:s,attrs:{shape:[R,1,D]}}),L.push(Ne));const _e=P_({inputs:{a:se,b:Ne},backend:s});Z=YC({inputs:{x:_e},backend:s,attrs:{axis:fe,keepDims:!0}}),L.push(_e)}else{const ae=ba(t.dtype,e.dtype),ee=new hK(I,$,[R,y,b],n,r,U,Y,X,V),W=[_,z];if(a!=null&&W.push(a),X&&W.push(i),V){const Q=s.makeTensorInfo([],"float32",vc(o,"float32"));W.push(Q),L.push(Q)}Z=s.runWebGLProgram(ee,W,ae)}const J=Xe({inputs:{x:Z},backend:s,attrs:{shape:k}});L.push(Z);for(const ae of L)s.disposeIntermediateTensorInfo(ae);return J}function rAe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:a,bias:i,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:f,leakyreluAlpha:p}=r;return Aw({a:s,b:a,transposeA:l,transposeB:c,backend:n,bias:i,preluActivationWeights:o,leakyreluAlpha:p,activation:f})}const sAe={kernelName:Dy,backendName:"webgl",kernelFunc:rAe};const mM="return abs(x);";function aAe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const a=n.texData.get(r.dataId),i=aK(a.values);return n.makeTensorInfo(r.shape,r.dtype,i)}let s;return ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new yu(r.shape,mM):s=new nl(r.shape,mM),n.runWebGLProgram(s,[r],r.dtype)}const iAe={kernelName:k0,backendName:"webgl",kernelFunc:aAe};const oAe=eo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,lAe=en({opSnippet:oAe}),cAe={kernelName:jp,backendName:"webgl",kernelFunc:lAe};const uAe=eo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,dAe=en({opSnippet:uAe}),fAe={kernelName:$p,backendName:"webgl",kernelFunc:dAe};const gM="return a + b;",hAe=ws({opSnippet:gM,packedOpSnippet:gM,supportsComplex:!0,cpuKernelImpl:CEe}),pAe={kernelName:Df,backendName:"webgl",kernelFunc:hAe};class mAe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((a,i)=>`T${i}`);const r=[];this.variableNames.forEach(a=>{r.push(`float v${a} = get${a}AtOutCoords();`)});const s=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}class gAe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((a,i)=>`T${i}`);const r=[];this.variableNames.forEach(a=>{r.push(`vec4 v${a} = get${a}AtOutCoords();`)});const s=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}function W1(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ka({inputs:{x:r[0]},backend:n});if(r.length>ye().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=W1({inputs:r.slice(0,l),backend:n}),f=W1({inputs:r.slice(l),backend:n});return W1({inputs:[c,f],backend:n})}const s=r.map(l=>l.dtype).reduce((l,c)=>ba(l,c)),a=r.map(l=>l.shape),o=ye().getBool("WEBGL_PACK")?new gAe(r[0].shape,a):new mAe(r[0].shape,a);return n.runWebGLProgram(o,r,s)}const yAe={kernelName:N0,backendName:"webgl",kernelFunc:W1};function bAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r,o=s.shape.length,l=Lt(a,s.shape);let c=l;const f=nr(c,o);let p=s;f!=null&&(p=ra({inputs:{x:s},backend:n,attrs:{perm:f}}),c=yr(c.length,o)),xs("all",c,o);const[m,y]=ss(p.shape,c),b=Ee(y),v=Xe({inputs:{x:p},backend:n,attrs:{shape:[-1,b]}}),x=qf(v,v.dtype,"all",n);let S;if(i){const C=gr(m,l);S=Xe({inputs:{x},backend:n,attrs:{shape:C}})}else S=Xe({inputs:{x},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),f!=null&&n.disposeIntermediateTensorInfo(p),S}const xAe={kernelName:FS,backendName:"webgl",kernelFunc:bAe};function vAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r,o=s.shape.length,l=Lt(a,s.shape);let c=l;const f=nr(c,o);let p=s;f!=null&&(p=ra({inputs:{x:s},backend:n,attrs:{perm:f}}),c=yr(c.length,o)),xs("any",c,o);const[m,y]=ss(p.shape,c),b=Ee(y),v=Xe({inputs:{x:p},backend:n,attrs:{shape:[-1,b]}}),x=qf(v,v.dtype,"any",n);let S;if(i){const C=gr(m,l);S=Xe({inputs:{x},backend:n,attrs:{shape:C}})}else S=Xe({inputs:{x},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),f!=null&&n.disposeIntermediateTensorInfo(p),S}const wAe={kernelName:BS,backendName:"webgl",kernelFunc:vAe};class SAe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:a,outSize:i}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];const o=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}class CAe{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,q(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const a=e[e.length-1],i=Math.ceil(a/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),s||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,c=Cn(l),f=ta("coords",l);let p,m;if(i===1){m=l+1;const z=Cn(m);p=`
        ${z} sourceLocR = ${z}(${f.join()}, 0);
        ++${f[l-1]};
        ${z} sourceLocG = ${z}(${f.join()}, 0);
        ++${f[l-2]};
        ${z} sourceLocA = ${z}(${f.join()}, 0);
        --${f[l-1]};
        ${z} sourceLocB = ${z}(${f.join()}, 0);
        --${f[l-2]};`}else m=l,p=`
        ${c} sourceLocR = coords;
        ++${f[l-1]};
        ${c} sourceLocG = coords;
        ++${f[l-2]};
        ${c} sourceLocA = coords;
        --${f[l-1]};
        ${c} sourceLocB = coords;
        --${f[l-2]};`;const y=["x","y","z","w","u","v"].slice(0,m),b="."+y[m-1],v=y.map(z=>"int "+z),x=ta("sourceLocR",m-1).concat("inIdx.r"),S=ta("sourceLocG",m-1).concat("inIdx.g"),C=ta("sourceLocB",m-1).concat("inIdx.b"),E=ta("sourceLocA",m-1).concat("inIdx.a"),k=r==="max"?"greaterThan":"lessThan",I=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${S.join()}),
                             getBestIndicesAChannel(${C.join()}),
                             getBestIndicesAChannel(${E.join()})));`,$=`vec4(
            getAChannel(${x.join()}),
            hasNextCol ? getAChannel(${S.join()}) : 0.,
            hasNextRow ? getAChannel(${C.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${E.join()}) : 0.)`,_=s?"":`
      float getBestIndicesAChannel(${v.join()}) {
        return getChannel(getBestIndicesA(${y.join()}),
                                          vec2(${y.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${v.join()}) {
        return getChannel(getA(${y.join()}),
                               vec2(${y.slice(-2).join()}));
      }
      ${_}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${f[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${f[l-2]} < ${o[l-2]-1};
        ${p}
        ivec4 srcIdx = ivec4(sourceLocR${b}, sourceLocG${b},
          sourceLocB${b}, sourceLocA${b}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${$};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${I}
          vec4 candidate = ${$};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${k}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}function mK(t,e,n,r=null){let s=e.shape[0],a=e.shape[1];r!=null&&(s=r.shape[0],a=r.shape[1]);const i=RC(a),o={windowSize:i,inSize:a,batchSize:s,outSize:Math.ceil(a/i)},l=new SAe(o,n,r==null),c=[e];r!=null&&c.push(r);const f=t.runWebGLProgram(l,c,"int32");if(f.shape[1]===1)return f;const p=mK(t,e,n,f);return t.disposeIntermediateTensorInfo(f),p}function gK(t,e,n,r=null){const s=r!=null?r.shape:e.shape,a=s[s.length-1],i=RC(a),o=new CAe(s,i,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(o,l,"int32");if(c.shape.length===e.shape.length){const f=gK(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}return c}function yK(t,e,n,r){const s=[n];if(xs("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!ye().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const a=[],i=t.texData.get(e.dataId),o=i!==null&&i.isPacked;let l=e;o&&(l=t.unpackTensor(e),a.push(l));const[c,f]=ss(l.shape,s),p=Ee(f),m=Xe({inputs:{x:l},backend:t,attrs:{shape:[-1,p]}});a.push(m);const y=mK(t,m,r);a.push(y);const b=Xe({inputs:{x:y},backend:t,attrs:{shape:c}});return a.forEach(v=>t.disposeIntermediateTensorInfo(v)),b}return gK(t,e,r)}function kAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a}=r;let i=Lt(a,s.shape);const o=nr(i,s.shape.length);let l=s;const c=[];o!=null&&(l=ra({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),i=yr(i.length,l.shape.length)),xs("argMax",[i[0]],l.shape.length);const f=yK(n,l,i[0],"max");return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const NAe={kernelName:T0,backendName:"webgl",kernelFunc:kAe};function TAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a}=r;let i=Lt(a,s.shape);const o=nr(i,s.shape.length);let l=s;const c=[];o!=null&&(l=ra({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),i=yr(i.length,l.shape.length)),xs("argMin",[i[0]],l.shape.length);const f=yK(n,l,i[0],"min");return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const EAe={kernelName:E0,backendName:"webgl",kernelFunc:TAe};const IAe=eo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,AAe=en({opSnippet:IAe}),jAe={kernelName:Rp,backendName:"webgl",kernelFunc:AAe};const $Ae=eo+"return log(x + sqrt(x * x + 1.0));",RAe=en({opSnippet:$Ae}),OAe={kernelName:Op,backendName:"webgl",kernelFunc:RAe};const _Ae=eo+`
  return atan(x);
`,DAe=en({opSnippet:_Ae}),zAe={kernelName:_p,backendName:"webgl",kernelFunc:DAe};const PAe=z_+`
  return atan(a, b);
`,LAe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vf+`
  return result;
`,MAe=ws({opSnippet:PAe,packedOpSnippet:LAe}),FAe={kernelName:zp,backendName:"webgl",kernelFunc:MAe};const BAe=eo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,UAe=en({opSnippet:BAe}),WAe={kernelName:Dp,backendName:"webgl",kernelFunc:UAe};class Zy{constructor(e,n,r,s=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,y=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg",x=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,S=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let C="0.0";if(v||(C="-1.0 / 1e-20"),r){this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${y}, ${b});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${m};
                wC += ${f}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?a?x:S:`wR * ${m} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const E="max";let k=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(k="avgValue / max(count, 1.0)");const I=Math.floor(i/4)*4,$=i%4,_=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${E}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${y}, ${b});
      const float initializationValue = ${C};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${C});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${p};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${I}; wC += 4) {
            int xC = xCCorner + wC * ${f};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              getValue(batch, xR, xC + 3 * ${f}, d)
            );

            ${_}
          }

          int xC = xCCorner + ${I};
          if (${$===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${$===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${$===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              initializationValue
            );

            ${_}
          }
        }
        setOutput(${k});
      }
    `}}class L_{constructor(e,n,r,s=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,o=e.strideDepth,l=e.strideHeight,c=e.strideWidth,f=e.dilationDepth,p=e.dilationHeight,m=e.dilationWidth,y=e.effectiveFilterDepth,b=e.effectiveFilterHeight,v=e.effectiveFilterWidth,x=e.padInfo.front,S=e.padInfo.top,C=e.padInfo.left;this.outputShape=e.outShape;const E=n==="avg";let k="0.0";if(E||(k="-1.0 / 1e-20"),r){this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${c});
        const ivec3 pads = ivec3(${x}, ${S}, ${C});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${y};
              wD += ${f}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${b};
                wR += ${p}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${v};
                  wC += ${m}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${b} * ${v} +
                      wR * ${v} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const I="max";let $=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&($="avgValue / max(count, 1.0)");const _=Math.floor(i/4)*4,z=i%4,L=`
      if (${E}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${I}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${c});
      const ivec3 pads = ivec3(${x}, ${S}, ${C});
      const float initializationValue = ${k};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${k});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${y};
            wD += ${f}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${b};
            wR += ${p}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${_}; wC += 4) {
              int xC = xCCorner + wC * ${m};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${m}, ch),
                getValue(batch, xD, xR, xC + 2 * ${m}, ch),
                getValue(batch, xD, xR, xC + 3 * ${m}, ch)
              );

              ${L}
            }

            int xC = xCCorner + ${_};
            if (${z===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${L}
            } else if (${z===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${m}, ch),
                initializationValue,
                initializationValue
              );

              ${L}
            } else if (${z===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${m}, ch),
                getValue(batch, xD, xR, xC + 2 * ${m}, ch),
                initializationValue
              );

              ${L}
            }
          }
        }
        setOutput(${$});
      }
    `}}function VAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;ix(s,"avgPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,c=1;q(bs(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const f=Zi(s.shape,a,i,c,o,l);if(f.filterWidth===1&&f.filterHeight===1&&Ft(f.inShape,f.outShape))return Ka({inputs:{x:s},backend:n});const p=new Zy(f,"avg",!1);return n.runWebGLProgram(p,[s],"float32")}const qAe={kernelName:I0,backendName:"webgl",kernelFunc:VAe};function GAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:c}=r,f=[1,1,1],p=wc(s.shape,a,i,f,o,l,c),m=new L_(p,"avg",!1);return n.runWebGLProgram(m,[s],"float32")}const HAe={kernelName:A0,backendName:"webgl",kernelFunc:GAe};class KAe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=l-1-e.padInfo.top,p=c-1-e.padInfo.left,m=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${f}, ${p});
      const float avgMultiplier = float(${m});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class XAe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,p=e.effectiveFilterDepth,m=e.effectiveFilterHeight,y=e.effectiveFilterWidth,b=p-1-e.padInfo.front,v=m-1-e.padInfo.top,x=y-1-e.padInfo.left,S=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${b}, ${v}, ${x});
      const float avgMultiplier = float(${S});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${p};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${m};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${y};
                wC += ${f}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}function YAe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,i=a,{filterSize:o,strides:l,pad:c,dimRoundingMode:f}=r,p=[1,1,1],m=wc(i.shape,o,l,p,c,f),y=new XAe(m);return n.runWebGLProgram(y,[s],i.dtype)}const QAe={kernelName:WS,backendName:"webgl",kernelFunc:YAe};function ZAe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,i=a;ix([s,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,f=Zi(i.shape,o,l,1,c),p=new KAe(f);return n.runWebGLProgram(p,[s],i.dtype)}const JAe={kernelName:US,backendName:"webgl",kernelFunc:ZAe};function eje(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:a}=e,{transposeA:i,transposeB:o}=r;return Aw({a:s,b:a,transposeA:i,transposeB:o,backend:n})}const tje={kernelName:j0,backendName:"webgl",kernelFunc:eje};class nje{constructor(e,n,r,s,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],At(e,n),At(e,r);let o="0.0";s!=null&&(At(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";a!=null&&(At(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}class rje{constructor(e,n,r,s,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],At(e,n),At(e,r);let o="vec4(0.0)";s!=null&&(At(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";a!=null&&(At(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}const sje=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:a,offset:i,scale:o}=t;q(s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,s,a];let f=null;i!=null&&(f=i.shape,c.push(i));let p=null;o!=null&&(p=o.shape,c.push(o));const m=ye().getBool("WEBGL_PACK_NORMALIZATION")?new rje(r.shape,s.shape,a.shape,f,p,l):new nje(r.shape,s.shape,a.shape,f,p,l);return e.runWebGLProgram(m,c,c[0].dtype)},aje={kernelName:W0,backendName:"webgl",kernelFunc:sje};class ije{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Cn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=oje(this.rank);let s;const a=e.map((i,o)=>`sourceLoc.${Tj[o]} = start[${o}] + coords.${Tj[o]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${a.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const Tj=["x","y","z","w","u","v"];function oje(t){if(t===1)return"sourceLoc";if(t<=6)return Tj.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}class lje{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Cn(this.rank),r=ta("coords",this.rank),s=ta("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,i=`getChannel(getSource(${s.join()}), ${a})`,o=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${i};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${i};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((f,p)=>`start[${p}]`).join()});`:e.map((f,p)=>`${s[p]} = ${r[p]} + start[${p}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}function cje(t,e,n,r){const s=r.texData.get(t.dataId),a=r.makeTensorInfo(n,t.dtype),i=r.texData.get(a.dataId);Object.assign(i,s),i.refCount=1,i.shape=n,i.dtype=t.dtype;let o=AO(e,pt(t.shape));s.slice&&(o+=s.slice.flatOffset),i.slice={flatOffset:o,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),a}function Fm(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:a,size:i}=r,[o,l]=$C(s,a,i);if(TO(s,o,l),Ee(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const p=n.texData.get(s.dataId),m=tIe(p.values,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,m)}const{isPacked:c}=n.texData.get(s.dataId),f=IO(s.shape,o,l);if(c||!f){const p=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lje(l):new ije(l),m=[o];return n.runWebGLProgram(p,[s],s.dtype,m)}return n.uploadToGPU(s.dataId),cje(s,o,l,n)}const uje={kernelName:bb,backendName:"webgl",kernelFunc:Fm};const dje=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:a,crops:i}=r;q(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=a.reduce((C,E)=>C*E),l=Hb(s.shape,a,o),c=Kb(l.length,a.length),f=Xb(s.shape,a,o),p=DO(i,a.length),m=zO(f,i,a.length),y=[],b=Xe({inputs:{x:s},backend:n,attrs:{shape:l}}),v=ra({inputs:{x:b},backend:n,attrs:{perm:c}}),x=Xe({inputs:{x:v},backend:n,attrs:{shape:f}}),S=Fm({inputs:{x},backend:n,attrs:{begin:p,size:m}});return y.push(b),y.push(v),y.push(x),y.forEach(C=>n.disposeIntermediateTensorInfo(C)),S},fje={kernelName:$0,backendName:"webgl",kernelFunc:dje};function hje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:a}=e,{size:i}=r,o=n.readSync(s.dataId),l=n.readSync(a.dataId),c=sK(o,l,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,c)}const pje={kernelName:VS,backendName:"webgl",kernelFunc:hje};const mje=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,gje=`
  return float(int(a.r) & int(b.r));
`;function yje(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,a=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=ye().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||i===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(s.dataId).values,[f,p]=NEe(r.shape,s.shape,l,c,r.dtype),m=n.makeTensorInfo(p,r.dtype),y=n.texData.get(m.dataId);return y.values=f,m}let o;return a?o=new Lm(mje,r.shape,s.shape,!1):o=new Cf(gje,r.shape,s.shape),n.runWebGLProgram(o,[r,s],r.dtype)}const bje={kernelName:R0,backendName:"webgl",kernelFunc:yje};function xje(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,a=n.readSync(r.dataId),i=n.readSync(s.dataId),o=At(Array.from(a),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const vje={kernelName:qS,backendName:"webgl",kernelFunc:xje};const wje="return float(a != b);",bK=ws({opSnippet:wje,cpuKernelImpl:GEe,dtype:"bool"}),Sje={kernelName:ib,backendName:"webgl",kernelFunc:bK};function lx(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Ka({inputs:{x:s.complexTensorInfos.real},backend:n})}const Cje={kernelName:N2,backendName:"webgl",kernelFunc:lx};const kje="return float(int(x));";function Nje(t,e){const n=new nl(t.shape,kje),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function Ej(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:a}=r;if(a==="complex64"){if(s.dtype==="complex64")return Ka({inputs:{x:s},backend:n});const i=Tr(s.shape),o=Ej({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Zu({inputs:{real:o,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(o),l}if(s.dtype==="complex64"){const i=lx({inputs:{input:s},backend:n}),o=Ej({inputs:{x:i},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(i),o}if(!Z$(s.dtype,a)){const i=Ka({inputs:{x:s},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:a}}if(n.shouldExecuteOnCPU([s])){const i=n.texData.get(s.dataId).values,[o,l,c]=TEe(i,s.shape,s.dtype,a);return n.makeTensorInfo(o,l,c)}if(a==="int32")return Nje(s,n);if(a==="bool"){const i=n.makeTensorInfo([],"bool",ts("bool",1)),l=bK({inputs:{a:s,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${a}`)}const Tje={kernelName:Pp,backendName:"webgl",kernelFunc:Ej};const yM="return ceil(x);",Eje=en({opSnippet:yM,packedOpSnippet:yM,cpuKernelImpl:EEe}),Ije={kernelName:Lp,backendName:"webgl",kernelFunc:Eje};class Aje{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}class jje{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}function $je(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:a,clipValueMax:i}=r;let o;ye().getBool("WEBGL_PACK_CLIP")?o=new jje(s.shape):o=new Aje(s.shape);const l=[[a],[i]];return n.runWebGLProgram(o,[s],s.dtype,l)}const Rje={kernelName:Mp,backendName:"webgl",kernelFunc:$je};class Oje{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}function bM(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function _je(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),a=new Oje(r.shape),i=[bM(r,s.complexTensorInfos.real),bM(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(a,i,i[0].dtype)}const Dje={kernelName:O0,backendName:"webgl",kernelFunc:_je};class zje{constructor(e){this.outputShape=[],this.outputShape=cl(e,1),this.variableNames=e.map((i,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const o=n[i-1];r.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${o}));`)}const s=n.length,a=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}class Pje{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=cl(e,n);const r=this.outputShape,s=r.length,a=Cn(s),i=ta("coords",s),o=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((v,x)=>`T${x}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let v=1;v<l.length;v++)l[v]=l[v-1]+e[v][n];const c=o[n],f=o.slice(-2),p=o.join();let m=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${p}), vec2(${f.join()}));
        }`;for(let v=1;v<l.length;v++){const x=l[v-1];m+=`
        if (${c} < ${l[v]}  && ${c} >= ${l[v-1]}) {
          return getChannel(
            getT${v}(${a1(o,c,x)}),
            vec2(${a1(f,c,x)}));
        }`}const y=l.length,b=l[l.length-1];m+=`
        return getChannel(
          getT${y}(${a1(o,c,b)}),
          vec2(${a1(f,c,b)}));`,this.userCode=`
      float getValue(${o.map(v=>"int "+v)}) {
        ${m}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[s-1]} = ${i[s-1]} + 1;
        if (${i[s-1]} < ${r[s-1]}) {
          result.g = getValue(${i});
        }

        ${i[s-2]} = ${i[s-2]} + 1;
        if (${i[s-2]} < ${r[s-2]}) {
          result.a = getValue(${i});
        }

        ${i[s-1]} = ${i[s-1]} - 1;
        if (${i[s-2]} < ${r[s-2]} &&
            ${i[s-1]} < ${r[s-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function a1(t,e,n){const r=t.indexOf(e);return t.map((a,i)=>i===r?`${a} - ${n}`:a).join()}function QC(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Ka({inputs:{x:s.complexTensorInfos.imag},backend:n})}const Lje={kernelName:d2,backendName:"webgl",kernelFunc:QC};function wy(t,e,n){const r=t[0].dtype;if(r==="complex64"){const y=t.map(C=>lx({inputs:{input:C},backend:n})),b=t.map(C=>QC({inputs:{input:C},backend:n})),v=wy(y,e,n),x=wy(b,e,n),S=Zu({inputs:{real:v,imag:x},backend:n});return y.forEach(C=>n.disposeIntermediateTensorInfo(C)),b.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),S}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const y=t.map(k=>{const $=[-1,Ee(k.shape.slice(e))];return Xe({inputs:{x:k},backend:n,attrs:{shape:$}})}),b=y.map(k=>({vals:n.readSync(k.dataId),shape:k.shape})),v=cl(y.map(k=>k.shape),1),x=y[0].shape[0]===1,S=IEe(b,v,r,x),C=cl(t.map(k=>k.shape),e),E=n.makeTensorInfo(C,r,S);return y.forEach(k=>n.disposeIntermediateTensorInfo(k)),E}const a=t.filter(y=>Ee(y.shape)>0),i=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(a.length===1){const y=i?new nl(t[0].shape,du):new yu(t[0].shape,du);return n.runWebGLProgram(y,t,r)}const o=ye().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>o){const y=[];for(let v=0;v<a.length;v+=o){const x=a.slice(v,v+o);y.push(wy(x,e,n))}const b=wy(y,e,n);for(const v of y)n.disposeIntermediateTensorInfo(v);return b}if(i){const y=new Pje(a.map(b=>b.shape),e);return n.runWebGLProgram(y,a,r)}const{tensors2D:l,outShape:c}=Mje(a,e,n),f=new zje(l.map(y=>y.shape)),p=n.runWebGLProgram(f,l,r);l.forEach(y=>n.disposeIntermediateTensorInfo(y));const m=Xe({inputs:{x:p},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(p),m}function Mje(t,e,n){const r=cl(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>Xe({inputs:{x:a},attrs:{shape:[-1,Ee(a.shape.slice(e))]},backend:n})),outShape:r}}function xK(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,a=Lt(s,e[0].shape)[0],i=e.map(c=>c.shape);RO(i,a);const o=cl(e.map(c=>c.shape),a);if(Ee(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(c=>Ee(c.shape)>0);return l.length===1?Ka({inputs:{x:l[0]},backend:n}):wy(l,a,n)}const Fje={kernelName:_0,backendName:"webgl",kernelFunc:xK};class vK{constructor(e,n=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,f=e.dilationHeight,p=e.dilationWidth,m=e.filterHeight,y=e.filterWidth,b=Math.floor(e.inChannels/4)*4,v=e.inChannels%4,x=e.dataFormat==="channelsLast",S=x?1:2,C=x?2:3,E=x?3:1;let k="",I="";r&&(s?k=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?k=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:k=`
          float activation(float x) {
            ${r}
          }
        `,I="result = activation(result);");const $=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${k}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${E}];

        ivec2 xRCCorner =
            ivec2(coords[${S}], coords[${C}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${m}; wR++) {
          int xR = xRCorner + wR * ${f};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${y}; wC++) {
            int xC = xCCorner + wC * ${p};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${b}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${x}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${v===1}) {

              if (${x}) {
                dotProd +=
                    getX(batch, xR, xC, ${b}) *
                    getW(wR, wC, ${b}, d2);
              } else {
                dotProd +=
                    getX(batch, ${b}, xR, xC) *
                    getW(wR, wC, ${b}, d2);
              }

            } else if (${v===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${b}, d2),
                getW(wR, wC, ${b} + 1, d2)
              );

              if (${x}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${b}),
                  getX(batch, xR, xC, ${b} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${b}, xR, xC),
                  getX(batch, ${b} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${v===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${b}, d2),
                getW(wR, wC, ${b} + 1, d2),
                getW(wR, wC, ${b} + 2, d2)
              );

              if (${x}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${b}),
                  getX(batch, xR, xC, ${b} + 1),
                  getX(batch, xR, xC, ${b} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${b}, xR, xC),
                  getX(batch, ${b} + 1, xR, xC),
                  getX(batch, ${b} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${$}
        ${I}
        setOutput(result);
      }
    `}}class Bje{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,p=e.filterDepth,m=e.filterHeight,y=e.filterWidth,b=Math.floor(e.inChannels/4)*4,v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${i}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${p}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${y}; wC++) {
              int xC = xCCorner + wC * ${f};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${b}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${v===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${b}) *
                  getW(wF, wR, wC, ${b}, d2);
              } else if (${v===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${b}),
                  getX(batch, xF, xR, xC, ${b} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${b}, d2),
                  getW(wF, wR, wC, ${b} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${v===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${b}),
                  getX(batch, xF, xR, xC, ${b} + 1),
                  getX(batch, xF, xR, xC, ${b} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${b}, d2),
                  getW(wF, wR, wC, ${b} + 1, d2),
                  getW(wF, wR, wC, ${b} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class wK{constructor(e,n=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ws(this.outputShape.length);const i=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,p=f;let m=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let x=0;x<f;x++)m+=`
           vec4 xTexelC${x*2};
           int xTexelC${x*2}Ready;
           vec4 xTexelC${x*2+1};
           int xTexelC${x*2+1}Ready;
           vec4 xC${x};`;m+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let x=0;x<f;x++)m+=`
           xTexelC${x*2} = vec4(0.0);
           xTexelC${x*2}Ready = 0;
           xTexelC${x*2+1} = vec4(0.0);
           xTexelC${x*2+1}Ready = 0;
           xC${x} = vec4(0.0);`;m+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let x=0;x<(p+1)/2;x++){const S=x*2;if(m+=`
           xC = xCCorner + ${S*l};
           `,o===1){if(S<f&&(i%2===1?(m+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }
               `,l===1&&S>0?m+=`
                 xC${S} = vec4(xTexelC${S-2}.zw, xTexelC${S}.xy);
                 `:m+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${S} = vec4(previous.zw, xTexelC${S}.xy);
                   } else {
                     xC${S} = vec4(0.0, 0.0, xTexelC${S}.xy);
                   }
                   `):m+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }

                 xC${S} = xTexelC${S};
                 `,S+1<f)){const C=i%2===0?LS(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(m+=`
                   xCOffset = xC + imod(pads[1], 2) + ${C};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                     xTexelC${S+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${S+1}.zw = vec2(0.0);
                     }
                     xTexelC${S+1}Ready = 1;
                   }
                   `,l>1?m+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${S+1} = vec4(previous.zw, xTexelC${S+1}.xy);
                     } else {
                      xC${S+1} = vec4(0.0, 0.0, xTexelC${S+1}.xy);
                     }
                     `:m+=`
                     xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.xy);
                     `):C===1?m+=`
                     xC${S+1} = xTexelC${S};
                     `:m+=`
                     xCOffset = xC + ${C};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                       xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${S+1}.zw = vec2(0.0);
                       }
                       xTexelC${S+1}Ready = 1;
                     }

                     xC${S+1} = xTexelC${S+1};
                     `}}else S<f&&(i%2===1?(m+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${S+1}Ready == 0) {
                   xTexelC${S+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${S+1}.zw = vec2(0.0);
                   }
                   xTexelC${S+1}Ready = 1;
                 }

                 xC${S} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
               `,S+1<f&&(m+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${S+1} = vec4(xTexelC${S+1}.xy, final.xy);
                 `)):(m+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                   xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${S+1}.zw = vec2(0.);
                   }
                   xTexelC${S+1}Ready = 1;
                 }

                 xC${S} = vec4(
                   xTexelC${S}.xy, xTexelC${S+1}.xy);
               `,S+1<f&&(m+=`
                   xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
                 `)));S<f&&(m+=`
             wTexel = getW(r, ${S}, d1, d2);
             dotProd += xC${S}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${S}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,S+1<f&&(m+=`
               wTexel = getW(r, ${S+1}, d1, d2);
               dotProd += xC${S+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${S+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}m+=`
     }
   `,m+=`
     }
   `,m+=`
     }
   `;let y="",b="";r&&(s?y=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:a?y=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:y=`vec4 activation(vec4 x) {
           ${r}
         }`,b="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${y}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${m}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${v}
         ${b}
         setOutput(result);
       }
     `}}class Uje{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Ws(this.outputShape.length);const{dataFormat:r}=n,s=aa(),a=r==="channelsLast",i=a?1:2,o=a?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let f=0;f<=1;f++)for(let p=0;p<=1;p++)c+=`
          blockIndex = rc.z + ${p};
          pos = rc.y + ${f};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${a}) {
                  innerDims = vec2(d1, ch);
                  result[${f*2+p}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${f*2+p}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}function jw(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function SK({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:o=null}){const l=t.shape,c=r.texData.get(t.dataId),f=n.inChannels,p=l[0]*l[1]*l[2],m=n.outChannels,y=n.dataFormat==="channelsLast",b=!1,v=!1;let x;const S=[];if(a!=null){const k=jw(a.shape,y);k!=null&&(a=Xe({inputs:{x:a},backend:r,attrs:{shape:k}}),S.push(a))}if(s!=null){const k=jw(s.shape,y);k!=null&&(s=Xe({inputs:{x:s},backend:r,attrs:{shape:k}}),S.push(s))}if(!((p===1||m===1)&&f>pK)&&c.isPacked&&y&&c.texture!=null&&l[2]%2!==0&&Ft(c.shape.slice(-3),l.slice(-3))){const k=l[0]*l[1]*(l[2]+1),I={dataId:t.dataId,shape:[1,k,n.inChannels],dtype:t.dtype},$=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,q(Iw(c.shape,I.shape),()=>`packed reshape ${c.shape} to ${I.shape} isn't free`);const _=Xe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});S.push(_);const z=Aw({a:I,b:_,backend:r,transposeA:b,transposeB:v,bias:s,activation:o,preluActivationWeights:a,leakyreluAlpha:i}),L=r.texData.get(z.dataId);q(L.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=$,L.shape=n.outShape,x=Ka({inputs:{x:z},backend:r}),x.shape=n.outShape,S.push(z)}else{const k=n.outHeight*n.outWidth,I=Xe({inputs:{x:t},backend:r,attrs:{shape:y?[n.batchSize,k,n.inChannels]:[n.batchSize,n.inChannels,k]}}),$=Xe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),_=Aw({a:y?I:$,b:y?$:I,transposeA:!y,transposeB:v,backend:r,bias:s,activation:o,preluActivationWeights:a,leakyreluAlpha:i});x=Xe({inputs:{x:_},backend:r,attrs:{shape:n.outShape}}),S.push(I),S.push($),S.push(_)}for(const k of S)r.disposeIntermediateTensorInfo(k);return x}function CK({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:o=null}){const{filterWidth:l,filterHeight:c,inChannels:f,outWidth:p,outHeight:m,dataFormat:y}=n,b=y==="channelsLast",v=l*c*f,x=m*p,S=[n.batchSize,v,x],C=!0,E=!1,k=[];if(a!=null){const J=jw(a.shape,b);J!=null&&(a=Xe({inputs:{x:a},backend:r,attrs:{shape:J}}),k.push(a))}if(s!=null){const J=jw(s.shape,b);J!=null&&(s=Xe({inputs:{x:s},backend:r,attrs:{shape:J}}),k.push(s))}const I=Xe({inputs:{x:e},backend:r,attrs:{shape:[1,v,Ee(e.shape)/v]}});k.push(I);const $=new Uje(S,n),_=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],z=r.runWebGLProgram($,[t],"float32",_),L=Xe({inputs:{x:z},backend:r,attrs:{shape:S}});k.push(z),k.push(L);const R=s!=null,D=a!=null,U=o==="leakyrelu",X=o?Qy(o,!0):null,V=new hK(b?L.shape:I.shape,b?I.shape:L.shape,b?[n.batchSize,x,n.outChannels]:[n.batchSize,n.outChannels,x],C,E,R,X,D,U),Y=b?[L,I]:[I,L];if(s&&Y.push(s),D&&Y.push(a),U){const J=r.makeTensorInfo([],"float32",vc(i,"float32"));Y.push(J),k.push(J)}const B=r.runWebGLProgram(V,Y,"float32"),Z=Xe({inputs:{x:B},backend:r,attrs:{shape:n.outShape}});k.push(B);for(const J of k)r.disposeIntermediateTensorInfo(J);return Z}function Wje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dataFormat:l,dilations:c,dimRoundingMode:f}=r,p=Sc(l),m=rs(s.shape,a.shape,i,c,o,f,!1,p);let y;if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))y=SK({x:s,filter:a,convInfo:m,backend:n});else if(m.strideWidth<=2&&p==="channelsLast"&&ye().getBool("WEBGL_EXP_CONV")){const v=new wK(m),x=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]];y=n.runWebGLProgram(v,[s,a],"float32",x)}else if(ye().getBool("WEBGL_CONV_IM2COL"))y=CK({x:s,filter:a,convInfo:m,backend:n});else{const v=new vK(m);y=n.runWebGLProgram(v,[s,a],"float32")}const b=Xe({inputs:{x:y},backend:n,attrs:{shape:m.outShape}});return n.disposeIntermediateTensorInfo(y),b}const Vje={kernelName:D0,backendName:"webgl",kernelFunc:Wje};class qje{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,a=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Gje{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,i=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=i?1:2,f=i?2:3,p=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${p}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${f}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Hje{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${a};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Kje{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,f=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}function Xje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:f}=r,p=Sc(l),m=rs(s.shape,f,i,1,o,c,!1,p),y=new qje(m);return n.runWebGLProgram(y,[s,a],"float32")}const Yje={kernelName:HS,backendName:"webgl",kernelFunc:Xje};class Qje{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Ws(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,a=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}function Zje(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{inputShape:i,strides:o,pad:l,dataFormat:c,dimRoundingMode:f}=r,p=Sc(c),m=rs(i,a.shape,o,1,l,f,!1,p);if(ye().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&p==="channelsLast"){const y=[[m.strideHeight,m.strideWidth]],b=new Qje(m);return n.runWebGLProgram(b,[s,a],"float32",y)}else{const y=new Gje(m);return n.runWebGLProgram(y,[s,a],"float32")}}const Jje={kernelName:z0,backendName:"webgl",kernelFunc:Zje};function e$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l}=r,c=Vu(s.shape,a.shape,i,l,o),f=new Bje(c);return n.runWebGLProgram(f,[s,a],"float32")}const t$e={kernelName:P0,backendName:"webgl",kernelFunc:e$e};function n$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,pad:o,filterShape:l}=r,c=Vu(s.shape,l,i,1,o),f=new Hje(c);return n.runWebGLProgram(f,[s,a],"float32")}const r$e={kernelName:KS,backendName:"webgl",kernelFunc:n$e};function s$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{pad:i,strides:o,inputShape:l}=r,c=Vu(l,a.shape,o,1,i),f=new Kje(c);return n.runWebGLProgram(f,[s,a],"float32")}const a$e={kernelName:XS,backendName:"webgl",kernelFunc:s$e};const i$e=Mm+`
  return cos(x);
`,o$e=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Vf}
  return result;
`,l$e=en({opSnippet:i$e,packedOpSnippet:o$e}),c$e={kernelName:Fp,backendName:"webgl",kernelFunc:l$e};const u$e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,d$e=en({opSnippet:u$e}),f$e={kernelName:Bp,backendName:"webgl",kernelFunc:d$e};class h$e{constructor(e,n,r,s,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,o,l,c]=e,[f]=n,[p,m]=r;this.outputShape=[f,p,m,c];const y=s==="bilinear"?1:0,[b,v]=[`${o-1}.0`,`${l-1}.0`],[x,S,C]=p>1?[`${(o-1)/(p-1)}`,"(y2-y1) * height_ratio",`y1*${b} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${b}`],[E,k,I]=m>1?[`${(l-1)/(m-1)}`,"(x2-x1) * width_ratio",`x1*${v} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${v}`];this.userCode=`
      const float height_ratio = float(${x});
      const float width_ratio = float(${E});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${S};
        float width_scale = ${k};

        float in_y = ${C};
        if( in_y < 0.0 || in_y > ${b} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${I};
        if( in_x < 0.0 || in_x > ${v} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${y} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}const p$e=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:a,boxInd:i}=e,{cropSize:o,method:l,extrapolationValue:c}=r,f=new h$e(s.shape,a.shape,o,l,c);return n.runWebGLProgram(f,[s,a,i],"float32")},m$e={kernelName:QS,backendName:"webgl",kernelFunc:p$e};var Jy;(function(t){t.Prod="*",t.Sum="+"})(Jy||(Jy={}));class xM{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,i=this.op===Jy.Prod?"1.0":"0.0",o=r?i:`getX(${vM(a,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",f="";r?(c=s?`end != ${l-1}`:"end != 0",f=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",f=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Cn(a)} coords = getOutputCoords();
        int end = ${wM(a,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${f};
          ${wM(a,"coords",this.op)} = idx;
          val ${this.op}= getX(${vM(a,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function vM(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function wM(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function kK(t,e,n,r,s,a){const i=e.shape.length,o=nr([r],i);let l=e;o!=null&&(l=ra({inputs:{x:e},backend:n,attrs:{perm:o}}));const c=yr(1,i)[0];if(c!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const f=l.shape[c];let p=Ka({inputs:{x:l},backend:n});for(let m=0;m<=Math.ceil(Math.log2(f))-1;m++){const y=new xM(t,l.shape,!1,a),b=[[m]],v=p;p=n.runWebGLProgram(y,[p],p.dtype,b),n.disposeIntermediateTensorInfo(v)}if(s){const m=new xM(t,l.shape,s,a),y=p;p=n.runWebGLProgram(m,[p],p.dtype),n.disposeIntermediateTensorInfo(y)}if(o!=null){const m=qu(o),y=ra({inputs:{x:p},backend:n,attrs:{perm:m}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(l),y}return p}function g$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;return kK(Jy.Prod,s,n,a,i,o)}const y$e={kernelName:YS,backendName:"webgl",kernelFunc:g$e};function b$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;return kK(Jy.Sum,s,n,a,i,o)}const x$e={kernelName:L0,backendName:"webgl",kernelFunc:b$e};function v$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:a}=e,{size:i,binaryOutput:o}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(a.dataId),f=sK(l,c,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,f)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(a),f=kEe(l,c,i,o);return n.makeTensorInfo(f.shape,a.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const w$e={kernelName:ZS,backendName:"webgl",kernelFunc:v$e};class S$e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}function C$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:a,dataFormat:i}=r,o=s.shape[0],l=i==="NHWC"?s.shape[1]:s.shape[2],c=i==="NHWC"?s.shape[2]:s.shape[3],f=i==="NHWC"?s.shape[3]:s.shape[1],p=l*a,m=c*a,y=f/(a*a),b=i==="NHWC"?[o,p,m,y]:[o,y,p,m],v=new S$e(b,a,i);return n.runWebGLProgram(v,[s],s.dtype)}const k$e={kernelName:JS,backendName:"webgl",kernelFunc:C$e};class NK{constructor(e,n=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ws(this.outputShape.length);const i=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let c="",f="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,f="result = activation(result);");const p=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${p}
        ${f}
        setOutput(result);
      }
    `}}class TK{constructor(e,n=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ws(this.outputShape.length);const i=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,f=e.filterHeight,p=e.filterWidth,m=p;let y=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let S=0;S<p;S++)y+=`
          vec4 xTexelC${S*2};
          int xTexelC${S*2}Ready;
          vec4 xTexelC${S*2+1};
          int xTexelC${S*2+1}Ready;
          vec4 xC${S};`;y+=`
    for (int r = 0; r < ${f}; r++) {
      `;for(let S=0;S<p;S++)y+=`
          xTexelC${S*2} = vec4(0.0);
          xTexelC${S*2}Ready = 0;
          xTexelC${S*2+1} = vec4(0.0);
          xTexelC${S*2+1}Ready = 0;
          xC${S} = vec4(0.0);`;y+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let S=0;S<(m+1)/2;S++){const C=S*2;if(y+=`
          xC = xCCorner + ${C*c};
          `,l===1){if(C<p&&(o%2===1?(y+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }
              `,c===1&&C>0?y+=`
                xC${C} = vec4(xTexelC${C-2}.zw, xTexelC${C}.xy);
                `:y+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${C} = vec4(previous.zw, xTexelC${C}.xy);
                  } else {
                    xC${C} = vec4(0.0, 0.0, xTexelC${C}.xy);
                  }
                  `):y+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                xC${C} = xTexelC${C};
                `,C+1<p)){const E=o%2===0?LS(c):c;c%2===0&&o%2===1||c%2!==0&&o%2!==1?(y+=`
                  xCOffset = xC + imod(pads[1], 2) + ${E};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                    xTexelC${C+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${C+1}.zw = vec2(0.0);
                    }
                    xTexelC${C+1}Ready = 1;
                  }
                  `,c>1?y+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${C+1} = vec4(previous.zw, xTexelC${C+1}.xy);
                    } else {
                     xC${C+1} = vec4(0.0, 0.0, xTexelC${C+1}.xy);
                    }
                    `:y+=`
                    xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.xy);
                    `):E===1?y+=`
                    xC${C+1} = xTexelC${C};
                    `:y+=`
                    xCOffset = xC + ${E};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                      xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${C+1}.zw = vec2(0.0);
                      }
                      xTexelC${C+1}Ready = 1;
                    }

                    xC${C+1} = xTexelC${C+1};
                    `}}else C<p&&(o%2===1?(y+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${C+1}Ready == 0) {
                  xTexelC${C+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${C+1}.zw = vec2(0.0);
                  }
                  xTexelC${C+1}Ready = 1;
                }

                xC${C} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
              `,C+1<p&&(y+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${C+1} = vec4(xTexelC${C+1}.xy, final.xy);
                `)):(y+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                  xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C+1}.zw = vec2(0.);
                  }
                  xTexelC${C+1}Ready = 1;
                }

                xC${C} = vec4(
                  xTexelC${C}.xy, xTexelC${C+1}.xy);
              `,C+1<p&&(y+=`
                  xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
                `)));C<p&&(y+=`
            wTexel = getW(r, ${C}, d1, q);
            dotProd += xC${C} * vec4(wTexel.xz, wTexel.xz);
          `,C+1<p&&(y+=`
              wTexel = getW(r, ${C+1}, d1, q);
              dotProd += xC${C+1} * vec4(wTexel.xz, wTexel.xz);
            `))}y+=`
    }
  `,y+=`
      }
    `;let b="",v="";r&&(s?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:b=`vec4 activation(vec4 x) {
          ${r}
        }`,v="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${b}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${y}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${x}
        ${v}
        setOutput(result);
      }
    `}}function N$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l,dimRoundingMode:c}=r;let f=l;f==null&&(f=[1,1]),q(bs(i,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${f}'`);const p=rs(s.shape,a.shape,i,f,o,c,!0);let m;ye().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels===1?m=new TK(p):m=new NK(p);const y=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];return n.runWebGLProgram(m,[s,a],"float32",y)}const T$e={kernelName:M0,backendName:"webgl",kernelFunc:N$e};class E$e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class I$e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,i=n-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}function A$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:c,filterShape:f}=r,p=rs(s.shape,f,i,o,l,c,!0),m=new E$e(p);return n.runWebGLProgram(m,[s,a],"float32")}const j$e={kernelName:e2,backendName:"webgl",kernelFunc:A$e};function $$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:c,inputShape:f}=r,p=rs(f,a.shape,i,o,l,c,!0),m=new I$e(p);return n.runWebGLProgram(m,[s,a],"float32")}const R$e={kernelName:t2,backendName:"webgl",kernelFunc:$$e};class O$e{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}function _$e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],a=Ee(r.shape),i=Xe({inputs:{x:r},backend:n,attrs:{shape:[a]}}),o=new O$e(a),l=n.runWebGLProgram(o,[i],i.dtype),c=Xe({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),c}const D$e={kernelName:n2,backendName:"webgl",kernelFunc:_$e};class z$e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:a,strideWidth:i,filterHeight:o,filterWidth:l,dilationHeight:c,dilationWidth:f}=e,{top:p,left:m}=s;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${i});
      const ivec2 pads = ivec2(${p}, ${m});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${f};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}function P$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l}=r,c=Ab(s.shape,a.shape,i,o,"NHWC",l);let f;const p=new z$e(c);f=n.runWebGLProgram(p,[s,a],"float32");const m=Xe({inputs:{x:f},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(f),m}const L$e={kernelName:F0,backendName:"webgl",kernelFunc:P$e};function M$e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,a=e,{allDims:i,summedDims:o,idDims:l}=VO(s,a.length);GO(i.length,l,a);const{path:c,steps:f}=HO(o,l),p=f.length;let m=null,y=i.length;const b=[];for(let v=0;v<p;++v){for(const x of f[v]){const{permutationIndices:S,expandDims:C}=qO(y,l[x]);let E;KO(S)?E=a[x]:(E=ra({inputs:{x:a[x]},backend:n,attrs:{perm:S}}),b.push(E));const k=E.shape.slice();for(let I=0;I<C.length;++I)k.splice(C[I],0,1);Ft(E.shape,k)||(E=Xe({inputs:{x:E},backend:n,attrs:{shape:k}}),b.push(E)),m===null?m=E:(m=P_({inputs:{a:E,b:m},backend:n}),b.push(m))}v<p-1&&(c[v]>=0&&(m=YC({inputs:{x:m},backend:n,attrs:{axis:c[v]-(i.length-y),keepDims:!1}}),b.push(m)),y--)}for(const v of b)v!==m&&n.disposeIntermediateTensorInfo(v);return m}const F$e={kernelName:s2,backendName:"webgl",kernelFunc:M$e};const B$e="return (x >= 0.0) ? x : (exp(x) - 1.0);",U$e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,W$e=en({opSnippet:B$e,packedOpSnippet:U$e}),V$e={kernelName:Wp,backendName:"webgl",kernelFunc:W$e};const q$e="return (b >= 0.0) ? a : a * (b + 1.0);",G$e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,H$e=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,a=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lm(G$e,r.shape,s.shape):new Cf(q$e,r.shape,s.shape);return n.runWebGLProgram(a,[r,s],r.dtype)},K$e={kernelName:a2,backendName:"webgl",kernelFunc:H$e};const X$e=`
  return vec4(equal(a, b));
`,Y$e="return float(a == b);",Q$e=ws({opSnippet:Y$e,packedOpSnippet:X$e,dtype:"bool",cpuKernelImpl:AEe}),Z$e={kernelName:B0,backendName:"webgl",kernelFunc:Q$e};const J$e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${PO};
  float a1 = ${LO};
  float a2 = ${MO};
  float a3 = ${FO};
  float a4 = ${BO};
  float a5 = ${UO};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,eRe=en({opSnippet:J$e}),tRe={kernelName:Vp,backendName:"webgl",kernelFunc:eRe};const nRe=Mm+`
  return exp(x);
`,rRe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,EK=en({opSnippet:nRe,packedOpSnippet:rRe,cpuKernelImpl:jEe,dtype:"float32"}),sRe={kernelName:qp,backendName:"webgl",kernelFunc:EK};function Ij(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:a}=e,i=a.shape.length,o=a.shape.slice();let l=s;return s<0&&(q(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),o.splice(l,0,1),Xe({inputs:{x:a},backend:r,attrs:{shape:o}})}const aRe={kernelName:U0,backendName:"webgl",kernelFunc:Ij};const SM="return exp(x) - 1.0;",iRe=en({opSnippet:SM,packedOpSnippet:SM,cpuKernelImpl:$Ee}),oRe={kernelName:Gp,backendName:"webgl",kernelFunc:iRe};class CM{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const a=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${s}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}function IK(t,e,n){const r=n.texData.get(t.dataId),s=Ee(t.shape),a=t.shape[t.shape.length-1],i=s/a,o=Xe({inputs:{x:t},backend:n,attrs:{shape:[i,a]}}),l=o.shape,c=new CM("real",l,e),f=new CM("imag",l,e),p=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],m=n.runWebGLProgram(c,p,"float32"),y=n.runWebGLProgram(f,p,"float32"),b=Zu({inputs:{real:m,imag:y},backend:n});n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y);const v=Xe({inputs:{x:b},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(b),v}function lRe(t){const{inputs:e,backend:n}=t,{input:r}=e;return IK(r,!1,n)}const cRe={kernelName:i2,backendName:"webgl",kernelFunc:lRe};class uRe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}function cx(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:a}=n;if(a=a||Of(s),a==="string"){const i=ir(a,Ee(r));return i.fill(s),e.makeTensorInfo(r,a,i)}else{const i=new uRe(r,s),o=[[s]];return e.runWebGLProgram(i,[],a,o)}}const dRe={kernelName:o2,backendName:"webgl",kernelFunc:cx};class fRe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}const hRe={kernelName:l2,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new fRe(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};const kM="return floor(x);",pRe=en({opSnippet:kM,packedOpSnippet:kM,cpuKernelImpl:REe}),mRe={kernelName:Hp,backendName:"webgl",kernelFunc:pRe};const gRe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,yRe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,bRe=ws({opSnippet:gRe,packedOpSnippet:yRe,dtype:"int32"}),xRe={kernelName:Kp,backendName:"webgl",kernelFunc:bRe};class vRe{constructor(e){this.variableNames=["A"];const n=aa(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}class wRe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=aa(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}const SRe={kernelName:ow,backendName:"webgl",kernelFunc:CRe};let Oh,BE=ye().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function CRe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:a}=r,i=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=i?[s.videoWidth,s.videoHeight]:[s.width,s.height],f=[c,l],p=[c,l,a];if(o||i){const v=ye().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Oh==null||v!==BE)&&(BE=v,Oh=document.createElement("canvas").getContext("2d",{willReadFrequently:BE})),Oh.canvas.width=l,Oh.canvas.height=c,Oh.drawImage(s,0,0,l,c),s=Oh.canvas}const m=n.makeTensorInfo(f,"int32");n.texData.get(m.dataId).usage=hi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(m.dataId),s);const y=ye().getBool("WEBGL_PACK")?new wRe(p):new vRe(p),b=n.runWebGLProgram(y,[m],"int32");return n.disposeData(m.dataId),b}function kRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:f,dilations:p,dimRoundingMode:m,activation:y,leakyreluAlpha:b}=r,v=Sc(f),x=rs(s.shape,a.shape,l,p,c,m,!1,v);let S;const C=[],E=i!=null,k=o!=null,I=y==="leakyrelu",$=()=>{const z=[s,a],L=(R,D)=>{if(D==="NCHW"&&R.shape.length===1&&R.shape[0]!==1){const U=Xe({inputs:{x:R},backend:n,attrs:{shape:[R.shape[0],1,1]}});return C.push(U),U}return R};if(E&&z.push(L(i,f)),k&&z.push(L(o,f)),I){const R=n.makeTensorInfo([],"float32",vc(b,"float32"));z.push(R),C.push(R)}return z};if(x.filterHeight===1&&x.filterWidth===1&&x.dilationHeight===1&&x.dilationWidth===1&&x.strideHeight===1&&x.strideWidth===1&&(x.padInfo.type==="SAME"||x.padInfo.type==="VALID"))S=SK({x:s,filter:a,convInfo:x,backend:n,bias:i,activation:y,preluActivationWeights:o,leakyreluAlpha:b});else if(x.strideWidth<=2&&v==="channelsLast"&&ye().getBool("WEBGL_EXP_CONV")){const z=y?Qy(y,!0):null,L=new wK(x,E,z,k,I),R=[[x.padInfo.top,x.padInfo.left],[x.strideHeight,x.strideWidth],[x.dilationHeight,x.dilationWidth],[x.inHeight,x.inWidth]],D=$();S=n.runWebGLProgram(L,D,"float32",R)}else if(ye().getBool("WEBGL_CONV_IM2COL"))S=CK({x:s,filter:a,convInfo:x,backend:n,bias:i,activation:y,preluActivationWeights:o,leakyreluAlpha:b});else{const z=y?Qy(y,!1):null,L=new vK(x,E,z,k,I),R=$();S=n.runWebGLProgram(L,R,"float32")}const _=Xe({inputs:{x:S},backend:n,attrs:{shape:x.outShape}});return C.push(S),C.forEach(z=>n.disposeIntermediateTensorInfo(z)),_}const NRe={kernelName:zy,backendName:"webgl",kernelFunc:kRe};function TRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:c,dilations:f,dimRoundingMode:p,activation:m,leakyreluAlpha:y}=r,b=[];let v=f;v==null&&(v=[1,1]),q(bs(l,v),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${v}'`);const x=rs(s.shape,a.shape,l,v,c,p,!0),S=ye().getBool("WEBGL_PACK_DEPTHWISECONV")&&x.strideWidth<=2&&x.outChannels/x.inChannels===1,C=m?Qy(m,S):null,E=[s,a],k=i!=null,I=o!=null,$=m==="leakyrelu";if(k&&E.push(i),I&&E.push(o),$){const R=n.makeTensorInfo([],"float32",vc(y,"float32"));E.push(R),b.push(R)}let _;S?_=new TK(x,k,C,I,$):_=new NK(x,k,C,I,$);const z=[[x.padInfo.top,x.padInfo.left],[x.strideHeight,x.strideWidth],[x.dilationHeight,x.dilationWidth],[x.inHeight,x.inWidth]],L=n.runWebGLProgram(_,E,"float32",z);return b.forEach(R=>n.disposeIntermediateTensorInfo(R)),L}const ERe={kernelName:Py,backendName:"webgl",kernelFunc:TRe};class IRe{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const a=Cn(r.length);let i=`
    int index;`;for(let o=0;o<this.sliceDim;o++)i+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}function ARe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,a=s.shape,i=a[a.length-1],o=Ee(r.shape),[l,c,f,p]=jC(r,s),m=Xe({inputs:{x:s},backend:n,attrs:{shape:[c,i]}}),y=Xe({inputs:{x:r},backend:n,attrs:{shape:[Ee(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const S=n.readSync(s.dataId),C=n.bufferSync(r),E=OEe(S,C,r.dtype,c,i,f,p,r.shape,o);return n.makeTensorInfo(l,r.dtype,E.values)}const b=new IRe(i,p,[c,f],r.shape),v=n.runWebGLProgram(b,[y,m],y.dtype),x=Xe({inputs:{x:v},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),x}const jRe={kernelName:c2,backendName:"webgl",kernelFunc:ARe};class $Re{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Cn(this.rank),s=RRe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function RRe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}function AK(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:a}=e,{axis:i,batchDims:o}=r,l=Lt(i,s.shape)[0];if(ye().get("DEBUG")){const C=n.readSync(a.dataId),E=s.shape[l];for(let k=0;k<C.length;++k){const I=C[k];q(I<=E-1&&I>=0,()=>`GatherV2: the index value ${I} is not in [0, ${E-1}]`)}}const c=YO(s,a,l,o),f=Ee(a.shape),p=[],m=Xe({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),y=Xe({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,f/c.batchSize]}});p.push(m),p.push(y);const b=[c.batchSize,c.outerSize,f/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,a])||s.dtype==="string"){const C=n.bufferSync(y),E=n.bufferSync(m),k=_Ee(E,C,b);return p.forEach(I=>n.disposeIntermediateTensorInfo(I)),n.makeTensorInfo(c.outputShape,k.dtype,k.values)}const v=new $Re(m.shape,b),x=n.runWebGLProgram(v,[m,y],m.dtype);p.push(x);const S=Xe({inputs:{x},backend:n,attrs:{shape:c.outputShape}});return p.forEach(C=>n.disposeIntermediateTensorInfo(C)),S}const ORe={kernelName:V0,backendName:"webgl",kernelFunc:AK};const _Re="return float(a > b);",DRe=`
  return vec4(greaterThan(a, b));
`,zRe=ws({opSnippet:_Re,packedOpSnippet:DRe,cpuKernelImpl:DEe,dtype:"bool"}),PRe={kernelName:q0,backendName:"webgl",kernelFunc:zRe};const LRe="return float(a >= b);",MRe=`
  return vec4(greaterThanEqual(a, b));
`,FRe=ws({opSnippet:LRe,packedOpSnippet:MRe,dtype:"bool",cpuKernelImpl:zEe}),BRe={kernelName:Xp,backendName:"webgl",kernelFunc:FRe};function URe(t){const{inputs:e,backend:n}=t,{input:r}=e;return IK(r,!0,n)}const WRe={kernelName:u2,backendName:"webgl",kernelFunc:URe};const VRe="return float(!isnan(x) && !isinf(x));",qRe=en({opSnippet:VRe,dtype:"bool"}),GRe={kernelName:Qp,backendName:"webgl",kernelFunc:qRe};const HRe="return float(isinf(x));",KRe=en({opSnippet:HRe,dtype:"bool"}),XRe={kernelName:Zp,backendName:"webgl",kernelFunc:KRe};const YRe="return float(isnan(x));",QRe=en({opSnippet:YRe,dtype:"bool"}),ZRe={kernelName:Jp,backendName:"webgl",kernelFunc:QRe};const JRe="return float(a < b);",eOe=`
  return vec4(lessThan(a, b));
`,tOe=ws({opSnippet:JRe,packedOpSnippet:eOe,cpuKernelImpl:PEe,dtype:"bool"}),nOe={kernelName:H0,backendName:"webgl",kernelFunc:tOe};const rOe="return float(a <= b);",sOe=`
  return vec4(lessThanEqual(a, b));
`,aOe=ws({opSnippet:rOe,packedOpSnippet:sOe,cpuKernelImpl:LEe,dtype:"bool"}),iOe={kernelName:K0,backendName:"webgl",kernelFunc:aOe};function oOe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:a}=n,i=MEe(r,s,a);return e.makeTensorInfo([i.length],"float32",i)}const lOe={kernelName:f2,backendName:"webgl",kernelFunc:oOe};const cOe=Mm+`
  return x < 0.0 ? 0./0. : log(x);
`,uOe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,dOe=en({opSnippet:cOe,packedOpSnippet:uOe,cpuKernelImpl:FEe}),fOe={kernelName:em,backendName:"webgl",kernelFunc:dOe};const hOe=Mm+`
  return log(1.0 + x);
`,pOe=en({opSnippet:hOe}),mOe={kernelName:tm,backendName:"webgl",kernelFunc:pOe};const gOe="return float(a >= 1.0 && b >= 1.0);",yOe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,bOe=ws({opSnippet:gOe,packedOpSnippet:yOe,dtype:"bool"}),xOe={kernelName:X0,backendName:"webgl",kernelFunc:bOe};const vOe="return float(!(x >= 1.0));",wOe=en({opSnippet:vOe}),SOe={kernelName:Y0,backendName:"webgl",kernelFunc:wOe};const COe="return float(a >= 1.0 || b >= 1.0);",kOe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,NOe=ws({opSnippet:COe,packedOpSnippet:kOe,dtype:"bool"}),TOe={kernelName:Q0,backendName:"webgl",kernelFunc:NOe};class EOe{constructor(e,n,r,s,a){this.variableNames=["x"],this.outputShape=[];const i=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;a===.5?l=`inversesqrt(${c})`:a===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}class IOe{constructor(e,n,r,s,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;a===.5?l=`inversesqrt(${c})`:a===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}const AOe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:a,bias:i,alpha:o,beta:l}=r,c=ye().getBool("WEBGL_PACK_NORMALIZATION")?new IOe(s.shape,a,i,o,l):new EOe(s.shape,a,i,o,l);return n.runWebGLProgram(c,[s],s.dtype)},jOe={kernelName:Z0,backendName:"webgl",kernelFunc:AOe};class $Oe{constructor(e,n,r,s,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${a})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}const ROe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:a,dy:i}=e,{depthRadius:o,bias:l,alpha:c,beta:f}=r,p=new $Oe(s.shape,o,l,c,f);return n.runWebGLProgram(p,[s,a,i],s.dtype)},OOe={kernelName:h2,backendName:"webgl",kernelFunc:ROe};function _Oe(t,e,n,r){const s=Ee(e),i=Ee(t.shape)/s,o=Xe({inputs:{x:t},attrs:{shape:[i,s]},backend:r}),l=qf(o,t.dtype,"max",r),c=Xe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}function jK(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:a,keepDims:i}=r,o=s.shape.length,l=Lt(a,s.shape);let c=l;const f=nr(c,o),p=f!=null,m=n.shouldExecuteOnCPU([s]);let y=s;if(p){if(m){const E=n.texData.get(y.dataId).values,k=new Array(o);for(let _=0;_<k.length;_++)k[_]=s.shape[f[_]];const I=D_(E,s.shape,s.dtype,f,k);y=n.makeTensorInfo(k,s.dtype);const $=n.texData.get(y.dataId);$.values=I}else y=XC(s,f,n);c=yr(c.length,o)}xs("max",c,o);const[b,v]=ss(y.shape,c);let x=b;i&&(x=gr(b,l));let S;if(m){const E=n.texData.get(y.dataId).values,k=BEe(E,Ee(v),x,s.dtype);S=n.makeTensorInfo(x,s.dtype);const I=n.texData.get(S.dataId);I.values=k}else S=_Oe(y,v,x,n);return p&&n.disposeIntermediateTensorInfo(y),S}const DOe={kernelName:J0,backendName:"webgl",kernelFunc:jK};const zOe=z_+`
  return max(a, b);
`,POe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vf+`
  return result;
`,LOe=ws({opSnippet:zOe,packedOpSnippet:POe,cpuKernelImpl:UEe}),MOe={kernelName:nm,backendName:"webgl",kernelFunc:LOe};function FOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;ix(s,"maxPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,c=1;q(bs(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const f=Zi(s.shape,a,i,c,o,l);if(f.filterWidth===1&&f.filterHeight===1&&Ft(f.inShape,f.outShape))return Ka({inputs:{x:s},backend:n});const p=new Zy(f,"max",!1);return n.runWebGLProgram(p,[s],s.dtype)}const BOe={kernelName:eb,backendName:"webgl",kernelFunc:FOe};function UOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:a,strides:i,pad:o,dataFormat:l,dimRoundingMode:c}=r,f=[1,1,1],p=wc(s.shape,a,i,f,o,c,l),m=new L_(p,"max",!1);return n.runWebGLProgram(m,[s],s.dtype)}const WOe={kernelName:tb,backendName:"webgl",kernelFunc:UOe};class VOe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,l=i-1-e.padInfo.left,c=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class qOe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=l-1-e.padInfo.front,m=c-1-e.padInfo.top,y=f-1-e.padInfo.left,b=l*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${b} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${f} +
                  wR * ${f} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}function GOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,i=a,{filterSize:o,strides:l,pad:c,dimRoundingMode:f}=r,p=[1,1,1],m=wc(i.shape,o,l,p,c,f),y=new L_(m,"max",!0),b=n.runWebGLProgram(y,[i],i.dtype),v=new qOe(m),x=n.runWebGLProgram(v,[s,b],i.dtype);return n.disposeIntermediateTensorInfo(b),x}const HOe={kernelName:m2,backendName:"webgl",kernelFunc:GOe};function KOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a,output:i}=e,o=a;ix([a,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:f,dimRoundingMode:p}=r,m=Zi(o.shape,l,c,1,f,p),y=!0,b=new Zy(m,"max",y),v=n.runWebGLProgram(b,[o],o.dtype),x=new VOe(m),S=n.runWebGLProgram(x,[s,v],o.dtype);return n.disposeIntermediateTensorInfo(v),S}const XOe={kernelName:p2,backendName:"webgl",kernelFunc:KOe};function YOe(t,e,n,r){let s=new Zy(n,"max",!1);const a=r.runWebGLProgram(s,[t],"float32");s=new Zy(n,"max",!0,!0,e);const i=r.runWebGLProgram(s,[t],"float32");return[a,i]}const QOe={kernelName:g2,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:a,pad:i,includeBatchInIndex:o}=e,l=n;q(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];q(bs(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=Zi(r.shape,s,a,c,i),[p,m]=YOe(r,o,f,l);return[p,m]}};function ZOe(t,e,n,r){const s=Ee(e),i=Ee(t.shape)/s,o=Xe({inputs:{x:t},attrs:{shape:[i,s]},backend:r}),l=qf(o,"float32","mean",r),c=Xe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}const JOe={kernelName:nb,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:a}=e,i=n,o=r.shape.length,l=Lt(a,r.shape);let c=l;const f=nr(c,o),p=f!=null,m=i.shouldExecuteOnCPU([r]),y=[];let b=r;if(p){if(m){const k=i.texData.get(b.dataId).values,I=new Array(o);for(let z=0;z<I.length;z++)I[z]=r.shape[f[z]];const $=D_(k,r.shape,r.dtype,f,I);b=i.makeTensorInfo(I,r.dtype);const _=i.texData.get(b.dataId);_.values=$}else b=XC(r,f,i);y.push(b),c=yr(c.length,o)}xs("sum",c,o);const[v,x]=ss(b.shape,c);let S=v;s&&(S=gr(v,l));const C=ZOe(b,x,S,i);for(const E of y)i.disposeIntermediateTensorInfo(E);return C}};function e_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r,o=s.shape.length,l=Lt(a,s.shape);let c=l;const f=nr(c,o);let p=s;f!=null&&(p=ra({inputs:{x:s},backend:n,attrs:{perm:f}}),c=yr(c.length,s.shape.length)),xs("min",c,o);const[m,y]=ss(p.shape,c),b=Ee(y),v=Xe({inputs:{x:p},backend:n,attrs:{shape:[-1,b]}}),x=qf(v,v.dtype,"min",n);let S;if(i){const C=gr(m,l);S=Xe({inputs:{x},backend:n,attrs:{shape:C}})}else S=Xe({inputs:{x},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),f!=null&&n.disposeIntermediateTensorInfo(p),S}const t_e={kernelName:rb,backendName:"webgl",kernelFunc:e_e};const n_e=z_+`
  return min(a, b);
`,r_e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vf+`
  return result;
`,s_e=ws({opSnippet:n_e,packedOpSnippet:r_e,cpuKernelImpl:WEe}),a_e={kernelName:rm,backendName:"webgl",kernelFunc:s_e};class i_e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((f,p)=>f[0]+e[p]+f[1]);const s=e.length,a=Cn(s),i=n.map(f=>f[0]).join(","),o=n.map((f,p)=>f[0]+e[p]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${i};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${i});
      ${a} end = ${a}(${o});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}class o_e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((b,v)=>b[0]+e[v]+b[1]);const s=e.length,a=Cn(s),i=n.map(b=>b[0]).join(","),o=n.map((b,v)=>b[0]+e[v]).join(","),l=ta("rc",s),c=ta("source",s),f=`${l[s-1]} < ${this.outputShape[s-1]}`,p=s===1?"source":`vec2(${c.slice(-2).join()})`,m=r==="reflect"?0:1;let y="";if(s===1){const b=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${m};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${m};
        }
        source -= start;
      `;y=`
        ${a} rc = outputLoc;
        ${b}
        result[0] = getChannel(getX(${c.join()}), ${p});
        ${l[s-1]} += 1;
        if(${f}) {
          ${b}
          result[1] = getChannel(getX(${c.join()}), ${p});
        }
      `}else{const b=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${m}) +
                gte * ((end - 1) * 2 - source + ${m});
        source -= start;
      `;y=`
        ${a} rc = outputLoc;
        ${b}
        result[0] = getChannel(getX(${c.join()}), ${p});
        ${l[s-1]} += 1;
        if(${f}) {
          ${b}
          result[1] = getChannel(getX(${c.join()}), ${p});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${b}
          result[2] = getChannel(getX(${c.join()}), ${p});
          ${l[s-1]} += 1;
          if(${f}) {
            ${b}
            result[3] = getChannel(getX(${c.join()}), ${p});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${i});
      const ${a} end = ${a}(${o});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${y}
        setOutput(result);
      }
    `}}const l_e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:a}=n,i=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new o_e(r.shape,s,a):new i_e(r.shape,s,a);return e.runWebGLProgram(i,[r],r.dtype)},c_e={kernelName:sb,backendName:"webgl",kernelFunc:l_e};const u_e=`if (b == 0.0) return NAN;
  return mod(a, b);`,d_e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Vf+`
  return result;
`,f_e=ws({opSnippet:u_e,packedOpSnippet:d_e}),h_e={kernelName:sm,backendName:"webgl",kernelFunc:f_e};class p_e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}const m_e=`
if (a == b) {
  return 1.0;
};
return a / b;`,g_e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,$K=ws({opSnippet:m_e,packedOpSnippet:g_e,checkOutOfBounds:!0}),y_e={kernelName:Up,backendName:"webgl",kernelFunc:$K};const NM="return a - b;",RK=ws({opSnippet:NM,packedOpSnippet:NM,supportsComplex:!0,cpuKernelImpl:uIe}),b_e={kernelName:vm,backendName:"webgl",kernelFunc:RK};function OK(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:a}=r,i=Lt([a],s.shape),o=jK({inputs:{x:s},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=gr(o.shape,i),c=Xe({inputs:{x:o},backend:n,attrs:{shape:l}}),f=RK({inputs:{a:s,b:c},backend:n}),p=EK({inputs:{x:f},backend:n}),m=YC({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:!1}}),y=Xe({inputs:{x:m},backend:n,attrs:{shape:l}}),b=$K({inputs:{a:p,b:y},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}const x_e={kernelName:Sb,backendName:"webgl",kernelFunc:OK};function v_e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:a,seed:i,normalized:o}=r,l=o?s:OK({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],f=l.shape[1],p=new p_e(c,f,a),m=[[i]],y=n.runWebGLProgram(p,[l],"int32",m);return o||n.disposeIntermediateTensorInfo(l),y}const w_e={kernelName:y2,backendName:"webgl",kernelFunc:v_e};const S_e=eo+`
  return -x;
`,C_e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function k_e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const a=n.texData.get(r.dataId),[i,o]=qEe(a.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}let s;return ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new yu(r.shape,C_e):s=new nl(r.shape,S_e),n.runWebGLProgram(s,[r],r.dtype)}const N_e={kernelName:ab,backendName:"webgl",kernelFunc:k_e};const T_e=TC;function E_e(t){ci("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r,c=n.readSync(s.dataId),f=n.readSync(a.dataId),{selectedIndices:p}=T_e(c,f,i,o,l);return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}const I_e={kernelName:b2,backendName:"webgl",kernelFunc:E_e};const A_e=EC;function j_e(t){ci("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,f=n.readSync(s.dataId),p=n.readSync(a.dataId),{selectedIndices:m,validOutputs:y}=A_e(f,p,i,o,l,c);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([],"int32",new Int32Array([y]))]}const $_e={kernelName:x2,backendName:"webgl",kernelFunc:j_e};const R_e=IC;function O_e(t){ci("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,f=n.readSync(s.dataId),p=n.readSync(a.dataId),m=i,y=o,b=l,v=c,{selectedIndices:x,selectedScores:S}=R_e(f,p,m,y,b,v);return[n.makeTensorInfo([x.length],"int32",new Int32Array(x)),n.makeTensorInfo([S.length],"float32",new Float32Array(S))]}const __e={kernelName:v2,backendName:"webgl",kernelFunc:O_e};class D_e{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}const z_e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:a,depth:i,onValue:o,offValue:l}=r,c=Ee(s.shape),f=new D_e(c,i,o,l),p=Xe({inputs:{x:s},backend:n,attrs:{shape:[c]}}),m=n.runWebGLProgram(f,[p],a);n.disposeIntermediateTensorInfo(p);const y=[...s.shape,i],b=Xe({inputs:{x:m},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(m),b},P_e={kernelName:lb,backendName:"webgl",kernelFunc:z_e};function $w(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=lx({inputs:{input:r},backend:n}),a=$w({inputs:{x:s},backend:n}),i=QC({inputs:{input:r},backend:n}),o=$w({inputs:{x:i},backend:n}),l=Zu({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}else return cx({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const L_e={kernelName:Tb,backendName:"webgl",kernelFunc:$w};function _K(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=lx({inputs:{input:r},backend:n}),a=_K({inputs:{x:s},backend:n}),i=QC({inputs:{input:r},backend:n}),o=$w({inputs:{x:i},backend:n}),l=Zu({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}else return cx({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const M_e={kernelName:ob,backendName:"webgl",kernelFunc:_K};function F_e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return Ij({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const a=e[0].shape,i=e[0].dtype;e.forEach(f=>{ys(a,f.shape,"All tensors passed to stack must have matching shapes"),q(i===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(f=>{const p=Ij({inputs:{input:f},backend:n,attrs:{dim:s}});return o.push(p),p}),c=xK({inputs:l,backend:n,attrs:{axis:s}});return o.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const B_e={kernelName:cb,backendName:"webgl",kernelFunc:F_e};class U_e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const s=e.length,a=Cn(s),i=n.map(c=>c[0]).join(","),o=n.map((c,f)=>c[0]+e[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${i};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${i});
      ${a} end = ${a}(${o});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}class W_e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((v,x)=>v[0]+e[x]+v[1]);const s=e.length,a=Cn(s),i=n.map(v=>v[0]).join(","),o=n.map((v,x)=>v[0]+e[x]).join(","),l=ta("rc",s),c=ta("source",s),f=`${l[s-1]} < ${this.outputShape[s-1]}`,p=s===1?"source":`vec2(${c.slice(-2).join()})`,m=[`${a} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${f}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${f}) {`],y=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let b="";for(let v=0,x=s===1?2:4;v<x;v++)b+=`
        ${m[v]}
        if (${y}) {
          result[${v}] = float(value);
        } else {
          ${a} source = rc - start;
          result[${v}] = getChannel(getX(${c.join()}), ${p});
        }
      `;b+=s===1?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${i});
      const ${a} end = ${a}(${o});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${b}
        setOutput(result);
      }
    `}}const DK=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:a,constantValue:i}=r;if(Ee(s.shape)===0){const c=a.map((f,p)=>f[0]+s.shape[p]+f[1]);return cx({backend:n,attrs:{shape:c,value:i,dtype:s.dtype}})}const o=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new W_e(s.shape,a,i):new U_e(s.shape,a,i),l=[[i]];return n.runWebGLProgram(o,[s],s.dtype,l)},V_e={kernelName:ub,backendName:"webgl",kernelFunc:DK};const q_e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,G_e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Vf+`
  return result;
`,H_e=ws({opSnippet:q_e,packedOpSnippet:G_e}),K_e={kernelName:im,backendName:"webgl",kernelFunc:H_e};function X_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r,o=s.shape.length,l=[],c=Lt(a,s.shape);let f=c;const p=nr(f,o);let m=s;p!=null&&(m=ra({inputs:{x:s},backend:n,attrs:{perm:p}}),f=yr(f.length,o),l.push(m)),xs("prod",f,o);let y;if(n.shouldExecuteOnCPU([m])){const b=n.texData.get(m.dataId).values,{outVals:v,outShape:x,outDtype:S}=HEe(m.shape,m.dtype,b,f);y=n.makeTensorInfo(x,S,v)}else{const[b,v]=ss(m.shape,f),x=Ee(v),S=Xe({inputs:{x:m},backend:n,attrs:{shape:[-1,x]}}),C=G2(s.dtype),E=qf(S,C,"prod",n);y=Xe({inputs:{x:E},backend:n,attrs:{shape:b}}),l.push(S),l.push(E)}if(i){l.push(y);const b=gr(y.shape,c);y=Xe({inputs:{x:y},backend:n,attrs:{shape:b}})}return l.forEach(b=>n.disposeIntermediateTensorInfo(b)),y}const Y_e={kernelName:fb,backendName:"webgl",kernelFunc:X_e};function Q_e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:a,indices:i}=e,{outputRaggedRank:o}=r,l=s.map(S=>n.readSync(S.dataId)),c=s.map(S=>S.shape),f=n.readSync(a.dataId),p=n.readSync(i.dataId),[m,y,b]=KEe(l,c,f,a.shape,a.dtype,p,i.shape,o),v=m.map(S=>n.makeTensorInfo([S.length],"int32",S)),x=n.makeTensorInfo(b,a.dtype,y);return v.concat([x])}const Z_e={kernelName:w2,backendName:"webgl",kernelFunc:Q_e};function J_e(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:a}=e,i=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(a.dataId),[c,f]=XEe(i,r.shape,r.dtype,o,s.shape,l,a.shape),p=n.makeTensorInfo([c.length],"int32",c),m=n.makeTensorInfo([f.length],r.dtype,f);return[p,m]}const eDe={kernelName:S2,backendName:"webgl",kernelFunc:J_e};function tDe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:a,defaultValue:i,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),f=n.readSync(a.dataId),p=n.readSync(i.dataId),m=o.map(x=>n.readSync(x.dataId)),y=o.map(x=>x.shape),[b,v]=YEe(c,s.shape,f,a.shape,a.dtype,p,i.shape,m,y,l);return n.makeTensorInfo(b,a.dtype,v)}const nDe={kernelName:C2,backendName:"webgl",kernelFunc:tDe};const zK=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:a,dtype:i}=n,o=QEe(r,s,a,i);return e.makeTensorInfo([o.length],i,o)},rDe={kernelName:k2,backendName:"webgl",kernelFunc:zK};const sDe="return 1.0 / x;",aDe=en({opSnippet:sDe}),iDe={kernelName:om,backendName:"webgl",kernelFunc:aDe};const oDe=eo+`
  return (x < 0.0) ? 0.0 : x;
`,lDe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cDe=en({opSnippet:oDe,packedOpSnippet:lDe}),uDe={kernelName:lm,backendName:"webgl",kernelFunc:cDe};const dDe=eo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,fDe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hDe=en({opSnippet:dDe,packedOpSnippet:fDe}),pDe={kernelName:cm,backendName:"webgl",kernelFunc:hDe};class mDe{constructor(e,n,r,s,a){this.variableNames=["A"],this.outputShape=[];const[i,o,l,c]=e;this.outputShape=[i,n,r,c];const f=[s&&n>1?o-1:o,s&&r>1?l-1:l],p=[s&&n>1?n-1:n,s&&r>1?r-1:r];let m;a?m="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":m="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/p[0]},
          ${f[1]/p[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${m};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}class gDe{constructor(e,n,r,s,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,l,c]=e;this.outputShape=[i,n,r,c];const f=[s&&n>1?o-1:o,s&&r>1?l-1:l],p=[s&&n>1?n-1:n,s&&r>1?r-1:r];let m;a?m="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":m="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/p[0]},
          ${f[1]/p[1]},
          ${f[1]/p[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${m};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}function yDe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r,[l,c]=o,f=ye().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new gDe(s.shape,l,c,a,i):new mDe(s.shape,l,c,a,i);return n.runWebGLProgram(f,[s],"float32")}const bDe={kernelName:mb,backendName:"webgl",kernelFunc:yDe};class xDe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,a]=n,[,i,o]=e,l=[r&&i>1?s-1:s,r&&o>1?a-1:a],c=[r&&i>1?i-1:i,r&&o>1?o-1:o],f=l[0]/c[0],p=l[1]/c[1],m=1/f,y=1/p,b=Math.ceil(m)*2+2,v=Math.ceil(y)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${p});

        const float invHeightScale = float(${m});
        const float invWidthScale = float(${y});

        const int winHeight = int(${b});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}function vDe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:a}=e,{alignCorners:i}=r,o=new xDe(a.shape,s.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}const wDe={kernelName:E2,backendName:"webgl",kernelFunc:vDe};class SDe{constructor(e,n,r,s,a){this.variableNames=["A"],this.outputShape=[];const[i,o,l,c]=e;this.outputShape=[i,n,r,c];const f=[s&&n>1?o-1:o,s&&r>1?l-1:l],p=[s&&n>1?n-1:n,s&&r>1?r-1:r],m=s?"0.5":"0.0";let y;a?y="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":y="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/p[0]},
          ${f[1]/p[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${y};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${m})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}class CDe{constructor(e,n,r,s,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,l,c]=e;this.outputShape=[i,n,r,c];const f=[s&&n>1?o-1:o,s&&r>1?l-1:l],p=[s&&n>1?n-1:n,s&&r>1?r-1:r],m=s?"0.5":"0.0";let y;a?y="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":y="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/p[0]},
          ${f[1]/p[1]},
          ${f[1]/p[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${y};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${m})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}function kDe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r,[l,c]=o,f=ye().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new CDe(s.shape,l,c,a,i):new SDe(s.shape,l,c,a,i);return n.runWebGLProgram(f,[s],s.dtype)}const NDe={kernelName:pb,backendName:"webgl",kernelFunc:kDe};class TDe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,a]=n,[,i,o]=e,l=[r&&i>1?s-1:s,r&&o>1?a-1:a],c=[r&&i>1?i-1:i,r&&o>1?o-1:o],f=l[0]/c[0],p=l[1]/c[1],m=1/f,y=1/p,b=Math.ceil(m)*2+2,v=Math.ceil(y)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${p});

        const float invHeightScale = float(${m});
        const float invWidthScale = float(${y});

        const int winHeight = int(${b});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}function EDe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:a}=e,{alignCorners:i}=r,o=new TDe(a.shape,s.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}const IDe={kernelName:T2,backendName:"webgl",kernelFunc:EDe};class ADe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,a=e.map((o,l)=>s(l)).join(","),i=Cn(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}class jDe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=ta("rc",r),a=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,o=Cn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${a}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${a}){
            result.g = ${c(s.slice())};
          }
          if(${i}) {
            result.b = ${f(s.slice())};
            if(${a}) {
              result.a = ${p(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(b){return m(b)}function c(b){return b[r-1]="("+b[r-1]+" + 1)",m(b)}function f(b){return b[r-2]="("+b[r-2]+" + 1)",m(b)}function p(b){return b[r-1]="("+b[r-1]+" + 1)",b[r-2]="("+b[r-2]+" + 1)",m(b)}function m(b){const v=e.map((C,E)=>y(E,b)),x=v.join(","),S=v.slice(-2).join(",");return`getChannel(getX(${x}), vec2(${S}))`}function y(b,v){return n.indexOf(b)!==-1&&e[b]!==1?`${e[b]} - ${v[b]} - 1`:`${v[b]}`}}}function $De(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:a}=r,i=s.shape.length,o=Lt(a,s.shape);if(i===0)return Ka({inputs:{x:s},backend:n});const l=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jDe(s.shape,o):new ADe(s.shape,o);return n.runWebGLProgram(l,[s],s.dtype)}const RDe={kernelName:gb,backendName:"webgl",kernelFunc:$De};class ODe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let a="";typeof n=="number"?a=`float outputValue = ${n.toFixed(2)};`:a=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${a}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}const _De={kernelName:V2,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:a,center:i}=e,o=n,l=new ODe(r.shape,a),[c,f]=_O(i,r.shape[1],r.shape[2]),p=[[c,f,Math.sin(s),Math.cos(s)]];return o.runWebGLProgram(l,[r],r.dtype,p)}};const DDe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,zDe=en({opSnippet:DDe}),PDe={kernelName:um,backendName:"webgl",kernelFunc:zDe};const LDe="return inversesqrt(x);",MDe=en({opSnippet:LDe,cpuKernelImpl:ZEe}),FDe={kernelName:dm,backendName:"webgl",kernelFunc:MDe};class M_{constructor(e,n,r,s,a,i,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const c=Cn(a.length),f=Cn(i.length);let p="";r===1?p="i":r===2&&(p="i, j");const m=`getIndices(${p})`;let y="";s===1?y="i":s===2&&(y="i, coords[1]");const b=`getUpdates(${y})`;let v="";l&&(v="coords[0], coords[1]");const x=`getDefaultValue(${v})`,S=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${a});

        void main() {
          ${f} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${m});
              flattenedIndex += index * ${S};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${b};
              found = true;
            }
          }
          setOutput(mix(${x}, sum, float(found)));
        }
      `}}class BDe{constructor(e,n,r,s,a,i,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const c=Cn(a.length),f=Cn(i.length);let p="";r===1?p="i":r===2&&(p="i, j");const m=`getIndices(${p})`;let y="";s===1?y="i":s===2&&(y="i, coords[1]");const b=`getUpdates(${y})`;let v="";l&&(v="coords[0], coords[1]");const x=`getDefaultValue(${v})`,S=n>1?"strides[j]":"strides",C=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${a});

        void main() {
          ${f} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${m});
              flattenedIndex += index.xz * ${S};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${C};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${b};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${x}, sum, found));
        }
      `}}function UDe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:a}=e,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:f,outputSize:p}=Xu(a,s,i),m=[p/c,c];if(p===0)return n.makeTensorInfo(i,s.dtype);const y=Xe({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),b=Xe({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0]));let x;ye().getBool("WEBGL_PACK")?x=new BDe(l,o,y.shape.length,b.shape.length,f,m):x=new M_(l,o,y.shape.length,b.shape.length,f,m);const S=n.runWebGLProgram(x,[b,y,v],b.dtype),C=Xe({inputs:{x:S},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(v),C}const WDe={kernelName:I2,backendName:"webgl",kernelFunc:UDe};class VDe{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const a="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=ye().getNumber("WEBGL_VERSION")===2?a:i,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}function qDe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:a}=e,{side:i}=r,o=new VDe(s.shape[0],s.shape[1],a.shape[1],i),l=[[s.shape[1]]];return n.runWebGLProgram(o,[s,a],"int32",l)}const GDe={kernelName:j2,backendName:"webgl",kernelFunc:qDe};class HDe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,a;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)a="resRC",s="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let f=0;f<n.length;f++)c.push(`${o[f]}`),f<e&&l.push(`${o[f]}`);s=l.join(),a=c.join()}const i=Cn(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}function KDe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:a}=e,i=new HDe(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(i,[r,s,a],ba(s.dtype,a.dtype))}const XDe={kernelName:yb,backendName:"webgl",kernelFunc:KDe};const YDe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${OC};
  float scale = ${_C};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,QDe=en({opSnippet:YDe}),ZDe={kernelName:fm,backendName:"webgl",kernelFunc:QDe};const JDe=Mm+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,e5e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,t5e=en({opSnippet:JDe,packedOpSnippet:e5e,cpuKernelImpl:eIe}),n5e={kernelName:gm,backendName:"webgl",kernelFunc:t5e};const r5e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,s5e=en({opSnippet:r5e}),a5e={kernelName:mm,backendName:"webgl",kernelFunc:s5e};const i5e=Mm+`
  return sin(x);
`,o5e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Vf}
  return result;
`,l5e=en({opSnippet:i5e,packedOpSnippet:o5e}),c5e={kernelName:hm,backendName:"webgl",kernelFunc:l5e};const u5e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,d5e=en({opSnippet:u5e}),f5e={kernelName:pm,backendName:"webgl",kernelFunc:d5e};const h5e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,p5e=en({opSnippet:h5e}),m5e={kernelName:ym,backendName:"webgl",kernelFunc:p5e};const g5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:a,paddings:i}=r;q(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=a.reduce((S,C)=>S*C),l=[[0,0]];l.push(...i);for(let S=1+a.length;S<s.shape.length;++S)l.push([0,0]);const c=[],f=DK({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),p=Hb(f.shape,a,o,!1),m=Kb(p.length,a.length,!1),y=Xb(f.shape,a,o,!1),b=Xe({inputs:{x:f},backend:n,attrs:{shape:p}}),v=ra({inputs:{x:b},backend:n,attrs:{perm:m}}),x=Xe({inputs:{x:v},backend:n,attrs:{shape:y}});return c.push(f),c.push(b),c.push(v),c.forEach(S=>n.disposeIntermediateTensorInfo(S)),x},y5e={kernelName:vb,backendName:"webgl",kernelFunc:g5e};function b5e(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:a,defaultValue:i}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const o=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(a.dataId),f=n.readSync(i.dataId)[0],[p,m,y,b,v]=nIe(o,r.shape,r.dtype,l,s.dtype,c,f);return[n.makeTensorInfo(m,r.dtype,p),n.makeTensorInfo([m[0]],s.dtype,y),n.makeTensorInfo([b.length],"bool",new Uint8Array(b.map(x=>Number(x)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const x5e={kernelName:$2,backendName:"webgl",kernelFunc:b5e};function v5e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(n.readSync(s.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(a.dataId)),[c,f,p]=rIe(o,r.shape,r.dtype,i,l);return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([p.length],a.dtype,new Int32Array(p))]}const w5e={kernelName:R2,backendName:"webgl",kernelFunc:v5e};function S5e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${a.shape}`);const i=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(a.dataId),[c,f]=iK(i,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(f,r.dtype,c)}const C5e={kernelName:O2,backendName:"webgl",kernelFunc:S5e};function k5e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${a.shape}`);const i=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(a.dataId),[c,f]=iK(i,r.shape,r.dtype,o,l);return n.makeTensorInfo(f,r.dtype,c)}const N5e={kernelName:_2,backendName:"webgl",kernelFunc:k5e};function T5e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:a,defaultValue:i}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:f,strides:p,outputSize:m}=Xu(a,s,o),y=!1;if(a.dtype==="string"){const S=n.bufferSync(s),C=n.bufferSync(a),E=lc(n.readSync(i.dataId)[0]),k=JEe(S,C,o,m,f,c,l,p,E,y);return n.makeTensorInfo(o,k.dtype,k.values)}const b=new M_(c,l,s.shape.length,a.shape.length,p,[m,1],y),v=n.runWebGLProgram(b,[a,s,i],a.dtype),x=Xe({inputs:{x:v},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(v),x}const E5e={kernelName:D2,backendName:"webgl",kernelFunc:T5e};function I5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:a,axis:i}=r,o=Lt(i,s.shape)[0],l=XO(s,a,o),c=s.shape.length,f=new Array(c).fill(0),p=s.shape.slice();return l.map(m=>{const y=[...p];y[o]=m;const b=Fm({inputs:{x:s},backend:n,attrs:{begin:f,size:y}});return f[o]+=m,b})}const A5e={kernelName:wb,backendName:"webgl",kernelFunc:I5e};const TM="return sqrt(x);",j5e=en({opSnippet:TM,packedOpSnippet:TM,cpuKernelImpl:sIe}),$5e={kernelName:bm,backendName:"webgl",kernelFunc:j5e};const R5e="return x * x;",O5e=en({opSnippet:R5e}),_5e={kernelName:z2,backendName:"webgl",kernelFunc:O5e};const EM="return (a - b) * (a - b);",D5e=ws({opSnippet:EM,packedOpSnippet:EM}),z5e={kernelName:xm,backendName:"webgl",kernelFunc:D5e};function P5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const a=n.readSync(s.dataId),i=fc(a),o=aIe(i,"string",r);return n.makeTensorInfo(s.shape,"string",o)}const L5e={kernelName:Cb,backendName:"webgl",kernelFunc:P5e};function M5e({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=eo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,a=new nl(r.shape,s);return n.runWebGLProgram(a,[r],r.dtype)}const F5e={kernelName:km,backendName:"webgl",kernelFunc:M5e};class B5e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,a=Cn(r.length),i=Cn(r.length);let o="";if(s===1)o="coords * strides + begin";else{let l=0;o=r.map((c,f)=>(l++,r.length===1?`coords * strides[${f}] + begin[${f}]`:`coords[${l-1}] * strides[${f}] + begin[${f}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${e});
      ${a} strides = ${a}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}function U5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:a,end:i,strides:o,beginMask:l,endMask:c,ellipsisMask:f,newAxisMask:p,shrinkAxisMask:m}=r,{finalShapeSparse:y,finalShape:b,isIdentity:v,sliceDim0:x,isSimpleSlice:S,begin:C,end:E,strides:k}=jO(s.shape,a,i,o,l,c,f,p,m);let I;if(v)I=Xe({inputs:{x:s},backend:n,attrs:{shape:b}});else if(x||S){q(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const _=EO(C,E,k),z=Fm({inputs:{x:s},backend:n,attrs:{begin:C,size:_}});I=Xe({inputs:{x:z},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(z)}else if(n.shouldExecuteOnCPU([s])){const z=n.readSync(s.dataId),L=$t(s.shape,s.dtype,z),R=iIe(y,L,k,C);I=n.makeTensorInfo(b,s.dtype,R.values)}else{const z=new B5e(C,k,y);I=n.runWebGLProgram(z,[s],s.dtype)}const $=Xe({inputs:{x:I},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(I),$}const W5e={kernelName:P2,backendName:"webgl",kernelFunc:U5e};function V5e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:a,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:f,dataSplits:p}=e,m=n.readSync(f.dataId),y=n.readSync(p.dataId),[b,v]=oIe(m,y,s,a,i,o,l,c);return[n.makeTensorInfo([b.length],"string",b),n.makeTensorInfo(p.shape,"int32",v)]}const q5e={kernelName:L2,backendName:"webgl",kernelFunc:V5e};function G5e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:a,delimiter:i}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=n.readSync(a.dataId),l=n.readSync(i.dataId)[0],[c,f,p]=lIe(o,l,s),m=f.length;return[n.makeTensorInfo([m,2],"int32",c),n.makeTensorInfo([m],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(p))]}const H5e={kernelName:M2,backendName:"webgl",kernelFunc:G5e};function K5e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(a.dataId),o=cIe(i,s);return n.makeTensorInfo(a.shape,"int32",o)}const X5e={kernelName:F2,backendName:"webgl",kernelFunc:K5e};const Y5e="return tan(x);",Q5e=en({opSnippet:Y5e}),Z5e={kernelName:wm,backendName:"webgl",kernelFunc:Q5e};const J5e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,e3e=en({opSnippet:J5e}),t3e={kernelName:Sm,backendName:"webgl",kernelFunc:e3e};function n3e(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:a,updates:i}=e,{sliceRank:o,numUpdates:l,sliceSize:c,strides:f,outputSize:p}=Xu(i,a,s.shape),m=[p/c,c];if(p===0)return n.makeTensorInfo(s.shape,a.dtype);const y=Xe({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),b=Xe({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),v=Xe({inputs:{x:s},backend:n,attrs:{shape:m}}),x=new M_(l,o,y.shape.length,b.shape.length,f,m,!1,!0),S=n.runWebGLProgram(x,[b,y,v],v.dtype),C=Xe({inputs:{x:S},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(S),C}const r3e={kernelName:A2,backendName:"webgl",kernelFunc:n3e};class s3e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[i]*n[i];this.outputShape=r,this.rank=r.length;const s=Cn(this.rank),a=a3e(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}function a3e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}function PK(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:a}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(m=>lc(m)):l,f=$t(s.shape,s.dtype,c),p=dIe(f,a);return n.makeTensorInfo(p.shape,p.dtype,p.values)}const i=new s3e(s.shape,a);return n.runWebGLProgram(i,[s],s.dtype)}const i3e={kernelName:Cm,backendName:"webgl",kernelFunc:PK};class o3e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class l3e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}function Id(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function IM(t){let e=1;for(;e<t;)e*=2;return e}function c3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:a,sorted:i}=r,o=ye().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ye().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,f=c[c.length-1];if(n.shouldExecuteOnCPU([s])||f<o||a>l){const R=n.readSync(s.dataId),[D,U]=fIe(R,c,s.dtype,a,i);return[n.makeTensorInfo(D.shape,D.dtype,D.values),n.makeTensorInfo(U.shape,U.dtype,U.values)]}if(a===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(f===1)return[s,cx({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const p=n.texData.get(s.dataId),m=p!==null&&p.isPacked,y=m?n.unpackTensor(s):s,v=Ee(c)/f,x=Xe({inputs:{x:y},attrs:{shape:[v,f]},backend:n});m&&Id(n,y);const S=IM(a),C=IM(f);let E=null;const k=()=>E===null?[x,x]:[x,E],I=(R,D,U)=>{const X=k(),V=new o3e(U),B=[[f],[E===null?1:0],[Number.NEGATIVE_INFINITY],[R],[D]],Z=E;E=n.runWebGLProgram(V,X,"int32",B),Id(n,Z)};for(let R=1;R<S;R*=2){const D=R*2;for(let U=R;U>=1;U/=2)I(D,U,[v,C])}for(let R=C;R>S;R/=2){const D=k(),U=new l3e([v,R/2]),V=[[f],[E===null?1:0],[S]],Y=E;E=n.runWebGLProgram(U,D,"int32",V),Id(n,Y);const B=S/2,Z=B*2;for(let J=B;J>=1;J/=2)I(Z,J,E.shape)}let $=E;E=Fm({inputs:{x:E},backend:n,attrs:{begin:0,size:[v,a]}}),Id(n,$);let _=AK({inputs:{x,indices:E},backend:n,attrs:{axis:1,batchDims:1}});Id(n,x);const z=c.slice(0,-1);z.push(a),$=E,E=Xe({inputs:{x:E},attrs:{shape:z},backend:n}),Id(n,$);const L=_;return _=Xe({inputs:{x:_},attrs:{shape:z},backend:n}),Id(n,L),[_,E]}const u3e={kernelName:B2,backendName:"webgl",kernelFunc:c3e};class d3e{constructor(e,n,r,s,a,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const o=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${a});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${a});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}function f3e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:a}=e,{interpolation:i,fillMode:o,fillValue:l,outputShape:c}=r,[f,p,m,y]=s.shape,[b,v]=c??[p,m],x=[f,b,v,y],S=new d3e(p,m,i,o,l,x);return n.runWebGLProgram(S,[s,a],"float32")}const h3e={kernelName:U2,backendName:"webgl",kernelFunc:f3e};function p3e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:a}=e;ix(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(a.dataId),{outputValues:o,outputShape:l,indices:c}=hIe(i,s,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const m3e={kernelName:W2,backendName:"webgl",kernelFunc:p3e};function g3e(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:a}=r;a<0&&(a+=s.shape.length);const i=s,o=i.shape.length,l=s.shape[a],c=new Array(o-1);let f=0;for(let v=0;v<o;v++)v!==a&&(c[f++]=i.shape[v]);const p=[],m=new Array(o).fill(0),y=i.shape.slice();y[a]=1;const b=new Array(l);for(let v=0;v<b.length;v++){m[a]=v;const x=Fm({inputs:{x:i},backend:n,attrs:{begin:m,size:y}}),S=Xe({inputs:{x},backend:n,attrs:{shape:c}});b[v]=S,p.push(x)}return p.forEach(v=>n.disposeIntermediateTensorInfo(v)),b}const y3e={kernelName:kb,backendName:"webgl",kernelFunc:g3e};class b3e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/r);this.outputShape=[s,o];const l="0.0",c="sumValue",f=Math.floor(r/4)*4,p=r%4,m=`
        sumValue += dot(values, segFilter);
    `;let y="";a%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let b="";a%r>0&&(b=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${y}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${b}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${m}
        }

        int inIdx = inOffset + ${f};
        if (${p===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${m}
        } else if (${p===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${m}
        } else if (${p===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${m}
        }
        setOutput(${c});
      }
    `}}function x3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:a}=e,{numSegments:i}=r,o=s.shape.length,l=[];let c=0;const f=nr([c],o);let p=s;f!=null&&(p=ra({inputs:{x:s},backend:n,attrs:{perm:f}}),l.push(p),c=yr(1,o)[0]);const m=p7(p.shape,c,i),y=Ee([p.shape[c]]),b=Xe({inputs:{x:p},backend:n,attrs:{shape:[-1,y]}});l.push(b);const v=G2(s.dtype),x=(k,I,$,_,z)=>{const L=k.shape[0],R=k.shape[1],D=h7(R,z),U={windowSize:D,inSize:R,batchSize:L,numSegments:z},X=new b3e(U,I),V=n.compileAndRun(X,[k,$],_);if(l.push(V),V.shape[1]===z)return V;const Y=zK({backend:n,attrs:{start:0,stop:z,step:1,dtype:"float32"}}),B=PK({inputs:{x:Y},backend:n,attrs:{reps:[R/D]}});return l.push(Y),l.push(B),x(V,I,B,_,z)},S=x(b,"unsortedSegmentSum",a,v,i),C=Xe({inputs:{x:S},backend:n,attrs:{shape:m}});let E=C;if(f!=null){l.push(C);const k=qu(f);E=ra({inputs:{x:E},backend:n,attrs:{perm:k}})}return l.forEach(k=>n.disposeIntermediateTensorInfo(k)),E}const v3e={kernelName:Nb,backendName:"webgl",kernelFunc:x3e};const w3e=[sAe,iAe,cAe,fAe,pAe,yAe,xAe,wAe,NAe,EAe,jAe,OAe,zAe,FAe,WAe,qAe,HAe,QAe,JAe,tje,aje,fje,pje,bje,vje,Tje,Ije,Rje,BIe,Dje,Fje,Vje,Yje,Jje,t$e,r$e,a$e,c$e,f$e,m$e,y$e,x$e,w$e,k$e,T$e,j$e,R$e,D$e,L$e,F$e,V$e,K$e,Z$e,tRe,sRe,aRe,oRe,cRe,dRe,hRe,mRe,xRe,SRe,NRe,ERe,jRe,ORe,PRe,BRe,FIe,WRe,Lje,GRe,XRe,ZRe,WIe,nOe,iOe,lOe,fOe,mOe,xOe,SOe,TOe,jOe,OOe,DOe,MOe,BOe,WOe,HOe,XOe,QOe,JOe,t_e,a_e,c_e,h_e,w_e,GIe,N_e,I_e,$_e,__e,Sje,P_e,M_e,B_e,V_e,K_e,qIe,Y_e,Z_e,eDe,nDe,rDe,Cje,y_e,iDe,uDe,pDe,KIe,bDe,wDe,NDe,IDe,RDe,_De,PDe,FDe,WDe,GDe,XDe,ZDe,n5e,a5e,c5e,f5e,uje,x_e,m5e,y5e,x5e,w5e,C5e,N5e,E5e,A5e,$5e,_5e,z5e,L5e,F5e,W5e,q5e,H5e,X5e,b_e,tAe,Z5e,t3e,r3e,i3e,u3e,h3e,nAe,m3e,y3e,v3e,L_e];for(const t of w3e)q2(t);var Sy={exports:{}};const S3e=T$(r1e),C3e=T$(Ege);var k3e=Sy.exports,AM;function N3e(){return AM||(AM=1,(function(t,e){(function(n,r){r(e,S3e,C3e)})(k3e,(function(n,r,s){const a={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class i{constructor(l,c){this.modelPath=c||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(l)}/model.json`}getPrefix(l){return l==="lite_mobilenet_v2"?`ssd${l}`:`ssd_${l}`}async load(){this.model=await r.loadGraphModel(this.modelPath);const l=s.zeros([1,300,300,3],"int32"),c=await this.model.executeAsync(l);await Promise.all(c.map((f=>f.data()))),c.map((f=>f.dispose())),l.dispose()}async infer(l,c,f){const p=s.tidy((()=>(l instanceof s.Tensor||(l=s.browser.fromPixels(l)),s.expandDims(l)))),m=p.shape[1],y=p.shape[2],b=await this.model.executeAsync(p),v=b[0].dataSync(),x=b[1].dataSync();p.dispose(),s.dispose(b);const[S,C]=this.calculateMaxScores(v,b[0].shape[1],b[0].shape[2]),E=s.getBackend();s.getBackend()==="webgl"&&s.setBackend("cpu");const k=s.tidy((()=>{const $=s.tensor2d(x,[b[1].shape[1],b[1].shape[3]]);return s.image.nonMaxSuppression($,S,c,f,f)})),I=k.dataSync();return k.dispose(),E!==s.getBackend()&&s.setBackend(E),this.buildDetectedObjects(y,m,x,S,I,C)}buildDetectedObjects(l,c,f,p,m,y){const b=m.length,v=[];for(let x=0;x<b;x++){const S=[];for(let $=0;$<4;$++)S[$]=f[4*m[x]+$];const C=S[0]*c,E=S[1]*l,k=S[2]*c,I=S[3]*l;S[0]=E,S[1]=C,S[2]=I-E,S[3]=k-C,v.push({bbox:S,class:a[y[m[x]]+1].displayName,score:p[m[x]]})}return v}calculateMaxScores(l,c,f){const p=[],m=[];for(let y=0;y<c;y++){let b=Number.MIN_VALUE,v=-1;for(let x=0;x<f;x++)l[y*f+x]>b&&(b=l[y*f+x],v=x);p[y]=b,m[y]=v}return[p,m]}async detect(l,c=20,f=.5){return this.infer(l,c,f)}dispose(){this.model!=null&&this.model.dispose()}}n.ObjectDetection=i,n.load=async function(o={}){if(s==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");const l=o.base||"lite_mobilenet_v2",c=o.modelUrl;if(["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(l)===-1)throw new Error(`ObjectDetection constructed with invalid base model ${l}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);const f=new i(l,c);return await f.load(),f},n.version="2.2.3",Object.defineProperty(n,"__esModule",{value:!0})}))})(Sy,Sy.exports)),Sy.exports}var T3e=N3e();const UE="https://mentor-hub-backend-tkil.onrender.com/api",i1={Python:{monacoLang:"python",ext:".py",defaultCode:`# Write your Python code here

def solution():
    pass

# Call your solution
solution()`},JavaScript:{monacoLang:"javascript",ext:".js",defaultCode:`// Write your JavaScript code here

function solution() {
    
}

// Call your solution
solution();`},Java:{monacoLang:"java",ext:".java",defaultCode:`// Write your Java code here

public class Solution {
    public static void main(String[] args) {
        // Your code here
    }
}`},C:{monacoLang:"c",ext:".c",defaultCode:`// Write your C code here
#include <stdio.h>

int main() {
    // Your code here
    return 0;
}`},"C++":{monacoLang:"cpp",ext:".cpp",defaultCode:`// Write your C++ code here
#include <iostream>
using namespace std;

int main() {
    // Your code here
    return 0;
}`},SQL:{monacoLang:"sql",ext:".sql",defaultCode:`-- Write your SQL query here
SELECT * FROM table_name;`}};function E3e({problem:t,user:e,onClose:n,onSubmitSuccess:r}){const[s,a]=T.useState(t.language),[i,o]=T.useState(i1[t.language]?.defaultCode||""),[l,c]=T.useState(!1),[f,p]=T.useState(!1),[m,y]=T.useState(""),[b,v]=T.useState(""),[x,S]=T.useState(!1),[C,E]=T.useState(!1),k=T.useRef(null),[I,$]=T.useState(0),[_,z]=T.useState(0),[L,R]=T.useState(!1),[D,U]=T.useState(""),[X,V]=T.useState(!1),[Y]=T.useState(Date.now()),[B,Z]=T.useState(!1),[J,ae]=T.useState(!1),[ee,W]=T.useState(null),[Q,se]=T.useState(!1),[fe,Ne]=T.useState(0),[_e,De]=T.useState(!1),[He,he]=T.useState(0),[Te,Me]=T.useState(!1),ge=T.useRef(null),ct=T.useRef(null),Ye=T.useRef(null),ft=T.useRef(!1),Ke=T.useRef(!1),Ct=T.useRef(null),kt=T.useRef(null),Wt=t.proctoring||{},Kt=Wt.maxTabSwitches||3;T.useEffect(()=>{setTimeout(()=>{k.current&&!document.fullscreenElement&&k.current.requestFullscreen().then(()=>{E(!0)}).catch(Oe=>{console.log("Fullscreen request failed:",Oe.message)})},100);const Pe=()=>{E(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",Pe),()=>{document.removeEventListener("fullscreenchange",Pe),document.fullscreenElement&&document.exitFullscreen().catch(()=>{})}},[]),T.useEffect(()=>(Wt.enabled&&Wt.videoAudio&&jn(),()=>{lr(),ee&&ee.getTracks().forEach(we=>we.stop())}),[]);const jn=async()=>{try{const we=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"},audio:!0});W(we),Z(!0),ae(!0),ge.current&&(ge.current.srcObject=we),Zt(),fn()}catch(we){console.error("Failed to access camera/microphone:",we),U(" Camera/Microphone access required for proctoring"),R(!0)}},Nt=()=>{lr(),qs(),ee&&(ee.getTracks().forEach(we=>{we.stop(),console.log(` Stopped ${we.kind} track`)}),W(null)),ge.current&&(ge.current.srcObject=null),Z(!1),ae(!1)},sr=()=>{Nt(),n()},Zt=()=>{const we=document.createElement("canvas");we.width=64,we.height=48,ct.current=we,Ye.current=setInterval(()=>{ar()},3e3)},lr=()=>{Ye.current&&(clearInterval(Ye.current),Ye.current=null)},ar=()=>{if(!ge.current||!ct.current)return;const we=ge.current,Pe=ct.current,Oe=Pe.getContext("2d");Oe.drawImage(we,0,0,Pe.width,Pe.height);const Rt=Oe.getImageData(0,0,Pe.width,Pe.height).data;let nn=0,rn=0,Vr={r:0,g:0,b:0};const oa=Rt.length/4;for(let wr=0;wr<Rt.length;wr+=4){const Ts=Rt[wr],zo=Rt[wr+1],la=Rt[wr+2],Dc=(Ts+zo+la)/3;nn+=Dc,Vr.r+=Ts,Vr.g+=zo,Vr.b+=la,Dc<30&&rn++}const Gs=nn/oa,qe=rn/oa,Ns={r:Vr.r/oa,g:Vr.g/oa,b:Vr.b/oa};let Il=0;for(let wr=0;wr<Rt.length;wr+=4){const Ts=Rt[wr],zo=Rt[wr+1],la=Rt[wr+2];Il+=Math.abs(Ts-Ns.r)+Math.abs(zo-Ns.g)+Math.abs(la-Ns.b)}Il=Il/oa/3;const qr=qe>.9||Gs<15||Il<8;console.log(`Camera check - Brightness: ${Gs.toFixed(1)}, Variance: ${Il.toFixed(1)}, Dark%: ${(qe*100).toFixed(1)}%, Blocked: ${qr}`),qr&&!ft.current?(ft.current=!0,se(!0),Ne(wr=>{const Ts=wr+1;return U(` Camera obstruction detected! (${Ts} times) Please uncover your camera.`),R(!0),Ts})):!qr&&ft.current&&(ft.current=!1,se(!1),R(!1))},fn=async()=>{try{console.log(" Loading object detection model..."),await uV();const we=await T3e.load({base:"lite_mobilenet_v2"});Ct.current=we,Me(!0),console.log(" Object detection model loaded"),cr()}catch(we){console.error("Failed to load object detection model:",we)}},cr=()=>{kt.current=setInterval(()=>{ia()},2e3)},qs=()=>{kt.current&&(clearInterval(kt.current),kt.current=null)},ia=async()=>{if(!ge.current||!Ct.current){console.log(" Phone detection skipped - video or model not ready");return}if(ge.current.readyState<2){console.log(" Video not ready yet, readyState:",ge.current.readyState);return}try{const we=await Ct.current.detect(ge.current);console.log(" Detection ran, found:",we.length,"objects:",we.map(et=>`${et.class}(${(et.score*100).toFixed(0)}%)`).join(", "));const Pe=we.filter(et=>["cell phone","laptop","book","remote"].includes(et.class)&&et.score>.4),Oe=Pe.some(et=>et.class==="cell phone"&&et.score>.4);Pe.length>0&&console.log(" Suspicious objects detected:",Pe.map(et=>`${et.class} (${(et.score*100).toFixed(0)}%)`)),Oe&&!Ke.current?(Ke.current=!0,De(!0),he(et=>{const Rt=et+1;return U(` Mobile phone detected! (${Rt} times) Remove all electronic devices from view.`),R(!0),Rt})):!Oe&&Ke.current&&(Ke.current=!1,De(!1),setTimeout(()=>{!Ke.current&&!ft.current&&R(!1)},3e3))}catch(we){console.error("Phone detection error:",we)}};T.useEffect(()=>{if(!Wt.enabled||!Wt.trackTabSwitches)return;const we=()=>{document.hidden&&!X?$(Pe=>{const Oe=Pe+1;return Oe>=Kt?(U(` Maximum tab switches reached (${Oe}/${Kt}). This will be reported.`),R(!0),V(!0)):(U(` Tab switch detected! (${Oe}/${Kt}) ${Kt-Oe} more will be flagged!`),R(!0),setTimeout(()=>R(!1),4e3)),Oe}):document.hidden||k.current&&!document.fullscreenElement&&setTimeout(()=>{k.current?.requestFullscreen().catch(()=>{})},100)};return document.addEventListener("visibilitychange",we),()=>document.removeEventListener("visibilitychange",we)},[Wt,X,Kt]),T.useEffect(()=>{if(!Wt.enabled||!Wt.disableCopyPaste)return;const we=Oe=>{(Oe.type==="paste"||Oe.ctrlKey&&(Oe.key==="v"||Oe.key==="c"))&&(Oe.preventDefault(),z(et=>et+1),U(" Copy/Paste is disabled for this problem!"),R(!0),setTimeout(()=>R(!1),3e3))},Pe=Oe=>{Oe.preventDefault()};return document.addEventListener("paste",we),document.addEventListener("keydown",we),document.addEventListener("contextmenu",Pe),()=>{document.removeEventListener("paste",we),document.removeEventListener("keydown",we),document.removeEventListener("contextmenu",Pe)}},[Wt]);const de=async()=>{p(!0),y("");try{const we=await Ve.post(`${UE}/run`,{code:i,language:t.language,problemId:t.id,sqlSchema:t.sqlSchema});y(we.data.output||we.data.error||"No output")}catch(we){y("Error running code: "+(we.response?.data?.error||we.message))}finally{p(!1)}},Fe=async()=>{S(!0);try{const we=await Ve.post(`${UE}/hints`,{problemDescription:t.description,currentCode:i,language:s});v(we.data.hint)}catch{v("Unable to generate hint at this time.")}finally{S(!1)}},Ze=async()=>{if(!i.trim()){alert("Please write some code before submitting");return}c(!0);const we=Math.round((Date.now()-Y)/1e3);try{const Pe=await Ve.post(`${UE}/submissions/proctored`,{studentId:e.id,problemId:t.id,code:i,language:s,submissionType:"editor",tabSwitches:I,copyPasteAttempts:_,cameraBlockedCount:fe,phoneDetectionCount:He,timeSpent:we,proctored:Wt.enabled});Nt(),r&&r(Pe.data),n()}catch(Pe){alert("Submission failed: "+(Pe.response?.data?.error||Pe.message))}finally{c(!1)}};return u.jsxs("div",{ref:k,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#0f172a",zIndex:1e4,display:"flex",flexDirection:"column"},children:[L&&u.jsxs("div",{style:{position:"fixed",top:"1rem",left:"50%",transform:"translateX(-50%)",background:X?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #f59e0b, #d97706)",color:"white",padding:"1rem 2rem",borderRadius:"0.75rem",zIndex:10001,boxShadow:"0 10px 40px rgba(239, 68, 68, 0.5)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx(un,{size:24}),u.jsx("span",{style:{fontWeight:600},children:D})]}),u.jsxs("div",{style:{borderBottom:"1px solid #334155",background:"#1e293b",padding:"1rem 2rem",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:u.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[u.jsxs("h2",{style:{color:"#f8fafc",fontSize:"1.25rem",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"1rem"},children:[t.title,u.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem",borderRadius:"2rem",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#ef4444",animation:"pulse 2s infinite"}})," PROCTORED MODE"]})]}),u.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[u.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa"},children:t.type||"Coding"}),u.jsx("span",{className:`difficulty-badge ${t.difficulty?.toLowerCase()}`,children:t.difficulty?.toUpperCase()}),I>0&&u.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",I," violations"]}),_>0&&u.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",_," copy attempts"]}),fe>0&&u.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",fe," cam blocks"]}),He>0&&u.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",He," phone detected"]})]})]})}),Wt.videoAudio&&u.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginRight:"1rem"},children:[u.jsx("div",{style:{padding:"0.4rem",borderRadius:"6px",background:Q?"rgba(239, 68, 68, 0.2)":B?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",border:`1px solid ${Q?"#ef4444":B?"#10b981":"#ef4444"}`},children:Q?u.jsx(A1,{size:16,color:"#ef4444"}):B?u.jsx(iW,{size:16,color:"#10b981"}):u.jsx(A1,{size:16,color:"#ef4444"})}),u.jsx("div",{style:{padding:"0.4rem",borderRadius:"6px",background:J?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",border:`1px solid ${J?"#10b981":"#ef4444"}`},children:J?u.jsx(xse,{size:16,color:"#10b981"}):u.jsx(yse,{size:16,color:"#ef4444"})})]}),u.jsx("button",{onClick:sr,style:{background:"#334155",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer"},children:"Exit Session"})]}),u.jsxs("div",{style:{padding:0,display:"flex",flexDirection:"row",flex:1,minHeight:0,overflow:"hidden",background:"#0f172a"},children:[u.jsxs("div",{style:{width:"400px",borderRight:"1px solid #334155",padding:"2rem",overflowY:"auto",background:"#0f172a",display:"flex",flexDirection:"column"},children:[u.jsx("h3",{style:{marginTop:0,marginBottom:"1.5rem",color:"#f8fafc"},children:"Problem Description"}),u.jsxs("div",{style:{color:"#cbd5e1",fontSize:"0.95rem",lineHeight:"1.7"},children:[t.description,t.type==="SQL"||t.language==="SQL"?u.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[t.sqlSchema&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{color:"#06b6d4"},children:""}),u.jsx("strong",{style:{color:"#e2e8f0"},children:"Database Schema:"})]}),u.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"1rem",borderRadius:"6px",marginBottom:"1rem",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.sqlSchema})]}),t.expectedQueryResult&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{color:"#10b981"},children:""}),u.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Query Result:"})]}),u.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"1rem",borderRadius:"6px",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.expectedQueryResult})]}),!t.sqlSchema&&!t.expectedQueryResult&&u.jsx("p",{style:{color:"#94a3b8",fontStyle:"italic",margin:0},children:"Write a SQL query to solve this problem. Your query will be executed against the database."})]}):u.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[u.jsx("div",{style:{marginBottom:"0.5rem"},children:u.jsx("strong",{style:{color:"#e2e8f0"},children:"Sample Input:"})}),u.jsx("code",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block",marginBottom:"1rem"},children:t.sampleInput||"N/A"}),u.jsx("div",{style:{marginBottom:"0.5rem"},children:u.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Output:"})}),u.jsx("code",{style:{color:"#4ade80",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block"},children:t.expectedOutput||"N/A"})]})]}),u.jsxs("div",{style:{marginTop:"2rem",background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"0.75rem",padding:"1.25rem"},children:[u.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#fbbf24",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(jy,{size:16})," Need Help?"]}),u.jsx("p",{style:{color:"#94a3b8",fontSize:"0.8rem",margin:"0 0 1rem",lineHeight:1.6},children:"Stuck on this problem? Get AI-powered hints to guide you without revealing the full solution."}),u.jsxs("button",{onClick:Fe,disabled:x,style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",border:"none",color:"#1e293b",padding:"0.6rem 1.2rem",borderRadius:"6px",cursor:x?"not-allowed":"pointer",fontWeight:600,fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center"},children:[u.jsx(jy,{size:16})," ",x?"Getting Hints...":"Get AI Hints"]}),b&&u.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"rgba(34, 197, 94, 0.1)",borderRadius:"8px",border:"1px solid rgba(34, 197, 94, 0.2)",fontSize:"0.85rem",color:"#4ade80"},children:[" ",b]})]}),u.jsxs("div",{style:{marginTop:"2rem",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"0.75rem",padding:"1.25rem"},children:[u.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#ef4444",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(un,{size:16})," Proctoring Rules"]}),u.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"#94a3b8",fontSize:"0.8rem",lineHeight:1.8},children:[u.jsx("li",{children:"Do not switch tabs or windows"}),u.jsx("li",{children:"Do not exit fullscreen mode"}),u.jsx("li",{children:"All violations are recorded"}),u.jsx("li",{children:"3+ violations may result in disqualification"})]})]}),Wt.videoAudio&&u.jsxs("div",{style:{marginTop:"2rem",padding:"0.75rem",background:"rgba(0,0,0,0.3)",borderRadius:"0.75rem",border:"1px solid #334155",position:"relative"},children:[u.jsx("video",{ref:ge,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"8px",background:"#000",border:Q?"3px solid #ef4444":"2px solid #10b981",opacity:Q?.5:1}}),Q&&u.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(239, 68, 68, 0.9)",padding:"0.5rem 1rem",borderRadius:"8px",color:"white",fontWeight:600,fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(A1,{size:14})," CAMERA BLOCKED"]}),u.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.7rem",color:Q?"#ef4444":"#10b981",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[!Q&&u.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981",animation:"pulse 1s infinite"}}),Q?" Uncover your camera!":Te?" AI Monitoring Active":" Loading AI..."]})]})]}),u.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"#1e293b"},children:[u.jsxs("div",{style:{padding:"0.75rem 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #334155",background:"#1e293b"},children:[u.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[u.jsx("label",{style:{color:"#94a3b8",fontSize:"0.85rem"},children:"Language:"}),u.jsx("select",{value:s,onChange:we=>{const Pe=we.target.value;a(Pe),o(i1[Pe]?.defaultCode||"")},disabled:t.type==="SQL"||t.language==="SQL",style:{background:"#0f172a",color:"#f8fafc",border:"1px solid #334155",borderRadius:"6px",padding:"0.4rem 0.75rem",fontSize:"0.85rem",cursor:t.type==="SQL"||t.language==="SQL"?"not-allowed":"pointer",opacity:t.type==="SQL"||t.language==="SQL"?.7:1},children:Object.keys(i1).map(we=>u.jsx("option",{value:we,children:we},we))})]}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[u.jsxs("button",{onClick:de,disabled:f||l,style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[u.jsx(Ip,{size:16})," ",f?"Running...":"Run Code"]}),u.jsxs("button",{onClick:Ze,disabled:f||l,style:{background:"linear-gradient(135deg, #10b981, #059669)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:l?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[u.jsx(kl,{size:16})," ",l?"Submitting...":"Submit"]})]})]}),u.jsx("div",{style:{flex:1,position:"relative",minHeight:0},children:u.jsx(Oy,{height:"100%",language:i1[s]?.monacoLang||"python",theme:"vs-dark",value:i,onChange:we=>o(we||""),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,automaticLayout:!0,padding:{top:20}}})}),m&&u.jsxs("div",{style:{height:"200px",background:"#020617",borderTop:"1px solid #334155",display:"flex",flexDirection:"column"},children:[u.jsx("div",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid #1e293b",color:"#94a3b8",fontSize:"0.85rem",fontWeight:600},children:"Console Output"}),u.jsx("div",{style:{padding:"1rem",fontFamily:"monospace",color:m.includes("Error")?"#ef4444":"#e2e8f0",fontSize:"0.9rem",whiteSpace:"pre-wrap",flex:1,overflowY:"auto"},children:m})]})]})]}),u.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.5; transform: scale(1.2); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}const I3e="https://mentor-hub-backend-tkil.onrender.com/api";function A3e({problemId:t,code:e,language:n,onRunComplete:r,showRunButton:s=!0}){const[a,i]=T.useState(!1),[o,l]=T.useState(null),[c,f]=T.useState("all"),p=async()=>{if(!(!e?.trim()||!t)){i(!0),l(null);try{const x=await Ve.post(`${I3e}/run-with-tests`,{problemId:t,code:e,language:n});l(x.data),r&&r(x.data)}catch(x){l({success:!1,error:x.response?.data?.error||"Execution failed"})}finally{i(!1)}}},m=()=>{if(!o?.testResults)return[];switch(c){case"passed":return o.testResults.filter(x=>x.passed);case"failed":return o.testResults.filter(x=>!x.passed);default:return o.testResults}},y=o?.testResults?.filter(x=>x.passed).length||0,b=o?.testResults?.length||0;o?.testResults?.filter(x=>!x.isHidden);const v=o?.testResults?.filter(x=>x.isHidden)||[];return u.jsxs("div",{children:[s&&u.jsx("button",{onClick:p,disabled:a||!e?.trim(),style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center",padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:a||!e?.trim()?"not-allowed":"pointer",opacity:a||!e?.trim()?.6:1},children:a?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"spinner-small"}),"Running Tests..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Ip,{size:16}),"Run with Test Cases"]})}),!o&&!a&&u.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"rgba(59, 130, 246, 0.05)",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[u.jsx(yP,{size:40,style:{marginBottom:"0.75rem",color:"#3b82f6",opacity:.7}}),u.jsx("div",{style:{color:"var(--text-main)",fontWeight:500,marginBottom:"0.5rem"},children:"Ready to Test"}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:'Click "Run with Test Cases" to execute your code against all test cases'})]}),o&&!o.success&&o.error&&u.jsxs("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.2)",marginBottom:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[u.jsx(un,{size:18,color:"#ef4444"}),u.jsx("span",{style:{fontWeight:600,color:"#ef4444"},children:"Execution Error"})]}),u.jsx("pre",{style:{margin:0,fontSize:"0.8rem",color:"#f87171",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},children:o.error})]}),o&&o.testResults&&u.jsxs("div",{style:{background:"var(--bg-dark)",borderRadius:"12px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[u.jsxs("div",{style:{padding:"1rem",background:y===b?"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.1))":"linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(234, 88, 12, 0.1))",borderBottom:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[y===b?u.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #10b981, #059669)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(es,{size:24,color:"white"})}):u.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #f97316, #ea580c)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(eW,{size:24,color:"white"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:y===b?"#10b981":"#f97316"},children:y===b?"All Tests Passed!":`${y}/${b} Tests Passed`}),u.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:["Score: ",o.score||0," / ",o.totalPoints||0," points"]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[u.jsxs("div",{style:{textAlign:"center"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#10b981",fontWeight:600},children:[u.jsx(an,{size:16})," ",y]}),u.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Passed"})]}),u.jsxs("div",{style:{textAlign:"center"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#ef4444",fontWeight:600},children:[u.jsx(Kr,{size:16})," ",b-y]}),u.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Failed"})]}),u.jsxs("div",{style:{textAlign:"center"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#8b5cf6",fontWeight:600},children:[u.jsx(Z1,{size:16})," ",v.length]}),u.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"Hidden"})]})]})]}),u.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border-color)"},children:["all","passed","failed"].map(x=>u.jsx("button",{onClick:()=>f(x),style:{flex:1,padding:"0.75rem",background:c===x?"var(--bg-card)":"transparent",border:"none",borderBottom:c===x?"2px solid var(--primary)":"2px solid transparent",color:c===x?"var(--primary)":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,textTransform:"capitalize"},children:x==="all"?`All (${b})`:x==="passed"?`Passed (${y})`:`Failed (${b-y})`},x))}),u.jsxs("div",{style:{maxHeight:"400px",overflowY:"auto"},children:[m().map((x,S)=>u.jsx(j3e,{result:x,index:S+1},x.testCaseId||S)),m().length===0&&u.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"No test cases in this category"})]})]}),o&&(!o.testResults||o.testResults.length===0)&&!o.error&&u.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"var(--bg-dark)",borderRadius:"12px",color:"var(--text-muted)"},children:[u.jsx(yP,{size:40,style:{marginBottom:"0.5rem",opacity:.5}}),u.jsx("div",{children:"No test cases found for this problem"}),u.jsx("div",{style:{fontSize:"0.8rem",marginTop:"0.25rem"},children:"Ask your mentor to add test cases"})]})]})}function j3e({result:t,index:e}){const[n,r]=T.useState(!t.passed);return u.jsxs("div",{style:{borderBottom:"1px solid var(--border-color)",background:t.passed?"transparent":"rgba(239, 68, 68, 0.03)"},children:[u.jsxs("div",{onClick:()=>!t.isHidden&&r(!n),style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:t.isHidden?"default":"pointer",transition:"background 0.2s"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[t.passed?u.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(an,{size:14,color:"#10b981"})}):u.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Kr,{size:14,color:"#ef4444"})}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsxs("span",{style:{fontWeight:500,fontSize:"0.9rem"},children:["Test Case ",e]}),t.isHidden&&u.jsxs("span",{style:{padding:"0.15rem 0.5rem",background:"rgba(139, 92, 246, 0.2)",color:"#a78bfa",borderRadius:"4px",fontSize:"0.65rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.25rem"},children:[u.jsx(Z1,{size:10})," Hidden"]})]}),t.description&&u.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.15rem"},children:t.description})]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.executionTime&&u.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[u.jsx(vi,{size:12})," ",t.executionTime,"ms"]}),u.jsxs("span",{style:{padding:"0.25rem 0.5rem",background:t.passed?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:t.passed?"#10b981":"#ef4444",borderRadius:"4px",fontSize:"0.75rem",fontWeight:600},children:[t.points||0," pts"]})]})]}),!t.isHidden&&n&&u.jsxs("div",{style:{padding:"0 1rem 1rem 3.5rem",display:"grid",gap:"0.75rem"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Input"}),u.jsx("pre",{style:{margin:0,padding:"0.5rem 0.75rem",background:"var(--bg-card)",borderRadius:"6px",fontSize:"0.8rem",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:t.input||"(no input)"})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Expected Output"}),u.jsx("pre",{style:{margin:0,padding:"0.5rem 0.75rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"6px",fontSize:"0.8rem",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",border:"1px solid rgba(16, 185, 129, 0.2)"},children:t.expectedOutput||"(empty)"})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Your Output"}),u.jsx("pre",{style:{margin:0,padding:"0.5rem 0.75rem",background:t.passed?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"6px",fontSize:"0.8rem",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",border:`1px solid ${t.passed?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:t.actualOutput||"(no output)"})]})]}),t.isHidden&&u.jsx("div",{style:{padding:"0 1rem 0.75rem 3.5rem",fontSize:"0.75rem",color:"var(--text-muted)",fontStyle:"italic"},children:t.passed?" Your code passed this hidden test case":" Your code failed this hidden test case. Details are hidden."})]})}var WE={exports:{}},jM;function $3e(){return jM||(jM=1,(function(t,e){var n=void 0,r=function(s){return n||(n=new Promise(function(a,i){var o=typeof s<"u"?s:{},l=o.onAbort;o.onAbort=function(j){i(new Error(j)),l&&l(j)},o.postRun=o.postRun||[],o.postRun.push(function(){a(o)}),t=void 0;var c;c||=typeof o<"u"?o:{};var f=typeof window=="object",p=typeof WorkerGlobalScope<"u",m=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";c.onRuntimeInitialized=function(){function j(be,Ue){switch(typeof Ue){case"boolean":dN(be,Ue?1:0);break;case"number":lN(be,Ue);break;case"string":cN(be,Ue,-1,-1);break;case"object":if(Ue===null)zx(be);else if(Ue.length!=null){var ot=id(Ue,ad);uN(be,ot,Ue.length,-1),ao(ot)}else th(be,"Wrong API use : tried to return a value of an unknown type ("+Ue+").",-1);break;default:zx(be)}}function O(be,Ue){for(var ot=[],vt=0;vt<be;vt+=1){var It=ge(Ue+4*vt,"i32"),on=sN(It);if(on===1||on===2)It=oN(It);else if(on===3)It=Dx(It);else if(on===4){on=It,It=aN(on),on=iN(on);for(var ls=new Uint8Array(It),Aa=0;Aa<It;Aa+=1)ls[Aa]=R[on+Aa];It=ls}else It=null;ot.push(It)}return ot}function F(be,Ue){this.Qa=be,this.db=Ue,this.Oa=1,this.lb=[]}function K(be,Ue){if(this.db=Ue,Ue=ar(be)+1,this.eb=Uo(Ue),this.eb===null)throw Error("Unable to allocate memory for the SQL string");fn(be,D,this.eb,Ue),this.kb=this.eb,this.Za=this.pb=null}function ie(be){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),be!=null){var Ue=this.filename,ot="/",vt=Ue;if(ot&&(ot=typeof ot=="string"?ot:wr(ot),vt=Ue?Wt(ot+"/"+Ue):ot),Ue=Pe(!0,!0),vt=rg(vt,Ue),be){if(typeof be=="string"){ot=Array(be.length);for(var It=0,on=be.length;It<on;++It)ot[It]=be.charCodeAt(It);be=ot}Ii(vt,Ue|146),ot=Lc(vt,577),rd(ot,be,0,be.length,0),Xf(ot),Ii(vt,Ue)}}this.handleError(yt(this.filename,xe)),this.db=ge(xe,"i32"),nh(this.db),this.fb={},this.Sa={}}var xe=Ia(4),$e=c.cwrap,yt=$e("sqlite3_open","number",["string","number"]),xt=$e("sqlite3_close_v2","number",["number"]),Tt=$e("sqlite3_exec","number",["number","string","number","number","number"]),$n=$e("sqlite3_changes","number",["number"]),jr=$e("sqlite3_prepare_v2","number",["number","string","number","number","number"]),jx=$e("sqlite3_sql","string",["number"]),fg=$e("sqlite3_normalized_sql","string",["number"]),eh=$e("sqlite3_prepare_v2","number",["number","number","number","number","number"]),ld=$e("sqlite3_bind_text","number",["number","number","number","number","number"]),cd=$e("sqlite3_bind_blob","number",["number","number","number","number","number"]),$x=$e("sqlite3_bind_double","number",["number","number","number"]),Hk=$e("sqlite3_bind_int","number",["number","number","number"]),Kk=$e("sqlite3_bind_parameter_index","number",["number","string"]),Xk=$e("sqlite3_step","number",["number"]),hg=$e("sqlite3_errmsg","string",["number"]),Yk=$e("sqlite3_column_count","number",["number"]),Qk=$e("sqlite3_data_count","number",["number"]),Zk=$e("sqlite3_column_double","number",["number","number"]),Rx=$e("sqlite3_column_text","string",["number","number"]),Jk=$e("sqlite3_column_blob","number",["number","number"]),Ox=$e("sqlite3_column_bytes","number",["number","number"]),eN=$e("sqlite3_column_type","number",["number","number"]),tN=$e("sqlite3_column_name","string",["number","number"]),nN=$e("sqlite3_reset","number",["number"]),rN=$e("sqlite3_clear_bindings","number",["number"]),pg=$e("sqlite3_finalize","number",["number"]),_x=$e("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),sN=$e("sqlite3_value_type","number",["number"]),aN=$e("sqlite3_value_bytes","number",["number"]),Dx=$e("sqlite3_value_text","string",["number"]),iN=$e("sqlite3_value_blob","number",["number"]),oN=$e("sqlite3_value_double","number",["number"]),lN=$e("sqlite3_result_double","",["number","number"]),zx=$e("sqlite3_result_null","",["number"]),cN=$e("sqlite3_result_text","",["number","string","number","number"]),uN=$e("sqlite3_result_blob","",["number","number","number","number"]),dN=$e("sqlite3_result_int","",["number","number"]),th=$e("sqlite3_result_error","",["number","string","number"]),Px=$e("sqlite3_aggregate_context","number",["number","number"]),nh=$e("RegisterExtensionFunctions","number",["number"]),Uc=$e("sqlite3_update_hook","number",["number","number","number"]);F.prototype.bind=function(be){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(be)?this.Cb(be):be!=null&&typeof be=="object"?this.Db(be):!0},F.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var be=Xk(this.Qa);switch(be){case 100:return!0;case 101:return!1;default:throw this.db.handleError(be)}},F.prototype.wb=function(be){return be==null&&(be=this.Oa,this.Oa+=1),Zk(this.Qa,be)},F.prototype.Gb=function(be){if(be==null&&(be=this.Oa,this.Oa+=1),be=Rx(this.Qa,be),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(be)},F.prototype.Hb=function(be){return be==null&&(be=this.Oa,this.Oa+=1),Rx(this.Qa,be)},F.prototype.getBlob=function(be){be==null&&(be=this.Oa,this.Oa+=1);var Ue=Ox(this.Qa,be);be=Jk(this.Qa,be);for(var ot=new Uint8Array(Ue),vt=0;vt<Ue;vt+=1)ot[vt]=R[be+vt];return ot},F.prototype.get=function(be,Ue){Ue=Ue||{},be!=null&&this.bind(be)&&this.step(),be=[];for(var ot=Qk(this.Qa),vt=0;vt<ot;vt+=1)switch(eN(this.Qa,vt)){case 1:var It=Ue.useBigInt?this.Gb(vt):this.wb(vt);be.push(It);break;case 2:be.push(this.wb(vt));break;case 3:be.push(this.Hb(vt));break;case 4:be.push(this.getBlob(vt));break;default:be.push(null)}return be},F.prototype.getColumnNames=function(){for(var be=[],Ue=Yk(this.Qa),ot=0;ot<Ue;ot+=1)be.push(tN(this.Qa,ot));return be},F.prototype.getAsObject=function(be,Ue){be=this.get(be,Ue),Ue=this.getColumnNames();for(var ot={},vt=0;vt<Ue.length;vt+=1)ot[Ue[vt]]=be[vt];return ot},F.prototype.getSQL=function(){return jx(this.Qa)},F.prototype.getNormalizedSQL=function(){return fg(this.Qa)},F.prototype.run=function(be){return be!=null&&this.bind(be),this.step(),this.reset()},F.prototype.sb=function(be,Ue){Ue==null&&(Ue=this.Oa,this.Oa+=1),be=cr(be);var ot=id(be,ad);this.lb.push(ot),this.db.handleError(ld(this.Qa,Ue,ot,be.length-1,0))},F.prototype.Bb=function(be,Ue){Ue==null&&(Ue=this.Oa,this.Oa+=1);var ot=id(be,ad);this.lb.push(ot),this.db.handleError(cd(this.Qa,Ue,ot,be.length,0))},F.prototype.rb=function(be,Ue){Ue==null&&(Ue=this.Oa,this.Oa+=1),this.db.handleError((be===(be|0)?Hk:$x)(this.Qa,Ue,be))},F.prototype.Eb=function(be){be==null&&(be=this.Oa,this.Oa+=1),cd(this.Qa,be,0,0,0)},F.prototype.tb=function(be,Ue){switch(Ue==null&&(Ue=this.Oa,this.Oa+=1),typeof be){case"string":this.sb(be,Ue);return;case"number":this.rb(be,Ue);return;case"bigint":this.sb(be.toString(),Ue);return;case"boolean":this.rb(be+0,Ue);return;case"object":if(be===null){this.Eb(Ue);return}if(be.length!=null){this.Bb(be,Ue);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+be+")."},F.prototype.Db=function(be){var Ue=this;return Object.keys(be).forEach(function(ot){var vt=Kk(Ue.Qa,ot);vt!==0&&Ue.tb(be[ot],vt)}),!0},F.prototype.Cb=function(be){for(var Ue=0;Ue<be.length;Ue+=1)this.tb(be[Ue],Ue+1);return!0},F.prototype.reset=function(){return this.freemem(),rN(this.Qa)===0&&nN(this.Qa)===0},F.prototype.freemem=function(){for(var be;(be=this.lb.pop())!==void 0;)ao(be)},F.prototype.free=function(){this.freemem();var be=pg(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,be},K.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var be=ua(),Ue=Ia(4);Ye(xe),Ye(Ue);try{this.db.handleError(eh(this.db.db,this.kb,-1,xe,Ue)),this.kb=ge(Ue,"i32");var ot=ge(xe,"i32");return ot===0?(this.mb(),{done:!0}):(this.Za=new F(ot,this.db),this.db.fb[ot]=this.Za,{value:this.Za,done:!1})}catch(vt){throw this.pb=Ct(this.kb),this.mb(),vt}finally{Bc(be)}},K.prototype.mb=function(){ao(this.eb),this.eb=null},K.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:Ct(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(K.prototype[Symbol.iterator]=function(){return this}),ie.prototype.run=function(be,Ue){if(!this.db)throw"Database closed";if(Ue){be=this.prepare(be,Ue);try{be.step()}finally{be.free()}}else this.handleError(Tt(this.db,be,0,0,xe));return this},ie.prototype.exec=function(be,Ue,ot){if(!this.db)throw"Database closed";var vt=ua(),It=null;try{var on=Bo(be),ls=Ia(4);for(be=[];ge(on,"i8")!==0;){Ye(xe),Ye(ls),this.handleError(eh(this.db,on,-1,xe,ls));var Aa=ge(xe,"i32");if(on=ge(ls,"i32"),Aa!==0){var da=null;for(It=new F(Aa,this),Ue!=null&&It.bind(Ue);It.step();)da===null&&(da={columns:It.getColumnNames(),values:[]},be.push(da)),da.values.push(It.get(null,ot));It.free()}}return be}catch(ei){throw It&&It.free(),ei}finally{Bc(vt)}},ie.prototype.each=function(be,Ue,ot,vt,It){typeof Ue=="function"&&(vt=ot,ot=Ue,Ue=void 0),be=this.prepare(be,Ue);try{for(;be.step();)ot(be.getAsObject(null,It))}finally{be.free()}if(typeof vt=="function")return vt()},ie.prototype.prepare=function(be,Ue){if(Ye(xe),this.handleError(jr(this.db,be,-1,xe,0)),be=ge(xe,"i32"),be===0)throw"Nothing to prepare";var ot=new F(be,this);return Ue!=null&&ot.bind(Ue),this.fb[be]=ot},ie.prototype.iterateStatements=function(be){return new K(be,this)},ie.prototype.export=function(){Object.values(this.fb).forEach(function(Ue){Ue.free()}),Object.values(this.Sa).forEach(Ja),this.Sa={},this.handleError(xt(this.db));var be=Yf(this.filename);return this.handleError(yt(this.filename,xe)),this.db=ge(xe,"i32"),nh(this.db),be},ie.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(be){be.free()}),Object.values(this.Sa).forEach(Ja),this.Sa={},this.Ya&&(Ja(this.Ya),this.Ya=void 0),this.handleError(xt(this.db)),Sr("/"+this.filename),this.db=null)},ie.prototype.handleError=function(be){if(be===0)return null;throw be=hg(this.db),Error(be)},ie.prototype.getRowsModified=function(){return $n(this.db)},ie.prototype.create_function=function(be,Ue){Object.prototype.hasOwnProperty.call(this.Sa,be)&&(Ja(this.Sa[be]),delete this.Sa[be]);var ot=ca(function(vt,It,on){It=O(It,on);try{var ls=Ue.apply(null,It)}catch(Aa){th(vt,Aa,-1);return}j(vt,ls)},"viii");return this.Sa[be]=ot,this.handleError(_x(this.db,be,Ue.length,1,0,ot,0,0,0)),this},ie.prototype.create_aggregate=function(be,Ue){var ot=Ue.init||function(){return null},vt=Ue.finalize||function(da){return da},It=Ue.step;if(!It)throw"An aggregate function must have a step function in "+be;var on={};Object.hasOwnProperty.call(this.Sa,be)&&(Ja(this.Sa[be]),delete this.Sa[be]),Ue=be+"__finalize",Object.hasOwnProperty.call(this.Sa,Ue)&&(Ja(this.Sa[Ue]),delete this.Sa[Ue]);var ls=ca(function(da,ei,rh){var Wo=Px(da,1);Object.hasOwnProperty.call(on,Wo)||(on[Wo]=ot()),ei=O(ei,rh),ei=[on[Wo]].concat(ei);try{on[Wo]=It.apply(null,ei)}catch(ud){delete on[Wo],th(da,ud,-1)}},"viii"),Aa=ca(function(da){var ei=Px(da,1);try{var rh=vt(on[ei])}catch(Wo){delete on[ei],th(da,Wo,-1);return}j(da,rh),delete on[ei]},"vi");return this.Sa[be]=ls,this.Sa[Ue]=Aa,this.handleError(_x(this.db,be,It.length-1,1,0,0,ls,Aa,0)),this},ie.prototype.updateHook=function(be){this.Ya&&(Uc(this.db,0,0),Ja(this.Ya),this.Ya=void 0),be&&(this.Ya=ca(function(Ue,ot,vt,It,on){switch(ot){case 18:Ue="insert";break;case 23:Ue="update";break;case 9:Ue="delete";break;default:throw"unknown operationCode in updateHook callback: "+ot}if(vt=vt?Ke(D,vt):"",It=It?Ke(D,It):"",on>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";be(Ue,vt,It,Number(on))},"viiiij"),Uc(this.db,this.Ya,0))},c.Database=ie};var y={...c},b="./this.program",v=(j,O)=>{throw O},x="",S,C;if(m){var E=XA;x=__dirname+"/",C=j=>(j=J(j)?new URL(j):j,E.readFileSync(j)),S=async j=>(j=J(j)?new URL(j):j,E.readFileSync(j,void 0)),!c.thisProgram&&1<process.argv.length&&(b=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=c,v=(j,O)=>{throw process.exitCode=j,O}}else(f||p)&&(p?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),x=x.startsWith("blob:")?"":x.slice(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1),p&&(C=j=>{var O=new XMLHttpRequest;return O.open("GET",j,!1),O.responseType="arraybuffer",O.send(null),new Uint8Array(O.response)}),S=async j=>{if(J(j))return new Promise((F,K)=>{var ie=new XMLHttpRequest;ie.open("GET",j,!0),ie.responseType="arraybuffer",ie.onload=()=>{ie.status==200||ie.status==0&&ie.response?F(ie.response):K(ie.status)},ie.onerror=K,ie.send(null)});var O=await fetch(j,{credentials:"same-origin"});if(O.ok)return O.arrayBuffer();throw Error(O.status+" : "+O.url)});var k=c.print||console.log.bind(console),I=c.printErr||console.error.bind(console);Object.assign(c,y),y=null,c.thisProgram&&(b=c.thisProgram);var $=c.wasmBinary,_,z=!1,L,R,D,U,X,V,Y,B,Z,J=j=>j.startsWith("file://");function ae(){var j=_.buffer;c.HEAP8=R=new Int8Array(j),c.HEAP16=U=new Int16Array(j),c.HEAPU8=D=new Uint8Array(j),c.HEAPU16=new Uint16Array(j),c.HEAP32=X=new Int32Array(j),c.HEAPU32=V=new Uint32Array(j),c.HEAPF32=Y=new Float32Array(j),c.HEAPF64=Z=new Float64Array(j),c.HEAP64=B=new BigInt64Array(j),c.HEAPU64=new BigUint64Array(j)}var ee=0,W=null;function Q(j){throw c.onAbort?.(j),j="Aborted("+j+")",I(j),z=!0,new WebAssembly.RuntimeError(j+". Build with -sASSERTIONS for more info.")}var se;async function fe(j){if(!$)try{var O=await S(j);return new Uint8Array(O)}catch{}if(j==se&&$)j=new Uint8Array($);else if(C)j=C(j);else throw"both async and sync fetching of the wasm failed";return j}async function Ne(j,O){try{var F=await fe(j);return await WebAssembly.instantiate(F,O)}catch(K){I(`failed to asynchronously prepare wasm: ${K}`),Q(K)}}async function _e(j){var O=se;if(!$&&typeof WebAssembly.instantiateStreaming=="function"&&!J(O)&&!m)try{var F=fetch(O,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(F,j)}catch(K){I(`wasm streaming compile failed: ${K}`),I("falling back to ArrayBuffer instantiation")}return Ne(O,j)}class De{name="ExitStatus";constructor(O){this.message=`Program terminated with exit(${O})`,this.status=O}}var He=j=>{for(;0<j.length;)j.shift()(c)},he=[],Te=[],Me=()=>{var j=c.preRun.shift();Te.unshift(j)};function ge(j,O="i8"){switch(O.endsWith("*")&&(O="*"),O){case"i1":return R[j];case"i8":return R[j];case"i16":return U[j>>1];case"i32":return X[j>>2];case"i64":return B[j>>3];case"float":return Y[j>>2];case"double":return Z[j>>3];case"*":return V[j>>2];default:Q(`invalid type for getValue: ${O}`)}}var ct=c.noExitRuntime||!0;function Ye(j){var O="i32";switch(O.endsWith("*")&&(O="*"),O){case"i1":R[j]=0;break;case"i8":R[j]=0;break;case"i16":U[j>>1]=0;break;case"i32":X[j>>2]=0;break;case"i64":B[j>>3]=BigInt(0);break;case"float":Y[j>>2]=0;break;case"double":Z[j>>3]=0;break;case"*":V[j>>2]=0;break;default:Q(`invalid type for setValue: ${O}`)}}var ft=typeof TextDecoder<"u"?new TextDecoder:void 0,Ke=(j,O=0,F=NaN)=>{var K=O+F;for(F=O;j[F]&&!(F>=K);)++F;if(16<F-O&&j.buffer&&ft)return ft.decode(j.subarray(O,F));for(K="";O<F;){var ie=j[O++];if(ie&128){var xe=j[O++]&63;if((ie&224)==192)K+=String.fromCharCode((ie&31)<<6|xe);else{var $e=j[O++]&63;ie=(ie&240)==224?(ie&15)<<12|xe<<6|$e:(ie&7)<<18|xe<<12|$e<<6|j[O++]&63,65536>ie?K+=String.fromCharCode(ie):(ie-=65536,K+=String.fromCharCode(55296|ie>>10,56320|ie&1023))}}else K+=String.fromCharCode(ie)}return K},Ct=(j,O)=>j?Ke(D,j,O):"",kt=(j,O)=>{for(var F=0,K=j.length-1;0<=K;K--){var ie=j[K];ie==="."?j.splice(K,1):ie===".."?(j.splice(K,1),F++):F&&(j.splice(K,1),F--)}if(O)for(;F;F--)j.unshift("..");return j},Wt=j=>{var O=j.charAt(0)==="/",F=j.slice(-1)==="/";return(j=kt(j.split("/").filter(K=>!!K),!O).join("/"))||O||(j="."),j&&F&&(j+="/"),(O?"/":"")+j},Kt=j=>{var O=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(j).slice(1);return j=O[0],O=O[1],!j&&!O?".":(O&&=O.slice(0,-1),j+O)},jn=j=>j&&j.match(/([^\/]+|\/)\/*$/)[1],Nt=()=>{if(m){var j=XA;return O=>j.randomFillSync(O)}return O=>crypto.getRandomValues(O)},sr=j=>{(sr=Nt())(j)},Zt=(...j)=>{for(var O="",F=!1,K=j.length-1;-1<=K&&!F;K--){if(F=0<=K?j[K]:"/",typeof F!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!F)return"";O=F+"/"+O,F=F.charAt(0)==="/"}return O=kt(O.split("/").filter(ie=>!!ie),!F).join("/"),(F?"/":"")+O||"."},lr=[],ar=j=>{for(var O=0,F=0;F<j.length;++F){var K=j.charCodeAt(F);127>=K?O++:2047>=K?O+=2:55296<=K&&57343>=K?(O+=4,++F):O+=3}return O},fn=(j,O,F,K)=>{if(!(0<K))return 0;var ie=F;K=F+K-1;for(var xe=0;xe<j.length;++xe){var $e=j.charCodeAt(xe);if(55296<=$e&&57343>=$e){var yt=j.charCodeAt(++xe);$e=65536+(($e&1023)<<10)|yt&1023}if(127>=$e){if(F>=K)break;O[F++]=$e}else{if(2047>=$e){if(F+1>=K)break;O[F++]=192|$e>>6}else{if(65535>=$e){if(F+2>=K)break;O[F++]=224|$e>>12}else{if(F+3>=K)break;O[F++]=240|$e>>18,O[F++]=128|$e>>12&63}O[F++]=128|$e>>6&63}O[F++]=128|$e&63}}return O[F]=0,F-ie},cr=(j,O)=>{var F=Array(ar(j)+1);return j=fn(j,F,0,F.length),O&&(F.length=j),F},qs=[];function ia(j,O){qs[j]={input:[],output:[],cb:O},tg(j,de)}var de={open(j){var O=qs[j.node.rdev];if(!O)throw new qe(43);j.tty=O,j.seekable=!1},close(j){j.tty.cb.fsync(j.tty)},fsync(j){j.tty.cb.fsync(j.tty)},read(j,O,F,K){if(!j.tty||!j.tty.cb.xb)throw new qe(60);for(var ie=0,xe=0;xe<K;xe++){try{var $e=j.tty.cb.xb(j.tty)}catch{throw new qe(29)}if($e===void 0&&ie===0)throw new qe(6);if($e==null)break;ie++,O[F+xe]=$e}return ie&&(j.node.atime=Date.now()),ie},write(j,O,F,K){if(!j.tty||!j.tty.cb.qb)throw new qe(60);try{for(var ie=0;ie<K;ie++)j.tty.cb.qb(j.tty,O[F+ie])}catch{throw new qe(29)}return K&&(j.node.mtime=j.node.ctime=Date.now()),ie}},Fe={xb(){e:{if(!lr.length){var j=null;if(m){var O=Buffer.alloc(256),F=0,K=process.stdin.fd;try{F=E.readSync(K,O,0,256)}catch(ie){if(ie.toString().includes("EOF"))F=0;else throw ie}0<F&&(j=O.slice(0,F).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(j=window.prompt("Input: "),j!==null&&(j+=`
`));if(!j){j=null;break e}lr=cr(j,!0)}j=lr.shift()}return j},qb(j,O){O===null||O===10?(k(Ke(j.output)),j.output=[]):O!=0&&j.output.push(O)},fsync(j){0<j.output?.length&&(k(Ke(j.output)),j.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Ze={qb(j,O){O===null||O===10?(I(Ke(j.output)),j.output=[]):O!=0&&j.output.push(O)},fsync(j){0<j.output?.length&&(I(Ke(j.output)),j.output=[])}},we={Wa:null,Xa(){return we.createNode(null,"/",16895,0)},createNode(j,O,F,K){if((F&61440)===24576||(F&61440)===4096)throw new qe(63);return we.Wa||(we.Wa={dir:{node:{Ta:we.La.Ta,Ua:we.La.Ua,lookup:we.La.lookup,hb:we.La.hb,rename:we.La.rename,unlink:we.La.unlink,rmdir:we.La.rmdir,readdir:we.La.readdir,symlink:we.La.symlink},stream:{Va:we.Ma.Va}},file:{node:{Ta:we.La.Ta,Ua:we.La.Ua},stream:{Va:we.Ma.Va,read:we.Ma.read,write:we.Ma.write,ib:we.Ma.ib,jb:we.Ma.jb}},link:{node:{Ta:we.La.Ta,Ua:we.La.Ua,readlink:we.La.readlink},stream:{}},ub:{node:{Ta:we.La.Ta,Ua:we.La.Ua},stream:Vk}}),F=Dc(j,O,F,K),Es(F.mode)?(F.La=we.Wa.dir.node,F.Ma=we.Wa.dir.stream,F.Na={}):(F.mode&61440)===32768?(F.La=we.Wa.file.node,F.Ma=we.Wa.file.stream,F.Ra=0,F.Na=null):(F.mode&61440)===40960?(F.La=we.Wa.link.node,F.Ma=we.Wa.link.stream):(F.mode&61440)===8192&&(F.La=we.Wa.ub.node,F.Ma=we.Wa.ub.stream),F.atime=F.mtime=F.ctime=Date.now(),j&&(j.Na[O]=F,j.atime=j.mtime=j.ctime=F.atime),F},Sb(j){return j.Na?j.Na.subarray?j.Na.subarray(0,j.Ra):new Uint8Array(j.Na):new Uint8Array(0)},La:{Ta(j){var O={};return O.dev=(j.mode&61440)===8192?j.id:1,O.ino=j.id,O.mode=j.mode,O.nlink=1,O.uid=0,O.gid=0,O.rdev=j.rdev,Es(j.mode)?O.size=4096:(j.mode&61440)===32768?O.size=j.Ra:(j.mode&61440)===40960?O.size=j.link.length:O.size=0,O.atime=new Date(j.atime),O.mtime=new Date(j.mtime),O.ctime=new Date(j.ctime),O.blksize=4096,O.blocks=Math.ceil(O.size/O.blksize),O},Ua(j,O){for(var F of["mode","atime","mtime","ctime"])O[F]!=null&&(j[F]=O[F]);O.size!==void 0&&(O=O.size,j.Ra!=O&&(O==0?(j.Na=null,j.Ra=0):(F=j.Na,j.Na=new Uint8Array(O),F&&j.Na.set(F.subarray(0,Math.min(O,j.Ra))),j.Ra=O)))},lookup(){throw we.vb},hb(j,O,F,K){return we.createNode(j,O,F,K)},rename(j,O,F){try{var K=la(O,F)}catch{}if(K){if(Es(j.mode))for(var ie in K.Na)throw new qe(55);zo(K)}delete j.parent.Na[j.name],O.Na[F]=j,j.name=F,O.ctime=O.mtime=j.parent.ctime=j.parent.mtime=Date.now()},unlink(j,O){delete j.Na[O],j.ctime=j.mtime=Date.now()},rmdir(j,O){var F=la(j,O),K;for(K in F.Na)throw new qe(55);delete j.Na[O],j.ctime=j.mtime=Date.now()},readdir(j){return[".","..",...Object.keys(j.Na)]},symlink(j,O,F){return j=we.createNode(j,O,41471,0),j.link=F,j},readlink(j){if((j.mode&61440)!==40960)throw new qe(28);return j.link}},Ma:{read(j,O,F,K,ie){var xe=j.node.Na;if(ie>=j.node.Ra)return 0;if(j=Math.min(j.node.Ra-ie,K),8<j&&xe.subarray)O.set(xe.subarray(ie,ie+j),F);else for(K=0;K<j;K++)O[F+K]=xe[ie+K];return j},write(j,O,F,K,ie,xe){if(O.buffer===R.buffer&&(xe=!1),!K)return 0;if(j=j.node,j.mtime=j.ctime=Date.now(),O.subarray&&(!j.Na||j.Na.subarray)){if(xe)return j.Na=O.subarray(F,F+K),j.Ra=K;if(j.Ra===0&&ie===0)return j.Na=O.slice(F,F+K),j.Ra=K;if(ie+K<=j.Ra)return j.Na.set(O.subarray(F,F+K),ie),K}xe=ie+K;var $e=j.Na?j.Na.length:0;if($e>=xe||(xe=Math.max(xe,$e*(1048576>$e?2:1.125)>>>0),$e!=0&&(xe=Math.max(xe,256)),$e=j.Na,j.Na=new Uint8Array(xe),0<j.Ra&&j.Na.set($e.subarray(0,j.Ra),0)),j.Na.subarray&&O.subarray)j.Na.set(O.subarray(F,F+K),ie);else for(xe=0;xe<K;xe++)j.Na[ie+xe]=O[F+xe];return j.Ra=Math.max(j.Ra,ie+K),K},Va(j,O,F){if(F===1?O+=j.position:F===2&&(j.node.mode&61440)===32768&&(O+=j.node.Ra),0>O)throw new qe(28);return O},ib(j,O,F,K,ie){if((j.node.mode&61440)!==32768)throw new qe(43);if(j=j.node.Na,ie&2||!j||j.buffer!==R.buffer){ie=!0,K=65536*Math.ceil(O/65536);var xe=dg(65536,K);if(xe&&D.fill(0,xe,xe+K),K=xe,!K)throw new qe(48);j&&((0<F||F+O<j.length)&&(j.subarray?j=j.subarray(F,F+O):j=Array.prototype.slice.call(j,F,F+O)),R.set(j,K))}else ie=!1,K=j.byteOffset;return{Kb:K,Ab:ie}},jb(j,O,F,K){return we.Ma.write(j,O,0,K,F,!1),0}}},Pe=(j,O)=>{var F=0;return j&&(F|=365),O&&(F|=146),F},Oe=null,et={},Rt=[],nn=1,rn=null,Vr=!1,oa=!0,Gs={},qe=class{name="ErrnoError";constructor(j){this.Pa=j}},Ns=class{gb={};node=null;get flags(){return this.gb.flags}set flags(j){this.gb.flags=j}get position(){return this.gb.position}set position(j){this.gb.position=j}},Il=class{La={};Ma={};ab=null;constructor(j,O,F,K){j||=this,this.parent=j,this.Xa=j.Xa,this.id=nn++,this.name=O,this.mode=F,this.rdev=K,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(j){j?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(j){j?this.mode|=146:this.mode&=-147}};function qr(j,O={}){if(!j)throw new qe(44);O.nb??(O.nb=!0),j.charAt(0)==="/"||(j="//"+j);var F=0;e:for(;40>F;F++){j=j.split("/").filter(yt=>!!yt);for(var K=Oe,ie="/",xe=0;xe<j.length;xe++){var $e=xe===j.length-1;if($e&&O.parent)break;if(j[xe]!==".")if(j[xe]==="..")ie=Kt(ie),K=K.parent;else{ie=Wt(ie+"/"+j[xe]);try{K=la(K,j[xe])}catch(yt){if(yt?.Pa===44&&$e&&O.Jb)return{path:ie};throw yt}if(!K.ab||$e&&!O.nb||(K=K.ab.root),(K.mode&61440)===40960&&(!$e||O.$a)){if(!K.La.readlink)throw new qe(52);K=K.La.readlink(K),K.charAt(0)==="/"||(K=Kt(ie)+"/"+K),j=K+"/"+j.slice(xe+1).join("/");continue e}}}return{path:ie,node:K}}throw new qe(32)}function wr(j){for(var O;;){if(j===j.parent)return j=j.Xa.zb,O?j[j.length-1]!=="/"?`${j}/${O}`:j+O:j;O=O?`${j.name}/${O}`:j.name,j=j.parent}}function Ts(j,O){for(var F=0,K=0;K<O.length;K++)F=(F<<5)-F+O.charCodeAt(K)|0;return(j+F>>>0)%rn.length}function zo(j){var O=Ts(j.parent.id,j.name);if(rn[O]===j)rn[O]=j.bb;else for(O=rn[O];O;){if(O.bb===j){O.bb=j.bb;break}O=O.bb}}function la(j,O){var F=Es(j.mode)?(F=Po(j,"x"))?F:j.La.lookup?0:2:54;if(F)throw new qe(F);for(F=rn[Ts(j.id,O)];F;F=F.bb){var K=F.name;if(F.parent.id===j.id&&K===O)return F}return j.La.lookup(j,O)}function Dc(j,O,F,K){return j=new Il(j,O,F,K),O=Ts(j.parent.id,j.name),j.bb=rn[O],rn[O]=j}function Es(j){return(j&61440)===16384}function Kf(j){var O=["r","w","rw"][j&3];return j&512&&(O+="w"),O}function Po(j,O){if(oa)return 0;if(!O.includes("r")||j.mode&292){if(O.includes("w")&&!(j.mode&146)||O.includes("x")&&!(j.mode&73))return 2}else return 2;return 0}function Jm(j,O){if(!Es(j.mode))return 54;try{return la(j,O),20}catch{}return Po(j,"wx")}function eg(j,O,F){try{var K=la(j,O)}catch(ie){return ie.Pa}if(j=Po(j,"wx"))return j;if(F){if(!Es(K.mode))return 54;if(K===K.parent||wr(K)==="/")return 10}else if(Es(K.mode))return 31;return 0}function Za(j){if(!j)throw new qe(63);return j}function sn(j){if(j=Rt[j],!j)throw new qe(8);return j}function Is(j,O=-1){if(j=Object.assign(new Ns,j),O==-1)e:{for(O=0;4096>=O;O++)if(!Rt[O])break e;throw new qe(33)}return j.fd=O,Rt[O]=j}function zc(j,O=-1){return j=Is(j,O),j.Ma?.Rb?.(j),j}function nd(j,O,F){var K=j?.Ma.Ua;j=K?j:O,K??=O.La.Ua,Za(K),K(j,F)}var Vk={open(j){j.Ma=et[j.node.rdev].Ma,j.Ma.open?.(j)},Va(){throw new qe(70)}};function tg(j,O){et[j]={Ma:O}}function ng(j,O){var F=O==="/";if(F&&Oe)throw new qe(10);if(!F&&O){var K=qr(O,{nb:!1});if(O=K.path,K=K.node,K.ab)throw new qe(10);if(!Es(K.mode))throw new qe(54)}O={type:j,Wb:{},zb:O,Ib:[]},j=j.Xa(O),j.Xa=O,O.root=j,F?Oe=j:K&&(K.ab=O,K.Xa&&K.Xa.Ib.push(O))}function Lo(j,O,F){var K=qr(j,{parent:!0}).node;if(j=jn(j),!j)throw new qe(28);if(j==="."||j==="..")throw new qe(20);var ie=Jm(K,j);if(ie)throw new qe(ie);if(!K.La.hb)throw new qe(63);return K.La.hb(K,j,O,F)}function rg(j,O=438){return Lo(j,O&4095|32768,0)}function As(j,O=511){return Lo(j,O&1023|16384,0)}function no(j,O,F){typeof F>"u"&&(F=O,O=438),Lo(j,O|8192,F)}function Al(j,O){if(!Zt(j))throw new qe(44);var F=qr(O,{parent:!0}).node;if(!F)throw new qe(44);O=jn(O);var K=Jm(F,O);if(K)throw new qe(K);if(!F.La.symlink)throw new qe(63);F.La.symlink(F,O,j)}function jl(j){var O=qr(j,{parent:!0}).node;j=jn(j);var F=la(O,j),K=eg(O,j,!0);if(K)throw new qe(K);if(!O.La.rmdir)throw new qe(63);if(F.ab)throw new qe(10);O.La.rmdir(O,j),zo(F)}function Sr(j){var O=qr(j,{parent:!0}).node;if(!O)throw new qe(44);j=jn(j);var F=la(O,j),K=eg(O,j,!1);if(K)throw new qe(K);if(!O.La.unlink)throw new qe(63);if(F.ab)throw new qe(10);O.La.unlink(O,j),zo(F)}function Pc(j,O){return j=qr(j,{$a:!O}).node,Za(j.La.Ta)(j)}function sg(j,O,F,K){nd(j,O,{mode:F&4095|O.mode&-4096,ctime:Date.now(),Fb:K})}function Ii(j,O){j=typeof j=="string"?qr(j,{$a:!0}).node:j,sg(null,j,O)}function $l(j,O,F){if(Es(O.mode))throw new qe(31);if((O.mode&61440)!==32768)throw new qe(28);var K=Po(O,"w");if(K)throw new qe(K);nd(j,O,{size:F,timestamp:Date.now()})}function Lc(j,O,F=438){if(j==="")throw new qe(44);if(typeof O=="string"){var K={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[O];if(typeof K>"u")throw Error(`Unknown file open mode: ${O}`);O=K}if(F=O&64?F&4095|32768:0,typeof j=="object")K=j;else{var ie=j.endsWith("/");j=qr(j,{$a:!(O&131072),Jb:!0}),K=j.node,j=j.path}var xe=!1;if(O&64)if(K){if(O&128)throw new qe(20)}else{if(ie)throw new qe(31);K=Lo(j,F|511,0),xe=!0}if(!K)throw new qe(44);if((K.mode&61440)===8192&&(O&=-513),O&65536&&!Es(K.mode))throw new qe(54);if(!xe&&(ie=K?(K.mode&61440)===40960?32:Es(K.mode)&&(Kf(O)!=="r"||O&576)?31:Po(K,Kf(O)):44))throw new qe(ie);return O&512&&!xe&&(ie=K,ie=typeof ie=="string"?qr(ie,{$a:!0}).node:ie,$l(null,ie,0)),O&=-131713,ie=Is({node:K,path:wr(K),flags:O,seekable:!0,position:0,Ma:K.Ma,Lb:[],error:!1}),ie.Ma.open&&ie.Ma.open(ie),xe&&Ii(K,F&511),!c.logReadFiles||O&1||j in Gs||(Gs[j]=1),ie}function Xf(j){if(j.fd===null)throw new qe(8);j.ob&&(j.ob=null);try{j.Ma.close&&j.Ma.close(j)}catch(O){throw O}finally{Rt[j.fd]=null}j.fd=null}function ag(j,O,F){if(j.fd===null)throw new qe(8);if(!j.seekable||!j.Ma.Va)throw new qe(70);if(F!=0&&F!=1&&F!=2)throw new qe(28);j.position=j.Ma.Va(j,O,F),j.Lb=[]}function Ax(j,O,F,K,ie){if(0>K||0>ie)throw new qe(28);if(j.fd===null)throw new qe(8);if((j.flags&2097155)===1)throw new qe(8);if(Es(j.node.mode))throw new qe(31);if(!j.Ma.read)throw new qe(28);var xe=typeof ie<"u";if(!xe)ie=j.position;else if(!j.seekable)throw new qe(70);return O=j.Ma.read(j,O,F,K,ie),xe||(j.position+=O),O}function rd(j,O,F,K,ie){if(0>K||0>ie)throw new qe(28);if(j.fd===null)throw new qe(8);if((j.flags&2097155)===0)throw new qe(8);if(Es(j.node.mode))throw new qe(31);if(!j.Ma.write)throw new qe(28);j.seekable&&j.flags&1024&&ag(j,0,2);var xe=typeof ie<"u";if(!xe)ie=j.position;else if(!j.seekable)throw new qe(70);return O=j.Ma.write(j,O,F,K,ie,void 0),xe||(j.position+=O),O}function Yf(j){var O,F=Lc(j,F||0);j=Pc(j).size;var K=new Uint8Array(j);return Ax(F,K,0,j,0),O=K,Xf(F),O}function os(j,O,F){j=Wt("/dev/"+j);var K=Pe(!!O,!!F);os.yb??(os.yb=64);var ie=os.yb++<<8|0;tg(ie,{open(xe){xe.seekable=!1},close(){F?.buffer?.length&&F(10)},read(xe,$e,yt,xt){for(var Tt=0,$n=0;$n<xt;$n++){try{var jr=O()}catch{throw new qe(29)}if(jr===void 0&&Tt===0)throw new qe(6);if(jr==null)break;Tt++,$e[yt+$n]=jr}return Tt&&(xe.node.atime=Date.now()),Tt},write(xe,$e,yt,xt){for(var Tt=0;Tt<xt;Tt++)try{F($e[yt+Tt])}catch{throw new qe(29)}return xt&&(xe.node.mtime=xe.node.ctime=Date.now()),Tt}}),no(j,K,ie)}var Bt={};function Mo(j,O,F){if(O.charAt(0)==="/")return O;if(j=j===-100?"/":sn(j).path,O.length==0){if(!F)throw new qe(44);return j}return j+"/"+O}function Qf(j,O){X[j>>2]=O.dev,X[j+4>>2]=O.mode,V[j+8>>2]=O.nlink,X[j+12>>2]=O.uid,X[j+16>>2]=O.gid,X[j+20>>2]=O.rdev,B[j+24>>3]=BigInt(O.size),X[j+32>>2]=4096,X[j+36>>2]=O.blocks;var F=O.atime.getTime(),K=O.mtime.getTime(),ie=O.ctime.getTime();return B[j+40>>3]=BigInt(Math.floor(F/1e3)),V[j+48>>2]=F%1e3*1e6,B[j+56>>3]=BigInt(Math.floor(K/1e3)),V[j+64>>2]=K%1e3*1e6,B[j+72>>3]=BigInt(Math.floor(ie/1e3)),V[j+80>>2]=ie%1e3*1e6,B[j+88>>3]=BigInt(O.ino),0}var Mc=void 0,sd=()=>{var j=X[+Mc>>2];return Mc+=4,j},Fc=0,qk=[0,31,60,91,121,152,182,213,244,274,305,335],Ea=[0,31,59,90,120,151,181,212,243,273,304,334],Rl={},ig=j=>{L=j,ct||0<Fc||(c.onExit?.(j),z=!0),v(j,new De(j))},og=j=>{if(!z)try{if(j(),!(ct||0<Fc))try{L=j=L,ig(j)}catch(O){O instanceof De||O=="unwind"||v(1,O)}}catch(O){O instanceof De||O=="unwind"||v(1,O)}},Fo={},lg=()=>{if(!Zf){var j={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:b||"./this.program"},O;for(O in Fo)Fo[O]===void 0?delete j[O]:j[O]=Fo[O];var F=[];for(O in j)F.push(`${O}=${j[O]}`);Zf=F}return Zf},Zf,Bo=j=>{var O=ar(j)+1,F=Ia(O);return fn(j,D,F,O),F},Gk=(j,O,F,K)=>{var ie={string:Tt=>{var $n=0;return Tt!=null&&Tt!==0&&($n=Bo(Tt)),$n},array:Tt=>{var $n=Ia(Tt.length);return R.set(Tt,$n),$n}};j=c["_"+j];var xe=[],$e=0;if(K)for(var yt=0;yt<K.length;yt++){var xt=ie[F[yt]];xt?($e===0&&($e=ua()),xe[yt]=xt(K[yt])):xe[yt]=K[yt]}return F=j(...xe),F=(function(Tt){return $e!==0&&Bc($e),O==="string"?Tt?Ke(D,Tt):"":O==="boolean"?!!Tt:Tt})(F)},ad=0,id=(j,O)=>(O=O==1?Ia(j.length):Uo(j.length),j.subarray||j.slice||(j=new Uint8Array(j)),D.set(j,O),O),ro,cg=[],so,Ja=j=>{ro.delete(so.get(j)),so.set(j,null),cg.push(j)},ca=(j,O)=>{if(!ro){ro=new WeakMap;var F=so.length;if(ro)for(var K=0;K<0+F;K++){var ie=so.get(K);ie&&ro.set(ie,K)}}if(F=ro.get(j)||0)return F;if(cg.length)F=cg.pop();else{try{so.grow(1)}catch(xt){throw xt instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":xt}F=so.length-1}try{so.set(F,j)}catch(xt){if(!(xt instanceof TypeError))throw xt;if(typeof WebAssembly.Function=="function"){var xe=WebAssembly.Function;K={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},ie={parameters:[],results:O[0]=="v"?[]:[K[O[0]]]};for(var $e=1;$e<O.length;++$e)ie.parameters.push(K[O[$e]]);O=new xe(ie,j)}else{K=[1],ie=O.slice(0,1),O=O.slice(1),$e={i:127,p:127,j:126,f:125,d:124,e:111},K.push(96);var yt=O.length;128>yt?K.push(yt):K.push(yt%128|128,yt>>7);for(xe of O)K.push($e[xe]);ie=="v"?K.push(0):K.push(1,$e[ie]),O=[0,97,115,109,1,0,0,0,1],xe=K.length,128>xe?O.push(xe):O.push(xe%128|128,xe>>7),O.push(...K),O.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),O=new WebAssembly.Module(new Uint8Array(O)),O=new WebAssembly.Instance(O,{e:{f:j}}).exports.f}so.set(F,O)}return ro.set(j,F),F};rn=Array(4096),ng(we,"/"),As("/tmp"),As("/home"),As("/home/web_user"),(function(){As("/dev"),tg(259,{read:()=>0,write:(K,ie,xe,$e)=>$e,Va:()=>0}),no("/dev/null",259),ia(1280,Fe),ia(1536,Ze),no("/dev/tty",1280),no("/dev/tty1",1536);var j=new Uint8Array(1024),O=0,F=()=>(O===0&&(sr(j),O=j.byteLength),j[--O]);os("random",F),os("urandom",F),As("/dev/shm"),As("/dev/shm/tmp")})(),(function(){As("/proc");var j=As("/proc/self");As("/proc/self/fd"),ng({Xa(){var O=Dc(j,"fd",16895,73);return O.Ma={Va:we.Ma.Va},O.La={lookup(F,K){F=+K;var ie=sn(F);return F={parent:null,Xa:{zb:"fake"},La:{readlink:()=>ie.path},id:F+1},F.parent=F},readdir(){return Array.from(Rt.entries()).filter(([,F])=>F).map(([F])=>F.toString())}},O}},"/proc/self/fd")})(),we.vb=new qe(44),we.vb.stack="<generic error, no stack>";var ug={a:(j,O,F,K)=>Q(`Assertion failed: ${j?Ke(D,j):""}, at: `+[O?O?Ke(D,O):"":"unknown filename",F,K?K?Ke(D,K):"":"unknown function"]),i:function(j,O){try{return j=j?Ke(D,j):"",Ii(j,O),0}catch(F){if(typeof Bt>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},L:function(j,O,F){try{if(O=O?Ke(D,O):"",O=Mo(j,O),F&-8)return-28;var K=qr(O,{$a:!0}).node;return K?(j="",F&4&&(j+="r"),F&2&&(j+="w"),F&1&&(j+="x"),j&&Po(K,j)?-2:0):-44}catch(ie){if(typeof Bt>"u"||ie.name!=="ErrnoError")throw ie;return-ie.Pa}},j:function(j,O){try{var F=sn(j);return sg(F,F.node,O,!1),0}catch(K){if(typeof Bt>"u"||K.name!=="ErrnoError")throw K;return-K.Pa}},h:function(j){try{var O=sn(j);return nd(O,O.node,{timestamp:Date.now(),Fb:!1}),0}catch(F){if(typeof Bt>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},b:function(j,O,F){Mc=F;try{var K=sn(j);switch(O){case 0:var ie=sd();if(0>ie)break;for(;Rt[ie];)ie++;return zc(K,ie).fd;case 1:case 2:return 0;case 3:return K.flags;case 4:return ie=sd(),K.flags|=ie,0;case 12:return ie=sd(),U[ie+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(xe){if(typeof Bt>"u"||xe.name!=="ErrnoError")throw xe;return-xe.Pa}},g:function(j,O){try{var F=sn(j),K=F.node,ie=F.Ma.Ta;j=ie?F:K,ie??=K.La.Ta,Za(ie);var xe=ie(j);return Qf(O,xe)}catch($e){if(typeof Bt>"u"||$e.name!=="ErrnoError")throw $e;return-$e.Pa}},H:function(j,O){O=-9007199254740992>O||9007199254740992<O?NaN:Number(O);try{if(isNaN(O))return 61;var F=sn(j);if(0>O||(F.flags&2097155)===0)throw new qe(28);return $l(F,F.node,O),0}catch(K){if(typeof Bt>"u"||K.name!=="ErrnoError")throw K;return-K.Pa}},G:function(j,O){try{if(O===0)return-28;var F=ar("/")+1;return O<F?-68:(fn("/",D,j,O),F)}catch(K){if(typeof Bt>"u"||K.name!=="ErrnoError")throw K;return-K.Pa}},K:function(j,O){try{return j=j?Ke(D,j):"",Qf(O,Pc(j,!0))}catch(F){if(typeof Bt>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},C:function(j,O,F){try{return O=O?Ke(D,O):"",O=Mo(j,O),As(O,F),0}catch(K){if(typeof Bt>"u"||K.name!=="ErrnoError")throw K;return-K.Pa}},J:function(j,O,F,K){try{O=O?Ke(D,O):"";var ie=K&256;return O=Mo(j,O,K&4096),Qf(F,ie?Pc(O,!0):Pc(O))}catch(xe){if(typeof Bt>"u"||xe.name!=="ErrnoError")throw xe;return-xe.Pa}},x:function(j,O,F,K){Mc=K;try{O=O?Ke(D,O):"",O=Mo(j,O);var ie=K?sd():0;return Lc(O,F,ie).fd}catch(xe){if(typeof Bt>"u"||xe.name!=="ErrnoError")throw xe;return-xe.Pa}},v:function(j,O,F,K){try{if(O=O?Ke(D,O):"",O=Mo(j,O),0>=K)return-28;var ie=qr(O).node;if(!ie)throw new qe(44);if(!ie.La.readlink)throw new qe(28);var xe=ie.La.readlink(ie),$e=Math.min(K,ar(xe)),yt=R[F+$e];return fn(xe,D,F,K+1),R[F+$e]=yt,$e}catch(xt){if(typeof Bt>"u"||xt.name!=="ErrnoError")throw xt;return-xt.Pa}},u:function(j){try{return j=j?Ke(D,j):"",jl(j),0}catch(O){if(typeof Bt>"u"||O.name!=="ErrnoError")throw O;return-O.Pa}},f:function(j,O){try{return j=j?Ke(D,j):"",Qf(O,Pc(j))}catch(F){if(typeof Bt>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},r:function(j,O,F){try{return O=O?Ke(D,O):"",O=Mo(j,O),F===0?Sr(O):F===512?jl(O):Q("Invalid flags passed to unlinkat"),0}catch(K){if(typeof Bt>"u"||K.name!=="ErrnoError")throw K;return-K.Pa}},q:function(j,O,F){try{O=O?Ke(D,O):"",O=Mo(j,O,!0);var K=Date.now(),ie,xe;if(F){var $e=V[F>>2]+4294967296*X[F+4>>2],yt=X[F+8>>2];yt==1073741823?ie=K:yt==1073741822?ie=null:ie=1e3*$e+yt/1e6,F+=16,$e=V[F>>2]+4294967296*X[F+4>>2],yt=X[F+8>>2],yt==1073741823?xe=K:yt==1073741822?xe=null:xe=1e3*$e+yt/1e6}else xe=ie=K;if((xe??ie)!==null){j=ie;var xt=qr(O,{$a:!0}).node;Za(xt.La.Ua)(xt,{atime:j,mtime:xe})}return 0}catch(Tt){if(typeof Bt>"u"||Tt.name!=="ErrnoError")throw Tt;return-Tt.Pa}},m:()=>Q(""),l:()=>{ct=!1,Fc=0},A:function(j,O){j=-9007199254740992>j||9007199254740992<j?NaN:Number(j),j=new Date(1e3*j),X[O>>2]=j.getSeconds(),X[O+4>>2]=j.getMinutes(),X[O+8>>2]=j.getHours(),X[O+12>>2]=j.getDate(),X[O+16>>2]=j.getMonth(),X[O+20>>2]=j.getFullYear()-1900,X[O+24>>2]=j.getDay();var F=j.getFullYear();X[O+28>>2]=(F%4!==0||F%100===0&&F%400!==0?Ea:qk)[j.getMonth()]+j.getDate()-1|0,X[O+36>>2]=-(60*j.getTimezoneOffset()),F=new Date(j.getFullYear(),6,1).getTimezoneOffset();var K=new Date(j.getFullYear(),0,1).getTimezoneOffset();X[O+32>>2]=(F!=K&&j.getTimezoneOffset()==Math.min(K,F))|0},y:function(j,O,F,K,ie,xe,$e){ie=-9007199254740992>ie||9007199254740992<ie?NaN:Number(ie);try{if(isNaN(ie))return 61;var yt=sn(K);if((O&2)!==0&&(F&2)===0&&(yt.flags&2097155)!==2)throw new qe(2);if((yt.flags&2097155)===1)throw new qe(2);if(!yt.Ma.ib)throw new qe(43);if(!j)throw new qe(28);var xt=yt.Ma.ib(yt,j,ie,O,F),Tt=xt.Kb;return X[xe>>2]=xt.Ab,V[$e>>2]=Tt,0}catch($n){if(typeof Bt>"u"||$n.name!=="ErrnoError")throw $n;return-$n.Pa}},z:function(j,O,F,K,ie,xe){xe=-9007199254740992>xe||9007199254740992<xe?NaN:Number(xe);try{var $e=sn(ie);if(F&2){if(F=xe,($e.node.mode&61440)!==32768)throw new qe(43);if(!(K&2)){var yt=D.slice(j,j+O);$e.Ma.jb&&$e.Ma.jb($e,yt,F,O,K)}}}catch(xt){if(typeof Bt>"u"||xt.name!=="ErrnoError")throw xt;return-xt.Pa}},n:(j,O)=>{if(Rl[j]&&(clearTimeout(Rl[j].id),delete Rl[j]),!O)return 0;var F=setTimeout(()=>{delete Rl[j],og(()=>Jf(j,performance.now()))},O);return Rl[j]={id:F,Xb:O},0},B:(j,O,F,K)=>{var ie=new Date().getFullYear(),xe=new Date(ie,0,1).getTimezoneOffset();ie=new Date(ie,6,1).getTimezoneOffset(),V[j>>2]=60*Math.max(xe,ie),X[O>>2]=+(xe!=ie),O=$e=>{var yt=Math.abs($e);return`UTC${0<=$e?"-":"+"}${String(Math.floor(yt/60)).padStart(2,"0")}${String(yt%60).padStart(2,"0")}`},j=O(xe),O=O(ie),ie<xe?(fn(j,D,F,17),fn(O,D,K,17)):(fn(j,D,K,17),fn(O,D,F,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:j=>{var O=D.length;if(j>>>=0,2147483648<j)return!1;for(var F=1;4>=F;F*=2){var K=O*(1+.2/F);K=Math.min(K,j+100663296);e:{K=(Math.min(2147483648,65536*Math.ceil(Math.max(j,K)/65536))-_.buffer.byteLength+65535)/65536|0;try{_.grow(K),ae();var ie=1;break e}catch{}ie=void 0}if(ie)return!0}return!1},E:(j,O)=>{var F=0;return lg().forEach((K,ie)=>{var xe=O+F;for(ie=V[j+4*ie>>2]=xe,xe=0;xe<K.length;++xe)R[ie++]=K.charCodeAt(xe);R[ie]=0,F+=K.length+1}),0},F:(j,O)=>{var F=lg();V[j>>2]=F.length;var K=0;return F.forEach(ie=>K+=ie.length+1),V[O>>2]=K,0},e:function(j){try{var O=sn(j);return Xf(O),0}catch(F){if(typeof Bt>"u"||F.name!=="ErrnoError")throw F;return F.Pa}},p:function(j,O){try{var F=sn(j);return R[O]=F.tty?2:Es(F.mode)?3:(F.mode&61440)===40960?7:4,U[O+2>>1]=0,B[O+8>>3]=BigInt(0),B[O+16>>3]=BigInt(0),0}catch(K){if(typeof Bt>"u"||K.name!=="ErrnoError")throw K;return K.Pa}},w:function(j,O,F,K){try{e:{var ie=sn(j);j=O;for(var xe,$e=O=0;$e<F;$e++){var yt=V[j>>2],xt=V[j+4>>2];j+=8;var Tt=Ax(ie,R,yt,xt,xe);if(0>Tt){var $n=-1;break e}if(O+=Tt,Tt<xt)break;typeof xe<"u"&&(xe+=Tt)}$n=O}return V[K>>2]=$n,0}catch(jr){if(typeof Bt>"u"||jr.name!=="ErrnoError")throw jr;return jr.Pa}},D:function(j,O,F,K){O=-9007199254740992>O||9007199254740992<O?NaN:Number(O);try{if(isNaN(O))return 61;var ie=sn(j);return ag(ie,O,F),B[K>>3]=BigInt(ie.position),ie.ob&&O===0&&F===0&&(ie.ob=null),0}catch(xe){if(typeof Bt>"u"||xe.name!=="ErrnoError")throw xe;return xe.Pa}},I:function(j){try{var O=sn(j);return O.Ma?.fsync?O.Ma.fsync(O):0}catch(F){if(typeof Bt>"u"||F.name!=="ErrnoError")throw F;return F.Pa}},t:function(j,O,F,K){try{e:{var ie=sn(j);j=O;for(var xe,$e=O=0;$e<F;$e++){var yt=V[j>>2],xt=V[j+4>>2];j+=8;var Tt=rd(ie,R,yt,xt,xe);if(0>Tt){var $n=-1;break e}if(O+=Tt,Tt<xt)break;typeof xe<"u"&&(xe+=Tt)}$n=O}return V[K>>2]=$n,0}catch(jr){if(typeof Bt>"u"||jr.name!=="ErrnoError")throw jr;return jr.Pa}},k:ig},ht;(async function(){function j(F){return ht=F.exports,_=ht.M,ae(),so=ht.O,ee--,c.monitorRunDependencies?.(ee),ee==0&&W&&(F=W,W=null,F()),ht}ee++,c.monitorRunDependencies?.(ee);var O={a:ug};return c.instantiateWasm?new Promise(F=>{c.instantiateWasm(O,(K,ie)=>{j(K),F(K.exports)})}):(se??=c.locateFile?c.locateFile("sql-wasm.wasm",x):x+"sql-wasm.wasm",j((await _e(O)).instance))})(),c._sqlite3_free=j=>(c._sqlite3_free=ht.P)(j),c._sqlite3_value_text=j=>(c._sqlite3_value_text=ht.Q)(j),c._sqlite3_prepare_v2=(j,O,F,K,ie)=>(c._sqlite3_prepare_v2=ht.R)(j,O,F,K,ie),c._sqlite3_step=j=>(c._sqlite3_step=ht.S)(j),c._sqlite3_reset=j=>(c._sqlite3_reset=ht.T)(j),c._sqlite3_exec=(j,O,F,K,ie)=>(c._sqlite3_exec=ht.U)(j,O,F,K,ie),c._sqlite3_finalize=j=>(c._sqlite3_finalize=ht.V)(j),c._sqlite3_column_name=(j,O)=>(c._sqlite3_column_name=ht.W)(j,O),c._sqlite3_column_text=(j,O)=>(c._sqlite3_column_text=ht.X)(j,O),c._sqlite3_column_type=(j,O)=>(c._sqlite3_column_type=ht.Y)(j,O),c._sqlite3_errmsg=j=>(c._sqlite3_errmsg=ht.Z)(j),c._sqlite3_clear_bindings=j=>(c._sqlite3_clear_bindings=ht._)(j),c._sqlite3_value_blob=j=>(c._sqlite3_value_blob=ht.$)(j),c._sqlite3_value_bytes=j=>(c._sqlite3_value_bytes=ht.aa)(j),c._sqlite3_value_double=j=>(c._sqlite3_value_double=ht.ba)(j),c._sqlite3_value_int=j=>(c._sqlite3_value_int=ht.ca)(j),c._sqlite3_value_type=j=>(c._sqlite3_value_type=ht.da)(j),c._sqlite3_result_blob=(j,O,F,K)=>(c._sqlite3_result_blob=ht.ea)(j,O,F,K),c._sqlite3_result_double=(j,O)=>(c._sqlite3_result_double=ht.fa)(j,O),c._sqlite3_result_error=(j,O,F)=>(c._sqlite3_result_error=ht.ga)(j,O,F),c._sqlite3_result_int=(j,O)=>(c._sqlite3_result_int=ht.ha)(j,O),c._sqlite3_result_int64=(j,O)=>(c._sqlite3_result_int64=ht.ia)(j,O),c._sqlite3_result_null=j=>(c._sqlite3_result_null=ht.ja)(j),c._sqlite3_result_text=(j,O,F,K)=>(c._sqlite3_result_text=ht.ka)(j,O,F,K),c._sqlite3_aggregate_context=(j,O)=>(c._sqlite3_aggregate_context=ht.la)(j,O),c._sqlite3_column_count=j=>(c._sqlite3_column_count=ht.ma)(j),c._sqlite3_data_count=j=>(c._sqlite3_data_count=ht.na)(j),c._sqlite3_column_blob=(j,O)=>(c._sqlite3_column_blob=ht.oa)(j,O),c._sqlite3_column_bytes=(j,O)=>(c._sqlite3_column_bytes=ht.pa)(j,O),c._sqlite3_column_double=(j,O)=>(c._sqlite3_column_double=ht.qa)(j,O),c._sqlite3_bind_blob=(j,O,F,K,ie)=>(c._sqlite3_bind_blob=ht.ra)(j,O,F,K,ie),c._sqlite3_bind_double=(j,O,F)=>(c._sqlite3_bind_double=ht.sa)(j,O,F),c._sqlite3_bind_int=(j,O,F)=>(c._sqlite3_bind_int=ht.ta)(j,O,F),c._sqlite3_bind_text=(j,O,F,K,ie)=>(c._sqlite3_bind_text=ht.ua)(j,O,F,K,ie),c._sqlite3_bind_parameter_index=(j,O)=>(c._sqlite3_bind_parameter_index=ht.va)(j,O),c._sqlite3_sql=j=>(c._sqlite3_sql=ht.wa)(j),c._sqlite3_normalized_sql=j=>(c._sqlite3_normalized_sql=ht.xa)(j),c._sqlite3_changes=j=>(c._sqlite3_changes=ht.ya)(j),c._sqlite3_close_v2=j=>(c._sqlite3_close_v2=ht.za)(j),c._sqlite3_create_function_v2=(j,O,F,K,ie,xe,$e,yt,xt)=>(c._sqlite3_create_function_v2=ht.Aa)(j,O,F,K,ie,xe,$e,yt,xt),c._sqlite3_update_hook=(j,O,F)=>(c._sqlite3_update_hook=ht.Ba)(j,O,F),c._sqlite3_open=(j,O)=>(c._sqlite3_open=ht.Ca)(j,O);var Uo=c._malloc=j=>(Uo=c._malloc=ht.Da)(j),ao=c._free=j=>(ao=c._free=ht.Ea)(j);c._RegisterExtensionFunctions=j=>(c._RegisterExtensionFunctions=ht.Fa)(j);var dg=(j,O)=>(dg=ht.Ga)(j,O),Jf=(j,O)=>(Jf=ht.Ha)(j,O),Bc=j=>(Bc=ht.Ia)(j),Ia=j=>(Ia=ht.Ja)(j),ua=()=>(ua=ht.Ka)();c.stackSave=()=>ua(),c.stackRestore=j=>Bc(j),c.stackAlloc=j=>Ia(j),c.cwrap=(j,O,F,K)=>{var ie=!F||F.every(xe=>xe==="number"||xe==="boolean");return O!=="string"&&ie&&!K?c["_"+j]:(...xe)=>Gk(j,O,F,xe)},c.addFunction=ca,c.removeFunction=Ja,c.UTF8ToString=Ct,c.ALLOC_NORMAL=ad,c.allocate=id,c.allocateUTF8OnStack=Bo;function od(){function j(){if(c.calledRun=!0,!z){if(!c.noFSInit&&!Vr){var O,F;Vr=!0,K??=c.stdin,O??=c.stdout,F??=c.stderr,K?os("stdin",K):Al("/dev/tty","/dev/stdin"),O?os("stdout",null,O):Al("/dev/tty","/dev/stdout"),F?os("stderr",null,F):Al("/dev/tty1","/dev/stderr"),Lc("/dev/stdin",0),Lc("/dev/stdout",1),Lc("/dev/stderr",1)}if(ht.N(),oa=!1,c.onRuntimeInitialized?.(),c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;){var K=c.postRun.shift();he.unshift(K)}He(he)}}if(0<ee)W=od;else{if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Me();He(Te),0<ee?W=od:c.setStatus?(c.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>c.setStatus(""),1),j()},1)):j()}}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return od(),o}),n)};t.exports=r,t.exports.default=r})(WE)),WE.exports}var R3e=$3e();const LK=Ni(R3e);function O3e({query:t,schemaContext:e}){const[n,r]=T.useState(!1),[s,a]=T.useState(null),[i,o]=T.useState(null),[l,c]=T.useState(!0);T.useEffect(()=>{(async()=>{try{const x=await LK({locateFile:S=>`/${S}`});o(x),c(!1)}catch(x){console.error("Failed to initialize SQL.js:",x),c(!1)}})()},[]);const f=async()=>{if(!(!t?.trim()||!i)){r(!0),a(null);try{const v=new i.Database;e?.trim()&&v.run(e);const x=v.exec(t);if(x.length>0){const S=x[0];a({success:!0,output:"Success",parsedData:{columns:S.columns,rows:S.values}})}else a({success:!0,output:"Query executed successfully. No rows returned.",parsedData:{columns:[],rows:[]}});v.close()}catch(v){a({success:!1,error:v.message||"Execution failed"})}finally{r(!1)}}},p=v=>{navigator.clipboard.writeText(v)},m=()=>{if(!s?.parsedData)return{columns:[],rows:[]};const{columns:v,rows:x}=s.parsedData;return{columns:v||[],rows:x||[]}},{columns:y,rows:b}=m();return u.jsxs("div",{style:{marginTop:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[u.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:u.jsx("button",{onClick:f,disabled:n||!t?.trim()||l,style:{fontSize:"0.85rem",padding:"0.6rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, #3b82f6, #2563eb)",color:"white",border:"none",borderRadius:"8px",cursor:n||!t?.trim()||l?"not-allowed":"pointer",opacity:n||!t?.trim()||l?.6:1,fontWeight:500},children:l?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"spinner-small"}),"Initializing..."]}):n?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"spinner-small"}),"Running..."]}):u.jsxs(u.Fragment,{children:[u.jsx(sW,{size:16}),"Run & Visualize"]})})}),!l&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.75rem",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"0.4rem 0.75rem",borderRadius:"20px",fontWeight:600,border:"1px solid rgba(16, 185, 129, 0.2)"},children:[u.jsx(Eu,{size:12}),"WASM Sandbox Active"]})]}),s&&u.jsxs("div",{style:{background:"var(--bg-dark)",borderRadius:"12px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",borderBottom:"1px solid var(--border-color)",background:"var(--bg-card)"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:s.success?u.jsxs(u.Fragment,{children:[u.jsx(an,{size:16,color:"#10b981"}),u.jsx("span",{style:{fontWeight:500,color:"#10b981"},children:"Results"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Kr,{size:16,color:"#ef4444"}),u.jsx("span",{style:{fontWeight:500,color:"#ef4444"},children:"Error"})]})}),s.success&&b.length>0&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[b.length," row(s) returned"]}),u.jsxs("button",{onClick:()=>p(s.output||""),style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.3rem 0.6rem",fontSize:"0.75rem",background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"4px",color:"var(--text-muted)",cursor:"pointer"},children:[u.jsx(tW,{size:12})," Copy"]})]})]}),u.jsx("div",{style:{padding:"1rem"},children:s.success?u.jsx(u.Fragment,{children:y.length>0&&b.length>0?u.jsx("div",{style:{overflowX:"auto",maxHeight:"350px"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[u.jsx("thead",{children:u.jsx("tr",{style:{background:"rgba(59, 130, 246, 0.1)",position:"sticky",top:0},children:y.map((v,x)=>u.jsx("th",{style:{padding:"0.75rem 1rem",textAlign:"left",borderBottom:"2px solid var(--border-color)",fontWeight:600,color:"#3b82f6",whiteSpace:"nowrap"},children:v},x))})}),u.jsx("tbody",{children:b.map((v,x)=>u.jsx("tr",{style:{background:x%2===0?"transparent":"rgba(255,255,255,0.02)"},children:v.map((S,C)=>u.jsx("td",{style:{padding:"0.6rem 1rem",borderBottom:"1px solid var(--border-color)",color:S===null||S===""?"var(--text-muted)":"var(--text-main)"},children:S===null?"NULL":S},C))},x))})]})}):u.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"var(--text-muted)",fontStyle:"italic"},children:"Query executed successfully. No rows returned."})}):u.jsx("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.2)"},children:u.jsx("pre",{style:{margin:0,fontSize:"0.85rem",color:"#f87171",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},children:s.error||s.output||"Unknown error"})})})]})]})}function _3e(t){if(!t||!t.trim())return{tables:[]};const e=[],n=/CREATE\s+TABLE\s+(?:IF\s+NOT\s+EXISTS\s+)?[`"']?(\w+)[`"']?\s*\(([\s\S]*?)\)\s*;/gi;let r;for(;(r=n.exec(t))!==null;){const s=r[1],a=r[2],i=[],o=a.match(/PRIMARY\s+KEY\s*\(([^)]+)\)/i),l=o?o[1].split(",").map(y=>y.trim().replace(/[`"']/g,"").toLowerCase()):[],c=/FOREIGN\s+KEY\s*\(\s*[`"']?(\w+)[`"']?\s*\)\s*REFERENCES\s+[`"']?(\w+)[`"']?\s*\(\s*[`"']?(\w+)[`"']?\s*\)/gi,f={};let p;for(;(p=c.exec(a))!==null;)f[p[1].toLowerCase()]={table:p[2],column:p[3]};const m=a.split(`
`).map(y=>y.trim().replace(/,\s*$/,"")).filter(y=>y.length>0);for(const y of m){if(/^\s*(PRIMARY\s+KEY|FOREIGN\s+KEY|UNIQUE|CHECK|CONSTRAINT|INDEX|KEY\s)/i.test(y))continue;const b=y.match(/^[`"']?(\w+)[`"']?\s+(\w+(?:\s*\([^)]*\))?)\s*(.*)?$/i);if(!b)continue;const v=b[1],x=b[2],S=b[3]||"",C=l.includes(v.toLowerCase())||/PRIMARY\s+KEY/i.test(S),E=f.hasOwnProperty(v.toLowerCase());i.push({name:v,type:x,isPrimaryKey:C,isForeignKey:E,isNotNull:/NOT\s+NULL/i.test(S),isAutoIncrement:/AUTO_INCREMENT|AUTOINCREMENT/i.test(S),defaultValue:S.match(/DEFAULT\s+([^\s,]+)/i)?.[1]||null,references:E?f[v.toLowerCase()]:null})}i.length>0&&e.push({name:s,columns:i})}return{tables:e}}function D3e(t){const e=(t||"").toLowerCase();return e.includes("int")||e.includes("decimal")||e.includes("float")||e.includes("double")||e.includes("numeric")?u.jsx(mP,{size:12,color:"#f59e0b"}):e.includes("char")||e.includes("text")||e.includes("varchar")?u.jsx(Kse,{size:12,color:"#3b82f6"}):e.includes("date")||e.includes("time")||e.includes("timestamp")?u.jsx(IA,{size:12,color:"#8b5cf6"}):e.includes("bool")?u.jsx(Use,{size:12,color:"#10b981"}):u.jsx(mP,{size:12,color:"#64748b"})}function z3e({schema:t}){const[e,n]=T.useState(null),[r,s]=T.useState({});T.useEffect(()=>{if(t){const o=_3e(t);if(n(o),o.tables){const l={};o.tables.forEach(c=>l[c.name]=!0),s(l)}}},[t]);const a=o=>{s(l=>({...l,[o]:!l[o]}))};if(!e||!e.tables||e.tables.length===0)return u.jsxs("div",{className:"glass",style:{padding:"2rem",textAlign:"center",borderRadius:"16px"},children:[u.jsx(Eu,{size:32,style:{opacity:.3,marginBottom:"1rem"}}),u.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem"},children:"No schema detected for this problem."})]});const i=[];return e.tables.forEach(o=>{o.columns.forEach(l=>{l.isForeignKey&&l.references&&i.push({from:o.name,fromCol:l.name,to:l.references.table,toCol:l.references.column})})}),u.jsxs("div",{className:"sql-visualizer animate-fadeIn",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[u.jsx("div",{style:{padding:"0.5rem",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",borderRadius:"10px",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:u.jsx(Eu,{size:20,color:"white"})}),u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Database Map"}),u.jsxs("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:["Interactive Entity Relationship View  ",e.tables.length," table(s) detected"]})]}),u.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.7rem",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"0.35rem 0.7rem",borderRadius:"20px",fontWeight:600,border:"1px solid rgba(16, 185, 129, 0.2)"},children:" Local Parse"})]}),i.length>0&&u.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.08)",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.15)"},children:[u.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"#a78bfa",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Relationships"}),i.map((o,l)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem",marginBottom:"0.25rem"},children:[u.jsx("span",{style:{fontWeight:600,color:"#3b82f6"},children:o.from}),u.jsxs("span",{style:{color:"var(--text-muted)"},children:[".",o.fromCol]}),u.jsx("span",{style:{color:"#f59e0b"},children:""}),u.jsx("span",{style:{fontWeight:600,color:"#10b981"},children:o.to}),u.jsxs("span",{style:{color:"var(--text-muted)"},children:[".",o.toCol]})]},l))]}),u.jsx("div",{className:"er-diagram-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.5rem"},children:e.tables.map(o=>u.jsxs("div",{className:"glass table-card",style:{borderRadius:"16px",overflow:"hidden",border:"1px solid var(--glass-border)",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",background:"var(--glass-bg)",transition:"all 0.3s ease"},children:[u.jsxs("div",{onClick:()=>a(o.name),style:{padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderBottom:r[o.name]?"1px solid var(--glass-border)":"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx(sW,{size:18,color:"#3b82f6"}),u.jsx("span",{style:{fontWeight:700,fontSize:"1rem",letterSpacing:"-0.01em"},children:o.name}),u.jsxs("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)",background:"rgba(255,255,255,0.05)",padding:"0.15rem 0.5rem",borderRadius:"10px"},children:[o.columns.length," cols"]})]}),r[o.name]?u.jsx(ZU,{size:16}):u.jsx(YU,{size:16})]}),r[o.name]&&u.jsx("div",{className:"table-columns",style:{padding:"0.5rem 0"},children:o.columns.map((l,c)=>u.jsxs("div",{className:"column-row",style:{padding:"0.6rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"0.85rem",borderBottom:c===o.columns.length-1?"none":"1px solid rgba(255,255,255,0.03)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.isPrimaryKey?u.jsx(Zre,{size:14,color:"#f59e0b",title:"Primary Key"}):l.isForeignKey?u.jsx(rse,{size:14,color:"#10b981",title:`FK  ${l.references?.table}`}):D3e(l.type),u.jsx("span",{style:{fontWeight:l.isPrimaryKey||l.isForeignKey?600:400},children:l.name}),l.isPrimaryKey&&u.jsx("span",{style:{fontSize:"0.6rem",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",padding:"0.1rem 0.4rem",borderRadius:"4px",fontWeight:700},children:"PK"}),l.isForeignKey&&u.jsx("span",{style:{fontSize:"0.6rem",background:"rgba(16, 185, 129, 0.15)",color:"#10b981",padding:"0.1rem 0.4rem",borderRadius:"4px",fontWeight:700},children:"FK"}),l.isNotNull&&u.jsx("span",{style:{fontSize:"0.6rem",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",padding:"0.1rem 0.4rem",borderRadius:"4px",fontWeight:700},children:"NN"})]}),u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.75rem",fontFamily:"monospace"},children:l.type?.toLowerCase()})]},c))})]},o.name))}),u.jsx("style",{children:`
                .table-card:hover {
                    transform: translateY(-5px);
                    border-color: var(--primary);
                    box-shadow: 0 15px 35px rgba(59, 130, 246, 0.15);
                }
                .column-row:hover {
                    background: rgba(255, 255, 255, 0.05);
                }
                .sql-visualizer {
                    padding: 1.5rem;
                    background: rgba(15, 23, 42, 0.2);
                    border-radius: 20px;
                    border: 1px solid var(--border-color);
                }
            `})]})}function P3e(t){if(!t||!t.trim())return[];const e=t.trim(),n=[],r=e.replace(/\s+/g," "),s=r.match(/FROM\s+(.+?)(?:\s+WHERE|\s+GROUP\s+BY|\s+HAVING|\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),a=r.match(/WHERE\s+(.+?)(?:\s+GROUP\s+BY|\s+HAVING|\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),i=r.match(/GROUP\s+BY\s+(.+?)(?:\s+HAVING|\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),o=r.match(/HAVING\s+(.+?)(?:\s+ORDER\s+BY|\s+LIMIT|\s*;?\s*$)/i),l=r.match(/ORDER\s+BY\s+(.+?)(?:\s+LIMIT|\s*;?\s*$)/i),c=r.match(/LIMIT\s+(\d+)/i),f=s?s[1].trim():null;if(!f)return n.push({stepName:"Execute",description:"Run the full query",query:e}),n;if(n.push({stepName:"1. FROM (Base Data)",description:`Load all rows from: ${f}`,query:`SELECT * FROM ${f};`}),a&&n.push({stepName:"2. WHERE (Filter)",description:`Apply filter: ${a[1].trim()}`,query:`SELECT * FROM ${f} WHERE ${a[1].trim()};`}),i){const b=i[1].trim();let v=`SELECT ${b}, COUNT(*) as count FROM ${f}`;a&&(v+=` WHERE ${a[1].trim()}`),v+=` GROUP BY ${b}`,o&&(v+=` HAVING ${o[1].trim()}`),v+=";",n.push({stepName:"3. GROUP BY (Aggregate)",description:`Group rows by: ${b}${o?` with HAVING: ${o[1].trim()}`:""}`,query:v})}let p=r.replace(/\s*ORDER\s+BY\s+.+?(?=\s+LIMIT|\s*;?\s*$)/i,"").replace(/\s*LIMIT\s+\d+/i,"").replace(/;?\s*$/,";");p!==e.replace(/;?\s*$/,";")&&n.push({stepName:`${i?"4":a?"3":"2"}. SELECT (Projection)`,description:"Apply column selection and expressions",query:p}),(l||c)&&n.push({stepName:`${n.length+1}. Final Result`,description:`${l?`Sort by: ${l[1].trim()}`:""}${c?` | Limit: ${c[1]}`:""}`,query:e.replace(/;?\s*$/,";")});const m=n[n.length-1]?.query?.replace(/;\s*$/,"").trim().toLowerCase(),y=e.replace(/;\s*$/,"").trim().toLowerCase();return m!==y&&n.push({stepName:`${n.length+1}. Final Result`,description:"Complete query output",query:e.replace(/;?\s*$/,";")}),n}function L3e({query:t,schema:e}){const[n,r]=T.useState([]),[s,a]=T.useState(0),[i,o]=T.useState(!1),[l,c]=T.useState({}),[f,p]=T.useState(null),[m,y]=T.useState(null),[b,v]=T.useState(!1);T.useEffect(()=>{(async()=>{try{const I=await LK({locateFile:$=>`/${$}`});y(I),v(!0)}catch(I){console.error("Failed to init SQL.js:",I)}})()},[]);const x=(k,I)=>{try{const $=k.exec(I);return $.length>0?{columns:$[0].columns,rows:$[0].values}:{columns:[],rows:[]}}catch($){return{error:$.message}}},S=()=>{if(!(!t||!m)){o(!0),p(null),c({});try{const k=P3e(t);if(k.length===0){p("Could not break down the query. Make sure it is a valid SELECT statement."),o(!1);return}r(k),a(0);const I=new m.Database;e?.trim()&&I.run(e);const $={};for(let _=0;_<k.length;_++)$[_]=x(I,k[_].query);c($),I.close()}catch(k){p(k.message||"Failed to analyze query.")}finally{o(!1)}}},C=()=>{s<n.length-1&&a(s+1)},E=()=>{s>0&&a(s-1)};return u.jsxs("div",{className:"sql-debugger-panel animate-fadeIn",children:[u.jsxs("div",{className:"debugger-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.25rem",borderBottom:"1px solid var(--border-color)",background:"rgba(59, 130, 246, 0.05)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx(af,{size:20,color:"#3b82f6"}),u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:700},children:"Step-Wise Debugger"}),u.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:"Trace query logic layer by layer"})]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[b&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",fontSize:"0.7rem",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"0.35rem 0.7rem",borderRadius:"20px",fontWeight:600,border:"1px solid rgba(16, 185, 129, 0.2)"},children:[u.jsx(Eu,{size:12})," WASM"]}),u.jsxs("button",{onClick:S,disabled:i||!b,style:{padding:"0.6rem 1.25rem",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,cursor:i||!b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",opacity:i||!b?.6:1},children:[u.jsx(Ip,{size:16})," ",n.length>0?"Restart Trace":"Trace Query"]})]})]}),f&&u.jsxs("div",{style:{padding:"1rem 1.25rem",background:"rgba(239, 68, 68, 0.1)",borderBottom:"1px solid rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(pP,{size:16,color:"#ef4444"}),u.jsx("span",{style:{fontSize:"0.85rem",color:"#f87171"},children:f})]}),u.jsxs("div",{className:"debugger-content",style:{display:"grid",gridTemplateColumns:"300px 1fr",minHeight:"400px"},children:[u.jsxs("div",{className:"steps-sidebar",style:{borderRight:"1px solid var(--border-color)",background:"rgba(0,0,0,0.1)"},children:[n.map((k,I)=>u.jsxs("div",{onClick:()=>a(I),style:{padding:"1rem 1.25rem",borderBottom:"1px solid rgba(255,255,255,0.03)",cursor:"pointer",background:s===I?"rgba(59, 130, 246, 0.15)":"transparent",position:"relative",display:"flex",alignItems:"flex-start",gap:"0.75rem",transition:"background 0.2s"},children:[u.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:l[I]?.error?"#ef4444":I<=s?"#10b981":"var(--bg-dark)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:800,color:"white",marginTop:"2px",flexShrink:0},children:l[I]?.error?"!":I<s?u.jsx(Ore,{size:14}):I+1}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:600,fontSize:"0.85rem"},children:k.stepName}),u.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"2px"},children:k.description}),l[I]&&!l[I].error&&u.jsxs("div",{style:{fontSize:"0.65rem",color:"#10b981",marginTop:"3px"},children:[l[I].rows.length," row(s)"]})]}),s===I&&u.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",width:"3px",height:"60%",background:"#3b82f6",borderRadius:"3px 0 0 3px"}})]},I)),n.length===0&&u.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)",fontSize:"0.85rem"},children:[u.jsx(Tu,{size:32,style:{marginBottom:"1rem",opacity:.2}}),u.jsx("p",{children:'Click "Trace Query" to analyze SQL logic steps.'})]})]}),u.jsx("div",{className:"result-area",style:{display:"flex",flexDirection:"column"},children:n.length>0?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"step-query-info",style:{padding:"1rem 1.5rem",background:"rgba(0,0,0,0.2)"},children:[u.jsx("div",{style:{fontSize:"0.7rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#10b981",fontWeight:700,marginBottom:"0.5rem"},children:"Current Operation Query"}),u.jsx("div",{style:{background:"#020617",padding:"0.75rem 1rem",borderRadius:"8px",fontFamily:"monospace",fontSize:"0.85rem",color:"#cbd5e1",border:"1px solid rgba(255,255,255,0.05)",whiteSpace:"pre-wrap"},children:n[s]?.query})]}),u.jsx("div",{className:"step-data-preview",style:{flex:1,padding:"1.5rem",overflow:"auto"},children:l[s]?.error?u.jsx("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.2)"},children:u.jsx("pre",{style:{margin:0,fontSize:"0.85rem",color:"#f87171",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:l[s].error})}):l[s]?u.jsx("div",{className:"debugger-table-container",children:l[s].columns.length>0&&l[s].rows.length>0?u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[u.jsx("thead",{children:u.jsx("tr",{style:{background:"rgba(255,255,255,0.05)"},children:l[s].columns.map((k,I)=>u.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid var(--border-color)",color:"#3b82f6",fontWeight:600},children:k},I))})}),u.jsx("tbody",{children:l[s].rows.map((k,I)=>u.jsx("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.03)"},children:k.map(($,_)=>u.jsx("td",{style:{padding:"0.75rem",color:$===null?"var(--text-muted)":"var(--text-main)"},children:$===null?"NULL":String($)},_))},I))})]}):u.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"Query executed successfully. No rows returned."})}):u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",opacity:.5},children:[u.jsx(pP,{size:32}),u.jsx("p",{style:{marginTop:"1rem"},children:"No data for this step."})]})}),u.jsxs("div",{className:"debugger-footer",style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:["Step ",s+1," of ",n.length]}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[s>0&&u.jsx("button",{onClick:E,style:{padding:"0.5rem 1.25rem",background:"rgba(255,255,255,0.05)",color:"var(--text-main)",border:"1px solid var(--border-color)",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Previous"}),s<n.length-1&&u.jsxs("button",{onClick:C,style:{padding:"0.5rem 1.25rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Next Step ",u.jsx(Dse,{size:16})]})]})]})]}):u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,padding:"3rem",textAlign:"center"},children:[u.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"20px",background:"rgba(59, 130, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1.5rem"},children:u.jsx(af,{size:32,color:"#3b82f6"})}),u.jsx("h4",{style:{margin:"0 0 0.5rem 0"},children:"Ready to Debug"}),u.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-muted)",maxWidth:"400px"},children:"The debugger will break your SQL query into physical execution steps so you can see how data flows through JOINs and WHERE clauses."})]})})]}),u.jsx("style",{children:`
                .sql-debugger-panel {
                    border-radius: 20px;
                    overflow: hidden;
                    background: var(--bg-card);
                    border: 1px solid var(--border-color);
                    box-shadow: var(--glass-shadow);
                }
                .debugger-table-container {
                    border-radius: 12px;
                    border: 1px solid rgba(255,255,255,0.05);
                    overflow: hidden;
                    background: #020617;
                }
            `})]})}const Er="https://mentor-hub-backend-tkil.onrender.com/api",sy={Python:{monacoLang:"python",ext:".py",defaultCode:`# Write your Python code here

def solution():
    pass

# Call your solution
solution()`},JavaScript:{monacoLang:"javascript",ext:".js",defaultCode:`// Write your JavaScript code here

function solution() {
    
}

// Call your solution
solution();`},Java:{monacoLang:"java",ext:".java",defaultCode:`// Write your Java code here

public class Solution {
    public static void main(String[] args) {
        // Your code here
    }
}`},C:{monacoLang:"c",ext:".c",defaultCode:`// Write your C code here
#include <stdio.h>

int main() {
    // Your code here
    return 0;
}`},"C++":{monacoLang:"cpp",ext:".cpp",defaultCode:`// Write your C++ code here
#include <iostream>
using namespace std;

int main() {
    // Your code here
    return 0;
}`},SQL:{monacoLang:"sql",ext:".sql",defaultCode:`-- Write your SQL query here
SELECT * FROM table_name;`}};function M3e(){const{user:t}=Zm(),e=Ao(),[n,r]=T.useState("Dashboard"),[s,a]=T.useState("Welcome back!"),[i,o]=T.useState(null);T.useEffect(()=>{t?.id&&Ve.get(`${Er}/analytics/student/${t.id}`).then(c=>{c.data.mentorInfo&&o(c.data.mentorInfo)}).catch(c=>console.error("Error fetching mentor info:",c))},[t?.id]),T.useEffect(()=>{switch(e.pathname.split("/").pop()){case"tasks":r("ML Tasks"),a("Machine Learning tasks to complete");break;case"assignments":r("Coding Problems"),a("Solve coding and SQL problems");break;case"aptitude":r("Aptitude Tests"),a("Test your reasoning and analytical skills");break;case"global-tests":r("Global Complete Tests"),a("Aptitude, Verbal, Logical, Coding, SQL");break;case"submissions":r("My Submissions"),a("View your submission history and reports");break;default:r("Dashboard"),a(`Welcome back, ${t?.name}!`)}},[e,t]);const l=[{path:"/student",label:"Dashboard",icon:u.jsx(M$,{size:20})},{path:"/student/tasks",label:"ML Tasks",icon:u.jsx(al,{size:20})},{path:"/student/assignments",label:"Coding Problems",icon:u.jsx(Yn,{size:20})},{path:"/student/aptitude",label:"Aptitude Tests",icon:u.jsx(Zr,{size:20})},{path:"/student/global-tests",label:"Global Complete Tests",icon:u.jsx(af,{size:20})},{path:"/student/submissions",label:"My Submissions",icon:u.jsx(kl,{size:20})}];return u.jsx(W$,{navItems:l,title:n,subtitle:s,mentorInfo:i,children:u.jsxs(AS,{children:[u.jsx(On,{path:"/",element:u.jsx(F3e,{user:t})}),u.jsx(On,{path:"/tasks",element:u.jsx(B3e,{user:t})}),u.jsx(On,{path:"/assignments",element:u.jsx(W3e,{user:t})}),u.jsx(On,{path:"/aptitude",element:u.jsx(K3e,{user:t})}),u.jsx(On,{path:"/global-tests",element:u.jsx(H3e,{user:t})}),u.jsx(On,{path:"/submissions",element:u.jsx(q3e,{user:t})})]})})}function F3e({user:t}){const[e,n]=T.useState(null),[r,s]=T.useState(!0);T.useEffect(()=>{Ve.get(`${Er}/analytics/student/${t.id}`).then(i=>{n(i.data),s(!1)}).catch(i=>{console.error(i),s(!1)})},[t.id]);const a=i=>{const o=new Date(i),c=new Date-o,f=Math.floor(c/6e4),p=Math.floor(c/36e5),m=Math.floor(c/864e5);return f<1?"Just now":f<60?`${f} min ago`:p<24?`${p} hour${p>1?"s":""} ago`:m<7?`${m} day${m>1?"s":""} ago`:o.toLocaleDateString()};return r?u.jsx("div",{className:"loading-spinner"}):e?u.jsxs("div",{className:"dashboard-container animate-fadeIn",children:[u.jsxs("div",{className:"dashboard-stats-grid",children:[u.jsx("div",{className:"dashboard-stat-card stat-card-blue",children:u.jsxs("div",{className:"stat-card-inner",children:[u.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #1e40af, #3b82f6)"},children:u.jsx(al,{size:24,color:"#fff"})}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-number",children:e.completedTasks}),u.jsx("div",{className:"stat-label-text",children:"Tasks Completed"})]})]})}),u.jsx("div",{className:"dashboard-stat-card stat-card-green",children:u.jsxs("div",{className:"stat-card-inner",children:[u.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #047857, #10b981)"},children:u.jsx(Yn,{size:24,color:"#fff"})}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-number",children:e.completedProblems}),u.jsx("div",{className:"stat-label-text",children:"Problems Solved"})]})]})}),u.jsx("div",{className:"dashboard-stat-card stat-card-pink",children:u.jsxs("div",{className:"stat-card-inner",children:[u.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #be185d, #ec4899)"},children:u.jsx(mi,{size:24,color:"#fff"})}),u.jsxs("div",{className:"stat-content",children:[u.jsxs("div",{className:"stat-number",children:[e.avgTaskScore,"%"]}),u.jsx("div",{className:"stat-label-text",children:"Avg Task Score"})]})]})}),u.jsx("div",{className:"dashboard-stat-card stat-card-emerald",children:u.jsxs("div",{className:"stat-card-inner",children:[u.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #059669, #34d399)"},children:u.jsx(Xr,{size:24,color:"#fff"})}),u.jsxs("div",{className:"stat-content",children:[u.jsxs("div",{className:"stat-number",children:[e.avgProblemScore,"%"]}),u.jsx("div",{className:"stat-label-text",children:"Avg Problem Score"})]})]})}),u.jsx("div",{className:"dashboard-stat-card stat-card-purple",children:u.jsxs("div",{className:"stat-card-inner",children:[u.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #6d28d9, #8b5cf6)"},children:u.jsx(Zr,{size:24,color:"#fff"})}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-number",children:e.completedAptitude}),u.jsx("div",{className:"stat-label-text",children:"Aptitude Taken"})]})]})})]}),u.jsxs("div",{className:"dashboard-main-grid",children:[u.jsxs("div",{className:"dashboard-panel",children:[u.jsxs("h3",{className:"panel-title",children:[u.jsx(z$,{size:18,color:"#8b5cf6"})," My Skill Profile"]}),u.jsxs("div",{className:"skill-progress-container",children:[u.jsxs("div",{className:"skill-item",children:[u.jsxs("div",{className:"skill-header",children:[u.jsx("span",{className:"skill-name",children:"ML Tasks"}),u.jsxs("span",{className:"skill-count",style:{color:"#3b82f6"},children:[e.completedTasks,"/",e.totalTasks]})]}),u.jsx("div",{className:"skill-bar",style:{background:"rgba(59, 130, 246, 0.15)"},children:u.jsx("div",{className:"skill-fill",style:{width:`${e.totalTasks>0?e.completedTasks/e.totalTasks*100:0}%`,background:"linear-gradient(90deg, #2563eb, #3b82f6)"}})})]}),u.jsxs("div",{className:"skill-item",children:[u.jsxs("div",{className:"skill-header",children:[u.jsx("span",{className:"skill-name",children:"Coding Problems"}),u.jsxs("span",{className:"skill-count",style:{color:"#10b981"},children:[e.completedProblems,"/",e.totalProblems]})]}),u.jsx("div",{className:"skill-bar",style:{background:"rgba(16, 185, 129, 0.15)"},children:u.jsx("div",{className:"skill-fill",style:{width:`${e.totalProblems>0?e.completedProblems/e.totalProblems*100:0}%`,background:"linear-gradient(90deg, #059669, #10b981)"}})})]}),u.jsxs("div",{className:"skill-item",children:[u.jsxs("div",{className:"skill-header",children:[u.jsx("span",{className:"skill-name",children:"Aptitude Tests"}),u.jsxs("span",{className:"skill-count",style:{color:"#8b5cf6"},children:[e.completedAptitude,"/",e.totalAptitude]})]}),u.jsx("div",{className:"skill-bar",style:{background:"rgba(139, 92, 246, 0.15)"},children:u.jsx("div",{className:"skill-fill",style:{width:`${e.totalAptitude>0?e.completedAptitude/e.totalAptitude*100:0}%`,background:"linear-gradient(90deg, #7c3aed, #8b5cf6)"}})})]})]})]}),u.jsxs("div",{className:"dashboard-panel",children:[u.jsxs("div",{className:"panel-header",children:[u.jsxs("h3",{className:"panel-title",style:{margin:0},children:[u.jsx(vi,{size:18,color:"#3b82f6"})," Recent Submissions"]}),u.jsx("button",{onClick:()=>window.location.href="/student/submissions",className:"view-all-btn",children:"View All "})]}),u.jsx("div",{className:"submissions-list",children:e.recentSubmissions&&e.recentSubmissions.length>0?e.recentSubmissions.map((i,o)=>u.jsxs("div",{className:"submission-item",children:[u.jsx("div",{className:"submission-icon",children:u.jsx(Yn,{size:20,color:"#3b82f6"})}),u.jsxs("div",{className:"submission-info",children:[u.jsx("div",{className:"submission-title",children:i.title}),u.jsxs("div",{className:"submission-meta",children:[a(i.time),"  Score: ",i.score,"/100"]})]}),u.jsx("span",{className:`submission-status ${i.status}`,children:i.status})]},o)):u.jsxs("div",{className:"empty-state-small",children:[u.jsx(Yn,{size:32,color:"var(--text-muted)"}),"No submissions yet"]})})]}),u.jsxs("div",{className:"dashboard-panel",children:[u.jsxs("h3",{className:"panel-title",children:[u.jsx(es,{size:18,color:"#fbbf24"})," Leaderboard"]}),u.jsx("div",{className:"leaderboard-list",children:e.leaderboard&&e.leaderboard.length>0?e.leaderboard.slice(0,5).map((i,o)=>u.jsxs("div",{className:`leaderboard-item ${i.studentId===t.id?"current-user":""}`,children:[u.jsx("div",{className:`rank-badge rank-${o+1}`,children:i.rank}),u.jsxs("div",{className:"leaderboard-info",children:[u.jsx("div",{className:"leaderboard-name",children:i.name}),u.jsxs("div",{className:"leaderboard-stats",children:[i.taskCount," tasks  ",i.codeCount," code  ",i.aptitudeCount," aptitude"]})]}),u.jsxs("div",{className:`leaderboard-score rank-${o+1}-score`,children:[i.avgScore,"%",u.jsx("span",{className:"score-label",children:"Avg Score"})]})]},o)):u.jsxs("div",{className:"empty-state-small",children:[u.jsx(es,{size:32,color:"var(--text-muted)"}),"No leaderboard data"]})})]})]})]}):u.jsx("div",{children:"Error loading stats"})}function B3e({user:t}){const[e,n]=T.useState([]),[r,s]=T.useState(!0),[a,i]=T.useState(null);return T.useEffect(()=>{Ve.get(`${Er}/students/${t.id}/tasks`).then(o=>{n(o.data),s(!1)}).catch(o=>s(!1))},[t.id]),r?u.jsx("div",{className:"loading-spinner"}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"cards-grid animate-slideUp",children:e.length===0?u.jsxs("div",{className:"empty-state",style:{gridColumn:"1 / -1"},children:[u.jsx("div",{className:"empty-state-icon",children:u.jsx(al,{size:40})}),u.jsx("h3",{children:"No ML Tasks Assigned"}),u.jsx("p",{children:"Your mentor hasn't assigned any tasks yet."})]}):e.map(o=>u.jsxs("div",{className:"item-card glass",children:[u.jsxs("div",{className:"item-card-header",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{padding:"10px",background:"var(--primary-alpha)",borderRadius:"10px"},children:u.jsx(al,{size:20,color:"var(--primary)"})}),u.jsxs("div",{children:[u.jsx("span",{style:{fontSize:"0.65rem",color:"var(--secondary)",fontWeight:700,textTransform:"uppercase"},children:"ML TASK"}),u.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:o.title})]})]}),u.jsx("span",{className:`difficulty-badge ${o.difficulty?.toLowerCase()}`,children:o.difficulty})]}),u.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.6",marginBottom:"1rem"},children:o.description}),o.requirements&&u.jsxs("div",{style:{background:"var(--bg-dark)",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[u.jsx("strong",{style:{color:"var(--primary)"},children:"Requirements:"}),u.jsx("br",{}),o.requirements.split(`
`).slice(0,2).join(`
`),"..."]}),u.jsxs("div",{className:"item-card-footer",style:{paddingTop:"1rem",marginTop:"auto"},children:[u.jsx("span",{className:`status-badge ${o.status||"live"}`,children:o.status||"Active"}),u.jsxs("button",{onClick:()=>i(o),className:"btn-create-new",style:{padding:"0.5rem 1rem",fontSize:"0.85rem"},children:[u.jsx($y,{size:16})," Submit Task"]})]})]},o.id))}),a&&u.jsx(U3e,{task:a,user:t,onClose:()=>i(null)})]})}function U3e({task:t,user:e,onClose:n}){const[r,s]=T.useState(null),[a,i]=T.useState(!1),[o,l]=T.useState(null),c=p=>{const m=p.target.files[0];m&&s(m)},f=async()=>{if(!r)return;i(!0);const p=new FileReader;p.onload=async m=>{try{const y=await Ve.post(`${Er}/submissions`,{studentId:e.id,taskId:t.id,language:"Python",code:m.target.result,submissionType:"file",fileName:r.name});l(y.data)}catch(y){console.error(y),l({status:"rejected",score:0,feedback:"Submission failed."})}finally{i(!1)}},p.readAsText(r)};return u.jsx("div",{className:"modal-overlay",onClick:n,children:u.jsxs("div",{className:"modal-content",onClick:p=>p.stopPropagation(),style:{maxWidth:"600px"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title-with-icon",children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, var(--secondary), var(--primary))",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx($y,{size:20,color:"white"})}),u.jsxs("h2",{children:["Submit: ",t.title]})]}),u.jsx("button",{onClick:n,className:"modal-close",children:u.jsx(Kr,{size:20})})]}),u.jsx("div",{className:"modal-body",children:o?u.jsxs("div",{style:{textAlign:"center",padding:"2rem 0"},children:[u.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:o.status==="accepted"?"var(--success-alpha)":"var(--danger-alpha)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:o.status==="accepted"?u.jsx(an,{size:40,color:"var(--success)"}):u.jsx(Kr,{size:40,color:"var(--danger)"})}),u.jsx("h3",{style:{marginBottom:"0.5rem",color:o.status==="accepted"?"var(--success)":"var(--danger)"},children:o.status==="accepted"?"Submission Accepted!":"Submission Rejected"}),u.jsxs("p",{style:{fontSize:"2rem",fontWeight:800,margin:"1rem 0"},children:["Score: ",o.score,"/100"]}),u.jsx("p",{style:{color:"var(--text-muted)",maxWidth:"400px",margin:"0 auto"},children:o.feedback}),u.jsx("button",{className:"btn-create-new",onClick:n,style:{marginTop:"2rem"},children:"Close"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Upload Your Solution File"}),u.jsxs("div",{style:{border:"2px dashed var(--border-color)",borderRadius:"1rem",padding:"2rem",textAlign:"center",background:"var(--bg-dark)",cursor:"pointer",transition:"all 0.3s"},onClick:()=>document.getElementById("file-input").click(),children:[u.jsx("input",{type:"file",id:"file-input",onChange:c,accept:".py,.ipynb,.csv,.pkl,.h5,.zip",style:{display:"none"}}),u.jsx($y,{size:40,style:{color:"var(--secondary)",marginBottom:"1rem"}}),r?u.jsxs("div",{children:[u.jsx("p",{style:{fontWeight:600,color:"var(--success)"},children:r.name}),u.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:[(r.size/1024).toFixed(2)," KB"]})]}):u.jsxs("div",{children:[u.jsx("p",{style:{fontWeight:600},children:"Click to upload or drag and drop"}),u.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:"Supports: .py, .ipynb, .csv, .pkl, .h5, .zip"})]})]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"btn-reset",onClick:n,children:"Cancel"}),u.jsx("button",{type:"button",className:"btn-create-new",onClick:f,disabled:!r||a,children:a?"Submitting...":u.jsxs(u.Fragment,{children:[u.jsx(kl,{size:16})," Submit for Evaluation"]})})]})]})})]})})}function W3e({user:t}){const[e,n]=T.useState([]),[r,s]=T.useState(!0),[a,i]=T.useState(null),[o,l]=T.useState(!1),[c,f]=T.useState("coding");T.useEffect(()=>{Ve.get(`${Er}/students/${t.id}/problems`).then(x=>{n(x.data),s(!1)}).catch(x=>s(!1))},[t.id]);const p=x=>{i(x),l(x.proctoring?.enabled===!0)},m=()=>{i(null),l(!1)},y=e.filter(x=>x.language!=="SQL"&&x.type!=="SQL"),b=e.filter(x=>x.language==="SQL"||x.type==="SQL");if(r)return u.jsx("div",{className:"loading-spinner"});const v=x=>u.jsxs("div",{className:"item-card glass",children:[u.jsxs("div",{className:"item-card-header",children:[u.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[u.jsx("span",{style:{fontSize:"0.65rem",padding:"3px 8px",borderRadius:"4px",background:"var(--primary-alpha)",color:"var(--primary)",fontWeight:700},children:x.type?.toUpperCase()}),u.jsx("span",{className:`status-badge ${x.status||"live"}`,style:{fontSize:"0.65rem"},children:x.status||"Active"}),x.proctoring?.enabled&&u.jsxs("span",{style:{fontSize:"0.6rem",padding:"3px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",fontWeight:700,display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx(of,{size:10})," PROCTORED"]})]}),u.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",background:"var(--bg-dark)",padding:"2px 8px",borderRadius:"4px"},children:x.language})]}),u.jsx("h3",{style:{margin:"0.75rem 0",fontSize:"1.2rem"},children:x.title}),u.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",marginBottom:"1rem"},children:x.description}),x.proctoring?.enabled&&u.jsx("div",{style:{padding:"0.5rem 0.75rem",background:"rgba(239, 68, 68, 0.08)",borderRadius:"8px",marginBottom:"0.75rem",border:"1px solid rgba(239, 68, 68, 0.15)"},children:u.jsxs("p",{style:{margin:0,fontSize:"0.75rem",color:"#f87171",display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx(An,{size:12})," Proctoring Enabled:",x.proctoring.videoAudio&&u.jsx("span",{style:{marginLeft:"4px"},children:" Video"}),x.proctoring.disableCopyPaste&&u.jsx("span",{style:{marginLeft:"4px"},children:" No Copy"}),x.proctoring.trackTabSwitches&&u.jsx("span",{style:{marginLeft:"4px"},children:" Tab Track"})]})}),u.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"1rem",borderTop:"1px solid var(--border-color)"},children:[u.jsx("span",{className:`difficulty-badge ${x.difficulty?.toLowerCase()}`,children:x.difficulty}),u.jsxs("button",{onClick:()=>p(x),className:"btn-create-new",style:{padding:"0.5rem 1rem",fontSize:"0.85rem"},children:[u.jsx(Ip,{size:16})," Solve"]})]})]},x.id);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"12px",width:"fit-content"},children:[u.jsxs("button",{onClick:()=>f("coding"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:c==="coding"?"var(--primary)":"transparent",color:c==="coding"?"white":"var(--text-muted)"},children:[u.jsx(Yn,{size:18}),"Coding Problems",u.jsx("span",{style:{background:c==="coding"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:y.length})]}),u.jsxs("button",{onClick:()=>f("sql"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:c==="sql"?"linear-gradient(135deg, #06b6d4, #0891b2)":"transparent",color:c==="sql"?"white":"var(--text-muted)"},children:[u.jsx(Wa,{size:18}),"SQL Problems",u.jsx("span",{style:{background:c==="sql"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:b.length})]})]}),c==="coding"&&u.jsx("div",{className:"cards-grid animate-slideUp",children:y.length===0?u.jsxs("div",{className:"empty-state",style:{gridColumn:"1 / -1"},children:[u.jsx("div",{className:"empty-state-icon",children:u.jsx(Yn,{size:40})}),u.jsx("h3",{children:"No Coding Problems"}),u.jsx("p",{children:"Your mentor hasn't assigned any coding problems yet."})]}):y.map(x=>v(x))}),c==="sql"&&u.jsx("div",{className:"cards-grid animate-slideUp",children:b.length===0?u.jsxs("div",{className:"empty-state",style:{gridColumn:"1 / -1"},children:[u.jsx("div",{className:"empty-state-icon",children:u.jsx(Wa,{size:40})}),u.jsx("h3",{children:"No SQL Problems"}),u.jsx("p",{children:"Your mentor hasn't assigned any SQL problems yet."})]}):b.map(x=>v(x))}),a&&o&&u.jsx(E3e,{problem:a,user:t,onClose:m,onSubmitSuccess:()=>{Ve.get(`${Er}/students/${t.id}/problems`).then(x=>n(x.data))}}),a&&!o&&u.jsx(V3e,{problem:a,user:t,onClose:m})]})}function V3e({problem:t,user:e,onClose:n}){const r=sy[t.language]||sy.Python,[s,a]=T.useState(r.defaultCode),[i,o]=T.useState(t.language||"Python"),[l,c]=T.useState("validator"),[f,p]=T.useState(""),[m,y]=T.useState("idle"),[b,v]=T.useState(null),[x,S]=T.useState(0),[C,E]=T.useState(!1),[k,I]=T.useState(!1),[$,_]=T.useState(""),[z,L]=T.useState(!1),[R,D]=T.useState(null),[U,X]=T.useState(t.sampleInput||t.testInput||""),[V,Y]=T.useState("input"),B=T.useRef(null);T.useEffect(()=>{const Me=setTimeout(async()=>{try{B.current&&document.fullscreenEnabled&&(await B.current.requestFullscreen(),E(!0))}catch(ge){console.warn("Could not enter fullscreen:",ge)}},100);return()=>clearTimeout(Me)},[]),T.useEffect(()=>{const Te=()=>{const Me=!!document.fullscreenElement;E(Me),!Me&&!b&&(_(" You exited fullscreen mode! This action has been recorded."),I(!0),S(ge=>ge+1),setTimeout(async()=>{if(B.current&&document.fullscreenEnabled)try{await B.current.requestFullscreen()}catch{}},500))};return document.addEventListener("fullscreenchange",Te),()=>document.removeEventListener("fullscreenchange",Te)},[b]);const[Z,J]=T.useState(!1);T.useEffect(()=>{const Te=()=>{document.hidden&&!b&&!Z&&S(Me=>{const ge=Me+1;return ge>=3?(_(` DISQUALIFIED! You have exceeded the maximum allowed tab switches (${ge}/3). Session terminated.`),I(!0),J(!0),setTimeout(async()=>{try{await Ve.post(`${Er}/submissions`,{studentId:e.id,problemId:t.id,language:i,code:s,submissionType:"editor",tabSwitches:ge})}catch(ct){console.error("Auto-submit failed:",ct)}document.fullscreenElement&&document.exitFullscreen(),n()},3e3)):(_(` Tab switch detected! (${ge}/3 violations) ${3-ge} more will disqualify you!`),I(!0)),ge})};return document.addEventListener("visibilitychange",Te),()=>document.removeEventListener("visibilitychange",Te)},[b,Z,e.id,t.id,i,s,n]),T.useEffect(()=>{if(k){const Te=setTimeout(()=>I(!1),3e3);return()=>clearTimeout(Te)}},[k]);const ae=Te=>{o(Te),a(sy[Te]?.defaultCode||"")},ee=async()=>{y("running"),p(`Running code...
`),Y("output");try{const Te=await Ve.post(`${Er}/run`,{code:s,language:i,problemId:t.id,sqlSchema:t.sqlSchema,stdin:U||""});p(Te.data.output),y(Te.data.status==="error"?"error":"success");try{const Me=await Ve.post(`${Er}/run-with-tests`,{problemId:t.id,code:s,language:i});Me.data?.testResults&&D({passed:Me.data.testResults.filter(ge=>ge.passed).length,total:Me.data.testResults.length,results:Me.data.testResults})}catch(Me){console.log("No test cases or test run failed:",Me)}}catch(Te){p(`Error: ${Te.response?.data?.details||"Failed to execute code."}`),y("error")}},[W,Q]=T.useState(null),[se,fe]=T.useState(!1),[Ne,_e]=T.useState(!1),De=async()=>{fe(!0),_e(!0);try{const Te=await Ve.post(`${Er}/hints`,{code:s,language:i,problemId:t.id});Q(Te.data)}catch{Q({hints:["Think about the problem step by step.","Consider what data structure would be most efficient."],encouragement:"Don't give up! Every expert was once a beginner.",error:!0})}finally{fe(!1)}},He=async()=>{y("submitting");try{const Te=await Ve.post(`${Er}/submissions`,{studentId:e.id,problemId:t.id,language:i,code:s,submissionType:"editor",tabSwitches:x});v(Te.data),y("done"),document.fullscreenElement&&document.exitFullscreen()}catch{v({status:"rejected",score:0,feedback:"Submission failed."}),y("error")}},he=()=>{!b&&!window.confirm("Exiting early will be recorded. Are you sure?")||(document.fullscreenElement&&document.exitFullscreen(),n())};return u.jsxs("div",{ref:B,className:"proctored-container",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#0f172a",zIndex:1e4,display:"flex",flexDirection:"column"},children:[k&&u.jsxs("div",{style:{position:"fixed",top:"1rem",left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",padding:"1rem 2rem",borderRadius:"0.75rem",zIndex:10001,boxShadow:"0 10px 40px rgba(239, 68, 68, 0.5)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx(un,{size:24}),u.jsx("span",{style:{fontWeight:600},children:$})]}),u.jsxs("div",{style:{borderBottom:"1px solid #334155",background:"#1e293b",padding:"1rem 2rem",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:u.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[u.jsxs("h2",{style:{color:"#f8fafc",fontSize:"1.25rem",marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"1rem"},children:[t.title,u.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem",borderRadius:"2rem",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#ef4444",animation:"pulse 2s infinite"}})," PROCTORED MODE"]})]}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa"},children:t.type||"coding"}),u.jsx("span",{className:`difficulty-badge ${t.difficulty?.toLowerCase()}`,children:t.difficulty?.toUpperCase()}),x>0&&u.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",fontWeight:600},children:[" ",x," violations"]})]})]})}),u.jsx("button",{onClick:he,style:{background:"#334155",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer"},children:"Exit Session"})]}),u.jsxs("div",{style:{padding:0,display:"flex",flexDirection:"row",flex:1,minHeight:0,overflow:"hidden",background:"#0f172a"},children:[u.jsxs("div",{style:{width:"400px",borderRight:"1px solid #334155",padding:"2rem",overflowY:"auto",background:"#0f172a"},children:[u.jsx("h3",{style:{marginTop:0,marginBottom:"1.5rem",color:"#f8fafc"},children:"Problem Description"}),u.jsxs("div",{style:{color:"#cbd5e1",fontSize:"0.95rem",lineHeight:"1.7"},children:[t.description,t.type==="SQL"||t.language==="SQL"?u.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[t.sqlSchema&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{color:"#06b6d4"},children:""}),u.jsx("strong",{style:{color:"#e2e8f0"},children:"Database Schema:"})]}),u.jsx("pre",{style:{color:"#93c5fd",background:"#0f172a",padding:"1rem",borderRadius:"6px",marginBottom:"1rem",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.sqlSchema})]}),t.expectedQueryResult&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{color:"#10b981"},children:""}),u.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Query Result:"})]}),u.jsx("pre",{style:{color:"#4ade80",background:"#0f172a",padding:"1rem",borderRadius:"6px",fontSize:"0.8rem",overflowX:"auto",whiteSpace:"pre-wrap",border:"1px solid #334155"},children:t.expectedQueryResult})]}),!t.sqlSchema&&!t.expectedQueryResult&&u.jsx("p",{style:{color:"#94a3b8",fontStyle:"italic",margin:0},children:"Write a SQL query to solve this problem. Your query will be executed against the database."})]}):u.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #334155",marginTop:"1.5rem"},children:[u.jsx("div",{style:{marginBottom:"0.5rem"},children:u.jsx("strong",{style:{color:"#e2e8f0"},children:"Sample Input:"})}),u.jsx("code",{style:{color:"#93c5fd",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block",marginBottom:"1rem"},children:t.sampleInput||t.testInput||"N/A"}),u.jsx("div",{style:{marginBottom:"0.5rem"},children:u.jsx("strong",{style:{color:"#e2e8f0"},children:"Expected Output:"})}),u.jsx("code",{style:{color:"#4ade80",background:"#0f172a",padding:"0.4rem 0.8rem",borderRadius:"4px",display:"block"},children:t.expectedOutput||"N/A"})]})]}),u.jsxs("div",{style:{marginTop:"2rem",background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"0.75rem",padding:"1.25rem"},children:[u.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#fbbf24",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(jy,{size:16})," Need Help?"]}),Ne?u.jsx("div",{children:se?u.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[u.jsx("div",{style:{color:"#fbbf24",marginBottom:"0.5rem"},children:""}),u.jsx("p",{style:{color:"#94a3b8",fontSize:"0.85rem",margin:0},children:"Analyzing your code..."})]}):W&&u.jsxs("div",{children:[W.encouragement&&u.jsx("div",{style:{background:"rgba(34, 197, 94, 0.1)",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",border:"1px solid rgba(34, 197, 94, 0.2)"},children:u.jsxs("p",{style:{color:"#4ade80",fontSize:"0.8rem",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Va,{size:14})," ",W.encouragement]})}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("p",{style:{color:"#e2e8f0",fontSize:"0.8rem",fontWeight:600,margin:"0 0 0.5rem"},children:" Hints:"}),u.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"#cbd5e1",fontSize:"0.8rem",lineHeight:1.8},children:W.hints?.map((Te,Me)=>u.jsx("li",{style:{marginBottom:"0.5rem"},children:Te},Me))})]}),W.conceptsToReview&&W.conceptsToReview.length>0&&u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsxs("p",{style:{color:"#e2e8f0",fontSize:"0.8rem",fontWeight:600,margin:"0 0 0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(KU,{size:14})," Concepts to Review:"]}),u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:W.conceptsToReview.map((Te,Me)=>u.jsx("span",{style:{background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa",padding:"0.25rem 0.75rem",borderRadius:"2rem",fontSize:"0.7rem",border:"1px solid rgba(59, 130, 246, 0.3)"},children:Te},Me))})]}),W.commonMistakes&&u.jsx("div",{style:{background:"rgba(239, 68, 68, 0.1)",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:u.jsxs("p",{style:{color:"#f87171",fontSize:"0.8rem",margin:0},children:[u.jsx("strong",{children:" Common Mistake:"})," ",W.commonMistakes]})}),u.jsx("button",{onClick:()=>{_e(!1),Q(null)},style:{background:"transparent",border:"1px solid #334155",color:"#94a3b8",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",marginTop:"1rem",width:"100%"},children:"Hide Hints"})]})}):u.jsxs("div",{children:[u.jsx("p",{style:{color:"#94a3b8",fontSize:"0.8rem",margin:"0 0 1rem",lineHeight:1.6},children:"Stuck on this problem? Get AI-powered hints to guide you without revealing the full solution."}),u.jsxs("button",{onClick:De,disabled:se,style:{background:"linear-gradient(135deg, #fbbf24, #f59e0b)",border:"none",color:"#1e293b",padding:"0.6rem 1.2rem",borderRadius:"6px",cursor:"pointer",fontWeight:600,fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center"},children:[u.jsx(Va,{size:16})," ",se?"Getting Hints...":"Get AI Hints"]})]})]}),u.jsxs("div",{style:{marginTop:"2rem",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"0.75rem",padding:"1.25rem"},children:[u.jsxs("h4",{style:{margin:"0 0 0.75rem",color:"#ef4444",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(un,{size:16})," Proctoring Rules"]}),u.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"#94a3b8",fontSize:"0.8rem",lineHeight:1.8},children:[u.jsx("li",{children:"Do not switch tabs or windows"}),u.jsx("li",{children:"Do not exit fullscreen mode"}),u.jsx("li",{children:"All violations are recorded"}),u.jsx("li",{children:"3+ violations may result in disqualification"})]})]})]}),u.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"#1e293b"},children:[u.jsxs("div",{style:{padding:"0.75rem 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #334155",background:"#1e293b"},children:[u.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[u.jsx("label",{style:{color:"#94a3b8",fontSize:"0.85rem"},children:"Language:"}),u.jsx("select",{value:i,onChange:Te=>ae(Te.target.value),disabled:t.type==="SQL"||t.language==="SQL",style:{background:"#0f172a",color:"#f8fafc",border:"1px solid #334155",borderRadius:"6px",padding:"0.4rem 0.75rem",fontSize:"0.85rem",opacity:t.type==="SQL"||t.language==="SQL"?.7:1,cursor:t.type==="SQL"||t.language==="SQL"?"not-allowed":"pointer"},children:Object.keys(sy).map(Te=>u.jsx("option",{value:Te,children:Te},Te))})]}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[i!=="SQL"&&u.jsxs("button",{onClick:ee,disabled:m==="running"||m==="submitting",style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[u.jsx(Ip,{size:16})," ",m==="running"?"Running...":"Run Code"]}),u.jsxs("button",{onClick:He,disabled:m==="running"||m==="submitting"||b,style:{background:b?"#334155":"linear-gradient(135deg, #10b981, #059669)",border:"none",color:"white",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600,fontSize:"0.85rem"},children:[u.jsx(kl,{size:16})," ",m==="submitting"?"Submitting...":"Submit"]})]})]}),u.jsx("div",{style:{flex:1,position:"relative",minHeight:0},children:u.jsx(Oy,{height:"100%",language:sy[i]?.monacoLang||"python",theme:"vs-dark",value:s,onChange:Te=>a(Te),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,automaticLayout:!0,padding:{top:20}}})}),b&&u.jsxs("div",{style:{padding:"1.5rem",background:b.status==="accepted"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderTop:`2px solid ${b.status==="accepted"?"#10b981":"#ef4444"}`,display:"flex",alignItems:"center",gap:"1.5rem"},children:[b.status==="accepted"?u.jsx(an,{size:40,color:"#10b981"}):u.jsx(Kr,{size:40,color:"#ef4444"}),u.jsxs("div",{children:[u.jsx("h4",{style:{margin:0,color:b.status==="accepted"?"#10b981":"#ef4444"},children:b.status==="accepted"?"Accepted!":"Rejected"}),u.jsxs("p",{style:{margin:"0.25rem 0 0",color:"#e2e8f0"},children:["Score: ",u.jsxs("strong",{children:[b.score,"/100"]}),"  ",b.feedback,x>0&&u.jsxs("span",{style:{color:"#f59e0b"},children:["  Tab violations: ",x]})]})]}),u.jsx("button",{onClick:he,style:{marginLeft:"auto",background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",cursor:"pointer",fontWeight:600},children:"Close Session"})]}),!b&&i!=="SQL"&&u.jsxs("div",{style:{maxHeight:"350px",background:"#020617",borderTop:"1px solid #334155",display:"flex",flexDirection:"column",overflowY:"auto"},children:[u.jsx("div",{style:{display:"flex",borderBottom:"1px solid #1e293b",background:"#0f172a"},children:["input","output","tests"].map(Te=>u.jsxs("button",{onClick:()=>Y(Te),style:{padding:"0.75rem 1.25rem",background:V===Te?"#1e293b":"transparent",border:"none",borderBottom:V===Te?`2px solid ${Te==="input"?"#f59e0b":Te==="output"?"#3b82f6":"#10b981"}`:"2px solid transparent",color:V===Te?Te==="input"?"#fbbf24":Te==="output"?"#60a5fa":"#4ade80":"#64748b",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,display:"flex",alignItems:"center",gap:"0.5rem"},children:[Te==="input"&&u.jsxs(u.Fragment,{children:[u.jsx(Wa,{size:14})," Custom Input"]}),Te==="output"&&u.jsxs(u.Fragment,{children:[u.jsx(Yn,{size:14})," Output ",f&&u.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:m==="success"?"#10b981":m==="error"?"#ef4444":"#3b82f6"}})]}),Te==="tests"&&u.jsxs(u.Fragment,{children:[u.jsx(an,{size:14})," Test Cases",R&&u.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"0.7rem",fontWeight:600,background:R.passed===R.total?"rgba(16, 185, 129, 0.2)":"rgba(249, 115, 22, 0.2)",color:R.passed===R.total?"#10b981":"#f97316"},children:[R.passed,"/",R.total]})]})]},Te))}),V==="input"&&u.jsxs("div",{style:{padding:"0.75rem",flex:1},children:[u.jsx("textarea",{value:U,onChange:Te=>X(Te.target.value),placeholder:`Enter your input here (stdin)...
Example:
5
1 2 3 4 5`,style:{width:"100%",minHeight:"120px",background:"#0f172a",color:"#e2e8f0",border:"1px solid #334155",borderRadius:"8px",padding:"0.75rem",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical",outline:"none"}}),u.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.7rem",color:"#64748b"},children:' This input will be passed as stdin when you click "Run Code"'})]}),V==="output"&&u.jsx("div",{style:{padding:"1rem",fontFamily:"monospace",color:"#e2e8f0",fontSize:"0.9rem",whiteSpace:"pre-wrap",flex:1,overflowY:"auto"},children:f||"No output yet. Run your code to see results."}),V==="tests"&&u.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:u.jsx(A3e,{problemId:t.id,code:s,language:i,showRunButton:!0,onRunComplete:Te=>{Te?.testResults&&D({passed:Te.testResults.filter(Me=>Me.passed).length,total:Te.testResults.length})}})})]}),(t.type==="SQL"||t.language==="SQL")&&!b&&u.jsxs("div",{style:{borderTop:"1px solid #334155",padding:"1.25rem",background:"#0f172a"},children:[u.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.25rem",padding:"4px",background:"#020617",borderRadius:"10px",width:"fit-content"},children:[u.jsxs("button",{onClick:()=>c("validator"),style:{padding:"0.6rem 1.25rem",borderRadius:"8px",border:"none",cursor:"pointer",background:l==="validator"?"rgba(59, 130, 246, 0.15)":"transparent",color:l==="validator"?"#60a5fa":"#64748b",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(of,{size:16})," Validator"]}),u.jsxs("button",{onClick:()=>c("visualizer"),style:{padding:"0.6rem 1.25rem",borderRadius:"8px",border:"none",cursor:"pointer",background:l==="visualizer"?"rgba(139, 92, 246, 0.15)":"transparent",color:l==="visualizer"?"#a78bfa":"#64748b",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Eu,{size:16})," ER Diagram"]}),u.jsxs("button",{onClick:()=>c("debugger"),style:{padding:"0.6rem 1.25rem",borderRadius:"8px",border:"none",cursor:"pointer",background:l==="debugger"?"rgba(16, 185, 129, 0.15)":"transparent",color:l==="debugger"?"#4ade80":"#64748b",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(af,{size:16})," Debugger"]})]}),u.jsxs("div",{className:"sql-tool-container animate-fadeIn",children:[l==="validator"&&u.jsx(O3e,{query:s,onQueryChange:a,schemaContext:t.sqlSchema}),l==="visualizer"&&u.jsx(z3e,{schema:t.sqlSchema}),l==="debugger"&&u.jsx(L3e,{query:s,schema:t.sqlSchema})]})]})]})]}),u.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.5; transform: scale(1.2); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function q3e({user:t}){const[e,n]=T.useState([]),[r,s]=T.useState([]),[a,i]=T.useState(!0),[o,l]=T.useState(null),[c,f]=T.useState("all"),[p,m]=T.useState(null),[y,b]=T.useState(""),v=()=>{Promise.all([Ve.get(`${Er}/submissions?studentId=${t.id}`),Ve.get(`${Er}/aptitude-submissions?studentId=${t.id}`)]).then(([k,I])=>{n((k.data||[]).map($=>({...$,subType:"code"}))),s((I.data||[]).map($=>({...$,subType:"aptitude",itemTitle:$.testTitle}))),i(!1)}).catch(k=>i(!1))};T.useEffect(()=>{v()},[t.id]);const x=async k=>{if(window.confirm("Are you sure you want to delete this submission?"))try{await Ve.delete(`${Er}/submissions/${k}`),v()}catch{alert("Error deleting submission")}},S=[...e,...r].sort((k,I)=>new Date(I.submittedAt)-new Date(k.submittedAt)),E=(c==="all"?S:c==="code"?e:r).filter(I=>(I.itemTitle||I.testTitle||"").toLowerCase().includes(y.toLowerCase())||I.status.toLowerCase().includes(y.toLowerCase()));return a?u.jsx("div",{className:"loading-spinner"}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsxs("button",{onClick:()=>f("all"),style:{padding:"0.6rem 1.2rem",background:c==="all"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:c==="all"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:c==="all"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["All (",S.length,")"]}),u.jsxs("button",{onClick:()=>f("code"),style:{padding:"0.6rem 1.2rem",background:c==="code"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:c==="code"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:c==="code"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:[" Code (",e.length,")"]}),u.jsxs("button",{onClick:()=>f("aptitude"),style:{padding:"0.6rem 1.2rem",background:c==="aptitude"?"#8b5cf6":"rgba(139, 92, 246, 0.1)",border:c==="aptitude"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:c==="aptitude"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:[" Aptitude (",r.length,")"]})]}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx(B$,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),u.jsx("input",{type:"text",placeholder:"Search problem or status...",style:{padding:"0.6rem 1rem 0.6rem 2.5rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"white",width:"250px"},value:y,onChange:k=>b(k.target.value)})]})]}),u.jsx("div",{className:"table-container animate-slideUp card glass",children:u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Type"}),u.jsx("th",{children:"Problem / Test"}),u.jsx("th",{children:"Language"}),u.jsx("th",{children:"Score"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Submitted At"}),u.jsx("th",{children:"Actions"})]})}),u.jsx("tbody",{children:E.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"7",style:{textAlign:"center",padding:"3rem"},children:"No submissions found"})}):E.map(k=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:k.subType==="aptitude"?"rgba(139, 92, 246, 0.1)":"var(--primary-alpha)",color:k.subType==="aptitude"?"#8b5cf6":"var(--primary)"},children:k.subType==="aptitude"?" Aptitude":" Code"})}),u.jsx("td",{children:u.jsx("div",{style:{color:"var(--primary)",fontWeight:500},children:k.itemTitle||k.testTitle})}),u.jsx("td",{children:u.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:k.subType==="aptitude"?"N/A":k.language?.toUpperCase()||"N/A"})}),u.jsxs("td",{style:{fontWeight:700,fontSize:"1.1rem"},children:[k.score,"%"]}),u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",alignItems:"center"},children:[u.jsx("span",{className:`status-badge ${k.status}`,children:k.status}),k.plagiarism?.detected&&u.jsxs("span",{className:"status-badge plagiarized",style:{display:"flex",alignItems:"center",gap:"3px"},children:[u.jsx(un,{size:11})," Plag"]}),(k.integrity?.integrityViolation||k.tabSwitches>0)&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[u.jsx(un,{size:10})," ",k.integrity?.tabSwitches||k.tabSwitches||0," Tab"]}),k.cameraBlockedCount>0&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[" ",k.cameraBlockedCount," Cam"]}),k.phoneDetectionCount>0&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[" ",k.phoneDetectionCount," Phone"]})]})}),u.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(k.submittedAt).toLocaleString()}),u.jsx("td",{children:u.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:k.subType==="aptitude"?u.jsxs("button",{onClick:()=>m(k),style:{background:"rgba(139, 92, 246, 0.1)",border:"none",color:"#8b5cf6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx(An,{size:14})," Results"]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>l(k),style:{background:"var(--primary-alpha)",border:"none",color:"var(--primary)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx(An,{size:14})," Report"]}),u.jsx("button",{onClick:()=>x(k.id),style:{background:"var(--danger-alpha)",border:"none",color:"var(--danger)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:u.jsx(Iu,{size:14})})]})})})]},k.id))})]})}),o&&u.jsx(G3e,{submission:o,user:t,onClose:()=>l(null)}),p&&u.jsx(K$,{submission:p,onClose:()=>m(null),isStudentView:!0})]})}function G3e({submission:t,user:e,onClose:n}){const r=o=>{if(!o)return{score:0,max:0,comment:""};const l=o.match(/(\d+)\/(\d+)/);return l?{score:parseInt(l[1]),max:parseInt(l[2]),comment:o.replace(/\d+\/\d+\s*[-]?\s*/,"").trim()}:{score:0,max:0,comment:o}},s=t.analysis||{},a={correctness:r(s.correctness),efficiency:r(s.efficiency),codeStyle:r(s.codeStyle),bestPractices:r(s.bestPractices)},i=({label:o,icon:l,score:c,max:f,comment:p,color:m})=>u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l,u.jsx("span",{style:{fontWeight:600,fontSize:"0.9rem"},children:o})]}),u.jsxs("span",{style:{fontWeight:700,color:m},children:[c,"/",f]})]}),u.jsx("div",{style:{background:"var(--bg-dark)",borderRadius:"0.5rem",height:"8px",overflow:"hidden"},children:u.jsx("div",{style:{width:f>0?`${c/f*100}%`:"0%",height:"100%",background:`linear-gradient(90deg, ${m}, ${m}88)`,borderRadius:"0.5rem",transition:"width 0.5s ease"}})}),p&&u.jsx("p",{style:{margin:"0.5rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)"},children:p})]});return u.jsx("div",{className:"modal-overlay",onClick:n,children:u.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),style:{maxWidth:"900px"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title-with-icon",children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:t.status==="accepted"?"linear-gradient(135deg, var(--success), #06b6d4)":"linear-gradient(135deg, var(--danger), var(--warning))",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Wa,{size:20,color:"white"})}),u.jsx("h2",{children:"Submission Report"})]}),u.jsx("button",{onClick:n,className:"modal-close",children:u.jsx(Kr,{size:20})})]}),u.jsxs("div",{className:"modal-body",style:{maxHeight:"75vh",overflowY:"auto"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"var(--bg-dark)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:[u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Student"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600,fontSize:"1.1rem"},children:e?.name})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submitted At"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:new Date(t.submittedAt).toLocaleString()})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Language"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.language})]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:t.status==="accepted"?"var(--success-alpha)":"var(--danger-alpha)",borderRadius:"1rem",border:`1px solid ${t.status==="accepted"?"var(--success)":"var(--danger)"}`},children:[u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"3rem",fontWeight:800,color:t.status==="accepted"?"var(--success)":"var(--danger)"},children:t.score}),u.jsx("div",{style:{color:"var(--text-muted)"},children:"AI Evaluation Score"})]}),u.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"1rem",background:t.status==="accepted"?"var(--success-alpha)":"var(--danger-alpha)",color:t.status==="accepted"?"var(--success)":"var(--danger)",fontWeight:700,fontSize:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.status==="accepted"?u.jsx(an,{size:24}):u.jsx(Kr,{size:24}),t.status?.toUpperCase()]})]}),(s.correctness||s.efficiency||s.codeStyle||s.bestPractices)&&u.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"var(--bg-dark)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:[u.jsxs("h4",{style:{margin:"0 0 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Xr,{size:18,color:"var(--primary)"})," Detailed Score Breakdown"]}),u.jsx(i,{label:"Correctness",icon:u.jsx(an,{size:16,color:"#10b981"}),score:a.correctness.score,max:a.correctness.max||40,comment:a.correctness.comment,color:"#10b981"}),u.jsx(i,{label:"Efficiency",icon:u.jsx(il,{size:16,color:"#3b82f6"}),score:a.efficiency.score,max:a.efficiency.max||25,comment:a.efficiency.comment,color:"#3b82f6"}),u.jsx(i,{label:"Code Style",icon:u.jsx(An,{size:16,color:"#8b5cf6"}),score:a.codeStyle.score,max:a.codeStyle.max||20,comment:a.codeStyle.comment,color:"#8b5cf6"}),u.jsx(i,{label:"Best Practices",icon:u.jsx(es,{size:16,color:"#f59e0b"}),score:a.bestPractices.score,max:a.bestPractices.max||15,comment:a.bestPractices.comment,color:"#f59e0b"})]}),t.plagiarism?.detected&&u.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"var(--danger-alpha)",borderRadius:"0.75rem",border:"1px solid var(--danger)",display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx(un,{size:24,color:"var(--danger)"}),u.jsxs("div",{children:[u.jsx("strong",{style:{color:"var(--danger)"},children:"Plagiarism Detected"}),u.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["This code matches a submission from ",t.plagiarism.copiedFromName]})]})]}),t.integrity?.integrityViolation&&u.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.75rem",border:"1px solid #f59e0b",display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx(un,{size:24,color:"#f59e0b"}),u.jsxs("div",{children:[u.jsx("strong",{style:{color:"#f59e0b"},children:"Integrity Violation"}),u.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["Tab switches detected: ",t.integrity.tabSwitches,". Score was capped due to academic integrity concerns."]})]})]}),(t.tabSwitches>0||t.copyPasteAttempts>0||t.cameraBlockedCount>0||t.phoneDetectionCount>0)&&u.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"var(--bg-dark)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:[u.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#f59e0b"},children:[u.jsx(un,{size:18})," Proctoring Violations"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[t.tabSwitches>0&&u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx(An,{size:18,color:"#f59e0b"}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.tabSwitches," Tab Switches"]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.tabSwitches*5,25)," pts"]})]})]}),t.copyPasteAttempts>0&&u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("span",{style:{fontSize:"1.1rem"},children:""}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.copyPasteAttempts," Copy/Paste"]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.copyPasteAttempts*3,15)," pts"]})]})]}),t.cameraBlockedCount>0&&u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("span",{style:{fontSize:"1.1rem"},children:""}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.cameraBlockedCount," Camera Blocked"]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.cameraBlockedCount*10,30)," pts"]})]})]}),t.phoneDetectionCount>0&&u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("span",{style:{fontSize:"1.1rem"},children:""}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.phoneDetectionCount," Phone Detected"]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.phoneDetectionCount*15,45)," pts"]})]})]})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Va,{size:18,color:"var(--primary)"})," AI Feedback"]}),u.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--bg-dark)",padding:"1rem",borderRadius:"0.5rem"},children:t.feedback||"No feedback provided."})]}),t.aiExplanation&&u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(An,{size:18,color:"var(--secondary)"})," Why this score?"]}),u.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--secondary-alpha)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid var(--secondary)"},children:t.aiExplanation})]}),t.suggestions&&u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(jy,{size:18,color:"#fbbf24"})," Improvement Suggestion"]}),u.jsx("div",{style:{background:"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))",padding:"1rem",borderRadius:"0.5rem",border:"1px solid rgba(251, 191, 36, 0.3)"},children:u.jsx("p",{style:{color:"#fbbf24",margin:0,fontSize:"0.95rem"},children:t.suggestions})})]}),u.jsxs("div",{children:[u.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Submitted Code"}),u.jsx("pre",{style:{background:"var(--code-bg)",padding:"1.5rem",borderRadius:"0.5rem",overflow:"auto",maxHeight:"300px",fontSize:"0.85rem",fontFamily:"monospace",color:"var(--code-text)",border:"1px solid var(--border-color)"},children:t.code})]})]})]})})}function H3e({user:t}){const[e,n]=T.useState([]),[r,s]=T.useState(!0),[a,i]=T.useState(null),[o,l]=T.useState(!1),[c,f]=T.useState([]);T.useEffect(()=>{const y=async()=>{try{const v=await Ve.get(`${Er}/global-tests?status=live`);n(Array.isArray(v.data)?v.data:[])}catch(v){v.response?.status===503?n([]):console.error(v)}finally{s(!1)}},b=async()=>{try{const v=await Ve.get(`${Er}/global-test-submissions?studentId=${t.id}`);f(Array.isArray(v.data)?v.data:[])}catch{f([])}};y(),b()},[t.id]);const p=async y=>{if(y.startTime&&new Date(y.startTime)>new Date){alert("This test is not yet available.");return}if(y.deadline&&new Date(y.deadline)<new Date){alert("This test has expired.");return}const b=c.filter(x=>x.testId===y.id).length,v=y.maxAttempts??1;if(v!==-1&&b>=v){alert(`Max attempts (${v}) reached for this test.`);return}try{const x=await Ve.get(`${Er}/global-tests/${y.id}`);i(x.data),l(!0)}catch(x){alert(x.response?.data?.error||"Failed to load test")}},m=()=>{l(!1),i(null),Ve.get(`${Er}/global-test-submissions?studentId=${t.id}`).then(y=>f(Array.isArray(y.data)?y.data:[])).catch(()=>{})};return r?u.jsx("div",{className:"loading-spinner"}):o&&a?u.jsx(Qoe,{test:a,user:t,onClose:()=>{l(!1),i(null)},onComplete:m}):(c.filter(y=>y.status==="passed").length,u.jsxs("div",{className:"animate-fadeIn",children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:56,height:56,borderRadius:16,background:"linear-gradient(135deg, #06b6d4, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(af,{size:28,color:"white"})}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Global Complete Tests"}),u.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Aptitude, Verbal, Logical, Coding, SQL  all in one test"})]})]})}),e.length===0?u.jsx("div",{style:{textAlign:"center",padding:"3rem",background:"var(--bg-card)",borderRadius:"1rem",border:"1px solid var(--border-color)"},children:u.jsx("p",{style:{color:"var(--text-muted)"},children:"No global tests available. Check back later."})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"rgba(6, 182, 212, 0.1)",color:"#06b6d4"},children:u.jsx(af,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Available"}),u.jsx("span",{className:"stat-value",children:e.length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:u.jsx(an,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Submitted"}),u.jsx("span",{className:"stat-value",children:c.length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:u.jsx(mi,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Passed"}),u.jsx("span",{className:"stat-value",children:c.filter(y=>y.status==="passed").length})]})]})]}),u.jsx("div",{style:{display:"grid",gap:"1rem"},children:e.map(y=>u.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"1rem",padding:"1.25rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{margin:"0 0 0.25rem",fontSize:"1.1rem"},children:y.title}),u.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:[y.duration," min  ",y.totalQuestions??0," questions  Pass: ",y.passingScore,"%"]})]}),u.jsx("button",{type:"button",className:"btn-create-new",onClick:()=>p(y),style:{padding:"0.75rem 1.5rem",borderRadius:10},children:"Start Test"})]},y.id))})]})]}))}function K3e({user:t}){const[e,n]=T.useState([]),[r,s]=T.useState(!0),[a,i]=T.useState(null),[o,l]=T.useState(!1),[c,f]=T.useState([]),[p,m]=T.useState(null);T.useEffect(()=>{y(),b()},[t.id]);const y=async()=>{try{const z=await Ve.get(`${Er}/aptitude?status=live`);n(z.data),s(!1)}catch(z){console.error("Error fetching tests:",z),s(!1)}},b=async()=>{try{const z=await Ve.get(`${Er}/aptitude-submissions?studentId=${t.id}`);f(z.data)}catch(z){console.error("Error fetching submissions:",z)}},v=async z=>{if(z.startTime&&new Date(z.startTime)>new Date){alert("This test is not yet available. Please check the start time.");return}if(z.deadline&&new Date(z.deadline)<new Date){alert("This test has expired. The deadline has passed.");return}if(!k(z)&&E(z.id)>0){alert(`You have reached the maximum number of attempts (${z.maxAttempts}) for this test.`);return}try{const L=await Ve.get(`${Er}/aptitude/${z.id}`);i(L.data),l(!0)}catch{alert("Error loading test")}},x=z=>{b(),l(!1),i(null)},S=z=>c.some(L=>L.testId===z),C=z=>{const L=c.filter(R=>R.testId===z);return L.length>0?L[0]:null},E=z=>c.filter(L=>L.testId===z).length,k=z=>{const L=E(z.id),R=z.maxAttempts;return R===-1?!0:L<(R||1)},I=z=>{const L=E(z.id),R=z.maxAttempts;return R===-1?"":Math.max(0,(R||1)-L)},_=(()=>{const z={};return c.forEach(L=>{z[L.testId]||(z[L.testId]=L)}),Object.values(z)})();return r?u.jsx("div",{className:"loading-spinner"}):o&&a?u.jsx(Lie,{test:a,user:t,onClose:()=>{l(!1),i(null)},onComplete:x}):u.jsxs("div",{className:"animate-fadeIn",children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Zr,{size:28,color:"white"})}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Aptitude Tests"}),u.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Test your reasoning, analytical, and problem-solving skills"})]})]})}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:u.jsx(Zr,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Available Tests"}),u.jsx("span",{className:"stat-value",children:e.length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:u.jsx(an,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Completed"}),u.jsx("span",{className:"stat-value",children:_.length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:u.jsx(Xr,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Avg Score"}),u.jsxs("span",{className:"stat-value",children:[_.length>0?Math.round(_.reduce((z,L)=>z+L.score,0)/_.length):0,"%"]})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b"},children:u.jsx(mi,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Passed"}),u.jsx("span",{className:"stat-value",children:_.filter(z=>z.status==="passed").length})]})]})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:e.map(z=>{const L=S(z.id),R=C(z.id);return u.jsxs("div",{className:"card glass",style:{padding:"1.5rem",position:"relative",overflow:"hidden"},children:[L&&u.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",padding:"0.25rem 0.75rem",borderRadius:"20px",background:R?.status==="passed"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:R?.status==="passed"?"#10b981":"#ef4444",fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.25rem"},children:R?.status==="passed"?u.jsxs(u.Fragment,{children:[u.jsx(an,{size:14})," Passed"]}):u.jsxs(u.Fragment,{children:[u.jsx(Kr,{size:14})," Failed"]})}),u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(Zr,{size:24,color:"white"})}),u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:600},children:z.title}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[u.jsx("span",{className:`difficulty-badge ${z.difficulty?.toLowerCase()}`,children:z.difficulty}),u.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[u.jsx(vi,{size:14})," ",z.duration," min"]})]})]})]}),u.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"1.5rem",fontSize:"0.85rem",color:"var(--text-muted)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Xr,{size:16,color:"#8b5cf6"}),u.jsxs("span",{children:[z.questionCount||z.totalQuestions," Questions"]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(mi,{size:16,color:"#f59e0b"}),u.jsxs("span",{children:["Pass: ",z.passingScore,"%"]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(un,{size:16,color:"#ef4444"}),u.jsxs("span",{children:["Tab Limit: ",z.maxTabSwitches||3]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(il,{size:16,color:"#06b6d4"}),u.jsxs("span",{children:["Attempts: ",E(z.id),"/",z.maxAttempts===-1?"":z.maxAttempts||1]})]}),z.deadline&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:z.startTime&&new Date(z.startTime)>new Date?"#f59e42":z.deadline&&new Date(z.deadline)<new Date?"#ef4444":"var(--text-muted)"},children:[u.jsx(vi,{size:16,color:z.startTime&&new Date(z.startTime)>new Date?"#f59e42":z.deadline&&new Date(z.deadline)<new Date?"#ef4444":"#10b981"}),u.jsx("span",{children:z.startTime&&new Date(z.startTime)>new Date?"Not Yet Started":z.deadline&&new Date(z.deadline)<new Date?"Expired":z.deadline?`Due: ${new Date(z.deadline).toLocaleDateString()}`:""})]})]}),L&&R&&u.jsxs("div",{style:{background:"var(--bg-tertiary)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",border:"1px solid var(--border-color)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.85rem"},children:"Your Score"}),u.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,color:R.status==="passed"?"#10b981":"#ef4444"},children:[R.score,"%"]})]}),u.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:u.jsxs("span",{children:[R.correctCount,"/",R.totalQuestions," Correct"]})})]}),u.jsx("div",{style:{display:"flex",gap:"0.75rem"},children:L?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>m(R),style:{flex:1,padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"10px",color:"#3b82f6",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(An,{size:18})," View Results"]}),k(z)?u.jsxs("button",{onClick:()=>v(z),style:{padding:"0.75rem 1rem",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"10px",color:"#8b5cf6",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(il,{size:18})," Retry (",I(z)," left)"]}):u.jsxs("div",{style:{padding:"0.75rem 1rem",background:"rgba(107, 114, 128, 0.1)",border:"1px solid rgba(107, 114, 128, 0.3)",borderRadius:"10px",color:"#6b7280",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Kr,{size:18})," No retries left"]})]}):z.startTime&&new Date(z.startTime)>new Date?u.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(245, 158, 66, 0.15)",border:"none",borderRadius:"10px",color:"#f59e42",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(Kr,{size:18})," Not Yet Started"]}):z.deadline&&new Date(z.deadline)<new Date?u.jsxs("div",{style:{flex:1,padding:"0.75rem",background:"rgba(107, 114, 128, 0.2)",border:"none",borderRadius:"10px",color:"#6b7280",fontSize:"0.9rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(Kr,{size:18})," Test Expired"]}):u.jsxs("button",{onClick:()=>v(z),style:{flex:1,padding:"0.75rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"10px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(Ip,{size:18})," Start Test"]})})]},z.id)})}),e.length===0&&u.jsxs("div",{style:{textAlign:"center",padding:"4rem",color:"var(--text-muted)"},children:[u.jsx(Zr,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),u.jsx("p",{children:"No aptitude tests available at the moment."})]}),p&&u.jsx("div",{className:"modal-overlay",onClick:()=>m(null),children:u.jsxs("div",{className:"modal-content",onClick:z=>z.stopPropagation(),style:{maxWidth:"600px"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title-with-icon",children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:p.status==="passed"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center"},children:p.status==="passed"?u.jsx(mi,{size:20,color:"white"}):u.jsx(Xr,{size:20,color:"white"})}),u.jsx("h2",{children:p.testTitle})]}),u.jsx("button",{onClick:()=>m(null),className:"modal-close",children:u.jsx(Kr,{size:20})})]}),u.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[u.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#3b82f6"},children:[p.score,"%"]}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Score"})]}),u.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#10b981"},children:p.correctCount}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Correct"})]}),u.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"#ef4444"},children:p.totalQuestions-p.correctCount}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Wrong"})]})]}),u.jsx("h4",{style:{marginBottom:"1rem"},children:"Question Breakdown"}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:p.questionResults?.map((z,L)=>u.jsx("div",{style:{background:z.isCorrect?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",border:`1px solid ${z.isCorrect?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"12px",padding:"1rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[z.isCorrect?u.jsx(an,{size:20,color:"#10b981",style:{flexShrink:0,marginTop:"2px"}}):u.jsx(Kr,{size:20,color:"#ef4444",style:{flexShrink:0,marginTop:"2px"}}),u.jsxs("div",{style:{flex:1},children:[u.jsxs("p",{style:{margin:"0 0 0.5rem",fontWeight:500,fontSize:"0.9rem"},children:["Q",L+1,": ",z.question]}),u.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.8rem"},children:[u.jsxs("span",{children:["Your: ",u.jsx("strong",{style:{color:z.isCorrect?"#10b981":"#ef4444"},children:z.userAnswer})]}),!z.isCorrect&&u.jsxs("span",{children:["Correct: ",u.jsx("strong",{style:{color:"#10b981"},children:z.correctAnswer})]})]}),z.explanation&&u.jsxs("p",{style:{margin:"0.5rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)",fontStyle:"italic"},children:[" ",z.explanation]})]})]})},L))})]})]})})]})}function MK(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=MK(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function gn(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=MK(t))&&(r&&(r+=" "),r+=e);return r}var X3e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function F_(t){if(typeof t!="string")return!1;var e=X3e;return e.includes(t)}var Y3e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Q3e=new Set(Y3e);function FK(t){return typeof t!="string"?!1:Q3e.has(t)}function BK(t){return typeof t=="string"&&t.startsWith("data-")}function Ci(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(FK(n)||BK(n))&&(e[n]=t[n]);return e}function gp(t){if(t==null)return null;if(T.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Ci(e)}return typeof t=="object"&&!Array.isArray(t)?Ci(t):null}function ka(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(FK(n)||BK(n)||F_(n))&&(e[n]=t[n]);return e}function Z3e(t){return t==null?null:T.isValidElement(t)?ka(t.props):typeof t=="object"&&!Array.isArray(t)?ka(t):null}var J3e=["children","width","height","viewBox","className","style","title","desc"];function Aj(){return Aj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Aj.apply(null,arguments)}function e4e(t,e){if(t==null)return{};var n,r,s=t4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function t4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var UK=T.forwardRef((t,e)=>{var{children:n,width:r,height:s,viewBox:a,className:i,style:o,title:l,desc:c}=t,f=e4e(t,J3e),p=a||{width:r,height:s,x:0,y:0},m=gn("recharts-surface",i);return T.createElement("svg",Aj({},ka(f),{className:m,width:r,height:s,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),T.createElement("title",null,l),T.createElement("desc",null,c),n)}),n4e=["children","className"];function jj(){return jj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jj.apply(null,arguments)}function r4e(t,e){if(t==null)return{};var n,r,s=s4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function s4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Fs=T.forwardRef((t,e)=>{var{children:n,className:r}=t,s=r4e(t,n4e),a=gn("recharts-layer",r);return T.createElement("g",jj({className:a},ka(s),{ref:e}),n)}),a4e=T.createContext(null);function Mn(t){return function(){return t}}const WK=Math.cos,Rw=Math.sin,_o=Math.sqrt,Ow=Math.PI,ZC=2*Ow,$j=Math.PI,Rj=2*$j,Od=1e-6,i4e=Rj-Od;function VK(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function o4e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return VK;const n=10**e;return function(r){this._+=r[0];for(let s=1,a=r.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class l4e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?VK:o4e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,a,i){this._append`C${+e},${+n},${+r},${+s},${this._x1=+a},${this._y1=+i}`}arcTo(e,n,r,s,a){if(e=+e,n=+n,r=+r,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,o=this._y1,l=r-e,c=s-n,f=i-e,p=o-n,m=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>Od)if(!(Math.abs(p*l-c*f)>Od)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let y=r-i,b=s-o,v=l*l+c*c,x=y*y+b*b,S=Math.sqrt(v),C=Math.sqrt(m),E=a*Math.tan(($j-Math.acos((v+m-x)/(2*S*C)))/2),k=E/C,I=E/S;Math.abs(k-1)>Od&&this._append`L${e+k*f},${n+k*p}`,this._append`A${a},${a},0,0,${+(p*y>f*b)},${this._x1=e+I*l},${this._y1=n+I*c}`}}arc(e,n,r,s,a,i){if(e=+e,n=+n,r=+r,i=!!i,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(s),l=r*Math.sin(s),c=e+o,f=n+l,p=1^i,m=i?s-a:a-s;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>Od||Math.abs(this._y1-f)>Od)&&this._append`L${c},${f}`,r&&(m<0&&(m=m%Rj+Rj),m>i4e?this._append`A${r},${r},0,1,${p},${e-o},${n-l}A${r},${r},0,1,${p},${this._x1=c},${this._y1=f}`:m>Od&&this._append`A${r},${r},0,${+(m>=$j)},${p},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function B_(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new l4e(e)}function U_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function qK(t){this._context=t}qK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function JC(t){return new qK(t)}function GK(t){return t[0]}function HK(t){return t[1]}function KK(t,e){var n=Mn(!0),r=null,s=JC,a=null,i=B_(o);t=typeof t=="function"?t:t===void 0?GK:Mn(t),e=typeof e=="function"?e:e===void 0?HK:Mn(e);function o(l){var c,f=(l=U_(l)).length,p,m=!1,y;for(r==null&&(a=s(y=i())),c=0;c<=f;++c)!(c<f&&n(p=l[c],c,l))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+t(p,c,l),+e(p,c,l));if(y)return a=null,y+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Mn(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Mn(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Mn(!!l),o):n},o.curve=function(l){return arguments.length?(s=l,r!=null&&(a=s(r)),o):s},o.context=function(l){return arguments.length?(l==null?r=a=null:a=s(r=l),o):r},o}function o1(t,e,n){var r=null,s=Mn(!0),a=null,i=JC,o=null,l=B_(c);t=typeof t=="function"?t:t===void 0?GK:Mn(+t),e=typeof e=="function"?e:Mn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?HK:Mn(+n);function c(p){var m,y,b,v=(p=U_(p)).length,x,S=!1,C,E=new Array(v),k=new Array(v);for(a==null&&(o=i(C=l())),m=0;m<=v;++m){if(!(m<v&&s(x=p[m],m,p))===S)if(S=!S)y=m,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=m-1;b>=y;--b)o.point(E[b],k[b]);o.lineEnd(),o.areaEnd()}S&&(E[m]=+t(x,m,p),k[m]=+e(x,m,p),o.point(r?+r(x,m,p):E[m],n?+n(x,m,p):k[m]))}if(C)return o=null,C+""||null}function f(){return KK().defined(s).curve(i).context(a)}return c.x=function(p){return arguments.length?(t=typeof p=="function"?p:Mn(+p),r=null,c):t},c.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Mn(+p),c):t},c.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Mn(+p),c):r},c.y=function(p){return arguments.length?(e=typeof p=="function"?p:Mn(+p),n=null,c):e},c.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Mn(+p),c):e},c.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Mn(+p),c):n},c.lineX0=c.lineY0=function(){return f().x(t).y(e)},c.lineY1=function(){return f().x(t).y(n)},c.lineX1=function(){return f().x(r).y(e)},c.defined=function(p){return arguments.length?(s=typeof p=="function"?p:Mn(!!p),c):s},c.curve=function(p){return arguments.length?(i=p,a!=null&&(o=i(a)),c):i},c.context=function(p){return arguments.length?(p==null?a=o=null:o=i(a=p),c):a},c}class XK{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function c4e(t){return new XK(t,!0)}function u4e(t){return new XK(t,!1)}const W_={draw(t,e){const n=_o(e/Ow);t.moveTo(n,0),t.arc(0,0,n,0,ZC)}},d4e={draw(t,e){const n=_o(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},YK=_o(1/3),f4e=YK*2,h4e={draw(t,e){const n=_o(e/f4e),r=n*YK;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},p4e={draw(t,e){const n=_o(e),r=-n/2;t.rect(r,r,n,n)}},m4e=.8908130915292852,QK=Rw(Ow/10)/Rw(7*Ow/10),g4e=Rw(ZC/10)*QK,y4e=-WK(ZC/10)*QK,b4e={draw(t,e){const n=_o(e*m4e),r=g4e*n,s=y4e*n;t.moveTo(0,-n),t.lineTo(r,s);for(let a=1;a<5;++a){const i=ZC*a/5,o=WK(i),l=Rw(i);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*s,l*r+o*s)}t.closePath()}},VE=_o(3),x4e={draw(t,e){const n=-_o(e/(VE*3));t.moveTo(0,n*2),t.lineTo(-VE*n,-n),t.lineTo(VE*n,-n),t.closePath()}},Mi=-.5,Fi=_o(3)/2,Oj=1/_o(12),v4e=(Oj/2+1)*3,w4e={draw(t,e){const n=_o(e/v4e),r=n/2,s=n*Oj,a=r,i=n*Oj+n,o=-a,l=i;t.moveTo(r,s),t.lineTo(a,i),t.lineTo(o,l),t.lineTo(Mi*r-Fi*s,Fi*r+Mi*s),t.lineTo(Mi*a-Fi*i,Fi*a+Mi*i),t.lineTo(Mi*o-Fi*l,Fi*o+Mi*l),t.lineTo(Mi*r+Fi*s,Mi*s-Fi*r),t.lineTo(Mi*a+Fi*i,Mi*i-Fi*a),t.lineTo(Mi*o+Fi*l,Mi*l-Fi*o),t.closePath()}};function S4e(t,e){let n=null,r=B_(s);t=typeof t=="function"?t:Mn(t||W_),e=typeof e=="function"?e:Mn(e===void 0?64:+e);function s(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return s.type=function(a){return arguments.length?(t=typeof a=="function"?a:Mn(a),s):t},s.size=function(a){return arguments.length?(e=typeof a=="function"?a:Mn(+a),s):e},s.context=function(a){return arguments.length?(n=a??null,s):n},s}function _w(){}function Dw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ZK(t){this._context=t}ZK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function C4e(t){return new ZK(t)}function JK(t){this._context=t}JK.prototype={areaStart:_w,areaEnd:_w,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Dw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function k4e(t){return new JK(t)}function eX(t){this._context=t}eX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Dw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function N4e(t){return new eX(t)}function tX(t){this._context=t}tX.prototype={areaStart:_w,areaEnd:_w,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function T4e(t){return new tX(t)}function $M(t){return t<0?-1:1}function RM(t,e,n){var r=t._x1-t._x0,s=e-t._x1,a=(t._y1-t._y0)/(r||s<0&&-0),i=(n-t._y1)/(s||r<0&&-0),o=(a*s+i*r)/(r+s);return($M(a)+$M(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(o))||0}function OM(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qE(t,e,n){var r=t._x0,s=t._y0,a=t._x1,i=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,s+o*e,a-o,i-o*n,a,i)}function zw(t){this._context=t}zw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qE(this,this._t0,OM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qE(this,OM(this,n=RM(this,t,e)),n);break;default:qE(this,this._t0,n=RM(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function nX(t){this._context=new rX(t)}(nX.prototype=Object.create(zw.prototype)).point=function(t,e){zw.prototype.point.call(this,e,t)};function rX(t){this._context=t}rX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,a){this._context.bezierCurveTo(e,t,r,n,a,s)}};function E4e(t){return new zw(t)}function I4e(t){return new nX(t)}function sX(t){this._context=t}sX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=_M(t),s=_M(e),a=0,i=1;i<n;++a,++i)this._context.bezierCurveTo(r[0][a],s[0][a],r[1][a],s[1][a],t[i],e[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function _M(t){var e,n=t.length-1,r,s=new Array(n),a=new Array(n),i=new Array(n);for(s[0]=0,a[0]=2,i[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,a[e]=4,i[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,a[n-1]=7,i[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/a[e-1],a[e]-=r,i[e]-=r*i[e-1];for(s[n-1]=i[n-1]/a[n-1],e=n-2;e>=0;--e)s[e]=(i[e]-s[e+1])/a[e];for(a[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-s[e+1];return[s,a]}function A4e(t){return new sX(t)}function ek(t,e){this._context=t,this._t=e}ek.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function j4e(t){return new ek(t,.5)}function $4e(t){return new ek(t,0)}function R4e(t){return new ek(t,1)}function kf(t,e){if((i=t.length)>1)for(var n=1,r,s,a=t[e[0]],i,o=a.length;n<i;++n)for(s=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function _j(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function O4e(t,e){return t[e]}function _4e(t){const e=[];return e.key=t,e}function D4e(){var t=Mn([]),e=_j,n=kf,r=O4e;function s(a){var i=Array.from(t.apply(this,arguments),_4e),o,l=i.length,c=-1,f;for(const p of a)for(o=0,++c;o<l;++o)(i[o][c]=[0,+r(p,i[o].key,c,a)]).data=p;for(o=0,f=U_(e(i));o<l;++o)i[f[o]].index=o;return n(i,f),i}return s.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Mn(Array.from(a)),s):t},s.value=function(a){return arguments.length?(r=typeof a=="function"?a:Mn(+a),s):r},s.order=function(a){return arguments.length?(e=a==null?_j:typeof a=="function"?a:Mn(Array.from(a)),s):e},s.offset=function(a){return arguments.length?(n=a??kf,s):n},s}function z4e(t,e){if((r=t.length)>0){for(var n,r,s=0,a=t[0].length,i;s<a;++s){for(i=n=0;n<r;++n)i+=t[n][s][1]||0;if(i)for(n=0;n<r;++n)t[n][s][1]/=i}kf(t,e)}}function P4e(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,a=r.length;n<a;++n){for(var i=0,o=0;i<s;++i)o+=t[i][n][1]||0;r[n][1]+=r[n][0]=-o/2}kf(t,e)}}function L4e(t,e){if(!(!((i=t.length)>0)||!((a=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,a,i;r<a;++r){for(var o=0,l=0,c=0;o<i;++o){for(var f=t[e[o]],p=f[r][1]||0,m=f[r-1][1]||0,y=(p-m)/2,b=0;b<o;++b){var v=t[e[b]],x=v[r][1]||0,S=v[r-1][1]||0;y+=x-S}l+=p,c+=y*p}s[r-1][1]+=s[r-1][0]=n,l&&(n-=c/l)}s[r-1][1]+=s[r-1][0]=n,kf(t,e)}}var GE={},HE={},DM;function M4e(){return DM||(DM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(HE)),HE}var KE={},zM;function aX(){return zM||(zM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(KE)),KE}var XE={},PM;function V_(){return PM||(PM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(XE)),XE}var YE={},QE={},LM;function F4e(){return LM||(LM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(QE)),QE}var MM;function q_(){return MM||(MM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=F4e(),n=V_();function r(s){if(Array.isArray(s))return s.map(n.toKey);if(typeof s=="symbol")return[s];s=e.toString(s);const a=[],i=s.length;if(i===0)return a;let o=0,l="",c="",f=!1;for(s.charCodeAt(0)===46&&(a.push(""),o++);o<i;){const p=s[o];c?p==="\\"&&o+1<i?(o++,l+=s[o]):p===c?c="":l+=p:f?p==='"'||p==="'"?c=p:p==="]"?(f=!1,a.push(l),l=""):l+=p:p==="["?(f=!0,l&&(a.push(l),l="")):p==="."?l&&(a.push(l),l=""):l+=p,o++}return l&&a.push(l),a}t.toPath=r})(YE)),YE}var FM;function G_(){return FM||(FM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=M4e(),n=aX(),r=V_(),s=q_();function a(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const f=o[l];return f===void 0?n.isDeepKey(l)?a(o,s.toPath(l),c):c:f}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const f=o[l];return f===void 0?c:f}default:{if(Array.isArray(l))return i(o,l,c);if(Object.is(l?.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const f=o[l];return f===void 0?c:f}}}function i(o,l,c){if(l.length===0)return c;let f=o;for(let p=0;p<l.length;p++){if(f==null||e.isUnsafeProperty(l[p]))return c;f=f[l[p]]}return f===void 0?c:f}t.get=a})(GE)),GE}var ZE,BM;function B4e(){return BM||(BM=1,ZE=G_().get),ZE}var U4e=B4e();const Nf=Ni(U4e);var W4e=4;function bu(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:W4e,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function hr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((s,a,i)=>{var o=n[i-1];return typeof o=="string"?s+o+a:o!==void 0?s+bu(o)+a:s+a},"")}var na=t=>t===0?0:t>0?1:-1,xl=t=>typeof t=="number"&&t!=+t,Tf=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,at=t=>(typeof t=="number"||t instanceof Number)&&!xl(t),vl=t=>at(t)||typeof t=="string",V4e=0,e0=t=>{var e=++V4e;return"".concat(t||"").concat(e)},bi=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!at(e)&&typeof e!="string")return r;var a;if(Tf(e)){if(n==null)return r;var i=e.indexOf("%");a=n*parseFloat(e.slice(0,i))/100}else a=+e;return xl(a)&&(a=r),s&&n!=null&&a>n&&(a=n),a},iX=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function Ps(t,e,n){return at(t)&&at(e)?bu(t+n*(e-t)):e}function oX(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Nf(r,e))===n)}var Bs=t=>t===null||typeof t>"u",ux=t=>Bs(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Ma(t){return t!=null}function Bm(){}var q4e=["type","size","sizeType"];function Dj(){return Dj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dj.apply(null,arguments)}function UM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function WM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UM(Object(n),!0).forEach(function(r){G4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G4e(t,e,n){return(e=H4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H4e(t){var e=K4e(t,"string");return typeof e=="symbol"?e:e+""}function K4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X4e(t,e){if(t==null)return{};var n,r,s=Y4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Y4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var lX={symbolCircle:W_,symbolCross:d4e,symbolDiamond:h4e,symbolSquare:p4e,symbolStar:b4e,symbolTriangle:x4e,symbolWye:w4e},Q4e=Math.PI/180,Z4e=t=>{var e="symbol".concat(ux(t));return lX[e]||W_},J4e=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Q4e;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},eze=(t,e)=>{lX["symbol".concat(ux(t))]=e},cX=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,s=X4e(t,q4e),a=WM(WM({},s),{},{type:e,size:n,sizeType:r}),i="circle";typeof e=="string"&&(i=e);var o=()=>{var m=Z4e(i),y=S4e().type(m).size(J4e(n,r,i)),b=y();if(b!==null)return b},{className:l,cx:c,cy:f}=a,p=ka(a);return at(c)&&at(f)&&at(n)?T.createElement("path",Dj({},p,{className:gn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(f,")"),d:o()})):null};cX.registerSymbol=eze;var uX=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,H_=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(T.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(s=>{F_(s)&&(r[s]=(a=>n[s](n,a)))}),r},tze=(t,e,n)=>r=>(t(e,n,r),null),dX=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(s=>{var a=t[s];F_(s)&&typeof a=="function"&&(r||(r={}),r[s]=tze(a,e,n))}),r};function VM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function nze(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VM(Object(n),!0).forEach(function(r){rze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rze(t,e,n){return(e=sze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sze(t){var e=aze(t,"string");return typeof e=="symbol"?e:e+""}function aze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vs(t,e){var n=nze({},t),r=e,s=Object.keys(e),a=s.reduce((i,o)=>(i[o]===void 0&&r[o]!==void 0&&(i[o]=r[o]),i),n);return a}var JE={},eI={},qM;function ize(){return qM||(qM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const s=new Map;for(let a=0;a<n.length;a++){const i=n[a],o=r(i,a,n);s.has(o)||s.set(o,i)}return Array.from(s.values())}t.uniqBy=e})(eI)),eI}var tI={},GM;function oze(){return GM||(GM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...s){return n.apply(this,s.slice(0,r))}}t.ary=e})(tI)),tI}var nI={},HM;function fX(){return HM||(HM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(nI)),nI}var rI={},sI={},aI={},KM;function lze(){return KM||(KM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(aI)),aI}var XM;function K_(){return XM||(XM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lze();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(sI)),sI}var iI={},YM;function cze(){return YM||(YM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(iI)),iI}var QM;function uze(){return QM||(QM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=K_(),n=cze();function r(s){return n.isObjectLike(s)&&e.isArrayLike(s)}t.isArrayLikeObject=r})(rI)),rI}var oI={},lI={},ZM;function dze(){return ZM||(ZM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=G_();function n(r){return function(s){return e.get(s,r)}}t.property=n})(lI)),lI}var cI={},uI={},dI={},fI={},JM;function hX(){return JM||(JM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(fI)),fI}var hI={},e6;function pX(){return e6||(e6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(hI)),hI}var pI={},t6;function mX(){return t6||(t6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(pI)),pI}var n6;function fze(){return n6||(n6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hX(),n=pX(),r=mX();function s(f,p,m){return typeof m!="function"?s(f,p,()=>{}):a(f,p,function y(b,v,x,S,C,E){const k=m(b,v,x,S,C,E);return k!==void 0?!!k:a(b,v,y,E)},new Map)}function a(f,p,m,y){if(p===f)return!0;switch(typeof p){case"object":return i(f,p,m,y);case"function":return Object.keys(p).length>0?a(f,{...p},m,y):r.isEqualsSameValueZero(f,p);default:return e.isObject(f)?typeof p=="string"?p==="":!0:r.isEqualsSameValueZero(f,p)}}function i(f,p,m,y){if(p==null)return!0;if(Array.isArray(p))return l(f,p,m,y);if(p instanceof Map)return o(f,p,m,y);if(p instanceof Set)return c(f,p,m,y);const b=Object.keys(p);if(f==null||n.isPrimitive(f))return b.length===0;if(b.length===0)return!0;if(y?.has(p))return y.get(p)===f;y?.set(p,f);try{for(let v=0;v<b.length;v++){const x=b[v];if(!n.isPrimitive(f)&&!(x in f)||p[x]===void 0&&f[x]!==void 0||p[x]===null&&f[x]!==null||!m(f[x],p[x],x,f,p,y))return!1}return!0}finally{y?.delete(p)}}function o(f,p,m,y){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,v]of p.entries()){const x=f.get(b);if(m(x,v,b,f,p,y)===!1)return!1}return!0}function l(f,p,m,y){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let v=0;v<p.length;v++){const x=p[v];let S=!1;for(let C=0;C<f.length;C++){if(b.has(C))continue;const E=f[C];let k=!1;if(m(E,x,v,f,p,y)&&(k=!0),k){b.add(C),S=!0;break}}if(!S)return!1}return!0}function c(f,p,m,y){return p.size===0?!0:f instanceof Set?l([...f],[...p],m,y):!1}t.isMatchWith=s,t.isSetMatch=c})(dI)),dI}var r6;function gX(){return r6||(r6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fze();function n(r,s){return e.isMatchWith(r,s,()=>{})}t.isMatch=n})(uI)),uI}var mI={},gI={},yI={},s6;function hze(){return s6||(s6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(yI)),yI}var bI={},a6;function X_(){return a6||(a6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(bI)),bI}var xI={},i6;function yX(){return i6||(i6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",s="[object Boolean]",a="[object Arguments]",i="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",f="[object Array]",p="[object Function]",m="[object ArrayBuffer]",y="[object Object]",b="[object Error]",v="[object DataView]",x="[object Uint8Array]",S="[object Uint8ClampedArray]",C="[object Uint16Array]",E="[object Uint32Array]",k="[object BigUint64Array]",I="[object Int8Array]",$="[object Int16Array]",_="[object Int32Array]",z="[object BigInt64Array]",L="[object Float32Array]",R="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=m,t.arrayTag=f,t.bigInt64ArrayTag=z,t.bigUint64ArrayTag=k,t.booleanTag=s,t.dataViewTag=v,t.dateTag=o,t.errorTag=b,t.float32ArrayTag=L,t.float64ArrayTag=R,t.functionTag=p,t.int16ArrayTag=$,t.int32ArrayTag=_,t.int8ArrayTag=I,t.mapTag=l,t.numberTag=r,t.objectTag=y,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=i,t.uint16ArrayTag=C,t.uint32ArrayTag=E,t.uint8ArrayTag=x,t.uint8ClampedArrayTag=S})(xI)),xI}var vI={},o6;function pze(){return o6||(o6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(vI)),vI}var l6;function bX(){return l6||(l6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hze(),n=X_(),r=yX(),s=pX(),a=pze();function i(f,p){return o(f,void 0,f,new Map,p)}function o(f,p,m,y=new Map,b=void 0){const v=b?.(f,p,m,y);if(v!==void 0)return v;if(s.isPrimitive(f))return f;if(y.has(f))return y.get(f);if(Array.isArray(f)){const x=new Array(f.length);y.set(f,x);for(let S=0;S<f.length;S++)x[S]=o(f[S],S,m,y,b);return Object.hasOwn(f,"index")&&(x.index=f.index),Object.hasOwn(f,"input")&&(x.input=f.input),x}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const x=new RegExp(f.source,f.flags);return x.lastIndex=f.lastIndex,x}if(f instanceof Map){const x=new Map;y.set(f,x);for(const[S,C]of f)x.set(S,o(C,S,m,y,b));return x}if(f instanceof Set){const x=new Set;y.set(f,x);for(const S of f)x.add(o(S,void 0,m,y,b));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const x=new(Object.getPrototypeOf(f)).constructor(f.length);y.set(f,x);for(let S=0;S<f.length;S++)x[S]=o(f[S],S,m,y,b);return x}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const x=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return y.set(f,x),l(x,f,m,y,b),x}if(typeof File<"u"&&f instanceof File){const x=new File([f],f.name,{type:f.type});return y.set(f,x),l(x,f,m,y,b),x}if(typeof Blob<"u"&&f instanceof Blob){const x=new Blob([f],{type:f.type});return y.set(f,x),l(x,f,m,y,b),x}if(f instanceof Error){const x=new f.constructor;return y.set(f,x),x.message=f.message,x.name=f.name,x.stack=f.stack,x.cause=f.cause,l(x,f,m,y,b),x}if(f instanceof Boolean){const x=new Boolean(f.valueOf());return y.set(f,x),l(x,f,m,y,b),x}if(f instanceof Number){const x=new Number(f.valueOf());return y.set(f,x),l(x,f,m,y,b),x}if(f instanceof String){const x=new String(f.valueOf());return y.set(f,x),l(x,f,m,y,b),x}if(typeof f=="object"&&c(f)){const x=Object.create(Object.getPrototypeOf(f));return y.set(f,x),l(x,f,m,y,b),x}return f}function l(f,p,m=f,y,b){const v=[...Object.keys(p),...e.getSymbols(p)];for(let x=0;x<v.length;x++){const S=v[x],C=Object.getOwnPropertyDescriptor(f,S);(C==null||C.writable)&&(f[S]=o(p[S],S,m,y,b))}}function c(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=i,t.cloneDeepWithImpl=o,t.copyProperties=l})(gI)),gI}var c6;function mze(){return c6||(c6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bX();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(mI)),mI}var u6;function gze(){return u6||(u6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gX(),n=mze();function r(s){return s=n.cloneDeep(s),a=>e.isMatch(a,s)}t.matches=r})(cI)),cI}var wI={},SI={},CI={},d6;function yze(){return d6||(d6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bX(),n=X_(),r=yX();function s(a,i){return e.cloneDeepWith(a,(o,l,c,f)=>{const p=i?.(o,l,c,f);if(p!==void 0)return p;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const m={};return f.set(a,m),e.copyProperties(m,a,c,f),m}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const m=new a.constructor(a?.valueOf());return e.copyProperties(m,a),m}case r.argumentsTag:{const m={};return e.copyProperties(m,a),m.length=a.length,m[Symbol.iterator]=a[Symbol.iterator],m}default:return}}})}t.cloneDeepWith=s})(CI)),CI}var f6;function bze(){return f6||(f6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yze();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(SI)),SI}var kI={},NI={},h6;function xX(){return h6||(h6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,s=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<s;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(NI)),NI}var TI={},p6;function xze(){return p6||(p6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X_();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(TI)),TI}var m6;function vze(){return m6||(m6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aX(),n=xX(),r=xze(),s=q_();function a(i,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&i?.[o]==null?l=s.toPath(o):l=[o],l.length===0)return!1;let c=i;for(let f=0;f<l.length;f++){const p=l[f];if((c==null||!Object.hasOwn(c,p))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(p)&&p<c.length))return!1;c=c[p]}return!0}t.has=a})(kI)),kI}var g6;function wze(){return g6||(g6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gX(),n=V_(),r=bze(),s=G_(),a=vze();function i(o,l){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return l=r.cloneDeep(l),function(c){const f=s.get(c,o);return f===void 0?a.has(c,o):l===void 0?f===void 0:e.isMatch(f,l)}}t.matchesProperty=i})(wI)),wI}var y6;function Sze(){return y6||(y6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fX(),n=dze(),r=gze(),s=wze();function a(i){if(i==null)return e.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?s.matchesProperty(i[0],i[1]):r.matches(i);case"string":case"symbol":case"number":return n.property(i)}}t.iteratee=a})(oI)),oI}var b6;function Cze(){return b6||(b6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ize(),n=oze(),r=fX(),s=uze(),a=Sze();function i(o,l=r.identity){return s.isArrayLikeObject(o)?e.uniqBy(Array.from(o),n.ary(a.iteratee(l),1)):[]}t.uniqBy=i})(JE)),JE}var EI,x6;function kze(){return x6||(x6=1,EI=Cze().uniqBy),EI}var Nze=kze();const v6=Ni(Nze);function Tze(t,e,n){return e===!0?v6(t,n):typeof e=="function"?v6(t,e):t}var II={exports:{}},AI={},jI={exports:{}},$I={};var w6;function Eze(){if(w6)return $I;w6=1;var t=Cp();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,i=t.useDebugValue;function o(p,m){var y=m(),b=r({inst:{value:y,getSnapshot:m}}),v=b[0].inst,x=b[1];return a(function(){v.value=y,v.getSnapshot=m,l(v)&&x({inst:v})},[p,y,m]),s(function(){return l(v)&&x({inst:v}),p(function(){l(v)&&x({inst:v})})},[p]),i(y),y}function l(p){var m=p.getSnapshot;p=p.value;try{var y=m();return!n(p,y)}catch{return!0}}function c(p,m){return m()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return $I.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,$I}var S6;function Ize(){return S6||(S6=1,jI.exports=Eze()),jI.exports}var C6;function Aze(){if(C6)return AI;C6=1;var t=Cp(),e=Ize();function n(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return AI.useSyncExternalStoreWithSelector=function(c,f,p,m,y){var b=a(null);if(b.current===null){var v={hasValue:!1,value:null};b.current=v}else v=b.current;b=o(function(){function S($){if(!C){if(C=!0,E=$,$=m($),y!==void 0&&v.hasValue){var _=v.value;if(y(_,$))return k=_}return k=$}if(_=k,r(E,$))return _;var z=m($);return y!==void 0&&y(_,z)?(E=$,_):(E=$,k=z)}var C=!1,E,k,I=p===void 0?null:p;return[function(){return S(f())},I===null?void 0:function(){return S(I())}]},[f,p,m,y]);var x=s(c,b[0],b[1]);return i(function(){v.hasValue=!0,v.value=x},[x]),l(x),x},AI}var k6;function jze(){return k6||(k6=1,II.exports=Aze()),II.exports}var $ze=jze(),Y_=T.createContext(null),Rze=t=>t,rr=()=>{var t=T.useContext(Y_);return t?t.store.dispatch:Rze},V1=()=>{},Oze=()=>V1,_ze=(t,e)=>t===e;function mt(t){var e=T.useContext(Y_),n=T.useMemo(()=>e?r=>{if(r!=null)return t(r)}:V1,[e,t]);return $ze.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Oze,e?e.store.getState:V1,e?e.store.getState:V1,n,_ze)}function Dze(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function zze(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Pze(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var N6=t=>Array.isArray(t)?t:[t];function Lze(t){const e=Array.isArray(t[0])?t[0]:t;return Pze(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Mze(t,e){const n=[],{length:r}=t;for(let s=0;s<r;s++)n.push(t[s].apply(null,e));return n}var Fze=class{constructor(t){this.value=t}deref(){return this.value}},Bze=typeof WeakRef<"u"?WeakRef:Fze,Uze=0,T6=1;function l1(){return{s:Uze,v:void 0,o:null,p:null}}function vX(t,e={}){let n=l1();const{resultEqualityCheck:r}=e;let s,a=0;function i(){let o=n;const{length:l}=arguments;for(let p=0,m=l;p<m;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const v=b.get(y);v===void 0?(o=l1(),b.set(y,o)):o=v}else{let b=o.p;b===null&&(o.p=b=new Map);const v=b.get(y);v===void 0?(o=l1(),b.set(y,o)):o=v}}const c=o;let f;if(o.s===T6)f=o.v;else if(f=t.apply(null,arguments),a++,r){const p=s?.deref?.()??s;p!=null&&r(p,f)&&(f=p,a!==0&&a--),s=typeof f=="object"&&f!==null||typeof f=="function"?new Bze(f):f}return c.s=T6,c.v=f,f}return i.clearCache=()=>{n=l1(),i.resetResultsCount()},i.resultsCount=()=>a,i.resetResultsCount=()=>{a=0},i}function Wze(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...s)=>{let a=0,i=0,o,l={},c=s.pop();typeof c=="object"&&(l=c,c=s.pop()),Dze(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const f={...n,...l},{memoize:p,memoizeOptions:m=[],argsMemoize:y=vX,argsMemoizeOptions:b=[]}=f,v=N6(m),x=N6(b),S=Lze(s),C=p(function(){return a++,c.apply(null,arguments)},...v),E=y(function(){i++;const I=Mze(S,arguments);return o=C.apply(null,I),o},...x);return Object.assign(E,{resultFunc:c,memoizedResultFunc:C,dependencies:S,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var Ce=Wze(vX),Vze=Object.assign((t,e=Ce)=>{zze(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((i,o,l)=>(i[n[l]]=o,i),{}))},{withTypes:()=>Vze}),RI={},OI={},_I={},E6;function qze(){return E6||(E6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,s,a)=>{if(r!==s){const i=e(r),o=e(s);if(i===o&&i===0){if(r<s)return a==="desc"?1:-1;if(r>s)return a==="desc"?-1:1}return a==="desc"?o-i:i-o}return 0};t.compareValues=n})(_I)),_I}var DI={},zI={},I6;function wX(){return I6||(I6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(zI)),zI}var A6;function Gze(){return A6||(A6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wX(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(a,i){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||i!=null&&Object.hasOwn(i,a)}t.isKey=s})(DI)),DI}var j6;function Hze(){return j6||(j6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qze(),n=Gze(),r=q_();function s(a,i,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(y=>String(y));const c=(y,b)=>{let v=y;for(let x=0;x<b.length&&v!=null;++x)v=v[b[x]];return v},f=(y,b)=>b==null||y==null?b:typeof y=="object"&&"key"in y?Object.hasOwn(b,y.key)?b[y.key]:c(b,y.path):typeof y=="function"?y(b):Array.isArray(y)?c(b,y):typeof b=="object"?b[y]:b,p=i.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:r.toPath(y)}));return a.map(y=>({original:y,criteria:p.map(b=>f(b,y))})).slice().sort((y,b)=>{for(let v=0;v<p.length;v++){const x=e.compareValues(y.criteria[v],b.criteria[v],o[v]);if(x!==0)return x}return 0}).map(y=>y.original)}t.orderBy=s})(OI)),OI}var PI={},$6;function Kze(){return $6||($6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const s=[],a=Math.floor(r),i=(o,l)=>{for(let c=0;c<o.length;c++){const f=o[c];Array.isArray(f)&&l<a?i(f,l+1):s.push(f)}};return i(n,0),s}t.flatten=e})(PI)),PI}var LI={},R6;function SX(){return R6||(R6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xX(),n=K_(),r=hX(),s=mX();function a(i,o,l){return r.isObject(l)&&(typeof o=="number"&&n.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?s.isEqualsSameValueZero(l[o],i):!1}t.isIterateeCall=a})(LI)),LI}var O6;function Xze(){return O6||(O6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hze(),n=Kze(),r=SX();function s(a,...i){const o=i.length;return o>1&&r.isIterateeCall(a,i[0],i[1])?i=[]:o>2&&r.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),e.orderBy(a,n.flatten(i),["asc"])}t.sortBy=s})(RI)),RI}var MI,_6;function Yze(){return _6||(_6=1,MI=Xze().sortBy),MI}var Qze=Yze();const tk=Ni(Qze);var CX=t=>t.legend.settings,Zze=t=>t.legend.size,Jze=t=>t.legend.payload;Ce([Jze,CX],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?tk(r,n):r});var c1=1;function ePe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=T.useState({height:0,left:0,top:0,width:0}),r=T.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),i={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(i.height-e.height)>c1||Math.abs(i.left-e.left)>c1||Math.abs(i.top-e.top)>c1||Math.abs(i.width-e.width)>c1)&&n({height:i.height,left:i.left,top:i.top,width:i.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function _s(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var tPe=typeof Symbol=="function"&&Symbol.observable||"@@observable",D6=tPe,FI=()=>Math.random().toString(36).substring(7).split("").join("."),nPe={INIT:`@@redux/INIT${FI()}`,REPLACE:`@@redux/REPLACE${FI()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${FI()}`},Pw=nPe;function Q_(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function kX(t,e,n){if(typeof t!="function")throw new Error(_s(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(_s(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(_s(1));return n(kX)(t,e)}let r=t,s=e,a=new Map,i=a,o=0,l=!1;function c(){i===a&&(i=new Map,a.forEach((x,S)=>{i.set(S,x)}))}function f(){if(l)throw new Error(_s(3));return s}function p(x){if(typeof x!="function")throw new Error(_s(4));if(l)throw new Error(_s(5));let S=!0;c();const C=o++;return i.set(C,x),function(){if(S){if(l)throw new Error(_s(6));S=!1,c(),i.delete(C),a=null}}}function m(x){if(!Q_(x))throw new Error(_s(7));if(typeof x.type>"u")throw new Error(_s(8));if(typeof x.type!="string")throw new Error(_s(17));if(l)throw new Error(_s(9));try{l=!0,s=r(s,x)}finally{l=!1}return(a=i).forEach(C=>{C()}),x}function y(x){if(typeof x!="function")throw new Error(_s(10));r=x,m({type:Pw.REPLACE})}function b(){const x=p;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(_s(11));function C(){const k=S;k.next&&k.next(f())}return C(),{unsubscribe:x(C)}},[D6](){return this}}}return m({type:Pw.INIT}),{dispatch:m,subscribe:p,getState:f,replaceReducer:y,[D6]:b}}function rPe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Pw.INIT})>"u")throw new Error(_s(12));if(typeof n(void 0,{type:Pw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(_s(13))})}function NX(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const i=e[a];typeof t[i]=="function"&&(n[i]=t[i])}const r=Object.keys(n);let s;try{rPe(n)}catch(a){s=a}return function(i={},o){if(s)throw s;let l=!1;const c={};for(let f=0;f<r.length;f++){const p=r[f],m=n[p],y=i[p],b=m(y,o);if(typeof b>"u")throw o&&o.type,new Error(_s(14));c[p]=b,l=l||b!==y}return l=l||r.length!==Object.keys(i).length,l?c:i}}function Lw(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function sPe(...t){return e=>(n,r)=>{const s=e(n,r);let a=()=>{throw new Error(_s(15))};const i={getState:s.getState,dispatch:(l,...c)=>a(l,...c)},o=t.map(l=>l(i));return a=Lw(...o)(s.dispatch),{...s,dispatch:a}}}function TX(t){return Q_(t)&&"type"in t&&typeof t.type=="string"}var EX=Symbol.for("immer-nothing"),z6=Symbol.for("immer-draftable"),Na=Symbol.for("immer-state");function mo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var pi=Object,yp=pi.getPrototypeOf,Mw="constructor",nk="prototype",zj="configurable",Fw="enumerable",q1="writable",t0="value",hc=t=>!!t&&!!t[Na];function Io(t){return t?IX(t)||sk(t)||!!t[z6]||!!t[Mw]?.[z6]||ak(t)||ik(t):!1}var aPe=pi[nk][Mw].toString(),P6=new WeakMap;function IX(t){if(!t||!Z_(t))return!1;const e=yp(t);if(e===null||e===pi[nk])return!0;const n=pi.hasOwnProperty.call(e,Mw)&&e[Mw];if(n===Object)return!0;if(!Fh(n))return!1;let r=P6.get(n);return r===void 0&&(r=Function.toString.call(n),P6.set(n,r)),r===aPe}function rk(t,e,n=!0){dx(t)===0?(n?Reflect.ownKeys(t):pi.keys(t)).forEach(s=>{e(s,t[s],t)}):t.forEach((r,s)=>e(s,r,t))}function dx(t){const e=t[Na];return e?e.type_:sk(t)?1:ak(t)?2:ik(t)?3:0}var L6=(t,e,n=dx(t))=>n===2?t.has(e):pi[nk].hasOwnProperty.call(t,e),Pj=(t,e,n=dx(t))=>n===2?t.get(e):t[e],Bw=(t,e,n,r=dx(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function iPe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var sk=Array.isArray,ak=t=>t instanceof Map,ik=t=>t instanceof Set,Z_=t=>typeof t=="object",Fh=t=>typeof t=="function",BI=t=>typeof t=="boolean";function oPe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Ql=t=>t.copy_||t.base_,J_=t=>t.modified_?t.copy_:t.base_;function Lj(t,e){if(ak(t))return new Map(t);if(ik(t))return new Set(t);if(sk(t))return Array[nk].slice.call(t);const n=IX(t);if(e===!0||e==="class_only"&&!n){const r=pi.getOwnPropertyDescriptors(t);delete r[Na];let s=Reflect.ownKeys(r);for(let a=0;a<s.length;a++){const i=s[a],o=r[i];o[q1]===!1&&(o[q1]=!0,o[zj]=!0),(o.get||o.set)&&(r[i]={[zj]:!0,[q1]:!0,[Fw]:o[Fw],[t0]:t[i]})}return pi.create(yp(t),r)}else{const r=yp(t);if(r!==null&&n)return{...t};const s=pi.create(r);return pi.assign(s,t)}}function eD(t,e=!1){return ok(t)||hc(t)||!Io(t)||(dx(t)>1&&pi.defineProperties(t,{set:u1,add:u1,clear:u1,delete:u1}),pi.freeze(t),e&&rk(t,(n,r)=>{eD(r,!0)},!1)),t}function lPe(){mo(2)}var u1={[t0]:lPe};function ok(t){return t===null||!Z_(t)?!0:pi.isFrozen(t)}var Uw="MapSet",Mj="Patches",M6="ArrayMethods",AX={};function Ef(t){const e=AX[t];return e||mo(0,t),e}var F6=t=>!!AX[t],n0,jX=()=>n0,cPe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:F6(Uw)?Ef(Uw):void 0,arrayMethodsPlugin_:F6(M6)?Ef(M6):void 0});function B6(t,e){e&&(t.patchPlugin_=Ef(Mj),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Fj(t){Bj(t),t.drafts_.forEach(uPe),t.drafts_=null}function Bj(t){t===n0&&(n0=t.parent_)}var U6=t=>n0=cPe(n0,t);function uPe(t){const e=t[Na];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function W6(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Na].modified_&&(Fj(e),mo(4)),Io(t)&&(t=V6(e,t));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(n[Na].base_,t,e)}else t=V6(e,n);return dPe(e,t,!0),Fj(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==EX?t:void 0}function V6(t,e){if(ok(e))return e;const n=e[Na];if(!n)return Ww(e,t.handledSet_,t);if(!lk(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);OX(n,t)}return n.copy_}function dPe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&eD(e,n)}function $X(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var lk=(t,e)=>t.scope_===e,fPe=[];function RX(t,e,n,r){const s=Ql(t),a=t.type_;if(r!==void 0&&Pj(s,r,a)===e){Bw(s,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;rk(s,(l,c)=>{if(hc(c)){const f=o.get(c)||[];f.push(l),o.set(c,f)}})}const i=t.draftLocations_.get(e)??fPe;for(const o of i)Bw(s,o,n,a)}function hPe(t,e,n){t.callbacks_.push(function(s){const a=e;if(!a||!lk(a,s))return;s.mapSetPlugin_?.fixSetContents(a);const i=J_(a);RX(t,a.draft_??a,i,n),OX(a,s)})}function OX(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const s=r.getPath(t);s&&r.generatePatches_(t,s,e)}$X(t)}}function pPe(t,e,n){const{scope_:r}=t;if(hc(n)){const s=n[Na];lk(s,r)&&s.callbacks_.push(function(){G1(t);const i=J_(s);RX(t,n,i,e)})}else Io(n)&&t.callbacks_.push(function(){const a=Ql(t);t.type_===3?a.has(n)&&Ww(n,r.handledSet_,r):Pj(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Ww(Pj(t.copy_,e,t.type_),r.handledSet_,r)})}function Ww(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||hc(t)||e.has(t)||!Io(t)||ok(t)||(e.add(t),rk(t,(r,s)=>{if(hc(s)){const a=s[Na];if(lk(a,n)){const i=J_(a);Bw(t,r,i,t.type_),$X(a)}}else Io(s)&&Ww(s,e,n)})),t}function mPe(t,e){const n=sk(t),r={type_:n?1:0,scope_:e?e.scope_:jX(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=r,a=Vw;n&&(s=[r],a=r0);const{revoke:i,proxy:o}=Proxy.revocable(s,a);return r.draft_=o,r.revoke_=i,[o,r]}var Vw={get(t,e){if(e===Na)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const s=Ql(t);if(!L6(s,e,t.type_))return gPe(t,s,e);const a=s[e];if(t.finalized_||!Io(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&oPe(e))return a;if(a===UI(t.base_,e)){G1(t);const i=t.type_===1?+e:e,o=Wj(t.scope_,a,t,i);return t.copy_[i]=o}return a},has(t,e){return e in Ql(t)},ownKeys(t){return Reflect.ownKeys(Ql(t))},set(t,e,n){const r=_X(Ql(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=UI(Ql(t),e),a=s?.[Na];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(iPe(n,s)&&(n!==void 0||L6(t.base_,e,t.type_)))return!0;G1(t),Uj(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),pPe(t,e,n)),!0},deleteProperty(t,e){return G1(t),UI(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Uj(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ql(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[q1]:!0,[zj]:t.type_!==1||e!=="length",[Fw]:r[Fw],[t0]:n[e]}},defineProperty(){mo(11)},getPrototypeOf(t){return yp(t.base_)},setPrototypeOf(){mo(12)}},r0={};for(let t in Vw){let e=Vw[t];r0[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}r0.deleteProperty=function(t,e){return r0.set.call(this,t,e,void 0)};r0.set=function(t,e,n){return Vw.set.call(this,t[0],e,n,t[0])};function UI(t,e){const n=t[Na];return(n?Ql(n):t)[e]}function gPe(t,e,n){const r=_X(e,n);return r?t0 in r?r[t0]:r.get?.call(t.draft_):void 0}function _X(t,e){if(!(e in t))return;let n=yp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=yp(n)}}function Uj(t){t.modified_||(t.modified_=!0,t.parent_&&Uj(t.parent_))}function G1(t){t.copy_||(t.assigned_=new Map,t.copy_=Lj(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var yPe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,s)=>{if(Fh(n)&&!Fh(r)){const i=r;r=n;const o=this;return function(c=i,...f){return o.produce(c,p=>r.call(this,p,...f))}}Fh(r)||mo(6),s!==void 0&&!Fh(s)&&mo(7);let a;if(Io(n)){const i=U6(this),o=Wj(i,n,void 0);let l=!0;try{a=r(o),l=!1}finally{l?Fj(i):Bj(i)}return B6(i,s),W6(a,i)}else if(!n||!Z_(n)){if(a=r(n),a===void 0&&(a=n),a===EX&&(a=void 0),this.autoFreeze_&&eD(a,!0),s){const i=[],o=[];Ef(Mj).generateReplacementPatches_(n,a,{patches_:i,inversePatches_:o}),s(i,o)}return a}else mo(1,n)},this.produceWithPatches=(n,r)=>{if(Fh(n))return(o,...l)=>this.produceWithPatches(o,c=>n(c,...l));let s,a;return[this.produce(n,r,(o,l)=>{s=o,a=l}),s,a]},BI(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),BI(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),BI(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Io(e)||mo(8),hc(e)&&(e=So(e));const n=U6(this),r=Wj(n,e,void 0);return r[Na].isManual_=!0,Bj(n),r}finishDraft(e,n){const r=e&&e[Na];(!r||!r.isManual_)&&mo(9);const{scope_:s}=r;return B6(s,n),W6(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const s=Ef(Mj).applyPatches_;return hc(e)?s(e,n):this.produce(e,a=>s(a,n))}};function Wj(t,e,n,r){const[s,a]=ak(e)?Ef(Uw).proxyMap_(e,n):ik(e)?Ef(Uw).proxySet_(e,n):mPe(e,n);return(n?.scope_??jX()).drafts_.push(s),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?hPe(n,a,r):a.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:c}=l;a.modified_&&c&&c.generatePatches_(a,[],l)}),s}function So(t){return hc(t)||mo(10,t),DX(t)}function DX(t){if(!Io(t)||ok(t))return t;const e=t[Na];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Lj(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Lj(t,!0);return rk(n,(s,a)=>{Bw(n,s,DX(a))},r),e&&(e.finalized_=!1),n}var bPe=new yPe,zX=bPe.produce;function PX(t){return({dispatch:n,getState:r})=>s=>a=>typeof a=="function"?a(n,r,t):s(a)}var xPe=PX(),vPe=PX,wPe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Lw:Lw.apply(null,arguments)};function Yi(t,e){function n(...r){if(e){let s=e(...r);if(!s)throw new Error(xi(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>TX(r)&&r.type===t,n}var LX=class Cy extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Cy.prototype)}static get[Symbol.species](){return Cy}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Cy(...e[0].concat(this)):new Cy(...e.concat(this))}};function q6(t){return Io(t)?zX(t,()=>{}):t}function d1(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function SPe(t){return typeof t=="boolean"}var CPe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=e??{};let i=new LX;return n&&(SPe(n)?i.push(xPe):i.push(vPe(n.extraArgument))),i},MX="RTK_autoBatch",Xn=()=>t=>({payload:t,meta:{[MX]:!0}}),G6=t=>e=>{setTimeout(e,t)},FX=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let s=!0,a=!1,i=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:G6(10):t.type==="callback"?t.queueNotification:G6(t.timeout),c=()=>{i=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const p=()=>s&&f(),m=r.subscribe(p);return o.add(f),()=>{m(),o.delete(f)}},dispatch(f){try{return s=!f?.meta?.[MX],a=!s,a&&(i||(i=!0,l(c))),r.dispatch(f)}finally{s=!0}}})},kPe=t=>function(n){const{autoBatch:r=!0}=n??{};let s=new LX(t);return r&&s.push(FX(typeof r=="object"?r:void 0)),s};function NPe(t){const e=CPe(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:a=void 0,enhancers:i=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(Q_(n))o=NX(n);else throw new Error(xi(1));let l;typeof r=="function"?l=r(e):l=e();let c=Lw;s&&(c=wPe({trace:!1,...typeof s=="object"&&s}));const f=sPe(...l),p=kPe(f);let m=typeof i=="function"?i(p):p();const y=c(...m);return kX(o,a,y)}function BX(t){const e={},n=[];let r;const s={addCase(a,i){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(xi(28));if(o in e)throw new Error(xi(29));return e[o]=i,s},addAsyncThunk(a,i){return i.pending&&(e[a.pending.type]=i.pending),i.rejected&&(e[a.rejected.type]=i.rejected),i.fulfilled&&(e[a.fulfilled.type]=i.fulfilled),i.settled&&n.push({matcher:a.settled,reducer:i.settled}),s},addMatcher(a,i){return n.push({matcher:a,reducer:i}),s},addDefaultCase(a){return r=a,s}};return t(s),[e,n,r]}function TPe(t){return typeof t=="function"}function EPe(t,e){let[n,r,s]=BX(e),a;if(TPe(t))a=()=>q6(t());else{const o=q6(t);a=()=>o}function i(o=a(),l){let c=[n[l.type],...r.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return c.filter(f=>!!f).length===0&&(c=[s]),c.reduce((f,p)=>{if(p)if(hc(f)){const y=p(f,l);return y===void 0?f:y}else{if(Io(f))return zX(f,m=>p(m,l));{const m=p(f,l);if(m===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return f},o)}return i.getInitialState=a,i}var IPe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",APe=(t=21)=>{let e="",n=t;for(;n--;)e+=IPe[Math.random()*64|0];return e},jPe=Symbol.for("rtk-slice-createasyncthunk");function $Pe(t,e){return`${t}/${e}`}function RPe({creators:t}={}){const e=t?.asyncThunk?.[jPe];return function(r){const{name:s,reducerPath:a=s}=r;if(!s)throw new Error(xi(11));const i=(typeof r.reducers=="function"?r.reducers(_Pe()):r.reducers)||{},o=Object.keys(i),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(E,k){const I=typeof E=="string"?E:E.type;if(!I)throw new Error(xi(12));if(I in l.sliceCaseReducersByType)throw new Error(xi(13));return l.sliceCaseReducersByType[I]=k,c},addMatcher(E,k){return l.sliceMatchers.push({matcher:E,reducer:k}),c},exposeAction(E,k){return l.actionCreators[E]=k,c},exposeCaseReducer(E,k){return l.sliceCaseReducersByName[E]=k,c}};o.forEach(E=>{const k=i[E],I={reducerName:E,type:$Pe(s,E),createNotation:typeof r.reducers=="function"};zPe(k)?LPe(I,k,c,e):DPe(I,k,c)});function f(){const[E={},k=[],I=void 0]=typeof r.extraReducers=="function"?BX(r.extraReducers):[r.extraReducers],$={...E,...l.sliceCaseReducersByType};return EPe(r.initialState,_=>{for(let z in $)_.addCase(z,$[z]);for(let z of l.sliceMatchers)_.addMatcher(z.matcher,z.reducer);for(let z of k)_.addMatcher(z.matcher,z.reducer);I&&_.addDefaultCase(I)})}const p=E=>E,m=new Map,y=new WeakMap;let b;function v(E,k){return b||(b=f()),b(E,k)}function x(){return b||(b=f()),b.getInitialState()}function S(E,k=!1){function I(_){let z=_[E];return typeof z>"u"&&k&&(z=d1(y,I,x)),z}function $(_=p){const z=d1(m,k,()=>new WeakMap);return d1(z,_,()=>{const L={};for(const[R,D]of Object.entries(r.selectors??{}))L[R]=OPe(D,_,()=>d1(y,_,x),k);return L})}return{reducerPath:E,getSelectors:$,get selectors(){return $(I)},selectSlice:I}}const C={name:s,reducer:v,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:x,...S(a),injectInto(E,{reducerPath:k,...I}={}){const $=k??a;return E.inject({reducerPath:$,reducer:v},I),{...C,...S($,!0)}}};return C}}function OPe(t,e,n,r){function s(a,...i){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...i)}return s.unwrapped=t,s}var Ya=RPe();function _Pe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function DPe({type:t,reducerName:e,createNotation:n},r,s){let a,i;if("reducer"in r){if(n&&!PPe(r))throw new Error(xi(17));a=r.reducer,i=r.prepare}else a=r;s.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,i?Yi(t,i):Yi(t))}function zPe(t){return t._reducerDefinitionType==="asyncThunk"}function PPe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function LPe({type:t,reducerName:e},n,r,s){if(!s)throw new Error(xi(18));const{payloadCreator:a,fulfilled:i,pending:o,rejected:l,settled:c,options:f}=n,p=s(t,a,f);r.exposeAction(e,p),i&&r.addCase(p.fulfilled,i),o&&r.addCase(p.pending,o),l&&r.addCase(p.rejected,l),c&&r.addMatcher(p.settled,c),r.exposeCaseReducer(e,{fulfilled:i||f1,pending:o||f1,rejected:l||f1,settled:c||f1})}function f1(){}var MPe="task",UX="listener",WX="completed",tD="cancelled",FPe=`task-${tD}`,BPe=`task-${WX}`,Vj=`${UX}-${tD}`,UPe=`${UX}-${WX}`,ck=class{constructor(t){this.code=t,this.message=`${MPe} ${tD} (reason: ${t})`}name="TaskAbortError";message},nD=(t,e)=>{if(typeof t!="function")throw new TypeError(xi(32))},qw=()=>{},VX=(t,e=qw)=>(t.catch(e),t),qX=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),tf=t=>{if(t.aborted)throw new ck(t.reason)};function GX(t,e){let n=qw;return new Promise((r,s)=>{const a=()=>s(new ck(t.reason));if(t.aborted){a();return}n=qX(t,a),e.finally(()=>n()).then(r,s)}).finally(()=>{n=qw})}var WPe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof ck?"cancelled":"rejected",error:n}}finally{e?.()}},Gw=t=>e=>VX(GX(t,e).then(n=>(tf(t),n))),HX=t=>{const e=Gw(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Zh}=Object,H6={},uk="listenerMiddleware",VPe=(t,e)=>{const n=r=>qX(t,()=>r.abort(t.reason));return(r,s)=>{nD(r);const a=new AbortController;n(a);const i=WPe(async()=>{tf(t),tf(a.signal);const o=await r({pause:Gw(a.signal),delay:HX(a.signal),signal:a.signal});return tf(a.signal),o},()=>a.abort(BPe));return s?.autoJoin&&e.push(i.catch(qw)),{result:Gw(t)(i),cancel(){a.abort(FPe)}}}},qPe=(t,e)=>{const n=async(r,s)=>{tf(e);let a=()=>{};const o=[new Promise((l,c)=>{let f=t({predicate:r,effect:(p,m)=>{m.unsubscribe(),l([p,m.getState(),m.getOriginalState()])}});a=()=>{f(),c()}})];s!=null&&o.push(new Promise(l=>setTimeout(l,s,null)));try{const l=await GX(e,Promise.race(o));return tf(e),l}finally{a()}};return(r,s)=>VX(n(r,s))},KX=t=>{let{type:e,actionCreator:n,matcher:r,predicate:s,effect:a}=t;if(e)s=Yi(e).match;else if(n)e=n.type,s=n.match;else if(r)s=r;else if(!s)throw new Error(xi(21));return nD(a),{predicate:s,type:e,effect:a}},XX=Zh(t=>{const{type:e,predicate:n,effect:r}=KX(t);return{id:APe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(xi(22))}}},{withTypes:()=>XX}),K6=(t,e)=>{const{type:n,effect:r,predicate:s}=KX(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===s)&&a.effect===r)},qj=t=>{t.pending.forEach(e=>{e.abort(Vj)})},GPe=(t,e)=>()=>{for(const n of e.keys())qj(n);t.clear()},X6=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},YX=Zh(Yi(`${uk}/add`),{withTypes:()=>YX}),HPe=Yi(`${uk}/removeAll`),QX=Zh(Yi(`${uk}/remove`),{withTypes:()=>QX}),KPe=(...t)=>{console.error(`${uk}/error`,...t)},fx=(t={})=>{const e=new Map,n=new Map,r=y=>{const b=n.get(y)??0;n.set(y,b+1)},s=y=>{const b=n.get(y)??1;b===1?n.delete(y):n.set(y,b-1)},{extra:a,onError:i=KPe}=t;nD(i);const o=y=>(y.unsubscribe=()=>e.delete(y.id),e.set(y.id,y),b=>{y.unsubscribe(),b?.cancelActive&&qj(y)}),l=y=>{const b=K6(e,y)??XX(y);return o(b)};Zh(l,{withTypes:()=>l});const c=y=>{const b=K6(e,y);return b&&(b.unsubscribe(),y.cancelActive&&qj(b)),!!b};Zh(c,{withTypes:()=>c});const f=async(y,b,v,x)=>{const S=new AbortController,C=qPe(l,S.signal),E=[];try{y.pending.add(S),r(y),await Promise.resolve(y.effect(b,Zh({},v,{getOriginalState:x,condition:(k,I)=>C(k,I).then(Boolean),take:C,delay:HX(S.signal),pause:Gw(S.signal),extra:a,signal:S.signal,fork:VPe(S.signal,E),unsubscribe:y.unsubscribe,subscribe:()=>{e.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((k,I,$)=>{k!==S&&(k.abort(Vj),$.delete(k))})},cancel:()=>{S.abort(Vj),y.pending.delete(S)},throwIfCancelled:()=>{tf(S.signal)}})))}catch(k){k instanceof ck||X6(i,k,{raisedBy:"effect"})}finally{await Promise.all(E),S.abort(UPe),s(y),y.pending.delete(S)}},p=GPe(e,n);return{middleware:y=>b=>v=>{if(!TX(v))return b(v);if(YX.match(v))return l(v.payload);if(HPe.match(v)){p();return}if(QX.match(v))return c(v.payload);let x=y.getState();const S=()=>{if(x===H6)throw new Error(xi(23));return x};let C;try{if(C=b(v),e.size>0){const E=y.getState(),k=Array.from(e.values());for(const I of k){let $=!1;try{$=I.predicate(v,E,x)}catch(_){$=!1,X6(i,_,{raisedBy:"predicate"})}$&&f(I,v,y,S)}}}finally{x=H6}return C},startListening:l,stopListening:c,clearListeners:p}};function xi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var XPe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},ZX=Ya({name:"chartLayout",initialState:XPe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,s,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(s=e.payload.bottom)!==null&&s!==void 0?s:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:YPe,setLayout:QPe,setChartSize:ZPe,setScale:JPe}=ZX.actions,eLe=ZX.reducer;function JX(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function Qt(t){return Number.isFinite(t)}function wl(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Wh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y6(Object(n),!0).forEach(function(r){tLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tLe(t,e,n){return(e=nLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nLe(t){var e=rLe(t,"string");return typeof e=="symbol"?e:e+""}function rLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vn(t,e,n){return Bs(t)||Bs(e)?n:vl(e)?Nf(t,e,n):typeof e=="function"?e(t):n}var sLe=(t,e,n)=>{if(e&&n){var{width:r,height:s}=n,{align:a,verticalAlign:i,layout:o}=e;if((o==="vertical"||o==="horizontal"&&i==="middle")&&a!=="center"&&at(t[a]))return Wh(Wh({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&i!=="middle"&&at(t[i]))return Wh(Wh({},t),{},{[i]:t[i]+(s||0)})}return t},El=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",eY=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var s,a,i=t.map(o=>(o.coordinate===e&&(s=!0),o.coordinate===n&&(a=!0),o.coordinate));return s||i.push(e),a||i.push(n),i},tY=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:s,range:a,scale:i,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:f,ticks:p,niceTicks:m,axisType:y}=t;if(!i)return null;var b=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,v=s==="category"&&i.bandwidth?i.bandwidth()/b:0;if(v=y==="angleAxis"&&a&&a.length>=2?na(a[0]-a[1])*2*v:v,p||m){var x=(p||m||[]).map((S,C)=>{var E=r?r.indexOf(S):S,k=i.map(E);return Qt(k)?{coordinate:k+v,value:S,offset:v,index:C}:null}).filter(Ma);return x}return l&&c?c.map((S,C)=>{var E=i.map(S);return Qt(E)?{coordinate:E+v,value:S,index:C,offset:v}:null}).filter(Ma):i.ticks&&f!=null?i.ticks(f).map((S,C)=>{var E=i.map(S);return Qt(E)?{coordinate:E+v,value:S,index:C,offset:v}:null}).filter(Ma):i.domain().map((S,C)=>{var E=i.map(S);return Qt(E)?{coordinate:E+v,value:r?r[S]:S,index:C,offset:v}:null}).filter(Ma)},aLe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var s=0;s<r;++s)for(var a=0,i=0,o=0;o<n;++o){var l=t[o],c=l?.[s];if(c!=null){var f=c[1],p=c[0],m=xl(f)?p:f;m>=0?(c[0]=a,a+=m,c[1]=a):(c[0]=i,i+=m,c[1]=i)}}}},iLe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var s=0;s<r;++s)for(var a=0,i=0;i<n;++i){var o=t[i],l=o?.[s];if(l!=null){var c=xl(l[1])?l[0]:l[1];c>=0?(l[0]=a,a+=c,l[1]=a):(l[0]=0,l[1]=0)}}}},oLe={sign:aLe,expand:z4e,none:kf,silhouette:P4e,wiggle:L4e,positive:iLe},lLe=(t,e,n)=>{var r,s=(r=oLe[n])!==null&&r!==void 0?r:kf,a=D4e().keys(e).value((o,l)=>Number(Vn(o,l,0))).order(_j).offset(s),i=a(t);return i.forEach((o,l)=>{o.forEach((c,f)=>{var p=Vn(t[f],e[l],0);Array.isArray(p)&&p.length===2&&at(p[0])&&at(p[1])&&(c[0]=p[0],c[1]=p[1])})}),i};function cLe(t){return t==null?void 0:String(t)}function Q6(t){var{axis:e,ticks:n,bandSize:r,entry:s,index:a,dataKey:i}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Bs(s[e.dataKey])){var o=oX(n,"value",s[e.dataKey]);if(o)return o.coordinate+r/2}return n!=null&&n[a]?n[a].coordinate+r/2:null}var l=Vn(s,Bs(i)?e.dataKey:i),c=e.scale.map(l);return at(c)?c:null}var uLe=t=>{var e=t.flat(2).filter(at);return[Math.min(...e),Math.max(...e)]},dLe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],fLe=(t,e,n)=>{if(t!=null)return dLe(Object.keys(t).reduce((r,s)=>{var a=t[s];if(!a)return r;var{stackedData:i}=a,o=i.reduce((l,c)=>{var f=JX(c,e,n),p=uLe(f);return!Qt(p[0])||!Qt(p[1])?l:[Math.min(l[0],p[0]),Math.max(l[1],p[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},Z6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,J6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Hw=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var s=tk(e,f=>f.coordinate),a=1/0,i=1,o=s.length;i<o;i++){var l=s[i],c=s[i-1];a=Math.min((l?.coordinate||0)-(c?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function eF(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:s,name:a}=t;return Wh(Wh({},e),{},{dataKey:n,payload:r,value:s,name:a})}function dk(t,e){if(t)return String(t);if(typeof e=="string")return e}var hLe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},pLe=(t,e)=>e==="centric"?t.angle:t.radius,Ic=t=>t.layout.width,Ac=t=>t.layout.height,mLe=t=>t.layout.scale,nY=t=>t.layout.margin,fk=Ce(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),hk=Ce(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),rY="data-recharts-item-index",sY="data-recharts-item-id",hx=60;function tF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function h1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tF(Object(n),!0).forEach(function(r){gLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gLe(t,e,n){return(e=yLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yLe(t){var e=bLe(t,"string");return typeof e=="symbol"?e:e+""}function bLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xLe=t=>t.brush.height;function vLe(t){var e=hk(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var s=typeof r.width=="number"?r.width:hx;return n+s}return n},0)}function wLe(t){var e=hk(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var s=typeof r.width=="number"?r.width:hx;return n+s}return n},0)}function SLe(t){var e=fk(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function CLe(t){var e=fk(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Ss=Ce([Ic,Ac,nY,xLe,vLe,wLe,SLe,CLe,CX,Zze],(t,e,n,r,s,a,i,o,l,c)=>{var f={left:(n.left||0)+s,right:(n.right||0)+a},p={top:(n.top||0)+i,bottom:(n.bottom||0)+o},m=h1(h1({},p),f),y=m.bottom;m.bottom+=r,m=sLe(m,l,c);var b=t-m.left-m.right,v=e-m.top-m.bottom;return h1(h1({brushBottom:y},m),{},{width:Math.max(b,0),height:Math.max(v,0)})}),kLe=Ce(Ss,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),aY=Ce(Ic,Ac,(t,e)=>({x:0,y:0,width:t,height:e})),NLe=T.createContext(null),Qa=()=>T.useContext(NLe)!=null,pk=t=>t.brush,mk=Ce([pk,Ss,nY],(t,e,n)=>({height:t.height,x:at(t.x)?t.x:e.left,y:at(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:at(t.width)?t.width:e.width})),WI={},VI={},qI={},nF;function TLe(){return nF||(nF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:s,edges:a}={}){let i,o=null;const l=a!=null&&a.includes("leading"),c=a==null||a.includes("trailing"),f=()=>{o!==null&&(n.apply(i,o),i=void 0,o=null)},p=()=>{c&&f(),v()};let m=null;const y=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,p()},r)},b=()=>{m!==null&&(clearTimeout(m),m=null)},v=()=>{b(),i=void 0,o=null},x=()=>{f()},S=function(...C){if(s?.aborted)return;i=this,o=C;const E=m==null;y(),l&&E&&f()};return S.schedule=y,S.cancel=v,S.flush=x,s?.addEventListener("abort",v,{once:!0}),S}t.debounce=e})(qI)),qI}var rF;function ELe(){return rF||(rF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TLe();function n(r,s=0,a={}){typeof a!="object"&&(a={});const{leading:i=!1,trailing:o=!0,maxWait:l}=a,c=Array(2);i&&(c[0]="leading"),o&&(c[1]="trailing");let f,p=null;const m=e.debounce(function(...v){f=r.apply(this,v),p=null},s,{edges:c}),y=function(...v){return l!=null&&(p===null&&(p=Date.now()),Date.now()-p>=l)?(f=r.apply(this,v),p=Date.now(),m.cancel(),m.schedule(),f):(m.apply(this,v),f)},b=()=>(m.flush(),f);return y.cancel=m.cancel,y.flush=b,y}t.debounce=n})(VI)),VI}var sF;function ILe(){return sF||(sF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ELe();function n(r,s=0,a={}){const{leading:i=!0,trailing:o=!0}=a;return e.debounce(r,s,{leading:i,maxWait:s,trailing:o})}t.throttle=n})(WI)),WI}var GI,aF;function ALe(){return aF||(aF=1,GI=ILe().throttle),GI}var jLe=ALe();const $Le=Ni(jLe);var Kw=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;console.warn(n.replace(/%s/g,()=>s[i++]))}},rl={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},iY=(t,e,n)=>{var{width:r=rl.width,height:s=rl.height,aspect:a,maxHeight:i}=n,o=Tf(r)?t:Number(r),l=Tf(s)?e:Number(s);return a&&a>0&&(o?l=o/a:l&&(o=l*a),i&&l!=null&&l>i&&(l=i)),{calculatedWidth:o,calculatedHeight:l}},RLe={width:0,height:0,overflow:"visible"},OLe={width:0,overflowX:"visible"},_Le={height:0,overflowY:"visible"},DLe={},zLe=t=>{var{width:e,height:n}=t,r=Tf(e),s=Tf(n);return r&&s?RLe:r?OLe:s?_Le:DLe};function PLe(t){var{width:e,height:n,aspect:r}=t,s=e,a=n;return s===void 0&&a===void 0?(s=rl.width,a=rl.height):s===void 0?s=r&&r>0?void 0:rl.width:a===void 0&&(a=r&&r>0?void 0:rl.height),{width:s,height:a}}function Gj(){return Gj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gj.apply(null,arguments)}function iF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function oF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iF(Object(n),!0).forEach(function(r){LLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LLe(t,e,n){return(e=MLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MLe(t){var e=FLe(t,"string");return typeof e=="symbol"?e:e+""}function FLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oY=T.createContext(rl.initialDimension);function BLe(t){return wl(t.width)&&wl(t.height)}function lY(t){var{children:e,width:n,height:r}=t,s=T.useMemo(()=>({width:n,height:r}),[n,r]);return BLe(s)?T.createElement(oY.Provider,{value:s},e):null}var rD=()=>T.useContext(oY),ULe=T.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=rl.initialDimension,width:s,height:a,minWidth:i=rl.minWidth,minHeight:o,maxHeight:l,children:c,debounce:f=rl.debounce,id:p,className:m,onResize:y,style:b={}}=t,v=T.useRef(null),x=T.useRef();x.current=y,T.useImperativeHandle(e,()=>v.current);var[S,C]=T.useState({containerWidth:r.width,containerHeight:r.height}),E=T.useCallback((z,L)=>{C(R=>{var D=Math.round(z),U=Math.round(L);return R.containerWidth===D&&R.containerHeight===U?R:{containerWidth:D,containerHeight:U}})},[]);T.useEffect(()=>{if(v.current==null||typeof ResizeObserver>"u")return Bm;var z=U=>{var X,V=U[0];if(V!=null){var{width:Y,height:B}=V.contentRect;E(Y,B),(X=x.current)===null||X===void 0||X.call(x,Y,B)}};f>0&&(z=$Le(z,f,{trailing:!0,leading:!1}));var L=new ResizeObserver(z),{width:R,height:D}=v.current.getBoundingClientRect();return E(R,D),L.observe(v.current),()=>{L.disconnect()}},[E,f]);var{containerWidth:k,containerHeight:I}=S;Kw(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:$,calculatedHeight:_}=iY(k,I,{width:s,height:a,aspect:n,maxHeight:l});return Kw($!=null&&$>0||_!=null&&_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,$,_,s,a,i,o,n),T.createElement("div",{id:p?"".concat(p):void 0,className:gn("recharts-responsive-container",m),style:oF(oF({},b),{},{width:s,height:a,minWidth:i,minHeight:o,maxHeight:l}),ref:v},T.createElement("div",{style:zLe({width:s,height:a})},T.createElement(lY,{width:$,height:_},c)))}),Xw=T.forwardRef((t,e)=>{var n=rD();if(wl(n.width)&&wl(n.height))return t.children;var{width:r,height:s}=PLe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:i}=iY(void 0,void 0,{width:r,height:s,aspect:t.aspect,maxHeight:t.maxHeight});return at(a)&&at(i)?T.createElement(lY,{width:a,height:i},t.children):T.createElement(ULe,Gj({},t,{width:r,height:s,ref:e}))});function sD(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var gk=()=>{var t,e=Qa(),n=mt(kLe),r=mt(mk),s=(t=mt(pk))===null||t===void 0?void 0:t.padding;return!e||!r||!s?n:{width:r.width-s.left-s.right,height:r.height-s.top-s.bottom,x:s.left,y:s.top}},WLe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},cY=()=>{var t;return(t=mt(Ss))!==null&&t!==void 0?t:WLe},uY=()=>mt(Ic),dY=()=>mt(Ac),Ln=t=>t.layout.layoutType,Um=()=>mt(Ln),aD=()=>{var t=Um();if(t==="horizontal"||t==="vertical")return t},fY=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},VLe=()=>{var t=Um();return t!==void 0},px=t=>{var e=rr(),n=Qa(),{width:r,height:s}=t,a=rD(),i=r,o=s;return a&&(i=a.width>0?a.width:r,o=a.height>0?a.height:s),T.useEffect(()=>{!n&&wl(i)&&wl(o)&&e(ZPe({width:i,height:o}))},[e,n,i,o]),null},hY=Symbol.for("immer-nothing"),lF=Symbol.for("immer-draftable"),ki=Symbol.for("immer-state");function go(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var s0=Object.getPrototypeOf;function bp(t){return!!t&&!!t[ki]}function If(t){return t?pY(t)||Array.isArray(t)||!!t[lF]||!!t.constructor?.[lF]||mx(t)||bk(t):!1}var qLe=Object.prototype.constructor.toString(),cF=new WeakMap;function pY(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=cF.get(n);return r===void 0&&(r=Function.toString.call(n),cF.set(n,r)),r===qLe}function Yw(t,e,n=!0){yk(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(s=>{e(s,t[s],t)}):t.forEach((r,s)=>e(s,r,t))}function yk(t){const e=t[ki];return e?e.type_:Array.isArray(t)?1:mx(t)?2:bk(t)?3:0}function Hj(t,e){return yk(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function mY(t,e,n){const r=yk(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function GLe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function mx(t){return t instanceof Map}function bk(t){return t instanceof Set}function _d(t){return t.copy_||t.base_}function Kj(t,e){if(mx(t))return new Map(t);if(bk(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=pY(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[ki];let s=Reflect.ownKeys(r);for(let a=0;a<s.length;a++){const i=s[a],o=r[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(s0(t),r)}else{const r=s0(t);if(r!==null&&n)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function iD(t,e=!1){return xk(t)||bp(t)||!If(t)||(yk(t)>1&&Object.defineProperties(t,{set:p1,add:p1,clear:p1,delete:p1}),Object.freeze(t),e&&Object.values(t).forEach(n=>iD(n,!0))),t}function HLe(){go(2)}var p1={value:HLe};function xk(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var KLe={};function Af(t){const e=KLe[t];return e||go(0,t),e}var a0;function gY(){return a0}function XLe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function uF(t,e){e&&(Af("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Xj(t){Yj(t),t.drafts_.forEach(YLe),t.drafts_=null}function Yj(t){t===a0&&(a0=t.parent_)}function dF(t){return a0=XLe(a0,t)}function YLe(t){const e=t[ki];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function fF(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ki].modified_&&(Xj(e),go(4)),If(t)&&(t=Qw(e,t),e.parent_||Zw(e,t)),e.patches_&&Af("Patches").generateReplacementPatches_(n[ki].base_,t,e.patches_,e.inversePatches_)):t=Qw(e,n,[]),Xj(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==hY?t:void 0}function Qw(t,e,n){if(xk(e))return e;const r=t.immer_.shouldUseStrictIteration(),s=e[ki];if(!s)return Yw(e,(a,i)=>hF(t,s,e,a,i,n),r),e;if(s.scope_!==t)return e;if(!s.modified_)return Zw(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let i=a,o=!1;s.type_===3&&(i=new Set(a),a.clear(),o=!0),Yw(i,(l,c)=>hF(t,s,a,l,c,n,o),r),Zw(t,a,!1),n&&t.patches_&&Af("Patches").generatePatches_(s,n,t.patches_,t.inversePatches_)}return s.copy_}function hF(t,e,n,r,s,a,i){if(s==null||typeof s!="object"&&!i)return;const o=xk(s);if(!(o&&!i)){if(bp(s)){const l=a&&e&&e.type_!==3&&!Hj(e.assigned_,r)?a.concat(r):void 0,c=Qw(t,s,l);if(mY(n,r,c),bp(c))t.canAutoFreeze_=!1;else return}else i&&n.add(s);if(If(s)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===s&&o)return;Qw(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(mx(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Zw(t,s)}}}function Zw(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&iD(e,n)}function QLe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:gY(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,a=oD;n&&(s=[r],a=i0);const{revoke:i,proxy:o}=Proxy.revocable(s,a);return r.draft_=o,r.revoke_=i,o}var oD={get(t,e){if(e===ki)return t;const n=_d(t);if(!Hj(n,e))return ZLe(t,n,e);const r=n[e];return t.finalized_||!If(r)?r:r===HI(t.base_,e)?(KI(t),t.copy_[e]=Zj(r,t)):r},has(t,e){return e in _d(t)},ownKeys(t){return Reflect.ownKeys(_d(t))},set(t,e,n){const r=yY(_d(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=HI(_d(t),e),a=s?.[ki];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(GLe(n,s)&&(n!==void 0||Hj(t.base_,e)))return!0;KI(t),Qj(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return HI(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,KI(t),Qj(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=_d(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){go(11)},getPrototypeOf(t){return s0(t.base_)},setPrototypeOf(){go(12)}},i0={};Yw(oD,(t,e)=>{i0[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});i0.deleteProperty=function(t,e){return i0.set.call(this,t,e,void 0)};i0.set=function(t,e,n){return oD.set.call(this,t[0],e,n,t[0])};function HI(t,e){const n=t[ki];return(n?_d(n):t)[e]}function ZLe(t,e,n){const r=yY(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function yY(t,e){if(!(e in t))return;let n=s0(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=s0(n)}}function Qj(t){t.modified_||(t.modified_=!0,t.parent_&&Qj(t.parent_))}function KI(t){t.copy_||(t.copy_=Kj(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var JLe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const i=this;return function(l=a,...c){return i.produce(l,f=>n.call(this,f,...c))}}typeof n!="function"&&go(6),r!==void 0&&typeof r!="function"&&go(7);let s;if(If(e)){const a=dF(this),i=Zj(e,void 0);let o=!0;try{s=n(i),o=!1}finally{o?Xj(a):Yj(a)}return uF(a,r),fF(s,a)}else if(!e||typeof e!="object"){if(s=n(e),s===void 0&&(s=e),s===hY&&(s=void 0),this.autoFreeze_&&iD(s,!0),r){const a=[],i=[];Af("Patches").generateReplacementPatches_(e,s,a,i),r(a,i)}return s}else go(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(i,...o)=>this.produceWithPatches(i,l=>e(l,...o));let r,s;return[this.produce(e,n,(i,o)=>{r=i,s=o}),r,s]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){If(t)||go(8),bp(t)&&(t=eMe(t));const e=dF(this),n=Zj(t,void 0);return n[ki].isManual_=!0,Yj(e),n}finishDraft(t,e){const n=t&&t[ki];(!n||!n.isManual_)&&go(9);const{scope_:r}=n;return uF(r,e),fF(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const s=e[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(e=e.slice(n+1));const r=Af("Patches").applyPatches_;return bp(t)?r(t,e):this.produce(t,s=>r(s,e))}};function Zj(t,e){const n=mx(t)?Af("MapSet").proxyMap_(t,e):bk(t)?Af("MapSet").proxySet_(t,e):QLe(t,e);return(e?e.scope_:gY()).drafts_.push(n),n}function eMe(t){return bp(t)||go(10,t),bY(t)}function bY(t){if(!If(t)||xk(t))return t;const e=t[ki];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Kj(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Kj(t,!0);return Yw(n,(s,a)=>{mY(n,s,bY(a))},r),e&&(e.finalized_=!1),n}var tMe=new JLe;tMe.produce;var nMe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},xY=Ya({name:"legend",initialState:nMe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Xn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,s=So(t).payload.indexOf(n);s>-1&&(t.payload[s]=r)},prepare:Xn()},removeLegendPayload:{reducer(t,e){var n=So(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Xn()}}}),{setLegendSize:GXe,setLegendSettings:HXe,addLegendPayload:vY,replaceLegendPayload:wY,removeLegendPayload:SY}=xY.actions,rMe=xY.reducer;function Jj(){return Jj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jj.apply(null,arguments)}function pF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ay(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pF(Object(n),!0).forEach(function(r){sMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sMe(t,e,n){return(e=aMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aMe(t){var e=iMe(t,"string");return typeof e=="symbol"?e:e+""}function iMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oMe(t){return Array.isArray(t)&&vl(t[0])&&vl(t[1])?t.join(" ~ "):t}var _h={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},lMe=t=>{var{separator:e=_h.separator,contentStyle:n,itemStyle:r,labelStyle:s=_h.labelStyle,payload:a,formatter:i,itemSorter:o,wrapperClassName:l,labelClassName:c,label:f,labelFormatter:p,accessibilityLayer:m=_h.accessibilityLayer}=t,y=()=>{if(a&&a.length){var I={padding:0,margin:0},$=(o?tk(a,o):a).map((_,z)=>{if(_.type==="none")return null;var L=_.formatter||i||oMe,{value:R,name:D}=_,U=R,X=D;if(L){var V=L(R,D,_,z,a);if(Array.isArray(V))[U,X]=V;else if(V!=null)U=V;else return null}var Y=ay(ay({},_h.itemStyle),{},{color:_.color||_h.itemStyle.color},r);return T.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:Y},vl(X)?T.createElement("span",{className:"recharts-tooltip-item-name"},X):null,vl(X)?T.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,T.createElement("span",{className:"recharts-tooltip-item-value"},U),T.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return T.createElement("ul",{className:"recharts-tooltip-item-list",style:I},$)}return null},b=ay(ay({},_h.contentStyle),n),v=ay({margin:0},s),x=!Bs(f),S=x?f:"",C=gn("recharts-default-tooltip",l),E=gn("recharts-tooltip-label",c);x&&p&&a!==void 0&&a!==null&&(S=p(f,a));var k=m?{role:"status","aria-live":"assertive"}:{};return T.createElement("div",Jj({className:C,style:b},k),T.createElement("p",{className:E,style:v},T.isValidElement(S)?S:"".concat(S)),y())},iy="recharts-tooltip-wrapper",cMe={visibility:"hidden"};function uMe(t){var{coordinate:e,translateX:n,translateY:r}=t;return gn(iy,{["".concat(iy,"-right")]:at(n)&&e&&at(e.x)&&n>=e.x,["".concat(iy,"-left")]:at(n)&&e&&at(e.x)&&n<e.x,["".concat(iy,"-bottom")]:at(r)&&e&&at(e.y)&&r>=e.y,["".concat(iy,"-top")]:at(r)&&e&&at(e.y)&&r<e.y})}function mF(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:s,position:a,reverseDirection:i,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=t;if(a&&at(a[r]))return a[r];var f=n[r]-o-(s>0?s:0),p=n[r]+s;if(e[r])return i[r]?f:p;var m=l[r];if(m==null)return 0;if(i[r]){var y=f,b=m;return y<b?Math.max(p,m):Math.max(f,m)}if(c==null)return 0;var v=p+o,x=m+c;return v>x?Math.max(f,m):Math.max(p,m)}function dMe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function fMe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:s,position:a,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=t,f,p,m;return o.height>0&&o.width>0&&n?(p=mF({allowEscapeViewBox:e,coordinate:n,key:"x",offset:s,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),m=mF({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),f=dMe({translateX:p,translateY:m,useTranslate3d:l})):f=cMe,{cssProperties:f,cssClasses:uMe({translateX:p,translateY:m,coordinate:n})}}function gF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function m1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gF(Object(n),!0).forEach(function(r){e$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e$(t,e,n){return(e=hMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hMe(t){var e=pMe(t,"string");return typeof e=="symbol"?e:e+""}function pMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class mMe extends T.PureComponent{constructor(){super(...arguments),e$(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),e$(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:s,children:a,coordinate:i,hasPayload:o,isAnimationActive:l,offset:c,position:f,reverseDirection:p,useTranslate3d:m,viewBox:y,wrapperStyle:b,lastBoundingBox:v,innerRef:x,hasPortalFromProps:S}=this.props,C=typeof c=="number"?c:c.x,E=typeof c=="number"?c:c.y,{cssClasses:k,cssProperties:I}=fMe({allowEscapeViewBox:n,coordinate:i,offsetLeft:C,offsetTop:E,position:f,reverseDirection:p,tooltipBox:{height:v.height,width:v.width},useTranslate3d:m,viewBox:y}),$=S?{}:m1(m1({transition:l&&e?"transform ".concat(r,"ms ").concat(s):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),_=m1(m1({},$),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},b);return T.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:_,ref:x},a)}}var CY=()=>{var t;return(t=mt(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function t$(){return t$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t$.apply(null,arguments)}function yF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yF(Object(n),!0).forEach(function(r){gMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gMe(t,e,n){return(e=yMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yMe(t){var e=bMe(t,"string");return typeof e=="symbol"?e:e+""}function bMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xF={curveBasisClosed:k4e,curveBasisOpen:N4e,curveBasis:C4e,curveBumpX:c4e,curveBumpY:u4e,curveLinearClosed:T4e,curveLinear:JC,curveMonotoneX:E4e,curveMonotoneY:I4e,curveNatural:A4e,curveStep:j4e,curveStepAfter:R4e,curveStepBefore:$4e},Jw=t=>Qt(t.x)&&Qt(t.y),vF=t=>t.base!=null&&Jw(t.base)&&Jw(t),oy=t=>t.x,ly=t=>t.y,xMe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(ux(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=xF["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return xF[n]||JC},wF={connectNulls:!1,type:"linear"},vMe=t=>{var{type:e=wF.type,points:n=[],baseLine:r,layout:s,connectNulls:a=wF.connectNulls}=t,i=xMe(e,s),o=a?n.filter(Jw):n;if(Array.isArray(r)){var l,c=n.map((b,v)=>bF(bF({},b),{},{base:r[v]}));s==="vertical"?l=o1().y(ly).x1(oy).x0(b=>b.base.x):l=o1().x(oy).y1(ly).y0(b=>b.base.y);var f=l.defined(vF).curve(i),p=a?c.filter(vF):c;return f(p)}var m;s==="vertical"&&at(r)?m=o1().y(ly).x1(oy).x0(r):at(r)?m=o1().x(oy).y1(ly).y0(r):m=KK().x(oy).y(ly);var y=m.defined(Jw).curve(i);return y(o)},Jh=t=>{var{className:e,points:n,path:r,pathRef:s}=t,a=Um();if((!n||!n.length)&&!r)return null;var i={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?vMe(i):r;return T.createElement("path",t$({},Ci(t),H_(t),{className:gn("recharts-curve",e),d:o===null?void 0:o,ref:s}))},wMe=["x","y","top","left","width","height","className"];function n$(){return n$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n$.apply(null,arguments)}function SF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function SMe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SF(Object(n),!0).forEach(function(r){CMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CMe(t,e,n){return(e=kMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kMe(t){var e=NMe(t,"string");return typeof e=="symbol"?e:e+""}function NMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TMe(t,e){if(t==null)return{};var n,r,s=EMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function EMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var IMe=(t,e,n,r,s,a)=>"M".concat(t,",").concat(s,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),AMe=t=>{var{x:e=0,y:n=0,top:r=0,left:s=0,width:a=0,height:i=0,className:o}=t,l=TMe(t,wMe),c=SMe({x:e,y:n,top:r,left:s,width:a,height:i},l);return!at(e)||!at(n)||!at(a)||!at(i)||!at(r)||!at(s)?null:T.createElement("path",n$({},ka(c),{className:gn("recharts-cross",o),d:IMe(e,n,a,i,r,s)}))};function jMe(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function CF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function kF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CF(Object(n),!0).forEach(function(r){$Me(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Me(t,e,n){return(e=RMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RMe(t){var e=OMe(t,"string");return typeof e=="symbol"?e:e+""}function OMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Me=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),kY=(t,e,n)=>t.map(r=>"".concat(_Me(r)," ").concat(e,"ms ").concat(n)).join(","),DMe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(s=>r.includes(s))),o0=(t,e)=>Object.keys(e).reduce((n,r)=>kF(kF({},n),{},{[r]:t(r,e[r])}),{});function NF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Hr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NF(Object(n),!0).forEach(function(r){zMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zMe(t,e,n){return(e=PMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PMe(t){var e=LMe(t,"string");return typeof e=="symbol"?e:e+""}function LMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eS=(t,e,n)=>t+(e-t)*n,r$=t=>{var{from:e,to:n}=t;return e!==n},NY=(t,e,n)=>{var r=o0((s,a)=>{if(r$(a)){var[i,o]=t(a.from,a.to,a.velocity);return Hr(Hr({},a),{},{from:i,velocity:o})}return a},e);return n<1?o0((s,a)=>r$(a)&&r[s]!=null?Hr(Hr({},a),{},{velocity:eS(a.velocity,r[s].velocity,n),from:eS(a.from,r[s].from,n)}):a,e):NY(t,r,n-1)};function MMe(t,e,n,r,s,a){var i,o=r.reduce((m,y)=>Hr(Hr({},m),{},{[y]:{from:t[y],velocity:0,to:e[y]}}),{}),l=()=>o0((m,y)=>y.from,o),c=()=>!Object.values(o).filter(r$).length,f=null,p=m=>{i||(i=m);var y=m-i,b=y/n.dt;o=NY(n,o,b),s(Hr(Hr(Hr({},t),e),l())),i=m,c()||(f=a.setTimeout(p))};return()=>(f=a.setTimeout(p),()=>{var m;(m=f)===null||m===void 0||m()})}function FMe(t,e,n,r,s,a,i){var o=null,l=s.reduce((p,m)=>{var y=t[m],b=e[m];return y==null||b==null?p:Hr(Hr({},p),{},{[m]:[y,b]})},{}),c,f=p=>{c||(c=p);var m=(p-c)/r,y=o0((v,x)=>eS(...x,n(m)),l);if(a(Hr(Hr(Hr({},t),e),y)),m<1)o=i.setTimeout(f);else{var b=o0((v,x)=>eS(...x,n(1)),l);a(Hr(Hr(Hr({},t),e),b))}};return()=>(o=i.setTimeout(f),()=>{var p;(p=o)===null||p===void 0||p()})}const BMe=(t,e,n,r,s,a)=>{var i=DMe(t,e);return n==null?()=>(s(Hr(Hr({},t),e)),()=>{}):n.isStepper===!0?MMe(t,e,n,i,s,a):FMe(t,e,n,r,i,s,a)};var tS=1e-4,TY=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],EY=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),TF=(t,e)=>n=>{var r=TY(t,e);return EY(r,n)},UMe=(t,e)=>n=>{var r=TY(t,e),s=[...r.map((a,i)=>a*i).slice(1),0];return EY(s,n)},WMe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var s=r.map(a=>parseFloat(a));return[s[0],s[1],s[2],s[3]]},VMe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s=WMe(n[0]);if(s)return s}}return n.length===4?n:[0,0,1,1]},qMe=(t,e,n,r)=>{var s=TF(t,n),a=TF(e,r),i=UMe(t,n),o=c=>c>1?1:c<0?0:c,l=c=>{for(var f=c>1?1:c,p=f,m=0;m<8;++m){var y=s(p)-f,b=i(p);if(Math.abs(y-f)<tS||b<tS)return a(p);p=o(p-y/b)}return a(p)};return l.isStepper=!1,l},EF=function(){return qMe(...VMe(...arguments))},GMe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:s=17}=e,a=(i,o,l)=>{var c=-(i-o)*n,f=l*r,p=l+(c-f)*s/1e3,m=l*s/1e3+i;return Math.abs(m-o)<tS&&Math.abs(p)<tS?[o,0]:[m,p]};return a.isStepper=!0,a.dt=s,a},HMe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return EF(t);case"spring":return GMe();default:if(t.split("(")[0]==="cubic-bezier")return EF(t)}return typeof t=="function"?t:null};function KMe(t){var e,n=()=>null,r=!1,s=null,a=i=>{if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,[l,...c]=o;if(typeof l=="number"){s=t.setTimeout(a.bind(null,c),l);return}a(l),s=t.setTimeout(a.bind(null,c));return}typeof i=="string"&&(e=i,n(e)),typeof i=="object"&&(e=i,n(e)),typeof i=="function"&&i()}};return{stop:()=>{r=!0},start:i=>{r=!1,s&&(s(),s=null),a(i)},subscribe:i=>(n=i,()=>{n=()=>null}),getTimeoutController:()=>t}}class XMe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),s=null,a=i=>{i-r>=n?e(i):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{s!=null&&cancelAnimationFrame(s)}}}function YMe(){return KMe(new XMe)}var QMe=T.createContext(YMe);function ZMe(t,e){var n=T.useContext(QMe);return T.useMemo(()=>e??n(t),[t,e,n])}var JMe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),gx={isSsr:JMe()},e6e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},IF={t:0},XI={t:1};function vk(t){var e=Vs(t,e6e),{isActive:n,canBegin:r,duration:s,easing:a,begin:i,onAnimationEnd:o,onAnimationStart:l,children:c}=e,f=n==="auto"?!gx.isSsr:n,p=ZMe(e.animationId,e.animationManager),[m,y]=T.useState(f?IF:XI),b=T.useRef(null);return T.useEffect(()=>{f||y(XI)},[f]),T.useEffect(()=>{if(!f||!r)return Bm;var v=BMe(IF,XI,HMe(a),s,y,p.getTimeoutController()),x=()=>{b.current=v()};return p.start([l,i,x,s,o]),()=>{p.stop(),b.current&&b.current(),o()}},[f,r,s,a,i,l,o,p]),c(m.t)}function wk(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=T.useRef(e0(e)),r=T.useRef(t);return r.current!==t&&(n.current=e0(e),r.current=t),n.current}var t6e=["radius"],n6e=["radius"],AF,jF,$F,RF,OF,_F,DF,zF,PF,LF;function MF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function FF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MF(Object(n),!0).forEach(function(r){r6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r6e(t,e,n){return(e=s6e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s6e(t){var e=a6e(t,"string");return typeof e=="symbol"?e:e+""}function a6e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nS(){return nS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nS.apply(null,arguments)}function BF(t,e){if(t==null)return{};var n,r,s=i6e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function i6e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Xo(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var UF=(t,e,n,r,s)=>{var a=bu(n),i=bu(r),o=Math.min(Math.abs(a)/2,Math.abs(i)/2),l=i>=0?1:-1,c=a>=0?1:-1,f=i>=0&&a>=0||i<0&&a<0?1:0,p;if(o>0&&Array.isArray(s)){for(var m=[0,0,0,0],y=0,b=4;y<b;y++){var v,x=(v=s[y])!==null&&v!==void 0?v:0;m[y]=x>o?o:x}p=hr(AF||(AF=Xo(["M",",",""])),t,e+l*m[0]),m[0]>0&&(p+=hr(jF||(jF=Xo(["A ",",",",0,0,",",",",",""])),m[0],m[0],f,t+c*m[0],e)),p+=hr($F||($F=Xo(["L ",",",""])),t+n-c*m[1],e),m[1]>0&&(p+=hr(RF||(RF=Xo(["A ",",",",0,0,",`,
        `,",",""])),m[1],m[1],f,t+n,e+l*m[1])),p+=hr(OF||(OF=Xo(["L ",",",""])),t+n,e+r-l*m[2]),m[2]>0&&(p+=hr(_F||(_F=Xo(["A ",",",",0,0,",`,
        `,",",""])),m[2],m[2],f,t+n-c*m[2],e+r)),p+=hr(DF||(DF=Xo(["L ",",",""])),t+c*m[3],e+r),m[3]>0&&(p+=hr(zF||(zF=Xo(["A ",",",",0,0,",`,
        `,",",""])),m[3],m[3],f,t,e+r-l*m[3])),p+="Z"}else if(o>0&&s===+s&&s>0){var S=Math.min(o,s);p=hr(PF||(PF=Xo(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+l*S,S,S,f,t+c*S,e,t+n-c*S,e,S,S,f,t+n,e+l*S,t+n,e+r-l*S,S,S,f,t+n-c*S,e+r,t+c*S,e+r,S,S,f,t,e+r-l*S)}else p=hr(LF||(LF=Xo(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return p},WF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},IY=t=>{var e=Vs(t,WF),n=T.useRef(null),[r,s]=T.useState(-1);T.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Z=n.current.getTotalLength();Z&&s(Z)}catch{}},[]);var{x:a,y:i,width:o,height:l,radius:c,className:f}=e,{animationEasing:p,animationDuration:m,animationBegin:y,isAnimationActive:b,isUpdateAnimationActive:v}=e,x=T.useRef(o),S=T.useRef(l),C=T.useRef(a),E=T.useRef(i),k=T.useMemo(()=>({x:a,y:i,width:o,height:l,radius:c}),[a,i,o,l,c]),I=wk(k,"rectangle-");if(a!==+a||i!==+i||o!==+o||l!==+l||o===0||l===0)return null;var $=gn("recharts-rectangle",f);if(!v){var _=ka(e),{radius:z}=_,L=BF(_,t6e);return T.createElement("path",nS({},L,{x:bu(a),y:bu(i),width:bu(o),height:bu(l),radius:typeof c=="number"?c:void 0,className:$,d:UF(a,i,o,l,c)}))}var R=x.current,D=S.current,U=C.current,X=E.current,V="0px ".concat(r===-1?1:r,"px"),Y="".concat(r,"px 0px"),B=kY(["strokeDasharray"],m,typeof p=="string"?p:WF.animationEasing);return T.createElement(vk,{animationId:I,key:I,canBegin:r>0,duration:m,easing:p,isActive:v,begin:y},Z=>{var J=Ps(R,o,Z),ae=Ps(D,l,Z),ee=Ps(U,a,Z),W=Ps(X,i,Z);n.current&&(x.current=J,S.current=ae,C.current=ee,E.current=W);var Q;b?Z>0?Q={transition:B,strokeDasharray:Y}:Q={strokeDasharray:V}:Q={strokeDasharray:Y};var se=ka(e),{radius:fe}=se,Ne=BF(se,n6e);return T.createElement("path",nS({},Ne,{radius:typeof c=="number"?c:void 0,className:$,d:UF(ee,W,J,ae,c),ref:n,style:FF(FF({},Q),e.style)}))})};function VF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VF(Object(n),!0).forEach(function(r){o6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o6e(t,e,n){return(e=l6e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l6e(t){var e=c6e(t,"string");return typeof e=="symbol"?e:e+""}function c6e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rS=Math.PI/180,u6e=t=>t*180/Math.PI,Lr=(t,e,n,r)=>({x:t+Math.cos(-rS*r)*n,y:e+Math.sin(-rS*r)*n}),AY=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},d6e=(t,e)=>{var{x:n,y:r}=t,{x:s,y:a}=e;return Math.sqrt((n-s)**2+(r-a)**2)},f6e=(t,e)=>{var{x:n,y:r}=t,{cx:s,cy:a}=e,i=d6e({x:n,y:r},{x:s,y:a});if(i<=0)return{radius:i,angle:0};var o=(n-s)/i,l=Math.acos(o);return r>a&&(l=2*Math.PI-l),{radius:i,angle:u6e(l),angleInRadian:l}},h6e=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),s=Math.floor(n/360),a=Math.min(r,s);return{startAngle:e-a*360,endAngle:n-a*360}},p6e=(t,e)=>{var{startAngle:n,endAngle:r}=e,s=Math.floor(n/360),a=Math.floor(r/360),i=Math.min(s,a);return t+i*360},m6e=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:s,angle:a}=f6e({x:n,y:r},e),{innerRadius:i,outerRadius:o}=e;if(s<i||s>o||s===0)return null;var{startAngle:l,endAngle:c}=h6e(e),f=a,p;if(l<=c){for(;f>c;)f-=360;for(;f<l;)f+=360;p=f>=l&&f<=c}else{for(;f>l;)f-=360;for(;f<c;)f+=360;p=f>=c&&f<=l}return p?qF(qF({},e),{},{radius:s,angle:p6e(f,e)}):null};function jY(t){var{cx:e,cy:n,radius:r,startAngle:s,endAngle:a}=t,i=Lr(e,n,r,s),o=Lr(e,n,r,a);return{points:[i,o],cx:e,cy:n,radius:r,startAngle:s,endAngle:a}}var GF,HF,KF,XF,YF,QF,ZF;function s$(){return s$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s$.apply(null,arguments)}function qd(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var g6e=(t,e)=>{var n=na(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},g1=t=>{var{cx:e,cy:n,radius:r,angle:s,sign:a,isExternal:i,cornerRadius:o,cornerIsExternal:l}=t,c=o*(i?1:-1)+r,f=Math.asin(o/c)/rS,p=l?s:s+a*f,m=Lr(e,n,c,p),y=Lr(e,n,r,p),b=l?s-a*f:s,v=Lr(e,n,c*Math.cos(f*rS),b);return{center:m,circleTangency:y,lineTangency:v,theta:f}},$Y=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:a,endAngle:i}=t,o=g6e(a,i),l=a+o,c=Lr(e,n,s,a),f=Lr(e,n,s,l),p=hr(GF||(GF=qd(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,s,s,+(Math.abs(o)>180),+(a>l),f.x,f.y);if(r>0){var m=Lr(e,n,r,a),y=Lr(e,n,r,l);p+=hr(HF||(HF=qd(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),y.x,y.y,r,r,+(Math.abs(o)>180),+(a<=l),m.x,m.y)}else p+=hr(KF||(KF=qd(["L ",","," Z"])),e,n);return p},y6e=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,cornerRadius:a,forceCornerRadius:i,cornerIsExternal:o,startAngle:l,endAngle:c}=t,f=na(c-l),{circleTangency:p,lineTangency:m,theta:y}=g1({cx:e,cy:n,radius:s,angle:l,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:b,lineTangency:v,theta:x}=g1({cx:e,cy:n,radius:s,angle:c,sign:-f,cornerRadius:a,cornerIsExternal:o}),S=o?Math.abs(l-c):Math.abs(l-c)-y-x;if(S<0)return i?hr(XF||(XF=qd(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),m.x,m.y,a,a,a*2,a,a,-a*2):$Y({cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:l,endAngle:c});var C=hr(YF||(YF=qd(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),m.x,m.y,a,a,+(f<0),p.x,p.y,s,s,+(S>180),+(f<0),b.x,b.y,a,a,+(f<0),v.x,v.y);if(r>0){var{circleTangency:E,lineTangency:k,theta:I}=g1({cx:e,cy:n,radius:r,angle:l,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:$,lineTangency:_,theta:z}=g1({cx:e,cy:n,radius:r,angle:c,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),L=o?Math.abs(l-c):Math.abs(l-c)-I-z;if(L<0&&a===0)return"".concat(C,"L").concat(e,",").concat(n,"Z");C+=hr(QF||(QF=qd(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),_.x,_.y,a,a,+(f<0),$.x,$.y,r,r,+(L>180),+(f>0),E.x,E.y,a,a,+(f<0),k.x,k.y)}else C+=hr(ZF||(ZF=qd(["L",",","Z"])),e,n);return C},b6e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},RY=t=>{var e=Vs(t,b6e),{cx:n,cy:r,innerRadius:s,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:f,className:p}=e;if(a<s||c===f)return null;var m=gn("recharts-sector",p),y=a-s,b=bi(i,y,0,!0),v;return b>0&&Math.abs(c-f)<360?v=y6e({cx:n,cy:r,innerRadius:s,outerRadius:a,cornerRadius:Math.min(b,y/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:f}):v=$Y({cx:n,cy:r,innerRadius:s,outerRadius:a,startAngle:c,endAngle:f}),T.createElement("path",s$({},ka(e),{className:m,d:v}))};function x6e(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(uX(e)){if(t==="centric"){var{cx:r,cy:s,innerRadius:a,outerRadius:i,angle:o}=e,l=Lr(r,s,a,o),c=Lr(r,s,i,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return jY(e)}}var YI={},QI={},ZI={},JF;function v6e(){return JF||(JF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wX();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(ZI)),ZI}var e8;function w6e(){return e8||(e8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v6e();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(QI)),QI}var t8;function S6e(){return t8||(t8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SX(),n=w6e();function r(s,a,i){i&&typeof i!="number"&&e.isIterateeCall(s,a,i)&&(a=i=void 0),s=n.toFinite(s),a===void 0?(a=s,s=0):a=n.toFinite(a),i=i===void 0?s<a?1:-1:n.toFinite(i);const o=Math.max(Math.ceil((a-s)/(i||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=s,s+=i;return l}t.range=r})(YI)),YI}var JI,n8;function C6e(){return n8||(n8=1,JI=S6e().range),JI}var k6e=C6e();const OY=Ni(k6e);function ku(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function N6e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lD(t){let e,n,r;t.length!==2?(e=ku,n=(o,l)=>ku(t(o),l),r=(o,l)=>t(o)-l):(e=t===ku||t===N6e?t:T6e,n=t,r=t);function s(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const p=c+f>>>1;n(o[p],l)<0?c=p+1:f=p}while(c<f)}return c}function a(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const p=c+f>>>1;n(o[p],l)<=0?c=p+1:f=p}while(c<f)}return c}function i(o,l,c=0,f=o.length){const p=s(o,l,c,f-1);return p>c&&r(o[p-1],l)>-r(o[p],l)?p-1:p}return{left:s,center:i,right:a}}function T6e(){return 0}function _Y(t){return t===null?NaN:+t}function*E6e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const I6e=lD(ku),yx=I6e.right;lD(_Y).center;class r8 extends Map{constructor(e,n=$6e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(s8(this,e))}has(e){return super.has(s8(this,e))}set(e,n){return super.set(A6e(this,e),n)}delete(e){return super.delete(j6e(this,e))}}function s8({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function A6e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function j6e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function $6e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function R6e(t=ku){if(t===ku)return DY;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function DY(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const O6e=Math.sqrt(50),_6e=Math.sqrt(10),D6e=Math.sqrt(2);function sS(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),a=r/Math.pow(10,s),i=a>=O6e?10:a>=_6e?5:a>=D6e?2:1;let o,l,c;return s<0?(c=Math.pow(10,-s)/i,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,s)*i,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?sS(t,e,n*2):[o,l,c]}function a$(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,a,i]=r?sS(e,t,n):sS(t,e,n);if(!(a>=s))return[];const o=a-s+1,l=new Array(o);if(r)if(i<0)for(let c=0;c<o;++c)l[c]=(a-c)/-i;else for(let c=0;c<o;++c)l[c]=(a-c)*i;else if(i<0)for(let c=0;c<o;++c)l[c]=(s+c)/-i;else for(let c=0;c<o;++c)l[c]=(s+c)*i;return l}function i$(t,e,n){return e=+e,t=+t,n=+n,sS(t,e,n)[2]}function o$(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?i$(e,t,n):i$(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function a8(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function i8(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function zY(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?DY:R6e(s);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,f=Math.log(l),p=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*p*(l-p)/l)*(c-l/2<0?-1:1),y=Math.max(n,Math.floor(e-c*p/l+m)),b=Math.min(r,Math.floor(e+(l-c)*p/l+m));zY(t,e,y,b,s)}const a=t[e];let i=n,o=r;for(cy(t,n,e),s(t[r],a)>0&&cy(t,n,r);i<o;){for(cy(t,i,o),++i,--o;s(t[i],a)<0;)++i;for(;s(t[o],a)>0;)--o}s(t[n],a)===0?cy(t,n,o):(++o,cy(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function cy(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function z6e(t,e,n){if(t=Float64Array.from(E6e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return i8(t);if(e>=1)return a8(t);var r,s=(r-1)*e,a=Math.floor(s),i=a8(zY(t,a).subarray(0,a+1)),o=i8(t.subarray(a+1));return i+(o-i)*(s-a)}}function P6e(t,e,n=_Y){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,a=Math.floor(s),i=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return i+(o-i)*(s-a)}}function L6e(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(s);++r<s;)a[r]=t+r*n;return a}function to(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function jc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const l$=Symbol("implicit");function cD(){var t=new r8,e=[],n=[],r=l$;function s(a){let i=t.get(a);if(i===void 0){if(r!==l$)return r;t.set(a,i=e.push(a)-1)}return n[i%n.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new r8;for(const i of a)t.has(i)||t.set(i,e.push(i)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return cD(e,n).unknown(r)},to.apply(s,arguments),s}function uD(){var t=cD().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,a,i,o=!1,l=0,c=0,f=.5;delete t.unknown;function p(){var m=e().length,y=s<r,b=y?s:r,v=y?r:s;a=(v-b)/Math.max(1,m-l+c*2),o&&(a=Math.floor(a)),b+=(v-b-a*(m-l))*f,i=a*(1-l),o&&(b=Math.round(b),i=Math.round(i));var x=L6e(m).map(function(S){return b+a*S});return n(y?x.reverse():x)}return t.domain=function(m){return arguments.length?(e(m),p()):e()},t.range=function(m){return arguments.length?([r,s]=m,r=+r,s=+s,p()):[r,s]},t.rangeRound=function(m){return[r,s]=m,r=+r,s=+s,o=!0,p()},t.bandwidth=function(){return i},t.step=function(){return a},t.round=function(m){return arguments.length?(o=!!m,p()):o},t.padding=function(m){return arguments.length?(l=Math.min(1,c=+m),p()):l},t.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),p()):l},t.paddingOuter=function(m){return arguments.length?(c=+m,p()):c},t.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),p()):f},t.copy=function(){return uD(e(),[r,s]).round(o).paddingInner(l).paddingOuter(c).align(f)},to.apply(p(),arguments)}function PY(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return PY(e())},t}function M6e(){return PY(uD.apply(null,arguments).paddingInner(1))}function dD(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function LY(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function bx(){}var l0=.7,aS=1/l0,ep="\\s*([+-]?\\d+)\\s*",c0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",F6e=/^#([0-9a-f]{3,8})$/,B6e=new RegExp(`^rgb\\(${ep},${ep},${ep}\\)$`),U6e=new RegExp(`^rgb\\(${fl},${fl},${fl}\\)$`),W6e=new RegExp(`^rgba\\(${ep},${ep},${ep},${c0}\\)$`),V6e=new RegExp(`^rgba\\(${fl},${fl},${fl},${c0}\\)$`),q6e=new RegExp(`^hsl\\(${c0},${fl},${fl}\\)$`),G6e=new RegExp(`^hsla\\(${c0},${fl},${fl},${c0}\\)$`),o8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dD(bx,u0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:l8,formatHex:l8,formatHex8:H6e,formatHsl:K6e,formatRgb:c8,toString:c8});function l8(){return this.rgb().formatHex()}function H6e(){return this.rgb().formatHex8()}function K6e(){return MY(this).formatHsl()}function c8(){return this.rgb().formatRgb()}function u0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=F6e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?u8(e):n===3?new Fa(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?y1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?y1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=B6e.exec(t))?new Fa(e[1],e[2],e[3],1):(e=U6e.exec(t))?new Fa(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=W6e.exec(t))?y1(e[1],e[2],e[3],e[4]):(e=V6e.exec(t))?y1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=q6e.exec(t))?h8(e[1],e[2]/100,e[3]/100,1):(e=G6e.exec(t))?h8(e[1],e[2]/100,e[3]/100,e[4]):o8.hasOwnProperty(t)?u8(o8[t]):t==="transparent"?new Fa(NaN,NaN,NaN,0):null}function u8(t){return new Fa(t>>16&255,t>>8&255,t&255,1)}function y1(t,e,n,r){return r<=0&&(t=e=n=NaN),new Fa(t,e,n,r)}function X6e(t){return t instanceof bx||(t=u0(t)),t?(t=t.rgb(),new Fa(t.r,t.g,t.b,t.opacity)):new Fa}function c$(t,e,n,r){return arguments.length===1?X6e(t):new Fa(t,e,n,r??1)}function Fa(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}dD(Fa,c$,LY(bx,{brighter(t){return t=t==null?aS:Math.pow(aS,t),new Fa(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?l0:Math.pow(l0,t),new Fa(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Fa(nf(this.r),nf(this.g),nf(this.b),iS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:d8,formatHex:d8,formatHex8:Y6e,formatRgb:f8,toString:f8}));function d8(){return`#${Gd(this.r)}${Gd(this.g)}${Gd(this.b)}`}function Y6e(){return`#${Gd(this.r)}${Gd(this.g)}${Gd(this.b)}${Gd((isNaN(this.opacity)?1:this.opacity)*255)}`}function f8(){const t=iS(this.opacity);return`${t===1?"rgb(":"rgba("}${nf(this.r)}, ${nf(this.g)}, ${nf(this.b)}${t===1?")":`, ${t})`}`}function iS(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function nf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Gd(t){return t=nf(t),(t<16?"0":"")+t.toString(16)}function h8(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new yo(t,e,n,r)}function MY(t){if(t instanceof yo)return new yo(t.h,t.s,t.l,t.opacity);if(t instanceof bx||(t=u0(t)),!t)return new yo;if(t instanceof yo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),i=NaN,o=a-s,l=(a+s)/2;return o?(e===a?i=(n-r)/o+(n<r)*6:n===a?i=(r-e)/o+2:i=(e-n)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new yo(i,o,l,t.opacity)}function Q6e(t,e,n,r){return arguments.length===1?MY(t):new yo(t,e,n,r??1)}function yo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}dD(yo,Q6e,LY(bx,{brighter(t){return t=t==null?aS:Math.pow(aS,t),new yo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?l0:Math.pow(l0,t),new yo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Fa(eA(t>=240?t-240:t+120,s,r),eA(t,s,r),eA(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new yo(p8(this.h),b1(this.s),b1(this.l),iS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=iS(this.opacity);return`${t===1?"hsl(":"hsla("}${p8(this.h)}, ${b1(this.s)*100}%, ${b1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function p8(t){return t=(t||0)%360,t<0?t+360:t}function b1(t){return Math.max(0,Math.min(1,t||0))}function eA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const fD=t=>()=>t;function Z6e(t,e){return function(n){return t+n*e}}function J6e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function eFe(t){return(t=+t)==1?FY:function(e,n){return n-e?J6e(e,n,t):fD(isNaN(e)?n:e)}}function FY(t,e){var n=e-t;return n?Z6e(t,n):fD(isNaN(t)?e:t)}const m8=(function t(e){var n=eFe(e);function r(s,a){var i=n((s=c$(s)).r,(a=c$(a)).r),o=n(s.g,a.g),l=n(s.b,a.b),c=FY(s.opacity,a.opacity);return function(f){return s.r=i(f),s.g=o(f),s.b=l(f),s.opacity=c(f),s+""}}return r.gamma=t,r})(1);function tFe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(a){for(s=0;s<n;++s)r[s]=t[s]*(1-a)+e[s]*a;return r}}function nFe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function rFe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),a=new Array(n),i;for(i=0;i<r;++i)s[i]=Wm(t[i],e[i]);for(;i<n;++i)a[i]=e[i];return function(o){for(i=0;i<r;++i)a[i]=s[i](o);return a}}function sFe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function oS(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function aFe(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=Wm(t[s],e[s]):r[s]=e[s];return function(a){for(s in n)r[s]=n[s](a);return r}}var u$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tA=new RegExp(u$.source,"g");function iFe(t){return function(){return t}}function oFe(t){return function(e){return t(e)+""}}function lFe(t,e){var n=u$.lastIndex=tA.lastIndex=0,r,s,a,i=-1,o=[],l=[];for(t=t+"",e=e+"";(r=u$.exec(t))&&(s=tA.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:oS(r,s)})),n=tA.lastIndex;return n<e.length&&(a=e.slice(n),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?oFe(l[0].x):iFe(e):(e=l.length,function(c){for(var f=0,p;f<e;++f)o[(p=l[f]).i]=p.x(c);return o.join("")})}function Wm(t,e){var n=typeof e,r;return e==null||n==="boolean"?fD(e):(n==="number"?oS:n==="string"?(r=u0(e))?(e=r,m8):lFe:e instanceof u0?m8:e instanceof Date?sFe:nFe(e)?tFe:Array.isArray(e)?rFe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?aFe:oS)(t,e)}function hD(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function cFe(t,e){e===void 0&&(e=t,t=Wm);for(var n=0,r=e.length-1,s=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(s,s=e[++n]);return function(i){var o=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return a[o](i-o)}}function uFe(t){return function(){return t}}function lS(t){return+t}var g8=[0,1];function ga(t){return t}function d$(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:uFe(isNaN(e)?NaN:.5)}function dFe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function fFe(t,e,n){var r=t[0],s=t[1],a=e[0],i=e[1];return s<r?(r=d$(s,r),a=n(i,a)):(r=d$(r,s),a=n(a,i)),function(o){return a(r(o))}}function hFe(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),a=new Array(r),i=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<r;)s[i]=d$(t[i],t[i+1]),a[i]=n(e[i],e[i+1]);return function(o){var l=yx(t,o,1,r)-1;return a[l](s[l](o))}}function xx(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Sk(){var t=g8,e=g8,n=Wm,r,s,a,i=ga,o,l,c;function f(){var m=Math.min(t.length,e.length);return i!==ga&&(i=dFe(t[0],t[m-1])),o=m>2?hFe:fFe,l=c=null,p}function p(m){return m==null||isNaN(m=+m)?a:(l||(l=o(t.map(r),e,n)))(r(i(m)))}return p.invert=function(m){return i(s((c||(c=o(e,t.map(r),oS)))(m)))},p.domain=function(m){return arguments.length?(t=Array.from(m,lS),f()):t.slice()},p.range=function(m){return arguments.length?(e=Array.from(m),f()):e.slice()},p.rangeRound=function(m){return e=Array.from(m),n=hD,f()},p.clamp=function(m){return arguments.length?(i=m?!0:ga,f()):i!==ga},p.interpolate=function(m){return arguments.length?(n=m,f()):n},p.unknown=function(m){return arguments.length?(a=m,p):a},function(m,y){return r=m,s=y,f()}}function pD(){return Sk()(ga,ga)}function pFe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function cS(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function xp(t){return t=cS(Math.abs(t)),t?t[1]:NaN}function mFe(t,e){return function(n,r){for(var s=n.length,a=[],i=0,o=t[0],l=0;s>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(s-=o,s+o)),!((l+=o+1)>r));)o=t[i=(i+1)%t.length];return a.reverse().join(e)}}function gFe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var yFe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function d0(t){if(!(e=yFe.exec(t)))throw new Error("invalid format: "+t);var e;return new mD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}d0.prototype=mD.prototype;function mD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}mD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bFe(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var uS;function xFe(t,e){var n=cS(t,e);if(!n)return uS=void 0,t.toPrecision(e);var r=n[0],s=n[1],a=s-(uS=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+cS(t,Math.max(0,e+a-1))[0]}function y8(t,e){var n=cS(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const b8={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:pFe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>y8(t*100,e),r:y8,s:xFe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function x8(t){return t}var v8=Array.prototype.map,w8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vFe(t){var e=t.grouping===void 0||t.thousands===void 0?x8:mFe(v8.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?x8:gFe(v8.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(p,m){p=d0(p);var y=p.fill,b=p.align,v=p.sign,x=p.symbol,S=p.zero,C=p.width,E=p.comma,k=p.precision,I=p.trim,$=p.type;$==="n"?(E=!0,$="g"):b8[$]||(k===void 0&&(k=12),I=!0,$="g"),(S||y==="0"&&b==="=")&&(S=!0,y="0",b="=");var _=(m&&m.prefix!==void 0?m.prefix:"")+(x==="$"?n:x==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():""),z=(x==="$"?r:/[%p]/.test($)?i:"")+(m&&m.suffix!==void 0?m.suffix:""),L=b8[$],R=/[defgprs%]/.test($);k=k===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function D(U){var X=_,V=z,Y,B,Z;if($==="c")V=L(U)+V,U="";else{U=+U;var J=U<0||1/U<0;if(U=isNaN(U)?l:L(Math.abs(U),k),I&&(U=bFe(U)),J&&+U==0&&v!=="+"&&(J=!1),X=(J?v==="("?v:o:v==="-"||v==="("?"":v)+X,V=($==="s"&&!isNaN(U)&&uS!==void 0?w8[8+uS/3]:"")+V+(J&&v==="("?")":""),R){for(Y=-1,B=U.length;++Y<B;)if(Z=U.charCodeAt(Y),48>Z||Z>57){V=(Z===46?s+U.slice(Y+1):U.slice(Y))+V,U=U.slice(0,Y);break}}}E&&!S&&(U=e(U,1/0));var ae=X.length+U.length+V.length,ee=ae<C?new Array(C-ae+1).join(y):"";switch(E&&S&&(U=e(ee+U,ee.length?C-V.length:1/0),ee=""),b){case"<":U=X+U+V+ee;break;case"=":U=X+ee+U+V;break;case"^":U=ee.slice(0,ae=ee.length>>1)+X+U+V+ee.slice(ae);break;default:U=ee+X+U+V;break}return a(U)}return D.toString=function(){return p+""},D}function f(p,m){var y=Math.max(-8,Math.min(8,Math.floor(xp(m)/3)))*3,b=Math.pow(10,-y),v=c((p=d0(p),p.type="f",p),{suffix:w8[8+y/3]});return function(x){return v(b*x)}}return{format:c,formatPrefix:f}}var x1,gD,BY;wFe({thousands:",",grouping:[3],currency:["$",""]});function wFe(t){return x1=vFe(t),gD=x1.format,BY=x1.formatPrefix,x1}function SFe(t){return Math.max(0,-xp(Math.abs(t)))}function CFe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xp(e)/3)))*3-xp(Math.abs(t)))}function kFe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xp(e)-xp(t))+1}function UY(t,e,n,r){var s=o$(t,e,n),a;switch(r=d0(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=CFe(s,i))&&(r.precision=a),BY(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=kFe(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=SFe(s))&&(r.precision=a-(r.type==="%")*2);break}}return gD(r)}function Ju(t){var e=t.domain;return t.ticks=function(n){var r=e();return a$(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return UY(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,a=r.length-1,i=r[s],o=r[a],l,c,f=10;for(o<i&&(c=i,i=o,o=c,c=s,s=a,a=c);f-- >0;){if(c=i$(i,o,n),c===l)return r[s]=i,r[a]=o,e(r);if(c>0)i=Math.floor(i/c)*c,o=Math.ceil(o/c)*c;else if(c<0)i=Math.ceil(i*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function WY(){var t=pD();return t.copy=function(){return xx(t,WY())},to.apply(t,arguments),Ju(t)}function VY(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,lS),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return VY(t).unknown(e)},t=arguments.length?Array.from(t,lS):[0,1],Ju(n)}function qY(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],a=t[r],i;return a<s&&(i=n,n=r,r=i,i=s,s=a,a=i),t[n]=e.floor(s),t[r]=e.ceil(a),t}function S8(t){return Math.log(t)}function C8(t){return Math.exp(t)}function NFe(t){return-Math.log(-t)}function TFe(t){return-Math.exp(-t)}function EFe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function IFe(t){return t===10?EFe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function AFe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function k8(t){return(e,n)=>-t(-e,n)}function yD(t){const e=t(S8,C8),n=e.domain;let r=10,s,a;function i(){return s=AFe(r),a=IFe(r),n()[0]<0?(s=k8(s),a=k8(a),t(NFe,TFe)):t(S8,C8),e}return e.base=function(o){return arguments.length?(r=+o,i()):r},e.domain=function(o){return arguments.length?(n(o),i()):n()},e.ticks=o=>{const l=n();let c=l[0],f=l[l.length-1];const p=f<c;p&&([c,f]=[f,c]);let m=s(c),y=s(f),b,v;const x=o==null?10:+o;let S=[];if(!(r%1)&&y-m<x){if(m=Math.floor(m),y=Math.ceil(y),c>0){for(;m<=y;++m)for(b=1;b<r;++b)if(v=m<0?b/a(-m):b*a(m),!(v<c)){if(v>f)break;S.push(v)}}else for(;m<=y;++m)for(b=r-1;b>=1;--b)if(v=m>0?b/a(-m):b*a(m),!(v<c)){if(v>f)break;S.push(v)}S.length*2<x&&(S=a$(c,f,x))}else S=a$(m,y,Math.min(y-m,x)).map(a);return p?S.reverse():S},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=d0(l)).precision==null&&(l.trim=!0),l=gD(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return f=>{let p=f/a(Math.round(s(f)));return p*r<r-.5&&(p*=r),p<=c?l(f):""}},e.nice=()=>n(qY(n(),{floor:o=>a(Math.floor(s(o))),ceil:o=>a(Math.ceil(s(o)))})),e}function GY(){const t=yD(Sk()).domain([1,10]);return t.copy=()=>xx(t,GY()).base(t.base()),to.apply(t,arguments),t}function N8(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function T8(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function bD(t){var e=1,n=t(N8(e),T8(e));return n.constant=function(r){return arguments.length?t(N8(e=+r),T8(e)):e},Ju(n)}function HY(){var t=bD(Sk());return t.copy=function(){return xx(t,HY()).constant(t.constant())},to.apply(t,arguments)}function E8(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function jFe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function $Fe(t){return t<0?-t*t:t*t}function xD(t){var e=t(ga,ga),n=1;function r(){return n===1?t(ga,ga):n===.5?t(jFe,$Fe):t(E8(n),E8(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},Ju(e)}function vD(){var t=xD(Sk());return t.copy=function(){return xx(t,vD()).exponent(t.exponent())},to.apply(t,arguments),t}function RFe(){return vD.apply(null,arguments).exponent(.5)}function I8(t){return Math.sign(t)*t*t}function OFe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function KY(){var t=pD(),e=[0,1],n=!1,r;function s(a){var i=OFe(t(a));return isNaN(i)?r:n?Math.round(i):i}return s.invert=function(a){return t.invert(I8(a))},s.domain=function(a){return arguments.length?(t.domain(a),s):t.domain()},s.range=function(a){return arguments.length?(t.range((e=Array.from(a,lS)).map(I8)),s):e.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(n=!!a,s):n},s.clamp=function(a){return arguments.length?(t.clamp(a),s):t.clamp()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return KY(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},to.apply(s,arguments),Ju(s)}function XY(){var t=[],e=[],n=[],r;function s(){var i=0,o=Math.max(1,e.length);for(n=new Array(o-1);++i<o;)n[i-1]=P6e(t,i/o);return a}function a(i){return i==null||isNaN(i=+i)?r:e[yx(n,i)]}return a.invertExtent=function(i){var o=e.indexOf(i);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let o of i)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(ku),s()},a.range=function(i){return arguments.length?(e=Array.from(i),s()):e.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return XY().domain(t).range(e).unknown(r)},to.apply(a,arguments)}function YY(){var t=0,e=1,n=1,r=[.5],s=[0,1],a;function i(l){return l!=null&&l<=l?s[yx(r,l,0,n)]:a}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return i}return i.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},i.range=function(l){return arguments.length?(n=(s=Array.from(l)).length-1,o()):s.slice()},i.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},i.unknown=function(l){return arguments.length&&(a=l),i},i.thresholds=function(){return r.slice()},i.copy=function(){return YY().domain([t,e]).range(s).unknown(a)},to.apply(Ju(i),arguments)}function QY(){var t=[.5],e=[0,1],n,r=1;function s(a){return a!=null&&a<=a?e[yx(t,a,0,r)]:n}return s.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(a){var i=e.indexOf(a);return[t[i-1],t[i]]},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return QY().domain(t).range(e).unknown(n)},to.apply(s,arguments)}const nA=new Date,rA=new Date;function as(t,e,n,r){function s(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(t(a=new Date(+a)),a),s.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),s.round=a=>{const i=s(a),o=s.ceil(a);return a-i<o-a?i:o},s.offset=(a,i)=>(e(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,o)=>{const l=[];if(a=s.ceil(a),o=o==null?1:Math.floor(o),!(a<i)||!(o>0))return l;let c;do l.push(c=new Date(+a)),e(a,o),t(a);while(c<a&&a<i);return l},s.filter=a=>as(i=>{if(i>=i)for(;t(i),!a(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;e(i,-1),!a(i););else for(;--o>=0;)for(;e(i,1),!a(i););}),n&&(s.count=(a,i)=>(nA.setTime(+a),rA.setTime(+i),t(nA),t(rA),Math.floor(n(nA,rA))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(r?i=>r(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const dS=as(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);dS.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?as(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):dS);dS.range;const tc=1e3,Gi=tc*60,nc=Gi*60,pc=nc*24,wD=pc*7,A8=pc*30,sA=pc*365,Hd=as(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*tc)},(t,e)=>(e-t)/tc,t=>t.getUTCSeconds());Hd.range;const SD=as(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*tc)},(t,e)=>{t.setTime(+t+e*Gi)},(t,e)=>(e-t)/Gi,t=>t.getMinutes());SD.range;const CD=as(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Gi)},(t,e)=>(e-t)/Gi,t=>t.getUTCMinutes());CD.range;const kD=as(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*tc-t.getMinutes()*Gi)},(t,e)=>{t.setTime(+t+e*nc)},(t,e)=>(e-t)/nc,t=>t.getHours());kD.range;const ND=as(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*nc)},(t,e)=>(e-t)/nc,t=>t.getUTCHours());ND.range;const vx=as(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Gi)/pc,t=>t.getDate()-1);vx.range;const Ck=as(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pc,t=>t.getUTCDate()-1);Ck.range;const ZY=as(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pc,t=>Math.floor(t/pc));ZY.range;function Gf(t){return as(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Gi)/wD)}const kk=Gf(0),fS=Gf(1),_Fe=Gf(2),DFe=Gf(3),vp=Gf(4),zFe=Gf(5),PFe=Gf(6);kk.range;fS.range;_Fe.range;DFe.range;vp.range;zFe.range;PFe.range;function Hf(t){return as(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/wD)}const Nk=Hf(0),hS=Hf(1),LFe=Hf(2),MFe=Hf(3),wp=Hf(4),FFe=Hf(5),BFe=Hf(6);Nk.range;hS.range;LFe.range;MFe.range;wp.range;FFe.range;BFe.range;const TD=as(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());TD.range;const ED=as(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ED.range;const mc=as(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());mc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:as(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});mc.range;const gc=as(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());gc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:as(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});gc.range;function JY(t,e,n,r,s,a){const i=[[Hd,1,tc],[Hd,5,5*tc],[Hd,15,15*tc],[Hd,30,30*tc],[a,1,Gi],[a,5,5*Gi],[a,15,15*Gi],[a,30,30*Gi],[s,1,nc],[s,3,3*nc],[s,6,6*nc],[s,12,12*nc],[r,1,pc],[r,2,2*pc],[n,1,wD],[e,1,A8],[e,3,3*A8],[t,1,sA]];function o(c,f,p){const m=f<c;m&&([c,f]=[f,c]);const y=p&&typeof p.range=="function"?p:l(c,f,p),b=y?y.range(c,+f+1):[];return m?b.reverse():b}function l(c,f,p){const m=Math.abs(f-c)/p,y=lD(([,,x])=>x).right(i,m);if(y===i.length)return t.every(o$(c/sA,f/sA,p));if(y===0)return dS.every(Math.max(o$(c,f,p),1));const[b,v]=i[m/i[y-1][2]<i[y][2]/m?y-1:y];return b.every(v)}return[o,l]}const[UFe,WFe]=JY(gc,ED,Nk,ZY,ND,CD),[VFe,qFe]=JY(mc,TD,kk,vx,kD,SD);function aA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function iA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function uy(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function GFe(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,a=t.days,i=t.shortDays,o=t.months,l=t.shortMonths,c=dy(s),f=fy(s),p=dy(a),m=fy(a),y=dy(i),b=fy(i),v=dy(o),x=fy(o),S=dy(l),C=fy(l),E={a:Z,A:J,b:ae,B:ee,c:null,d:D8,e:D8,f:m8e,g:N8e,G:E8e,H:f8e,I:h8e,j:p8e,L:eQ,m:g8e,M:y8e,p:W,q:Q,Q:L8,s:M8,S:b8e,u:x8e,U:v8e,V:w8e,w:S8e,W:C8e,x:null,X:null,y:k8e,Y:T8e,Z:I8e,"%":P8},k={a:se,A:fe,b:Ne,B:_e,c:null,d:z8,e:z8,f:R8e,g:U8e,G:V8e,H:A8e,I:j8e,j:$8e,L:nQ,m:O8e,M:_8e,p:De,q:He,Q:L8,s:M8,S:D8e,u:z8e,U:P8e,V:L8e,w:M8e,W:F8e,x:null,X:null,y:B8e,Y:W8e,Z:q8e,"%":P8},I={a:R,A:D,b:U,B:X,c:V,d:O8,e:O8,f:l8e,g:R8,G:$8,H:_8,I:_8,j:s8e,L:o8e,m:r8e,M:a8e,p:L,q:n8e,Q:u8e,s:d8e,S:i8e,u:QFe,U:ZFe,V:JFe,w:YFe,W:e8e,x:Y,X:B,y:R8,Y:$8,Z:t8e,"%":c8e};E.x=$(n,E),E.X=$(r,E),E.c=$(e,E),k.x=$(n,k),k.X=$(r,k),k.c=$(e,k);function $(he,Te){return function(Me){var ge=[],ct=-1,Ye=0,ft=he.length,Ke,Ct,kt;for(Me instanceof Date||(Me=new Date(+Me));++ct<ft;)he.charCodeAt(ct)===37&&(ge.push(he.slice(Ye,ct)),(Ct=j8[Ke=he.charAt(++ct)])!=null?Ke=he.charAt(++ct):Ct=Ke==="e"?" ":"0",(kt=Te[Ke])&&(Ke=kt(Me,Ct)),ge.push(Ke),Ye=ct+1);return ge.push(he.slice(Ye,ct)),ge.join("")}}function _(he,Te){return function(Me){var ge=uy(1900,void 0,1),ct=z(ge,he,Me+="",0),Ye,ft;if(ct!=Me.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(Te&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(Ye=iA(uy(ge.y,0,1)),ft=Ye.getUTCDay(),Ye=ft>4||ft===0?hS.ceil(Ye):hS(Ye),Ye=Ck.offset(Ye,(ge.V-1)*7),ge.y=Ye.getUTCFullYear(),ge.m=Ye.getUTCMonth(),ge.d=Ye.getUTCDate()+(ge.w+6)%7):(Ye=aA(uy(ge.y,0,1)),ft=Ye.getDay(),Ye=ft>4||ft===0?fS.ceil(Ye):fS(Ye),Ye=vx.offset(Ye,(ge.V-1)*7),ge.y=Ye.getFullYear(),ge.m=Ye.getMonth(),ge.d=Ye.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),ft="Z"in ge?iA(uy(ge.y,0,1)).getUTCDay():aA(uy(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(ft+5)%7:ge.w+ge.U*7-(ft+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,iA(ge)):aA(ge)}}function z(he,Te,Me,ge){for(var ct=0,Ye=Te.length,ft=Me.length,Ke,Ct;ct<Ye;){if(ge>=ft)return-1;if(Ke=Te.charCodeAt(ct++),Ke===37){if(Ke=Te.charAt(ct++),Ct=I[Ke in j8?Te.charAt(ct++):Ke],!Ct||(ge=Ct(he,Me,ge))<0)return-1}else if(Ke!=Me.charCodeAt(ge++))return-1}return ge}function L(he,Te,Me){var ge=c.exec(Te.slice(Me));return ge?(he.p=f.get(ge[0].toLowerCase()),Me+ge[0].length):-1}function R(he,Te,Me){var ge=y.exec(Te.slice(Me));return ge?(he.w=b.get(ge[0].toLowerCase()),Me+ge[0].length):-1}function D(he,Te,Me){var ge=p.exec(Te.slice(Me));return ge?(he.w=m.get(ge[0].toLowerCase()),Me+ge[0].length):-1}function U(he,Te,Me){var ge=S.exec(Te.slice(Me));return ge?(he.m=C.get(ge[0].toLowerCase()),Me+ge[0].length):-1}function X(he,Te,Me){var ge=v.exec(Te.slice(Me));return ge?(he.m=x.get(ge[0].toLowerCase()),Me+ge[0].length):-1}function V(he,Te,Me){return z(he,e,Te,Me)}function Y(he,Te,Me){return z(he,n,Te,Me)}function B(he,Te,Me){return z(he,r,Te,Me)}function Z(he){return i[he.getDay()]}function J(he){return a[he.getDay()]}function ae(he){return l[he.getMonth()]}function ee(he){return o[he.getMonth()]}function W(he){return s[+(he.getHours()>=12)]}function Q(he){return 1+~~(he.getMonth()/3)}function se(he){return i[he.getUTCDay()]}function fe(he){return a[he.getUTCDay()]}function Ne(he){return l[he.getUTCMonth()]}function _e(he){return o[he.getUTCMonth()]}function De(he){return s[+(he.getUTCHours()>=12)]}function He(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var Te=$(he+="",E);return Te.toString=function(){return he},Te},parse:function(he){var Te=_(he+="",!1);return Te.toString=function(){return he},Te},utcFormat:function(he){var Te=$(he+="",k);return Te.toString=function(){return he},Te},utcParse:function(he){var Te=_(he+="",!0);return Te.toString=function(){return he},Te}}}var j8={"-":"",_:" ",0:"0"},Cs=/^\s*\d+/,HFe=/^%/,KFe=/[\\^$*+?|[\]().{}]/g;function dn(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",a=s.length;return r+(a<n?new Array(n-a+1).join(e)+s:s)}function XFe(t){return t.replace(KFe,"\\$&")}function dy(t){return new RegExp("^(?:"+t.map(XFe).join("|")+")","i")}function fy(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function YFe(t,e,n){var r=Cs.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function QFe(t,e,n){var r=Cs.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ZFe(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function JFe(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function e8e(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function $8(t,e,n){var r=Cs.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function R8(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function t8e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function n8e(t,e,n){var r=Cs.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function r8e(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function O8(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function s8e(t,e,n){var r=Cs.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function _8(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function a8e(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function i8e(t,e,n){var r=Cs.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function o8e(t,e,n){var r=Cs.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function l8e(t,e,n){var r=Cs.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function c8e(t,e,n){var r=HFe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function u8e(t,e,n){var r=Cs.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function d8e(t,e,n){var r=Cs.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function D8(t,e){return dn(t.getDate(),e,2)}function f8e(t,e){return dn(t.getHours(),e,2)}function h8e(t,e){return dn(t.getHours()%12||12,e,2)}function p8e(t,e){return dn(1+vx.count(mc(t),t),e,3)}function eQ(t,e){return dn(t.getMilliseconds(),e,3)}function m8e(t,e){return eQ(t,e)+"000"}function g8e(t,e){return dn(t.getMonth()+1,e,2)}function y8e(t,e){return dn(t.getMinutes(),e,2)}function b8e(t,e){return dn(t.getSeconds(),e,2)}function x8e(t){var e=t.getDay();return e===0?7:e}function v8e(t,e){return dn(kk.count(mc(t)-1,t),e,2)}function tQ(t){var e=t.getDay();return e>=4||e===0?vp(t):vp.ceil(t)}function w8e(t,e){return t=tQ(t),dn(vp.count(mc(t),t)+(mc(t).getDay()===4),e,2)}function S8e(t){return t.getDay()}function C8e(t,e){return dn(fS.count(mc(t)-1,t),e,2)}function k8e(t,e){return dn(t.getFullYear()%100,e,2)}function N8e(t,e){return t=tQ(t),dn(t.getFullYear()%100,e,2)}function T8e(t,e){return dn(t.getFullYear()%1e4,e,4)}function E8e(t,e){var n=t.getDay();return t=n>=4||n===0?vp(t):vp.ceil(t),dn(t.getFullYear()%1e4,e,4)}function I8e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+dn(e/60|0,"0",2)+dn(e%60,"0",2)}function z8(t,e){return dn(t.getUTCDate(),e,2)}function A8e(t,e){return dn(t.getUTCHours(),e,2)}function j8e(t,e){return dn(t.getUTCHours()%12||12,e,2)}function $8e(t,e){return dn(1+Ck.count(gc(t),t),e,3)}function nQ(t,e){return dn(t.getUTCMilliseconds(),e,3)}function R8e(t,e){return nQ(t,e)+"000"}function O8e(t,e){return dn(t.getUTCMonth()+1,e,2)}function _8e(t,e){return dn(t.getUTCMinutes(),e,2)}function D8e(t,e){return dn(t.getUTCSeconds(),e,2)}function z8e(t){var e=t.getUTCDay();return e===0?7:e}function P8e(t,e){return dn(Nk.count(gc(t)-1,t),e,2)}function rQ(t){var e=t.getUTCDay();return e>=4||e===0?wp(t):wp.ceil(t)}function L8e(t,e){return t=rQ(t),dn(wp.count(gc(t),t)+(gc(t).getUTCDay()===4),e,2)}function M8e(t){return t.getUTCDay()}function F8e(t,e){return dn(hS.count(gc(t)-1,t),e,2)}function B8e(t,e){return dn(t.getUTCFullYear()%100,e,2)}function U8e(t,e){return t=rQ(t),dn(t.getUTCFullYear()%100,e,2)}function W8e(t,e){return dn(t.getUTCFullYear()%1e4,e,4)}function V8e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?wp(t):wp.ceil(t),dn(t.getUTCFullYear()%1e4,e,4)}function q8e(){return"+0000"}function P8(){return"%"}function L8(t){return+t}function M8(t){return Math.floor(+t/1e3)}var Dh,sQ,aQ;G8e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function G8e(t){return Dh=GFe(t),sQ=Dh.format,Dh.parse,aQ=Dh.utcFormat,Dh.utcParse,Dh}function H8e(t){return new Date(t)}function K8e(t){return t instanceof Date?+t:+new Date(+t)}function ID(t,e,n,r,s,a,i,o,l,c){var f=pD(),p=f.invert,m=f.domain,y=c(".%L"),b=c(":%S"),v=c("%I:%M"),x=c("%I %p"),S=c("%a %d"),C=c("%b %d"),E=c("%B"),k=c("%Y");function I($){return(l($)<$?y:o($)<$?b:i($)<$?v:a($)<$?x:r($)<$?s($)<$?S:C:n($)<$?E:k)($)}return f.invert=function($){return new Date(p($))},f.domain=function($){return arguments.length?m(Array.from($,K8e)):m().map(H8e)},f.ticks=function($){var _=m();return t(_[0],_[_.length-1],$??10)},f.tickFormat=function($,_){return _==null?I:c(_)},f.nice=function($){var _=m();return(!$||typeof $.range!="function")&&($=e(_[0],_[_.length-1],$??10)),$?m(qY(_,$)):f},f.copy=function(){return xx(f,ID(t,e,n,r,s,a,i,o,l,c))},f}function X8e(){return to.apply(ID(VFe,qFe,mc,TD,kk,vx,kD,SD,Hd,sQ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Y8e(){return to.apply(ID(UFe,WFe,gc,ED,Nk,Ck,ND,CD,Hd,aQ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Tk(){var t=0,e=1,n,r,s,a,i=ga,o=!1,l;function c(p){return p==null||isNaN(p=+p)?l:i(s===0?.5:(p=(a(p)-n)*s,o?Math.max(0,Math.min(1,p)):p))}c.domain=function(p){return arguments.length?([t,e]=p,n=a(t=+t),r=a(e=+e),s=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(p){return arguments.length?(o=!!p,c):o},c.interpolator=function(p){return arguments.length?(i=p,c):i};function f(p){return function(m){var y,b;return arguments.length?([y,b]=m,i=p(y,b),c):[i(0),i(1)]}}return c.range=f(Wm),c.rangeRound=f(hD),c.unknown=function(p){return arguments.length?(l=p,c):l},function(p){return a=p,n=p(t),r=p(e),s=n===r?0:1/(r-n),c}}function ed(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function iQ(){var t=Ju(Tk()(ga));return t.copy=function(){return ed(t,iQ())},jc.apply(t,arguments)}function oQ(){var t=yD(Tk()).domain([1,10]);return t.copy=function(){return ed(t,oQ()).base(t.base())},jc.apply(t,arguments)}function lQ(){var t=bD(Tk());return t.copy=function(){return ed(t,lQ()).constant(t.constant())},jc.apply(t,arguments)}function AD(){var t=xD(Tk());return t.copy=function(){return ed(t,AD()).exponent(t.exponent())},jc.apply(t,arguments)}function Q8e(){return AD.apply(null,arguments).exponent(.5)}function cQ(){var t=[],e=ga;function n(r){if(r!=null&&!isNaN(r=+r))return e((yx(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(ku),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,a)=>z6e(t,a/r))},n.copy=function(){return cQ(e).domain(t)},jc.apply(n,arguments)}function Ek(){var t=0,e=.5,n=1,r=1,s,a,i,o,l,c=ga,f,p=!1,m;function y(v){return isNaN(v=+v)?m:(v=.5+((v=+f(v))-a)*(r*v<r*a?o:l),c(p?Math.max(0,Math.min(1,v)):v))}y.domain=function(v){return arguments.length?([t,e,n]=v,s=f(t=+t),a=f(e=+e),i=f(n=+n),o=s===a?0:.5/(a-s),l=a===i?0:.5/(i-a),r=a<s?-1:1,y):[t,e,n]},y.clamp=function(v){return arguments.length?(p=!!v,y):p},y.interpolator=function(v){return arguments.length?(c=v,y):c};function b(v){return function(x){var S,C,E;return arguments.length?([S,C,E]=x,c=cFe(v,[S,C,E]),y):[c(0),c(.5),c(1)]}}return y.range=b(Wm),y.rangeRound=b(hD),y.unknown=function(v){return arguments.length?(m=v,y):m},function(v){return f=v,s=v(t),a=v(e),i=v(n),o=s===a?0:.5/(a-s),l=a===i?0:.5/(i-a),r=a<s?-1:1,y}}function uQ(){var t=Ju(Ek()(ga));return t.copy=function(){return ed(t,uQ())},jc.apply(t,arguments)}function dQ(){var t=yD(Ek()).domain([.1,1,10]);return t.copy=function(){return ed(t,dQ()).base(t.base())},jc.apply(t,arguments)}function fQ(){var t=bD(Ek());return t.copy=function(){return ed(t,fQ()).constant(t.constant())},jc.apply(t,arguments)}function jD(){var t=xD(Ek());return t.copy=function(){return ed(t,jD()).exponent(t.exponent())},jc.apply(t,arguments)}function Z8e(){return jD.apply(null,arguments).exponent(.5)}const ky=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:uD,scaleDiverging:uQ,scaleDivergingLog:dQ,scaleDivergingPow:jD,scaleDivergingSqrt:Z8e,scaleDivergingSymlog:fQ,scaleIdentity:VY,scaleImplicit:l$,scaleLinear:WY,scaleLog:GY,scaleOrdinal:cD,scalePoint:M6e,scalePow:vD,scaleQuantile:XY,scaleQuantize:YY,scaleRadial:KY,scaleSequential:iQ,scaleSequentialLog:oQ,scaleSequentialPow:AD,scaleSequentialQuantile:cQ,scaleSequentialSqrt:Q8e,scaleSequentialSymlog:lQ,scaleSqrt:RFe,scaleSymlog:HY,scaleThreshold:QY,scaleTime:X8e,scaleUtc:Y8e,tickFormat:UY},Symbol.toStringTag,{value:"Module"}));var $c=t=>t.chartData,Ik=Ce([$c],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),hQ=(t,e,n,r)=>r?Ik(t):$c(t),J8e=(t,e,n)=>n?Ik(t):$c(t);function yc(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Qt(e)&&Qt(n))return!0}return!1}function F8(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function pQ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,s,a;if(Qt(n))s=n;else if(typeof n=="function")return;if(Qt(r))a=r;else if(typeof r=="function")return;var i=[s,a];if(yc(i))return i}}function eBe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(yc(r))return F8(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[s,a]=t,i,o;if(s==="auto")e!=null&&(i=Math.min(...e));else if(at(s))i=s;else if(typeof s=="function")try{e!=null&&(i=s(e?.[0]))}catch{}else if(typeof s=="string"&&Z6.test(s)){var l=Z6.exec(s);if(l==null||l[1]==null||e==null)i=void 0;else{var c=+l[1];i=e[0]-c}}else i=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(at(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&J6.test(a)){var f=J6.exec(a);if(f==null||f[1]==null||e==null)o=void 0;else{var p=+f[1];o=e[1]+p}}else o=e?.[1];var m=[i,o];if(yc(m))return e==null?m:F8(m,e,n)}}}var Vm=1e9,tBe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},RD,Jn=!0,Qi="[DecimalError] ",rf=Qi+"Invalid argument: ",$D=Qi+"Exponent out of range: ",qm=Math.floor,Dd=Math.pow,nBe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,di,fs=1e7,Un=7,mQ=9007199254740991,pS=qm(mQ/Un),rt={};rt.absoluteValue=rt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};rt.comparedTo=rt.cmp=function(t){var e,n,r,s,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===s?0:r>s^a.s<0?1:-1};rt.decimalPlaces=rt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Un;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};rt.dividedBy=rt.div=function(t){return ac(this,new this.constructor(t))};rt.dividedToIntegerBy=rt.idiv=function(t){var e=this,n=e.constructor;return Dn(ac(e,new n(t),0,1),n.precision)};rt.equals=rt.eq=function(t){return!this.cmp(t)};rt.exponent=function(){return Ur(this)};rt.greaterThan=rt.gt=function(t){return this.cmp(t)>0};rt.greaterThanOrEqualTo=rt.gte=function(t){return this.cmp(t)>=0};rt.isInteger=rt.isint=function(){return this.e>this.d.length-2};rt.isNegative=rt.isneg=function(){return this.s<0};rt.isPositive=rt.ispos=function(){return this.s>0};rt.isZero=function(){return this.s===0};rt.lessThan=rt.lt=function(t){return this.cmp(t)<0};rt.lessThanOrEqualTo=rt.lte=function(t){return this.cmp(t)<1};rt.logarithm=rt.log=function(t){var e,n=this,r=n.constructor,s=r.precision,a=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(di))throw Error(Qi+"NaN");if(n.s<1)throw Error(Qi+(n.s?"NaN":"-Infinity"));return n.eq(di)?new r(0):(Jn=!1,e=ac(f0(n,a),f0(t,a),a),Jn=!0,Dn(e,s))};rt.minus=rt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?bQ(e,t):gQ(e,(t.s=-t.s,t))};rt.modulo=rt.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(Qi+"NaN");return n.s?(Jn=!1,e=ac(n,t,0,1).times(t),Jn=!0,n.minus(e)):Dn(new r(n),s)};rt.naturalExponential=rt.exp=function(){return yQ(this)};rt.naturalLogarithm=rt.ln=function(){return f0(this)};rt.negated=rt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};rt.plus=rt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?gQ(e,t):bQ(e,(t.s=-t.s,t))};rt.precision=rt.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(rf+t);if(e=Ur(s)+1,r=s.d.length-1,n=r*Un+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};rt.squareRoot=rt.sqrt=function(){var t,e,n,r,s,a,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Qi+"NaN")}for(t=Ur(o),Jn=!1,s=Math.sqrt(+o),s==0||s==1/0?(e=sl(o.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=qm((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(s.toString()),n=l.precision,s=i=n+3;;)if(a=r,r=a.plus(ac(o,a,i+2)).times(.5),sl(a.d).slice(0,i)===(e=sl(r.d)).slice(0,i)){if(e=e.slice(i-3,i+1),s==i&&e=="4999"){if(Dn(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;i+=4}return Jn=!0,Dn(r,n)};rt.times=rt.mul=function(t){var e,n,r,s,a,i,o,l,c,f=this,p=f.constructor,m=f.d,y=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,l=m.length,c=y.length,l<c&&(a=m,m=y,y=a,i=l,l=c,c=i),a=[],i=l+c,r=i;r--;)a.push(0);for(r=c;--r>=0;){for(e=0,s=l+r;s>r;)o=a[s]+y[r]*m[s-r-1]+e,a[s--]=o%fs|0,e=o/fs|0;a[s]=(a[s]+e)%fs|0}for(;!a[--i];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Jn?Dn(t,p.precision):t};rt.toDecimalPlaces=rt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Sl(t,0,Vm),e===void 0?e=r.rounding:Sl(e,0,8),Dn(n,t+Ur(n)+1,e))};rt.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=jf(r,!0):(Sl(t,0,Vm),e===void 0?e=s.rounding:Sl(e,0,8),r=Dn(new s(r),t+1,e),n=jf(r,!0,t+1)),n};rt.toFixed=function(t,e){var n,r,s=this,a=s.constructor;return t===void 0?jf(s):(Sl(t,0,Vm),e===void 0?e=a.rounding:Sl(e,0,8),r=Dn(new a(s),t+Ur(s)+1,e),n=jf(r.abs(),!1,t+Ur(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};rt.toInteger=rt.toint=function(){var t=this,e=t.constructor;return Dn(new e(t),Ur(t)+1,e.rounding)};rt.toNumber=function(){return+this};rt.toPower=rt.pow=function(t){var e,n,r,s,a,i,o=this,l=o.constructor,c=12,f=+(t=new l(t));if(!t.s)return new l(di);if(o=new l(o),!o.s){if(t.s<1)throw Error(Qi+"Infinity");return o}if(o.eq(di))return o;if(r=l.precision,t.eq(di))return Dn(o,r);if(e=t.e,n=t.d.length-1,i=e>=n,a=o.s,i){if((n=f<0?-f:f)<=mQ){for(s=new l(di),e=Math.ceil(r/Un+4),Jn=!1;n%2&&(s=s.times(o),U8(s.d,e)),n=qm(n/2),n!==0;)o=o.times(o),U8(o.d,e);return Jn=!0,t.s<0?new l(di).div(s):Dn(s,r)}}else if(a<0)throw Error(Qi+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Jn=!1,s=t.times(f0(o,r+c)),Jn=!0,s=yQ(s),s.s=a,s};rt.toPrecision=function(t,e){var n,r,s=this,a=s.constructor;return t===void 0?(n=Ur(s),r=jf(s,n<=a.toExpNeg||n>=a.toExpPos)):(Sl(t,1,Vm),e===void 0?e=a.rounding:Sl(e,0,8),s=Dn(new a(s),t,e),n=Ur(s),r=jf(s,t<=n||n<=a.toExpNeg,t)),r};rt.toSignificantDigits=rt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Sl(t,1,Vm),e===void 0?e=r.rounding:Sl(e,0,8)),Dn(new r(n),t,e)};rt.toString=rt.valueOf=rt.val=rt.toJSON=rt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ur(t),n=t.constructor;return jf(t,e<=n.toExpNeg||e>=n.toExpPos)};function gQ(t,e){var n,r,s,a,i,o,l,c,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Jn?Dn(e,p):e;if(l=t.d,c=e.d,i=t.e,s=e.e,l=l.slice(),a=i-s,a){for(a<0?(r=l,a=-a,o=c.length):(r=c,s=i,o=l.length),i=Math.ceil(p/Un),o=i>o?i+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=l.length,a=c.length,o-a<0&&(a=o,r=c,c=l,l=r),n=0;a;)n=(l[--a]=l[a]+c[a]+n)/fs|0,l[a]%=fs;for(n&&(l.unshift(n),++s),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=s,Jn?Dn(e,p):e}function Sl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(rf+t)}function sl(t){var e,n,r,s=t.length-1,a="",i=t[0];if(s>0){for(a+=i,e=1;e<s;e++)r=t[e]+"",n=Un-r.length,n&&(a+=fu(n)),a+=r;i=t[e],r=i+"",n=Un-r.length,n&&(a+=fu(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var ac=(function(){function t(r,s){var a,i=0,o=r.length;for(r=r.slice();o--;)a=r[o]*s+i,r[o]=a%fs|0,i=a/fs|0;return i&&r.unshift(i),r}function e(r,s,a,i){var o,l;if(a!=i)l=a>i?1:-1;else for(o=l=0;o<a;o++)if(r[o]!=s[o]){l=r[o]>s[o]?1:-1;break}return l}function n(r,s,a){for(var i=0;a--;)r[a]-=i,i=r[a]<s[a]?1:0,r[a]=i*fs+r[a]-s[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,a,i){var o,l,c,f,p,m,y,b,v,x,S,C,E,k,I,$,_,z,L=r.constructor,R=r.s==s.s?1:-1,D=r.d,U=s.d;if(!r.s)return new L(r);if(!s.s)throw Error(Qi+"Division by zero");for(l=r.e-s.e,_=U.length,I=D.length,y=new L(R),b=y.d=[],c=0;U[c]==(D[c]||0);)++c;if(U[c]>(D[c]||0)&&--l,a==null?C=a=L.precision:i?C=a+(Ur(r)-Ur(s))+1:C=a,C<0)return new L(0);if(C=C/Un+2|0,c=0,_==1)for(f=0,U=U[0],C++;(c<I||f)&&C--;c++)E=f*fs+(D[c]||0),b[c]=E/U|0,f=E%U|0;else{for(f=fs/(U[0]+1)|0,f>1&&(U=t(U,f),D=t(D,f),_=U.length,I=D.length),k=_,v=D.slice(0,_),x=v.length;x<_;)v[x++]=0;z=U.slice(),z.unshift(0),$=U[0],U[1]>=fs/2&&++$;do f=0,o=e(U,v,_,x),o<0?(S=v[0],_!=x&&(S=S*fs+(v[1]||0)),f=S/$|0,f>1?(f>=fs&&(f=fs-1),p=t(U,f),m=p.length,x=v.length,o=e(p,v,m,x),o==1&&(f--,n(p,_<m?z:U,m))):(f==0&&(o=f=1),p=U.slice()),m=p.length,m<x&&p.unshift(0),n(v,p,x),o==-1&&(x=v.length,o=e(U,v,_,x),o<1&&(f++,n(v,_<x?z:U,x))),x=v.length):o===0&&(f++,v=[0]),b[c++]=f,o&&v[0]?v[x++]=D[k]||0:(v=[D[k]],x=1);while((k++<I||v[0]!==void 0)&&C--)}return b[0]||b.shift(),y.e=l,Dn(y,i?a+Ur(y)+1:a)}})();function yQ(t,e){var n,r,s,a,i,o,l=0,c=0,f=t.constructor,p=f.precision;if(Ur(t)>16)throw Error($D+Ur(t));if(!t.s)return new f(di);for(Jn=!1,o=p,i=new f(.03125);t.abs().gte(.1);)t=t.times(i),c+=5;for(r=Math.log(Dd(2,c))/Math.LN10*2+5|0,o+=r,n=s=a=new f(di),f.precision=o;;){if(s=Dn(s.times(t),o),n=n.times(++l),i=a.plus(ac(s,n,o)),sl(i.d).slice(0,o)===sl(a.d).slice(0,o)){for(;c--;)a=Dn(a.times(a),o);return f.precision=p,e==null?(Jn=!0,Dn(a,p)):a}a=i}}function Ur(t){for(var e=t.e*Un,n=t.d[0];n>=10;n/=10)e++;return e}function oA(t,e,n){if(e>t.LN10.sd())throw Jn=!0,n&&(t.precision=n),Error(Qi+"LN10 precision limit exceeded");return Dn(new t(t.LN10),e)}function fu(t){for(var e="";t--;)e+="0";return e}function f0(t,e){var n,r,s,a,i,o,l,c,f,p=1,m=10,y=t,b=y.d,v=y.constructor,x=v.precision;if(y.s<1)throw Error(Qi+(y.s?"NaN":"-Infinity"));if(y.eq(di))return new v(0);if(e==null?(Jn=!1,c=x):c=e,y.eq(10))return e==null&&(Jn=!0),oA(v,c);if(c+=m,v.precision=c,n=sl(b),r=n.charAt(0),a=Ur(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(t),n=sl(y.d),r=n.charAt(0),p++;a=Ur(y),r>1?(y=new v("0."+n),a++):y=new v(r+"."+n.slice(1))}else return l=oA(v,c+2,x).times(a+""),y=f0(new v(r+"."+n.slice(1)),c-m).plus(l),v.precision=x,e==null?(Jn=!0,Dn(y,x)):y;for(o=i=y=ac(y.minus(di),y.plus(di),c),f=Dn(y.times(y),c),s=3;;){if(i=Dn(i.times(f),c),l=o.plus(ac(i,new v(s),c)),sl(l.d).slice(0,c)===sl(o.d).slice(0,c))return o=o.times(2),a!==0&&(o=o.plus(oA(v,c+2,x).times(a+""))),o=ac(o,new v(p),c),v.precision=x,e==null?(Jn=!0,Dn(o,x)):o;o=l,s+=2}}function B8(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=qm(n/Un),t.d=[],r=(n+1)%Un,n<0&&(r+=Un),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=Un;r<s;)t.d.push(+e.slice(r,r+=Un));e=e.slice(r),r=Un-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),Jn&&(t.e>pS||t.e<-pS))throw Error($D+n)}else t.s=0,t.e=0,t.d=[0];return t}function Dn(t,e,n){var r,s,a,i,o,l,c,f,p=t.d;for(i=1,a=p[0];a>=10;a/=10)i++;if(r=e-i,r<0)r+=Un,s=e,c=p[f=0];else{if(f=Math.ceil((r+1)/Un),a=p.length,f>=a)return t;for(c=a=p[f],i=1;a>=10;a/=10)i++;r%=Un,s=r-Un+i}if(n!==void 0&&(a=Dd(10,i-s-1),o=c/a%10|0,l=e<0||p[f+1]!==void 0||c%a,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?s>0?c/Dd(10,i-s):0:p[f-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return l?(a=Ur(t),p.length=1,e=e-a-1,p[0]=Dd(10,(Un-e%Un)%Un),t.e=qm(-e/Un)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(r==0?(p.length=f,a=1,f--):(p.length=f+1,a=Dd(10,Un-r),p[f]=s>0?(c/Dd(10,i-s)%Dd(10,s)|0)*a:0),l)for(;;)if(f==0){(p[0]+=a)==fs&&(p[0]=1,++t.e);break}else{if(p[f]+=a,p[f]!=fs)break;p[f--]=0,a=1}for(r=p.length;p[--r]===0;)p.pop();if(Jn&&(t.e>pS||t.e<-pS))throw Error($D+Ur(t));return t}function bQ(t,e){var n,r,s,a,i,o,l,c,f,p,m=t.constructor,y=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),Jn?Dn(e,y):e;if(l=t.d,p=e.d,r=e.e,c=t.e,l=l.slice(),i=c-r,i){for(f=i<0,f?(n=l,i=-i,o=p.length):(n=p,r=c,o=l.length),s=Math.max(Math.ceil(y/Un),o)+2,i>s&&(i=s,n.length=1),n.reverse(),s=i;s--;)n.push(0);n.reverse()}else{for(s=l.length,o=p.length,f=s<o,f&&(o=s),s=0;s<o;s++)if(l[s]!=p[s]){f=l[s]<p[s];break}i=0}for(f&&(n=l,l=p,p=n,e.s=-e.s),o=l.length,s=p.length-o;s>0;--s)l[o++]=0;for(s=p.length;s>i;){if(l[--s]<p[s]){for(a=s;a&&l[--a]===0;)l[a]=fs-1;--l[a],l[s]+=fs}l[s]-=p[s]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Jn?Dn(e,y):e):new m(0)}function jf(t,e,n){var r,s=Ur(t),a=sl(t.d),i=a.length;return e?(n&&(r=n-i)>0?a=a.charAt(0)+"."+a.slice(1)+fu(r):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+fu(-s-1)+a,n&&(r=n-i)>0&&(a+=fu(r))):s>=i?(a+=fu(s+1-i),n&&(r=n-s-1)>0&&(a=a+"."+fu(r))):((r=s+1)<i&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-i)>0&&(s+1===i&&(a+="."),a+=fu(r))),t.s<0?"-"+a:a}function U8(t,e){if(t.length>e)return t.length=e,!0}function xQ(t){var e,n,r;function s(a){var i=this;if(!(i instanceof s))return new s(a);if(i.constructor=s,a instanceof s){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(rf+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return B8(i,a.toString())}else if(typeof a!="string")throw Error(rf+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,nBe.test(a))B8(i,a);else throw Error(rf+a)}if(s.prototype=rt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=xQ,s.config=s.set=rBe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function rBe(t){if(!t||typeof t!="object")throw Error(Qi+"Object expected");var e,n,r,s=["precision",1,Vm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(qm(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(rf+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(rf+n+": "+r);return this}var RD=xQ(tBe);di=new RD(1);const wn=RD;function vQ(t){var e;return t===0?e=1:e=Math.floor(new wn(t).abs().log(10).toNumber())+1,e}function wQ(t,e,n){for(var r=new wn(t),s=0,a=[];r.lt(e)&&s<1e5;)a.push(r.toNumber()),r=r.add(n),s++;return a}var SQ=t=>{var[e,n]=t,[r,s]=[e,n];return e>n&&([r,s]=[n,e]),[r,s]},CQ=(t,e,n)=>{if(t.lte(0))return new wn(0);var r=vQ(t.toNumber()),s=new wn(10).pow(r),a=t.div(s),i=r!==1?.05:.1,o=new wn(Math.ceil(a.div(i).toNumber())).add(n).mul(i),l=o.mul(s);return e?new wn(l.toNumber()):new wn(Math.ceil(l.toNumber()))},sBe=(t,e,n)=>{var r=new wn(1),s=new wn(t);if(!s.isint()&&n){var a=Math.abs(t);a<1?(r=new wn(10).pow(vQ(t)-1),s=new wn(Math.floor(s.div(r).toNumber())).mul(r)):a>1&&(s=new wn(Math.floor(t)))}else t===0?s=new wn(Math.floor((e-1)/2)):n||(s=new wn(Math.floor(t)));for(var i=Math.floor((e-1)/2),o=[],l=0;l<e;l++)o.push(s.add(new wn(l-i).mul(r)).toNumber());return o},kQ=function(e,n,r,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new wn(0),tickMin:new wn(0),tickMax:new wn(0)};var i=CQ(new wn(n).sub(e).div(r-1),s,a),o;e<=0&&n>=0?o=new wn(0):(o=new wn(e).add(n).div(2),o=o.sub(new wn(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new wn(n).sub(o).div(i).toNumber()),f=l+c+1;return f>r?kQ(e,n,r,s,a+1):(f<r&&(c=n>0?c+(r-f):c,l=n>0?l:l+(r-f)),{step:i,tickMin:o.sub(new wn(l).mul(i)),tickMax:o.add(new wn(c).mul(i))})},aBe=function(e){var[n,r]=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(s,2),[o,l]=SQ([n,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...Array(s-1).fill(1/0)]:[...Array(s-1).fill(-1/0),l];return n>r?c.reverse():c}if(o===l)return sBe(o,s,a);var{step:f,tickMin:p,tickMax:m}=kQ(o,l,i,a,0),y=wQ(p,m.add(new wn(.1).mul(f)),f);return n>r?y.reverse():y},iBe=function(e,n){var[r,s]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=SQ([r,s]);if(i===-1/0||o===1/0)return[r,s];if(i===o)return[i];var l=Math.max(n,2),c=CQ(new wn(o).sub(i).div(l-1),a,0),f=[...wQ(new wn(i),new wn(o),c),o];return a===!1&&(f=f.map(p=>Math.round(p))),r>s?f.reverse():f},oBe=t=>t.rootProps.barCategoryGap,wx=t=>t.rootProps.stackOffset,NQ=t=>t.rootProps.reverseStackOrder,OD=t=>t.options.chartName,_D=t=>t.rootProps.syncId,TQ=t=>t.rootProps.syncMethod,DD=t=>t.options.eventEmitter,lBe=t=>t.rootProps.baseValue,Ms={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ad={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Yo={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Ak=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function jk(t,e,n){if(n!=="auto")return n;if(t!=null)return El(t,e)?"category":"number"}function W8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W8(Object(n),!0).forEach(function(r){cBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cBe(t,e,n){return(e=uBe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uBe(t){var e=dBe(t,"string");return typeof e=="symbol"?e:e+""}function dBe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V8={allowDataOverflow:Ad.allowDataOverflow,allowDecimals:Ad.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ad.angleAxisId,includeHidden:!1,name:void 0,reversed:Ad.reversed,scale:Ad.scale,tick:Ad.tick,tickCount:void 0,ticks:void 0,type:Ad.type,unit:void 0},q8={allowDataOverflow:Yo.allowDataOverflow,allowDecimals:Yo.allowDecimals,allowDuplicatedCategory:Yo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yo.radiusAxisId,includeHidden:Yo.includeHidden,name:void 0,reversed:Yo.reversed,scale:Yo.scale,tick:Yo.tick,tickCount:Yo.tickCount,ticks:void 0,type:Yo.type,unit:void 0},fBe=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},zD=Ce([fBe,fY],(t,e)=>{var n;if(t!=null)return t;var r=(n=jk(e,"angleAxis",V8.type))!==null&&n!==void 0?n:"category";return mS(mS({},V8),{},{type:r})}),hBe=(t,e)=>t.polarAxis.radiusAxis[e],PD=Ce([hBe,fY],(t,e)=>{var n;if(t!=null)return t;var r=(n=jk(e,"radiusAxis",q8.type))!==null&&n!==void 0?n:"category";return mS(mS({},q8),{},{type:r})}),$k=t=>t.polarOptions,LD=Ce([Ic,Ac,Ss],AY),EQ=Ce([$k,LD],(t,e)=>{if(t!=null)return bi(t.innerRadius,e,0)}),IQ=Ce([$k,LD],(t,e)=>{if(t!=null)return bi(t.outerRadius,e,e*.8)}),pBe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},AQ=Ce([$k],pBe);Ce([zD,AQ],Ak);var jQ=Ce([LD,EQ,IQ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Ce([PD,jQ],Ak);var $Q=Ce([Ln,$k,EQ,IQ,Ic,Ac],(t,e,n,r,s,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:i,cy:o,startAngle:l,endAngle:c}=e;return{cx:bi(i,s,s/2),cy:bi(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),or=(t,e)=>e,Sx=(t,e,n)=>n;function MD(t){return t?.id}function RQ(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:s,dataKey:a}=n,i=new Map;return t.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var f=MD(o);c.forEach((p,m)=>{var y=a==null||s?m:String(Vn(p,a,null)),b=Vn(p,o.dataKey,0),v;i.has(y)?v=i.get(y):v={},Object.assign(v,{[f]:b}),i.set(y,v)})}}),Array.from(i.values())}function FD(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var Rk=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Ok(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function mBe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var ks=t=>{var e=Ln(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Gm=t=>t.tooltip.settings.axisId;function gBe(t){if(t in ky)return ky[t]();var e="scale".concat(ux(t));if(e in ky)return ky[e]()}function G8(t){var e=t.ticks,n=t.bandwidth,r=t.range(),s=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(a){function i(){return a.apply(this,arguments)}return i.toString=function(){return a.toString()},i})(()=>s),rangeMin:()=>s[0],rangeMax:()=>s[1],isInRange(a){var i=s[0],o=s[1];return i<=o?a>=i&&a<=o:a>=o&&a<=i},bandwidth:n?()=>n.call(t):void 0,ticks:e?a=>e.call(t,a):void 0,map:(a,i)=>{var o=t(a);if(o!=null){if(t.bandwidth&&i!==null&&i!==void 0&&i.position){var l=t.bandwidth();switch(i.position){case"middle":o+=l/2;break;case"end":o+=l;break}}return o}}}}function H8(t,e,n){if(typeof t=="function")return G8(t.copy().domain(e).range(n));if(t!=null){var r=gBe(t);if(r!=null)return r.domain(e).range(n),G8(r)}}var OQ=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!yc(e)){for(var n,r,s=0;s<e.length;s++){var a=e[s];Qt(a)&&((n===void 0||a<n)&&(n=a),(r===void 0||a>r)&&(r=a))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function K8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K8(Object(n),!0).forEach(function(r){yBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yBe(t,e,n){return(e=bBe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bBe(t){var e=xBe(t,"string");return typeof e=="symbol"?e:e+""}function xBe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f$=[0,"auto"],us={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},_Q=(t,e)=>t.cartesianAxis.xAxis[e],Rc=(t,e)=>{var n=_Q(t,e);return n??us},ds={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:f$,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:hx},DQ=(t,e)=>t.cartesianAxis.yAxis[e],Oc=(t,e)=>{var n=DQ(t,e);return n??ds},vBe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},BD=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??vBe},vr=(t,e,n)=>{switch(e){case"xAxis":return Rc(t,n);case"yAxis":return Oc(t,n);case"zAxis":return BD(t,n);case"angleAxis":return zD(t,n);case"radiusAxis":return PD(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},wBe=(t,e,n)=>{switch(e){case"xAxis":return Rc(t,n);case"yAxis":return Oc(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Hm=(t,e,n)=>{switch(e){case"xAxis":return Rc(t,n);case"yAxis":return Oc(t,n);case"angleAxis":return zD(t,n);case"radiusAxis":return PD(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},zQ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function UD(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var PQ=t=>t.graphicalItems.cartesianItems,SBe=Ce([or,Sx],UD),WD=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),Cx=Ce([PQ,vr,SBe],WD,{memoizeOptions:{resultEqualityCheck:Ok}}),LQ=Ce([Cx],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(FD)),MQ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),CBe=Ce([Cx],MQ),VD=t=>t.map(e=>e.data).filter(Boolean).flat(1),kBe=Ce([Cx],VD,{memoizeOptions:{resultEqualityCheck:Ok}}),qD=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:s}=e;return t.length>0?t:n.slice(r,s+1)},GD=Ce([kBe,hQ],qD),HD=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:Vn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(s=>({value:Vn(s,r)}))):t.map(r=>({value:r})),_k=Ce([GD,vr,Cx],HD);function FQ(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function H1(t){if(vl(t)||t instanceof Date){var e=Number(t);if(Qt(e))return e}}function X8(t){if(Array.isArray(t)){var e=[H1(t[0]),H1(t[1])];return yc(e)?e:void 0}var n=H1(t);if(n!=null)return[n,n]}function bc(t){return t.map(H1).filter(Ma)}function NBe(t,e,n){return!n||typeof e!="number"||xl(e)?[]:n.length?bc(n.flatMap(r=>{var s=Vn(t,r.dataKey),a,i;if(Array.isArray(s)?[a,i]=s:a=i=s,!(!Qt(a)||!Qt(i)))return[e-a,e+i]})):[]}var is=t=>{var e=ks(t),n=Gm(t);return Hm(t,e,n)},kx=Ce([is],t=>t?.dataKey),TBe=Ce([LQ,hQ,is],RQ),BQ=(t,e,n,r)=>{var s={},a=e.reduce((i,o)=>{if(o.stackId==null)return i;var l=i[o.stackId];return l==null&&(l=[]),l.push(o),i[o.stackId]=l,i},s);return Object.fromEntries(Object.entries(a).map(i=>{var[o,l]=i,c=r?[...l].reverse():l,f=c.map(MD);return[o,{stackedData:lLe(t,f,n),graphicalItems:c}]}))},UQ=Ce([TBe,LQ,wx,NQ],BQ),WQ=(t,e,n,r)=>{var{dataStartIndex:s,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var i=fLe(t,s,a);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},EBe=Ce([vr],t=>t.allowDataOverflow),KD=t=>{var e;if(t==null||!("domain"in t))return f$;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=bc(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:f$},XD=Ce([vr],KD),YD=Ce([XD,EBe],pQ),IBe=Ce([UQ,$c,or,YD],WQ,{memoizeOptions:{resultEqualityCheck:Rk}}),Dk=t=>t.errorBars,ABe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>FQ(n,r)),yS=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n.filter(Boolean);if(s.length!==0){var a=s.flat(),i=Math.min(...a),o=Math.max(...a);return[i,o]}},QD=(t,e,n,r,s)=>{var a,i;if(n.length>0&&t.forEach(o=>{n.forEach(l=>{var c,f,p=(c=r[l.id])===null||c===void 0?void 0:c.filter(S=>FQ(s,S)),m=Vn(o,(f=e.dataKey)!==null&&f!==void 0?f:l.dataKey),y=NBe(o,m,p);if(y.length>=2){var b=Math.min(...y),v=Math.max(...y);(a==null||b<a)&&(a=b),(i==null||v>i)&&(i=v)}var x=X8(m);x!=null&&(a=a==null?x[0]:Math.min(a,x[0]),i=i==null?x[1]:Math.max(i,x[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var l=X8(Vn(o,e.dataKey));l!=null&&(a=a==null?l[0]:Math.min(a,l[0]),i=i==null?l[1]:Math.max(i,l[1]))}),Qt(a)&&Qt(i))return[a,i]},jBe=Ce([GD,vr,CBe,Dk,or],QD,{memoizeOptions:{resultEqualityCheck:Rk}});function $Be(t){var{value:e}=t;if(vl(e)||e instanceof Date)return e}var RBe=(t,e,n)=>{var r=t.map($Be).filter(s=>s!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&iX(r))?OY(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},VQ=t=>t.referenceElements.dots,Km=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),OBe=Ce([VQ,or,Sx],Km),qQ=t=>t.referenceElements.areas,_Be=Ce([qQ,or,Sx],Km),GQ=t=>t.referenceElements.lines,DBe=Ce([GQ,or,Sx],Km),HQ=(t,e)=>{if(t!=null){var n=bc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},zBe=Ce(OBe,or,HQ),KQ=(t,e)=>{if(t!=null){var n=bc(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},PBe=Ce([_Be,or],KQ);function LBe(t){var e;if(t.x!=null)return bc([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:bc(n)}function MBe(t){var e;if(t.y!=null)return bc([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:bc(n)}var XQ=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?LBe(r):MBe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},FBe=Ce([DBe,or],XQ),BBe=Ce(zBe,FBe,PBe,(t,e,n)=>yS(t,n,e)),ZD=(t,e,n,r,s,a,i,o)=>{if(n!=null)return n;var l=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",c=l?yS(r,a,s):yS(a,s);return eBe(e,c,t.allowDataOverflow)},UBe=Ce([vr,XD,YD,IBe,jBe,BBe,Ln,or],ZD,{memoizeOptions:{resultEqualityCheck:Rk}}),WBe=[0,1],JD=(t,e,n,r,s,a,i)=>{if(!((t==null||n==null||n.length===0)&&i===void 0)){var{dataKey:o,type:l}=t,c=El(e,a);if(c&&o==null){var f;return OY(0,(f=n?.length)!==null&&f!==void 0?f:0)}return l==="category"?RBe(r,t,c):s==="expand"?WBe:i}},e5=Ce([vr,Ln,GD,_k,wx,or,UBe],JD);function VBe(t){return t in ky}var YQ=(t,e,n)=>{if(t!=null){var{scale:r,type:s}=t;if(r==="auto")return s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":s==="category"?"band":"linear";if(typeof r=="string"){var a="scale".concat(ux(r));return VBe(a)?a:"point"}}},td=Ce([vr,zQ,OD],YQ);function t5(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?H8(t.scale,n,r):H8(e,n,r)}var n5=(t,e,n)=>{var r=KD(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&yc(t))return aBe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&yc(t))return iBe(t,e.tickCount,e.allowDecimals)}},r5=Ce([e5,Hm,td],n5),s5=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&yc(e)&&Array.isArray(n)&&n.length>0){var s,a,i=e[0],o=(s=n[0])!==null&&s!==void 0?s:0,l=e[1],c=(a=n[n.length-1])!==null&&a!==void 0?a:0;return[Math.min(i,o),Math.max(l,c)]}return e},qBe=Ce([vr,e5,r5,or],s5),GBe=Ce(_k,vr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(bc(t.map(p=>p.value))).sort((p,m)=>p-m),s=r[0],a=r[r.length-1];if(s==null||a==null)return 1/0;var i=a-s;if(i===0)return 1/0;for(var o=0;o<r.length-1;o++){var l=r[o],c=r[o+1];if(!(l==null||c==null)){var f=c-l;n=Math.min(n,f)}}return n/i}}),QQ=Ce(GBe,Ln,oBe,Ss,(t,e,n,r,s)=>s,(t,e,n,r,s)=>{if(!Qt(t))return 0;var a=e==="vertical"?r.height:r.width;if(s==="gap")return t*a/2;if(s==="no-gap"){var i=bi(n,t*a),o=t*a/2;return o-i-(o-i)/a*i}return 0}),HBe=(t,e,n)=>{var r=Rc(t,e);return r==null||typeof r.padding!="string"?0:QQ(t,"xAxis",e,n,r.padding)},KBe=(t,e,n)=>{var r=Oc(t,e);return r==null||typeof r.padding!="string"?0:QQ(t,"yAxis",e,n,r.padding)},XBe=Ce(Rc,HBe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:s}=t;return typeof s=="string"?{left:e,right:e}:{left:((n=s.left)!==null&&n!==void 0?n:0)+e,right:((r=s.right)!==null&&r!==void 0?r:0)+e}}),YBe=Ce(Oc,KBe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:s}=t;return typeof s=="string"?{top:e,bottom:e}:{top:((n=s.top)!==null&&n!==void 0?n:0)+e,bottom:((r=s.bottom)!==null&&r!==void 0?r:0)+e}}),QBe=Ce([Ss,XBe,mk,pk,(t,e,n)=>n],(t,e,n,r,s)=>{var{padding:a}=r;return s?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),ZBe=Ce([Ss,Ln,YBe,mk,pk,(t,e,n)=>n],(t,e,n,r,s,a)=>{var{padding:i}=s;return a?[r.height-i.bottom,i.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Nx=(t,e,n,r)=>{var s;switch(e){case"xAxis":return QBe(t,n,r);case"yAxis":return ZBe(t,n,r);case"zAxis":return(s=BD(t,n))===null||s===void 0?void 0:s.range;case"angleAxis":return AQ(t);case"radiusAxis":return jQ(t,n);default:return}},ZQ=Ce([vr,Nx],Ak),JBe=Ce([td,qBe],OQ),zk=Ce([vr,td,JBe,ZQ],t5);Ce([Cx,Dk,or],ABe);function JQ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Pk=(t,e)=>e,Lk=(t,e,n)=>n,eUe=Ce(fk,Pk,Lk,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(JQ)),tUe=Ce(hk,Pk,Lk,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(JQ)),eZ=(t,e)=>({width:t.width,height:e.height}),nUe=(t,e)=>{var n=typeof e.width=="number"?e.width:hx;return{width:n,height:t.height}},rUe=Ce(Ss,Rc,eZ),sUe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},aUe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},iUe=Ce(Ac,Ss,eUe,Pk,Lk,(t,e,n,r,s)=>{var a={},i;return n.forEach(o=>{var l=eZ(e,o);i==null&&(i=sUe(e,r,t));var c=r==="top"&&!s||r==="bottom"&&s;a[o.id]=i-Number(c)*l.height,i+=(c?-1:1)*l.height}),a}),oUe=Ce(Ic,Ss,tUe,Pk,Lk,(t,e,n,r,s)=>{var a={},i;return n.forEach(o=>{var l=nUe(e,o);i==null&&(i=aUe(e,r,t));var c=r==="left"&&!s||r==="right"&&s;a[o.id]=i-Number(c)*l.width,i+=(c?-1:1)*l.width}),a}),lUe=(t,e)=>{var n=Rc(t,e);if(n!=null)return iUe(t,n.orientation,n.mirror)},cUe=Ce([Ss,Rc,lUe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var s=n?.[r];return s==null?{x:t.left,y:0}:{x:t.left,y:s}}}),uUe=(t,e)=>{var n=Oc(t,e);if(n!=null)return oUe(t,n.orientation,n.mirror)},dUe=Ce([Ss,Oc,uUe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var s=n?.[r];return s==null?{x:0,y:t.top}:{x:s,y:t.top}}}),fUe=Ce(Ss,Oc,(t,e)=>{var n=typeof e.width=="number"?e.width:hx;return{width:n,height:t.height}}),tZ=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:s,type:a,dataKey:i}=n,o=El(t,r),l=e.map(c=>c.value);if(i&&o&&a==="category"&&s&&iX(l))return l}},a5=Ce([Ln,_k,vr,or],tZ),nZ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:s,scale:a}=n,i=El(t,r);if(i&&(s==="number"||a!=="auto"))return e.map(o=>o.value)}},i5=Ce([Ln,_k,Hm,or],nZ),Y8=Ce([Ln,wBe,td,zk,a5,i5,Nx,r5,or],(t,e,n,r,s,a,i,o,l)=>{if(e!=null){var c=El(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:a,duplicateDomain:s,isCategorical:c,niceTicks:o,range:i,realScaleType:n,scale:r}}}),hUe=(t,e,n,r,s,a,i,o,l)=>{if(!(e==null||r==null)){var c=El(t,l),{type:f,ticks:p,tickCount:m}=e,y=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=f==="category"&&r.bandwidth?r.bandwidth()/y:0;b=l==="angleAxis"&&a!=null&&a.length>=2?na(a[0]-a[1])*2*b:b;var v=p||s;return v?v.map((x,S)=>{var C=i?i.indexOf(x):x,E=r.map(C);return Qt(E)?{index:S,coordinate:E+b,value:x,offset:b}:null}).filter(Ma):c&&o?o.map((x,S)=>{var C=r.map(x);return Qt(C)?{coordinate:C+b,value:x,index:S,offset:b}:null}).filter(Ma):r.ticks?r.ticks(m).map((x,S)=>{var C=r.map(x);return Qt(C)?{coordinate:C+b,value:x,index:S,offset:b}:null}).filter(Ma):r.domain().map((x,S)=>{var C=r.map(x);return Qt(C)?{coordinate:C+b,value:i?i[x]:x,index:S,offset:b}:null}).filter(Ma)}},rZ=Ce([Ln,Hm,td,zk,r5,Nx,a5,i5,or],hUe),pUe=(t,e,n,r,s,a,i)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=El(t,i),{tickCount:l}=e,c=0;return c=i==="angleAxis"&&r?.length>=2?na(r[0]-r[1])*2*c:c,o&&a?a.map((f,p)=>{var m=n.map(f);return Qt(m)?{coordinate:m+c,value:f,index:p,offset:c}:null}).filter(Ma):n.ticks?n.ticks(l).map((f,p)=>{var m=n.map(f);return Qt(m)?{coordinate:m+c,value:f,index:p,offset:c}:null}).filter(Ma):n.domain().map((f,p)=>{var m=n.map(f);return Qt(m)?{coordinate:m+c,value:s?s[f]:f,index:p,offset:c}:null}).filter(Ma)}},sZ=Ce([Ln,Hm,zk,Nx,a5,i5,or],pUe),aZ=Ce(vr,zk,(t,e)=>{if(!(t==null||e==null))return gS(gS({},t),{},{scale:e})}),mUe=Ce([vr,td,e5,ZQ],t5);Ce((t,e,n)=>BD(t,n),mUe,(t,e)=>{if(!(t==null||e==null))return gS(gS({},t),{},{scale:e})});var gUe=Ce([Ln,fk,hk],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),iZ=t=>t.options.defaultTooltipEventType,oZ=t=>t.options.validateTooltipEventTypes;function lZ(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function o5(t,e){var n=iZ(t),r=oZ(t);return lZ(e,n,r)}function yUe(t){return mt(e=>o5(e,t))}var cZ=(t,e)=>{var n,r=Number(e);if(!(xl(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},bUe=t=>t.tooltip.settings,pu={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},xUe={itemInteraction:{click:pu,hover:pu},axisInteraction:{click:pu,hover:pu},keyboardInteraction:pu,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},uZ=Ya({name:"tooltip",initialState:xUe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Xn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,s=So(t).tooltipItemPayloads.indexOf(n);s>-1&&(t.tooltipItemPayloads[s]=r)},prepare:Xn()},removeTooltipEntrySettings:{reducer(t,e){var n=So(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Xn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:vUe,replaceTooltipEntrySettings:wUe,removeTooltipEntrySettings:SUe,setTooltipSettingsState:CUe,setActiveMouseOverItemIndex:dZ,mouseLeaveItem:kUe,mouseLeaveChart:fZ,setActiveClickItemIndex:NUe,setMouseOverAxisIndex:hZ,setMouseClickAxisIndex:TUe,setSyncInteraction:h$,setKeyboardInteraction:p$}=uZ.actions,EUe=uZ.reducer;function Q8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function v1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q8(Object(n),!0).forEach(function(r){IUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IUe(t,e,n){return(e=AUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AUe(t){var e=jUe(t,"string");return typeof e=="symbol"?e:e+""}function jUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ue(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function RUe(t){return t.index!=null}var pZ=(t,e,n,r)=>{if(e==null)return pu;var s=$Ue(t,e,n);if(s==null)return pu;if(s.active)return s;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(RUe(s)){if(a)return v1(v1({},s),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return v1(v1({},pu),{},{coordinate:s.coordinate})};function OUe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function _Ue(t,e){var n=OUe(t),r=e[0],s=e[1];if(n===void 0)return!1;var a=Math.min(r,s),i=Math.max(r,s);return n>=a&&n<=i}function DUe(t,e,n){if(n==null||e==null)return!0;var r=Vn(t,e);return r==null||!yc(n)?!0:_Ue(r,n)}var l5=(t,e,n,r)=>{var s=t?.index;if(s==null)return null;var a=Number(s);if(!Qt(a))return s;var i=0,o=1/0;e.length>0&&(o=e.length-1);var l=Math.max(i,Math.min(a,o)),c=e[l];return c==null||DUe(c,n,r)?String(l):null},mZ=(t,e,n,r,s,a,i)=>{if(a!=null){var o=i[0],l=o?.getPosition(a);if(l!=null)return l;var c=s?.[Number(a)];if(c)return n==="horizontal"?{x:c.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:c.coordinate}}},gZ=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var s;if(n==="hover"?s=t.itemInteraction.hover.graphicalItemId:s=t.itemInteraction.click.graphicalItemId,s==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.graphicalItemId)===s})},yZ=t=>t.options.tooltipPayloadSearcher,Xm=t=>t.tooltip;function Z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function J8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z8(Object(n),!0).forEach(function(r){zUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zUe(t,e,n){return(e=PUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PUe(t){var e=LUe(t,"string");return typeof e=="symbol"?e:e+""}function LUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MUe(t,e){return t??e}var bZ=(t,e,n,r,s,a,i)=>{if(!(e==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:f}=n,p=[];return t.reduce((m,y)=>{var b,{dataDefinedOnItem:v,settings:x}=y,S=MUe(v,o),C=Array.isArray(S)?JX(S,c,f):S,E=(b=x?.dataKey)!==null&&b!==void 0?b:r,k=x?.nameKey,I;if(r&&Array.isArray(C)&&!Array.isArray(C[0])&&i==="axis"?I=oX(C,r,s):I=a(C,e,l,k),Array.isArray(I))I.forEach(_=>{var z=J8(J8({},x),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});m.push(eF({tooltipEntrySettings:z,dataKey:_.dataKey,payload:_.payload,value:Vn(_.payload,_.dataKey),name:_.name}))});else{var $;m.push(eF({tooltipEntrySettings:x,dataKey:E,payload:I,value:Vn(I,E),name:($=Vn(I,k))!==null&&$!==void 0?$:x?.name}))}return m},p)}},c5=Ce([is,zQ,OD],YQ),FUe=Ce([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),BUe=Ce([ks,Gm],UD),Ym=Ce([FUe,is,BUe],WD,{memoizeOptions:{resultEqualityCheck:Ok}}),UUe=Ce([Ym],t=>t.filter(FD)),WUe=Ce([Ym],VD,{memoizeOptions:{resultEqualityCheck:Ok}}),Qm=Ce([WUe,$c],qD),VUe=Ce([UUe,$c,is],RQ),u5=Ce([Qm,is,Ym],HD),xZ=Ce([is],KD),qUe=Ce([is],t=>t.allowDataOverflow),vZ=Ce([xZ,qUe],pQ),GUe=Ce([Ym],t=>t.filter(FD)),HUe=Ce([VUe,GUe,wx,NQ],BQ),KUe=Ce([HUe,$c,ks,vZ],WQ),XUe=Ce([Ym],MQ),YUe=Ce([Qm,is,XUe,Dk,ks],QD,{memoizeOptions:{resultEqualityCheck:Rk}}),QUe=Ce([VQ,ks,Gm],Km),ZUe=Ce([QUe,ks],HQ),JUe=Ce([qQ,ks,Gm],Km),eWe=Ce([JUe,ks],KQ),tWe=Ce([GQ,ks,Gm],Km),nWe=Ce([tWe,ks],XQ),rWe=Ce([ZUe,nWe,eWe],yS),sWe=Ce([is,xZ,vZ,KUe,YUe,rWe,Ln,ks],ZD),Tx=Ce([is,Ln,Qm,u5,wx,ks,sWe],JD),aWe=Ce([Tx,is,c5],n5),iWe=Ce([is,Tx,aWe,ks],s5),wZ=t=>{var e=ks(t),n=Gm(t),r=!1;return Nx(t,e,n,r)},SZ=Ce([is,wZ],Ak),CZ=Ce([is,c5,iWe,SZ],t5),oWe=Ce([Ln,u5,is,ks],tZ),lWe=Ce([Ln,u5,is,ks],nZ),cWe=(t,e,n,r,s,a,i,o)=>{if(e){var{type:l}=e,c=El(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=l==="category"&&r.bandwidth?r.bandwidth()/f:0;return p=o==="angleAxis"&&s!=null&&s?.length>=2?na(s[0]-s[1])*2*p:p,c&&i?i.map((m,y)=>{var b=r.map(m);return Qt(b)?{coordinate:b+p,value:m,index:y,offset:p}:null}).filter(Ma):r.domain().map((m,y)=>{var b=r.map(m);return Qt(b)?{coordinate:b+p,value:a?a[m]:m,index:y,offset:p}:null}).filter(Ma)}}},_c=Ce([Ln,is,c5,CZ,wZ,oWe,lWe,ks],cWe),d5=Ce([iZ,oZ,bUe],(t,e,n)=>lZ(n.shared,t,e)),kZ=t=>t.tooltip.settings.trigger,f5=t=>t.tooltip.settings.defaultIndex,Ex=Ce([Xm,d5,kZ,f5],pZ),Sp=Ce([Ex,Qm,kx,Tx],l5),NZ=Ce([_c,Sp],cZ),TZ=Ce([Ex],t=>{if(t)return t.dataKey}),uWe=Ce([Ex],t=>{if(t)return t.graphicalItemId}),EZ=Ce([Xm,d5,kZ,f5],gZ),dWe=Ce([Ic,Ac,Ln,Ss,_c,f5,EZ],mZ),fWe=Ce([Ex,dWe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),hWe=Ce([Ex],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),pWe=Ce([EZ,Sp,$c,kx,NZ,yZ,d5],bZ),mWe=Ce([pWe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function eB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function tB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eB(Object(n),!0).forEach(function(r){gWe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gWe(t,e,n){return(e=yWe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yWe(t){var e=bWe(t,"string");return typeof e=="symbol"?e:e+""}function bWe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xWe=()=>mt(is),vWe=()=>{var t=xWe(),e=mt(_c),n=mt(CZ);return Hw(!t||!n?void 0:tB(tB({},t),{},{scale:n}),e)};function nB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function zh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nB(Object(n),!0).forEach(function(r){wWe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wWe(t,e,n){return(e=SWe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SWe(t){var e=CWe(t,"string");return typeof e=="symbol"?e:e+""}function CWe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kWe=(t,e,n,r)=>{var s=e.find(a=>a&&a.index===n);if(s){if(t==="horizontal")return{x:s.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:s.coordinate}}return{x:0,y:0}},NWe=(t,e,n,r)=>{var s=e.find(c=>c&&c.index===n);if(s){if(t==="centric"){var a=s.coordinate,{radius:i}=r;return zh(zh(zh({},r),Lr(r.cx,r.cy,i,a)),{},{angle:a,radius:i})}var o=s.coordinate,{angle:l}=r;return zh(zh(zh({},r),Lr(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function TWe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var IZ=(t,e,n,r,s)=>{var a,i=(a=e?.length)!==null&&a!==void 0?a:0;if(i<=1||t==null)return 0;if(r==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var o=0;o<i;o++){var l,c,f,p,m,y=o>0?(l=n[o-1])===null||l===void 0?void 0:l.coordinate:(c=n[i-1])===null||c===void 0?void 0:c.coordinate,b=(f=n[o])===null||f===void 0?void 0:f.coordinate,v=o>=i-1?(p=n[0])===null||p===void 0?void 0:p.coordinate:(m=n[o+1])===null||m===void 0?void 0:m.coordinate,x=void 0;if(!(y==null||b==null||v==null))if(na(b-y)!==na(v-b)){var S=[];if(na(v-b)===na(s[1]-s[0])){x=v;var C=b+s[1]-s[0];S[0]=Math.min(C,(C+y)/2),S[1]=Math.max(C,(C+y)/2)}else{x=y;var E=v+s[1]-s[0];S[0]=Math.min(b,(E+b)/2),S[1]=Math.max(b,(E+b)/2)}var k=[Math.min(b,(x+b)/2),Math.max(b,(x+b)/2)];if(t>k[0]&&t<=k[1]||t>=S[0]&&t<=S[1]){var I;return(I=n[o])===null||I===void 0?void 0:I.index}}else{var $=Math.min(y,v),_=Math.max(y,v);if(t>($+b)/2&&t<=(_+b)/2){var z;return(z=n[o])===null||z===void 0?void 0:z.index}}}else if(e)for(var L=0;L<i;L++){var R=e[L];if(R!=null){var D=e[L+1],U=e[L-1];if(L===0&&D!=null&&t<=(R.coordinate+D.coordinate)/2||L===i-1&&U!=null&&t>(R.coordinate+U.coordinate)/2||L>0&&L<i-1&&U!=null&&D!=null&&t>(R.coordinate+U.coordinate)/2&&t<=(R.coordinate+D.coordinate)/2)return R.index}}return-1},AZ=()=>mt(OD),h5=(t,e)=>e,jZ=(t,e,n)=>n,p5=(t,e,n,r)=>r,EWe=Ce(_c,t=>tk(t,e=>e.coordinate)),m5=Ce([Xm,h5,jZ,p5],pZ),g5=Ce([m5,Qm,kx,Tx],l5),IWe=(t,e,n)=>{if(e!=null){var r=Xm(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},$Z=Ce([Xm,h5,jZ,p5],gZ),bS=Ce([Ic,Ac,Ln,Ss,_c,p5,$Z],mZ),AWe=Ce([m5,bS],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),RZ=Ce([_c,g5],cZ),jWe=Ce([$Z,g5,$c,kx,RZ,yZ,h5],bZ),$We=Ce([m5,g5],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),RWe=(t,e,n,r,s,a,i)=>{if(!(!t||!n||!r||!s)&&TWe(t,i)){var o=hLe(t,e),l=IZ(o,a,s,n,r),c=kWe(e,s,l,t);return{activeIndex:String(l),activeCoordinate:c}}},OWe=(t,e,n,r,s,a,i)=>{if(!(!t||!r||!s||!a||!n)){var o=m6e(t,n);if(o){var l=pLe(o,e),c=IZ(l,i,a,r,s),f=NWe(e,a,c,o);return{activeIndex:String(c),activeCoordinate:f}}}},_We=(t,e,n,r,s,a,i,o)=>{if(!(!t||!e||!r||!s||!a))return e==="horizontal"||e==="vertical"?RWe(t,e,r,s,a,i,o):OWe(t,e,n,r,s,a,i)},DWe=Ce(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),zWe=Ce(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Ms)),n=Array.from(new Set(e));return n.sort((r,s)=>r-s)},{memoizeOptions:{resultEqualityCheck:mBe}});function rB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function sB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rB(Object(n),!0).forEach(function(r){PWe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PWe(t,e,n){return(e=LWe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LWe(t){var e=MWe(t,"string");return typeof e=="symbol"?e:e+""}function MWe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FWe={},BWe={zIndexMap:Object.values(Ms).reduce((t,e)=>sB(sB({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),FWe)},UWe=new Set(Object.values(Ms));function WWe(t){return UWe.has(t)}var OZ=Ya({name:"zIndex",initialState:BWe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Xn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!WWe(n)&&delete t.zIndexMap[n])},prepare:Xn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:s}=e.payload;t.zIndexMap[n]?s?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:s?void 0:r,panoramaElement:s?r:void 0}},prepare:Xn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Xn()}}}),{registerZIndexPortal:VWe,unregisterZIndexPortal:qWe,registerZIndexPortalElement:GWe,unregisterZIndexPortalElement:HWe}=OZ.actions,KWe=OZ.reducer;function Do(t){var{zIndex:e,children:n}=t,r=VLe(),s=r&&e!==void 0&&e!==0,a=Qa(),i=rr();T.useLayoutEffect(()=>s?(i(VWe({zIndex:e})),()=>{i(qWe({zIndex:e}))}):Bm,[i,e,s]);var o=mt(l=>DWe(l,e,a));return s?o?D$.createPortal(n,o):null:n}function m$(){return m$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m$.apply(null,arguments)}function aB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function w1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aB(Object(n),!0).forEach(function(r){XWe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XWe(t,e,n){return(e=YWe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YWe(t){var e=QWe(t,"string");return typeof e=="symbol"?e:e+""}function QWe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZWe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return T.isValidElement(e)?T.cloneElement(e,r):T.createElement(n,r)}function JWe(t){var e,{coordinate:n,payload:r,index:s,offset:a,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:f}=t,p=n,m=r,y=s;if(!l||!p||f!=="ScatterChart"&&c!=="axis")return null;var b,v,x;if(f==="ScatterChart")b=p,v=AMe,x=Ms.cursorLine;else if(f==="BarChart")b=jMe(o,p,a,i),v=IY,x=Ms.cursorRectangle;else if(o==="radial"&&uX(p)){var{cx:S,cy:C,radius:E,startAngle:k,endAngle:I}=jY(p);b={cx:S,cy:C,startAngle:k,endAngle:I,innerRadius:E,outerRadius:E},v=RY,x=Ms.cursorLine}else b={points:x6e(o,p,a)},v=Jh,x=Ms.cursorLine;var $=typeof l=="object"&&"className"in l?l.className:void 0,_=w1(w1(w1(w1({stroke:"#ccc",pointerEvents:"none"},a),b),gp(l)),{},{payload:m,payloadIndex:y,className:gn("recharts-tooltip-cursor",$)});return T.createElement(Do,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:x},T.createElement(ZWe,{cursor:l,cursorComp:v,cursorProps:_}))}function eVe(t){var e=vWe(),n=cY(),r=Um(),s=AZ();return e==null||n==null||r==null||s==null?null:T.createElement(JWe,m$({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:s}))}var _Z=T.createContext(null),tVe=()=>T.useContext(_Z),lA={exports:{}},iB;function nVe(){return iB||(iB=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function a(l,c,f,p,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var y=new s(f,p||l,m),b=n?n+c:c;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],y]:l._events[b].push(y):(l._events[b]=y,l._eventsCount++),l}function i(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,p;if(this._eventsCount===0)return c;for(p in f=this._events)e.call(f,p)&&c.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=n?n+c:c,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,y=p.length,b=new Array(y);m<y;m++)b[m]=p[m].fn;return b},o.prototype.listenerCount=function(c){var f=n?n+c:c,p=this._events[f];return p?p.fn?1:p.length:0},o.prototype.emit=function(c,f,p,m,y,b){var v=n?n+c:c;if(!this._events[v])return!1;var x=this._events[v],S=arguments.length,C,E;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),S){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,p),!0;case 4:return x.fn.call(x.context,f,p,m),!0;case 5:return x.fn.call(x.context,f,p,m,y),!0;case 6:return x.fn.call(x.context,f,p,m,y,b),!0}for(E=1,C=new Array(S-1);E<S;E++)C[E-1]=arguments[E];x.fn.apply(x.context,C)}else{var k=x.length,I;for(E=0;E<k;E++)switch(x[E].once&&this.removeListener(c,x[E].fn,void 0,!0),S){case 1:x[E].fn.call(x[E].context);break;case 2:x[E].fn.call(x[E].context,f);break;case 3:x[E].fn.call(x[E].context,f,p);break;case 4:x[E].fn.call(x[E].context,f,p,m);break;default:if(!C)for(I=1,C=new Array(S-1);I<S;I++)C[I-1]=arguments[I];x[E].fn.apply(x[E].context,C)}}return!0},o.prototype.on=function(c,f,p){return a(this,c,f,p,!1)},o.prototype.once=function(c,f,p){return a(this,c,f,p,!0)},o.prototype.removeListener=function(c,f,p,m){var y=n?n+c:c;if(!this._events[y])return this;if(!f)return i(this,y),this;var b=this._events[y];if(b.fn)b.fn===f&&(!m||b.once)&&(!p||b.context===p)&&i(this,y);else{for(var v=0,x=[],S=b.length;v<S;v++)(b[v].fn!==f||m&&!b[v].once||p&&b[v].context!==p)&&x.push(b[v]);x.length?this._events[y]=x.length===1?x[0]:x:i(this,y)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&i(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(lA)),lA.exports}var rVe=nVe();const sVe=Ni(rVe);var h0=new sVe,g$="recharts.syncEvent.tooltip",oB="recharts.syncEvent.brush",DZ=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!xl(n))return t[n]}},aVe={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},zZ=Ya({name:"options",initialState:aVe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),iVe=zZ.reducer,{createEventEmitter:oVe}=zZ.actions;function lVe(t){return t.tooltip.syncInteraction}var cVe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},PZ=Ya({name:"chartData",initialState:cVe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:lB,setDataStartEndIndexes:uVe,setComputedData:KXe}=PZ.actions,dVe=PZ.reducer,fVe=["x","y"];function cB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ph(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cB(Object(n),!0).forEach(function(r){hVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hVe(t,e,n){return(e=pVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pVe(t){var e=mVe(t,"string");return typeof e=="symbol"?e:e+""}function mVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gVe(t,e){if(t==null)return{};var n,r,s=yVe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function yVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function bVe(){var t=mt(_D),e=mt(DD),n=rr(),r=mt(TQ),s=mt(_c),a=Um(),i=gk(),o=mt(l=>l.rootProps.className);T.useEffect(()=>{if(t==null)return Bm;var l=(c,f,p)=>{if(e!==p&&t===c){if(r==="index"){var m;if(i&&f!==null&&f!==void 0&&(m=f.payload)!==null&&m!==void 0&&m.coordinate&&f.payload.sourceViewBox){var y=f.payload.coordinate,{x:b,y:v}=y,x=gVe(y,fVe),{x:S,y:C,width:E,height:k}=f.payload.sourceViewBox,I=Ph(Ph({},x),{},{x:i.x+(E?(b-S)/E:0)*i.width,y:i.y+(k?(v-C)/k:0)*i.height});n(Ph(Ph({},f),{},{payload:Ph(Ph({},f.payload),{},{coordinate:I})}))}else n(f);return}if(s!=null){var $;if(typeof r=="function"){var _={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},z=r(s,_);$=s[z]}else r==="value"&&($=s.find(B=>String(B.value)===f.payload.label));var{coordinate:L}=f.payload;if($==null||f.payload.active===!1||L==null||i==null){n(h$({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:R,y:D}=L,U=Math.min(R,i.x+i.width),X=Math.min(D,i.y+i.height),V={x:a==="horizontal"?$.coordinate:U,y:a==="horizontal"?X:$.coordinate},Y=h$({active:f.payload.active,coordinate:V,dataKey:f.payload.dataKey,index:String($.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(Y)}}};return h0.on(g$,l),()=>{h0.off(g$,l)}},[o,n,e,t,r,s,a,i])}function xVe(){var t=mt(_D),e=mt(DD),n=rr();T.useEffect(()=>{if(t==null)return Bm;var r=(s,a,i)=>{e!==i&&t===s&&n(uVe(a))};return h0.on(oB,r),()=>{h0.off(oB,r)}},[n,e,t])}function vVe(){var t=rr();T.useEffect(()=>{t(oVe())},[t]),bVe(),xVe()}function wVe(t,e,n,r,s,a){var i=mt(y=>IWe(y,t,e)),o=mt(DD),l=mt(_D),c=mt(TQ),f=mt(lVe),p=f?.active,m=gk();T.useEffect(()=>{if(!p&&l!=null&&o!=null){var y=h$({active:a,coordinate:n,dataKey:i,index:s,label:typeof r=="number"?String(r):r,sourceViewBox:m,graphicalItemId:void 0});h0.emit(g$,l,y,o)}},[p,n,i,s,r,o,l,c,a,m])}function uB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function dB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uB(Object(n),!0).forEach(function(r){SVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SVe(t,e,n){return(e=CVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CVe(t){var e=kVe(t,"string");return typeof e=="symbol"?e:e+""}function kVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NVe(t){return t.dataKey}function TVe(t,e){return T.isValidElement(t)?T.cloneElement(t,e):typeof t=="function"?T.createElement(t,e):T.createElement(lMe,e)}var fB=[],EVe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function xS(t){var e,n,r=Vs(t,EVe),{active:s,allowEscapeViewBox:a,animationDuration:i,animationEasing:o,content:l,filterNull:c,isAnimationActive:f,offset:p,payloadUniqBy:m,position:y,reverseDirection:b,useTranslate3d:v,wrapperStyle:x,cursor:S,shared:C,trigger:E,defaultIndex:k,portal:I,axisId:$}=r,_=rr(),z=typeof k=="number"?String(k):k;T.useEffect(()=>{_(CUe({shared:C,trigger:E,axisId:$,active:s,defaultIndex:z}))},[_,C,E,$,s,z]);var L=gk(),R=CY(),D=yUe(C),{activeIndex:U,isActive:X}=(e=mt(De=>$We(De,D,E,z)))!==null&&e!==void 0?e:{},V=mt(De=>jWe(De,D,E,z)),Y=mt(De=>RZ(De,D,E,z)),B=mt(De=>AWe(De,D,E,z)),Z=V,J=tVe(),ae=(n=s??X)!==null&&n!==void 0?n:!1,[ee,W]=ePe([Z,ae]),Q=D==="axis"?Y:void 0;wVe(D,E,B,Q,U,ae);var se=I??J;if(se==null||L==null||D==null)return null;var fe=Z??fB;ae||(fe=fB),c&&fe.length&&(fe=Tze(fe.filter(De=>De.value!=null&&(De.hide!==!0||r.includeHidden)),m,NVe));var Ne=fe.length>0,_e=T.createElement(mMe,{allowEscapeViewBox:a,animationDuration:i,animationEasing:o,isAnimationActive:f,active:ae,coordinate:B,hasPayload:Ne,offset:p,position:y,reverseDirection:b,useTranslate3d:v,viewBox:L,wrapperStyle:x,lastBoundingBox:ee,innerRef:W,hasPortalFromProps:!!I},TVe(l,dB(dB({},r),{},{payload:fe,label:Q,active:ae,activeIndex:U,coordinate:B,accessibilityLayer:R})));return T.createElement(T.Fragment,null,D$.createPortal(_e,se),ae&&T.createElement(eVe,{cursor:S,tooltipEventType:D,coordinate:B,payload:fe,index:U}))}var Ix=t=>null;Ix.displayName="Cell";function IVe(t,e,n){return(e=AVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AVe(t){var e=jVe(t,"string");return typeof e=="symbol"?e:e+""}function jVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class $Ve{constructor(e){IVe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function hB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function RVe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hB(Object(n),!0).forEach(function(r){OVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OVe(t,e,n){return(e=_Ve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ve(t){var e=DVe(t,"string");return typeof e=="symbol"?e:e+""}function DVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zVe={cacheSize:2e3,enableCache:!0},LZ=RVe({},zVe),pB=new $Ve(LZ.cacheSize),PVe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},mB="recharts_measurement_span";function LVe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",s=e.fontWeight||"",a=e.fontStyle||"",i=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(s,"|").concat(a,"|").concat(i,"|").concat(o)}var gB=(t,e)=>{try{var n=document.getElementById(mB);n||(n=document.createElement("span"),n.setAttribute("id",mB),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,PVe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Iy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||gx.isSsr)return{width:0,height:0};if(!LZ.enableCache)return gB(e,n);var r=LVe(e,n),s=pB.get(r);if(s)return s;var a=gB(e,n);return pB.set(r,a),a},MZ;function MVe(t,e,n){return(e=FVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FVe(t){var e=BVe(t,"string");return typeof e=="symbol"?e:e+""}function BVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,UVe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,WVe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,VVe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},qVe=["cm","mm","pt","pc","in","Q","px"];function GVe(t){return qVe.includes(t)}var Vh="NaN";function HVe(t,e){return t*VVe[e]}class Ds{static parse(e){var n,[,r,s]=(n=WVe.exec(e))!==null&&n!==void 0?n:[];return r==null?Ds.NaN:new Ds(parseFloat(r),s??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,xl(e)&&(this.unit=""),n!==""&&!UVe.test(n)&&(this.num=NaN,this.unit=""),GVe(n)&&(this.num=HVe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Ds(NaN,""):new Ds(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Ds(NaN,""):new Ds(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ds(NaN,""):new Ds(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ds(NaN,""):new Ds(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return xl(this.num)}}MZ=Ds;MVe(Ds,"NaN",new MZ(NaN,""));function FZ(t){if(t==null||t.includes(Vh))return Vh;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,s,a]=(n=yB.exec(e))!==null&&n!==void 0?n:[],i=Ds.parse(r??""),o=Ds.parse(a??""),l=s==="*"?i.multiply(o):i.divide(o);if(l.isNaN())return Vh;e=e.replace(yB,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,f,p,m]=(c=bB.exec(e))!==null&&c!==void 0?c:[],y=Ds.parse(f??""),b=Ds.parse(m??""),v=p==="+"?y.add(b):y.subtract(b);if(v.isNaN())return Vh;e=e.replace(bB,v.toString())}return e}var xB=/\(([^()]*)\)/;function KVe(t){for(var e=t,n;(n=xB.exec(e))!=null;){var[,r]=n;e=e.replace(xB,FZ(r))}return e}function XVe(t){var e=t.replace(/\s+/g,"");return e=KVe(e),e=FZ(e),e}function YVe(t){try{return XVe(t)}catch{return Vh}}function cA(t){var e=YVe(t.slice(5,-1));return e===Vh?"":e}var QVe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],ZVe=["dx","dy","angle","className","breakAll"];function y$(){return y$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y$.apply(null,arguments)}function vB(t,e){if(t==null)return{};var n,r,s=JVe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function JVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var BZ=/[ \f\n\r\t\v\u2028\u2029]+/,UZ=t=>{var{children:e,breakAll:n,style:r}=t;try{var s=[];Bs(e)||(n?s=e.toString().split(""):s=e.toString().split(BZ));var a=s.map(o=>({word:o,width:Iy(o,r).width})),i=n?0:Iy("",r).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}};function e9e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var WZ=(t,e,n,r)=>t.reduce((s,a)=>{var{word:i,width:o}=a,l=s[s.length-1];if(l&&o!=null&&(e==null||r||l.width+o+n<Number(e)))l.words.push(i),l.width+=o+n;else{var c={words:[i],width:o};s.push(c)}return s},[]),VZ=t=>t.reduce((e,n)=>e.width>n.width?e:n),t9e="",wB=(t,e,n,r,s,a,i,o)=>{var l=t.slice(0,e),c=UZ({breakAll:n,style:r,children:l+t9e});if(!c)return[!1,[]];var f=WZ(c.wordsWithComputedWidth,a,i,o),p=f.length>s||VZ(f).width>Number(a);return[p,f]},n9e=(t,e,n,r,s)=>{var{maxLines:a,children:i,style:o,breakAll:l}=t,c=at(a),f=String(i),p=WZ(e,r,n,s);if(!c||s)return p;var m=p.length>a||VZ(p).width>Number(r);if(!m)return p;for(var y=0,b=f.length-1,v=0,x;y<=b&&v<=f.length-1;){var S=Math.floor((y+b)/2),C=S-1,[E,k]=wB(f,C,l,o,a,r,n,s),[I]=wB(f,S,l,o,a,r,n,s);if(!E&&!I&&(y=S+1),E&&I&&(b=S-1),!E&&I){x=k;break}v++}return x||p},SB=t=>{var e=Bs(t)?[]:t.toString().split(BZ);return[{words:e,width:void 0}]},r9e=t=>{var{width:e,scaleToFit:n,children:r,style:s,breakAll:a,maxLines:i}=t;if((e||n)&&!gx.isSsr){var o,l,c=UZ({breakAll:a,children:r,style:s});if(c){var{wordsWithComputedWidth:f,spaceWidth:p}=c;o=f,l=p}else return SB(r);return n9e({breakAll:a,children:r,maxLines:i,style:s},o,l,e,!!n)}return SB(r)},qZ="#808080",s9e={angle:0,breakAll:!1,capHeight:"0.71em",fill:qZ,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Mk=T.forwardRef((t,e)=>{var n=Vs(t,s9e),{x:r,y:s,lineHeight:a,capHeight:i,fill:o,scaleToFit:l,textAnchor:c,verticalAnchor:f}=n,p=vB(n,QVe),m=T.useMemo(()=>r9e({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:l,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,l,p.style,p.width]),{dx:y,dy:b,angle:v,className:x,breakAll:S}=p,C=vB(p,ZVe);if(!vl(r)||!vl(s)||m.length===0)return null;var E=Number(r)+(at(y)?y:0),k=Number(s)+(at(b)?b:0);if(!Qt(E)||!Qt(k))return null;var I;switch(f){case"start":I=cA("calc(".concat(i,")"));break;case"middle":I=cA("calc(".concat((m.length-1)/2," * -").concat(a," + (").concat(i," / 2))"));break;default:I=cA("calc(".concat(m.length-1," * -").concat(a,")"));break}var $=[],_=m[0];if(l&&_!=null){var z=_.width,{width:L}=p;$.push("scale(".concat(at(L)&&at(z)?L/z:1,")"))}return v&&$.push("rotate(".concat(v,", ").concat(E,", ").concat(k,")")),$.length&&(C.transform=$.join(" ")),T.createElement("text",y$({},ka(C),{ref:e,x:E,y:k,className:gn("recharts-text",x),textAnchor:c,fill:o.includes("url")?qZ:o}),m.map((R,D)=>{var U=R.words.join(S?"":" ");return T.createElement("tspan",{x:E,dy:D===0?I:a,key:"".concat(U,"-").concat(D)},U)}))});Mk.displayName="Text";function CB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Qo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CB(Object(n),!0).forEach(function(r){a9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a9e(t,e,n){return(e=i9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i9e(t){var e=o9e(t,"string");return typeof e=="symbol"?e:e+""}function o9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var l9e=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:s}=t,{x:a,y:i,height:o,upperWidth:l,lowerWidth:c}=sD(e),f=a,p=a+(l-c)/2,m=(f+p)/2,y=(l+c)/2,b=f+l/2,v=o>=0?1:-1,x=v*r,S=v>0?"end":"start",C=v>0?"start":"end",E=l>=0?1:-1,k=E*r,I=E>0?"end":"start",$=E>0?"start":"end",_=s;if(n==="top"){var z={x:f+l/2,y:i-x,horizontalAnchor:"middle",verticalAnchor:S};return _&&(z.height=Math.max(i-_.y,0),z.width=l),z}if(n==="bottom"){var L={x:p+c/2,y:i+o+x,horizontalAnchor:"middle",verticalAnchor:C};return _&&(L.height=Math.max(_.y+_.height-(i+o),0),L.width=c),L}if(n==="left"){var R={x:m-k,y:i+o/2,horizontalAnchor:I,verticalAnchor:"middle"};return _&&(R.width=Math.max(R.x-_.x,0),R.height=o),R}if(n==="right"){var D={x:m+y+k,y:i+o/2,horizontalAnchor:$,verticalAnchor:"middle"};return _&&(D.width=Math.max(_.x+_.width-D.x,0),D.height=o),D}var U=_?{width:y,height:o}:{};return n==="insideLeft"?Qo({x:m+k,y:i+o/2,horizontalAnchor:$,verticalAnchor:"middle"},U):n==="insideRight"?Qo({x:m+y-k,y:i+o/2,horizontalAnchor:I,verticalAnchor:"middle"},U):n==="insideTop"?Qo({x:f+l/2,y:i+x,horizontalAnchor:"middle",verticalAnchor:C},U):n==="insideBottom"?Qo({x:p+c/2,y:i+o-x,horizontalAnchor:"middle",verticalAnchor:S},U):n==="insideTopLeft"?Qo({x:f+k,y:i+x,horizontalAnchor:$,verticalAnchor:C},U):n==="insideTopRight"?Qo({x:f+l-k,y:i+x,horizontalAnchor:I,verticalAnchor:C},U):n==="insideBottomLeft"?Qo({x:p+k,y:i+o-x,horizontalAnchor:$,verticalAnchor:S},U):n==="insideBottomRight"?Qo({x:p+c-k,y:i+o-x,horizontalAnchor:I,verticalAnchor:S},U):n&&typeof n=="object"&&(at(n.x)||Tf(n.x))&&(at(n.y)||Tf(n.y))?Qo({x:a+bi(n.x,y),y:i+bi(n.y,o),horizontalAnchor:"end",verticalAnchor:"end"},U):Qo({x:b,y:i+o/2,horizontalAnchor:"middle",verticalAnchor:"middle"},U)},c9e=["labelRef"],u9e=["content"];function kB(t,e){if(t==null)return{};var n,r,s=d9e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function d9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function NB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ny(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NB(Object(n),!0).forEach(function(r){f9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f9e(t,e,n){return(e=h9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h9e(t){var e=p9e(t,"string");return typeof e=="symbol"?e:e+""}function p9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ec(){return ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ec.apply(null,arguments)}var GZ=T.createContext(null),m9e=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:s,width:a,height:i,children:o}=t,l=T.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:s,width:a,height:i}),[e,n,r,s,a,i]);return T.createElement(GZ.Provider,{value:l},o)},HZ=()=>{var t=T.useContext(GZ),e=gk();return t||(e?sD(e):void 0)},g9e=T.createContext(null),y9e=()=>{var t=T.useContext(g9e),e=mt($Q);return t||e},b9e=t=>{var{value:e,formatter:n}=t,r=Bs(t.children)?e:t.children;return typeof n=="function"?n(r):r},y5=t=>t!=null&&typeof t=="function",x9e=(t,e)=>{var n=na(e-t),r=Math.min(Math.abs(e-t),360);return n*r},v9e=(t,e,n,r,s)=>{var{offset:a,className:i}=t,{cx:o,cy:l,innerRadius:c,outerRadius:f,startAngle:p,endAngle:m,clockWise:y}=s,b=(c+f)/2,v=x9e(p,m),x=v>=0?1:-1,S,C;switch(e){case"insideStart":S=p+x*a,C=y;break;case"insideEnd":S=m-x*a,C=!y;break;case"end":S=m+x*a,C=y;break;default:throw new Error("Unsupported position ".concat(e))}C=v<=0?C:!C;var E=Lr(o,l,b,S),k=Lr(o,l,b,S+(C?1:-1)*359),I="M".concat(E.x,",").concat(E.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(C?0:1,`,
    `).concat(k.x,",").concat(k.y),$=Bs(t.id)?e0("recharts-radial-line-"):t.id;return T.createElement("text",ec({},r,{dominantBaseline:"central",className:gn("recharts-radial-bar-label",i)}),T.createElement("defs",null,T.createElement("path",{id:$,d:I})),T.createElement("textPath",{xlinkHref:"#".concat($)},n))},w9e=(t,e,n)=>{var{cx:r,cy:s,innerRadius:a,outerRadius:i,startAngle:o,endAngle:l}=t,c=(o+l)/2;if(n==="outside"){var{x:f,y:p}=Lr(r,s,i+e,c);return{x:f,y:p,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"end"};var m=(a+i)/2,{x:y,y:b}=Lr(r,s,m,c);return{x:y,y:b,textAnchor:"middle",verticalAnchor:"middle"}},K1=t=>t!=null&&"cx"in t&&at(t.cx),S9e={angle:0,offset:5,zIndex:Ms.label,position:"middle",textBreakAll:!1};function C9e(t){if(!K1(t))return t;var{cx:e,cy:n,outerRadius:r}=t,s=r*2;return{x:e-r,y:n-r,width:s,upperWidth:s,lowerWidth:s,height:s}}function hu(t){var e=Vs(t,S9e),{viewBox:n,parentViewBox:r,position:s,value:a,children:i,content:o,className:l="",textBreakAll:c,labelRef:f}=e,p=y9e(),m=HZ(),y=s==="center"?m:p??m,b,v,x;n==null?b=y:K1(n)?b=n:b=sD(n);var S=C9e(b);if(!b||Bs(a)&&Bs(i)&&!T.isValidElement(o)&&typeof o!="function")return null;var C=Ny(Ny({},e),{},{viewBox:b});if(T.isValidElement(o)){var{labelRef:E}=C,k=kB(C,c9e);return T.cloneElement(o,k)}if(typeof o=="function"){var{content:I}=C,$=kB(C,u9e);if(v=T.createElement(o,$),T.isValidElement(v))return v}else v=b9e(e);var _=ka(e);if(K1(b)){if(s==="insideStart"||s==="insideEnd"||s==="end")return v9e(e,s,v,_,b);x=w9e(b,e.offset,e.position)}else{if(!S)return null;var z=l9e({viewBox:S,position:s,offset:e.offset,parentViewBox:K1(r)?void 0:r});x=Ny(Ny({x:z.x,y:z.y,textAnchor:z.horizontalAnchor,verticalAnchor:z.verticalAnchor},z.width!==void 0?{width:z.width}:{}),z.height!==void 0?{height:z.height}:{})}return T.createElement(Do,{zIndex:e.zIndex},T.createElement(Mk,ec({ref:f,className:gn("recharts-label",l)},_,x,{textAnchor:e9e(_.textAnchor)?_.textAnchor:x.textAnchor,breakAll:c}),v))}hu.displayName="Label";var k9e=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?T.createElement(hu,ec({key:"label-implicit"},r)):vl(t)?T.createElement(hu,ec({key:"label-implicit",value:t},r)):T.isValidElement(t)?t.type===hu?T.cloneElement(t,Ny({key:"label-implicit"},r)):T.createElement(hu,ec({key:"label-implicit",content:t},r)):y5(t)?T.createElement(hu,ec({key:"label-implicit",content:t},r)):t&&typeof t=="object"?T.createElement(hu,ec({},t,{key:"label-implicit"},r)):null};function N9e(t){var{label:e,labelRef:n}=t,r=HZ();return k9e(e,r,n)||null}var uA={},dA={},TB;function T9e(){return TB||(TB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(dA)),dA}var fA={},EB;function E9e(){return EB||(EB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(fA)),fA}var IB;function I9e(){return IB||(IB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T9e(),n=E9e(),r=K_();function s(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=s})(uA)),uA}var hA,AB;function A9e(){return AB||(AB=1,hA=I9e().last),hA}var j9e=A9e();const $9e=Ni(j9e);var R9e=["valueAccessor"],O9e=["dataKey","clockWise","id","textBreakAll","zIndex"];function vS(){return vS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vS.apply(null,arguments)}function jB(t,e){if(t==null)return{};var n,r,s=_9e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function _9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var D9e=t=>Array.isArray(t.value)?$9e(t.value):t.value,KZ=T.createContext(void 0),z9e=KZ.Provider,XZ=T.createContext(void 0),P9e=XZ.Provider;function L9e(){return T.useContext(KZ)}function M9e(){return T.useContext(XZ)}function X1(t){var{valueAccessor:e=D9e}=t,n=jB(t,R9e),{dataKey:r,clockWise:s,id:a,textBreakAll:i,zIndex:o}=n,l=jB(n,O9e),c=L9e(),f=M9e(),p=c||f;return!p||!p.length?null:T.createElement(Do,{zIndex:o??Ms.label},T.createElement(Fs,{className:"recharts-label-list"},p.map((m,y)=>{var b,v=Bs(r)?e(m,y):Vn(m.payload,r),x=Bs(a)?{}:{id:"".concat(a,"-").concat(y)};return T.createElement(hu,vS({key:"label-".concat(y)},ka(m),l,x,{fill:(b=n.fill)!==null&&b!==void 0?b:m.fill,parentViewBox:m.parentViewBox,value:v,textBreakAll:i,viewBox:m.viewBox,index:y,zIndex:0}))})))}X1.displayName="LabelList";function YZ(t){var{label:e}=t;return e?e===!0?T.createElement(X1,{key:"labelList-implicit"}):T.isValidElement(e)||y5(e)?T.createElement(X1,{key:"labelList-implicit",content:e}):typeof e=="object"?T.createElement(X1,vS({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function b$(){return b$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b$.apply(null,arguments)}var QZ=t=>{var{cx:e,cy:n,r,className:s}=t,a=gn("recharts-dot",s);return at(e)&&at(n)&&at(r)?T.createElement("circle",b$({},Ci(t),H_(t),{className:a,cx:e,cy:n,r})):null},ZZ=t=>t.graphicalItems.polarItems,F9e=Ce([or,Sx],UD),Fk=Ce([ZZ,vr,F9e],WD),B9e=Ce([Fk],VD),Bk=Ce([B9e,Ik],qD),U9e=Ce([Bk,vr,Fk],HD);Ce([Bk,vr,Fk],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(s=>{var a,i=Vn(r,(a=e.dataKey)!==null&&a!==void 0?a:s.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:Vn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var $B=()=>{},W9e=Ce([Bk,vr,Fk,Dk,or],QD),V9e=Ce([vr,XD,YD,$B,W9e,$B,Ln,or],ZD),JZ=Ce([vr,Ln,Bk,U9e,wx,or,V9e],JD),q9e=Ce([JZ,Hm,td],n5),G9e=Ce([vr,JZ,q9e,or],s5);Ce([td,G9e],OQ);var H9e={radiusAxis:{},angleAxis:{}},eJ=Ya({name:"polarAxis",initialState:H9e,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:XXe,removeRadiusAxis:YXe,addAngleAxis:QXe,removeAngleAxis:ZXe}=eJ.actions,K9e=eJ.reducer;function tJ(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}function RB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function OB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RB(Object(n),!0).forEach(function(r){X9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X9e(t,e,n){return(e=Y9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y9e(t){var e=Q9e(t,"string");return typeof e=="symbol"?e:e+""}function Q9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Z9e=(t,e)=>e,b5=Ce([ZZ,Z9e],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),J9e=[],x5=(t,e,n)=>n?.length===0?J9e:n,nJ=Ce([Ik,b5,x5],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var s;if(e?.data!=null&&e.data.length>0?s=e.data:s=r,(!s||!s.length)&&n!=null&&(s=n.map(a=>OB(OB({},e.presentationProps),a.props))),s!=null)return s}}),e7e=Ce([nJ,b5,x5],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,s)=>{var a,i=Vn(r,e.nameKey,e.name),o;return n!=null&&(a=n[s])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=n[s].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:dk(i,e.dataKey),color:o,payload:r,type:e.legendType}})}),t7e=Ce([nJ,b5,x5,Ss],(t,e,n,r)=>{if(!(e==null||t==null))return lqe({offset:r,pieSettings:e,displayedData:t,cells:n})}),pA={exports:{}},En={};var _B;function n7e(){if(_B)return En;_B=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),y=Symbol.for("react.client.reference");function b(v){if(typeof v=="object"&&v!==null){var x=v.$$typeof;switch(x){case t:switch(v=v.type,v){case n:case s:case r:case l:case c:case m:return v;default:switch(v=v&&v.$$typeof,v){case i:case o:case p:case f:return v;case a:return v;default:return x}}case e:return x}}}return En.ContextConsumer=a,En.ContextProvider=i,En.Element=t,En.ForwardRef=o,En.Fragment=n,En.Lazy=p,En.Memo=f,En.Portal=e,En.Profiler=s,En.StrictMode=r,En.Suspense=l,En.SuspenseList=c,En.isContextConsumer=function(v){return b(v)===a},En.isContextProvider=function(v){return b(v)===i},En.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===t},En.isForwardRef=function(v){return b(v)===o},En.isFragment=function(v){return b(v)===n},En.isLazy=function(v){return b(v)===p},En.isMemo=function(v){return b(v)===f},En.isPortal=function(v){return b(v)===e},En.isProfiler=function(v){return b(v)===s},En.isStrictMode=function(v){return b(v)===r},En.isSuspense=function(v){return b(v)===l},En.isSuspenseList=function(v){return b(v)===c},En.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===s||v===r||v===l||v===c||typeof v=="object"&&v!==null&&(v.$$typeof===p||v.$$typeof===f||v.$$typeof===i||v.$$typeof===a||v.$$typeof===o||v.$$typeof===y||v.getModuleId!==void 0)},En.typeOf=b,En}var DB;function r7e(){return DB||(DB=1,pA.exports=n7e()),pA.exports}var s7e=r7e(),zB=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",PB=null,mA=null,rJ=t=>{if(t===PB&&Array.isArray(mA))return mA;var e=[];return T.Children.forEach(t,n=>{Bs(n)||(s7e.isFragment(n)?e=e.concat(rJ(n.props.children)):e.push(n))}),mA=e,PB=t,e};function sJ(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(s=>zB(s)):r=[zB(e)],rJ(t).forEach(s=>{var a=Nf(s,"type.displayName")||Nf(s,"type.name");a&&r.indexOf(a)!==-1&&n.push(s)}),n}var aJ=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,gA={},LB;function a7e(){return LB||(LB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(gA)),gA}var yA,MB;function i7e(){return MB||(MB=1,yA=a7e().isPlainObject),yA}var o7e=i7e();const l7e=Ni(o7e);var FB,BB,UB,WB,VB;function qB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function GB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qB(Object(n),!0).forEach(function(r){c7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c7e(t,e,n){return(e=u7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u7e(t){var e=d7e(t,"string");return typeof e=="symbol"?e:e+""}function d7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wS(){return wS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wS.apply(null,arguments)}function hy(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var HB=(t,e,n,r,s)=>{var a=n-r,i;return i=hr(FB||(FB=hy(["M ",",",""])),t,e),i+=hr(BB||(BB=hy(["L ",",",""])),t+n,e),i+=hr(UB||(UB=hy(["L ",",",""])),t+n-a/2,e+s),i+=hr(WB||(WB=hy(["L ",",",""])),t+n-a/2-r,e+s),i+=hr(VB||(VB=hy(["L ",","," Z"])),t,e),i},f7e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},h7e=t=>{var e=Vs(t,f7e),{x:n,y:r,upperWidth:s,lowerWidth:a,height:i,className:o}=e,{animationEasing:l,animationDuration:c,animationBegin:f,isUpdateAnimationActive:p}=e,m=T.useRef(null),[y,b]=T.useState(-1),v=T.useRef(s),x=T.useRef(a),S=T.useRef(i),C=T.useRef(n),E=T.useRef(r),k=wk(t,"trapezoid-");if(T.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var V=m.current.getTotalLength();V&&b(V)}catch{}},[]),n!==+n||r!==+r||s!==+s||a!==+a||i!==+i||s===0&&a===0||i===0)return null;var I=gn("recharts-trapezoid",o);if(!p)return T.createElement("g",null,T.createElement("path",wS({},ka(e),{className:I,d:HB(n,r,s,a,i)})));var $=v.current,_=x.current,z=S.current,L=C.current,R=E.current,D="0px ".concat(y===-1?1:y,"px"),U="".concat(y,"px 0px"),X=kY(["strokeDasharray"],c,l);return T.createElement(vk,{animationId:k,key:k,canBegin:y>0,duration:c,easing:l,isActive:p,begin:f},V=>{var Y=Ps($,s,V),B=Ps(_,a,V),Z=Ps(z,i,V),J=Ps(L,n,V),ae=Ps(R,r,V);m.current&&(v.current=Y,x.current=B,S.current=Z,C.current=J,E.current=ae);var ee=V>0?{transition:X,strokeDasharray:U}:{strokeDasharray:D};return T.createElement("path",wS({},ka(e),{className:I,d:HB(J,ae,Y,B,Z),ref:m,style:GB(GB({},ee),e.style)}))})},p7e=["option","shapeType","activeClassName"];function m7e(t,e){if(t==null)return{};var n,r,s=g7e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function g7e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function KB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function SS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KB(Object(n),!0).forEach(function(r){y7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y7e(t,e,n){return(e=b7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b7e(t){var e=x7e(t,"string");return typeof e=="symbol"?e:e+""}function x7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v7e(t,e){return SS(SS({},e),t)}function w7e(t,e){return t==="symbols"}function XB(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return T.createElement(IY,n);case"trapezoid":return T.createElement(h7e,n);case"sector":return T.createElement(RY,n);case"symbols":if(w7e(e))return T.createElement(cX,n);break;case"curve":return T.createElement(Jh,n);default:return null}}function S7e(t){return T.isValidElement(t)?t.props:t}function C7e(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,s=m7e(t,p7e),a;if(T.isValidElement(e))a=T.cloneElement(e,SS(SS({},s),S7e(e)));else if(typeof e=="function")a=e(s,s.index);else if(l7e(e)&&typeof e!="boolean"){var i=v7e(e,s);a=T.createElement(XB,{shapeType:n,elementProps:i})}else{var o=s;a=T.createElement(XB,{shapeType:n,elementProps:o})}return s.isActive?T.createElement(Fs,{className:r},a):a}var k7e=(t,e,n)=>{var r=rr();return(s,a)=>i=>{t?.(s,a,i),r(dZ({activeIndex:String(a),activeDataKey:e,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:n}))}},N7e=t=>{var e=rr();return(n,r)=>s=>{t?.(n,r,s),e(kUe())}},T7e=(t,e,n)=>{var r=rr();return(s,a)=>i=>{t?.(s,a,i),r(NUe({activeIndex:String(a),activeDataKey:e,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:n}))}};function iJ(t){var{tooltipEntrySettings:e}=t,n=rr(),r=Qa(),s=T.useRef(null);return T.useLayoutEffect(()=>{r||(s.current===null?n(vUe(e)):s.current!==e&&n(wUe({prev:s.current,next:e})),s.current=e)},[e,n,r]),T.useLayoutEffect(()=>()=>{s.current&&(n(SUe(s.current)),s.current=null)},[n]),null}function E7e(t){var{legendPayload:e}=t,n=rr(),r=Qa(),s=T.useRef(null);return T.useLayoutEffect(()=>{r||(s.current===null?n(vY(e)):s.current!==e&&n(wY({prev:s.current,next:e})),s.current=e)},[n,r,e]),T.useLayoutEffect(()=>()=>{s.current&&(n(SY(s.current)),s.current=null)},[n]),null}function I7e(t){var{legendPayload:e}=t,n=rr(),r=mt(Ln),s=T.useRef(null);return T.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(s.current===null?n(vY(e)):s.current!==e&&n(wY({prev:s.current,next:e})),s.current=e)},[n,r,e]),T.useLayoutEffect(()=>()=>{s.current&&(n(SY(s.current)),s.current=null)},[n]),null}var bA,A7e=()=>{var[t]=T.useState(()=>e0("uid-"));return t},j7e=(bA=Tte.useId)!==null&&bA!==void 0?bA:A7e;function $7e(t,e){var n=j7e();return e||(t?"".concat(t,"-").concat(n):n)}var R7e=T.createContext(void 0),oJ=t=>{var{id:e,type:n,children:r}=t,s=$7e("recharts-".concat(n),e);return T.createElement(R7e.Provider,{value:s},r(s))},O7e={cartesianItems:[],polarItems:[]},lJ=Ya({name:"graphicalItems",initialState:O7e,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Xn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,s=So(t).cartesianItems.indexOf(n);s>-1&&(t.cartesianItems[s]=r)},prepare:Xn()},removeCartesianGraphicalItem:{reducer(t,e){var n=So(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Xn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Xn()},removePolarGraphicalItem:{reducer(t,e){var n=So(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Xn()}}}),{addCartesianGraphicalItem:_7e,replaceCartesianGraphicalItem:D7e,removeCartesianGraphicalItem:z7e,addPolarGraphicalItem:P7e,removePolarGraphicalItem:L7e}=lJ.actions,M7e=lJ.reducer,F7e=t=>{var e=rr(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?e(_7e(t)):n.current!==t&&e(D7e({prev:n.current,next:t})),n.current=t},[e,t]),T.useLayoutEffect(()=>()=>{n.current&&(e(z7e(n.current)),n.current=null)},[e]),null},B7e=T.memo(F7e);function U7e(t){var e=rr();return T.useLayoutEffect(()=>(e(P7e(t)),()=>{e(L7e(t))}),[e,t]),null}var W7e=["key"],V7e=["onMouseEnter","onClick","onMouseLeave"],q7e=["id"],G7e=["id"];function YB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(n),!0).forEach(function(r){H7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H7e(t,e,n){return(e=K7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K7e(t){var e=X7e(t,"string");return typeof e=="symbol"?e:e+""}function X7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bu(){return Bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bu.apply(null,arguments)}function Uk(t,e){if(t==null)return{};var n,r,s=Y7e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Y7e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Q7e(t){var e=T.useMemo(()=>sJ(t.children,Ix),[t.children]),n=mt(r=>e7e(r,t.id,e));return n==null?null:T.createElement(I7e,{legendPayload:n})}var Z7e=T.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:s,strokeWidth:a,fill:i,name:o,hide:l,tooltipType:c,id:f}=t,p={dataDefinedOnItem:r.map(m=>m.tooltipPayload),getPosition:m=>{var y;return(y=r[Number(m)])===null||y===void 0?void 0:y.tooltipPosition},settings:{stroke:s,strokeWidth:a,fill:i,dataKey:e,nameKey:n,name:dk(o,e),hide:l,type:c,color:i,unit:"",graphicalItemId:f}};return T.createElement(iJ,{tooltipEntrySettings:p})}),J7e=(t,e)=>t>e?"start":t<e?"end":"middle",eqe=(t,e,n)=>bi(typeof e=="function"?e(t):e,n,n*.8),tqe=(t,e,n)=>{var{top:r,left:s,width:a,height:i}=e,o=AY(a,i),l=s+bi(t.cx,a,a/2),c=r+bi(t.cy,i,i/2),f=bi(t.innerRadius,o,0),p=eqe(n,t.outerRadius,o),m=t.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:f,outerRadius:p,maxRadius:m}},nqe=(t,e)=>{var n=na(e-t),r=Math.min(Math.abs(e-t),360);return n*r},rqe=(t,e)=>{if(T.isValidElement(t))return T.cloneElement(t,e);if(typeof t=="function")return t(e);var n=gn("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,s=Uk(e,W7e);return T.createElement(Jh,Bu({},s,{type:"linear",className:n}))},sqe=(t,e,n)=>{if(T.isValidElement(t))return T.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),T.isValidElement(r)))return r;var s=gn("recharts-pie-label-text",tJ(t));return T.createElement(Mk,Bu({},e,{alignmentBaseline:"middle",className:s}),r)};function aqe(t){var{sectors:e,props:n,showLabels:r}=t,{label:s,labelLine:a,dataKey:i}=n;if(!r||!s||!e)return null;var o=Ci(n),l=gp(s),c=gp(a),f=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,p=e.map((m,y)=>{var b=(m.startAngle+m.endAngle)/2,v=Lr(m.cx,m.cy,m.outerRadius+f,b),x=pr(pr(pr(pr({},o),m),{},{stroke:"none"},l),{},{index:y,textAnchor:J7e(v.x,m.cx)},v),S=pr(pr(pr(pr({},o),m),{},{fill:"none",stroke:m.fill},c),{},{index:y,points:[Lr(m.cx,m.cy,m.outerRadius,b),v],key:"line"});return T.createElement(Do,{zIndex:Ms.label,key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(y)},T.createElement(Fs,null,a&&rqe(a,S),sqe(s,x,Vn(m,i))))});return T.createElement(Fs,{className:"recharts-pie-labels"},p)}function iqe(t){var{sectors:e,props:n,showLabels:r}=t,{label:s}=n;return typeof s=="object"&&s!=null&&"position"in s?T.createElement(YZ,{label:s}):T.createElement(aqe,{sectors:e,props:n,showLabels:r})}function oqe(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:s,shape:a,id:i}=t,o=mt(Sp),l=mt(TZ),c=mt(uWe),{onMouseEnter:f,onClick:p,onMouseLeave:m}=s,y=Uk(s,V7e),b=k7e(f,s.dataKey,i),v=N7e(m),x=T7e(p,s.dataKey,i);return e==null||e.length===0?null:T.createElement(T.Fragment,null,e.map((S,C)=>{if(S?.startAngle===0&&S?.endAngle===0&&e.length!==1)return null;var E=c==null||c===i,k=String(C)===o&&(l==null||s.dataKey===l)&&E,I=o?r:null,$=n&&k?n:I,_=pr(pr({},S),{},{stroke:S.stroke,tabIndex:-1,[rY]:C,[sY]:i});return T.createElement(Fs,Bu({key:"sector-".concat(S?.startAngle,"-").concat(S?.endAngle,"-").concat(S.midAngle,"-").concat(C),tabIndex:-1,className:"recharts-pie-sector"},dX(y,S,C),{onMouseEnter:b(S,C),onMouseLeave:v(S,C),onClick:x(S,C)}),T.createElement(C7e,Bu({option:a??$,index:C,shapeType:"sector",isActive:k},_)))}))}function lqe(t){var e,{pieSettings:n,displayedData:r,cells:s,offset:a}=t,{cornerRadius:i,startAngle:o,endAngle:l,dataKey:c,nameKey:f,tooltipType:p}=n,m=Math.abs(n.minAngle),y=nqe(o,l),b=Math.abs(y),v=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,x=r.filter($=>Vn($,c,0)!==0).length,S=(b>=360?x:x-1)*v,C=b-x*m-S,E=r.reduce(($,_)=>{var z=Vn(_,c,0);return $+(at(z)?z:0)},0),k;if(E>0){var I;k=r.map(($,_)=>{var z=Vn($,c,0),L=Vn($,f,_),R=tqe(n,a,$),D=(at(z)?z:0)/E,U,X=pr(pr({},$),s&&s[_]&&s[_].props);_?U=I.endAngle+na(y)*v*(z!==0?1:0):U=o;var V=U+na(y)*((z!==0?m:0)+D*C),Y=(U+V)/2,B=(R.innerRadius+R.outerRadius)/2,Z=[{name:L,value:z,payload:X,dataKey:c,type:p,graphicalItemId:n.id}],J=Lr(R.cx,R.cy,B,Y);return I=pr(pr(pr(pr({},n.presentationProps),{},{percent:D,cornerRadius:typeof i=="string"?parseFloat(i):i,name:L,tooltipPayload:Z,midAngle:Y,middleRadius:B,tooltipPosition:J},X),R),{},{value:z,dataKey:c,startAngle:U,endAngle:V,payload:X,paddingAngle:na(y)*v}),I})}return k}function cqe(t){var{showLabels:e,sectors:n,children:r}=t,s=T.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return T.createElement(P9e,{value:e?s:void 0},r)}function uqe(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:s,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:f,onAnimationStart:p,onAnimationEnd:m}=e,y=wk(e,"recharts-pie-"),b=n.current,[v,x]=T.useState(!1),S=T.useCallback(()=>{typeof m=="function"&&m(),x(!1)},[m]),C=T.useCallback(()=>{typeof p=="function"&&p(),x(!0)},[p]);return T.createElement(cqe,{showLabels:!v,sectors:s},T.createElement(vk,{animationId:y,begin:i,duration:o,isActive:a,easing:l,onAnimationStart:C,onAnimationEnd:S,key:y},E=>{var k,I=[],$=s&&s[0],_=(k=$?.startAngle)!==null&&k!==void 0?k:0;return s?.forEach((z,L)=>{var R=b&&b[L],D=L>0?Nf(z,"paddingAngle",0):0;if(R){var U=Ps(R.endAngle-R.startAngle,z.endAngle-z.startAngle,E),X=pr(pr({},z),{},{startAngle:_+D,endAngle:_+U+D});I.push(X),_=X.endAngle}else{var{endAngle:V,startAngle:Y}=z,B=Ps(0,V-Y,E),Z=pr(pr({},z),{},{startAngle:_+D,endAngle:_+B+D});I.push(Z),_=Z.endAngle}}),n.current=I,T.createElement(Fs,null,T.createElement(oqe,{sectors:I,activeShape:c,inactiveShape:f,allOtherPieProps:e,shape:e.shape,id:r}))}),T.createElement(iqe,{showLabels:!v,sectors:s,props:e}),e.children)}var dqe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ms.area};function fqe(t){var{id:e}=t,n=Uk(t,q7e),{hide:r,className:s,rootTabIndex:a}=t,i=T.useMemo(()=>sJ(t.children,Ix),[t.children]),o=mt(f=>t7e(f,e,i)),l=T.useRef(null),c=gn("recharts-pie",s);return r||o==null?(l.current=null,T.createElement(Fs,{tabIndex:a,className:c})):T.createElement(Do,{zIndex:t.zIndex},T.createElement(Z7e,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),T.createElement(Fs,{tabIndex:a,className:c},T.createElement(uqe,{props:pr(pr({},n),{},{sectors:o}),previousSectorsRef:l,id:e})))}function v5(t){var e=Vs(t,dqe),{id:n}=e,r=Uk(e,G7e),s=Ci(r);return T.createElement(oJ,{id:n,type:"pie"},a=>T.createElement(T.Fragment,null,T.createElement(U7e,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:s,maxRadius:e.maxRadius}),T.createElement(Q7e,Bu({},r,{id:a})),T.createElement(fqe,Bu({},r,{id:a}))))}v5.displayName="Pie";var hqe=["points"];function QB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QB(Object(n),!0).forEach(function(r){pqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pqe(t,e,n){return(e=mqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mqe(t){var e=gqe(t,"string");return typeof e=="symbol"?e:e+""}function gqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CS(){return CS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CS.apply(null,arguments)}function yqe(t,e){if(t==null)return{};var n,r,s=bqe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function bqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xqe(t){var{option:e,dotProps:n,className:r}=t;if(T.isValidElement(e))return T.cloneElement(e,n);if(typeof e=="function")return e(n);var s=gn(r,typeof e!="boolean"?e.className:""),a=n??{},{points:i}=a,o=yqe(a,hqe);return T.createElement(QZ,CS({},o,{className:s}))}function vqe(t,e){return t==null?!1:e?!0:t.length===1}function wqe(t){var{points:e,dot:n,className:r,dotClassName:s,dataKey:a,baseProps:i,needClip:o,clipPathId:l,zIndex:c=Ms.scatter}=t;if(!vqe(e,n))return null;var f=aJ(n),p=Z3e(n),m=e.map((b,v)=>{var x,S,C=xA(xA(xA({r:3},i),p),{},{index:v,cx:(x=b.x)!==null&&x!==void 0?x:void 0,cy:(S=b.y)!==null&&S!==void 0?S:void 0,dataKey:a,value:b.value,payload:b.payload,points:e});return T.createElement(xqe,{key:"dot-".concat(v),option:n,dotProps:C,className:s})}),y={};return o&&l!=null&&(y.clipPath="url(#clipPath-".concat(f?"":"dots-").concat(l,")")),T.createElement(Do,{zIndex:c},T.createElement(Fs,CS({className:r},y),m))}function ZB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function JB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZB(Object(n),!0).forEach(function(r){Sqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sqe(t,e,n){return(e=Cqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cqe(t){var e=kqe(t,"string");return typeof e=="symbol"?e:e+""}function kqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cJ=0,Nqe={xAxis:{},yAxis:{},zAxis:{}},uJ=Ya({name:"cartesianAxis",initialState:Nqe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Xn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Xn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Xn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Xn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Xn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Xn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Xn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Xn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Xn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,s=t.yAxis[n];if(s){var a,i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&r===i[1]&&r!==s.width&&Math.abs(r-((a=i[0])!==null&&a!==void 0?a:0))<=1)return;var o=[...i,r].slice(-3);t.yAxis[n]=JB(JB({},s),{},{width:r,widthHistory:o})}}}}),{addXAxis:Tqe,replaceXAxis:Eqe,removeXAxis:Iqe,addYAxis:Aqe,replaceYAxis:jqe,removeYAxis:$qe,addZAxis:JXe,replaceZAxis:eYe,removeZAxis:tYe,updateYAxisWidth:Rqe}=uJ.actions,Oqe=uJ.reducer,_qe=Ce([Ss],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Dqe=Ce([_qe,Ic,Ac],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),w5=()=>mt(Dqe),zqe=()=>mt(mWe);function eU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function vA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eU(Object(n),!0).forEach(function(r){Pqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pqe(t,e,n){return(e=Lqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lqe(t){var e=Mqe(t,"string");return typeof e=="symbol"?e:e+""}function Mqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fqe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:s,dataKey:a,clipPath:i}=t;if(s===!1||e.x==null||e.y==null)return null;var o={index:n,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=vA(vA(vA({},o),gp(s)),H_(s)),c;return T.isValidElement(s)?c=T.cloneElement(s,l):typeof s=="function"?c=s(l):c=T.createElement(QZ,l),T.createElement(Fs,{className:"recharts-active-dot",clipPath:i},c)};function tU(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:s,clipPath:a,zIndex:i=Ms.activeDot}=t,o=mt(Sp),l=zqe();if(e==null||l==null)return null;var c=e.find(f=>l.includes(f.payload));return Bs(c)?null:T.createElement(Do,{zIndex:i},T.createElement(Fqe,{point:c,childIndex:Number(o),mainColor:n,dataKey:s,activeDot:r,clipPath:a}))}var dJ=t=>{var{chartData:e}=t,n=rr(),r=Qa();return T.useEffect(()=>r?()=>{}:(n(lB(e)),()=>{n(lB(void 0))}),[e,n,r]),null},nU={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},fJ=Ya({name:"brush",initialState:nU,reducers:{setBrushSettings(t,e){return e.payload==null?nU:e.payload}}}),{setBrushSettings:nYe}=fJ.actions,Bqe=fJ.reducer;function Uqe(t){return(t%180+180)%180}var Wqe=function(e){var{width:n,height:r}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Uqe(s),i=a*Math.PI/180,o=Math.atan(r/n),l=i>o&&i<Math.PI-o?r/Math.sin(i):n/Math.cos(i);return Math.abs(l)},Vqe={dots:[],areas:[],lines:[]},hJ=Ya({name:"referenceElements",initialState:Vqe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=So(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=So(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=So(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:rYe,removeDot:sYe,addArea:aYe,removeArea:iYe,addLine:oYe,removeLine:lYe}=hJ.actions,qqe=hJ.reducer,Gqe=T.createContext(void 0),Hqe=t=>{var{children:e}=t,[n]=T.useState("".concat(e0("recharts"),"-clip")),r=w5();if(r==null)return null;var{x:s,y:a,width:i,height:o}=r;return T.createElement(Gqe.Provider,{value:n},T.createElement("defs",null,T.createElement("clipPath",{id:n},T.createElement("rect",{x:s,y:a,height:o,width:i}))),e)};function pJ(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var s=t[r];s!==void 0&&n.push(s)}return n}function Kqe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Wqe(r,n)}function Xqe(t,e,n){var r=n==="width",{x:s,y:a,width:i,height:o}=t;return e===1?{start:r?s:a,end:r?s+i:a+o}:{start:r?s+i:a+o,end:r?s:a}}function p0(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-s)<=0}function Yqe(t,e){return pJ(t,e+1)}function Qqe(t,e,n,r,s){for(var a=(r||[]).slice(),{start:i,end:o}=e,l=0,c=1,f=i,p=function(){var b=r?.[l];if(b===void 0)return{v:pJ(r,c)};var v=l,x,S=()=>(x===void 0&&(x=n(b,v)),x),C=b.coordinate,E=l===0||p0(t,C,S,f,o);E||(l=0,f=i,c+=1),E&&(f=C+t*(S()/2+s),l+=c)},m;c<=a.length;)if(m=p(),m)return m.v;return[]}function Zqe(t,e,n,r,s){var a=(r||[]).slice(),i=a.length;if(i===0)return[];for(var{start:o,end:l}=e,c=1;c<=i;c++){for(var f=(i-1)%c,p=o,m=!0,y=function(){var k=r[v];if(k==null)return 0;var I=v,$,_=()=>($===void 0&&($=n(k,I)),$),z=k.coordinate,L=v===f||p0(t,z,_,p,l);if(!L)return m=!1,1;L&&(p=z+t*(_()/2+s))},b,v=f;v<i&&(b=y(),!(b!==0&&b===1));v+=c);if(m){for(var x=[],S=f;S<i;S+=c){var C=r[S];C!=null&&x.push(C)}return x}}return[]}function rU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ks(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rU(Object(n),!0).forEach(function(r){Jqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jqe(t,e,n){return(e=eGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eGe(t){var e=tGe(t,"string");return typeof e=="symbol"?e:e+""}function tGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nGe(t,e,n,r,s){for(var a=(r||[]).slice(),i=a.length,{start:o}=e,{end:l}=e,c=function(m){var y=a[m];if(y==null)return 1;var b=y,v,x=()=>(v===void 0&&(v=n(y,m)),v);if(m===i-1){var S=t*(b.coordinate+t*x()/2-l);a[m]=b=Ks(Ks({},b),{},{tickCoord:S>0?b.coordinate-S*t:b.coordinate})}else a[m]=b=Ks(Ks({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var C=p0(t,b.tickCoord,x,o,l);C&&(l=b.tickCoord-t*(x()/2+s),a[m]=Ks(Ks({},b),{},{isShow:!0}))}},f=i-1;f>=0;f--)c(f);return a}function rGe(t,e,n,r,s,a){var i=(r||[]).slice(),o=i.length,{start:l,end:c}=e;if(a){var f=r[o-1];if(f!=null){var p=n(f,o-1),m=t*(f.coordinate+t*p/2-c);if(i[o-1]=f=Ks(Ks({},f),{},{tickCoord:m>0?f.coordinate-m*t:f.coordinate}),f.tickCoord!=null){var y=p0(t,f.tickCoord,()=>p,l,c);y&&(c=f.tickCoord-t*(p/2+s),i[o-1]=Ks(Ks({},f),{},{isShow:!0}))}}}for(var b=a?o-1:o,v=function(C){var E=i[C];if(E==null)return 1;var k=E,I,$=()=>(I===void 0&&(I=n(E,C)),I);if(C===0){var _=t*(k.coordinate-t*$()/2-l);i[C]=k=Ks(Ks({},k),{},{tickCoord:_<0?k.coordinate-_*t:k.coordinate})}else i[C]=k=Ks(Ks({},k),{},{tickCoord:k.coordinate});if(k.tickCoord!=null){var z=p0(t,k.tickCoord,$,l,c);z&&(l=k.tickCoord+t*($()/2+s),i[C]=Ks(Ks({},k),{},{isShow:!0}))}},x=0;x<b;x++)v(x);return i}function S5(t,e,n){var{tick:r,ticks:s,viewBox:a,minTickGap:i,orientation:o,interval:l,tickFormatter:c,unit:f,angle:p}=t;if(!s||!s.length||!r)return[];if(at(l)||gx.isSsr){var m;return(m=Yqe(s,at(l)?l:0))!==null&&m!==void 0?m:[]}var y=[],b=o==="top"||o==="bottom"?"width":"height",v=f&&b==="width"?Iy(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},x=(I,$)=>{var _=typeof c=="function"?c(I.value,$):I.value;return b==="width"?Kqe(Iy(_,{fontSize:e,letterSpacing:n}),v,p):Iy(_,{fontSize:e,letterSpacing:n})[b]},S=s[0],C=s[1],E=s.length>=2&&S!=null&&C!=null?na(C.coordinate-S.coordinate):1,k=Xqe(a,E,b);return l==="equidistantPreserveStart"?Qqe(E,k,x,s,i):l==="equidistantPreserveEnd"?Zqe(E,k,x,s,i):(l==="preserveStart"||l==="preserveStartEnd"?y=rGe(E,k,x,s,i,l==="preserveStartEnd"):y=nGe(E,k,x,s,i),y.filter(I=>I.isShow))}var sGe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:s=0,tickMargin:a=0}=t,i=0;if(e){Array.from(e).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>i&&(i=p.width)}});var o=n?n.getBoundingClientRect().width:0,l=s+a,c=i+l+o+(n?r:0);return Math.round(c)}return 0},aGe=["axisLine","width","height","className","hide","ticks","axisType"];function iGe(t,e){if(t==null)return{};var n,r,s=oGe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function oGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $f(){return $f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$f.apply(null,arguments)}function sU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(n),!0).forEach(function(r){lGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lGe(t,e,n){return(e=cGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cGe(t){var e=uGe(t,"string");return typeof e=="symbol"?e:e+""}function uGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ic={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ms.axis};function dGe(t){var{x:e,y:n,width:r,height:s,orientation:a,mirror:i,axisLine:o,otherSvgProps:l}=t;if(!o)return null;var c=fr(fr(fr({},l),Ci(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!i||a==="bottom"&&i);c=fr(fr({},c),{},{x1:e,y1:n+f*s,x2:e+r,y2:n+f*s})}else{var p=+(a==="left"&&!i||a==="right"&&i);c=fr(fr({},c),{},{x1:e+p*r,y1:n,x2:e+p*r,y2:n+s})}return T.createElement("line",$f({},c,{className:gn("recharts-cartesian-axis-line",Nf(o,"className"))}))}function fGe(t,e,n,r,s,a,i,o,l){var c,f,p,m,y,b,v=o?-1:1,x=t.tickSize||i,S=at(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":c=f=t.coordinate,m=n+ +!o*s,p=m-v*x,b=p-v*l,y=S;break;case"left":p=m=t.coordinate,f=e+ +!o*r,c=f-v*x,y=c-v*l,b=S;break;case"right":p=m=t.coordinate,f=e+ +o*r,c=f+v*x,y=c+v*l,b=S;break;default:c=f=t.coordinate,m=n+ +o*s,p=m+v*x,b=p+v*l,y=S;break}return{line:{x1:c,y1:p,x2:f,y2:m},tick:{x:y,y:b}}}function hGe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function pGe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function mGe(t){var{option:e,tickProps:n,value:r}=t,s,a=gn(n.className,"recharts-cartesian-axis-tick-value");if(T.isValidElement(e))s=T.cloneElement(e,fr(fr({},n),{},{className:a}));else if(typeof e=="function")s=e(fr(fr({},n),{},{className:a}));else{var i="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(i=gn(i,tJ(e))),s=T.createElement(Mk,$f({},n,{className:i}),r)}return s}var gGe=T.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:s,stroke:a,tickFormatter:i,unit:o,padding:l,tickTextProps:c,orientation:f,mirror:p,x:m,y,width:b,height:v,tickSize:x,tickMargin:S,fontSize:C,letterSpacing:E,getTicksConfig:k,events:I,axisType:$}=t,_=S5(fr(fr({},k),{},{ticks:n}),C,E),z=hGe(f,p),L=pGe(f,p),R=Ci(k),D=gp(r),U={};typeof s=="object"&&(U=s);var X=fr(fr({},R),{},{fill:"none"},U),V=_.map(Z=>fr({entry:Z},fGe(Z,m,y,b,v,f,x,p,S))),Y=V.map(Z=>{var{entry:J,line:ae}=Z;return T.createElement(Fs,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},s&&T.createElement("line",$f({},X,ae,{className:gn("recharts-cartesian-axis-tick-line",Nf(s,"className"))})))}),B=V.map((Z,J)=>{var ae,ee,{entry:W,tick:Q}=Z,se=fr(fr(fr(fr({verticalAnchor:L},R),{},{textAnchor:z,stroke:"none",fill:a},Q),{},{index:J,payload:W,visibleTicksCount:_.length,tickFormatter:i,padding:l},c),{},{angle:(ae=(ee=c?.angle)!==null&&ee!==void 0?ee:R.angle)!==null&&ae!==void 0?ae:0}),fe=fr(fr({},se),D);return T.createElement(Fs,$f({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(W.value,"-").concat(W.coordinate,"-").concat(W.tickCoord)},dX(I,W,J)),r&&T.createElement(mGe,{option:r,tickProps:fe,value:"".concat(typeof i=="function"?i(W.value,J):W.value).concat(o||"")}))});return T.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat($,"-ticks")},B.length>0&&T.createElement(Do,{zIndex:Ms.label},T.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat($,"-tick-labels"),ref:e},B)),Y.length>0&&T.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat($,"-tick-lines")},Y))}),yGe=T.forwardRef((t,e)=>{var{axisLine:n,width:r,height:s,className:a,hide:i,ticks:o,axisType:l}=t,c=iGe(t,aGe),[f,p]=T.useState(""),[m,y]=T.useState(""),b=T.useRef(null);T.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var x;return sGe({ticks:b.current,label:(x=t.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var v=T.useCallback(x=>{if(x){var S=x.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=S;var C=S[0];if(C){var E=window.getComputedStyle(C),k=E.fontSize,I=E.letterSpacing;(k!==f||I!==m)&&(p(k),y(I))}}},[f,m]);return i||r!=null&&r<=0||s!=null&&s<=0?null:T.createElement(Do,{zIndex:t.zIndex},T.createElement(Fs,{className:gn("recharts-cartesian-axis",a)},T.createElement(dGe,{x:t.x,y:t.y,width:r,height:s,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Ci(t)}),T.createElement(gGe,{ref:v,axisType:l,events:c,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:m,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),T.createElement(m9e,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},T.createElement(N9e,{label:t.label,labelRef:t.labelRef}),t.children)))}),C5=T.forwardRef((t,e)=>{var n=Vs(t,ic);return T.createElement(yGe,$f({},n,{ref:e}))});C5.displayName="CartesianAxis";var bGe=["x1","y1","x2","y2","key"],xGe=["offset"],vGe=["xAxisId","yAxisId"],wGe=["xAxisId","yAxisId"];function aU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aU(Object(n),!0).forEach(function(r){SGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SGe(t,e,n){return(e=CGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CGe(t){var e=kGe(t,"string");return typeof e=="symbol"?e:e+""}function kGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kd(){return Kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kd.apply(null,arguments)}function kS(t,e){if(t==null)return{};var n,r,s=NGe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function NGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var TGe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:s,width:a,height:i,ry:o}=t;return T.createElement("rect",{x:r,y:s,ry:o,width:a,height:i,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function mJ(t){var{option:e,lineItemProps:n}=t,r;if(T.isValidElement(e))r=T.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var s,{x1:a,y1:i,x2:o,y2:l,key:c}=n,f=kS(n,bGe),p=(s=Ci(f))!==null&&s!==void 0?s:{},{offset:m}=p,y=kS(p,xGe);r=T.createElement("line",Kd({},y,{x1:a,y1:i,x2:o,y2:l,fill:"none",key:c}))}return r}function EGe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:s}=t;if(!r||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=t,o=kS(t,vGe),l=s.map((c,f)=>{var p=Zs(Zs({},o),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(f),index:f});return T.createElement(mJ,{key:"line-".concat(f),option:r,lineItemProps:p})});return T.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function IGe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:s}=t;if(!r||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=t,o=kS(t,wGe),l=s.map((c,f)=>{var p=Zs(Zs({},o),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(f),index:f});return T.createElement(mJ,{option:r,lineItemProps:p,key:"line-".concat(f)})});return T.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function AGe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:s,width:a,height:i,horizontalPoints:o,horizontal:l=!0}=t;if(!l||!e||!e.length||o==null)return null;var c=o.map(p=>Math.round(p+s-s)).sort((p,m)=>p-m);s!==c[0]&&c.unshift(0);var f=c.map((p,m)=>{var y=c[m+1],b=y==null,v=b?s+i-p:y-p;if(v<=0)return null;var x=m%e.length;return T.createElement("rect",{key:"react-".concat(m),y:p,x:r,height:v,width:a,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function jGe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:s,y:a,width:i,height:o,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(p=>Math.round(p+s-s)).sort((p,m)=>p-m);s!==c[0]&&c.unshift(0);var f=c.map((p,m)=>{var y=c[m+1],b=y==null,v=b?s+i-p:y-p;if(v<=0)return null;var x=m%n.length;return T.createElement("rect",{key:"react-".concat(m),x:p,y:a,width:v,height:o,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var $Ge=(t,e)=>{var{xAxis:n,width:r,height:s,offset:a}=t;return eY(S5(Zs(Zs(Zs({},ic),n),{},{ticks:tY(n),viewBox:{x:0,y:0,width:r,height:s}})),a.left,a.left+a.width,e)},RGe=(t,e)=>{var{yAxis:n,width:r,height:s,offset:a}=t;return eY(S5(Zs(Zs(Zs({},ic),n),{},{ticks:tY(n),viewBox:{x:0,y:0,width:r,height:s}})),a.top,a.top+a.height,e)},OGe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ms.grid};function gJ(t){var e=uY(),n=dY(),r=cY(),s=Zs(Zs({},Vs(t,OGe)),{},{x:at(t.x)?t.x:r.left,y:at(t.y)?t.y:r.top,width:at(t.width)?t.width:r.width,height:at(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:i,x:o,y:l,width:c,height:f,syncWithTicks:p,horizontalValues:m,verticalValues:y}=s,b=Qa(),v=mt(L=>Y8(L,"xAxis",a,b)),x=mt(L=>Y8(L,"yAxis",i,b));if(!wl(c)||!wl(f)||!at(o)||!at(l))return null;var S=s.verticalCoordinatesGenerator||$Ge,C=s.horizontalCoordinatesGenerator||RGe,{horizontalPoints:E,verticalPoints:k}=s;if((!E||!E.length)&&typeof C=="function"){var I=m&&m.length,$=C({yAxis:x?Zs(Zs({},x),{},{ticks:I?m:x.ticks}):void 0,width:e??c,height:n??f,offset:r},I?!0:p);Kw(Array.isArray($),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof $,"]")),Array.isArray($)&&(E=$)}if((!k||!k.length)&&typeof S=="function"){var _=y&&y.length,z=S({xAxis:v?Zs(Zs({},v),{},{ticks:_?y:v.ticks}):void 0,width:e??c,height:n??f,offset:r},_?!0:p);Kw(Array.isArray(z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(k=z)}return T.createElement(Do,{zIndex:s.zIndex},T.createElement("g",{className:"recharts-cartesian-grid"},T.createElement(TGe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),T.createElement(AGe,Kd({},s,{horizontalPoints:E})),T.createElement(jGe,Kd({},s,{verticalPoints:k})),T.createElement(EGe,Kd({},s,{offset:r,horizontalPoints:E,xAxis:v,yAxis:x})),T.createElement(IGe,Kd({},s,{offset:r,verticalPoints:k,xAxis:v,yAxis:x}))))}gJ.displayName="CartesianGrid";var _Ge={},yJ=Ya({name:"errorBars",initialState:_Ge,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:s}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?s:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(s=>s.dataKey!==r.dataKey||s.direction!==r.direction))}}}),{addErrorBar:cYe,replaceErrorBar:uYe,removeErrorBar:dYe}=yJ.actions,DGe=yJ.reducer;function bJ(t,e){var n,r,s=mt(c=>Rc(c,t)),a=mt(c=>Oc(c,e)),i=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:us.allowDataOverflow,o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:ds.allowDataOverflow,l=i||o;return{needClip:l,needClipX:i,needClipY:o}}function zGe(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,s=w5(),{needClipX:a,needClipY:i,needClip:o}=bJ(e,n);if(!o||!s)return null;var{x:l,y:c,width:f,height:p}=s;return T.createElement("clipPath",{id:"clipPath-".concat(r)},T.createElement("rect",{x:a?l:l-f/2,y:i?c:c-p/2,width:a?f:f*2,height:i?p:p*2}))}function PGe(t){var e=gp(t),n=3,r=2;if(e!=null){var{r:s,strokeWidth:a}=e,i=Number(s),o=Number(a);return(Number.isNaN(i)||i<0)&&(i=n),(Number.isNaN(o)||o<0)&&(o=r),{r:i,strokeWidth:o}}return{r:n,strokeWidth:r}}var wA={exports:{}},SA={};var iU;function LGe(){if(iU)return SA;iU=1;var t=Cp();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,s=t.useRef,a=t.useEffect,i=t.useMemo,o=t.useDebugValue;return SA.useSyncExternalStoreWithSelector=function(l,c,f,p,m){var y=s(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=i(function(){function x(I){if(!S){if(S=!0,C=I,I=p(I),m!==void 0&&b.hasValue){var $=b.value;if(m($,I))return E=$}return E=I}if($=E,n(C,I))return $;var _=p(I);return m!==void 0&&m($,_)?(C=I,$):(C=I,E=_)}var S=!1,C,E,k=f===void 0?null:f;return[function(){return x(c())},k===null?void 0:function(){return x(k())}]},[c,f,p,m]);var v=r(l,y[0],y[1]);return a(function(){b.hasValue=!0,b.value=v},[v]),o(v),v},SA}var oU;function MGe(){return oU||(oU=1,wA.exports=LGe()),wA.exports}MGe();function FGe(t){t()}function BGe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){FGe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!r||t===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var lU={notify(){},get:()=>[]};function UGe(t,e){let n,r=lU,s=0,a=!1;function i(v){f();const x=r.subscribe(v);let S=!1;return()=>{S||(S=!0,x(),p())}}function o(){r.notify()}function l(){b.onStateChange&&b.onStateChange()}function c(){return a}function f(){s++,n||(n=t.subscribe(l),r=BGe())}function p(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=lU)}function m(){a||(a=!0,f())}function y(){a&&(a=!1,p())}const b={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:m,tryUnsubscribe:y,getListeners:()=>r};return b}var WGe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VGe=WGe(),qGe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",GGe=qGe(),HGe=()=>VGe||GGe?T.useLayoutEffect:T.useEffect,KGe=HGe();function cU(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function XGe(t,e){if(cU(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(e,n[s])||!cU(t[n[s]],e[n[s]]))return!1;return!0}var YGe=Symbol.for("react-redux-context"),QGe=typeof globalThis<"u"?globalThis:{};function ZGe(){if(!T.createContext)return{};const t=QGe[YGe]??=new Map;let e=t.get(T.createContext);return e||(e=T.createContext(null),t.set(T.createContext,e)),e}var JGe=ZGe();function eHe(t){const{children:e,context:n,serverState:r,store:s}=t,a=T.useMemo(()=>{const l=UGe(s);return{store:s,subscription:l,getServerState:r?()=>r:void 0}},[s,r]),i=T.useMemo(()=>s.getState(),[s]);KGe(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,i]);const o=n||JGe;return T.createElement(o.Provider,{value:a},e)}var tHe=eHe,nHe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function rHe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function k5(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(nHe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!XGe(t[r],e[r]))return!1}else if(!rHe(t[r],e[r]))return!1;return!0}function N5(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(s=>s.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:cJ}function T5(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(s=>s.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:cJ}var xJ=(t,e,n)=>aZ(t,"xAxis",N5(t,e),n),vJ=(t,e,n)=>sZ(t,"xAxis",N5(t,e),n),wJ=(t,e,n)=>aZ(t,"yAxis",T5(t,e),n),SJ=(t,e,n)=>sZ(t,"yAxis",T5(t,e),n),sHe=Ce([Ln,xJ,wJ,vJ,SJ],(t,e,n,r,s)=>El(t,"xAxis")?Hw(e,r,!1):Hw(n,s,!1)),aHe=(t,e)=>e,CJ=Ce([PQ,aHe],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),kJ=t=>{var e=Ln(t),n=El(e,"xAxis");return n?"yAxis":"xAxis"},iHe=(t,e)=>{var n=kJ(t);return n==="yAxis"?T5(t,e):N5(t,e)},oHe=(t,e,n)=>UQ(t,kJ(t),iHe(t,e),n),lHe=Ce([CJ,oHe],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,s=MD(t);if(!(r==null||s==null)){var a=(n=e[r])===null||n===void 0?void 0:n.stackedData,i=a?.find(o=>o.key===s);if(i!=null)return i.map(o=>[o[0],o[1]])}}}),cHe=Ce([Ln,xJ,wJ,vJ,SJ,lHe,J8e,sHe,CJ,lBe],(t,e,n,r,s,a,i,o,l,c)=>{var{chartData:f,dataStartIndex:p,dataEndIndex:m}=i;if(!(l==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||s==null||r.length===0||s.length===0||o==null)){var{data:y}=l,b;if(y&&y.length>0?b=y:b=f?.slice(p,m+1),b!=null)return IHe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:s,dataStartIndex:p,areaSettings:l,stackedData:a,displayedData:b,chartBaseValue:c,bandSize:o})}}),uHe=["id"],dHe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function sf(){return sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sf.apply(null,arguments)}function NJ(t,e){if(t==null)return{};var n,r,s=fHe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function fHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function uU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uU(Object(n),!0).forEach(function(r){hHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hHe(t,e,n){return(e=pHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pHe(t){var e=mHe(t,"string");return typeof e=="symbol"?e:e+""}function mHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NS(t,e){return t&&t!=="none"?t:e}var gHe=t=>{var{dataKey:e,name:n,stroke:r,fill:s,legendType:a,hide:i}=t;return[{inactive:i,dataKey:e,type:a,color:NS(r,s),value:dk(n,e),payload:t}]},yHe=T.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:s,fill:a,name:i,hide:o,unit:l,tooltipType:c,id:f}=t,p={dataDefinedOnItem:n,getPosition:Bm,settings:{stroke:r,strokeWidth:s,fill:a,dataKey:e,nameKey:void 0,name:dk(i,e),hide:o,type:c,color:NS(r,a),unit:l,graphicalItemId:f}};return T.createElement(iJ,{tooltipEntrySettings:p})});function bHe(t){var{clipPathId:e,points:n,props:r}=t,{needClip:s,dot:a,dataKey:i}=r,o=Ci(r);return T.createElement(wqe,{points:n,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:i,baseProps:o,needClip:s,clipPathId:e})}function xHe(t){var{showLabels:e,children:n,points:r}=t,s=r.map(a=>{var i,o,l={x:(i=a.x)!==null&&i!==void 0?i:0,y:(o=a.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return qh(qh({},l),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return T.createElement(z9e,{value:e?s:void 0},n)}function dU(t){var{points:e,baseLine:n,needClip:r,clipPathId:s,props:a}=t,{layout:i,type:o,stroke:l,connectNulls:c,isRange:f}=a,{id:p}=a,m=NJ(a,uHe),y=Ci(m),b=ka(m);return T.createElement(T.Fragment,null,e?.length>1&&T.createElement(Fs,{clipPath:r?"url(#clipPath-".concat(s,")"):void 0},T.createElement(Jh,sf({},b,{id:p,points:e,connectNulls:c,type:o,baseLine:n,layout:i,stroke:"none",className:"recharts-area-area"})),l!=="none"&&T.createElement(Jh,sf({},y,{className:"recharts-area-curve",layout:i,type:o,connectNulls:c,fill:"none",points:e})),l!=="none"&&f&&T.createElement(Jh,sf({},y,{className:"recharts-area-curve",layout:i,type:o,connectNulls:c,fill:"none",points:n}))),T.createElement(bHe,{points:e,props:m,clipPathId:s}))}function vHe(t){var e,n,{alpha:r,baseLine:s,points:a,strokeWidth:i}=t,o=(e=a[0])===null||e===void 0?void 0:e.y,l=(n=a[a.length-1])===null||n===void 0?void 0:n.y;if(!Qt(o)||!Qt(l))return null;var c=r*Math.abs(o-l),f=Math.max(...a.map(p=>p.x||0));return at(s)?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(...s.map(p=>p.x||0),f)),at(f)?T.createElement("rect",{x:0,y:o<l?o:o-c,width:f+(i?parseInt("".concat(i),10):1),height:Math.floor(c)}):null}function wHe(t){var e,n,{alpha:r,baseLine:s,points:a,strokeWidth:i}=t,o=(e=a[0])===null||e===void 0?void 0:e.x,l=(n=a[a.length-1])===null||n===void 0?void 0:n.x;if(!Qt(o)||!Qt(l))return null;var c=r*Math.abs(o-l),f=Math.max(...a.map(p=>p.y||0));return at(s)?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(...s.map(p=>p.y||0),f)),at(f)?T.createElement("rect",{x:o<l?o:o-c,y:0,width:c,height:Math.floor(f+(i?parseInt("".concat(i),10):1))}):null}function SHe(t){var{alpha:e,layout:n,points:r,baseLine:s,strokeWidth:a}=t;return n==="vertical"?T.createElement(vHe,{alpha:e,points:r,baseLine:s,strokeWidth:a}):T.createElement(wHe,{alpha:e,points:r,baseLine:s,strokeWidth:a})}function CHe(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:s,previousBaselineRef:a}=t,{points:i,baseLine:o,isAnimationActive:l,animationBegin:c,animationDuration:f,animationEasing:p,onAnimationStart:m,onAnimationEnd:y}=r,b=T.useMemo(()=>({points:i,baseLine:o}),[i,o]),v=wk(b,"recharts-area-"),x=aD(),[S,C]=T.useState(!1),E=!S,k=T.useCallback(()=>{typeof y=="function"&&y(),C(!1)},[y]),I=T.useCallback(()=>{typeof m=="function"&&m(),C(!0)},[m]);if(x==null)return null;var $=s.current,_=a.current;return T.createElement(xHe,{showLabels:E,points:i},r.children,T.createElement(vk,{animationId:v,begin:c,duration:f,isActive:l,easing:p,onAnimationEnd:k,onAnimationStart:I,key:v},z=>{if($){var L=$.length/i.length,R=z===1?i:i.map((U,X)=>{var V=Math.floor(X*L);if($[V]){var Y=$[V];return qh(qh({},U),{},{x:Ps(Y.x,U.x,z),y:Ps(Y.y,U.y,z)})}return U}),D;return at(o)?D=Ps(_,o,z):Bs(o)||xl(o)?D=Ps(_,0,z):D=o.map((U,X)=>{var V=Math.floor(X*L);if(Array.isArray(_)&&_[V]){var Y=_[V];return qh(qh({},U),{},{x:Ps(Y.x,U.x,z),y:Ps(Y.y,U.y,z)})}return U}),z>0&&(s.current=R,a.current=D),T.createElement(dU,{points:R,baseLine:D,needClip:e,clipPathId:n,props:r})}return z>0&&(s.current=i,a.current=o),T.createElement(Fs,null,l&&T.createElement("defs",null,T.createElement("clipPath",{id:"animationClipPath-".concat(n)},T.createElement(SHe,{alpha:z,points:i,baseLine:o,layout:x,strokeWidth:r.strokeWidth}))),T.createElement(Fs,{clipPath:"url(#animationClipPath-".concat(n,")")},T.createElement(dU,{points:i,baseLine:o,needClip:e,clipPathId:n,props:r})))}),T.createElement(YZ,{label:r.label}))}function kHe(t){var{needClip:e,clipPathId:n,props:r}=t,s=T.useRef(null),a=T.useRef();return T.createElement(CHe,{needClip:e,clipPathId:n,props:r,previousPointsRef:s,previousBaselineRef:a})}class NHe extends T.PureComponent{render(){var{hide:e,dot:n,points:r,className:s,top:a,left:i,needClip:o,xAxisId:l,yAxisId:c,width:f,height:p,id:m,baseLine:y,zIndex:b}=this.props;if(e)return null;var v=gn("recharts-area",s),x=m,{r:S,strokeWidth:C}=PGe(n),E=aJ(n),k=S*2+C,I=o?"url(#clipPath-".concat(E?"":"dots-").concat(x,")"):void 0;return T.createElement(Do,{zIndex:b},T.createElement(Fs,{className:v},o&&T.createElement("defs",null,T.createElement(zGe,{clipPathId:x,xAxisId:l,yAxisId:c}),!E&&T.createElement("clipPath",{id:"clipPath-dots-".concat(x)},T.createElement("rect",{x:i-k/2,y:a-k/2,width:f+k,height:p+k}))),T.createElement(kHe,{needClip:o,clipPathId:x,props:this.props})),T.createElement(tU,{points:r,mainColor:NS(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:I}),this.props.isRange&&Array.isArray(y)&&T.createElement(tU,{points:y,mainColor:NS(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:I}))}}var TJ={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Ms.area};function THe(t){var e,n=Vs(t,TJ),{activeDot:r,animationBegin:s,animationDuration:a,animationEasing:i,connectNulls:o,dot:l,fill:c,fillOpacity:f,hide:p,isAnimationActive:m,legendType:y,stroke:b,xAxisId:v,yAxisId:x}=n,S=NJ(n,dHe),C=Um(),E=AZ(),{needClip:k}=bJ(v,x),I=Qa(),{points:$,isRange:_,baseLine:z}=(e=mt(V=>cHe(V,t.id,I)))!==null&&e!==void 0?e:{},L=w5();if(C!=="horizontal"&&C!=="vertical"||L==null||E!=="AreaChart"&&E!=="ComposedChart")return null;var{height:R,width:D,x:U,y:X}=L;return!$||!$.length?null:T.createElement(NHe,sf({},S,{activeDot:r,animationBegin:s,animationDuration:a,animationEasing:i,baseLine:z,connectNulls:o,dot:l,fill:c,fillOpacity:f,height:R,hide:p,layout:C,isAnimationActive:m==="auto"?!gx.isSsr:m,isRange:_,legendType:y,needClip:k,points:$,stroke:b,width:D,left:U,top:X,xAxisId:v,yAxisId:x}))}var EHe=(t,e,n,r,s)=>{var a=n??e;if(at(a))return a;var i=t==="horizontal"?s:r,o=i.scale.domain();if(i.type==="number"){var l=Math.max(o[0],o[1]),c=Math.min(o[0],o[1]);return a==="dataMin"?c:a==="dataMax"||l<0?l:Math.max(Math.min(o[0],o[1]),0)}return a==="dataMin"?o[0]:a==="dataMax"?o[1]:o[0]};function IHe(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:s,layout:a,chartBaseValue:i,xAxis:o,yAxis:l,displayedData:c,dataStartIndex:f,xAxisTicks:p,yAxisTicks:m,bandSize:y}=t,b=s&&s.length,v=EHe(a,i,n,o,l),x=a==="horizontal",S=!1,C=c.map((k,I)=>{var $,_,z,L;if(b)L=s[f+I];else{var R=Vn(k,r);Array.isArray(R)?(L=R,S=!0):L=[v,R]}var D=($=(_=L)===null||_===void 0?void 0:_[1])!==null&&$!==void 0?$:null,U=D==null||b&&!e&&Vn(k,r)==null;if(x){var X;return{x:Q6({axis:o,ticks:p,bandSize:y,entry:k,index:I}),y:U?null:(X=l.scale.map(D))!==null&&X!==void 0?X:null,value:L,payload:k}}return{x:U?null:(z=o.scale.map(D))!==null&&z!==void 0?z:null,y:Q6({axis:l,ticks:m,bandSize:y,entry:k,index:I}),value:L,payload:k}}),E;return b||S?E=C.map(k=>{var I,$=Array.isArray(k.value)?k.value[0]:null;if(x){var _;return{x:k.x,y:$!=null&&k.y!=null&&(_=l.scale.map($))!==null&&_!==void 0?_:null,payload:k.payload}}return{x:$!=null&&(I=o.scale.map($))!==null&&I!==void 0?I:null,y:k.y,payload:k.payload}}):E=x?l.scale.map(v):o.scale.map(v),{points:C,baseLine:E??0,isRange:S}}function AHe(t){var e=Vs(t,TJ),n=Qa();return T.createElement(oJ,{id:e.id,type:"area"},r=>T.createElement(T.Fragment,null,T.createElement(E7e,{legendPayload:gHe(e)}),T.createElement(yHe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),T.createElement(B7e,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:cLe(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),T.createElement(THe,sf({},e,{id:r}))))}var E5=T.memo(AHe,k5);E5.displayName="Area";var jHe=["domain","range"],$He=["domain","range"];function fU(t,e){if(t==null)return{};var n,r,s=RHe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function RHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function hU(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function EJ(t,e){if(t===e)return!0;var{domain:n,range:r}=t,s=fU(t,jHe),{domain:a,range:i}=e,o=fU(e,$He);return!hU(n,a)||!hU(r,i)?!1:k5(s,o)}var OHe=["type"],_He=["dangerouslySetInnerHTML","ticks","scale"],DHe=["id","scale"];function x$(){return x$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x$.apply(null,arguments)}function pU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pU(Object(n),!0).forEach(function(r){zHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zHe(t,e,n){return(e=PHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PHe(t){var e=LHe(t,"string");return typeof e=="symbol"?e:e+""}function LHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v$(t,e){if(t==null)return{};var n,r,s=MHe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function MHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function FHe(t){var e=rr(),n=T.useRef(null),r=aD(),{type:s}=t,a=v$(t,OHe),i=jk(r,"xAxis",s),o=T.useMemo(()=>{if(i!=null)return mU(mU({},a),{},{type:i})},[a,i]);return T.useLayoutEffect(()=>{o!=null&&(n.current===null?e(Tqe(o)):n.current!==o&&e(Eqe({prev:n.current,next:o})),n.current=o)},[o,e]),T.useLayoutEffect(()=>()=>{n.current&&(e(Iqe(n.current)),n.current=null)},[e]),null}var BHe=t=>{var{xAxisId:e,className:n}=t,r=mt(aY),s=Qa(),a="xAxis",i=mt(S=>rZ(S,a,e,s)),o=mt(S=>rUe(S,e)),l=mt(S=>cUe(S,e)),c=mt(S=>_Q(S,e));if(o==null||l==null||c==null)return null;var{dangerouslySetInnerHTML:f,ticks:p,scale:m}=t,y=v$(t,_He),{id:b,scale:v}=c,x=v$(c,DHe);return T.createElement(C5,x$({},y,x,{x:l.x,y:l.y,width:o.width,height:o.height,className:gn("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:i,axisType:a}))},UHe={allowDataOverflow:us.allowDataOverflow,allowDecimals:us.allowDecimals,allowDuplicatedCategory:us.allowDuplicatedCategory,angle:us.angle,axisLine:ic.axisLine,height:us.height,hide:!1,includeHidden:us.includeHidden,interval:us.interval,label:!1,minTickGap:us.minTickGap,mirror:us.mirror,orientation:us.orientation,padding:us.padding,reversed:us.reversed,scale:us.scale,tick:us.tick,tickCount:us.tickCount,tickLine:ic.tickLine,tickSize:ic.tickSize,type:us.type,xAxisId:0},WHe=t=>{var e=Vs(t,UHe);return T.createElement(T.Fragment,null,T.createElement(FHe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),T.createElement(BHe,e))},I5=T.memo(WHe,EJ);I5.displayName="XAxis";var VHe=["type"],qHe=["dangerouslySetInnerHTML","ticks","scale"],GHe=["id","scale"];function w$(){return w$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w$.apply(null,arguments)}function gU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function yU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gU(Object(n),!0).forEach(function(r){HHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HHe(t,e,n){return(e=KHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KHe(t){var e=XHe(t,"string");return typeof e=="symbol"?e:e+""}function XHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function S$(t,e){if(t==null)return{};var n,r,s=YHe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function YHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function QHe(t){var e=rr(),n=T.useRef(null),r=aD(),{type:s}=t,a=S$(t,VHe),i=jk(r,"yAxis",s),o=T.useMemo(()=>{if(i!=null)return yU(yU({},a),{},{type:i})},[i,a]);return T.useLayoutEffect(()=>{o!=null&&(n.current===null?e(Aqe(o)):n.current!==o&&e(jqe({prev:n.current,next:o})),n.current=o)},[o,e]),T.useLayoutEffect(()=>()=>{n.current&&(e($qe(n.current)),n.current=null)},[e]),null}function ZHe(t){var{yAxisId:e,className:n,width:r,label:s}=t,a=T.useRef(null),i=T.useRef(null),o=mt(aY),l=Qa(),c=rr(),f="yAxis",p=mt($=>fUe($,e)),m=mt($=>dUe($,e)),y=mt($=>rZ($,f,e,l)),b=mt($=>DQ($,e));if(T.useLayoutEffect(()=>{if(!(r!=="auto"||!p||y5(s)||T.isValidElement(s)||b==null)){var $=a.current;if($){var _=$.getCalculatedWidth();Math.round(p.width)!==Math.round(_)&&c(Rqe({id:e,width:_}))}}},[y,p,c,s,e,r,b]),p==null||m==null||b==null)return null;var{dangerouslySetInnerHTML:v,ticks:x,scale:S}=t,C=S$(t,qHe),{id:E,scale:k}=b,I=S$(b,GHe);return T.createElement(C5,w$({},C,I,{ref:a,labelRef:i,x:m.x,y:m.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:p.width,height:p.height,className:gn("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:y,axisType:f}))}var JHe={allowDataOverflow:ds.allowDataOverflow,allowDecimals:ds.allowDecimals,allowDuplicatedCategory:ds.allowDuplicatedCategory,angle:ds.angle,axisLine:ic.axisLine,hide:!1,includeHidden:ds.includeHidden,interval:ds.interval,label:!1,minTickGap:ds.minTickGap,mirror:ds.mirror,orientation:ds.orientation,padding:ds.padding,reversed:ds.reversed,scale:ds.scale,tick:ds.tick,tickCount:ds.tickCount,tickLine:ic.tickLine,tickSize:ic.tickSize,type:ds.type,width:ds.width,yAxisId:0},eKe=t=>{var e=Vs(t,JHe);return T.createElement(T.Fragment,null,T.createElement(QHe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),T.createElement(ZHe,e))},A5=T.memo(eKe,EJ);A5.displayName="YAxis";var tKe=(t,e)=>e,j5=Ce([tKe,Ln,$Q,ks,SZ,_c,EWe,Ss],_We),$5=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},IJ=Yi("mouseClick"),AJ=fx();AJ.startListening({actionCreator:IJ,effect:(t,e)=>{var n=t.payload,r=j5(e.getState(),$5(n));r?.activeIndex!=null&&e.dispatch(TUe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var C$=Yi("mouseMove"),jJ=fx(),S1=null;jJ.startListening({actionCreator:C$,effect:(t,e)=>{var n=t.payload;S1!==null&&cancelAnimationFrame(S1);var r=$5(n);S1=requestAnimationFrame(()=>{var s=e.getState(),a=o5(s,s.tooltip.settings.shared);if(a==="axis"){var i=j5(s,r);i?.activeIndex!=null?e.dispatch(hZ({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):e.dispatch(fZ())}S1=null})}});function nKe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var bU={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},$J=Ya({name:"rootProps",initialState:bU,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:bU.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),rKe=$J.reducer,{updateOptions:sKe}=$J.actions,aKe=null,iKe={updatePolarOptions:(t,e)=>e.payload},RJ=Ya({name:"polarOptions",initialState:aKe,reducers:iKe}),{updatePolarOptions:oKe}=RJ.actions,lKe=RJ.reducer,OJ=Yi("keyDown"),_J=Yi("focus"),R5=fx();R5.startListening({actionCreator:OJ,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var i=l5(s,Qm(n),kx(n),Tx(n)),o=i==null?-1:Number(i);if(!(!Number.isFinite(o)||o<0)){var l=_c(n);if(a==="Enter"){var c=bS(n,"axis","hover",String(s.index));e.dispatch(p$({active:!s.active,activeIndex:s.index,activeCoordinate:c}));return}var f=gUe(n),p=f==="left-to-right"?1:-1,m=a==="ArrowRight"?1:-1,y=o+m*p;if(!(l==null||y>=l.length||y<0)){var b=bS(n,"axis","hover",String(y));e.dispatch(p$({active:!0,activeIndex:y.toString(),activeCoordinate:b}))}}}}}});R5.startListening({actionCreator:_J,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip;if(!s.active&&s.index==null){var a="0",i=bS(n,"axis","hover",String(a));e.dispatch(p$({active:!0,activeIndex:a,activeCoordinate:i}))}}}});var Bi=Yi("externalEvent"),DJ=fx(),CA=new Map;DJ.startListening({actionCreator:Bi,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var s=r.type,a=CA.get(s);a!==void 0&&cancelAnimationFrame(a);var i=requestAnimationFrame(()=>{try{var o=e.getState(),l={activeCoordinate:fWe(o),activeDataKey:TZ(o),activeIndex:Sp(o),activeLabel:NZ(o),activeTooltipIndex:Sp(o),isTooltipActive:hWe(o)};n(l,r)}finally{CA.delete(s)}});CA.set(s,i)}}});var cKe=Ce([Xm],t=>t.tooltipItemPayloads),uKe=Ce([cKe,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(a=>a.settings.graphicalItemId===n);if(r!=null){var{getPosition:s}=r;if(s!=null)return s(e)}}}),zJ=Yi("touchMove"),PJ=fx();PJ.startListening({actionCreator:zJ,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),s=o5(r,r.tooltip.settings.shared);if(s==="axis"){var a=n.touches[0];if(a==null)return;var i=j5(r,$5({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));i?.activeIndex!=null&&e.dispatch(hZ({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=n.touches[0];if(document.elementFromPoint==null||l==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var f=c.getAttribute(rY),p=(o=c.getAttribute(sY))!==null&&o!==void 0?o:void 0,m=Ym(r).find(v=>v.id===p);if(f==null||m==null||p==null)return;var{dataKey:y}=m,b=uKe(r,f,p);e.dispatch(dZ({activeDataKey:y,activeIndex:f,activeCoordinate:b,activeGraphicalItemId:p}))}}}});var dKe=NX({brush:Bqe,cartesianAxis:Oqe,chartData:dVe,errorBars:DGe,graphicalItems:M7e,layout:eLe,legend:rMe,options:iVe,polarAxis:K9e,polarOptions:lKe,referenceElements:qqe,rootProps:rKe,tooltip:EUe,zIndex:KWe}),fKe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return NPe({reducer:dKe,preloadedState:e,middleware:r=>{var s;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((s="es6")!==null&&s!==void 0?s:"")}).concat([AJ.middleware,jJ.middleware,R5.middleware,DJ.middleware,PJ.middleware])},enhancers:r=>{var s=r;return typeof r=="function"&&(s=r()),s.concat(FX({type:"raf"}))},devTools:{serialize:{replacer:nKe},name:"recharts-".concat(n)}})};function LJ(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,s=Qa(),a=T.useRef(null);if(s)return n;a.current==null&&(a.current=fKe(e,r));var i=Y_;return T.createElement(tHe,{context:i,store:a.current},n)}function hKe(t){var{layout:e,margin:n}=t,r=rr(),s=Qa();return T.useEffect(()=>{s||(r(QPe(e)),r(YPe(n)))},[r,s,e,n]),null}var MJ=T.memo(hKe,k5);function FJ(t){var e=rr();return T.useEffect(()=>{e(sKe(t))},[e,t]),null}function xU(t){var{zIndex:e,isPanorama:n}=t,r=T.useRef(null),s=rr();return T.useLayoutEffect(()=>(r.current&&s(GWe({zIndex:e,element:r.current,isPanorama:n})),()=>{s(HWe({zIndex:e,isPanorama:n}))}),[s,e,n]),T.createElement("g",{tabIndex:-1,ref:r})}function vU(t){var{children:e,isPanorama:n}=t,r=mt(zWe);if(!r||r.length===0)return e;var s=r.filter(i=>i<0),a=r.filter(i=>i>0);return T.createElement(T.Fragment,null,s.map(i=>T.createElement(xU,{key:i,zIndex:i,isPanorama:n})),e,a.map(i=>T.createElement(xU,{key:i,zIndex:i,isPanorama:n})))}var pKe=["children"];function mKe(t,e){if(t==null)return{};var n,r,s=gKe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function gKe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function TS(){return TS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TS.apply(null,arguments)}var yKe={width:"100%",height:"100%",display:"block"},bKe=T.forwardRef((t,e)=>{var n=uY(),r=dY(),s=CY();if(!wl(n)||!wl(r))return null;var{children:a,otherAttributes:i,title:o,desc:l}=t,c,f;return i!=null&&(typeof i.tabIndex=="number"?c=i.tabIndex:c=s?0:void 0,typeof i.role=="string"?f=i.role:f=s?"application":void 0),T.createElement(UK,TS({},i,{title:o,desc:l,role:f,tabIndex:c,width:n,height:r,style:yKe,ref:e}),a)}),xKe=t=>{var{children:e}=t,n=mt(mk);if(!n)return null;var{width:r,height:s,y:a,x:i}=n;return T.createElement(UK,{width:r,height:s,x:i,y:a},e)},wU=T.forwardRef((t,e)=>{var{children:n}=t,r=mKe(t,pKe),s=Qa();return s?T.createElement(xKe,null,T.createElement(vU,{isPanorama:!0},n)):T.createElement(bKe,TS({ref:e},r),T.createElement(vU,{isPanorama:!1},n))});function vKe(){var t=rr(),[e,n]=T.useState(null),r=mt(mLe);return T.useEffect(()=>{if(e!=null){var s=e.getBoundingClientRect(),a=s.width/e.offsetWidth;Qt(a)&&a!==r&&t(JPe(a))}},[e,t,r]),n}function SU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function wKe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SU(Object(n),!0).forEach(function(r){SKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SKe(t,e,n){return(e=CKe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CKe(t){var e=kKe(t,"string");return typeof e=="symbol"?e:e+""}function kKe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nu(){return Nu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nu.apply(null,arguments)}var NKe=()=>(vVe(),null);function ES(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var TKe=T.forwardRef((t,e)=>{var n,r,s=T.useRef(null),[a,i]=T.useState({containerWidth:ES((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:ES((r=t.style)===null||r===void 0?void 0:r.height)}),o=T.useCallback((c,f)=>{i(p=>{var m=Math.round(c),y=Math.round(f);return p.containerWidth===m&&p.containerHeight===y?p:{containerWidth:m,containerHeight:y}})},[]),l=T.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=c.getBoundingClientRect();o(f,p);var m=b=>{var v=b[0];if(v!=null){var{width:x,height:S}=v.contentRect;o(x,S)}},y=new ResizeObserver(m);y.observe(c),s.current=y}},[e,o]);return T.useEffect(()=>()=>{var c=s.current;c?.disconnect()},[o]),T.createElement(T.Fragment,null,T.createElement(px,{width:a.containerWidth,height:a.containerHeight}),T.createElement("div",Nu({ref:l},t)))}),EKe=T.forwardRef((t,e)=>{var{width:n,height:r}=t,[s,a]=T.useState({containerWidth:ES(n),containerHeight:ES(r)}),i=T.useCallback((l,c)=>{a(f=>{var p=Math.round(l),m=Math.round(c);return f.containerWidth===p&&f.containerHeight===m?f:{containerWidth:p,containerHeight:m}})},[]),o=T.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:f}=l.getBoundingClientRect();i(c,f)}},[e,i]);return T.createElement(T.Fragment,null,T.createElement(px,{width:s.containerWidth,height:s.containerHeight}),T.createElement("div",Nu({ref:o},t)))}),IKe=T.forwardRef((t,e)=>{var{width:n,height:r}=t;return T.createElement(T.Fragment,null,T.createElement(px,{width:n,height:r}),T.createElement("div",Nu({ref:e},t)))}),AKe=T.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?T.createElement(EKe,Nu({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?T.createElement(IKe,Nu({},t,{width:n,height:r,ref:e})):T.createElement(T.Fragment,null,T.createElement(px,{width:n,height:r}),T.createElement("div",Nu({ref:e},t)))});function jKe(t){return t?TKe:AKe}var $Ke=T.forwardRef((t,e)=>{var{children:n,className:r,height:s,onClick:a,onContextMenu:i,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:f,onMouseMove:p,onMouseUp:m,onTouchEnd:y,onTouchMove:b,onTouchStart:v,style:x,width:S,responsive:C,dispatchTouchEvents:E=!0}=t,k=T.useRef(null),I=rr(),[$,_]=T.useState(null),[z,L]=T.useState(null),R=vKe(),D=rD(),U=D?.width>0?D.width:S,X=D?.height>0?D.height:s,V=T.useCallback(he=>{R(he),typeof e=="function"&&e(he),_(he),L(he),he!=null&&(k.current=he)},[R,e,_,L]),Y=T.useCallback(he=>{I(IJ(he)),I(Bi({handler:a,reactEvent:he}))},[I,a]),B=T.useCallback(he=>{I(C$(he)),I(Bi({handler:c,reactEvent:he}))},[I,c]),Z=T.useCallback(he=>{I(fZ()),I(Bi({handler:f,reactEvent:he}))},[I,f]),J=T.useCallback(he=>{I(C$(he)),I(Bi({handler:p,reactEvent:he}))},[I,p]),ae=T.useCallback(()=>{I(_J())},[I]),ee=T.useCallback(he=>{I(OJ(he.key))},[I]),W=T.useCallback(he=>{I(Bi({handler:i,reactEvent:he}))},[I,i]),Q=T.useCallback(he=>{I(Bi({handler:o,reactEvent:he}))},[I,o]),se=T.useCallback(he=>{I(Bi({handler:l,reactEvent:he}))},[I,l]),fe=T.useCallback(he=>{I(Bi({handler:m,reactEvent:he}))},[I,m]),Ne=T.useCallback(he=>{I(Bi({handler:v,reactEvent:he}))},[I,v]),_e=T.useCallback(he=>{E&&I(zJ(he)),I(Bi({handler:b,reactEvent:he}))},[I,E,b]),De=T.useCallback(he=>{I(Bi({handler:y,reactEvent:he}))},[I,y]),He=jKe(C);return T.createElement(_Z.Provider,{value:$},T.createElement(a4e.Provider,{value:z},T.createElement(He,{width:U??x?.width,height:X??x?.height,className:gn("recharts-wrapper",r),style:wKe({position:"relative",cursor:"default",width:U,height:X},x),onClick:Y,onContextMenu:W,onDoubleClick:Q,onFocus:ae,onKeyDown:ee,onMouseDown:se,onMouseEnter:B,onMouseLeave:Z,onMouseMove:J,onMouseUp:fe,onTouchEnd:De,onTouchMove:_e,onTouchStart:Ne,ref:V},T.createElement(NKe,null),n)))}),RKe=["width","height","responsive","children","className","style","compact","title","desc"];function OKe(t,e){if(t==null)return{};var n,r,s=_Ke(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function _Ke(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var BJ=T.forwardRef((t,e)=>{var{width:n,height:r,responsive:s,children:a,className:i,style:o,compact:l,title:c,desc:f}=t,p=OKe(t,RKe),m=Ci(p);return l?T.createElement(T.Fragment,null,T.createElement(px,{width:n,height:r}),T.createElement(wU,{otherAttributes:m,title:c,desc:f},a)):T.createElement($Ke,{className:i,style:o,width:n,height:r,responsive:s??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},T.createElement(wU,{otherAttributes:m,title:c,desc:f,ref:e},T.createElement(Hqe,null,a)))});function k$(){return k$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k$.apply(null,arguments)}var DKe={top:5,right:5,bottom:5,left:5},zKe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:DKe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},PKe=T.forwardRef(function(e,n){var r,s=Vs(e.categoricalChartProps,zKe),{chartName:a,defaultTooltipEventType:i,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,f={chartName:a,defaultTooltipEventType:i,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return T.createElement(LJ,{preloadedState:{options:f},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:a},T.createElement(dJ,{chartData:c.data}),T.createElement(MJ,{layout:s.layout,margin:s.margin}),T.createElement(FJ,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),T.createElement(BJ,k$({},s,{ref:n})))});function LKe(t){var e=rr();return T.useEffect(()=>{e(oKe(t))},[e,t]),null}var MKe=["layout"];function N$(){return N$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N$.apply(null,arguments)}function FKe(t,e){if(t==null)return{};var n,r,s=BKe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function BKe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var UKe={top:5,right:5,bottom:5,left:5},UJ={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:UKe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},WKe=T.forwardRef(function(e,n){var r,s=Vs(e.categoricalChartProps,UJ),{layout:a}=s,i=FKe(s,MKe),{chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:f}=e,p={chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,eventEmitter:void 0};return T.createElement(LJ,{preloadedState:{options:p},reduxStoreName:(r=s.id)!==null&&r!==void 0?r:o},T.createElement(dJ,{chartData:s.data}),T.createElement(MJ,{layout:a,margin:s.margin}),T.createElement(FJ,{baseValue:void 0,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),T.createElement(LKe,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),T.createElement(BJ,N$({},i,{ref:n})))});function CU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function kU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CU(Object(n),!0).forEach(function(r){VKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VKe(t,e,n){return(e=qKe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qKe(t){var e=GKe(t,"string");return typeof e=="symbol"?e:e+""}function GKe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HKe=["item"],KKe=kU(kU({},UJ),{},{layout:"centric",startAngle:0,endAngle:360}),WJ=T.forwardRef((t,e)=>{var n=Vs(t,KKe);return T.createElement(WKe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:HKe,tooltipPayloadSearcher:DZ,categoricalChartProps:n,ref:e})}),XKe=["axis"],VJ=T.forwardRef((t,e)=>T.createElement(PKe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:XKe,tooltipPayloadSearcher:DZ,categoricalChartProps:t,ref:e}));const NU="https://mentor-hub-backend-tkil.onrender.com/api";function Wk({context:t="problem",onGenerate:e,isOpen:n,onClose:r}){const[s,a]=T.useState([{role:"assistant",content:t==="task"?` Hi! I'm your AI assistant for creating ML/AI tasks. I can help you:

 **Brainstorm** task ideas based on topics
 **Generate** complete task specifications
 **Suggest** improvements to your descriptions

Try asking: "Create a beginner-friendly sentiment analysis task" or "I need an image classification project"`:` Hi! I'm your AI assistant for creating coding problems. I can help you:

 **Brainstorm** problem ideas by topic or difficulty
 **Generate** complete problem specifications (including **SQL queries**!)
 **Suggest** test cases and edge cases

Try asking:
 "Create an easy array problem about finding duplicates"
 "Generate a SQL problem about employee salaries"
 "I need a hard dynamic programming challenge"`}]),[i,o]=T.useState(""),[l,c]=T.useState(!1),[f,p]=T.useState(!1),[m,y]=T.useState(!1),b=T.useRef(null),v=()=>{b.current?.scrollIntoView({behavior:"smooth"})};T.useEffect(()=>{v()},[s]);const x=async()=>{if(!i.trim()||l)return;const I={role:"user",content:i};a(_=>[..._,I]),o(""),c(!0);const $=i.toLowerCase().includes("sql")||i.toLowerCase().includes("query")||i.toLowerCase().includes("database");try{if(i.toLowerCase().includes("create")||i.toLowerCase().includes("generate")||i.toLowerCase().includes("make")){const L=await Ve.post(`${NU}/ai/generate-problem`,{prompt:i,type:t==="task"?"task":"problem",language:$?"SQL":"Python"});if(L.data.success&&L.data.generated){const R=L.data.generated,D=R.type==="SQL"||R.language==="SQL";let U;t==="task"?U=` I've generated an ML task for you!

**${R.title}**

 **Type:** ${R.type}
 **Difficulty:** ${R.difficulty}

 **Description:**
${R.description}

 **Requirements:**
${R.requirements}

---
*Click "Use This" to auto-fill the form, or ask me to modify it!*`:D?U=` I've generated a SQL problem for you!

**${R.title}**

 **Type:** SQL Query
 **Difficulty:** ${R.difficulty}

 **Description:**
${R.description}

 **Database Schema:**
\`\`\`sql
${R.sqlSchema||"Schema will be provided"}
\`\`\`

 **Expected Result:**
\`\`\`
${R.expectedQueryResult||R.expectedResult||"Result preview"}
\`\`\`

---
*Click "Use This" to auto-fill the form, or ask me to modify it!*`:U=` I've generated a coding problem for you!

**${R.title}**

 **Language:** ${R.language}
 **Difficulty:** ${R.difficulty}

 **Description:**
${R.description}

 **Sample Input:** \`${R.sampleInput}\`
 **Expected Output:** \`${R.expectedOutput}\`

---
*Click "Use This" to auto-fill the form, or ask me to modify it!*`,a(X=>[...X,{role:"assistant",content:U,generatedContent:R}]),c(!1);return}}const _=await Ve.post(`${NU}/ai/chat`,{messages:[...s.slice(1),I].map(L=>({role:L.role,content:L.content})),context:t}),z={role:"assistant",content:_.data.response,generatedContent:_.data.generatedContent};a(L=>[...L,z])}catch(_){console.error("Chat error:",_),a(z=>[...z,{role:"assistant",content:` Sorry, I encountered an error: ${_.response?.data?.details||_.message}. Please try again!`}])}finally{c(!1)}},S=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),x())},C=I=>{e&&I&&e(I)},E=I=>{navigator.clipboard.writeText(JSON.stringify(I,null,2)),y(!0),setTimeout(()=>y(!1),2e3)},k=t==="task"?["Create a sentiment analysis task","Generate an image classification project","Build a regression task for housing prices","Create an NLP task for text classification"]:["Create an easy array problem","Generate a medium string manipulation problem","Make a hard dynamic programming challenge","Create a beginner-friendly recursion problem"];return n?u.jsxs("div",{style:{position:"fixed",bottom:"1.5rem",right:"1.5rem",width:f?"320px":"420px",height:f?"auto":"600px",background:"linear-gradient(145deg, #1e293b, #0f172a)",borderRadius:"1.5rem",border:"1px solid rgba(59, 130, 246, 0.3)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 40px rgba(59, 130, 246, 0.15)",display:"flex",flexDirection:"column",overflow:"hidden",zIndex:9999,animation:"slideIn 0.3s ease-out"},children:[u.jsxs("div",{style:{padding:"1rem 1.25rem",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(139, 92, 246, 0.1))",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.4)"},children:u.jsx(Va,{size:20,color:"white"})}),u.jsxs("div",{children:[u.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:700,color:"#f8fafc"},children:["AI ",t==="task"?"Task":"Problem"," Generator"]}),u.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"#94a3b8"},children:"Powered by Groq AI"})]})]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{onClick:()=>p(!f),style:{background:"rgba(255,255,255,0.05)",border:"none",borderRadius:"8px",padding:"0.5rem",cursor:"pointer",color:"#94a3b8",display:"flex",alignItems:"center",justifyContent:"center"},children:f?u.jsx(ZU,{size:18}):u.jsx(YU,{size:18})}),u.jsx("button",{onClick:r,style:{background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"8px",padding:"0.5rem",cursor:"pointer",color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Mr,{size:18})})]})]}),!f&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:[s.map((I,$)=>u.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexDirection:I.role==="user"?"row-reverse":"row"},children:[u.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:I.role==="user"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:I.role==="user"?u.jsx(aW,{size:16,color:"white"}):u.jsx(Q1,{size:16,color:"white"})}),u.jsxs("div",{style:{maxWidth:"85%",padding:"0.75rem 1rem",borderRadius:I.role==="user"?"1rem 1rem 0 1rem":"1rem 1rem 1rem 0",background:I.role==="user"?"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(6, 182, 212, 0.15))":"rgba(30, 41, 59, 0.8)",border:`1px solid ${I.role==="user"?"rgba(16, 185, 129, 0.2)":"rgba(255,255,255,0.05)"}`,color:"#e2e8f0",fontSize:"0.9rem",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:[I.content,I.generatedContent&&u.jsxs("div",{style:{marginTop:"1rem",paddingTop:"0.75rem",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[u.jsxs("button",{onClick:()=>C(I.generatedContent),style:{background:"linear-gradient(135deg, #10b981, #059669)",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.4rem"},children:[u.jsx(AA,{size:14})," Use This"]}),u.jsxs("button",{onClick:()=>E(I.generatedContent),style:{background:"rgba(255,255,255,0.1)",border:"none",color:"#94a3b8",padding:"0.5rem 1rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[m?u.jsx(XU,{size:14,color:"#10b981"}):u.jsx(tW,{size:14}),m?"Copied!":"Copy JSON"]})]})]})]},$)),l&&u.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Q1,{size:16,color:"white"})}),u.jsxs("div",{style:{padding:"0.75rem 1rem",borderRadius:"1rem 1rem 1rem 0",background:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",gap:"0.5rem",color:"#94a3b8"},children:[u.jsx(ise,{size:16,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),"Thinking..."]})]}),u.jsx("div",{ref:b})]}),s.length<=1&&u.jsx("div",{style:{padding:"0 1rem 0.75rem",display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:k.map((I,$)=>u.jsxs("button",{onClick:()=>o(I),style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",color:"#60a5fa",padding:"0.4rem 0.75rem",borderRadius:"2rem",fontSize:"0.75rem",cursor:"pointer",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"0.3rem"},children:[u.jsx(jy,{size:12})," ",I]},$))}),u.jsx("div",{style:{padding:"1rem",borderTop:"1px solid rgba(255,255,255,0.05)",background:"rgba(15, 23, 42, 0.5)"},children:u.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-end"},children:[u.jsx("textarea",{value:i,onChange:I=>o(I.target.value),onKeyPress:S,placeholder:`Describe the ${t==="task"?"ML task":"coding problem"} you want...`,style:{flex:1,background:"rgba(30, 41, 59, 0.6)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",padding:"0.75rem 1rem",color:"#f8fafc",fontSize:"0.9rem",resize:"none",minHeight:"44px",maxHeight:"120px",outline:"none"},rows:1}),u.jsx("button",{onClick:x,disabled:!i.trim()||l,style:{width:"44px",height:"44px",borderRadius:"12px",background:i.trim()&&!l?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"rgba(255,255,255,0.1)",border:"none",color:i.trim()&&!l?"white":"#64748b",cursor:i.trim()&&!l?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},children:u.jsx(kl,{size:18})})]})})]}),u.jsx("style",{children:`
                @keyframes slideIn {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]}):null}const YKe="https://mentor-hub-backend-tkil.onrender.com/api",Hn={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e5,padding:0},modal:{width:"100vw",height:"100vh",backgroundColor:"#0f172a",borderRadius:"0",display:"flex",flexDirection:"column",boxShadow:"none",border:"none",overflow:"hidden",boxSizing:"border-box"},header:{padding:"15px 25px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(6, 182, 212, 0.1))",borderBottom:"1px solid rgba(139, 92, 246, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},content:{flex:1,overflowY:"auto",padding:"20px 25px",minHeight:0},footer:{padding:"15px 25px",borderTop:"1px solid rgba(71, 85, 105, 0.3)",background:"rgba(30, 41, 59, 0.5)",display:"flex",justifyContent:"space-between",fontSize:"13px",color:"#94a3b8",flexShrink:0},tabs:{display:"flex",gap:"8px",marginBottom:"20px",padding:"8px",background:"rgba(30, 41, 59, 0.5)",borderRadius:"12px",flexWrap:"wrap"},tab:{flex:1,minWidth:"120px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 16px",border:"none",borderRadius:"8px",fontWeight:600,fontSize:"14px",cursor:"pointer",transition:"all 0.2s"},tabActive:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white"},tabInactive:{background:"transparent",color:"#94a3b8"},card:{padding:"20px",background:"rgba(30, 41, 59, 0.5)",borderRadius:"14px",border:"1px solid rgba(71, 85, 105, 0.3)",marginBottom:"15px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},statBox:{padding:"20px",borderRadius:"14px",textAlign:"center"}};function qJ({studentId:t,studentName:e,onClose:n,requestedBy:r,requestedByRole:s}){const[a,i]=T.useState(!0),[o,l]=T.useState(null),[c,f]=T.useState(null),[p,m]=T.useState("overview");T.useEffect(()=>{t&&(i(!0),Ve.post(`${YKe}/reports/student/${t}`,{requestedBy:r,requestedByRole:s}).then(x=>{console.log("Report data:",x.data),l(x.data),i(!1)}).catch(x=>{console.error("Failed to generate report:",x),f("Failed to generate report"),i(!1)}))},[t]);const y=()=>{if(!o)return;const x=window.open("","_blank");x.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Student Report - ${o.student.name}</title>
                <style>
                    * { margin: 0; padding: 0; box-sizing: border-box; }
                    body { font-family: 'Segoe UI', Arial, sans-serif; padding: 40px; color: #1e293b; line-height: 1.6; }
                    .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 3px solid #8b5cf6; }
                    .header h1 { color: #8b5cf6; font-size: 28px; }
                    .section { margin-bottom: 25px; page-break-inside: avoid; }
                    .section h2 { color: #8b5cf6; font-size: 18px; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 2px solid #e2e8f0; }
                    .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px; }
                    .stat-box { padding: 15px; background: #f8fafc; border-radius: 8px; text-align: center; border: 1px solid #e2e8f0; }
                    .stat-value { font-size: 24px; font-weight: 700; color: #8b5cf6; }
                    .stat-label { font-size: 12px; color: #64748b; margin-top: 5px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
                    th, td { padding: 10px; text-align: left; border-bottom: 1px solid #e2e8f0; }
                    th { background: #f1f5f9; font-size: 12px; color: #64748b; }
                    .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #e2e8f0; color: #64748b; font-size: 12px; }
                    .print-btn {
                        position: fixed; top: 20px; right: 20px;
                        background: #8b5cf6; color: white; border: none; padding: 10px 20px;
                        border-radius: 5px; cursor: pointer; font-weight: bold;
                        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                        z-index: 1000;
                    }
                    .print-btn:hover { background: #7c3aed; }
                    @media print { .print-btn { display: none; } }
                </style>
            </head>
            <body>
                <button onclick="window.print()" class="print-btn"> Print Report</button>
                <div class="header">
                    <h1> Student Performance Report</h1>
                    <p><strong>${o.student.name}</strong> | ${o.student.email}</p>
                    <p style="font-size: 12px; margin-top: 5px;">Generated: ${new Date(o.generatedAt).toLocaleString()}</p>
                </div>

                <div class="section">
                    <h2> Performance Summary</h2>
                    <div class="grid">
                        <div class="stat-box"><div class="stat-value">${o.summary.overallAvgScore}%</div><div class="stat-label">Overall Score</div></div>
                        <div class="stat-box"><div class="stat-value">#${o.summary.leaderboardRank}</div><div class="stat-label">Rank</div></div>
                        <div class="stat-box"><div class="stat-value">${o.summary.totalSubmissions}</div><div class="stat-label">Submissions</div></div>
                        <div class="stat-box"><div class="stat-value">${o.summary.aptitudeTests}</div><div class="stat-label">Aptitude Tests</div></div>
                    </div>
                    <div class="grid">
                        <div class="stat-box"><div class="stat-value" style="color:#3b82f6">${o.summary.avgCodeScore}%</div><div class="stat-label">Code Score</div></div>
                        <div class="stat-box"><div class="stat-value" style="color:#10b981">${o.summary.avgTaskScore}%</div><div class="stat-label">Task Score</div></div>
                        <div class="stat-box"><div class="stat-value" style="color:#f59e0b">${o.summary.avgAptitudeScore}%</div><div class="stat-label">Aptitude Score</div></div>
                        <div class="stat-box"><div class="stat-value">${o.summary.completedProblems}</div><div class="stat-label">Problems Solved</div></div>
                    </div>
                </div>

                <div class="section">
                    <h2> Programming Languages</h2>
                    ${o.languageBreakdown?.map(S=>`<span style="display:inline-block;margin:5px;padding:8px 15px;background:#f1f5f9;border-radius:8px;"><strong>${S.language}</strong>: ${S.count} (${S.avgScore}%)</span>`).join("")||"None"}
                </div>

                <div class="section">
                    <h2> Recent Submissions</h2>
                    <table>
                        <thead><tr><th>Title</th><th>Type</th><th>Language</th><th>Score</th><th>Status</th></tr></thead>
                        <tbody>
                            ${o.recentSubmissions?.slice(0,10).map(S=>`<tr><td>${S.title}</td><td>${S.type}</td><td>${S.language}</td><td>${S.score}%</td><td>${S.status}</td></tr>`).join("")||'<tr><td colspan="5">No submissions</td></tr>'}
                        </tbody>
                    </table>
                </div>

                <div class="section">
                    <h2> Aptitude Tests</h2>
                    <table>
                        <thead><tr><th>Test</th><th>Difficulty</th><th>Score</th><th>Status</th><th>Date</th></tr></thead>
                        <tbody>
                            ${o.aptitudeResults?.map(S=>`<tr><td>${S.testTitle}</td><td>${S.difficulty}</td><td>${S.score}%</td><td>${S.status}</td><td>${new Date(S.submittedAt).toLocaleDateString()}</td></tr>`).join("")||'<tr><td colspan="5">No tests taken</td></tr>'}
                        </tbody>
                    </table>
                </div>

                <div class="section">
                    <h2> Proctoring Summary</h2>
                    <div class="grid">
                        <div class="stat-box"><div class="stat-value">${o.integrity?.tabSwitches||0}</div><div class="stat-label">Tab Switches</div></div>
                        <div class="stat-box"><div class="stat-value">${o.integrity?.copyPasteAttempts||0}</div><div class="stat-label">Copy/Paste</div></div>
                        <div class="stat-box"><div class="stat-value">${o.integrity?.cameraBlocked||0}</div><div class="stat-label">Camera Issues</div></div>
                        <div class="stat-box"><div class="stat-value">${o.integrity?.plagiarismCount||0}</div><div class="stat-label">Plagiarism Flags</div></div>
                    </div>
                </div>

                ${o.aiInsights?`
                <div class="section">
                    <h2> AI Insights</h2>
                    <p style="margin-bottom:15px">${o.aiInsights.overallAssessment||""}</p>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px">
                        <div style="background:#d1fae5;padding:15px;border-radius:8px">
                            <h4 style="color:#065f46;margin-bottom:10px"> Strengths</h4>
                            <ul style="padding-left:20px">${o.aiInsights.strengths?.map(S=>`<li>${S}</li>`).join("")||""}</ul>
                        </div>
                        <div style="background:#fef3c7;padding:15px;border-radius:8px">
                            <h4 style="color:#92400e;margin-bottom:10px"> Areas for Growth</h4>
                            <ul style="padding-left:20px">${o.aiInsights.areasForImprovement?.map(S=>`<li>${S}</li>`).join("")||""}</ul>
                        </div>
                    </div>
                </div>
                `:""}

                <div class="footer">
                    <p>Report generated by MentorHub | ${new Date().toLocaleString()}</p>
                </div>
            </body>
            </html>
        `),x.document.close()},b=x=>x>=80?"#10b981":x>=60?"#f59e0b":"#ef4444";if(!t)return null;const v=[{id:"overview",label:"Overview",icon:z$},{id:"code",label:"Code Analysis",icon:Yn},{id:"aptitude",label:"Aptitude",icon:Zr},{id:"proctoring",label:"Proctoring",icon:An},{id:"insights",label:"AI Insights",icon:il}];return lre.createPortal(u.jsx("div",{style:Hn.overlay,onClick:n,children:u.jsxs("div",{style:Hn.modal,onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{style:Hn.header,children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Wa,{size:24,color:"white"})}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:700,color:"white"},children:"Student Performance Report"}),u.jsx("p",{style:{margin:0,fontSize:"14px",color:"#94a3b8"},children:e||"Loading..."})]})]}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o&&u.jsxs("button",{onClick:y,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 18px",background:"linear-gradient(135deg, #10b981, #06b6d4)",border:"none",borderRadius:"10px",color:"white",fontWeight:600,fontSize:"14px",cursor:"pointer"},children:[u.jsx(nW,{size:18})," Download PDF"]}),u.jsx("button",{onClick:n,style:{width:"40px",height:"40px",borderRadius:"10px",border:"none",background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Mr,{size:20})})]})]}),u.jsx("div",{style:Hn.content,children:a?u.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[u.jsx("div",{style:{width:"50px",height:"50px",border:"4px solid rgba(139, 92, 246, 0.3)",borderTop:"4px solid #8b5cf6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}}),u.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),u.jsx("p",{style:{color:"#94a3b8",marginTop:"20px"},children:"Generating report..."})]}):c?u.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[u.jsx(un,{size:50,color:"#ef4444"}),u.jsx("p",{style:{color:"#ef4444",marginTop:"15px"},children:c})]}):o?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:Hn.tabs,children:v.map(x=>u.jsxs("button",{onClick:()=>m(x.id),style:{...Hn.tab,...p===x.id?Hn.tabActive:Hn.tabInactive},children:[u.jsx(x.icon,{size:16}),x.label]},x.id))}),p==="overview"&&u.jsxs("div",{children:[u.jsxs("div",{style:{...Hn.card,display:"flex",alignItems:"center",gap:"20px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[u.jsx("div",{style:{width:"70px",height:"70px",borderRadius:"50%",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"28px",fontWeight:700,color:"white"},children:o.student.name?.charAt(0).toUpperCase()}),u.jsxs("div",{style:{flex:1},children:[u.jsx("h3",{style:{margin:0,fontSize:"22px",color:"white"},children:o.student.name}),u.jsx("p",{style:{margin:"5px 0",color:"#94a3b8"},children:o.student.email}),o.mentor&&u.jsxs("p",{style:{margin:0,color:"#8b5cf6"},children:["Mentor: ",o.mentor.name]})]}),u.jsxs("div",{style:{textAlign:"right"},children:[u.jsxs("div",{style:{fontSize:"42px",fontWeight:800,color:b(o.summary.overallAvgScore)},children:[o.summary.overallAvgScore,"%"]}),u.jsx("div",{style:{color:"#94a3b8"},children:"Overall Score"})]})]}),u.jsxs("div",{style:Hn.statsGrid,children:[u.jsx(C1,{icon:es,value:`#${o.summary.leaderboardRank}`,label:`of ${o.summary.totalStudents}`,color:"#f59e0b"}),u.jsx(C1,{icon:Yn,value:o.summary.codeSubmissions,label:"Code Submissions",color:"#3b82f6"}),u.jsx(C1,{icon:Zr,value:o.summary.aptitudeTests,label:"Aptitude Tests",color:"#8b5cf6"}),u.jsx(C1,{icon:Tu,value:o.summary.totalSubmissions,label:"Total Activities",color:"#10b981"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"15px"},children:[u.jsx(kA,{title:"Code Performance",score:o.summary.avgCodeScore,details:[{label:"Submissions",value:o.summary.codeSubmissions},{label:"Problems Solved",value:o.summary.completedProblems}]}),u.jsx(kA,{title:"Task Performance",score:o.summary.avgTaskScore,details:[{label:"Submissions",value:o.summary.taskSubmissions},{label:"Tasks Done",value:o.summary.completedTasks}]}),u.jsx(kA,{title:"Aptitude Performance",score:o.summary.avgAptitudeScore,details:[{label:"Tests Taken",value:o.summary.aptitudeTests},{label:"Pass Rate",value:`${o.aptitudeResults?.length>0?Math.round(o.aptitudeResults.filter(x=>x.status==="passed").length/o.aptitudeResults.length*100):0}%`}]})]})]}),p==="code"&&u.jsxs("div",{children:[u.jsxs("div",{style:Hn.card,children:[u.jsxs("h3",{style:{margin:"0 0 15px",color:"white",display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx(kre,{size:20,color:"#3b82f6"})," Language Proficiency"]}),u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:o.languageBreakdown?.length>0?o.languageBreakdown.map((x,S)=>u.jsxs("div",{style:{padding:"15px 20px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"10px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[u.jsx("div",{style:{fontWeight:700,color:"white"},children:x.language}),u.jsxs("div",{style:{fontSize:"14px",color:"#94a3b8"},children:[x.count," submissions  ",x.avgScore,"%"]})]},S)):u.jsx("p",{style:{color:"#94a3b8"},children:"No submissions yet"})})]}),u.jsxs("div",{style:Hn.card,children:[u.jsxs("h3",{style:{margin:"0 0 15px",color:"white",display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx(vi,{size:20,color:"#8b5cf6"})," Recent Submissions"]}),o.recentSubmissions?.length>0?o.recentSubmissions.slice(0,5).map((x,S)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",padding:"12px",background:"rgba(15, 23, 42, 0.5)",borderRadius:"10px",marginBottom:"10px"},children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:x.status==="accepted"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:x.status==="accepted"?u.jsx(an,{size:20,color:"#10b981"}):u.jsx(Kr,{size:20,color:"#ef4444"})}),u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{fontWeight:600,color:"white"},children:x.title}),u.jsxs("div",{style:{fontSize:"13px",color:"#94a3b8"},children:[x.language,"  ",x.type]})]}),u.jsxs("div",{style:{fontSize:"18px",fontWeight:700,color:b(x.score)},children:[x.score,"%"]})]},S)):u.jsx("p",{style:{color:"#94a3b8"},children:"No submissions yet"})]})]}),p==="aptitude"&&u.jsxs("div",{children:[o.categoryAnalysis?.length>0&&u.jsxs("div",{style:Hn.card,children:[u.jsxs("h3",{style:{margin:"0 0 15px",color:"white",display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx(Xr,{size:20,color:"#8b5cf6"})," Category Performance"]}),o.categoryAnalysis.map((x,S)=>u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[u.jsx("span",{style:{color:"white"},children:x.category}),u.jsxs("span",{style:{color:b(x.accuracy)},children:[x.correct,"/",x.total," (",x.accuracy,"%)"]})]}),u.jsx("div",{style:{height:"8px",background:"rgba(30, 41, 59, 0.8)",borderRadius:"4px"},children:u.jsx("div",{style:{width:`${x.accuracy}%`,height:"100%",background:b(x.accuracy),borderRadius:"4px"}})})]},S))]}),u.jsxs("div",{style:Hn.card,children:[u.jsxs("h3",{style:{margin:"0 0 15px",color:"white",display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx(Zr,{size:20,color:"#8b5cf6"})," Test History"]}),o.aptitudeResults?.length>0?o.aptitudeResults.map((x,S)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",padding:"12px",background:"rgba(15, 23, 42, 0.5)",borderRadius:"10px",marginBottom:"10px"},children:[u.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"10px",background:x.status==="passed"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f97316)",display:"flex",alignItems:"center",justifyContent:"center"},children:x.status==="passed"?u.jsx(mi,{size:22,color:"white"}):u.jsx(Kr,{size:22,color:"white"})}),u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{fontWeight:600,color:"white"},children:x.testTitle||"Unknown Test"}),u.jsxs("div",{style:{fontSize:"13px",color:"#94a3b8"},children:[x.difficulty,"  ",new Date(x.submittedAt).toLocaleDateString()]})]}),u.jsxs("div",{style:{padding:"6px 14px",borderRadius:"8px",fontWeight:700,background:x.status==="passed"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:x.status==="passed"?"#10b981":"#ef4444"},children:[x.score,"%"]})]},S)):u.jsx("p",{style:{color:"#94a3b8",textAlign:"center",padding:"30px"},children:"No aptitude tests taken yet"})]})]}),p==="proctoring"&&u.jsxs("div",{children:[u.jsxs("div",{style:{...Hn.card,textAlign:"center",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[u.jsx(An,{size:30,color:"#3b82f6",style:{marginBottom:"10px"}}),u.jsx("h3",{style:{margin:0,color:"white"},children:"Proctoring Summary"}),u.jsx("p",{style:{margin:"5px 0 0",color:"#94a3b8"},children:"Monitoring data from assessments"})]}),u.jsxs("div",{style:Hn.statsGrid,children:[u.jsx(k1,{label:"Tab Switches",value:o.integrity?.tabSwitches||0,severity:o.integrity?.tabSwitches>5?"high":o.integrity?.tabSwitches>2?"medium":"low"}),u.jsx(k1,{label:"Copy/Paste",value:o.integrity?.copyPasteAttempts||0,severity:o.integrity?.copyPasteAttempts>3?"high":o.integrity?.copyPasteAttempts>1?"medium":"low"}),u.jsx(k1,{label:"Camera Issues",value:o.integrity?.cameraBlocked||0,severity:o.integrity?.cameraBlocked>2?"high":o.integrity?.cameraBlocked>0?"medium":"low"}),u.jsx(k1,{label:"Plagiarism Flags",value:o.integrity?.plagiarismCount||0,severity:o.integrity?.plagiarismCount>0?"high":"low"})]})]}),p==="insights"&&u.jsx("div",{children:o.aiInsights?u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{...Hn.card,background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(6, 182, 212, 0.1))",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"},children:[u.jsx(il,{size:24,color:"#8b5cf6"}),u.jsx("h3",{style:{margin:0,color:"white"},children:"AI Analysis"})]}),u.jsx("p",{style:{margin:0,color:"#e2e8f0",lineHeight:1.7},children:o.aiInsights.overallAssessment})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"15px",marginBottom:"15px"},children:[u.jsxs("div",{style:{...Hn.card,background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[u.jsxs("h4",{style:{margin:"0 0 12px",color:"#10b981",display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx(Ose,{size:18})," Strengths"]}),u.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:"#e2e8f0"},children:o.aiInsights.strengths?.map((x,S)=>u.jsx("li",{style:{marginBottom:"8px"},children:x},S))})]}),u.jsxs("div",{style:{...Hn.card,background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[u.jsxs("h4",{style:{margin:"0 0 12px",color:"#f59e0b",display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx(U$,{size:18})," Areas for Growth"]}),u.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:"#e2e8f0"},children:o.aiInsights.areasForImprovement?.map((x,S)=>u.jsx("li",{style:{marginBottom:"8px"},children:x},S))})]})]}),u.jsxs("div",{style:Hn.card,children:[u.jsxs("h4",{style:{margin:"0 0 12px",color:"#3b82f6",display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx(L$,{size:18})," Recommendations"]}),o.aiInsights.recommendations?.map((x,S)=>u.jsxs("div",{style:{display:"flex",gap:"12px",padding:"12px",background:"rgba(30, 41, 59, 0.5)",borderRadius:"10px",marginBottom:"10px"},children:[u.jsx("span",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:700,color:"white",flexShrink:0},children:S+1}),u.jsx("span",{style:{color:"#e2e8f0"},children:x})]},S))]})]}):u.jsxs("div",{style:{textAlign:"center",padding:"60px"},children:[u.jsx(il,{size:50,style:{opacity:.3,color:"#94a3b8"}}),u.jsx("p",{style:{color:"#94a3b8",marginTop:"15px"},children:"AI insights not available"})]})})]}):null}),o&&u.jsxs("div",{style:Hn.footer,children:[u.jsxs("span",{children:["Generated: ",new Date(o.generatedAt).toLocaleString()]}),u.jsxs("span",{children:["Requested by: ",o.requestedBy||"System"]})]})]})}),document.body)}function C1({icon:t,value:e,label:n,color:r}){return u.jsxs("div",{style:{...Hn.statBox,background:`${r}15`,border:`1px solid ${r}30`},children:[u.jsx(t,{size:24,color:r,style:{marginBottom:"8px"}}),u.jsx("div",{style:{fontSize:"26px",fontWeight:800,color:r},children:e}),u.jsx("div",{style:{fontSize:"13px",color:"#94a3b8"},children:n})]})}function kA({title:t,score:e,details:n}){const r=s=>s>=80?"#10b981":s>=60?"#f59e0b":"#ef4444";return u.jsxs("div",{style:Hn.card,children:[u.jsx("div",{style:{fontWeight:600,color:"white",marginBottom:"10px"},children:t}),u.jsxs("div",{style:{fontSize:"36px",fontWeight:800,color:r(e),marginBottom:"12px"},children:[e,"%"]}),n.map((s,a)=>u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",marginBottom:"6px"},children:[u.jsx("span",{style:{color:"#94a3b8"},children:s.label}),u.jsx("span",{style:{fontWeight:600,color:"white"},children:s.value})]},a))]})}function k1({label:t,value:e,severity:n}){const s={low:"#10b981",medium:"#f59e0b",high:"#ef4444"}[n];return u.jsxs("div",{style:{...Hn.statBox,background:`${s}10`,border:`1px solid ${s}30`},children:[u.jsx("div",{style:{fontSize:"32px",fontWeight:800,color:s},children:e}),u.jsx("div",{style:{fontSize:"13px",color:"#94a3b8",marginTop:"5px"},children:t})]})}const N1="https://mentor-hub-backend-tkil.onrender.com/api";function GJ({problemId:t,problemTitle:e,isReadOnly:n=!1,onClose:r}){const[s,a]=T.useState([]),[i,o]=T.useState(!0),[l,c]=T.useState({input:"",expectedOutput:"",isHidden:!1,points:10,description:""}),[f,p]=T.useState(!1),[m,y]=T.useState(null),[b,v]=T.useState({});T.useEffect(()=>{x()},[t]);const x=async()=>{try{const I=await Ve.get(`${N1}/problems/${t}/test-cases?role=mentor`);a(I.data),o(!1)}catch(I){console.error("Error fetching test cases:",I),o(!1)}},S=async()=>{try{await Ve.post(`${N1}/problems/${t}/test-cases`,l),c({input:"",expectedOutput:"",isHidden:!1,points:10,description:""}),p(!1),x()}catch{alert("Error adding test case")}},C=async I=>{try{await Ve.put(`${N1}/test-cases/${I}`,b),y(null),x()}catch{alert("Error updating test case")}},E=async I=>{if(window.confirm("Delete this test case?"))try{await Ve.delete(`${N1}/test-cases/${I}`),x()}catch{alert("Error deleting test case")}},k=I=>{y(I.id),v({input:I.input,expectedOutput:I.expectedOutput,isHidden:I.isHidden,points:I.points,description:I.description})};return i?u.jsx("div",{className:"loading-spinner"}):u.jsx("div",{className:"modal-overlay",onClick:r,children:u.jsxs("div",{className:"modal-content",onClick:I=>I.stopPropagation(),style:{maxWidth:"900px",maxHeight:"85vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title-with-icon",children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #10b981, #059669)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(an,{size:20,color:"white"})}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0},children:"Test Cases Manager"}),e&&u.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.85rem",color:"var(--text-muted)"},children:e})]})]}),u.jsx("button",{onClick:r,className:"modal-close",children:u.jsx(Mr,{size:20})})]}),u.jsxs("div",{className:"modal-body",style:{flex:1,overflow:"auto",padding:"1.5rem"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[u.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"1rem",borderRadius:"10px",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#3b82f6"},children:s.length}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Total Test Cases"})]}),u.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",padding:"1rem",borderRadius:"10px",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#10b981"},children:s.filter(I=>!I.isHidden).length}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Visible"})]}),u.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",padding:"1rem",borderRadius:"10px",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"#ef4444"},children:s.filter(I=>I.isHidden).length}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Hidden"})]})]}),!n&&!f&&u.jsxs("button",{onClick:()=>p(!0),style:{width:"100%",padding:"1rem",background:"rgba(59, 130, 246, 0.1)",border:"2px dashed rgba(59, 130, 246, 0.3)",borderRadius:"10px",color:"#3b82f6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.9rem",fontWeight:600,marginBottom:"1.5rem"},children:[u.jsx(pa,{size:18})," Add Test Case"]}),f&&u.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[u.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(pa,{size:16})," New Test Case"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Input"}),u.jsx("textarea",{rows:"3",placeholder:"Enter test input...",value:l.input,onChange:I=>c({...l,input:I.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Expected Output"}),u.jsx("textarea",{rows:"3",placeholder:"Enter expected output...",value:l.expectedOutput,onChange:I=>c({...l,expectedOutput:I.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Description (optional)"}),u.jsx("input",{type:"text",placeholder:"e.g., Edge case with empty array",value:l.description,onChange:I=>c({...l,description:I.target.value})})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Points"}),u.jsx("input",{type:"number",min:"1",max:"100",value:l.points,onChange:I=>c({...l,points:parseInt(I.target.value)||10})})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Visibility"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.5rem"},children:[u.jsx("input",{type:"checkbox",id:"isHidden",checked:l.isHidden,onChange:I=>c({...l,isHidden:I.target.checked}),style:{width:"18px",height:"18px",accentColor:"#ef4444"}}),u.jsxs("label",{htmlFor:"isHidden",style:{cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.isHidden?u.jsx(Z1,{size:16,color:"#ef4444"}):u.jsx(An,{size:16,color:"#10b981"}),l.isHidden?"Hidden":"Visible"]})]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[u.jsx("button",{onClick:()=>p(!1),style:{padding:"0.5rem 1rem",background:"var(--bg-dark)",border:"none",borderRadius:"6px",color:"var(--text-muted)",cursor:"pointer"},children:"Cancel"}),u.jsxs("button",{onClick:S,style:{padding:"0.5rem 1rem",background:"var(--primary)",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(pa,{size:16})," Add Test Case"]})]})]}),s.length===0?u.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-muted)"},children:[u.jsx(un,{size:48,style:{marginBottom:"1rem",opacity:.5}}),u.jsx("h3",{children:"No Test Cases"}),u.jsx("p",{children:"Add test cases to enable automated grading"})]}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:s.map((I,$)=>u.jsx("div",{style:{background:"var(--bg-card)",border:`1px solid ${I.isHidden?"rgba(239, 68, 68, 0.3)":"var(--border-color)"}`,borderRadius:"10px",padding:"1rem",position:"relative"},children:m===I.id?u.jsxs("div",{children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Input"}),u.jsx("textarea",{rows:"3",value:b.input,onChange:_=>v({...b,input:_.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Expected Output"}),u.jsx("textarea",{rows:"3",value:b.expectedOutput,onChange:_=>v({...b,expectedOutput:_.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}})]})]}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[u.jsx("button",{onClick:()=>y(null),style:{padding:"0.4rem 0.75rem",background:"var(--bg-dark)",border:"none",borderRadius:"6px",color:"var(--text-muted)",cursor:"pointer"},children:"Cancel"}),u.jsxs("button",{onClick:()=>C(I.id),style:{padding:"0.4rem 0.75rem",background:"var(--primary)",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(rW,{size:14})," Save"]})]})]}):u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("span",{style:{width:"24px",height:"24px",background:"var(--primary)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:700},children:$+1}),u.jsx("span",{style:{fontWeight:600},children:I.description||`Test Case ${$+1}`}),u.jsxs("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,background:I.isHidden?"rgba(239, 68, 68, 0.15)":"rgba(16, 185, 129, 0.15)",color:I.isHidden?"#ef4444":"#10b981",display:"flex",alignItems:"center",gap:"4px"},children:[I.isHidden?u.jsx(Z1,{size:10}):u.jsx(An,{size:10}),I.isHidden?"Hidden":"Visible"]}),u.jsxs("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,background:"rgba(251, 191, 36, 0.15)",color:"#fbbf24"},children:[I.points," pts"]})]}),!n&&u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{onClick:()=>k(I),style:{padding:"0.4rem",background:"rgba(59, 130, 246, 0.1)",border:"none",borderRadius:"6px",color:"#3b82f6",cursor:"pointer"},children:u.jsx(Yn,{size:14})}),u.jsx("button",{onClick:()=>E(I.id),style:{padding:"0.4rem",background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"6px",color:"#ef4444",cursor:"pointer"},children:u.jsx(Iu,{size:14})})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Input:"}),u.jsx("code",{style:{display:"block",padding:"0.5rem",background:"var(--bg-dark)",borderRadius:"6px",fontSize:"0.8rem",whiteSpace:"pre-wrap",maxHeight:"80px",overflow:"auto"},children:I.input||"(empty)"})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginBottom:"0.25rem"},children:"Expected Output:"}),u.jsx("code",{style:{display:"block",padding:"0.5rem",background:"var(--bg-dark)",borderRadius:"6px",fontSize:"0.8rem",color:"#4ade80",whiteSpace:"pre-wrap",maxHeight:"80px",overflow:"auto"},children:I.expectedOutput})]})]})]})},I.id))})]})]})})}const Hi="https://mentor-hub-backend-tkil.onrender.com/api",jd=["#3b82f6","#8b5cf6","#06b6d4","#10b981","#f59e0b"];function QKe(){const{user:t}=Zm(),e=Ao(),[n,r]=T.useState("Dashboard"),[s,a]=T.useState("Welcome back!");T.useEffect(()=>{switch(e.pathname.split("/").pop()){case"upload-tasks":r("Upload ML Tasks"),a("Create machine learning tasks for students");break;case"upload-problems":r("Upload Problems"),a("Create coding/SQL problems");break;case"leaderboard":r("Leaderboard"),a("Student rankings");break;case"all-submissions":r("All Submissions"),a("Review student work with AI evaluation");break;default:r("Dashboard"),a(`Welcome back, ${t?.name}!`)}},[e,t]);const i=[{path:"/mentor",label:"Dashboard",icon:u.jsx(M$,{size:20})},{path:"/mentor/upload-tasks",label:"Upload ML Tasks",icon:u.jsx($y,{size:20})},{path:"/mentor/upload-problems",label:"Upload Problems",icon:u.jsx(Ep,{size:20})},{path:"/mentor/leaderboard",label:"Leaderboard",icon:u.jsx(es,{size:20})},{path:"/mentor/all-submissions",label:"All Submissions",icon:u.jsx(F$,{size:20})}];return u.jsx(W$,{navItems:i,title:n,subtitle:s,children:u.jsxs(AS,{children:[u.jsx(On,{path:"/",element:u.jsx(ZKe,{user:t})}),u.jsx(On,{path:"/upload-tasks",element:u.jsx(JKe,{user:t})}),u.jsx(On,{path:"/upload-problems",element:u.jsx(eXe,{user:t})}),u.jsx(On,{path:"/leaderboard",element:u.jsx(tXe,{user:t})}),u.jsx(On,{path:"/all-submissions",element:u.jsx(nXe,{user:t})})]})})}function ZKe({user:t}){const[e,n]=T.useState(null),[r,s]=T.useState(!0);T.useEffect(()=>{Ve.get(`${Hi}/analytics/mentor/${t.id}`).then(i=>{n(i.data),s(!1)}).catch(i=>s(!1))},[t.id]);const a=i=>{if(!i)return"Never";const o=new Date(i),c=new Date-o,f=Math.floor(c/6e4),p=Math.floor(f/60),m=Math.floor(p/24);return f<1?"Just now":f<60?`${f}m ago`:p<24?`${p}h ago`:m<7?`${m}d ago`:o.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return r?u.jsx("div",{className:"loading-spinner"}):e?u.jsxs("div",{className:"dashboard-container animate-fadeIn",children:[u.jsxs("div",{className:"dashboard-stats-grid",style:{gridTemplateColumns:"repeat(6, 1fr)"},children:[u.jsx("div",{className:"dashboard-stat-card stat-card-blue",children:u.jsxs("div",{className:"stat-card-inner",children:[u.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #1e40af, #3b82f6)"},children:u.jsx(Gh,{size:22,color:"#fff"})}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-number",children:e.totalStudents}),u.jsx("div",{className:"stat-label-text",children:"Students"})]})]})}),u.jsx("div",{className:"dashboard-stat-card stat-card-purple",children:u.jsxs("div",{className:"stat-card-inner",children:[u.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #6d28d9, #8b5cf6)"},children:u.jsx(Wa,{size:22,color:"#fff"})}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-number",children:e.taskSubmissions||0}),u.jsx("div",{className:"stat-label-text",children:"Task Subs"})]})]})}),u.jsx("div",{className:"dashboard-stat-card stat-card-emerald",children:u.jsxs("div",{className:"stat-card-inner",children:[u.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #059669, #10b981)"},children:u.jsx(Yn,{size:22,color:"#fff"})}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-number",children:e.codeSubmissions||0}),u.jsx("div",{className:"stat-label-text",children:"Code Subs"})]})]})}),u.jsx("div",{className:"dashboard-stat-card stat-card-pink",children:u.jsxs("div",{className:"stat-card-inner",children:[u.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #be185d, #ec4899)"},children:u.jsx(Zr,{size:22,color:"#fff"})}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-number",children:e.aptitudeSubmissions||0}),u.jsx("div",{className:"stat-label-text",children:"Aptitude"})]})]})}),u.jsx("div",{className:"dashboard-stat-card stat-card-green",children:u.jsxs("div",{className:"stat-card-inner",children:[u.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #047857, #10b981)"},children:u.jsx(an,{size:22,color:"#fff"})}),u.jsxs("div",{className:"stat-content",children:[u.jsxs("div",{className:"stat-number",children:[e.avgScore,"%"]}),u.jsx("div",{className:"stat-label-text",children:"Avg Score"})]})]})}),u.jsx("div",{className:"dashboard-stat-card stat-card-orange",children:u.jsxs("div",{className:"stat-card-inner",children:[u.jsx("div",{className:"stat-icon-box",style:{background:"linear-gradient(135deg, #c2410c, #f97316)"},children:u.jsx(U$,{size:22,color:"#fff"})}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-number",children:e.totalTasks+e.totalProblems}),u.jsx("div",{className:"stat-label-text",children:"Content"})]})]})})]}),u.jsxs("div",{className:"mentor-charts-grid",children:[u.jsxs("div",{className:"dashboard-panel mentor-chart-large",children:[u.jsx("div",{className:"chart-header",children:u.jsxs("div",{children:[u.jsxs("h3",{className:"panel-title",style:{marginBottom:"0.25rem"},children:[u.jsx(P$,{size:18,color:"#8b5cf6"})," Group Submission Trends"]}),u.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",margin:0},children:"Last 7 days mentee activity"})]})}),u.jsx("div",{style:{width:"100%",height:"280px",marginTop:"1rem"},children:u.jsx(Xw,{children:u.jsxs(VJ,{data:e.submissionTrends,children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"colorCountMentor",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.4}),u.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})}),u.jsx(I5,{dataKey:"date",stroke:"var(--text-muted)",fontSize:12,axisLine:!1,tickLine:!1}),u.jsx(A5,{stroke:"var(--text-muted)",fontSize:12,axisLine:!1,tickLine:!1}),u.jsx(xS,{contentStyle:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},itemStyle:{color:"#8b5cf6"},labelStyle:{color:"var(--text)"}}),u.jsx(E5,{type:"monotone",dataKey:"count",stroke:"#8b5cf6",strokeWidth:3,fillOpacity:1,fill:"url(#colorCountMentor)"})]})})})]}),u.jsxs("div",{className:"dashboard-panel mentor-chart-small",children:[u.jsx("div",{className:"chart-header",children:u.jsxs("div",{children:[u.jsxs("h3",{className:"panel-title",style:{marginBottom:"0.25rem"},children:[u.jsx(Yn,{size:18,color:"#3b82f6"})," Language Usage"]}),u.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",margin:0},children:"Mentee preference"})]})}),u.jsxs("div",{style:{width:"100%",height:"280px",marginTop:"1rem"},children:[u.jsx(Xw,{children:u.jsxs(WJ,{children:[u.jsx(v5,{data:e.languageStats,cx:"50%",cy:"50%",innerRadius:65,outerRadius:90,paddingAngle:4,dataKey:"value",stroke:"none",children:e.languageStats.map((i,o)=>u.jsx(Ix,{fill:jd[o%jd.length]},`cell-${o}`))}),u.jsx(xS,{contentStyle:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px"},itemStyle:{color:"var(--text)"}})]})}),u.jsx("div",{className:"language-legend",children:e.languageStats.slice(0,4).map((i,o)=>u.jsxs("div",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot",style:{background:jd[o]}}),u.jsx("span",{className:"legend-text",children:i.name})]},i.name))})]})]})]}),u.jsxs("div",{className:"mentor-bottom-grid",children:[u.jsxs("div",{className:"dashboard-panel",children:[u.jsxs("div",{className:"panel-header",children:[u.jsxs("h3",{className:"panel-title",style:{margin:0},children:[u.jsx(Gh,{size:18,color:"#3b82f6"})," My Students"]}),u.jsx("span",{className:"student-count-badge",children:e.allocatedStudents?.length||0})]}),u.jsx("div",{className:"students-list",children:e.allocatedStudents&&e.allocatedStudents.length>0?e.allocatedStudents.map((i,o)=>u.jsxs("div",{className:"student-item",children:[u.jsx("div",{className:"student-avatar",style:{background:`linear-gradient(135deg, ${jd[o%jd.length]}, ${jd[(o+1)%jd.length]})`},children:i.name.charAt(0).toUpperCase()}),u.jsxs("div",{className:"student-info",children:[u.jsx("div",{className:"student-name",children:i.name}),u.jsxs("div",{className:"student-meta",children:[u.jsxs("span",{children:[u.jsx(KU,{size:12})," ",i.tasksCompleted," tasks"]}),u.jsxs("span",{children:[u.jsx(Yn,{size:12})," ",i.problemsCompleted," problems"]})]})]}),u.jsxs("div",{className:"student-score-badge",style:{background:i.avgScore>=70?"rgba(16, 185, 129, 0.15)":i.avgScore>=40?"rgba(251, 191, 36, 0.15)":"rgba(239, 68, 68, 0.15)",color:i.avgScore>=70?"#10b981":i.avgScore>=40?"#fbbf24":"#ef4444"},children:[i.avgScore,"%"]})]},i.id)):u.jsxs("div",{className:"empty-state-small",children:[u.jsx(Gh,{size:32,color:"var(--text-muted)"}),"No students allocated"]})})]}),u.jsxs("div",{className:"dashboard-panel",children:[u.jsx("div",{className:"panel-header",children:u.jsxs("h3",{className:"panel-title",style:{margin:0},children:[u.jsx(Tu,{size:18,color:"#8b5cf6"})," Recent Activity"]})}),u.jsx("div",{className:"submissions-list",children:e.recentActivity&&e.recentActivity.length>0?e.recentActivity.map((i,o)=>u.jsxs("div",{className:"submission-item",children:[u.jsx("div",{className:`activity-status-dot ${i.status}`}),u.jsxs("div",{className:"submission-info",children:[u.jsx("div",{className:"submission-title",children:i.studentName}),u.jsxs("div",{className:"submission-meta",children:[u.jsx(vi,{size:12})," ",a(i.time)]})]}),u.jsxs("span",{className:`submission-status ${i.status}`,children:[i.score,"%"]})]},i.id)):u.jsxs("div",{className:"empty-state-small",children:[u.jsx(Tu,{size:32,color:"var(--text-muted)"}),"No recent activity"]})})]}),u.jsxs("div",{className:"dashboard-panel",children:[u.jsx("div",{className:"panel-header",children:u.jsxs("h3",{className:"panel-title",style:{margin:0},children:[u.jsx(es,{size:18,color:"#fbbf24"})," Top Performers"]})}),u.jsx("div",{className:"leaderboard-list",children:e.menteePerformance&&e.menteePerformance.length>0?e.menteePerformance.map((i,o)=>u.jsxs("div",{className:"leaderboard-item",children:[u.jsx("div",{className:`rank-badge rank-${o+1}`,children:o+1}),u.jsxs("div",{className:"leaderboard-info",children:[u.jsx("div",{className:"leaderboard-name",children:i.name}),u.jsxs("div",{className:"leaderboard-stats",children:[i.count," submissions"]})]}),u.jsxs("div",{className:`leaderboard-score rank-${o+1}-score`,children:[i.score,"%"]})]},o)):u.jsxs("div",{className:"empty-state-small",children:[u.jsx(es,{size:32,color:"var(--text-muted)"}),"No performers yet"]})})]})]})]}):u.jsx("div",{children:"Error loading stats"})}function JKe({user:t}){const[e,n]=T.useState([]),[r,s]=T.useState([]),[a,i]=T.useState(!0),[o,l]=T.useState(!1),[c,f]=T.useState({title:"",type:"machine_learning",difficulty:"medium",description:"",requirements:"",deadline:""}),p=x=>{f({title:x.title||"",type:x.type||"machine_learning",difficulty:x.difficulty||"medium",description:x.description||"",requirements:x.requirements||"",deadline:c.deadline}),l(!1)},m=async()=>{try{const[x,S]=await Promise.all([Ve.get(`${Hi}/tasks?mentorId=${t.id}`),Ve.get(`${Hi}/mentors/${t.id}/students`)]);n(x.data),s(S.data),i(!1)}catch{i(!1)}};T.useEffect(()=>{m()},[t.id]);const y=async x=>{x.preventDefault();try{await Ve.post(`${Hi}/tasks`,{...c,mentorId:t.id}),f({title:"",type:"machine_learning",difficulty:"medium",description:"",requirements:"",deadline:""}),m()}catch{alert("Error creating task")}},b=async x=>{if(window.confirm("Are you sure you want to delete this task?"))try{await Ve.delete(`${Hi}/tasks/${x}`),m()}catch{alert("Error deleting task")}},v=x=>{const S=x.completedBy?.length||0;return S===0||S>=r.length&&r.length>0};return a?u.jsx("div",{className:"loading-spinner"}):u.jsxs("div",{className:"animate-fadeIn",children:[u.jsxs("div",{className:"card glass",style:{marginBottom:"2rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[u.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",margin:0},children:[u.jsx($y,{size:20,className:"text-primary"})," Create New ML Task"]}),u.jsxs("button",{type:"button",onClick:()=>l(!0),style:{padding:"0.6rem 1.2rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.85rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Va,{size:16})," AI Generate"]})]}),u.jsxs("form",{onSubmit:y,children:[u.jsx("div",{className:"form-grid",children:u.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[u.jsx("label",{children:"Task Title"}),u.jsx("input",{type:"text",placeholder:"e.g., Sentiment Analysis Project",value:c.title,onChange:x=>f({...c,title:x.target.value}),required:!0})]})}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Task Type"}),u.jsxs("select",{value:c.type,onChange:x=>f({...c,type:x.target.value}),children:[u.jsx("option",{value:"machine_learning",children:"Machine Learning"}),u.jsx("option",{value:"deep_learning",children:"Deep Learning"}),u.jsx("option",{value:"data_science",children:"Data Science"}),u.jsx("option",{value:"nlp",children:"NLP"}),u.jsx("option",{value:"computer_vision",children:"Computer Vision"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Difficulty"}),u.jsxs("select",{value:c.difficulty,onChange:x=>f({...c,difficulty:x.target.value}),children:[u.jsx("option",{value:"easy",children:"Easy"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"hard",children:"Hard"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Deadline (Optional)"}),u.jsx("input",{type:"date",value:c.deadline,onChange:x=>f({...c,deadline:x.target.value})})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Task Description"}),u.jsx("textarea",{rows:"4",placeholder:"Describe the task in detail...",value:c.description,onChange:x=>f({...c,description:x.target.value}),required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Requirements (one per line)"}),u.jsx("textarea",{rows:"3",placeholder:`1. Data preprocessing
2. Model training
3. Evaluation`,value:c.requirements,onChange:x=>f({...c,requirements:x.target.value})})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"btn-reset",onClick:()=>f({title:"",type:"machine_learning",difficulty:"medium",description:"",requirements:"",deadline:""}),children:"Reset"}),u.jsxs("button",{type:"submit",className:"btn-create-new",children:[u.jsx(pa,{size:16})," Create Task"]})]})]})]}),u.jsxs("div",{className:"card glass",children:[u.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"24px"},children:[u.jsx(es,{size:20,style:{color:"#f59e0b"}})," Task Leaderboard"]}),u.jsx("div",{className:"table-container",style:{border:"none"},children:u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Task Title"}),u.jsx("th",{children:"Type"}),u.jsx("th",{children:"Difficulty"}),u.jsx("th",{children:"Created"}),u.jsx("th",{children:"Completion"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Actions"})]})}),u.jsx("tbody",{children:e.map(x=>u.jsxs("tr",{children:[u.jsx("td",{style:{fontWeight:600},children:x.title}),u.jsx("td",{children:u.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:x.type?.replace("_"," ").toUpperCase()||"ML"})}),u.jsx("td",{children:u.jsx("span",{className:`difficulty-badge ${x.difficulty?.toLowerCase()}`,children:x.difficulty})}),u.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(x.createdAt).toLocaleDateString()}),u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("div",{style:{width:"80px",height:"6px",background:"var(--border-color)",borderRadius:"3px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${r.length>0?(x.completedBy?.length||0)/r.length*100:0}%`,height:"100%",background:"linear-gradient(90deg, #10b981, #06b6d4)"}})}),u.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[x.completedBy?.length||0,"/",r.length]})]})}),u.jsx("td",{children:u.jsx("span",{className:`status-badge ${x.status}`,children:x.status})}),u.jsx("td",{children:u.jsx("button",{onClick:()=>b(x.id),disabled:!v(x),style:{background:v(x)?"rgba(239, 68, 68, 0.1)":"rgba(148, 163, 184, 0.1)",border:"none",color:v(x)?"#ef4444":"#64748b",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:v(x)?"pointer":"not-allowed",fontSize:"0.8rem"},title:v(x)?"Delete task":"Cannot delete while students are in progress",children:u.jsx(Iu,{size:14})})})]},x.id))})]})})]}),u.jsx(Wk,{context:"task",isOpen:o,onClose:()=>l(!1),onGenerate:p})]})}function eXe({user:t}){const[e,n]=T.useState([]),[r,s]=T.useState([]),[a,i]=T.useState(!0),[o,l]=T.useState(!1),[c,f]=T.useState(!1),[p,m]=T.useState("coding"),[y,b]=T.useState(null),[v,x]=T.useState({title:"",type:"Coding",language:"Python",difficulty:"Medium",description:"",testInput:"",expectedOutput:"",deadline:"",status:"live",sqlSchema:"",expectedQueryResult:"",enableProctoring:!1,enableVideoAudio:!1,disableCopyPaste:!1,trackTabSwitches:!1,maxTabSwitches:3}),S=v.type==="SQL"||v.language==="SQL",C=R=>{const D=R.type==="SQL"||R.language==="SQL";x({title:R.title||"",type:R.type||"Coding",language:R.language||"Python",difficulty:R.difficulty||"Medium",description:R.description||"",testInput:D?"":R.sampleInput||"",expectedOutput:D?"":R.expectedOutput||"",sqlSchema:D&&(R.sqlSchema||R.schema)||"",expectedQueryResult:D&&(R.expectedQueryResult||R.expectedResult)||"",deadline:v.deadline,status:R.status||"live",enableProctoring:v.enableProctoring,enableVideoAudio:v.enableVideoAudio,disableCopyPaste:v.disableCopyPaste,trackTabSwitches:v.trackTabSwitches,maxTabSwitches:v.maxTabSwitches}),f(!1),l(!0)},E=async()=>{try{const[R,D]=await Promise.all([Ve.get(`${Hi}/problems?mentorId=${t.id}`),Ve.get(`${Hi}/mentors/${t.id}/students`)]);n(R.data),s(D.data),i(!1)}catch{i(!1)}};T.useEffect(()=>{E()},[t.id]);const k=async R=>{R.preventDefault();try{await Ve.post(`${Hi}/problems`,{...v,mentorId:t.id}),l(!1),x({title:"",type:"Coding",language:"Python",difficulty:"Medium",description:"",testInput:"",expectedOutput:"",deadline:"",status:"live",enableProctoring:!1,enableVideoAudio:!1,disableCopyPaste:!1,trackTabSwitches:!1,maxTabSwitches:3}),E()}catch{alert("Error creating problem")}},I=async R=>{if(window.confirm("Are you sure you want to delete this problem?"))try{await Ve.delete(`${Hi}/problems/${R}`),E()}catch{alert("Error deleting problem")}},$=R=>{const D=R.completedBy?.length||0;return D===0||D>=r.length&&r.length>0};if(a)return u.jsx("div",{className:"loading-spinner"});const _=e.filter(R=>R.language!=="SQL"&&R.type!=="SQL"),z=e.filter(R=>R.language==="SQL"||R.type==="SQL"),L=p==="coding"?_:z;return u.jsxs("div",{className:"animate-fadeIn",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[u.jsxs("div",{children:[u.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:800,margin:0},children:"Coding Problems"}),u.jsx("p",{style:{color:"var(--text-muted)",margin:"0.25rem 0 0 0"},children:"Manage your problem library (C, C++, Python, Java, SQL)"})]}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[u.jsxs("button",{onClick:()=>f(!0),style:{padding:"0.75rem 1.25rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.9rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Va,{size:18})," AI Generate"]}),u.jsxs("button",{onClick:()=>l(!0),className:"btn-create-new",style:{padding:"0.75rem 1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(pa,{size:20})," Create Manually"]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"12px",width:"fit-content"},children:[u.jsxs("button",{onClick:()=>m("coding"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:p==="coding"?"var(--primary)":"transparent",color:p==="coding"?"white":"var(--text-muted)"},children:[u.jsx(Yn,{size:18}),"Coding Problems",u.jsx("span",{style:{background:p==="coding"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:_.length})]}),u.jsxs("button",{onClick:()=>m("sql"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:p==="sql"?"linear-gradient(135deg, #06b6d4, #0891b2)":"transparent",color:p==="sql"?"white":"var(--text-muted)"},children:[u.jsx(Wa,{size:18}),"SQL Problems",u.jsx("span",{style:{background:p==="sql"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:z.length})]})]}),u.jsxs("div",{className:"card glass",children:[u.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"24px"},children:[u.jsx(es,{size:20,style:{color:"#f59e0b"}})," Problem Leaderboard"]}),u.jsx("div",{className:"table-container",style:{border:"none"},children:u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Problem Title"}),u.jsx("th",{children:"Type"}),u.jsx("th",{children:"Language"}),u.jsx("th",{children:"Difficulty"}),u.jsx("th",{children:"Created"}),u.jsx("th",{children:"Completion"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Actions"})]})}),u.jsx("tbody",{children:L.length===0?u.jsx("tr",{children:u.jsxs("td",{colSpan:"8",style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:["No ",p==="sql"?"SQL":"coding"," problems found. Create one to get started!"]})}):L.map(R=>u.jsxs("tr",{children:[u.jsx("td",{style:{fontWeight:600},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[R.title,R.proctoring?.enabled&&u.jsxs("span",{style:{fontSize:"0.6rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",fontWeight:700,display:"flex",alignItems:"center",gap:"3px"},children:[u.jsx(An,{size:10})," Proctored"]})]})}),u.jsx("td",{children:u.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:R.type?.toUpperCase()})}),u.jsx("td",{children:u.jsx("span",{style:{fontWeight:500},children:R.language})}),u.jsx("td",{children:u.jsx("span",{className:`difficulty-badge ${R.difficulty?.toLowerCase()}`,children:R.difficulty})}),u.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(R.createdAt).toLocaleDateString()}),u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("div",{style:{width:"80px",height:"6px",background:"var(--border-color)",borderRadius:"3px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${r.length>0?(R.completedBy?.length||0)/r.length*100:0}%`,height:"100%",background:"linear-gradient(90deg, #3b82f6, #8b5cf6)"}})}),u.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[R.completedBy?.length||0,"/",r.length]})]})}),u.jsx("td",{children:u.jsx("span",{className:`status-badge ${R.status}`,children:R.status})}),u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsxs("button",{onClick:()=>b(R),disabled:R.language==="SQL"||R.type==="SQL",style:{background:R.language==="SQL"||R.type==="SQL"?"rgba(100, 116, 139, 0.1)":"rgba(16, 185, 129, 0.1)",border:"none",color:R.language==="SQL"||R.type==="SQL"?"#64748b":"#10b981",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:R.language==="SQL"||R.type==="SQL"?"not-allowed":"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px",opacity:R.language==="SQL"||R.type==="SQL"?.5:1},title:R.language==="SQL"||R.type==="SQL"?"Test cases not available for SQL problems":"Manage Test Cases",children:[u.jsx(al,{size:14})," Tests"]}),u.jsx("button",{onClick:()=>I(R.id),disabled:!$(R),style:{background:$(R)?"rgba(239, 68, 68, 0.1)":"rgba(148, 163, 184, 0.1)",border:"none",color:$(R)?"#ef4444":"#64748b",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:$(R)?"pointer":"not-allowed",fontSize:"0.8rem"},title:$(R)?"Delete problem":"Cannot delete while students are in progress",children:u.jsx(Iu,{size:14})})]})})]},R.id))})]})})]}),o&&u.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:u.jsxs("div",{className:"modal-content",onClick:R=>R.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title-with-icon",children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Ep,{size:20,color:"white"})}),u.jsx("h2",{children:"Create New Problem"})]}),u.jsx("button",{onClick:()=>l(!1),className:"modal-close",children:u.jsx(Mr,{size:20})})]}),u.jsx("div",{className:"modal-body premium-form",children:u.jsxs("form",{onSubmit:k,children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Problem Title"}),u.jsx("input",{type:"text",placeholder:"Enter problem title",value:v.title,onChange:R=>x({...v,title:R.target.value}),required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Problem Type"}),u.jsxs("select",{value:v.type,onChange:R=>{const D=R.target.value;x({...v,type:D,language:D==="SQL"?"SQL":v.language==="SQL"?"Python":v.language})},children:[u.jsx("option",{value:"Coding",children:"Coding"}),u.jsx("option",{value:"SQL",children:"SQL"}),u.jsx("option",{value:"Algorithm",children:"Algorithm"})]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Language"}),u.jsxs("select",{value:v.language,onChange:R=>{const D=R.target.value;x({...v,language:D,type:D==="SQL"?"SQL":v.type==="SQL"?"Coding":v.type})},children:[u.jsx("option",{value:"Python",children:"Python"}),u.jsx("option",{value:"JavaScript",children:"JavaScript"}),u.jsx("option",{value:"Java",children:"Java"}),u.jsx("option",{value:"C",children:"C"}),u.jsx("option",{value:"C++",children:"C++"}),u.jsx("option",{value:"SQL",children:"SQL"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Difficulty"}),u.jsxs("select",{value:v.difficulty,onChange:R=>x({...v,difficulty:R.target.value}),children:[u.jsx("option",{value:"Easy",children:"Easy"}),u.jsx("option",{value:"Medium",children:"Medium"}),u.jsx("option",{value:"Hard",children:"Hard"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Status"}),u.jsxs("select",{value:v.status,onChange:R=>x({...v,status:R.target.value}),children:[u.jsx("option",{value:"live",children:"Live"}),u.jsx("option",{value:"draft",children:"Draft"}),u.jsx("option",{value:"closed",children:"Closed"})]})]})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[u.jsx("label",{className:"form-label",children:"Problem Description"}),u.jsx("textarea",{rows:"5",placeholder:"Describe the problem...",value:v.description,onChange:R=>x({...v,description:R.target.value}),required:!0})]}),S?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[u.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Yn,{size:14,color:"#06b6d4"})," Database Schema (CREATE TABLE statements)"]}),u.jsx("textarea",{rows:"6",placeholder:`CREATE TABLE employees (
  id INT PRIMARY KEY,
  name VARCHAR(100),
  department VARCHAR(50),
  salary DECIMAL(10,2)
);

INSERT INTO employees VALUES (1, 'John', 'IT', 50000);`,value:v.sqlSchema,onChange:R=>x({...v,sqlSchema:R.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}}),u.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Include CREATE TABLE and INSERT statements to set up the test database"})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[u.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(an,{size:14,color:"#10b981"})," Expected Query Result"]}),u.jsx("textarea",{rows:"4",placeholder:`id | name | salary
1  | John | 50000
2  | Jane | 60000`,value:v.expectedQueryResult,onChange:R=>x({...v,expectedQueryResult:R.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}}),u.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"The expected output when the correct SQL query is executed"})]})]}):u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Sample Input"}),u.jsx("input",{type:"text",placeholder:"e.g., [1, 2, 3]",value:v.testInput,onChange:R=>x({...v,testInput:R.target.value})})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Expected Output"}),u.jsx("input",{type:"text",placeholder:"e.g., 6",value:v.expectedOutput,onChange:R=>x({...v,expectedOutput:R.target.value})})]})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[u.jsx("label",{className:"form-label",children:"Deadline (Optional)"}),u.jsx("input",{type:"date",value:v.deadline,onChange:R=>x({...v,deadline:R.target.value})})]}),u.jsxs("div",{style:{padding:"1.25rem",background:"rgba(139, 92, 246, 0.05)",borderRadius:"12px",border:"1px solid rgba(139, 92, 246, 0.2)",marginBottom:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[u.jsx(An,{size:18,color:"#8b5cf6"}),u.jsx("span",{style:{fontWeight:600,color:"#8b5cf6"},children:"Proctoring Settings"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[u.jsx("input",{type:"checkbox",id:"enableProctoring",checked:v.enableProctoring,onChange:R=>x({...v,enableProctoring:R.target.checked}),style:{width:"18px",height:"18px",accentColor:"#8b5cf6"}}),u.jsx("label",{htmlFor:"enableProctoring",style:{cursor:"pointer",fontSize:"0.9rem"},children:"Enable Proctoring Mode"})]}),v.enableProctoring&&u.jsxs("div",{style:{marginLeft:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("input",{type:"checkbox",id:"enableVideoAudio",checked:v.enableVideoAudio,onChange:R=>x({...v,enableVideoAudio:R.target.checked}),style:{width:"16px",height:"16px",accentColor:"#8b5cf6"}}),u.jsx("label",{htmlFor:"enableVideoAudio",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:" Enable Video & Audio Monitoring"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("input",{type:"checkbox",id:"disableCopyPaste",checked:v.disableCopyPaste,onChange:R=>x({...v,disableCopyPaste:R.target.checked}),style:{width:"16px",height:"16px",accentColor:"#8b5cf6"}}),u.jsx("label",{htmlFor:"disableCopyPaste",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:" Disable Copy/Paste"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("input",{type:"checkbox",id:"trackTabSwitches",checked:v.trackTabSwitches,onChange:R=>x({...v,trackTabSwitches:R.target.checked}),style:{width:"16px",height:"16px",accentColor:"#8b5cf6"}}),u.jsx("label",{htmlFor:"trackTabSwitches",style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)"},children:" Track Tab Switches"})]}),v.trackTabSwitches&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginLeft:"1.5rem"},children:[u.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:"Max Tab Switches:"}),u.jsx("input",{type:"number",min:"1",max:"10",value:v.maxTabSwitches,onChange:R=>x({...v,maxTabSwitches:parseInt(R.target.value)||3}),style:{width:"60px",padding:"0.25rem 0.5rem",borderRadius:"6px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"white",textAlign:"center"}})]})]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"btn-reset",onClick:()=>l(!1),children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-create-new",children:[u.jsx(pa,{size:16})," Create Problem"]})]})]})})]})}),u.jsx(Wk,{context:"problem",isOpen:c,onClose:()=>f(!1),onGenerate:C}),y&&u.jsx(GJ,{problemId:y.id,problemTitle:y.title,onClose:()=>b(null)})]})}function tXe({user:t}){const[e,n]=T.useState([]),[r,s]=T.useState(!0),[a,i]=T.useState(null);if(T.useEffect(()=>{Ve.get(`${Hi}/leaderboard?mentorId=${t.id}`).then(f=>{n(f.data),s(!1)}).catch(f=>s(!1))},[t.id]),r)return u.jsx("div",{className:"loading-spinner"});const o=f=>f===1?{color:"#fbbf24",transform:"scale(1.2)"}:f===2?{color:"#94a3b8",transform:"scale(1.1)"}:f===3?{color:"#b45309",transform:"scale(1.1)"}:{color:"var(--text-muted)"},l=f=>f===1?u.jsx(es,{size:24,fill:"#fbbf24",color:"#d97706"}):f===2?u.jsx(gP,{size:24,fill:"#e2e8f0",color:"#64748b"}):f===3?u.jsx(gP,{size:24,fill:"#fbbf24",color:"#b45309"}):u.jsxs("span",{style:{fontWeight:600,fontSize:"1.1rem",width:"24px",textAlign:"center",display:"inline-block"},children:["#",f]}),c=f=>f.violations?(f.violations.tabSwitches||0)+(f.violations.copyPaste||0)+(f.violations.cameraBlocked||0)+(f.violations.phoneDetection||0)+(f.violations.integrityViolations||0)+(f.violations.plagiarism||0):0;return u.jsxs("div",{className:"card animate-slideUp glass",style:{padding:"0 0 1rem 0",overflow:"hidden"},children:[u.jsxs("div",{style:{padding:"2rem 2rem 1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx(es,{size:28,className:"text-primary"}),u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0,fontSize:"1.5rem"},children:"Student Leaderboard"}),u.jsx("p",{style:{margin:"4px 0 0",color:"var(--text-muted)",fontSize:"0.9rem"},children:"Rankings based on scores"})]})]}),u.jsx("div",{className:"table-container",style:{border:"none",borderRadius:0},children:u.jsxs("table",{style:{borderCollapse:"separate",borderSpacing:"0 8px",padding:"0 1rem"},children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{style:{paddingLeft:"2rem"},children:"Rank"}),u.jsx("th",{children:"Student"}),u.jsx("th",{children:"Total Score"}),u.jsx("th",{children:"Submissions"}),u.jsx("th",{children:"Violations"}),u.jsx("th",{style:{textAlign:"center"},children:"Status"}),u.jsx("th",{children:"Actions"})]})}),u.jsx("tbody",{children:e.map((f,p)=>{const y=c(f)>0||f.violations?.plagiarism>0;return u.jsxs("tr",{className:"leaderboard-row",style:{backgroundColor:p<3?"var(--bg-dark)":"transparent",transition:"transform 0.2s"},children:[u.jsx("td",{style:{paddingLeft:"2rem"},children:u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem",...o(p+1)},children:l(p+1)})}),u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{className:"avatar-circle",children:f.name.charAt(0).toUpperCase()}),u.jsx("div",{children:u.jsx("div",{style:{fontWeight:600,fontSize:"1rem"},children:f.name})})]})}),u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:700,fontSize:"1.1rem",color:"var(--primary)"},children:[f.avgScore," ",u.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)",fontWeight:400},children:"pts"})]})}),u.jsx("td",{children:u.jsxs("div",{className:"status-badge live",style:{width:"fit-content"},children:[f.acceptedSubmissions||f.totalSubmissions," Submitted"]})}),u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[f.violations?.tabSwitches>0&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",display:"flex",alignItems:"center",gap:"3px"},title:"Tab Switches",children:[u.jsx(An,{size:10})," ",f.violations.tabSwitches]}),f.violations?.cameraBlocked>0&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"3px"},title:"Camera Blocked",children:[" ",f.violations.cameraBlocked]}),f.violations?.phoneDetection>0&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"3px"},title:"Phone Detected",children:[" ",f.violations.phoneDetection]}),f.violations?.copyPaste>0&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",display:"flex",alignItems:"center",gap:"3px"},title:"Copy/Paste",children:[" ",f.violations.copyPaste]}),f.violations?.plagiarism>0&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"3px"},title:"Plagiarism",children:[u.jsx(un,{size:10})," ",f.violations.plagiarism]}),!y&&u.jsx("span",{style:{color:"#10b981"},children:u.jsx(an,{size:14})})]})}),u.jsx("td",{style:{textAlign:"center"},children:u.jsx("div",{style:{width:"100px",height:"6px",backgroundColor:"var(--border-color)",borderRadius:"10px",margin:"0 auto",overflow:"hidden"},children:u.jsx("div",{style:{width:`${Math.min(f.avgScore,100)}%`,height:"100%",backgroundColor:y?"#f59e0b":p===0?"#fbbf24":"var(--primary)"}})})}),u.jsx("td",{children:u.jsxs("button",{onClick:()=>i({id:f.studentId,name:f.name}),style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.5rem 0.85rem",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.75rem",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.3)"},title:"Generate comprehensive report",children:[u.jsx(Wa,{size:14}),"Report"]})})]},f.studentId)})})]})}),a&&u.jsx(qJ,{studentId:a.id,studentName:a.name,onClose:()=>i(null),requestedBy:t?.name||"Mentor",requestedByRole:"mentor"})]})}function nXe({user:t}){const[e,n]=T.useState([]),[r,s]=T.useState([]),[a,i]=T.useState(!0),[o,l]=T.useState(null),[c,f]=T.useState("all"),[p,m]=T.useState(null),[y,b]=T.useState(""),v=()=>{Promise.all([Ve.get(`${Hi}/submissions?mentorId=${t.id}`),Ve.get(`${Hi}/aptitude-submissions?mentorId=${t.id}`)]).then(([E,k])=>{n((E.data||[]).map(I=>({...I,subType:"code"}))),s((k.data||[]).map(I=>({...I,subType:"aptitude",itemTitle:I.testTitle}))),i(!1)}).catch(E=>i(!1))};T.useEffect(()=>{v()},[t.id]);const x=[...e,...r].sort((E,k)=>new Date(k.submittedAt)-new Date(E.submittedAt)),C=(c==="all"?x:c==="code"?e:r).filter(k=>(k.studentName||"").toLowerCase().includes(y.toLowerCase())||(k.itemTitle||k.testTitle||"").toLowerCase().includes(y.toLowerCase())||k.status.toLowerCase().includes(y.toLowerCase()));return a?u.jsx("div",{className:"loading-spinner"}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsxs("button",{onClick:()=>f("all"),style:{padding:"0.6rem 1.2rem",background:c==="all"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:c==="all"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:c==="all"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:["All (",x.length,")"]}),u.jsxs("button",{onClick:()=>f("code"),style:{padding:"0.6rem 1.2rem",background:c==="code"?"var(--primary)":"rgba(59, 130, 246, 0.1)",border:c==="code"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:c==="code"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:[" Code (",e.length,")"]}),u.jsxs("button",{onClick:()=>f("aptitude"),style:{padding:"0.6rem 1.2rem",background:c==="aptitude"?"#8b5cf6":"rgba(139, 92, 246, 0.1)",border:c==="aptitude"?"none":"1px solid var(--border-color)",borderRadius:"8px",color:c==="aptitude"?"white":"var(--text-muted)",cursor:"pointer",fontWeight:500},children:[" Aptitude (",r.length,")"]})]}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx(B$,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),u.jsx("input",{type:"text",placeholder:"Search student, problem or status...",style:{padding:"0.6rem 1rem 0.6rem 2.5rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"white",width:"280px"},value:y,onChange:E=>b(E.target.value)})]})]}),u.jsx("div",{className:"table-container card glass",children:u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Student"}),u.jsx("th",{children:"Type"}),u.jsx("th",{children:"Problem / Test"}),u.jsx("th",{children:"Language"}),u.jsx("th",{children:"Score"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Submitted At"}),u.jsx("th",{children:"Actions"})]})}),u.jsx("tbody",{children:C.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"3rem"},children:"No submissions found"})}):C.map(E=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsx("div",{style:{fontWeight:600},children:E.studentName})}),u.jsx("td",{children:u.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:E.subType==="aptitude"?"rgba(139, 92, 246, 0.1)":"rgba(59, 130, 246, 0.1)",color:E.subType==="aptitude"?"#8b5cf6":"#3b82f6"},children:E.subType==="aptitude"?" Aptitude":" Code"})}),u.jsx("td",{children:u.jsx("div",{style:{color:"var(--primary)",fontWeight:500},children:E.itemTitle||E.testTitle})}),u.jsx("td",{children:u.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:E.subType==="aptitude"?"N/A":E.language?.toUpperCase()||"N/A"})}),u.jsxs("td",{style:{fontWeight:700,fontSize:"1.1rem"},children:[E.score,"%"]}),u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",alignItems:"center"},children:[u.jsx("span",{className:`status-badge ${E.status}`,children:E.status}),E.plagiarism?.detected&&u.jsxs("span",{className:"status-badge plagiarized",style:{display:"flex",alignItems:"center",gap:"3px"},children:[u.jsx(un,{size:11})," Plag"]}),(E.integrity?.integrityViolation||E.tabSwitches>0)&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[u.jsx(un,{size:10})," ",E.integrity?.tabSwitches||E.tabSwitches||0," Tab"]}),E.cameraBlockedCount>0&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[" ",E.cameraBlockedCount," Cam"]}),E.phoneDetectionCount>0&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[" ",E.phoneDetectionCount," Phone"]})]})}),u.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date(E.submittedAt).toLocaleString()}),u.jsx("td",{children:E.subType==="aptitude"?u.jsxs("button",{onClick:()=>m(E),style:{background:"rgba(139, 92, 246, 0.1)",border:"none",color:"#8b5cf6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx(An,{size:14})," Results"]}):u.jsxs("button",{onClick:()=>l(E),style:{background:"rgba(59, 130, 246, 0.1)",border:"none",color:"#3b82f6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx(An,{size:14})," Report"]})})]},E.id))})]})}),o&&u.jsx(rXe,{submission:o,onClose:()=>l(null)}),p&&u.jsx(K$,{submission:p,onClose:()=>m(null)})]})}function rXe({submission:t,onClose:e}){return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content",onClick:n=>n.stopPropagation(),style:{maxWidth:"900px"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title-with-icon",children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:t.status==="accepted"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f59e0b)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Wa,{size:20,color:"white"})}),u.jsx("h2",{children:"Detailed Submission Report"})]}),u.jsx("button",{onClick:e,className:"modal-close",children:u.jsx(Mr,{size:20})})]}),u.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"rgba(59, 130, 246, 0.05)",borderRadius:"1rem",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Student Name"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600,fontSize:"1.1rem"},children:t.studentName})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submitted At"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:new Date(t.submittedAt).toLocaleString()})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Language"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.language})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submission Type"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.submissionType==="file"?"File Upload":"Code Editor"})]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:`1px solid ${t.status==="accepted"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"3rem",fontWeight:800,color:t.status==="accepted"?"#10b981":"#ef4444"},children:t.score}),u.jsx("div",{style:{color:"var(--text-muted)"},children:"AI Evaluation Score"})]}),u.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"1rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:t.status==="accepted"?"#10b981":"#ef4444",fontWeight:700,fontSize:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.status==="accepted"?u.jsx(an,{size:24}):u.jsx(Mr,{size:24}),t.status?.toUpperCase()]})]}),t.plagiarism?.detected&&u.jsxs("div",{className:"plagiarism-banner",style:{marginBottom:"1.5rem"},children:[u.jsx(un,{size:24,color:"#ef4444"}),u.jsxs("div",{children:[u.jsx("strong",{style:{color:"#ef4444"},children:"Plagiarism Detected"}),u.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["This code matches a submission from ",t.plagiarism.copiedFromName]})]})]}),(t.tabSwitches>0||t.copyPasteAttempts>0||t.cameraBlockedCount>0||t.phoneDetectionCount>0)&&u.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[u.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#f59e0b"},children:[u.jsx(un,{size:18})," Proctoring Violations"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[t.tabSwitches>0&&u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx(An,{size:18,color:"#f59e0b"}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.tabSwitches," Tab Switches"]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.tabSwitches*5,25)," pts"]})]})]}),t.copyPasteAttempts>0&&u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("span",{style:{fontSize:"1.1rem"},children:""}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.copyPasteAttempts," Copy/Paste"]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.copyPasteAttempts*3,15)," pts"]})]})]}),t.cameraBlockedCount>0&&u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("span",{style:{fontSize:"1.1rem"},children:""}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.cameraBlockedCount," Camera Blocked"]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.cameraBlockedCount*10,30)," pts"]})]})]}),t.phoneDetectionCount>0&&u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("span",{style:{fontSize:"1.1rem"},children:""}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.phoneDetectionCount," Phone Detected"]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.phoneDetectionCount*15,45)," pts"]})]})]})]}),t.proctoringVideo&&u.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"1rem"},children:""}),u.jsxs("span",{style:{fontSize:"0.85rem",color:"#3b82f6"},children:["Proctoring video recorded: ",t.proctoringVideo]})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(an,{size:18,color:"#3b82f6"})," AI Feedback"]}),u.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--bg-tertiary)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid var(--border-color)"},children:t.feedback||"No feedback provided."})]}),t.aiExplanation&&u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Tu,{size:18,color:"#8b5cf6"})," AI Explanation (Why this score?)"]}),u.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"rgba(139, 92, 246, 0.05)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid rgba(139, 92, 246, 0.1)"},children:t.aiExplanation})]}),t.analysis&&u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(P$,{size:18,color:"var(--primary)"}),"Detailed Analysis"]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[t.analysis.correctness!==void 0&&u.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[u.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(59, 130, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(an,{size:22,color:"#3b82f6"})}),u.jsxs("div",{style:{flex:1},children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Correctness"}),u.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#3b82f6"},children:t.analysis.correctness})]})]}),t.analysis.efficiency!==void 0&&u.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[u.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(16, 185, 129, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(il,{size:22,color:"#10b981"})}),u.jsxs("div",{style:{flex:1},children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Efficiency"}),u.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#10b981"},children:t.analysis.efficiency})]})]}),t.analysis.codeStyle!==void 0&&u.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[u.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(Yn,{size:22,color:"#8b5cf6"})}),u.jsxs("div",{style:{flex:1},children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Code Style"}),u.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#8b5cf6"},children:t.analysis.codeStyle})]})]}),t.analysis.bestPractices!==void 0&&u.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[u.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(245, 158, 11, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(mi,{size:22,color:"#f59e0b"})}),u.jsxs("div",{style:{flex:1},children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Best Practices"}),u.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#f59e0b"},children:t.analysis.bestPractices})]})]})]})]}),u.jsxs("div",{children:[u.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Submitted Code"}),u.jsx("pre",{style:{background:"#020617",padding:"1.5rem",borderRadius:"0.5rem",overflow:"auto",maxHeight:"300px",fontSize:"0.85rem",fontFamily:"monospace",color:"#e2e8f0",border:"1px solid #334155"},children:t.code})]})]})]})})}const vn="https://mentor-hub-backend-tkil.onrender.com/api",T1=["#3b82f6","#8b5cf6","#06b6d4","#10b981","#f59e0b"],m0="admin-001";function sXe(){const{user:t}=Zm(),e=Ao(),[n,r]=T.useState("Dashboard"),[s,a]=T.useState("System Overview");T.useEffect(()=>{switch(e.pathname.split("/").pop()){case"allocations":r("Allocations"),a("Mentor-Student assignments");break;case"student-leaderboard":r("Student Leaderboard"),a("Top performers");break;case"mentor-leaderboard":r("Mentor Leaderboard"),a("Mentor activity");break;case"all-submissions":r("All Submissions"),a("Platform-wide submissions");break;case"global-tasks":r("Global Tasks"),a("Tasks visible to all users");break;case"global-problems":r("Global Problems"),a("Coding challenges for everyone");break;case"aptitude-tests":r("Aptitude Tests"),a("Manage aptitude tests for all students");break;case"global-tests":r("Global Complete Tests"),a("Aptitude, Verbal, Logical, Coding, SQL  create and manage");break;default:r("Dashboard"),a("System Administration")}},[e]);const i=[{path:"/admin",label:"Dashboard",icon:u.jsx(M$,{size:20})},{path:"/admin/global-tasks",label:"Global Tasks",icon:u.jsx(zd,{size:20})},{path:"/admin/global-problems",label:"Global Problems",icon:u.jsx(Ep,{size:20})},{path:"/admin/aptitude-tests",label:"Aptitude Tests",icon:u.jsx(Xr,{size:20})},{path:"/admin/global-tests",label:"Global Complete Tests",icon:u.jsx(al,{size:20})},{path:"/admin/allocations",label:"Allocations",icon:u.jsx(Gh,{size:20})},{path:"/admin/student-leaderboard",label:"Student Ranks",icon:u.jsx(es,{size:20})},{path:"/admin/mentor-leaderboard",label:"Mentor Ranks",icon:u.jsx(mi,{size:20})},{path:"/admin/all-submissions",label:"All Submissions",icon:u.jsx(F$,{size:20})}];return u.jsx(W$,{navItems:i,title:n,subtitle:s,children:u.jsxs(AS,{children:[u.jsx(On,{path:"/",element:u.jsx(aXe,{})}),u.jsx(On,{path:"/global-tasks",element:u.jsx(dXe,{})}),u.jsx(On,{path:"/global-problems",element:u.jsx(fXe,{})}),u.jsx(On,{path:"/aptitude-tests",element:u.jsx(pXe,{})}),u.jsx(On,{path:"/global-tests",element:u.jsx(hXe,{})}),u.jsx(On,{path:"/allocations",element:u.jsx(iXe,{})}),u.jsx(On,{path:"/student-leaderboard",element:u.jsx(oXe,{})}),u.jsx(On,{path:"/mentor-leaderboard",element:u.jsx(lXe,{})}),u.jsx(On,{path:"/all-submissions",element:u.jsx(cXe,{})})]})})}function aXe(){const[t,e]=T.useState(null),[n,r]=T.useState(!0),[s,a]=T.useState("7d");if(T.useEffect(()=>{Ve.get(`${vn}/analytics/admin`).then(c=>{e(c.data),r(!1)}).catch(c=>r(!1))},[]),n)return u.jsx("div",{className:"loading-spinner"});if(!t)return u.jsx("div",{children:"Error loading stats"});const i=t.totalStudents>0?Math.round(t.totalSubmissions/t.totalStudents*10)/10:0,o=t.mentorCount||Math.ceil(t.totalStudents/15),l=t.recentSubmissions?.length||0;return u.jsxs("div",{className:"animate-fadeIn",children:[u.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 50%, rgba(6, 182, 212, 0.05) 100%)",borderRadius:"20px",padding:"2rem 2.5rem",marginBottom:"2rem",border:"1px solid rgba(59, 130, 246, 0.2)",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%)",pointerEvents:"none"}}),u.jsx("div",{style:{position:"relative",zIndex:1},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(59, 130, 246, 0.3)"},children:u.jsx(of,{size:24,color:"white"})}),u.jsxs("div",{children:[u.jsx("h1",{style:{margin:0,fontSize:"1.75rem",fontWeight:800,background:"linear-gradient(135deg, #fff, #94a3b8)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Admin Control Center"}),u.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.9rem"},children:"Monitor performance, manage content, and track platform health"})]})]})})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden",transition:"all 0.3s ease"},children:[u.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(59, 130, 246, 0.15), transparent 70%)"}}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #1e40af, #3b82f6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:u.jsx(Gh,{size:22,color:"white"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:t.totalStudents}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Total Students"})]})]}),u.jsxs("div",{style:{marginTop:"1rem",padding:"0.35rem 0.75rem",background:"rgba(16, 185, 129, 0.1)",borderRadius:"20px",display:"inline-flex",alignItems:"center",gap:"0.35rem",fontSize:"0.75rem",fontWeight:600,color:"#10b981"},children:[u.jsx(U$,{size:12})," +12% this month"]})]}),u.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(139, 92, 246, 0.15), transparent 70%)"}}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #6d28d9, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:u.jsx(mi,{size:22,color:"white"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:o}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Active Mentors"})]})]}),u.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:["~",Math.round(t.totalStudents/o)," students/mentor"]})]}),u.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(6, 182, 212, 0.15), transparent 70%)"}}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #0891b2, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(6, 182, 212, 0.3)"},children:u.jsx(kl,{size:22,color:"white"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:t.totalSubmissions}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Submissions"})]})]}),u.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:[i," avg per student"]})]}),u.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(16, 185, 129, 0.15), transparent 70%)"}}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #047857, #10b981)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:u.jsx(an,{size:22,color:"white"})}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:[t.successRate,"%"]}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Success Rate"})]})]}),u.jsx("div",{style:{marginTop:"1rem",height:"6px",background:"rgba(16, 185, 129, 0.15)",borderRadius:"3px",overflow:"hidden"},children:u.jsx("div",{style:{height:"100%",width:`${t.successRate}%`,background:"linear-gradient(90deg, #10b981, #06b6d4)",borderRadius:"3px",transition:"width 1s ease"}})})]}),u.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(245, 158, 11, 0.15), transparent 70%)"}}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #d97706, #f59e0b)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:u.jsx(Ep,{size:22,color:"white"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:t.totalContent}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Total Content"})]})]}),u.jsx("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--text-muted)"},children:"Tasks, Problems & Tests"})]}),u.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"radial-gradient(circle at top right, rgba(236, 72, 153, 0.15), transparent 70%)"}}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #be185d, #ec4899)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(236, 72, 153, 0.3)"},children:u.jsx(il,{size:22,color:"white"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--text)"},children:l}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Active Today"})]})]}),u.jsxs("div",{style:{marginTop:"1rem",padding:"0.35rem 0.75rem",background:"rgba(236, 72, 153, 0.1)",borderRadius:"20px",display:"inline-flex",alignItems:"center",gap:"0.35rem",fontSize:"0.75rem",fontWeight:600,color:"#ec4899"},children:[u.jsx(Tu,{size:12})," Live"]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1.5rem",marginBottom:"2rem"},children:[u.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"1.5rem",position:"relative"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Submission Trends"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)"},children:"Platform activity over time"})]}),u.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["7d","30d","90d"].map(c=>u.jsx("button",{onClick:()=>a(c),style:{padding:"0.4rem 0.8rem",fontSize:"0.75rem",fontWeight:600,border:"none",borderRadius:"8px",cursor:"pointer",background:s===c?"linear-gradient(135deg, #3b82f6, #8b5cf6)":"var(--bg-tertiary)",color:s===c?"white":"var(--text-muted)",transition:"all 0.2s ease"},children:c},c))})]}),u.jsx("div",{style:{width:"100%",height:"280px"},children:u.jsx(Xw,{children:u.jsxs(VJ,{data:t.submissionTrends,children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"colorCountAdmin",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.4}),u.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),u.jsx(gJ,{strokeDasharray:"3 3",stroke:"var(--border-color)",vertical:!1}),u.jsx(I5,{dataKey:"date",stroke:"var(--text-muted)",fontSize:11,axisLine:!1,tickLine:!1}),u.jsx(A5,{stroke:"var(--text-muted)",fontSize:11,axisLine:!1,tickLine:!1}),u.jsx(xS,{contentStyle:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.3)"},labelStyle:{color:"var(--text)",fontWeight:600},itemStyle:{color:"#3b82f6"}}),u.jsx(E5,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:3,fillOpacity:1,fill:"url(#colorCountAdmin)"})]})})})]}),u.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"1.5rem"},children:[u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Language Distribution"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.8rem",color:"var(--text-muted)"},children:"Code submissions by language"})]}),u.jsx("div",{style:{width:"100%",height:"200px"},children:u.jsx(Xw,{children:u.jsxs(WJ,{children:[u.jsx(v5,{data:t.languageStats,cx:"50%",cy:"50%",innerRadius:55,outerRadius:80,paddingAngle:4,dataKey:"value",children:t.languageStats.map((c,f)=>u.jsx(Ix,{fill:T1[f%T1.length]},`cell-${f}`))}),u.jsx(xS,{contentStyle:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px"}})]})})}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginTop:"1rem"},children:t.languageStats.map((c,f)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[u.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"3px",background:T1[f%T1.length]}}),u.jsx("span",{style:{color:"var(--text-muted)"},children:c.name}),u.jsx("span",{style:{marginLeft:"auto",fontWeight:600},children:c.value})]},c.name))})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"1.5rem"},children:[u.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"1.5rem",maxHeight:"420px",display:"flex",flexDirection:"column"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"linear-gradient(135deg, #6366f1, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Tu,{size:18,color:"white"})}),u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Recent Activity"}),u.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:"Live platform submissions"})]})]}),u.jsxs("button",{style:{padding:"0.5rem 1rem",fontSize:"0.75rem",fontWeight:600,background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-muted)",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.4rem"},children:[u.jsx(J1,{size:12})," Refresh"]})]}),u.jsx("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.recentSubmissions.map((c,f)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"var(--bg-tertiary)",borderRadius:"12px",border:"1px solid var(--border-color)",transition:"all 0.2s ease"},children:[u.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:c.status==="accepted"?"#10b981":"#ef4444",boxShadow:`0 0 12px ${c.status==="accepted"?"rgba(16, 185, 129, 0.5)":"rgba(239, 68, 68, 0.5)"}`}}),u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:c.studentName}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.25rem"},children:[u.jsx(vi,{size:11}),new Date(c.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),u.jsx("span",{style:{opacity:.5},children:""}),u.jsx("span",{children:"submitted a solution"})]})]}),u.jsxs("div",{style:{padding:"0.4rem 0.8rem",borderRadius:"8px",fontSize:"0.85rem",fontWeight:700,background:c.status==="accepted"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:c.status==="accepted"?"#10b981":"#ef4444"},children:[c.score,"%"]})]},c.id))})]}),u.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"20px",padding:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.25rem"},children:[u.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"linear-gradient(135deg, #f59e0b, #fbbf24)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(es,{size:18,color:"white"})}),u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Top Performers"}),u.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-muted)"},children:"Leading students"})]})]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.studentPerformance.slice(0,5).map((c,f)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:f===0?"linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05))":"var(--bg-tertiary)",borderRadius:"12px",border:`1px solid ${f===0?"rgba(251, 191, 36, 0.3)":"var(--border-color)"}`},children:[u.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:f===0?"linear-gradient(135deg, #fbbf24, #f59e0b)":f===1?"linear-gradient(135deg, #94a3b8, #64748b)":f===2?"linear-gradient(135deg, #d97706, #b45309)":"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:700,color:f<3?"white":"var(--text-muted)"},children:f<3?u.jsx(es,{size:14}):`#${f+1}`}),u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:c.name}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[c.count," submissions"]})]}),u.jsxs("div",{style:{fontSize:"1rem",fontWeight:700,color:c.score>=80?"#10b981":c.score>=60?"#f59e0b":"#ef4444"},children:[c.score,"%"]})]},c.name))})]})]})]})}function iXe(){const[t,e]=T.useState([]),[n,r]=T.useState(!0),[s,a]=T.useState(null);return T.useEffect(()=>{Ve.get(`${vn}/allocations`).then(i=>{e(i.data),r(!1)}).catch(i=>r(!1))},[]),n?u.jsx("div",{className:"loading-spinner"}):u.jsxs("div",{className:"animate-fadeIn",children:[u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:800,margin:0},children:"Mentor Allocations"}),u.jsx("p",{style:{color:"var(--text-muted)",margin:"0.25rem 0 0 0"},children:"Manage and view student-mentor assignments"})]}),u.jsx("div",{style:{display:"grid",gap:"1rem"},children:t.map(i=>u.jsxs("div",{className:"card",style:{padding:0,overflow:"hidden"},children:[u.jsxs("div",{style:{padding:"1.5rem 2rem",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",background:s===i.mentorId?"rgba(59, 130, 246, 0.05)":"transparent"},onClick:()=>a(s===i.mentorId?null:i.mentorId),children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem"},children:[u.jsx("div",{className:"avatar-circle",style:{background:"linear-gradient(135deg, #3b82f6, #06b6d4)"},children:i.mentorName.charAt(0)}),u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:i.mentorName}),u.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"var(--text-muted)"},children:i.mentorEmail})]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[u.jsxs("div",{style:{textAlign:"right"},children:[u.jsx("span",{style:{fontSize:"0.9rem",fontWeight:600},children:i.students.length}),u.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginLeft:"0.5rem"},children:"Students"})]}),u.jsx("div",{style:{transform:s===i.mentorId?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"},children:u.jsx(kl,{size:18,style:{transform:"rotate(90deg)",color:"var(--text-muted)"}})})]})]}),s===i.mentorId&&u.jsx("div",{style:{padding:"0 2rem 1.5rem",borderTop:"1px solid var(--border-color)"},children:u.jsx("div",{className:"table-container",style:{marginTop:"1.5rem",background:"var(--bg-tertiary)",borderRadius:"0.75rem"},children:u.jsxs("table",{style:{margin:0},children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Student Name"}),u.jsx("th",{children:"Email"}),u.jsx("th",{children:"Batch"}),u.jsx("th",{children:"ID"})]})}),u.jsx("tbody",{children:i.students.map(o=>u.jsxs("tr",{children:[u.jsx("td",{children:o.name}),u.jsx("td",{children:o.email}),u.jsx("td",{children:o.batch}),u.jsx("td",{style:{fontSize:"0.75rem",fontFamily:"monospace",color:"var(--text-muted)"},children:o.id})]},o.id))})]})})})]},i.mentorId))})]})}function oXe(){const[t,e]=T.useState([]),[n,r]=T.useState(!0),[s,a]=T.useState(null);if(T.useEffect(()=>{Ve.get(`${vn}/leaderboard`).then(l=>{e(l.data),r(!1)}).catch(l=>r(!1))},[]),n)return u.jsx("div",{className:"loading-spinner"});const i=l=>l===1?u.jsx(es,{size:24,style:{color:"#fbbf24"}}):l===2?u.jsx(mi,{size:24,style:{color:"#94a3b8"}}):l===3?u.jsx(mi,{size:24,style:{color:"#b45309"}}):u.jsxs("span",{style:{fontWeight:600,color:"var(--text-muted)"},children:["#",l]}),o=l=>l.violations?(l.violations.tabSwitches||0)+(l.violations.copyPaste||0)+(l.violations.cameraBlocked||0)+(l.violations.phoneDetection||0)+(l.violations.integrityViolations||0)+(l.violations.plagiarism||0):0;return u.jsxs("div",{className:"card animate-fadeIn",style:{padding:"0",overflow:"hidden"},children:[u.jsxs("div",{style:{padding:"2rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[u.jsx(es,{size:32,className:"text-primary"}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0},children:"Global Performance Ranking"}),u.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Real-time ranking of students across all mentors"})]})]}),u.jsx("div",{className:"table-container",children:u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Rank"}),u.jsx("th",{children:"Student Name"}),u.jsx("th",{children:"Submissions"}),u.jsx("th",{children:"Avg. Score"}),u.jsx("th",{children:"Violations"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Actions"})]})}),u.jsx("tbody",{children:t.map((l,c)=>{const p=o(l)>0||l.violations?.plagiarism>0;return u.jsxs("tr",{children:[u.jsx("td",{children:u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:i(c+1)})}),u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{className:"avatar-circle",children:l.name.charAt(0)}),u.jsx("span",{children:l.name})]})}),u.jsx("td",{children:l.totalSubmissions}),u.jsx("td",{children:u.jsxs("span",{style:{fontWeight:700,color:"var(--primary)"},children:[l.avgScore,"%"]})}),u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[l.violations?.tabSwitches>0&&u.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",display:"flex",alignItems:"center",gap:"4px"},title:"Tab Switches",children:[u.jsx(An,{size:10})," ",l.violations.tabSwitches]}),l.violations?.cameraBlocked>0&&u.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"4px"},title:"Camera Blocked",children:[" ",l.violations.cameraBlocked]}),l.violations?.phoneDetection>0&&u.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"4px"},title:"Phone Detected",children:[" ",l.violations.phoneDetection]}),l.violations?.copyPaste>0&&u.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",display:"flex",alignItems:"center",gap:"4px"},title:"Copy/Paste Attempts",children:[" ",l.violations.copyPaste]}),l.violations?.plagiarism>0&&u.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",display:"flex",alignItems:"center",gap:"4px"},title:"Plagiarism",children:[u.jsx(un,{size:10})," ",l.violations.plagiarism]}),!p&&u.jsx("span",{style:{fontSize:"0.75rem",color:"#10b981"},children:u.jsx(an,{size:14})})]})}),u.jsx("td",{children:u.jsx("div",{style:{width:"100px",height:"8px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"10px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${l.avgScore}%`,height:"100%",background:p?"var(--warning)":"var(--primary)"}})})}),u.jsx("td",{children:u.jsxs("button",{onClick:()=>a({id:l.studentId,name:l.name}),style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.5rem 0.85rem",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.75rem",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.3)"},title:"Generate comprehensive report",children:[u.jsx(Wa,{size:14}),"Report"]})})]},l.studentId)})})]})})]}),s&&u.jsx(qJ,{studentId:s.id,studentName:s.name,onClose:()=>a(null),requestedBy:"Administrator",requestedByRole:"admin"})]})}function lXe(){const[t,e]=T.useState([]),[n,r]=T.useState(!0);return T.useEffect(()=>{Ve.get(`${vn}/mentor-leaderboard`).then(s=>{e(s.data),r(!1)}).catch(s=>r(!1))},[]),n?u.jsx("div",{className:"loading-spinner"}):u.jsx("div",{className:"card animate-fadeIn",style:{padding:"0",overflow:"hidden"},children:u.jsxs("div",{style:{padding:"2rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[u.jsx(mi,{size:32,style:{color:"#8b5cf6"}}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0},children:"Global Mentor Leaderboard"}),u.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Ranking mentors by student success and platform engagement"})]})]}),u.jsx("div",{className:"table-container",children:u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Mentor"}),u.jsx("th",{children:"Students"}),u.jsx("th",{children:"Content Created"}),u.jsx("th",{children:"Total Submissions"}),u.jsx("th",{children:"Avg. Student Score"})]})}),u.jsx("tbody",{children:t.map(s=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{className:"avatar-circle",style:{background:"linear-gradient(135deg, #8b5cf6, #3b82f6)"},children:s.name.charAt(0)}),u.jsx("span",{children:s.name})]})}),u.jsx("td",{children:s.studentCount}),u.jsxs("td",{children:[s.totalContent," items"]}),u.jsx("td",{children:s.totalSubmissions}),u.jsx("td",{children:u.jsxs("span",{style:{fontWeight:700,color:"#8b5cf6"},children:[s.avgStudentScore,"%"]})})]},s.mentorId))})]})})]})})}function cXe(){const[t,e]=T.useState([]),[n,r]=T.useState([]),[s,a]=T.useState(!0),[i,o]=T.useState(""),[l,c]=T.useState("all"),[f,p]=T.useState(null),[m,y]=T.useState(null),[b,v]=T.useState(!1),x=()=>{a(!0),Promise.all([Ve.get(`${vn}/submissions`),Ve.get(`${vn}/aptitude-submissions`)]).then(([$,_])=>{const z=($.data||[]).map(R=>({...R,subType:"code"})),L=(_.data||[]).map(R=>({...R,subType:"aptitude",itemTitle:R.testTitle,language:"Aptitude"}));e(z),r(L),a(!1)}).catch($=>a(!1))};T.useEffect(()=>{x()},[]);const S=()=>{const $=k();if($.length===0){alert("No submissions to download");return}const _=["Student Name","Student Email","Type","Problem/Test Title","Language","Score","Status","Tab Switches","Camera Blocked","Phone Detected","Plagiarism Detected","Submitted At"],z=$.map(X=>[X.studentName||"",X.studentEmail||"",X.subType==="aptitude"?"Aptitude":"Code",X.itemTitle||X.testTitle||"",X.subType==="aptitude"?"N/A":X.language||"N/A",X.score||0,X.status||"",X.integrity?.tabSwitches||X.tabSwitches||0,X.cameraBlockedCount||0,X.phoneDetectionCount||0,X.plagiarism?.detected?"Yes":"No",X.submittedAt?new Date(X.submittedAt).toLocaleString():""]),L=[_.join(","),...z.map(X=>X.map(V=>{const Y=String(V);return Y.includes(",")||Y.includes('"')||Y.includes(`
`)?`"${Y.replace(/"/g,'""')}"`:Y}).join(","))].join(`
`),R=new Blob([L],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a"),U=URL.createObjectURL(R);D.setAttribute("href",U),D.setAttribute("download",`submissions_${l}_${new Date().toISOString().split("T")[0]}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)},C=async()=>{if(!(!window.confirm(` WARNING: This will permanently delete ALL submissions from ALL students!

This includes:
 All code submissions
 All aptitude test submissions
 All problem completions
 All task completions

This action CANNOT be undone. Are you sure?`)||!window.confirm(` FINAL CONFIRMATION 

You are about to delete ALL submissions permanently.

Type OK to proceed.`))){v(!0);try{const z=await Ve.delete(`${vn}/submissions`);alert(` Reset Complete!

 Code submissions deleted: ${z.data.deletedCodeSubmissions}
 Aptitude submissions deleted: ${z.data.deletedAptitudeSubmissions}`),x()}catch(z){alert(" Failed to reset submissions: "+(z.response?.data?.error||z.message))}finally{v(!1)}}},E=[...t,...n].sort(($,_)=>new Date(_.submittedAt)-new Date($.submittedAt)),k=()=>(l==="all"?E:l==="code"?t:n).filter(_=>(_.studentName||"").toLowerCase().includes(i.toLowerCase())||(_.itemTitle||_.testTitle||"").toLowerCase().includes(i.toLowerCase())||_.status.toLowerCase().includes(i.toLowerCase())),I=k();return s?u.jsx("div",{className:"loading-spinner"}):u.jsxs("div",{className:"animate-fadeIn",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"2rem"},children:[u.jsxs("div",{children:[u.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:800,margin:0},children:"Submission Archives"}),u.jsx("p",{style:{color:"var(--text-muted)",margin:"0.25rem 0 0 0"},children:"Global audit trail of all submissions"})]}),u.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[u.jsxs("div",{style:{display:"flex",borderRadius:"8px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[u.jsxs("button",{onClick:()=>c("all"),style:{padding:"0.5rem 1rem",background:l==="all"?"var(--primary)":"transparent",border:"none",color:l==="all"?"white":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem"},children:["All (",E.length,")"]}),u.jsxs("button",{onClick:()=>c("code"),style:{padding:"0.5rem 1rem",background:l==="code"?"var(--primary)":"transparent",border:"none",color:l==="code"?"white":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem"},children:[" Code (",t.length,")"]}),u.jsxs("button",{onClick:()=>c("aptitude"),style:{padding:"0.5rem 1rem",background:l==="aptitude"?"#8b5cf6":"transparent",border:"none",color:l==="aptitude"?"white":"var(--text-muted)",cursor:"pointer",fontSize:"0.85rem"},children:[" Aptitude (",n.length,")"]})]}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx(B$,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),u.jsx("input",{type:"text",placeholder:"Search student, problem or status...",style:{padding:"0.6rem 1rem 0.6rem 2.5rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"white",width:"300px"},value:i,onChange:$=>o($.target.value)})]}),u.jsxs("button",{onClick:S,disabled:I.length===0,style:{padding:"0.6rem 1rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",color:"#10b981",cursor:I.length===0?"not-allowed":"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem",opacity:I.length===0?.5:1,transition:"all 0.2s ease"},onMouseEnter:$=>{I.length>0&&($.target.style.background="rgba(16, 185, 129, 0.2)")},onMouseLeave:$=>{$.target.style.background="rgba(16, 185, 129, 0.1)"},children:[u.jsx(nW,{size:16}),"Download CSV"]}),u.jsxs("button",{onClick:C,disabled:b||E.length===0,style:{padding:"0.6rem 1rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",color:"#ef4444",cursor:b||E.length===0?"not-allowed":"pointer",fontSize:"0.85rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem",opacity:b||E.length===0?.5:1,transition:"all 0.2s ease"},onMouseEnter:$=>{!b&&E.length>0&&($.target.style.background="rgba(239, 68, 68, 0.2)")},onMouseLeave:$=>{$.target.style.background="rgba(239, 68, 68, 0.1)"},children:[u.jsx(Iu,{size:16}),b?"Resetting...":"Reset All"]})]})]}),u.jsx("div",{className:"table-container card glass",children:u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Student"}),u.jsx("th",{children:"Type"}),u.jsx("th",{children:"Problem / Test"}),u.jsx("th",{children:"Language"}),u.jsx("th",{children:"Score"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Submitted At"}),u.jsx("th",{children:"Actions"})]})}),u.jsx("tbody",{children:I.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"3rem"},children:"No submissions found"})}):I.map($=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsx("div",{style:{fontWeight:600},children:$.studentName})}),u.jsx("td",{children:u.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:$.subType==="aptitude"?"rgba(139, 92, 246, 0.1)":"rgba(59, 130, 246, 0.1)",color:$.subType==="aptitude"?"#8b5cf6":"var(--primary)"},children:$.subType==="aptitude"?" Aptitude":" Code"})}),u.jsx("td",{children:u.jsx("div",{style:{color:"var(--primary)",fontWeight:500},children:$.itemTitle||$.testTitle})}),u.jsx("td",{children:u.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(59, 130, 246, 0.1)",color:"var(--primary)"},children:$.subType==="aptitude"?"N/A":$.language?.toUpperCase()||"N/A"})}),u.jsxs("td",{style:{fontWeight:700,fontSize:"1.1rem"},children:[$.score,"%"]}),u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",alignItems:"center"},children:[u.jsx("span",{className:`status-badge ${$.status}`,children:$.status}),$.plagiarism?.detected&&u.jsxs("span",{className:"status-badge plagiarized",style:{display:"flex",alignItems:"center",gap:"3px"},children:[u.jsx(un,{size:11})," Plag"]}),($.integrity?.integrityViolation||$.tabSwitches>0)&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(245, 158, 11, 0.15)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[u.jsx(un,{size:10})," ",$.integrity?.tabSwitches||$.tabSwitches||0," Tab"]}),$.cameraBlockedCount>0&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[" ",$.cameraBlockedCount," Cam"]}),$.phoneDetectionCount>0&&u.jsxs("span",{style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"3px"},children:[" ",$.phoneDetectionCount," Phone"]})]})}),u.jsx("td",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:new Date($.submittedAt).toLocaleString()}),u.jsx("td",{children:$.subType==="aptitude"?u.jsxs("button",{onClick:()=>y($),style:{background:"rgba(139, 92, 246, 0.1)",border:"none",color:"#8b5cf6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx(An,{size:14})," Results"]}):u.jsxs("button",{onClick:()=>p($),style:{background:"rgba(59, 130, 246, 0.1)",border:"none",color:"#3b82f6",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx(An,{size:14})," Report"]})})]},$.id))})]})}),f&&u.jsx(uXe,{submission:f,onClose:()=>p(null)}),m&&u.jsx(K$,{submission:m,onClose:()=>y(null)})]})}function uXe({submission:t,onClose:e}){return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content",onClick:n=>n.stopPropagation(),style:{maxWidth:"900px"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title-with-icon",children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:t.status==="accepted"?"linear-gradient(135deg, #10b981, #06b6d4)":"linear-gradient(135deg, #ef4444, #f59e0b)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Wa,{size:20,color:"white"})}),u.jsx("h2",{children:"Detailed Submission Report"})]}),u.jsx("button",{onClick:e,className:"modal-close",children:u.jsx(Mr,{size:20})})]}),u.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem",padding:"1.5rem",background:"rgba(59, 130, 246, 0.05)",borderRadius:"1rem",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Student Name"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600,fontSize:"1.1rem"},children:t.studentName})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submitted At"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:new Date(t.submittedAt).toLocaleString()})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Language"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.language})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem"},children:"Submission Type"}),u.jsx("p",{style:{margin:"0.25rem 0 0",fontWeight:600},children:t.submissionType==="file"?"File Upload":"Code Editor"})]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3rem",marginBottom:"2rem",padding:"2rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:`1px solid ${t.status==="accepted"?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"3rem",fontWeight:800,color:t.status==="accepted"?"#10b981":"#ef4444"},children:t.score}),u.jsx("div",{style:{color:"var(--text-muted)"},children:"AI Evaluation Score"})]}),u.jsxs("div",{style:{padding:"1rem 2rem",borderRadius:"1rem",background:t.status==="accepted"?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:t.status==="accepted"?"#10b981":"#ef4444",fontWeight:700,fontSize:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.status==="accepted"?u.jsx(an,{size:24}):u.jsx(Mr,{size:24}),t.status?.toUpperCase()]})]}),t.plagiarism?.detected&&u.jsxs("div",{className:"plagiarism-banner",style:{marginBottom:"1.5rem"},children:[u.jsx(un,{size:24,color:"#ef4444"}),u.jsxs("div",{children:[u.jsx("strong",{style:{color:"#ef4444"},children:"Plagiarism Detected"}),u.jsxs("p",{style:{margin:"0.25rem 0 0",color:"var(--text-muted)"},children:["This code matches a submission from ",t.plagiarism.copiedFromName]})]})]}),(t.tabSwitches>0||t.copyPasteAttempts>0||t.cameraBlockedCount>0||t.phoneDetectionCount>0)&&u.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[u.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#f59e0b"},children:[u.jsx(un,{size:18})," Proctoring Violations"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[t.tabSwitches>0&&u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx(An,{size:18,color:"#f59e0b"}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.tabSwitches," Tab Switches"]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.tabSwitches*5,25)," pts"]})]})]}),t.copyPasteAttempts>0&&u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(245, 158, 11, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("span",{style:{fontSize:"1.1rem"},children:""}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:600,color:"#f59e0b"},children:[t.copyPasteAttempts," Copy/Paste"]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.copyPasteAttempts*3,15)," pts"]})]})]}),t.cameraBlockedCount>0&&u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("span",{style:{fontSize:"1.1rem"},children:""}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.cameraBlockedCount," Camera Blocked"]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.cameraBlockedCount*10,30)," pts"]})]})]}),t.phoneDetectionCount>0&&u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("span",{style:{fontSize:"1.1rem"},children:""}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:600,color:"#ef4444"},children:[t.phoneDetectionCount," Phone Detected"]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:["Penalty: -",Math.min(t.phoneDetectionCount*15,45)," pts"]})]})]})]}),t.proctoringVideo&&u.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"1rem"},children:""}),u.jsxs("span",{style:{fontSize:"0.85rem",color:"#3b82f6"},children:["Proctoring video recorded: ",t.proctoringVideo]})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(an,{size:18,color:"#3b82f6"})," AI Feedback"]}),u.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"var(--bg-tertiary)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid var(--border-color)"},children:t.feedback||"No feedback provided."})]}),t.aiExplanation&&u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h4",{style:{margin:"0 0 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Tu,{size:18,color:"#8b5cf6"})," AI Explanation (Why this score?)"]}),u.jsx("p",{style:{color:"var(--text-muted)",lineHeight:"1.6",background:"rgba(139, 92, 246, 0.05)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid rgba(139, 92, 246, 0.1)"},children:t.aiExplanation})]}),t.analysis&&u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(P$,{size:18,color:"var(--primary)"})," Detailed Analysis"]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[t.analysis.correctness!==void 0&&u.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[u.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(59, 130, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(an,{size:22,color:"#3b82f6"})}),u.jsxs("div",{style:{flex:1},children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Correctness"}),u.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#3b82f6"},children:t.analysis.correctness})]})]}),t.analysis.efficiency!==void 0&&u.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[u.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(16, 185, 129, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(il,{size:22,color:"#10b981"})}),u.jsxs("div",{style:{flex:1},children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Efficiency"}),u.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#10b981"},children:t.analysis.efficiency})]})]}),t.analysis.codeStyle!==void 0&&u.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[u.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(Yn,{size:22,color:"#8b5cf6"})}),u.jsxs("div",{style:{flex:1},children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Code Style"}),u.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#8b5cf6"},children:t.analysis.codeStyle})]})]}),t.analysis.bestPractices!==void 0&&u.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem 1.25rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"1rem",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[u.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:"rgba(245, 158, 11, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(mi,{size:22,color:"#f59e0b"})}),u.jsxs("div",{style:{flex:1},children:[u.jsx("span",{style:{color:"var(--text-muted)",fontSize:"0.8rem",display:"block",marginBottom:"0.25rem"},children:"Best Practices"}),u.jsx("p",{style:{margin:0,fontWeight:700,fontSize:"1.1rem",color:"#f59e0b"},children:t.analysis.bestPractices})]})]})]})]}),u.jsxs("div",{children:[u.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Submitted Code"}),u.jsx("pre",{style:{background:"#020617",padding:"1.5rem",borderRadius:"0.5rem",overflow:"auto",maxHeight:"300px",fontSize:"0.85rem",fontFamily:"monospace",color:"#e2e8f0",border:"1px solid #334155"},children:t.code})]})]})]})})}function dXe(){const[t,e]=T.useState([]),[n,r]=T.useState(!0),[s,a]=T.useState(!1),[i,o]=T.useState(!1),[l,c]=T.useState({title:"",type:"machine_learning",difficulty:"medium",description:"",requirements:"",deadline:""}),f=b=>{c({title:b.title||"",type:b.type||"machine_learning",difficulty:b.difficulty||"medium",description:b.description||"",requirements:b.requirements||"",deadline:l.deadline}),o(!1),a(!0)},p=()=>{Ve.get(`${vn}/tasks?mentorId=${m0}`).then(b=>{e(b.data),r(!1)}).catch(b=>r(!1))};T.useEffect(()=>{p()},[]);const m=async b=>{b.preventDefault();try{await Ve.post(`${vn}/tasks`,{...l,mentorId:m0}),a(!1),c({title:"",type:"machine_learning",difficulty:"medium",description:"",requirements:"",deadline:""}),p()}catch{alert("Error creating global task")}},y=async b=>{if(window.confirm("Are you sure you want to delete this task?"))try{await Ve.delete(`${vn}/tasks/${b}`),p()}catch{alert("Error deleting task")}};return n?u.jsx("div",{className:"loading-spinner"}):u.jsxs("div",{className:"animate-fadeIn",children:[u.jsxs("div",{className:"admin-hero-card glass",style:{background:"var(--bg-card)",borderRadius:"1.5rem",padding:"2rem",marginBottom:"2rem",border:"1px solid var(--border-color)",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:"-50px",right:"-50px",width:"200px",height:"200px",background:"radial-gradient(circle, var(--primary-alpha) 0%, transparent 70%)",borderRadius:"50%"}}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",zIndex:1},children:[u.jsx("div",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"1rem",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px var(--primary-alpha)"},children:u.jsx(zd,{size:24,color:"white"})}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0,fontSize:"1.75rem",fontWeight:800,color:"var(--text-main)"},children:"Global Tasks Management"}),u.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.95rem"},children:"Create ML/AI tasks visible to all mentors and their students"})]})]})}),u.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[u.jsxs("button",{onClick:()=>o(!0),className:"btn-create-new premium-btn",style:{padding:"1rem 1.5rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",borderRadius:"1rem",fontSize:"1rem",fontWeight:600,transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Va,{size:20})," AI Generate"]}),u.jsxs("button",{onClick:()=>a(!0),className:"btn-create-new premium-btn",style:{padding:"1rem 2rem",background:"var(--primary)",borderRadius:"1rem",fontSize:"1rem",fontWeight:600,transition:"all 0.3s ease"},children:[u.jsx(pa,{size:20})," Create Manually"]})]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"var(--primary-alpha)",color:"var(--primary)"},children:u.jsx(Xr,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Total Tasks"}),u.jsx("span",{className:"stat-value",children:t.length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"var(--success-alpha)",color:"var(--success)"},children:u.jsx(il,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Live Tasks"}),u.jsx("span",{className:"stat-value",children:t.filter(b=>b.status==="live").length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"var(--secondary-alpha)",color:"var(--secondary)"},children:u.jsx(Gh,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Total Completions"}),u.jsx("span",{className:"stat-value",children:t.reduce((b,v)=>b+(v.completedBy?.length||0),0)})]})]})]}),u.jsx("div",{className:"cards-grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(380px, 1fr))"},children:t.length===0?u.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"4rem",opacity:.5},children:[u.jsx(zd,{size:64,style:{marginBottom:"1rem",opacity:.3}}),u.jsx("h3",{children:"No Global Tasks Yet"}),u.jsx("p",{children:"Create your first global task to make it visible to all students!"})]}):t.map(b=>u.jsxs("div",{className:"item-card glass",style:{minHeight:"280px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[u.jsxs("div",{className:"item-card-header",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{padding:"10px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2))",borderRadius:"10px"},children:u.jsx(zd,{size:20,color:"#3b82f6"})}),u.jsxs("div",{children:[u.jsx("span",{style:{fontSize:"0.65rem",color:"#8b5cf6",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.1em"},children:"GLOBAL TASK"}),u.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:b.title})]})]}),u.jsx("span",{className:`status-badge ${b.status}`,children:b.status})]}),u.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem",lineHeight:"1.6",marginBottom:"1rem"},children:b.description}),b.requirements&&u.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.05)",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.8rem",color:"var(--text-muted)"},children:[u.jsx("strong",{style:{color:"#60a5fa"},children:"Requirements:"}),u.jsx("br",{}),b.requirements.split(`
`).slice(0,2).join(`
`),"..."]}),u.jsxs("div",{className:"item-card-footer",style:{paddingTop:"1rem",marginTop:"auto"},children:[u.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[u.jsx("span",{className:`difficulty-badge ${b.difficulty?.toLowerCase()}`,children:b.difficulty}),u.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[b.completedBy?.length||0," completed"]})]}),u.jsx("button",{onClick:()=>y(b.id),style:{background:"rgba(239, 68, 68, 0.1)",border:"none",color:"#ef4444",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.8rem"},children:"Delete"})]})]},b.id))}),s&&u.jsx("div",{className:"modal-overlay",onClick:()=>a(!1),children:u.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),style:{maxWidth:"700px"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title-with-icon",children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #3b82f6, #8b5cf6)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(zd,{size:20,color:"white"})}),u.jsx("h2",{children:"Create Global Task"})]}),u.jsx("button",{onClick:()=>a(!1),className:"modal-close",children:u.jsx(Mr,{size:20})})]}),u.jsx("div",{className:"modal-body premium-form",children:u.jsxs("form",{onSubmit:m,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Task Title"}),u.jsx("input",{type:"text",placeholder:"e.g., Sentiment Analysis Challenge",value:l.title,onChange:b=>c({...l,title:b.target.value}),required:!0})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Task Type"}),u.jsxs("select",{value:l.type,onChange:b=>c({...l,type:b.target.value}),children:[u.jsx("option",{value:"machine_learning",children:"Machine Learning"}),u.jsx("option",{value:"deep_learning",children:"Deep Learning"}),u.jsx("option",{value:"data_science",children:"Data Science"}),u.jsx("option",{value:"nlp",children:"NLP"}),u.jsx("option",{value:"computer_vision",children:"Computer Vision"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Difficulty"}),u.jsxs("select",{value:l.difficulty,onChange:b=>c({...l,difficulty:b.target.value}),children:[u.jsx("option",{value:"easy",children:"Easy"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"hard",children:"Hard"})]})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Description"}),u.jsx("textarea",{rows:"4",placeholder:"Describe the task in detail...",value:l.description,onChange:b=>c({...l,description:b.target.value}),required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Requirements (one per line)"}),u.jsx("textarea",{rows:"4",placeholder:`1. Data Preprocessing
2. Model Training
3. Evaluation Metrics`,value:l.requirements,onChange:b=>c({...l,requirements:b.target.value})})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Deadline (Optional)"}),u.jsx("input",{type:"date",value:l.deadline,onChange:b=>c({...l,deadline:b.target.value})})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"btn-reset",onClick:()=>a(!1),children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-create-new",style:{background:"linear-gradient(135deg, #3b82f6, #8b5cf6)"},children:[u.jsx(zd,{size:18})," Create Global Task"]})]})]})})]})}),u.jsx(Wk,{context:"task",isOpen:i,onClose:()=>o(!1),onGenerate:f})]})}function fXe(){const[t,e]=T.useState([]),[n,r]=T.useState(!0),[s,a]=T.useState(!1),[i,o]=T.useState(!1),[l,c]=T.useState("coding"),[f,p]=T.useState(null),[m,y]=T.useState({title:"",type:"Coding",language:"Python",difficulty:"Medium",description:"",sampleInput:"",expectedOutput:"",deadline:"",status:"live",sqlSchema:"",expectedQueryResult:"",enableProctoring:!1,enableVideoAudio:!1,disableCopyPaste:!1,trackTabSwitches:!1,maxTabSwitches:3}),b=m.type==="SQL"||m.language==="SQL",v=$=>{const _=$.type==="SQL"||$.language==="SQL";y({title:$.title||"",type:$.type||"Coding",language:$.language||"Python",difficulty:$.difficulty||"Medium",description:$.description||"",sampleInput:_?"":$.sampleInput||"",expectedOutput:_?"":$.expectedOutput||"",sqlSchema:_&&($.sqlSchema||$.schema)||"",expectedQueryResult:_&&($.expectedQueryResult||$.expectedResult)||"",deadline:m.deadline,status:$.status||"live",enableProctoring:m.enableProctoring,enableVideoAudio:m.enableVideoAudio,disableCopyPaste:m.disableCopyPaste,trackTabSwitches:m.trackTabSwitches,maxTabSwitches:m.maxTabSwitches}),o(!1),a(!0)},x=()=>{Ve.get(`${vn}/problems?mentorId=${m0}`).then($=>{e($.data),r(!1)}).catch($=>r(!1))};T.useEffect(()=>{x()},[]);const S=async $=>{$.preventDefault();try{await Ve.post(`${vn}/problems`,{...m,mentorId:m0}),a(!1),y({title:"",type:"Coding",language:"Python",difficulty:"Medium",description:"",sampleInput:"",expectedOutput:"",deadline:"",status:"live",sqlSchema:"",expectedQueryResult:"",enableProctoring:!1,enableVideoAudio:!1,disableCopyPaste:!1,trackTabSwitches:!1,maxTabSwitches:3}),x()}catch{alert("Error creating global problem")}},C=async $=>{if(window.confirm("Are you sure you want to delete this problem?"))try{await Ve.delete(`${vn}/problems/${$}`),x()}catch{alert("Error deleting problem")}};if(n)return u.jsx("div",{className:"loading-spinner"});const E=t.filter($=>$.language!=="SQL"&&$.type!=="SQL"),k=t.filter($=>$.language==="SQL"||$.type==="SQL"),I=l==="coding"?E:k;return u.jsxs("div",{className:"animate-fadeIn",children:[u.jsxs("div",{className:"admin-hero-card glass",style:{background:"var(--bg-card)",borderRadius:"1.5rem",padding:"2rem",marginBottom:"2rem",border:"1px solid var(--border-color)",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:"-50px",right:"-50px",width:"200px",height:"200px",background:"radial-gradient(circle, var(--primary-alpha) 0%, transparent 70%)",borderRadius:"50%"}}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",zIndex:1},children:[u.jsx("div",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"1rem",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px var(--primary-alpha)"},children:u.jsx(Yn,{size:24,color:"white"})}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0,fontSize:"1.75rem",fontWeight:800,color:"var(--text-main)"},children:"Global Problems Management"}),u.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.95rem"},children:"Create coding challenges visible to all students platform-wide"})]})]})}),u.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[u.jsxs("button",{onClick:()=>o(!0),className:"btn-create-new premium-btn",style:{padding:"1rem 1.5rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",borderRadius:"1rem",fontSize:"1rem",fontWeight:600,transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Va,{size:20})," AI Generate"]}),u.jsxs("button",{onClick:()=>a(!0),className:"btn-create-new premium-btn",style:{padding:"1rem 2rem",background:"var(--primary)",borderRadius:"1rem",fontSize:"1rem",fontWeight:600,transition:"all 0.3s ease"},children:[u.jsx(pa,{size:20})," Create Manually"]})]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"var(--primary-alpha)",color:"var(--primary)"},children:u.jsx(Ep,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Total Problems"}),u.jsx("span",{className:"stat-value",children:t.length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"var(--success-alpha)",color:"var(--success)"},children:u.jsx(an,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Active Problems"}),u.jsx("span",{className:"stat-value",children:t.filter($=>$.status==="live").length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"var(--warning-alpha)",color:"var(--warning)"},children:u.jsx(es,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Total Solutions"}),u.jsx("span",{className:"stat-value",children:t.reduce(($,_)=>$+(_.completedBy?.length||0),0)})]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",padding:"0.5rem",background:"var(--bg-card)",borderRadius:"12px",width:"fit-content"},children:[u.jsxs("button",{onClick:()=>c("coding"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:l==="coding"?"var(--primary)":"transparent",color:l==="coding"?"white":"var(--text-muted)"},children:[u.jsx(Yn,{size:18}),"Coding Problems",u.jsx("span",{style:{background:l==="coding"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:E.length})]}),u.jsxs("button",{onClick:()=>c("sql"),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",background:l==="sql"?"linear-gradient(135deg, #06b6d4, #0891b2)":"transparent",color:l==="sql"?"white":"var(--text-muted)"},children:[u.jsx(Wa,{size:18}),"SQL Problems",u.jsx("span",{style:{background:l==="sql"?"rgba(255,255,255,0.2)":"var(--bg-dark)",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem"},children:k.length})]})]}),u.jsx("div",{className:"problem-list-grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))"},children:I.length===0?u.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"4rem",opacity:.5},children:[u.jsx(Yn,{size:64,style:{marginBottom:"1rem",opacity:.3}}),u.jsxs("h3",{children:["No ",l==="sql"?"SQL":"Coding"," Problems Yet"]}),u.jsxs("p",{children:["Create your first ",l==="sql"?"SQL":"coding"," problem!"]})]}):I.map($=>u.jsxs("div",{className:"problem-card card glass",style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[u.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[u.jsx("span",{style:{fontSize:"0.65rem",padding:"3px 8px",borderRadius:"4px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(6, 182, 212, 0.2))",color:"#10b981",fontWeight:700},children:"GLOBAL"}),u.jsx("span",{className:"problem-badge",children:$.type?.toUpperCase()}),u.jsx("span",{className:`status-badge ${$.status||"live"}`,style:{fontSize:"0.65rem"},children:$.status||"Active"}),$.proctoring?.enabled&&u.jsxs("span",{style:{fontSize:"0.6rem",padding:"3px 8px",borderRadius:"4px",background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",fontWeight:700,display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx(of,{size:10})," PROCTORED"]})]}),u.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)",background:"rgba(59, 130, 246, 0.1)",padding:"2px 8px",borderRadius:"4px"},children:$.language})]}),u.jsx("h3",{style:{margin:"0.75rem 0",fontSize:"1.2rem"},children:$.title}),u.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",marginBottom:"1rem"},children:$.description}),$.deadline&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.75rem",color:"#f87171",marginBottom:"1rem",background:"rgba(248, 113, 113, 0.05)",padding:"4px 8px",borderRadius:"4px",width:"fit-content"},children:[u.jsx(vi,{size:12})," Deadline: ",new Date($.deadline).toLocaleDateString()]}),u.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"1rem",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[u.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[u.jsx("span",{style:{fontSize:"0.75rem",color:$.difficulty==="Easy"?"#10b981":$.difficulty==="Medium"?"#f59e0b":"#ef4444",fontWeight:700},children:$.difficulty}),u.jsxs("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:[" ",$.completedBy?.length||0," solved"]})]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsxs("button",{onClick:()=>p($),disabled:$.language==="SQL"||$.type==="SQL",style:{background:$.language==="SQL"||$.type==="SQL"?"rgba(100, 116, 139, 0.1)":"rgba(16, 185, 129, 0.1)",border:"none",color:$.language==="SQL"||$.type==="SQL"?"#64748b":"#10b981",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",cursor:$.language==="SQL"||$.type==="SQL"?"not-allowed":"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px",opacity:$.language==="SQL"||$.type==="SQL"?.5:1},title:$.language==="SQL"||$.type==="SQL"?"Test cases not available for SQL problems":"Manage Test Cases",children:[u.jsx(al,{size:14})," Tests"]}),u.jsx("button",{onClick:()=>C($.id),style:{background:"rgba(239, 68, 68, 0.1)",border:"none",color:"#ef4444",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.8rem"},children:"Delete"})]})]})]},$.id))}),s&&u.jsx("div",{className:"modal-overlay",onClick:()=>a(!1),children:u.jsxs("div",{className:"modal-content",onClick:$=>$.stopPropagation(),style:{maxWidth:"750px"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title-with-icon",children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #10b981, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Yn,{size:20,color:"white"})}),u.jsx("h2",{children:"Create Global Coding Problem"})]}),u.jsx("button",{onClick:()=>a(!1),className:"modal-close",children:u.jsx(Mr,{size:20})})]}),u.jsx("div",{className:"modal-body premium-form",children:u.jsxs("form",{onSubmit:S,children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Problem Title"}),u.jsx("input",{type:"text",placeholder:"e.g., Two Sum Problem",value:m.title,onChange:$=>y({...m,title:$.target.value}),required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Problem Type"}),u.jsxs("select",{value:m.type,onChange:$=>{const _=$.target.value;y({...m,type:_,language:_==="SQL"?"SQL":m.language==="SQL"?"Python":m.language})},children:[u.jsx("option",{value:"Coding",children:"Coding"}),u.jsx("option",{value:"SQL",children:"SQL"}),u.jsx("option",{value:"Algorithm",children:"Algorithm"})]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Language"}),u.jsxs("select",{value:m.language,onChange:$=>{const _=$.target.value;y({...m,language:_,type:_==="SQL"?"SQL":m.type==="SQL"?"Coding":m.type})},children:[u.jsx("option",{value:"Python",children:"Python"}),u.jsx("option",{value:"JavaScript",children:"JavaScript"}),u.jsx("option",{value:"Java",children:"Java"}),u.jsx("option",{value:"C++",children:"C++"}),u.jsx("option",{value:"SQL",children:"SQL"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Difficulty"}),u.jsxs("select",{value:m.difficulty,onChange:$=>y({...m,difficulty:$.target.value}),children:[u.jsx("option",{value:"Easy",children:"Easy"}),u.jsx("option",{value:"Medium",children:"Medium"}),u.jsx("option",{value:"Hard",children:"Hard"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Status"}),u.jsxs("select",{value:m.status,onChange:$=>y({...m,status:$.target.value}),children:[u.jsx("option",{value:"live",children:"Live"}),u.jsx("option",{value:"draft",children:"Draft"}),u.jsx("option",{value:"closed",children:"Closed"})]})]})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[u.jsx("label",{className:"form-label",children:"Problem Description"}),u.jsx("textarea",{rows:"5",placeholder:"Describe the problem in detail...",value:m.description,onChange:$=>y({...m,description:$.target.value}),required:!0})]}),b?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[u.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Yn,{size:14,color:"#06b6d4"})," Database Schema (CREATE TABLE statements)"]}),u.jsx("textarea",{rows:"6",placeholder:`CREATE TABLE employees (
  id INT PRIMARY KEY,
  name VARCHAR(100),
  department VARCHAR(50),
  salary DECIMAL(10,2)
);

INSERT INTO employees VALUES (1, 'John', 'IT', 50000);`,value:m.sqlSchema,onChange:$=>y({...m,sqlSchema:$.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}}),u.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Include CREATE TABLE and INSERT statements to set up the test database"})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[u.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(an,{size:14,color:"#10b981"})," Expected Query Result"]}),u.jsx("textarea",{rows:"4",placeholder:`id | name | salary
1  | John | 50000
2  | Jane | 60000`,value:m.expectedQueryResult,onChange:$=>y({...m,expectedQueryResult:$.target.value}),style:{fontFamily:"monospace",fontSize:"0.85rem"}}),u.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"The expected output when the correct SQL query is executed"})]})]}):u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1.5rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Sample Input"}),u.jsx("input",{type:"text",placeholder:"e.g., [2, 7, 11, 15], target = 9",value:m.sampleInput,onChange:$=>y({...m,sampleInput:$.target.value})})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Expected Output"}),u.jsx("input",{type:"text",placeholder:"e.g., [0, 1]",value:m.expectedOutput,onChange:$=>y({...m,expectedOutput:$.target.value})})]})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[u.jsx("label",{className:"form-label",children:"Deadline (Optional)"}),u.jsx("input",{type:"date",value:m.deadline,onChange:$=>y({...m,deadline:$.target.value})})]}),u.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.25rem",background:"rgba(239, 68, 68, 0.05)",borderRadius:"1rem",border:"1px solid rgba(239, 68, 68, 0.15)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[u.jsx(An,{size:20,color:"#ef4444"}),u.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:600,color:"#ef4444"},children:"Proctoring Settings"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",padding:"0.75rem",background:m.enableProctoring?"rgba(239, 68, 68, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[u.jsx("input",{type:"checkbox",checked:m.enableProctoring,onChange:$=>y({...m,enableProctoring:$.target.checked}),style:{width:"18px",height:"18px",accentColor:"#ef4444"}}),u.jsx("span",{style:{fontSize:"0.9rem"},children:"Enable Proctoring"})]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:m.enableProctoring?"pointer":"not-allowed",opacity:m.enableProctoring?1:.5,padding:"0.75rem",background:m.enableVideoAudio?"rgba(139, 92, 246, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[u.jsx("input",{type:"checkbox",checked:m.enableVideoAudio,onChange:$=>y({...m,enableVideoAudio:$.target.checked}),disabled:!m.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#8b5cf6"}}),u.jsx("span",{style:{fontSize:"0.9rem"},children:" Video/Audio Monitoring"})]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:m.enableProctoring?"pointer":"not-allowed",opacity:m.enableProctoring?1:.5,padding:"0.75rem",background:m.disableCopyPaste?"rgba(245, 158, 11, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[u.jsx("input",{type:"checkbox",checked:m.disableCopyPaste,onChange:$=>y({...m,disableCopyPaste:$.target.checked}),disabled:!m.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#f59e0b"}}),u.jsx("span",{style:{fontSize:"0.9rem"},children:" Disable Copy/Paste"})]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:m.enableProctoring?"pointer":"not-allowed",opacity:m.enableProctoring?1:.5,padding:"0.75rem",background:m.trackTabSwitches?"rgba(16, 185, 129, 0.1)":"transparent",borderRadius:"0.75rem",transition:"all 0.2s"},children:[u.jsx("input",{type:"checkbox",checked:m.trackTabSwitches,onChange:$=>y({...m,trackTabSwitches:$.target.checked}),disabled:!m.enableProctoring,style:{width:"18px",height:"18px",accentColor:"#10b981"}}),u.jsx("span",{style:{fontSize:"0.9rem"},children:" Track Tab Switches"})]})]}),m.enableProctoring&&m.trackTabSwitches&&u.jsxs("div",{style:{marginTop:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("label",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:"Max Tab Switches:"}),u.jsx("input",{type:"number",min:"1",max:"10",value:m.maxTabSwitches,onChange:$=>y({...m,maxTabSwitches:parseInt($.target.value)||3}),style:{width:"80px",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid var(--border-color)",background:"var(--bg-dark)",color:"var(--text-main)"}})]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"btn-reset",onClick:()=>a(!1),children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-create-new",style:{background:"linear-gradient(135deg, #10b981, #06b6d4)"},children:[u.jsx(pa,{size:18})," Create Global Problem"]})]})]})})]})}),u.jsx(Wk,{context:"problem",isOpen:i,onClose:()=>o(!1),onGenerate:v}),f&&u.jsx(GJ,{problemId:f.id,problemTitle:f.title,onClose:()=>p(null)})]})}const py=[{id:"aptitude",label:"Aptitude",icon:""},{id:"verbal",label:"Verbal",icon:""},{id:"logical",label:"Logical",icon:""},{id:"coding",label:"Coding",icon:""},{id:"sql",label:"SQL",icon:""}];function hXe(){const[t,e]=T.useState([]),[n,r]=T.useState(!0),[s,a]=T.useState(!1),[i,o]=T.useState(1),[l,c]=T.useState(null),[f,p]=T.useState("aptitude"),[m,y]=T.useState(null),[b,v]=T.useState({title:"",type:"comprehensive",difficulty:"Medium",duration:180,passingScore:60,description:"",startTime:"",deadline:"",maxAttempts:1,maxTabSwitches:3,status:"draft",sectionConfig:{sections:[{id:"aptitude",enabled:!0,order:1,questionsCount:20,timeMinutes:30},{id:"verbal",enabled:!0,order:2,questionsCount:25,timeMinutes:25},{id:"logical",enabled:!0,order:3,questionsCount:20,timeMinutes:20},{id:"coding",enabled:!0,order:4,questionsCount:2,timeMinutes:50},{id:"sql",enabled:!0,order:5,questionsCount:1,timeMinutes:25}],totalDurationMinutes:180,sectionTimeMode:"fixed"}}),[x,S]=T.useState({aptitude:[],verbal:[],logical:[],coding:[],sql:[]}),[C,E]=T.useState({question:"",options:["","","",""],correctAnswer:0,category:"general",explanation:""}),[k,I]=T.useState({question:"",starterCode:"",language:"Python",testCases:[{input:"",expected_output:""}]}),[$,_]=T.useState({question:"",schema:"",expectedOutput:""}),[z,L]=T.useState([]),[R,D]=T.useState({topic:"",difficulty:"Medium",count:5}),[U,X]=T.useState([]),[V,Y]=T.useState(!1),[B,Z]=T.useState({enabled:!0,trackTabSwitches:!0,maxTabSwitches:3,enableVideoAudio:!0,disableCopyPaste:!0,detectCameraBlocking:!0,detectPhoneUsage:!0,enforceFullscreen:!0,autoSubmitOnViolation:!1}),[J,ae]=T.useState({topic:"",difficulty:"Medium",language:"Python"}),[ee,W]=T.useState({topic:"",difficulty:"Medium"}),[Q,se]=T.useState([]),[fe,Ne]=T.useState([]),[_e,De]=T.useState(!1),[He,he]=T.useState(!1),[Te,Me]=T.useState(!0),ge=async()=>{try{const de=await Ve.get(`${vn}/global-tests`);e(Array.isArray(de.data)?de.data:[])}catch(de){de.response?.status===503?e([]):console.error(de)}finally{r(!1)}},ct=async()=>{try{const de=await Ve.get(`${vn}/global-test-submissions`);L(Array.isArray(de.data)?de.data:[])}catch{L([])}};T.useEffect(()=>{ge(),ct()},[]);const Ye=(de,Fe,Ze)=>{v(we=>({...we,sectionConfig:{...we.sectionConfig,sections:we.sectionConfig.sections.map(Pe=>Pe.id===de?{...Pe,[Fe]:Ze}:Pe)}}))},ft=(de,Fe)=>{Ye(de,"enabled",Fe)},Ke=(de,Fe)=>{S(Ze=>({...Ze,[de]:(Ze[de]||[]).filter((we,Pe)=>Pe!==Fe)}))},Ct=(de,Fe)=>de==="coding"?Fe.map(Ze=>({questionType:"coding",question:Ze.question,starterCode:Ze.starterCode||"",testCases:Ze.testCases||{language:"Python",cases:[]},points:Ze.points??10})):de==="sql"?Fe.map(Ze=>({questionType:"sql",question:Ze.question,starterCode:Ze.starterCode||"",testCases:Ze.testCases||{expectedOutput:""},points:Ze.points??10})):Fe.map(Ze=>({questionType:"mcq",question:Ze.question,options:Ze.options||[Ze.option_1,Ze.option_2,Ze.option_3,Ze.option_4].filter(Boolean),correctAnswer:Ze.correctAnswer??Ze.options?.[Ze.correctAnswer],category:Ze.category||"general",explanation:Ze.explanation||""})),kt=async()=>{if(!J.topic.trim()){alert("Please enter a topic for the coding problem");return}De(!0);try{const de=await Ve.post(`${vn}/ai/generate-coding-problem`,{topic:J.topic,difficulty:J.difficulty,language:J.language});de.data.problem&&se([de.data.problem])}catch(de){console.error("AI Generation error:",de),se([{question:`Write a ${J.language} program to solve: ${J.topic}`,starterCode:J.language==="Python"?`# Write your solution here
def solution():
    pass

# Test your code
solution()`:"// Write your solution here",testCases:[{input:"",expected_output:""}],language:J.language,difficulty:J.difficulty}])}finally{De(!1)}},Wt=()=>{if(Q.length===0)return;const de=Q.map(Fe=>({questionType:"coding",question:Fe.question,starterCode:Fe.starterCode||"",solutionCode:Fe.solutionCode||"",language:Fe.language||J.language,testCases:Fe.testCases||[],hints:Fe.hints||[],explanation:Fe.explanation||"",points:10}));S(Fe=>({...Fe,coding:[...Fe.coding||[],...de]})),se([]),ae({topic:"",difficulty:"Medium",language:"Python"})},Kt=async()=>{if(!ee.topic.trim()){alert("Please enter a topic for the SQL problem");return}he(!0);try{const de=await Ve.post(`${vn}/ai/generate-sql-problem`,{topic:ee.topic,difficulty:ee.difficulty});de.data.problem&&Ne([de.data.problem])}catch(de){console.error("AI Generation error:",de),Ne([{question:`Write a SQL query to: ${ee.topic}`,schema:`-- Sample schema
CREATE TABLE employees (
    id INTEGER PRIMARY KEY,
    name TEXT,
    department TEXT,
    salary INTEGER
);

INSERT INTO employees VALUES (1, 'John', 'Engineering', 50000);`,expectedOutput:`id|name|department|salary
1|John|Engineering|50000`,difficulty:ee.difficulty}])}finally{he(!1)}},jn=()=>{if(fe.length===0)return;const de=fe.map(Fe=>({questionType:"sql",question:Fe.question,starterCode:`${Fe.schema||""}

-- Your query here:`,testCases:{expectedOutput:Fe.expectedOutput||""},solutionQuery:Fe.solutionQuery||"",hints:Fe.hints||[],explanation:Fe.explanation||"",points:10}));S(Fe=>({...Fe,sql:[...Fe.sql||[],...de]})),Ne([]),W({topic:"",difficulty:"Medium"})},Nt=async()=>{if(!b.title.trim()){alert("Enter test title");return}const de=b.sectionConfig?.sections?.find(Oe=>Oe.id==="coding"&&Oe.enabled),Fe=b.sectionConfig?.sections?.find(Oe=>Oe.id==="sql"&&Oe.enabled),Ze=(x.coding||[]).length,we=(x.sql||[]).length;if(de&&Ze<2){alert("Coding section requires at least 2 problems (minimum)");return}if(Fe&&we<1){alert("SQL section requires at least 1 question (minimum)");return}if(Object.values(x).reduce((Oe,et)=>Oe+et.length,0)===0){alert("Add questions in sections");return}try{const Oe={...b,createdBy:l?void 0:m0,proctoring:B.enabled?{enabled:!0,trackTabSwitches:B.trackTabSwitches,maxTabSwitches:B.maxTabSwitches,enableVideoAudio:B.enableVideoAudio,disableCopyPaste:B.disableCopyPaste,detectCameraBlocking:B.detectCameraBlocking,detectPhoneUsage:B.detectPhoneUsage,enforceFullscreen:B.enforceFullscreen,autoSubmitOnViolation:B.autoSubmitOnViolation}:{enabled:!1},maxTabSwitches:B.enabled&&B.trackTabSwitches?B.maxTabSwitches:0};let et=l;l?(await Ve.put(`${vn}/global-tests/${l}`,{...Oe,createdBy:void 0}),await Ve.delete(`${vn}/global-tests/${l}/questions`)):et=(await Ve.post(`${vn}/global-tests`,Oe)).data.id;for(const Rt of py){const nn=x[Rt.id]||[];if(nn.length===0)continue;const rn=Ct(Rt.id,nn);await Ve.post(`${vn}/global-tests/${et}/questions`,{section:Rt.id,questions:rn})}a(!1),o(1),c(null),S({aptitude:[],verbal:[],logical:[],coding:[],sql:[]}),v({title:"",type:"comprehensive",difficulty:"Medium",duration:180,passingScore:60,description:"",startTime:"",deadline:"",maxAttempts:1,maxTabSwitches:3,status:"draft",sectionConfig:b.sectionConfig}),ge()}catch(Oe){alert(Oe.response?.data?.error||"Failed to save test")}},sr=async de=>{if(window.confirm("Delete this global test? This cannot be undone."))try{await Ve.delete(`${vn}/global-tests/${de}`),ge()}catch(Fe){alert(Fe.response?.data?.error||"Delete failed")}},Zt=async de=>{try{const[Fe,Ze]=await Promise.all([Ve.get(`${vn}/global-tests/${de.id}`),Ve.get(`${vn}/global-tests/${de.id}/questions`)]),we=Fe.data,Pe=Array.isArray(Ze.data)?Ze.data:[],Oe={aptitude:[],verbal:[],logical:[],coding:[],sql:[]};Pe.forEach(et=>{const Rt=et.options||[];let nn=et.correctAnswer;if(et.questionType!=="coding"&&et.questionType!=="sql")if(typeof nn=="number"&&nn>=0&&nn<4)nn=nn;else if(typeof nn=="string"&&Rt.length){const Vr=Rt.indexOf(nn);nn=Vr>=0?Vr:/^[0-3]$/.test(nn)?parseInt(nn,10):0}else nn=0;const rn={id:et.id,question:et.question,options:Rt.length?Rt:["","","",""],correctAnswer:nn,category:et.category,explanation:et.explanation,questionType:et.questionType||"mcq",starterCode:et.starterCode,solutionCode:et.solutionCode,testCases:et.testCases,points:et.points};Oe[et.section]&&Oe[et.section].push(rn)}),Me((we.maxTabSwitches??0)>0),v({title:we.title,type:we.type||"comprehensive",difficulty:we.difficulty||"Medium",duration:we.duration??180,passingScore:we.passingScore??60,description:we.description||"",startTime:we.startTime?we.startTime.slice(0,16):"",deadline:we.deadline?we.deadline.slice(0,16):"",maxAttempts:we.maxAttempts??1,maxTabSwitches:we.maxTabSwitches??3,status:we.status||"draft",sectionConfig:we.sectionConfig||b.sectionConfig}),S(Oe),c(we.id),o(1),a(!0)}catch(Fe){alert(Fe.response?.data?.error||"Failed to load test")}},lr=async()=>{Y(!0);try{const de=await Ve.post(`${vn}/ai/generate-aptitude`,R);de.data.questions&&X(de.data.questions)}catch{alert("Error generating questions")}finally{Y(!1)}},ar=()=>{U.length!==0&&(S(de=>({...de,[f]:[...de[f]||[],...U.map(Fe=>({question:Fe.question,options:Fe.options||["","","",""],correctAnswer:Fe.correctAnswer??0,category:Fe.category||"general",explanation:Fe.explanation||""}))]})),X([]))},fn=(de,Fe,Ze,we)=>{S(Pe=>{const Oe=[...Pe[de]||[]];return Oe[Fe]?(Ze==="options"?Oe[Fe]={...Oe[Fe],options:we}:Ze==="correctAnswer"?Oe[Fe]={...Oe[Fe],correctAnswer:we}:Oe[Fe]={...Oe[Fe],[Ze]:we},{...Pe,[de]:Oe}):Pe})},cr=()=>{S(de=>({...de,[f]:[...de[f]||[],{question:"",options:["","","",""],correctAnswer:0,category:"general",explanation:""}]}))},qs=()=>{if(!k.question.trim()){alert("Enter problem description");return}const de=k.testCases.filter(Fe=>Fe.input!==void 0||Fe.expected_output);if(de.length===0||!de.some(Fe=>(Fe.expected_output||"").trim())){alert("Add at least one test case with expected output");return}S(Fe=>({...Fe,coding:[...Fe.coding||[],{questionType:"coding",question:k.question,starterCode:k.starterCode,testCases:{language:k.language,cases:k.testCases.map(Ze=>({input:Ze.input||"",expected_output:Ze.expected_output||""}))},points:10}]})),I({question:"",starterCode:"",language:"Python",testCases:[{input:"",expected_output:""}]})},ia=()=>{if(!$.question.trim()){alert("Enter question text");return}if(!$.schema.trim()){alert("Enter database schema");return}if(!$.expectedOutput.trim()){alert("Enter expected query result");return}S(de=>({...de,sql:[...de.sql||[],{questionType:"sql",question:$.question,starterCode:$.schema,testCases:{expectedOutput:$.expectedOutput},points:10}]})),_({question:"",schema:"",expectedOutput:""})};return n?u.jsx("div",{className:"loading-spinner"}):u.jsxs("div",{className:"animate-fadeIn",children:[u.jsxs("div",{className:"admin-hero-card glass",style:{background:"var(--bg-card)",borderRadius:"1.5rem",padding:"2rem",marginBottom:"2rem",border:"1px solid var(--border-color)",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:"-50px",right:"-50px",width:"200px",height:"200px",background:"radial-gradient(circle, var(--primary-alpha) 0%, transparent 70%)",borderRadius:"50%"}}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",zIndex:1},children:[u.jsx("div",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"1rem",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px var(--primary-alpha)"},children:u.jsx(al,{size:24,color:"white"})}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0,fontSize:"1.75rem",fontWeight:800,color:"var(--text-main)"},children:"Global Complete Tests"}),u.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.95rem"},children:"Aptitude, Verbal, Logical, Coding, SQL  create and manage"})]})]})}),u.jsxs("button",{type:"button",onClick:()=>{a(!0),o(1),c(null),S({aptitude:[],verbal:[],logical:[],coding:[],sql:[]}),X([]),D({topic:"",difficulty:"Medium",count:5})},className:"btn-create-new premium-btn",style:{padding:"1rem 2rem",background:"var(--primary)",borderRadius:"1rem",fontSize:"1rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(pa,{size:20})," Create Global Test"]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"var(--primary-alpha)",color:"var(--primary)"},children:u.jsx(al,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Total Tests"}),u.jsx("span",{className:"stat-value",children:t.length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"var(--success-alpha)",color:"var(--success)"},children:u.jsx(an,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Live"}),u.jsx("span",{className:"stat-value",children:t.filter(de=>de.status==="live").length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"var(--warning-alpha)",color:"var(--warning)"},children:u.jsx(Xr,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Submissions"}),u.jsx("span",{className:"stat-value",children:z.length})]})]})]}),t.length===0&&!n?u.jsxs("div",{style:{textAlign:"center",padding:"4rem",opacity:.7},children:[u.jsx(al,{size:64,style:{marginBottom:"1rem",opacity:.3}}),u.jsx("h3",{children:"No global tests yet"}),u.jsx("p",{style:{color:"var(--text-muted)"},children:"Create one to add Aptitude, Verbal, Logical, Coding, and SQL sections."}),u.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:["If you see 503, run: ",u.jsx("code",{children:"node migrate_global_tests.js"})]})]}):u.jsx("div",{className:"problem-list-grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))"},children:t.map(de=>u.jsxs("div",{className:"problem-card card glass",style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[u.jsx("span",{style:{fontSize:"0.65rem",padding:"3px 8px",borderRadius:"4px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(6, 182, 212, 0.2))",color:"#10b981",fontWeight:700},children:"GLOBAL TEST"}),u.jsx("span",{className:`status-badge ${de.status}`,style:{fontSize:"0.65rem"},children:de.status})]}),u.jsx("h3",{style:{margin:"0.75rem 0",fontSize:"1.2rem"},children:de.title}),u.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",marginBottom:"1rem"},children:de.description||"Aptitude, Verbal, Logical, Coding, SQL"}),u.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginBottom:"1rem"},children:[de.duration," min  ",de.totalQuestions??0," questions  Pass ",de.passingScore,"%"]}),u.jsxs("div",{style:{marginTop:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"1rem",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[u.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:de.type}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{type:"button",onClick:()=>Zt(de),style:{background:"rgba(59, 130, 246, 0.15)",border:"none",color:"#3b82f6",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"4px"},children:"Edit"}),u.jsx("button",{type:"button",onClick:()=>sr(de.id),style:{background:"rgba(239, 68, 68, 0.1)",border:"none",color:"#ef4444",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.8rem"},children:"Delete"})]})]})]},de.id))}),s&&u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1500,backdropFilter:"blur(5px)",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:u.jsxs("div",{className:"modal-content",style:{width:"100%",maxWidth:i===1?"min(800px, calc(100vw - 2rem))":"min(900px, calc(100vw - 2rem))",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column",borderRadius:"16px",background:"#1e293b",backgroundImage:"linear-gradient(145deg, rgba(30,41,59,1), rgba(15,23,42,1))",border:"1px solid rgba(139,92,246,0.2)",boxShadow:"0 25px 50px rgba(0,0,0,0.5)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.5rem",borderBottom:"1px solid rgba(139,92,246,0.15)",background:"rgba(15, 23, 42, 0.95)",backdropFilter:"blur(10px)",flexShrink:0,zIndex:10},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{padding:"0.5rem",background:"linear-gradient(135deg, rgba(139,92,246,0.2), rgba(6,182,212,0.2))",borderRadius:"10px"},children:u.jsx(zd,{size:22,color:"#a78bfa"})}),u.jsxs("div",{children:[u.jsxs("h2",{style:{margin:0,fontSize:"1.25rem"},children:[l?"Edit":"Create"," Global Test"]}),u.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:i===1?"Step 1: Basic Settings & Sections":"Step 2: Add Questions to Sections"})]})]}),u.jsx("button",{type:"button",onClick:()=>{a(!1),o(1),c(null)},style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"10px",padding:"0.5rem",cursor:"pointer",color:"white",transition:"all 0.2s"},children:u.jsx(Mr,{size:20})})]}),u.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem"},children:[i===1&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"form-label",children:"Test Title"}),u.jsx("input",{type:"text",placeholder:"e.g. Global Complete Assessment - Feb 2026",value:b.title,onChange:de=>v({...b,title:de.target.value}),style:{width:"100%"}})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Duration (min)  default 180 for Coding+SQL"}),u.jsx("input",{type:"number",min:"30",max:"300",value:b.duration,onChange:de=>v({...b,duration:parseInt(de.target.value)||180})})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Passing Score (%)"}),u.jsx("input",{type:"number",min:"0",max:"100",value:b.passingScore,onChange:de=>v({...b,passingScore:parseInt(de.target.value)||60})})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Status"}),u.jsxs("select",{value:b.status,onChange:de=>v({...b,status:de.target.value}),children:[u.jsx("option",{value:"draft",children:"Draft"}),u.jsx("option",{value:"live",children:"Live"})]})]})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"form-label",children:"Max Attempts"}),u.jsx("input",{type:"number",min:"1",max:"10",value:b.maxAttempts,onChange:de=>v({...b,maxAttempts:parseInt(de.target.value)||1})})]}),u.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.25rem",background:"linear-gradient(135deg, rgba(239,68,68,0.05), rgba(251,191,36,0.05))",borderRadius:"16px",border:"1px solid rgba(239,68,68,0.2)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[u.jsx("div",{style:{padding:"0.5rem",background:"rgba(239,68,68,0.1)",borderRadius:"8px"},children:u.jsx(of,{size:20,color:"#ef4444"})}),u.jsxs("div",{children:[u.jsx("h4",{style:{margin:0,fontSize:"1rem",color:"#ef4444"},children:"Proctoring Settings"}),u.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:"Configure security measures for exam integrity"})]}),u.jsxs("label",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("input",{type:"checkbox",checked:B.enabled,onChange:de=>Z({...B,enabled:de.target.checked})}),u.jsx("span",{style:{fontSize:"0.85rem",fontWeight:600},children:"Enable Proctoring"})]})]}),B.enabled&&u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"0.75rem"},children:[u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",fontSize:"0.85rem"},children:[u.jsx("input",{type:"checkbox",checked:B.trackTabSwitches,onChange:de=>Z({...B,trackTabSwitches:de.target.checked})}),u.jsx(An,{size:16,color:"#f59e0b"}),"Track Tab Switches"]}),B.trackTabSwitches&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"1.5rem"},children:[u.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:"Max:"}),u.jsx("input",{type:"number",min:"1",max:"10",value:B.maxTabSwitches,onChange:de=>Z({...B,maxTabSwitches:parseInt(de.target.value)||3}),style:{width:50,padding:"0.25rem 0.5rem",fontSize:"0.85rem"}})]})]}),u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[u.jsx("input",{type:"checkbox",checked:B.enableVideoAudio,onChange:de=>Z({...B,enableVideoAudio:de.target.checked})}),u.jsx("span",{style:{fontSize:"1rem"},children:""}),"Video/Audio Recording"]}),u.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Record student during test"})]}),u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[u.jsx("input",{type:"checkbox",checked:B.detectCameraBlocking,onChange:de=>Z({...B,detectCameraBlocking:de.target.checked})}),u.jsx("span",{style:{fontSize:"1rem"},children:""}),"Detect Camera Blocking"]}),u.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Flag covered/blocked camera"})]}),u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[u.jsx("input",{type:"checkbox",checked:B.detectPhoneUsage,onChange:de=>Z({...B,detectPhoneUsage:de.target.checked})}),u.jsx("span",{style:{fontSize:"1rem"},children:""}),"AI Phone Detection"]}),u.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Detect mobile phones in view"})]}),u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[u.jsx("input",{type:"checkbox",checked:B.disableCopyPaste,onChange:de=>Z({...B,disableCopyPaste:de.target.checked})}),u.jsx("span",{style:{fontSize:"1rem"},children:""}),"Disable Copy/Paste"]}),u.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Block clipboard actions"})]}),u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[u.jsx("input",{type:"checkbox",checked:B.enforceFullscreen,onChange:de=>Z({...B,enforceFullscreen:de.target.checked})}),u.jsx("span",{style:{fontSize:"1rem"},children:""}),"Enforce Fullscreen"]}),u.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(255,255,255,0.5)"},children:"Required during test"})]}),u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(239,68,68,0.1)",borderRadius:"10px",border:"1px solid rgba(239,68,68,0.2)"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[u.jsx("input",{type:"checkbox",checked:B.autoSubmitOnViolation,onChange:de=>Z({...B,autoSubmitOnViolation:de.target.checked})}),u.jsx(un,{size:16,color:"#ef4444"}),"Auto-Submit on Max Violations"]}),u.jsx("p",{style:{margin:"0.25rem 0 0 1.5rem",fontSize:"0.7rem",color:"rgba(239,68,68,0.7)"},children:"Submit test when violations exceed limit"})]})]})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"form-label",children:"Description (optional)"}),u.jsx("textarea",{placeholder:"Instructions for students",value:b.description,onChange:de=>v({...b,description:de.target.value}),rows:2,style:{width:"100%",resize:"vertical"}})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("h4",{style:{margin:"0 0 0.75rem"},children:"Sections  Coding min 2, SQL min 1 (max set by you)"}),(b.sectionConfig?.sections||[]).map(de=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem",flexWrap:"wrap"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:120},children:[u.jsx("input",{type:"checkbox",checked:!!de.enabled,onChange:Fe=>ft(de.id,Fe.target.checked)}),py.find(Fe=>Fe.id===de.id)?.icon," ",py.find(Fe=>Fe.id===de.id)?.label,de.id==="coding"&&u.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"(min 2)"}),de.id==="sql"&&u.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-muted)"},children:"(min 1)"})]}),u.jsx("input",{type:"number",min:de.id==="coding"?2:de.id==="sql"?1:0,placeholder:"Count",value:de.questionsCount??"",onChange:Fe=>Ye(de.id,"questionsCount",parseInt(Fe.target.value)||0),style:{width:70}}),u.jsx("input",{type:"number",min:"0",placeholder:"Min",value:de.timeMinutes??"",onChange:Fe=>Ye(de.id,"timeMinutes",parseInt(Fe.target.value)||0),style:{width:70}})]},de.id))]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[u.jsx("button",{type:"button",className:"btn-reset",onClick:()=>a(!1),children:"Cancel"}),u.jsx("button",{type:"button",className:"btn-create-new",onClick:()=>o(2),children:"Next: Add Questions"})]})]}),i===2&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap",padding:"0.5rem",background:"rgba(0,0,0,0.2)",borderRadius:"14px",border:"1px solid rgba(255,255,255,0.05)"},children:py.map(de=>{const Fe=f===de.id,Ze=(x[de.id]||[]).length,we={aptitude:{bg:"rgba(139,92,246,0.15)",border:"rgba(139,92,246,0.4)",color:"#a78bfa"},verbal:{bg:"rgba(59,130,246,0.15)",border:"rgba(59,130,246,0.4)",color:"#60a5fa"},logical:{bg:"rgba(245,158,11,0.15)",border:"rgba(245,158,11,0.4)",color:"#fbbf24"},coding:{bg:"rgba(16,185,129,0.15)",border:"rgba(16,185,129,0.4)",color:"#34d399"},sql:{bg:"rgba(6,182,212,0.15)",border:"rgba(6,182,212,0.4)",color:"#22d3ee"}},Pe=we[de.id]||we.aptitude;return u.jsxs("button",{type:"button",onClick:()=>p(de.id),style:{padding:"0.75rem 1.25rem",borderRadius:"10px",border:Fe?`2px solid ${Pe.border}`:"2px solid transparent",background:Fe?Pe.bg:"transparent",color:Fe?Pe.color:"rgba(255,255,255,0.6)",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",fontWeight:Fe?600:400,transition:"all 0.2s ease",flex:"1 1 auto",justifyContent:"center",minWidth:"120px"},children:[u.jsx("span",{style:{fontSize:"1.1rem"},children:de.icon}),u.jsx("span",{children:de.label}),u.jsx("span",{style:{background:Ze>0?Fe?Pe.color:"rgba(255,255,255,0.2)":"rgba(255,255,255,0.1)",color:Ze>0?Fe?"#0f172a":"rgba(255,255,255,0.8)":"rgba(255,255,255,0.4)",padding:"0.15rem 0.5rem",borderRadius:"6px",fontSize:"0.75rem",fontWeight:700,minWidth:"24px",textAlign:"center"},children:Ze})]},de.id)})}),f==="coding"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"card glass",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(16,185,129,0.1), rgba(6,182,212,0.05))",border:"1px solid rgba(16,185,129,0.3)",borderRadius:"16px"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1.1rem",color:"#10b981"},children:[u.jsx(Q1,{size:20})," AI Coding Problem Generator"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem",alignItems:"end"},children:[u.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[u.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"TOPIC / CONCEPT"}),u.jsx("input",{type:"text",placeholder:"e.g., Two Sum, Binary Search, Linked Lists",value:J.topic,onChange:de=>ae({...J,topic:de.target.value}),style:{width:"100%"}})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[u.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"DIFFICULTY"}),u.jsxs("select",{value:J.difficulty,onChange:de=>ae({...J,difficulty:de.target.value}),children:[u.jsx("option",{value:"Easy",children:"Easy"}),u.jsx("option",{value:"Medium",children:"Medium"}),u.jsx("option",{value:"Hard",children:"Hard"})]})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[u.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"LANGUAGE"}),u.jsxs("select",{value:J.language,onChange:de=>ae({...J,language:de.target.value}),children:[u.jsx("option",{value:"Python",children:"Python"}),u.jsx("option",{value:"JavaScript",children:"JavaScript"}),u.jsx("option",{value:"Java",children:"Java"}),u.jsx("option",{value:"C++",children:"C++"})]})]}),u.jsx("button",{type:"button",className:"btn-create-new",onClick:kt,disabled:_e,style:{background:"linear-gradient(135deg, #10b981, #06b6d4)"},children:_e?u.jsxs(u.Fragment,{children:[u.jsx(J1,{size:16,className:"spin"})," Generating..."]}):u.jsxs(u.Fragment,{children:[u.jsx(AA,{size:16})," Generate"]})})]}),Q.length>0&&u.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(16,185,129,0.1)",borderRadius:"12px",border:"1px solid rgba(16,185,129,0.2)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[u.jsxs("span",{style:{fontWeight:600,color:"#10b981"},children:[" Generated ",Q.length," Problem(s)"]}),u.jsxs("button",{type:"button",className:"btn-create-new",onClick:Wt,style:{background:"linear-gradient(135deg, #10b981, #059669)"},children:[u.jsx(pa,{size:16})," Add to Section"]})]}),Q.map((de,Fe)=>u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"8px",marginTop:"0.5rem"},children:[u.jsxs("p",{style:{margin:"0 0 0.5rem",fontWeight:500,color:"white"},children:[de.question?.substring(0,150),"..."]}),u.jsxs("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:[de.testCases?.length||0," test cases"]})]},Fe))]})]}),u.jsxs("div",{style:{padding:"1.5rem",background:"var(--bg-secondary)",borderRadius:"16px",border:"1px solid var(--border-color)"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1rem",color:"var(--text)"},children:[u.jsx(Yn,{size:18})," Manual Entry"]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"form-label",children:"Problem description"}),u.jsx("textarea",{value:k.question,onChange:de=>I({...k,question:de.target.value}),placeholder:"Describe the coding problem...",rows:3,style:{width:"100%",resize:"vertical"}})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"form-label",children:"Starter code (optional)"}),u.jsx("textarea",{value:k.starterCode,onChange:de=>I({...k,starterCode:de.target.value}),placeholder:"def solution():\\n    pass",rows:4,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical"}})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"form-label",children:"Language"}),u.jsxs("select",{value:k.language,onChange:de=>I({...k,language:de.target.value}),children:[u.jsx("option",{value:"Python",children:"Python"}),u.jsx("option",{value:"JavaScript",children:"JavaScript"}),u.jsx("option",{value:"Java",children:"Java"}),u.jsx("option",{value:"C++",children:"C++"})]})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"form-label",children:"Test cases (input  expected output)"}),k.testCases.map((de,Fe)=>u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"0.5rem",marginBottom:"0.5rem",alignItems:"center"},children:[u.jsx("input",{type:"text",placeholder:"Input (stdin)",value:de.input||"",onChange:Ze=>{const we=[...k.testCases];we[Fe]={...we[Fe],input:Ze.target.value},I({...k,testCases:we})}}),u.jsx("input",{type:"text",placeholder:"Expected output",value:de.expected_output||"",onChange:Ze=>{const we=[...k.testCases];we[Fe]={...we[Fe],expected_output:Ze.target.value},I({...k,testCases:we})}}),u.jsx("button",{type:"button",onClick:()=>I({...k,testCases:k.testCases.filter((Ze,we)=>we!==Fe)}),className:"btn-reset",style:{color:"var(--danger)"},children:u.jsx(Mr,{size:18})})]},Fe)),u.jsx("button",{type:"button",className:"btn-reset",style:{fontSize:"0.85rem",marginTop:"0.25rem"},onClick:()=>I({...k,testCases:[...k.testCases,{input:"",expected_output:""}]}),children:"+ Add test case"})]}),u.jsx("button",{type:"button",className:"btn-create-new",onClick:qs,children:"Add this coding problem"})]})]}),f==="sql"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"card glass",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(6,182,212,0.1), rgba(139,92,246,0.05))",border:"1px solid rgba(6,182,212,0.3)",borderRadius:"16px"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1.1rem",color:"#06b6d4"},children:[u.jsx(Q1,{size:20})," AI SQL Problem Generator"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem",alignItems:"end"},children:[u.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[u.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"TOPIC / CONCEPT"}),u.jsx("input",{type:"text",placeholder:"e.g., JOINs, Aggregate Functions, Subqueries",value:ee.topic,onChange:de=>W({...ee,topic:de.target.value}),style:{width:"100%"}})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[u.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)"},children:"DIFFICULTY"}),u.jsxs("select",{value:ee.difficulty,onChange:de=>W({...ee,difficulty:de.target.value}),children:[u.jsx("option",{value:"Easy",children:"Easy"}),u.jsx("option",{value:"Medium",children:"Medium"}),u.jsx("option",{value:"Hard",children:"Hard"})]})]}),u.jsx("button",{type:"button",className:"btn-create-new",onClick:Kt,disabled:He,style:{background:"linear-gradient(135deg, #06b6d4, #8b5cf6)"},children:He?u.jsxs(u.Fragment,{children:[u.jsx(J1,{size:16,className:"spin"})," Generating..."]}):u.jsxs(u.Fragment,{children:[u.jsx(AA,{size:16})," Generate"]})})]}),fe.length>0&&u.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(6,182,212,0.1)",borderRadius:"12px",border:"1px solid rgba(6,182,212,0.2)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[u.jsxs("span",{style:{fontWeight:600,color:"#06b6d4"},children:[" Generated ",fe.length," Problem(s)"]}),u.jsxs("button",{type:"button",className:"btn-create-new",onClick:jn,style:{background:"linear-gradient(135deg, #06b6d4, #0891b2)"},children:[u.jsx(pa,{size:16})," Add to Section"]})]}),fe.map((de,Fe)=>u.jsxs("div",{style:{padding:"0.75rem",background:"rgba(0,0,0,0.2)",borderRadius:"8px",marginTop:"0.5rem"},children:[u.jsxs("p",{style:{margin:"0 0 0.5rem",fontWeight:500,color:"white"},children:[de.question?.substring(0,150),"..."]}),u.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:"Schema included"})]},Fe))]})]}),u.jsxs("div",{style:{padding:"1.5rem",background:"var(--bg-secondary)",borderRadius:"16px",border:"1px solid var(--border-color)"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1rem",color:"var(--text)"},children:[u.jsx(Eu,{size:18})," Manual Entry"]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"form-label",children:"Question / instruction"}),u.jsx("textarea",{value:$.question,onChange:de=>_({...$,question:de.target.value}),placeholder:"e.g. Write a query to return the top 5 employees by salary",rows:2,style:{width:"100%",resize:"vertical"}})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"form-label",children:"Database schema (CREATE TABLE + INSERT)"}),u.jsx("textarea",{value:$.schema,onChange:de=>_({...$,schema:de.target.value}),placeholder:`CREATE TABLE employees (id INT, name TEXT, salary INT);
INSERT INTO employees VALUES (1,'A',100);`,rows:6,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical"}})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"form-label",children:"Expected query result (exact output to match)"}),u.jsx("textarea",{value:$.expectedOutput,onChange:de=>_({...$,expectedOutput:de.target.value}),placeholder:"Paste the expected result as shown by SQLite",rows:4,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem",resize:"vertical"}})]}),u.jsx("button",{type:"button",className:"btn-create-new",onClick:ia,children:"Add this SQL question"})]})]}),f!=="coding"&&f!=="sql"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"card glass",style:{marginBottom:"1.5rem",padding:"1.25rem",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",fontSize:"1rem"},children:[u.jsx(Va,{size:18,style:{color:"var(--primary)"}})," AI Question Generator"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto auto auto",gap:"0.75rem",alignItems:"end",flexWrap:"wrap"},children:[u.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[u.jsx("label",{className:"form-label",children:"TOPIC"}),u.jsx("input",{type:"text",placeholder:"e.g., Number Series, Logical Reasoning",value:R.topic,onChange:de=>D({...R,topic:de.target.value}),style:{width:"100%"}})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[u.jsx("label",{className:"form-label",children:"DIFFICULTY"}),u.jsxs("select",{value:R.difficulty,onChange:de=>D({...R,difficulty:de.target.value}),children:[u.jsx("option",{value:"Easy",children:"Easy"}),u.jsx("option",{value:"Medium",children:"Medium"}),u.jsx("option",{value:"Hard",children:"Hard"})]})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[u.jsx("label",{className:"form-label",children:"COUNT"}),u.jsx("input",{type:"number",min:"1",max:"20",value:R.count,onChange:de=>D({...R,count:parseInt(de.target.value)||1}),style:{width:70}})]}),u.jsxs("button",{type:"button",className:"btn-create-new",onClick:lr,disabled:V,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Va,{size:16})," ",V?"Generating":"Generate"]})]}),U.length>0&&u.jsxs("div",{style:{marginTop:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:[U.length," question(s) generated."]}),u.jsx("button",{type:"button",className:"btn-create-new",onClick:ar,style:{fontSize:"0.9rem"},children:"Add All to Test"})]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:0,fontSize:"1rem"},children:[u.jsx(JU,{size:18,style:{color:"var(--text-muted)"}})," Questions"]}),u.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:[(x[f]||[]).length," questions"]})]}),u.jsxs("div",{style:{maxHeight:"50vh",overflowY:"auto",marginBottom:"1rem"},children:[(x[f]||[]).map((de,Fe)=>u.jsxs("div",{className:"card glass",style:{marginBottom:"1rem",padding:"1.25rem",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[u.jsxs("span",{style:{background:"var(--primary)",color:"white",padding:"0.25rem 0.6rem",borderRadius:"8px",fontWeight:600,fontSize:"0.85rem"},children:["Q",Fe+1]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{type:"button",onClick:()=>y({...de,type:f}),className:"btn-reset",style:{color:"var(--primary)",padding:"0.25rem"},title:"Preview question",children:u.jsx(An,{size:18})}),u.jsx("button",{type:"button",onClick:()=>Ke(f,Fe),className:"btn-reset",style:{color:"var(--danger)",padding:"0.25rem"},title:"Delete question",children:u.jsx(Iu,{size:18})})]})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[u.jsx("label",{className:"form-label",children:"QUESTION TEXT"}),u.jsx("textarea",{value:de.question||"",onChange:Ze=>fn(f,Fe,"question",Ze.target.value),placeholder:"Enter question text...",rows:2,style:{width:"100%",resize:"vertical"}})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"0.75rem"},children:[u.jsx("label",{className:"form-label",children:"ANSWER OPTIONS"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[0,1,2,3].map(Ze=>{const we=de.options||["","","",""],Pe=(de.correctAnswer??0)===Ze;return u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("button",{type:"button",onClick:()=>fn(f,Fe,"correctAnswer",Ze),style:{minWidth:36,height:36,borderRadius:"8px",border:"2px solid "+(Pe?"var(--success)":"var(--border-color)"),background:Pe?"var(--success-alpha)":"var(--bg-secondary)",color:Pe?"var(--success)":"var(--text-muted)",fontWeight:700,cursor:"pointer",flexShrink:0},children:String.fromCharCode(65+Ze)}),u.jsx("input",{type:"text",value:we[Ze]||"",onChange:Oe=>{const et=[...we];et[Ze]=Oe.target.value,fn(f,Fe,"options",et)},placeholder:`Option ${String.fromCharCode(65+Ze)}`,style:{flex:1}})]},Ze)})})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:"var(--success-alpha)",borderRadius:"8px",border:"1px solid var(--success)"},children:[u.jsx(XU,{size:18,style:{color:"var(--success)",flexShrink:0}}),u.jsx("span",{style:{fontSize:"0.9rem",color:"var(--success)",fontWeight:500},children:"Correct Answer:"}),u.jsxs("span",{style:{background:"var(--success)",color:"white",padding:"0.2rem 0.5rem",borderRadius:"6px",fontSize:"0.85rem"},children:["Option ",String.fromCharCode(65+(de.correctAnswer??0))]}),u.jsx("span",{style:{marginLeft:"auto",fontSize:"0.8rem",color:"var(--text-muted)"},children:"Click any option badge to change"})]})]},Fe)),u.jsxs("button",{type:"button",onClick:cr,style:{width:"100%",padding:"1.25rem",border:"2px dashed var(--border-color)",borderRadius:"12px",background:"transparent",color:"var(--text-muted)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"1rem"},children:[u.jsx(pa,{size:20})," Add New Question"]})]})]}),(f==="coding"||f==="sql")&&u.jsxs("div",{style:{marginTop:"1.5rem",marginBottom:"1rem"},children:[u.jsxs("h4",{style:{margin:"0 0 1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(F$,{size:18})," Added in ",py.find(de=>de.id===f)?.label]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem",maxHeight:"300px",overflowY:"auto",paddingRight:"0.5rem"},children:[(x[f]||[]).map((de,Fe)=>u.jsxs("div",{style:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"12px",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem",transition:"all 0.2s",position:"relative"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"var(--primary-alpha)",color:"var(--primary)",fontWeight:700,textTransform:"uppercase"},children:de.language||(f==="sql"?"SQL":"Coding")}),de.difficulty&&u.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:"4px",background:"rgba(255,255,255,0.1)",color:"var(--text-muted)"},children:de.difficulty})]}),u.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[u.jsx("button",{type:"button",onClick:()=>y({...de,type:f}),className:"btn-reset",style:{padding:"4px",color:"var(--primary)",background:"var(--primary-alpha)",borderRadius:"6px"},title:"Preview",children:u.jsx(An,{size:16})}),u.jsx("button",{type:"button",onClick:()=>Ke(f,Fe),className:"btn-reset",style:{padding:"4px",color:"var(--danger)",background:"rgba(239, 68, 68, 0.15)",borderRadius:"6px"},title:"Delete",children:u.jsx(Iu,{size:16})})]})]}),u.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--text)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:"1.5"},children:de.title||de.question}),u.jsxs("div",{style:{marginTop:"auto",fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx(Ep,{size:14}),de.testCases?.length||0," Test Case(s)"]})]},Fe)),(x[f]||[]).length===0&&u.jsx("div",{style:{gridColumn:"1 / -1",padding:"2rem",textAlign:"center",color:"var(--text-muted)",border:"2px dashed var(--border-color)",borderRadius:"12px"},children:"No questions added yet. Use the manual entry or AI generator above."})]})]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"space-between"},children:[u.jsx("button",{type:"button",className:"btn-reset",onClick:()=>o(1),children:"Back"}),u.jsxs("button",{type:"button",className:"btn-create-new",onClick:Nt,children:[l?"Update":"Create"," Test"]})]})]})]})," "]})}),m&&u.jsx(HJ,{question:m,type:m.type||f,onClose:()=>y(null)})]})}function pXe(){const[t,e]=T.useState([]),[n,r]=T.useState(!0),[s,a]=T.useState(!1),[i,o]=T.useState(!1),[l,c]=T.useState(null),[f,p]=T.useState(!1),[m,y]=T.useState([]),[b,v]=T.useState({topic:"",difficulty:"Medium",count:5}),[x,S]=T.useState([]),[C,E]=T.useState({title:"",difficulty:"Medium",duration:30,passingScore:60,maxTabSwitches:3,maxAttempts:1,startTime:"",deadline:"",description:"",status:"live",questions:[]}),[k,I]=T.useState({question:"",options:["","","",""],correctAnswer:0,category:"general",explanation:""}),[$,_]=T.useState(null);T.useEffect(()=>{z(),L()},[]);const z=async()=>{try{const V=await Ve.get(`${vn}/aptitude`);e(V.data),r(!1)}catch(V){console.error("Error fetching tests:",V),r(!1)}},L=async()=>{try{const V=await Ve.get(`${vn}/aptitude-submissions`);S(V.data)}catch(V){console.error("Error fetching submissions:",V)}},R=async()=>{p(!0);try{const V=await Ve.post(`${vn}/ai/generate-aptitude`,b);V.data.questions&&y(V.data.questions)}catch{alert("Error generating questions")}finally{p(!1)}},D=()=>{E(V=>({...V,questions:[...V.questions,...m]})),y([])},U=async V=>{if(window.confirm("Delete this aptitude test?"))try{await Ve.delete(`${vn}/aptitude/${V}`),z()}catch(Y){console.error(Y),alert("Error deleting test")}},X=V=>{E(Y=>({...Y,questions:Y.questions.filter((B,Z)=>Z!==V)}))};return n?u.jsx("div",{className:"loading-spinner"}):u.jsxs("div",{className:"animate-fadeIn",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Xr,{size:28,color:"white"})}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:700},children:"Aptitude Tests"}),u.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:"Create and manage aptitude tests for students"})]})]}),u.jsxs("button",{onClick:()=>a(!0),className:"btn-create-new premium-btn",style:{padding:"1rem 2rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",borderRadius:"1rem",fontSize:"1rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(pa,{size:20})," Create New Test"]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6"},children:u.jsx(Xr,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Total Tests"}),u.jsx("span",{className:"stat-value",children:t.length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"},children:u.jsx(an,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Live Tests"}),u.jsx("span",{className:"stat-value",children:t.filter(V=>V.status==="live").length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"},children:u.jsx(kl,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Submissions"}),u.jsx("span",{className:"stat-value",children:x.length})]})]}),u.jsxs("div",{className:"stat-card glass",children:[u.jsx("div",{className:"stat-icon",style:{background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b"},children:u.jsx(es,{size:24})}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-label",children:"Pass Rate"}),u.jsxs("span",{className:"stat-value",children:[x.length>0?Math.round(x.filter(V=>V.status==="passed").length/x.length*100):0,"%"]})]})]})]}),u.jsxs("div",{className:"card glass",children:[u.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"24px"},children:[u.jsx(Xr,{size:20,style:{color:"#8b5cf6"}})," All Aptitude Tests"]}),u.jsx("div",{className:"table-container",style:{border:"none"},children:u.jsxs("table",{className:"modern-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Test Title"}),u.jsx("th",{children:"Difficulty"}),u.jsx("th",{children:"Questions"}),u.jsx("th",{children:"Duration"}),u.jsx("th",{children:"Pass %"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Actions"})]})}),u.jsx("tbody",{children:t.map(V=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Xr,{size:16,color:"white"})}),u.jsx("span",{style:{fontWeight:500},children:V.title})]})}),u.jsx("td",{children:u.jsx("span",{className:`difficulty-badge ${V.difficulty?.toLowerCase()}`,children:V.difficulty})}),u.jsx("td",{children:V.questionCount||V.totalQuestions}),u.jsxs("td",{children:[V.duration," min"]}),u.jsxs("td",{children:[V.passingScore,"%"]}),u.jsx("td",{children:u.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"20px",background:V.status==="live"?"rgba(16, 185, 129, 0.15)":"rgba(107, 114, 128, 0.15)",color:V.status==="live"?"#10b981":"#6b7280",fontSize:"0.8rem",fontWeight:500},children:V.status})}),u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{onClick:()=>{c(V),o(!0)},style:{padding:"0.4rem 0.8rem",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"6px",color:"#3b82f6",cursor:"pointer",fontSize:"0.8rem"},children:"View"}),u.jsx("button",{onClick:()=>U(V.id),style:{padding:"0.4rem 0.8rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",color:"#ef4444",cursor:"pointer",fontSize:"0.8rem"},children:"Delete"})]})})]},V.id))})]})})]}),s&&u.jsx("div",{className:"modal-overlay",onClick:()=>a(!1),children:u.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title-with-icon",children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Xr,{size:20,color:"white"})}),u.jsx("h2",{children:"Create Aptitude Test"})]}),u.jsx("button",{onClick:()=>a(!1),className:"modal-close",children:u.jsx(Mr,{size:20})})]}),u.jsxs("form",{onSubmit:handleCreateTest,className:"modal-body",children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{className:"form-label",children:[u.jsx("span",{style:{marginRight:"0.5rem"},children:"H"})," Test Title"]}),u.jsx("input",{type:"text",placeholder:"Enter test title...",value:C.title,onChange:V=>E({...C,title:V.target.value}),required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{className:"form-label",children:[u.jsx(vi,{size:14,style:{marginRight:"0.5rem"}})," Duration (mins)"]}),u.jsx("input",{type:"number",min:"5",max:"180",value:C.duration,onChange:V=>E({...C,duration:parseInt(V.target.value)})})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{className:"form-label",children:[u.jsx(J1,{size:14,style:{marginRight:"0.5rem"}})," Attempts"]}),u.jsxs("select",{value:C.maxAttempts,onChange:V=>E({...C,maxAttempts:parseInt(V.target.value)}),children:[u.jsx("option",{value:1,children:"1 Attempt"}),u.jsx("option",{value:2,children:"2 Attempts"}),u.jsx("option",{value:3,children:"3 Attempts"}),u.jsx("option",{value:5,children:"5 Attempts"}),u.jsx("option",{value:-1,children:"Unlimited"})]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{className:"form-label",children:[u.jsx(un,{size:14,style:{marginRight:"0.5rem"}})," Max Tab Switches (Violations)"]}),u.jsx("input",{type:"number",min:"0",max:"20",value:C.maxTabSwitches,onChange:V=>E({...C,maxTabSwitches:parseInt(V.target.value)})}),u.jsx("small",{style:{color:"var(--text-muted)",fontSize:"0.75rem"},children:"Test auto-submits if exceeded"})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{className:"form-label",children:[u.jsx(IA,{size:14,style:{marginRight:"0.5rem"}})," Start Time"]}),u.jsx("input",{type:"datetime-local",value:C.startTime,onChange:V=>E({...C,startTime:V.target.value})})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{className:"form-label",children:[u.jsx(IA,{size:14,style:{marginRight:"0.5rem"}})," End Time (Deadline)"]}),u.jsx("input",{type:"datetime-local",value:C.deadline,onChange:V=>E({...C,deadline:V.target.value})})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Difficulty"}),u.jsxs("select",{value:C.difficulty,onChange:V=>E({...C,difficulty:V.target.value}),children:[u.jsx("option",{value:"Easy",children:"Easy"}),u.jsx("option",{value:"Medium",children:"Medium"}),u.jsx("option",{value:"Hard",children:"Hard"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Passing Score (%)"}),u.jsx("input",{type:"number",min:"0",max:"100",value:C.passingScore,onChange:V=>E({...C,passingScore:parseInt(V.target.value)})})]})]}),u.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[u.jsxs("label",{className:"form-label",children:[u.jsx(Wa,{size:14,style:{marginRight:"0.5rem"}})," Description (Optional)"]}),u.jsx("textarea",{placeholder:"Brief description of the test...",value:C.description,onChange:V=>E({...C,description:V.target.value}),rows:3,style:{width:"100%",resize:"vertical"}})]}),u.jsxs("div",{style:{background:"var(--secondary-alpha)",border:"1px solid var(--secondary)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 1rem",color:"var(--text-primary)"},children:[u.jsx(Va,{size:18,color:"var(--secondary)"})," AI Question Generator"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr auto",gap:"1rem",alignItems:"end"},children:[u.jsxs("div",{className:"form-group",style:{margin:0},children:[u.jsx("label",{className:"form-label",children:"TOPIC"}),u.jsx("input",{type:"text",placeholder:"e.g., Number Series, Logical Reasoning...",value:b.topic,onChange:V=>v({...b,topic:V.target.value})})]}),u.jsxs("div",{className:"form-group",style:{margin:0},children:[u.jsx("label",{className:"form-label",children:"DIFFICULTY"}),u.jsxs("select",{value:b.difficulty,onChange:V=>v({...b,difficulty:V.target.value}),children:[u.jsx("option",{value:"Easy",children:"Easy"}),u.jsx("option",{value:"Medium",children:"Medium"}),u.jsx("option",{value:"Hard",children:"Hard"})]})]}),u.jsxs("div",{className:"form-group",style:{margin:0},children:[u.jsx("label",{className:"form-label",children:"COUNT"}),u.jsx("input",{type:"number",min:"1",max:"20",value:b.count,onChange:V=>v({...b,count:parseInt(V.target.value)})})]}),u.jsxs("button",{type:"button",onClick:R,disabled:f,style:{padding:"0.75rem 1.5rem",background:"var(--primary)",border:"none",borderRadius:"8px",color:"white",fontWeight:600,cursor:f?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Va,{size:16}),f?"Generating...":"Generate"]})]}),m.length>0&&u.jsxs("div",{style:{marginTop:"1rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[u.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--secondary)",fontWeight:600},children:[" Generated ",m.length," questions"]}),u.jsx("button",{type:"button",onClick:D,style:{padding:"0.5rem 1rem",background:"var(--success-alpha)",border:"1px solid var(--success)",borderRadius:"6px",color:"var(--success)",fontSize:"0.85rem",fontWeight:600,cursor:"pointer"},children:"Add All to Test"})]}),u.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",background:"var(--bg-tertiary)",borderRadius:"8px",padding:"0.75rem"},children:m.map((V,Y)=>u.jsxs("div",{style:{padding:"0.5rem",borderBottom:Y<m.length-1?"1px solid var(--border-color)":"none",fontSize:"0.85rem",color:"var(--text-primary)"},children:["Q",Y+1,": ",V.question.substring(0,80),"..."]},Y))})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.25rem",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border-color)"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:0,color:"var(--text-primary)",fontSize:"1rem",fontWeight:600},children:[u.jsx(JU,{size:18,style:{color:"var(--primary)"}})," Questions"]}),u.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--primary)",background:"var(--primary-alpha)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontWeight:500},children:[C.questions.length," question",C.questions.length!==1?"s":""]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[C.questions.map((V,Y)=>u.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:"16px",padding:"1.5rem",border:"1px solid var(--border-color)",boxShadow:"var(--card-shadow)",transition:"all 0.2s ease"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:u.jsxs("span",{style:{background:"linear-gradient(135deg, var(--primary), var(--secondary))",color:"white",padding:"0.4rem 0.8rem",borderRadius:"8px",fontSize:"0.75rem",fontWeight:700,letterSpacing:"0.5px",textTransform:"uppercase"},children:["Q",Y+1]})}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{type:"button",onClick:()=>_({...V,type:"aptitude"}),style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"0.5rem",cursor:"pointer",color:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},title:"Preview Question",children:u.jsx(An,{size:16})}),u.jsx("button",{type:"button",onClick:()=>X(Y),style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",padding:"0.5rem",cursor:"pointer",color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},title:"Delete Question",children:u.jsx(Iu,{size:16})})]})]}),u.jsxs("div",{style:{marginBottom:"1.25rem"},children:[u.jsx("label",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"0.5rem",display:"block"},children:"Question Text"}),u.jsx("input",{type:"text",value:V.question,onChange:B=>{const Z=[...C.questions];Z[Y]={...Z[Y],question:B.target.value},E({...C,questions:Z})},placeholder:"Enter your question here...",style:{width:"100%",padding:"0.875rem 1rem",fontSize:"0.95rem",borderRadius:"10px",border:"2px solid var(--border-color)",background:"var(--bg-primary)",color:"var(--text-primary)",transition:"border-color 0.2s"}})]}),u.jsxs("div",{style:{marginBottom:"1.25rem"},children:[u.jsx("label",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"0.75rem",display:"block"},children:"Answer Options"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.875rem"},children:["A","B","C","D"].map((B,Z)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",background:V.correctAnswer===Z?"var(--success-alpha)":"var(--bg-primary)",padding:"0.5rem",borderRadius:"10px",border:V.correctAnswer===Z?"2px solid var(--success)":"2px solid var(--border-color)",transition:"all 0.2s"},children:[u.jsx("span",{onClick:()=>{const J=[...C.questions];J[Y]={...J[Y],correctAnswer:Z},E({...C,questions:J})},style:{width:"32px",height:"32px",borderRadius:"8px",background:V.correctAnswer===Z?"var(--success)":"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.85rem",color:V.correctAnswer===Z?"white":"var(--text-muted)",flexShrink:0,cursor:"pointer",transition:"all 0.2s",border:V.correctAnswer===Z?"none":"1px solid var(--border-color)"},title:"Click to set as correct answer",children:B}),u.jsx("input",{type:"text",value:V.options[Z]||"",onChange:J=>{const ae=[...C.questions],ee=[...ae[Y].options];ee[Z]=J.target.value,ae[Y]={...ae[Y],options:ee},E({...C,questions:ae})},placeholder:`Option ${B}`,style:{flex:1,padding:"0.625rem 0.875rem",borderRadius:"8px",border:"none",background:"transparent",color:"var(--text-primary)",fontSize:"0.9rem"}})]},Z))})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1rem",background:"var(--success-alpha)",borderRadius:"10px",border:"1px solid var(--success)"},children:[u.jsx(an,{size:18,color:"var(--success)"}),u.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Correct Answer:"}),u.jsxs("span",{style:{background:"var(--success)",color:"white",padding:"0.375rem 0.875rem",borderRadius:"6px",fontWeight:600,fontSize:"0.85rem"},children:["Option ",["A","B","C","D"][V.correctAnswer]]}),u.jsx("span",{style:{marginLeft:"auto",fontSize:"0.75rem",color:"var(--text-muted)"},children:"Click any option badge to change"})]})]},Y)),u.jsxs("button",{type:"button",onClick:()=>{E(V=>({...V,questions:[...V.questions,{question:"",options:["","","",""],correctAnswer:0,category:"general",explanation:""}]}))},style:{padding:"1.25rem",background:"var(--bg-card)",border:"2px dashed var(--border-color)",borderRadius:"16px",color:"var(--text-muted)",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",transition:"all 0.2s",fontSize:"0.95rem"},onMouseOver:V=>{V.currentTarget.style.borderColor="var(--primary)",V.currentTarget.style.color="var(--primary)",V.currentTarget.style.background="var(--primary-alpha)"},onMouseOut:V=>{V.currentTarget.style.borderColor="var(--border-color)",V.currentTarget.style.color="var(--text-muted)",V.currentTarget.style.background="var(--bg-card)"},children:[u.jsx(pa,{size:20})," Add New Question"]})]})]}),u.jsxs("div",{className:"form-actions",style:{borderTop:"1px solid var(--border-color)",paddingTop:"1.5rem",marginTop:"0.5rem"},children:[u.jsxs("button",{type:"button",className:"btn-reset",onClick:()=>a(!1),children:[u.jsx(Mr,{size:16})," Cancel"]}),u.jsxs("button",{type:"submit",className:"btn-create-new",disabled:C.questions.length===0,children:[u.jsx(rW,{size:16})," Create Test"]})]})]})]})}),$&&u.jsx(HJ,{question:$,type:"aptitude",onClose:()=>_(null)}),i&&l&&u.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:u.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),style:{maxWidth:"700px",maxHeight:"80vh",overflowY:"auto"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title-with-icon",children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Xr,{size:20,color:"white"})}),u.jsx("h2",{children:l.title})]}),u.jsx("button",{onClick:()=>o(!1),className:"modal-close",children:u.jsx(Mr,{size:20})})]}),u.jsxs("div",{className:"modal-body",children:[u.jsxs("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem"},children:[l.questionCount||l.totalQuestions," Questions  ",l.duration," minutes  Pass: ",l.passingScore,"%"]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:l.questions?.map((V,Y)=>u.jsxs("div",{style:{background:"var(--bg-tertiary)",borderRadius:"12px",padding:"1.25rem",border:"1px solid var(--border-color)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem"},children:[u.jsxs("span",{style:{background:"linear-gradient(135deg, #8b5cf6, #6366f1)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"6px",fontSize:"0.8rem",fontWeight:600},children:["Q",Y+1]}),u.jsx("span",{style:{fontWeight:500},children:V.question})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",marginLeft:"2.5rem"},children:V.options?.map((B,Z)=>u.jsxs("div",{style:{padding:"0.5rem 0.75rem",background:B===V.correctAnswer?"rgba(16, 185, 129, 0.2)":"rgba(71, 85, 105, 0.3)",borderRadius:"8px",fontSize:"0.85rem",border:B===V.correctAnswer?"1px solid #10b981":"1px solid transparent"},children:[["A","B","C","D"][Z],". ",B]},Z))})]},Y))})]})]})})]})}function HJ({question:t,type:e,onClose:n}){const r=e==="coding"||e==="sql",s=e==="sql"||t.language==="SQL";return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.8)",backdropFilter:"blur(8px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},onClick:n,children:u.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),style:{width:"95vw",height:"90vh",maxWidth:"1400px",background:"#0f172a",borderRadius:"12px",overflow:"hidden",display:"flex",flexDirection:"column",border:"1px solid #334155"},children:[u.jsxs("div",{style:{padding:"1rem 1.5rem",background:"#1e293b",borderBottom:"1px solid #334155",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{padding:"0.5rem",background:"linear-gradient(135deg, #3b82f6, #06b6d4)",borderRadius:"8px"},children:u.jsx(An,{size:20,color:"white"})}),u.jsxs("div",{children:[u.jsx("h2",{style:{margin:0,fontSize:"1.2rem",color:"white"},children:"Student View Preview"}),u.jsx("span",{style:{fontSize:"0.8rem",color:"#94a3b8"},children:"This is exactly how students will see this question"})]})]}),u.jsx("button",{type:"button",onClick:n,style:{background:"transparent",border:"none",color:"#94a3b8",cursor:"pointer"},children:u.jsx(Mr,{size:24})})]}),r&&u.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[u.jsxs("div",{style:{width:"40%",padding:"2rem",borderRight:"1px solid #334155",overflowY:"auto",background:"#0f172a"},children:[u.jsx("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem",color:"#f8fafc"},children:t.title||"Untitled Problem"}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[u.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa",fontSize:"0.8rem"},children:t.difficulty||"Medium"}),u.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",background:"rgba(16, 185, 129, 0.2)",color:"#34d399",fontSize:"0.8rem"},children:t.type==="sql"||s?"SQL":t.language||"Python"})]}),u.jsx("h3",{style:{fontSize:"1rem",color:"#e2e8f0",marginTop:"1.5rem",marginBottom:"0.5rem"},children:"Problem Description"}),u.jsx("div",{style:{color:"#cbd5e1",lineHeight:"1.7",whiteSpace:"pre-wrap"},children:t.description||t.question}),s&&t.sqlSchema&&u.jsxs("div",{style:{marginTop:"1.5rem"},children:[u.jsx("h3",{style:{fontSize:"1rem",color:"#e2e8f0",marginBottom:"0.5rem"},children:"Database Schema"}),u.jsx("pre",{style:{background:"#1e293b",padding:"1rem",borderRadius:"8px",color:"#94a3b8",overflowX:"auto",fontSize:"0.85rem"},children:t.sqlSchema||t.schema})]})]}),u.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"#1e1e1e"},children:[u.jsxs("div",{style:{padding:"0.5rem 1rem",background:"#2d2d2d",borderBottom:"1px solid #3e3e3e",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("span",{style:{color:"#cccccc",fontSize:"0.9rem"},children:["main.",s?"sql":t.language==="Python"?"py":t.language==="JavaScript"?"js":"txt"]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{style:{padding:"0.25rem 0.75rem",background:"#4b5563",border:"none",borderRadius:"4px",color:"white",fontSize:"0.8rem",cursor:"not-allowed"},children:"Run Code"}),u.jsx("button",{style:{padding:"0.25rem 0.75rem",background:"#2563eb",border:"none",borderRadius:"4px",color:"white",fontSize:"0.8rem",cursor:"not-allowed"},children:"Submit"})]})]}),u.jsx("div",{style:{flex:1},children:u.jsx(Oy,{height:"100%",defaultLanguage:s?"sql":t.language?.toLowerCase()||"python",defaultValue:t.codeStub||t.question||"// Write your code here...",theme:"vs-dark",options:{readOnly:!0,minimap:{enabled:!1},fontSize:14,padding:{top:16}}})})]})]}),!r&&u.jsx("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",width:"100%",overflowY:"auto",display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:u.jsxs("div",{style:{width:"100%",background:"#1e293b",padding:"2rem",borderRadius:"16px",border:"1px solid #334155",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1.5rem"},children:[u.jsx("span",{style:{background:"#3b82f6",color:"white",padding:"0.25rem 0.75rem",borderRadius:"8px",fontSize:"0.9rem",fontWeight:600},children:"Question Preview"}),u.jsx("span",{style:{color:"#94a3b8"},children:"1 Point"})]}),u.jsx("h3",{style:{fontSize:"1.25rem",color:"#f8fafc",marginBottom:"2rem",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:t.question}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:t.options?.map((a,i)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",borderRadius:"12px",border:"1px solid #334155",background:"#0f172a",cursor:"pointer",transition:"all 0.2s",borderColor:i===(t.correctAnswer||0)?"#10b981":"#334155"},children:[u.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",border:"2px solid "+(i===(t.correctAnswer||0)?"#10b981":"#64748b"),display:"flex",alignItems:"center",justifyContent:"center",background:i===(t.correctAnswer||0)?"rgba(16, 185, 129, 0.1)":"transparent"},children:i===(t.correctAnswer||0)&&u.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#10b981"}})}),u.jsx("span",{style:{color:"#e2e8f0",fontSize:"1rem"},children:a}),i===(t.correctAnswer||0)&&u.jsxs("span",{style:{marginLeft:"auto",color:"#10b981",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[u.jsx(an,{size:14})," Correct Option"]})]},i))})]})})]})})}const KJ=T.createContext(null),XJ=T.createContext(null),Zm=()=>T.useContext(KJ),mXe=()=>T.useContext(XJ);function NA({children:t,allowedRoles:e}){const{user:n}=Zm();return n?e&&!e.includes(n.role)?u.jsx(Bh,{to:`/${n.role}`,replace:!0}):t:u.jsx(Bh,{to:"/login",replace:!0})}const gXe="https://mentor-hub-backend-tkil.onrender.com/api";function yXe(){const[t,e]=T.useState(null),[n,r]=T.useState(localStorage.getItem("theme")||"light"),[s,a]=T.useState(!0),i=j$();T.useEffect(()=>{const f=localStorage.getItem("currentUser");f&&e(JSON.parse(f)),a(!1)},[]),T.useEffect(()=>{document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n)},[n]);const o=async(f,p)=>{try{const m=await fetch(`${gXe}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f,password:p})}),y=await m.json();if(!m.ok)throw new Error(y.error||"Login failed");return e(y.user),localStorage.setItem("currentUser",JSON.stringify(y.user)),i(`/${y.user.role}`),{success:!0}}catch(m){return{success:!1,error:m.message}}},l=()=>{e(null),localStorage.removeItem("currentUser"),i("/login")},c=()=>{r(f=>f==="light"?"dark":"light")};return s?u.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"var(--bg-secondary)"},children:u.jsx("div",{className:"loading-spinner"})}):u.jsx(KJ.Provider,{value:{user:t,login:o,logout:l},children:u.jsx(XJ.Provider,{value:{theme:n,toggleTheme:c},children:u.jsxs(AS,{children:[u.jsx(On,{path:"/login",element:t?u.jsx(Bh,{to:`/${t.role}`,replace:!0}):u.jsx(aae,{})}),u.jsx(On,{path:"/student/*",element:u.jsx(NA,{allowedRoles:["student"],children:u.jsx(M3e,{})})}),u.jsx(On,{path:"/mentor/*",element:u.jsx(NA,{allowedRoles:["mentor"],children:u.jsx(QKe,{})})}),u.jsx(On,{path:"/admin/*",element:u.jsx(NA,{allowedRoles:["admin"],children:u.jsx(sXe,{})})}),u.jsx(On,{path:"/",element:t?u.jsx(Bh,{to:`/${t.role}`,replace:!0}):u.jsx(Bh,{to:"/login",replace:!0})}),u.jsx(On,{path:"*",element:u.jsx(Bh,{to:"/",replace:!0})})]})})})}Ote.createRoot(document.getElementById("root")).render(u.jsx(xu.StrictMode,{children:u.jsx(Jne,{children:u.jsx(yXe,{})})}));
